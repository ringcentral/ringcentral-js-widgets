{"version":3,"sources":["integration-test/mock/index.js"],"names":["createSDK","mockApi","authentication","logout","tokenRefresh","presence","presenceUpdate","dialingPlan","extensionInfo","extensionList","accountInfo","apiInfo","messageSync","messageList","updateMessageStatus","authzProfile","blockedNumber","forwardingNumber","phoneNumber","accountPhoneNumber","subscription","numberParser","sms","addressBook","callLog","device","conferencing","numberParse","conferenceCall","activeCalls","restore","reset","mockForbidden","mockClient","ringOut","ringOutUpdate","meeting","serviceInfo","mockForLogin","require","polyfill","RingCentral","fetchMock","dialingPlanBody","extensionBody","extensionListBody","accountBody","subscriptionBody","apiInfoBody","messageSyncBody","authzProfileBody","blockedNumberBody","forwardingNumberBody","phoneNumberBody","accountPhoneNumberBody","presenceBody","numberParserBody","smsBody","ringOutBody","messageItemBody","messageListBody","addressBookBody","callLogBody","deviceBody","conferencingBody","activeCallsBody","meetingBody","serviceInfoBody","conferenceCallBody","numberParseBody","mockServer","options","opts","appKey","appSecret","server","Request","constructor","Response","Headers","fetch","bind","refreshDelayMs","redirectUri","cachePrefix","method","path","url","body","status","statusText","headers","isOnce","responseHeaders","isJson","mockUrl","mock","once","sendAsJson","times","access_token","token_type","expires_in","refresh_token","refresh_token_expires_in","scope","expireTime","Date","getTime","owner_id","endpoint_id","failure","message","error_description","description","id","uri","extension","extensionNumber","presenceStatus","telephonyStatus","userStatus","dndStatus","extensionId","mockResponse","syncInfo","syncType","syncToken","syncTime","now","toISOString","homeCountry","session","on","client","service","mockAuthzProfile","mockExtensionInfo","mockForwardingNumber","mockMessageSync","mockConferencing","mockActiveCalls"],"mappings":"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","file":"index.js","sourcesContent":["require('es6-promise').polyfill();\n// require('./pubnub');\nconst RingCentral = require('ringcentral');\nconst fetchMock = require('fetch-mock');\n\nconst dialingPlanBody = require('./data/dialingPlan');\nconst extensionBody = require('./data/extensionInfo');\nconst extensionListBody = require('./data/extension');\nconst accountBody = require('./data/accountInfo');\nconst subscriptionBody = require('./data/subscription');\nconst apiInfoBody = require('./data/subscription');\nconst messageSyncBody = require('./data/messageSync');\nconst authzProfileBody = require('./data/authzProfile');\nconst blockedNumberBody = require('./data/blockedNumber');\nconst forwardingNumberBody = require('./data/forwardingNumber');\nconst phoneNumberBody = require('./data/phoneNumber');\nconst accountPhoneNumberBody = require('./data/accountPhoneNumber');\nconst presenceBody = require('./data/presence.json');\nconst numberParserBody = require('./data/numberParser.json');\nconst smsBody = require('./data/sms.json');\nconst ringOutBody = require('./data/ringOut.json');\nconst messageItemBody = require('./data/messageItem.json');\nconst messageListBody = require('./data/messageList.json');\nconst addressBookBody = require('./data/addressBook.json');\nconst callLogBody = require('./data/callLog.json');\nconst deviceBody = require('./data/device.json');\nconst conferencingBody = require('./data/conferencing.json');\nconst activeCallsBody = require('./data/activeCalls.json');\nconst meetingBody = require('./data/meeting');\nconst serviceInfoBody = require('./data/serviceInfo');\nconst conferenceCallBody = require('./data/conferenceCall');\nconst numberParseBody = require('./data/numberParse');\n\nconst mockServer = 'http://whatever';\nexport function createSDK(options = {}) {\n  const opts = {\n    ...options,\n    appKey: 'test key',\n    appSecret: 'test secret',\n    server: mockServer,\n    Request: fetchMock.constructor.Request,\n    Response: fetchMock.constructor.Response,\n    Headers: fetchMock.constructor.Headers,\n    fetch: fetchMock.fetchMock.bind(fetchMock),\n    refreshDelayMs: 1,\n    redirectUri: 'http://foo',\n    cachePrefix: 'sdkPrefix',\n  };\n  return new RingCentral(opts);\n}\n\nexport function mockApi({\n  method = 'GET',\n  path,\n  server = mockServer,\n  url,\n  body = {},\n  status = 200,\n  statusText = 'OK',\n  headers,\n  isOnce = true,\n}) {\n  let responseHeaders;\n  const isJson = typeof body !== 'string';\n  if (isJson && !headers) {\n    responseHeaders = {\n      'Content-Type': 'application/json'\n    };\n  } else {\n    responseHeaders = headers;\n  }\n  let mockUrl;\n  if (url) {\n    mockUrl = url;\n  } else {\n    mockUrl = `${server}${path}`;\n  }\n  const mock = isOnce ? fetchMock.once.bind(fetchMock) : fetchMock.mock.bind(fetchMock);\n  mock(mockUrl, {\n    body: isJson ? JSON.stringify(body) : body,\n    status,\n    statusText,\n    headers: responseHeaders,\n    sendAsJson: false\n  }, {\n    method,\n    times: isOnce ? 1 : 20,\n  });\n}\n\nexport function authentication() {\n  mockApi({\n    method: 'POST',\n    path: '/restapi/oauth/token',\n    body: {\n      access_token: 'ACCESS_TOKEN',\n      token_type: 'bearer',\n      expires_in: 3600,\n      refresh_token: 'REFRESH_TOKEN',\n      refresh_token_expires_in: 60480,\n      scope: 'SMS RCM Foo Boo',\n      expireTime: new Date().getTime() + 3600000,\n      owner_id: '23231231\"',\n      endpoint_id: '3213213131',\n    }\n  });\n}\n\nexport function logout() {\n  mockApi({\n    method: 'POST',\n    path: '/restapi/oauth/revoke',\n    isOnce: false,\n  });\n}\n\nexport function tokenRefresh(failure) {\n  if (!failure) {\n    mockApi({\n      method: 'POST',\n      path: '/restapi/oauth/token',\n      body: {\n        access_token: 'ACCESS_TOKEN_FROM_REFRESH',\n        token_type: 'bearer',\n        expires_in: 3600,\n        refresh_token: 'REFRESH_TOKEN_FROM_REFRESH',\n        refresh_token_expires_in: 60480,\n        scope: 'SMS RCM Foo Boo'\n      }\n    });\n  } else {\n    mockApi({\n      method: 'POST',\n      path: '/restapi/oauth/token',\n      body: {\n        message: 'Wrong token',\n        error_description: 'Wrong token',\n        description: 'Wrong token'\n      },\n      status: 400,\n    });\n  }\n}\n\nexport function presence(id) {\n  mockApi({\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension/${id}/presence`,\n    body: {\n      uri: `https://platform.ringcentral.com/restapi/v1.0/account/123/extension/${id}/presence`,\n      extension: {\n        uri: `https://platform.ringcentral.com/restapi/v1.0/account/123/extension/${id}`,\n        extensionNumber: '101',\n        id,\n      },\n      activeCalls: [],\n      presenceStatus: 'Available',\n      telephonyStatus: 'Ringing',\n      userStatus: 'Available',\n      dndStatus: 'TakeAllCalls',\n      extensionId: id\n    }\n  });\n}\n\nexport function presenceUpdate(id, mockResponse = {}) {\n  mockApi({\n    path: `/restapi/v1.0/account/~/extension/${id}/presence`,\n    method: 'PUT',\n    body: {\n      ...presenceBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function dialingPlan(mockResponse = {}) {\n  mockApi({\n    path: '/restapi/v1.0/account/~/dialing-plan?perPage=MAX&page=1',\n    body: {\n      ...dialingPlanBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function extensionInfo(mockResponse = {}) {\n  mockApi({\n    path: '/restapi/v1.0/account/~/extension/~',\n    body: {\n      ...extensionBody,\n      ...mockResponse,\n    },\n    isOnce: false,\n  });\n}\n\nexport function extensionList(mockResponse = {}) {\n  mockApi({\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension?`,\n    body: {\n      ...extensionListBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function accountInfo(mockResponse = {}) {\n  mockApi({\n    path: '/restapi/v1.0/account/~',\n    body: {\n      ...accountBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function apiInfo(mockResponse = {}) {\n  mockApi({\n    path: '/restapi/v1.0',\n    body: {\n      ...apiInfoBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function messageSync(mockResponse = {}, isOnce = true) {\n  mockApi({\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension/~/message-sync`,\n    body: {\n      ...messageSyncBody,\n      ...mockResponse,\n    },\n    isOnce\n  });\n}\n\nexport function messageList(mockResponse = {}) {\n  mockApi({\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension/~/message-store`,\n    body: {\n      ...messageListBody,\n      ...mockResponse,\n    },\n    isOnce: false\n  });\n}\n\nexport function updateMessageStatus(mockResponse = {}) {\n  mockApi({\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension/~/message-store`,\n    method: 'PUT',\n    body: {\n      ...messageItemBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function authzProfile(mockResponse = {}) {\n  mockApi({\n    path: '/restapi/v1.0/account/~/extension/~/authz-profile',\n    body: {\n      ...authzProfileBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function blockedNumber(mockResponse = {}) {\n  mockApi({\n    path: '/restapi/v1.0/account/~/extension/~/blocked-number',\n    body: {\n      ...blockedNumberBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function forwardingNumber(mockResponse = {}) {\n  mockApi({\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension/~/forwarding-number`,\n    body: {\n      ...forwardingNumberBody,\n      ...mockResponse\n    }\n  });\n}\n\nexport function phoneNumber(mockResponse = {}) {\n  mockApi({\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension/~/phone-number`,\n    body: {\n      ...phoneNumberBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function accountPhoneNumber(mockResponse = {}) {\n  mockApi({\n    url: `begin:${mockServer}/restapi/v1.0/account/~/phone-number`,\n    body: {\n      ...accountPhoneNumberBody,\n      ...mockResponse,\n    },\n    isOnce: false\n  });\n}\n\nexport function subscription(mockResponse = {}) {\n  mockApi({\n    method: 'POST',\n    url: `begin:${mockServer}/restapi/v1.0/subscription`,\n    body: {\n      ...subscriptionBody,\n      ...mockResponse,\n    },\n    isOnce: false\n  });\n  mockApi({\n    method: 'PUT',\n    url: `begin:${mockServer}/restapi/v1.0/subscription`,\n    body: {\n      ...subscriptionBody,\n      ...mockResponse,\n    },\n    isOnce: false\n  });\n  mockApi({\n    method: 'DELETE',\n    url: `begin:${mockServer}/restapi/v1.0/subscription`,\n    body: {\n      ...subscriptionBody,\n      ...mockResponse,\n    },\n    isOnce: false\n  });\n}\n\nexport function numberParser(mockResponse = {}) {\n  mockApi({\n    method: 'POST',\n    url: `begin:${mockServer}/restapi/v1.0/number-parser/`,\n    body: {\n      ...numberParserBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function sms(mockResponse = {}) {\n  mockApi({\n    method: 'POST',\n    path: '/restapi/v1.0/account/~/extension/~/sms',\n    body: {\n      ...smsBody,\n      ...mockResponse,\n    }\n  });\n}\nexport function addressBook(mockResponse = {}) {\n  mockApi({\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension/~/address-book-sync`,\n    body: {\n      ...addressBookBody,\n      ...{\n        syncInfo: {\n          syncType: addressBookBody.syncType,\n          syncToken: addressBookBody.syncToken,\n          syncTime: ((new Date(Date.now() + 24 * 60 * 60 * 1000))).toISOString()\n        }\n      },\n      ...mockResponse,\n    },\n    isOnce: false,\n  });\n}\n\n\nexport function callLog(mockResponse = {}) {\n  mockApi({\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension/~/call-log-sync`,\n    body: {\n      ...callLogBody,\n      ...{\n        syncInfo: {\n          syncType: callLogBody.syncType,\n          syncToken: callLogBody.syncToken,\n          syncTime: ((new Date(Date.now() + 24 * 60 * 60 * 1000))).toISOString()\n        }\n      },\n      ...mockResponse,\n    },\n    isOnce: false,\n  });\n}\n\nexport function device(mockResponse = {}) {\n  mockApi({\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension/~/device`,\n    body: {\n      ...deviceBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function conferencing(mockResponse = {}) {\n  mockApi({\n    path: '/restapi/v1.0/account/~/extension/~/conferencing',\n    body: {\n      ...conferencingBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function numberParse(mockResponse = {}, homeCountry) {\n  mockApi({\n    method: 'POST',\n    path: `/restapi/v1.0/number-parser/parse?homeCountry=${homeCountry}`,\n    body: {\n      ...numberParseBody,\n      ...mockResponse,\n    },\n    isOnce: false\n  });\n}\n\nexport function conferenceCall(mockResponse = {}) {\n  conferenceCallBody.session.on = () => {};\n  mockApi({\n    method: 'POST',\n    path: '/restapi/v1.0/account/~/telephony/conference',\n    body: {\n      ...conferenceCallBody,\n      ...mockResponse,\n    },\n    isOnce: false\n  });\n}\n\nexport function activeCalls(mockResponse = {}) {\n  mockApi({\n    method: 'GET',\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension/~/active-calls`,\n    body: {\n      ...activeCallsBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function restore() {\n  fetchMock.restore();\n}\n\nexport function reset() {\n  fetchMock.reset();\n}\n\nexport function mockForbidden({\n  method = 'GET',\n  path,\n  url,\n  body = ''\n}) {\n  mockApi({\n    method,\n    path,\n    body,\n    url,\n    status: 403,\n  });\n}\n\nexport function mockClient(client) {\n  client.service = createSDK({});\n}\n\nexport function ringOut(mockResponse = {}) {\n  mockApi({\n    isOnce: false,\n    method: 'POST',\n    url: `${mockServer}/restapi/v1.0/account/~/extension/~/ring-out`,\n    body: {\n      ...ringOutBody,\n      ...mockResponse,\n    }\n  });\n}\n\nexport function ringOutUpdate(mockResponse = {}) {\n  mockApi({\n    isOnce: false,\n    url: `begin:${mockServer}/restapi/v1.0/account/~/extension/~/ring-out/`,\n    body: {\n      ...ringOutBody,\n      ...mockResponse,\n    }\n  });\n}\nexport function meeting(mockResponse = {}) {\n  mockApi({\n    method: 'POST',\n    url: `${mockServer}/restapi/v1.0/account/~/extension/~/meeting`,\n    body: {\n      ...meetingBody,\n      ...mockResponse,\n    },\n    isOnce: false\n  });\n}\nexport function serviceInfo(mockResponse = {}) {\n  mockApi({\n    method: 'GET',\n    url: `${mockServer}/restapi/v1.0/account/~/extension/~/meeting/service-info`,\n    body: {\n      ...serviceInfoBody,\n      ...mockResponse,\n    },\n    isOnce: false\n  });\n}\n\nexport function mockForLogin({\n  mockAuthzProfile = true,\n  mockExtensionInfo = true,\n  mockForwardingNumber = true,\n  mockMessageSync = true,\n  mockConferencing = true,\n  mockActiveCalls = true\n} = {}) {\n  authentication();\n  logout();\n  tokenRefresh();\n  presence('~');\n  dialingPlan();\n  if (mockExtensionInfo) {\n    extensionInfo();\n  }\n  accountInfo();\n  apiInfo();\n  if (mockAuthzProfile) {\n    authzProfile();\n  }\n  device();\n  extensionList();\n  accountPhoneNumber();\n  blockedNumber();\n  if (mockForwardingNumber) {\n    forwardingNumber();\n  }\n  messageList();\n  if (mockMessageSync) {\n    messageSync();\n  }\n  phoneNumber();\n  subscription();\n  callLog();\n  addressBook();\n  if (mockConferencing) {\n    conferencing();\n  }\n  if (mockActiveCalls) {\n    activeCalls();\n  }\n  numberParser();\n}\n"]}