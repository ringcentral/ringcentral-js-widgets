{"version":3,"sources":["integration-test/utils/SimulateWindowObject.ts"],"names":["defaultDevices","deviceId","kind","label","groupId","mockDevice","devices","Object","defineProperties","window","navigator","mediaDevices","getUserMedia","value","configurable","enumerateDevices","SimulateWindowObject","isMockDevices","userAgent","MediaStream","RTCPeerConnection","HTMLMediaElement","prototype","setSinkId"],"mappings":";;;;;;;;;;;;AAOA,IAAMA,cAAc,GAAG,CACrB;AACEC,EAAAA,QAAQ,EAAE,SADZ;AAEEC,EAAAA,IAAI,EAAE,YAFR;AAGEC,EAAAA,KAAK,EAAE,0CAHT;AAIEC,EAAAA,OAAO,EAAE;AAJX,CADqB,EAOrB;AACEH,EAAAA,QAAQ,EACN,kEAFJ;AAGEC,EAAAA,IAAI,EAAE,YAHR;AAIEC,EAAAA,KAAK,EAAE,gCAJT;AAKEC,EAAAA,OAAO,EAAE;AALX,CAPqB,CAAvB;;AAgBO,SAASC,UAAT,GAA4D;AAAA,MAAxCC,OAAwC,uEAAhBN,cAAgB;AACjEO,EAAAA,MAAM,CAACC,gBAAP,CAAwBC,MAAM,CAACC,SAAP,CAAiBC,YAAzC,EAAuD;AACrDC,IAAAA,YAAY,EAAE;AACZC,MAAAA,KADY,mBACJ;AACN,eAAO,IAAP;AACD,OAHW;AAIZC,MAAAA,YAAY,EAAE;AAJF,KADuC;AAOrDC,IAAAA,gBAAgB,EAAE;AAChBF,MAAAA,KADgB,mBACR;AACN,eAAOP,OAAP;AACD,OAHe;AAIhBQ,MAAAA,YAAY,EAAE;AAJE;AAPmC,GAAvD;AAcD;;AAEc,SAASE,oBAAT,GAAoD;AAAA,MAAtBC,aAAsB,uEAAN,IAAM;AACjEV,EAAAA,MAAM,CAACC,gBAAP,CAAwBC,MAAM,CAACC,SAA/B,EAA0C;AACxCQ,IAAAA,SAAS,EAAE;AACTL,MAAAA,KAAK,EACH;AAFO;AAD6B,GAA1C;AAMAN,EAAAA,MAAM,CAACC,gBAAP,CAAwBC,MAAxB,EAAgC;AAC9BU,IAAAA,WAAW,EAAE;AAAEN,MAAAA,KAAK,EAAE;AAAT,KADiB;AAE9BO,IAAAA,iBAAiB,EAAE;AAAEP,MAAAA,KAAK,EAAE;AAAT;AAFW,GAAhC;AAKAR,EAAAA,UAAU,CAACY,aAAa,GAAGjB,cAAH,GAAoB,EAAlC,CAAV;;AAEA,MAAI,CAACqB,gBAAgB,CAACC,SAAlB,IAA+B,CAACD,gBAAgB,CAACC,SAAjB,CAA2BC,SAA/D,EAA0E;AACxEhB,IAAAA,MAAM,CAACC,gBAAP,CAAwBa,gBAAgB,CAACC,SAAzC,EAAoD;AAClDC,MAAAA,SAAS,EAAE;AACTV,QAAAA,KADS,mBACD;AACN,iBAAO,IAAP;AACD;AAHQ;AADuC,KAApD;AAOD;;AACD,SAAO,IAAP;AACD","sourcesContent":["type devicesProps = {\n  deviceId: string;\n  kind: string;\n  label: string;\n  groupId: string;\n}[];\n\nconst defaultDevices = [\n  {\n    deviceId: 'default',\n    kind: 'audioinput',\n    label: 'Default - Internal Microphone (Built-in)',\n    groupId: '2303aeba3eb3b5b69d8712798dc9f41b1f1a526f23d032cf53353248d9f6ba83',\n  },\n  {\n    deviceId:\n      'b2473af34652a04d9f8d463a4f11640695162b9c08db67d73e2a37f1a2e062a8',\n    kind: 'audioinput',\n    label: 'Internal Microphone (Built-in)',\n    groupId: '2303aeba3eb3b5b69d8712798dc9f41b1f1a526f23d032cf53353248d9f6ba83',\n  },\n];\n\nexport function mockDevice(devices: devicesProps = defaultDevices) {\n  Object.defineProperties(window.navigator.mediaDevices, {\n    getUserMedia: {\n      value() {\n        return true;\n      },\n      configurable: true,\n    },\n    enumerateDevices: {\n      value() {\n        return devices;\n      },\n      configurable: true,\n    },\n  });\n}\n\nexport default function SimulateWindowObject(isMockDevices = true) {\n  Object.defineProperties(window.navigator, {\n    userAgent: {\n      value:\n        'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/11.10.0',\n    },\n  });\n  Object.defineProperties(window, {\n    MediaStream: { value: true },\n    RTCPeerConnection: { value: true },\n  });\n\n  mockDevice(isMockDevices ? defaultDevices : []);\n\n  if (!HTMLMediaElement.prototype || !HTMLMediaElement.prototype.setSinkId) {\n    Object.defineProperties(HTMLMediaElement.prototype, {\n      setSinkId: {\n        value() {\n          return true;\n        },\n      },\n    });\n  }\n  return true;\n}\n"],"file":"SimulateWindowObject.js"}