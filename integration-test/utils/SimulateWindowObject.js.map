{"version":3,"file":"SimulateWindowObject.js","names":["defaultDevices","deviceId","kind","label","groupId","mockDevice","devices","arguments","length","undefined","Object","defineProperties","window","navigator","mediaDevices","getUserMedia","value","configurable","enumerateDevices","SimulateWindowObject","isMockDevices","mockDevices","userAgent","MediaStream","RTCPeerConnection","HTMLMediaElement","prototype","setSinkId"],"sources":["integration-test/utils/SimulateWindowObject.ts"],"sourcesContent":["type devicesProps = {\n  deviceId: string;\n  kind: string;\n  label: string;\n  groupId: string;\n}[];\n\nconst defaultDevices = [\n  {\n    deviceId: 'default',\n    kind: 'audioinput',\n    label: 'Default - Internal Microphone (Built-in)',\n    groupId: '2303aeba3eb3b5b69d8712798dc9f41b1f1a526f23d032cf53353248d9f6ba83',\n  },\n  {\n    deviceId:\n      'b2473af34652a04d9f8d463a4f11640695162b9c08db67d73e2a37f1a2e062a8',\n    kind: 'audioinput',\n    label: 'Internal Microphone (Built-in)',\n    groupId: '2303aeba3eb3b5b69d8712798dc9f41b1f1a526f23d032cf53353248d9f6ba83',\n  },\n];\n\nexport function mockDevice(devices: devicesProps = defaultDevices) {\n  Object.defineProperties(window.navigator.mediaDevices, {\n    getUserMedia: {\n      value() {\n        return true;\n      },\n      configurable: true,\n    },\n    enumerateDevices: {\n      value() {\n        return devices;\n      },\n      configurable: true,\n    },\n  });\n}\n\nexport default function SimulateWindowObject(\n  isMockDevices = true,\n  mockDevices?: {\n    deviceId: string;\n    kind: 'audioinput' | 'videoinput' | 'audiooutput';\n    label: string;\n    groupId: string;\n  }[],\n) {\n  Object.defineProperties(window.navigator, {\n    userAgent: {\n      value:\n        'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/11.10.0',\n    },\n  });\n  Object.defineProperties(window, {\n    MediaStream: { value: true },\n    RTCPeerConnection: { value: true },\n  });\n\n  mockDevice(isMockDevices ? mockDevices ?? defaultDevices : []);\n\n  if (!HTMLMediaElement.prototype || !HTMLMediaElement.prototype.setSinkId) {\n    Object.defineProperties(HTMLMediaElement.prototype, {\n      setSinkId: {\n        value() {\n          return true;\n        },\n      },\n    });\n  }\n  return true;\n}\n"],"mappings":";;;;;;;;AAOA,IAAMA,cAAc,GAAG,CACrB;EACEC,QAAQ,EAAE,SAAS;EACnBC,IAAI,EAAE,YAAY;EAClBC,KAAK,EAAE,0CAA0C;EACjDC,OAAO,EAAE;AACX,CAAC,EACD;EACEH,QAAQ,EACN,kEAAkE;EACpEC,IAAI,EAAE,YAAY;EAClBC,KAAK,EAAE,gCAAgC;EACvCC,OAAO,EAAE;AACX,CAAC,CACF;AAEM,SAASC,UAAUA,CAAA,EAAyC;EAAA,IAAxCC,OAAqB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGP,cAAc;EAC/DU,MAAM,CAACC,gBAAgB,CAACC,MAAM,CAACC,SAAS,CAACC,YAAY,EAAE;IACrDC,YAAY,EAAE;MACZC,KAAK,WAAAA,MAAA,EAAG;QACN,OAAO,IAAI;MACb,CAAC;MACDC,YAAY,EAAE;IAChB,CAAC;IACDC,gBAAgB,EAAE;MAChBF,KAAK,WAAAA,MAAA,EAAG;QACN,OAAOV,OAAO;MAChB,CAAC;MACDW,YAAY,EAAE;IAChB;EACF,CAAC,CAAC;AACJ;AAEe,SAASE,oBAAoBA,CAAA,EAQ1C;EAAA,IAPAC,aAAa,GAAAb,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;EAAA,IACpBc,WAKG,GAAAd,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAEHC,MAAM,CAACC,gBAAgB,CAACC,MAAM,CAACC,SAAS,EAAE;IACxCS,SAAS,EAAE;MACTN,KAAK,EACH;IACJ;EACF,CAAC,CAAC;EACFN,MAAM,CAACC,gBAAgB,CAACC,MAAM,EAAE;IAC9BW,WAAW,EAAE;MAAEP,KAAK,EAAE;IAAK,CAAC;IAC5BQ,iBAAiB,EAAE;MAAER,KAAK,EAAE;IAAK;EACnC,CAAC,CAAC;EAEFX,UAAU,CAACe,aAAa,GAAGC,WAAW,aAAXA,WAAW,cAAXA,WAAW,GAAIrB,cAAc,GAAG,EAAE,CAAC;EAE9D,IAAI,CAACyB,gBAAgB,CAACC,SAAS,IAAI,CAACD,gBAAgB,CAACC,SAAS,CAACC,SAAS,EAAE;IACxEjB,MAAM,CAACC,gBAAgB,CAACc,gBAAgB,CAACC,SAAS,EAAE;MAClDC,SAAS,EAAE;QACTX,KAAK,WAAAA,MAAA,EAAG;UACN,OAAO,IAAI;QACb;MACF;IACF,CAAC,CAAC;EACJ;EACA,OAAO,IAAI;AACb","ignoreList":[]}