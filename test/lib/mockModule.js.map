{"version":3,"file":"mockModule.js","names":["_redux","require","_core","_di","_RcModule2","_interopRequireDefault","obj","__esModule","_defineProperty","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","_createClass","protoProps","staticProps","prototype","arg","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","minLen","_arrayLikeToArray","n","toString","slice","name","Array","from","test","iter","iterator","isArray","len","arr2","mockModuleWithDeps","module","deps","_dec","_class","Root","ModuleFactory","providers","concat","_RcModule","_super","get","state","status","RcModule","root","store","createStore","reducer","setStore","provide","replace","match","toLowerCase","exports","mockModuleGenerator","options","_Object$assign","assign","storeKey","dispatch","getState","subscribe","_getStateV2"],"sources":["test/lib/mockModule.ts"],"sourcesContent":["import { createStore } from 'redux';\n\nimport { storeKey } from '@ringcentral-integration/core';\n\nimport { ModuleFactory } from '../../lib/di';\nimport RcModule from '../../lib/RcModule';\n\nexport const mockModuleWithDeps = <T extends new (...args: any) => any>(\n  module: { provide: string; useClass: T },\n  // TODO: deps type from di\n  deps: any[],\n): InstanceType<T> => {\n  @ModuleFactory({\n    providers: [module, ...deps],\n  })\n  class Root extends RcModule {\n    get status() {\n      return this.state.status;\n    }\n  }\n  const root = Root.create();\n  const store = createStore(root.reducer);\n  root.setStore(store);\n  const key = module.provide.replace(/^./g, (match) => match.toLowerCase());\n  return root[key];\n};\n\nexport const mockModuleGenerator = <T, P>(options: T, props?: P) =>\n  Object.assign(\n    options,\n    {\n      [storeKey]: {\n        dispatch() {},\n        getState() {},\n        subscribe() {},\n      },\n      parentModule: {},\n      _getStateV2: () => {},\n    },\n    props,\n  );\n"],"mappings":"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"}