{"version":3,"file":"mockModule.js","names":["_core","require","_redux","_RcModule2","_interopRequireDefault","_di","e","__esModule","_defineProperty","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","_classCallCheck","a","n","TypeError","_defineProperties","length","o","key","_createClass","prototype","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","_setPrototypeOf","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","toString","slice","name","Array","from","test","iterator","isArray","mockModuleWithDeps","exports","module","deps","_dec","_class","Root","ModuleFactory","providers","concat","_RcModule","arguments","get","state","status","RcModule","root","store","createStore","reducer","setStore","provide","replace","match","toLowerCase","mockModuleGenerator","options","props","assign","storeKey","dispatch","getState","subscribe","_getStateV2"],"sources":["test/lib/mockModule.ts"],"sourcesContent":["// @ts-nocheck\n// TODO: fix type\nimport { storeKey } from '@ringcentral-integration/core';\nimport { createStore } from 'redux';\n\nimport RcModule from '../../lib/RcModule';\nimport { ModuleFactory } from '../../lib/di';\n\nexport const mockModuleWithDeps = <T extends new (...args: any) => any>(\n  module: { provide: string; useClass: T },\n  // TODO: deps type from di\n  deps: any[],\n): InstanceType<T> => {\n  @ModuleFactory({\n    providers: [module, ...deps],\n  })\n  class Root extends RcModule {\n    get status() {\n      return this.state.status;\n    }\n  }\n  const root = Root.create();\n  const store = createStore(root.reducer);\n  root.setStore(store);\n  const key = module.provide.replace(/^./g, (match) => match.toLowerCase());\n  return root[key];\n};\n\nexport const mockModuleGenerator = <T, P>(options: T, props?: P) =>\n  Object.assign(\n    options,\n    {\n      [storeKey]: {\n        dispatch() {},\n        getState() {},\n        subscribe() {},\n      },\n      parentModule: {},\n      _getStateV2: () => {},\n    },\n    props,\n  );\n"],"mappings":"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","ignoreList":[]}