{"version":3,"file":"render.js","names":["setGlobalStateHelper","$inject","module","angular","config","provider","GlobalStateHelper","GlobalStateHelperProvider","stateHelperProvider","globalHelper","$get","setNestedState","name","url","params","uii","Date","getTime","views","main","templateUrl","controllerAs","controller","$scope","$state","$stateParams","document","model","$q","ApiKbGroupSvc","vm","script","type","callbacks","setScriptResult","setRecordingState","setHoldState","requestColdRequeue","requestWarmRequeue","requestHangup","getScriptData","getCallData","requestColdTransfer","requestWarmTransfer","requestDisposition","allowSendKbArticle","sendKbArticle","getKnowledgeBaseArticles","changeScript","state","_returnPromise","call","lead","kbGroupIds","getGroupsWithChildren","content","scriptId","result","defer","resolve","promise","scriptDocument","localStorageService","data","get","json","JSON","parse","isDefined","setDocument","getDocument","e","console","error","ScriptRenderSvc","then","pageTitle","that","$stateProviderGlobal","helper","getGlobalStateHelper"],"sources":["agentScript/scripts/evSource/render.js"],"sourcesContent":["(function () {\n  'use strict';\n  setGlobalStateHelper.$inject = [\n    'GlobalStateHelperProvider',\n    'stateHelperProvider',\n  ];\n  var module = angular.module('scriptingStudio.app.render', []);\n\n  module.config(setGlobalStateHelper);\n  module.provider('GlobalStateHelper', GlobalStateHelper);\n\n  // set the state helper in a config block\n  function setGlobalStateHelper(\n    GlobalStateHelperProvider,\n    stateHelperProvider,\n  ) {\n    var globalHelper = GlobalStateHelperProvider.$get();\n\n    globalHelper.setGlobalStateHelper(stateHelperProvider);\n\n    stateHelperProvider.setNestedState({\n      name: 'render',\n      url: '/render/:type',\n      params: {\n        uii: new Date().getTime(),\n      },\n      views: {\n        main: {\n          templateUrl: 'render/render.tpl.html',\n          controllerAs: 'vm',\n          controller: [\n            '$scope',\n            '$state',\n            '$stateParams',\n            'document',\n            'model',\n            '$q',\n            'ApiKbGroupSvc',\n            function (\n              $scope,\n              $state,\n              $stateParams,\n              document,\n              model,\n              $q,\n              ApiKbGroupSvc,\n            ) {\n              var vm = this;\n              vm.script = document;\n              vm.model = model;\n              vm.type = $state.params.type;\n\n              vm.uii = $stateParams.uii;\n              vm.config = document;\n              vm.callbacks = {\n                setScriptResult: setScriptResult,\n                setRecordingState: setRecordingState,\n                setHoldState: setHoldState,\n                requestColdRequeue: requestColdRequeue,\n                requestWarmRequeue: requestWarmRequeue,\n                requestHangup: requestHangup,\n                getScriptData: getCallData,\n                requestColdTransfer: requestColdTransfer,\n                requestWarmTransfer: requestWarmTransfer,\n                requestDisposition: requestDisposition,\n                allowSendKbArticle: allowSendKbArticle,\n                sendKbArticle: sendKbArticle,\n                getKnowledgeBaseArticles: getKnowledgeBaseArticles,\n                changeScript: changeScript,\n              };\n\n              function setScriptResult() {\n                return true;\n              }\n              function setRecordingState(state) {\n                return _returnPromise(state);\n              }\n              function setHoldState(state) {\n                return _returnPromise(state);\n              }\n              function requestColdRequeue() {\n                return _returnPromise(true);\n              }\n              function requestWarmRequeue() {\n                return _returnPromise(true);\n              }\n              function requestHangup() {\n                return _returnPromise(true);\n              }\n              function getCallData() {\n                return _returnPromise({\n                  model: {},\n                  call: {},\n                  lead: {},\n                });\n              }\n              function requestColdTransfer() {\n                return _returnPromise(true);\n              }\n              function requestWarmTransfer() {\n                return _returnPromise(true);\n              }\n              function requestDisposition() {\n                return _returnPromise(true);\n              }\n              function getKnowledgeBaseArticles(kbGroupIds) {\n                return ApiKbGroupSvc.getGroupsWithChildren(kbGroupIds);\n              }\n              function allowSendKbArticle() {\n                return true;\n              }\n              function sendKbArticle(uii, content) {\n                return [uii, content];\n              }\n\n              function changeScript(scriptId) {\n                return true;\n              }\n\n              function _returnPromise(result) {\n                var defer = $q.defer();\n                defer.resolve(result);\n                return defer.promise;\n              }\n            },\n          ],\n          resolve: {\n            document: [\n              'scriptDocument',\n              'localStorageService',\n              function (scriptDocument, localStorageService) {\n                try {\n                  var data = localStorageService.get('script:currentScript');\n                  var json = JSON.parse(angular.isDefined(data) ? data : null);\n                  scriptDocument.setDocument(json);\n                  return scriptDocument.getDocument();\n                } catch (e) {\n                  console.error('error parsing json for render', e);\n                }\n              },\n            ],\n            model: [\n              '$q',\n              'ScriptRenderSvc',\n              function ($q, ScriptRenderSvc) {\n                return $q(function (resolve) {\n                  ScriptRenderSvc.getCallData().then(function (result) {\n                    resolve(result);\n                  });\n                });\n              },\n            ],\n          },\n        },\n      },\n      pageTitle: 'Script',\n    });\n  }\n\n  // service that holds the state provider, can get and set it to use outside of config\n  function GlobalStateHelper() {\n    var that = this;\n    that.$get = function () {\n      return that;\n    };\n\n    that.$stateProviderGlobal = null;\n    that.setGlobalStateHelper = function (helper) {\n      that.$stateProviderGlobal = helper;\n    };\n\n    that.getGlobalStateHelper = function () {\n      return that.$stateProviderGlobal;\n    };\n  }\n})();\n"],"mappings":"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"}