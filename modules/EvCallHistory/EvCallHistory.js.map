{"version":3,"file":"EvCallHistory.js","names":["_callDirections","require","_di","_core","_directTransferNotificationTypes","_callbackTypes","_FormatPhoneNumber","_callUniqueIdentifies","_contactMatchIdentify","_dec","_dec2","_dec3","_dec4","_class","_class2","_classCallCheck","a","n","TypeError","_defineProperties","e","r","t","length","o","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","prototype","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","value","_setPrototypeOf","_applyDecoratedDescriptor","l","keys","forEach","initializer","slice","reverse","reduce","EvCallHistory","exports","Module","name","deps","dep","optional","computed","that","rawCalls","contactMatches","activityMatches","formattedCalls","_RcModuleV","_this$_deps$contactMa","_this$_deps$activityM","_this","_deps","contactMatcher","addQuerySource","getQueriesFn","uniqueIdentifies","readyCheckFn","evCallMonitor","ready","activityMatcher","callLogsIds","get","dataMapping","callLogs","callsMapping","_this2","map","contactMatchIdentify","contactMatchIdentifyEncode","phoneNumber","ani","callType","id","getCallId","session","direction","toLowerCase","callDirection","outbound","inbound","agent","agentId","_formatPhoneNumber","contact","from","to","fromName","toName","fromMatches","toMatches","startTime","timestamp","isDisposed","formatPhoneNumber","countryCode","currentLocale","locale","makeCallsUniqueIdentifies","onInitOnce","_this3","evSubscription","subscribe","EvCallbackTypes","DIRECT_AGENT_TRANSFER_NOTIF","data","status","directTransferNotificationTypes","VOICEMAIL","watch","evAgentSession","configSuccess","callsLimited","calls","limitCalls","RcModuleV2","getOwnPropertyDescriptor"],"sources":["modules/EvCallHistory/EvCallHistory.ts"],"sourcesContent":["import { callDirection } from '@ringcentral-integration/commons/enums/callDirections';\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport { computed, RcModuleV2, watch } from '@ringcentral-integration/core';\n\nimport { directTransferNotificationTypes } from '../../enums/directTransferNotificationTypes';\nimport { EvCallbackTypes } from '../../lib/EvClient/enums/callbackTypes';\nimport { formatPhoneNumber } from '../../lib/FormatPhoneNumber';\nimport { makeCallsUniqueIdentifies } from '../../lib/callUniqueIdentifies';\nimport { contactMatchIdentifyEncode } from '../../lib/contactMatchIdentify';\n\nimport type { CallHistory, Deps } from './EvCallHistory.interface';\n\n@Module({\n  name: 'EvCallHistory',\n  deps: [\n    'EvCallMonitor',\n    'EvSubscription',\n    'Locale',\n    'EvAgentSession',\n    { dep: 'ContactMatcher', optional: true },\n    { dep: 'ActivityMatcher', optional: true },\n  ],\n})\nclass EvCallHistory extends RcModuleV2<Deps> implements CallHistory {\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n    this._deps.contactMatcher?.addQuerySource({\n      getQueriesFn: () => this.uniqueIdentifies,\n      readyCheckFn: () => this._deps.evCallMonitor.ready,\n    });\n    this._deps.activityMatcher?.addQuerySource({\n      getQueriesFn: () => this.callLogsIds,\n      readyCheckFn: () => this._deps.evCallMonitor.ready,\n    });\n  }\n\n  get contactMatches() {\n    // TODO: create EvContactMatcher with specific entity type instead of ContactMatcher in Phone DI\n    return (this._deps.contactMatcher.dataMapping || {}) as {\n      [key: string]: { id: string; name: string; type: string }[];\n    };\n  }\n\n  get activityMatches() {\n    return this._deps.activityMatcher.dataMapping || {};\n  }\n\n  get rawCalls() {\n    return this._deps.evCallMonitor.callLogs;\n  }\n\n  get callLogsIds() {\n    return this._deps.evCallMonitor.callLogsIds;\n  }\n\n  get callsMapping() {\n    return this._deps.evCallMonitor.callsMapping;\n  }\n\n  @computed((that: EvCallHistory) => [\n    that.rawCalls,\n    that.contactMatches,\n    that.activityMatches,\n  ])\n  get formattedCalls() {\n    return this.rawCalls.slice(0, 250).map((call) => {\n      const contactMatchIdentify = contactMatchIdentifyEncode({\n        phoneNumber: call.ani,\n        callType: call.callType,\n      });\n\n      const id = this._deps.evCallMonitor.getCallId(call.session);\n      const direction =\n        call.callType.toLowerCase() === 'outbound'\n          ? callDirection.outbound\n          : callDirection.inbound;\n      const contactMatches = this.contactMatches[contactMatchIdentify] || [];\n      const activityMatches = this.activityMatches[id] || [];\n      const agent = {\n        name: call.agentId,\n        phoneNumber: this._formatPhoneNumber(call.agentId),\n      };\n\n      const contact = {\n        name: this._formatPhoneNumber(call.ani),\n        phoneNumber: this._formatPhoneNumber(call.ani),\n      };\n\n      const from = direction === callDirection.outbound ? agent : contact;\n      const to = direction === callDirection.outbound ? contact : agent;\n\n      return {\n        id,\n        direction,\n        agent,\n        contact,\n        from,\n        to,\n        fromName: from.name,\n        toName: to.name,\n        fromMatches: contactMatches,\n        toMatches: contactMatches,\n        activityMatches,\n        startTime: call.timestamp,\n        isDisposed: false,\n      };\n    });\n  }\n\n  private _formatPhoneNumber(phoneNumber: string) {\n    // TODO: support countryCode\n    return formatPhoneNumber({\n      phoneNumber,\n      countryCode: 'US',\n      currentLocale: this._deps.locale.currentLocale,\n    });\n  }\n\n  @computed((that: EvCallHistory) => [that.formattedCalls])\n  get lastEndedCall() {\n    return this.formattedCalls.length > 0 ? this.formattedCalls[0] : null;\n  }\n\n  @computed((that: EvCallHistory) => [that.rawCalls])\n  get uniqueIdentifies() {\n    return makeCallsUniqueIdentifies(this.rawCalls);\n  }\n\n  override onInitOnce() {\n    this._deps.evSubscription.subscribe(\n      EvCallbackTypes.DIRECT_AGENT_TRANSFER_NOTIF,\n      (data) => {\n        if (data.status === directTransferNotificationTypes.VOICEMAIL) {\n          // TODO: add `data` for list and alert message about 'Direct Transfer: data.ani, Click to view call detail.'\n        }\n      },\n    );\n\n    watch(\n      this,\n      () => this._deps.evAgentSession.configSuccess,\n      (configSuccess) => {\n        if (\n          configSuccess &&\n          !this._deps.evCallMonitor.callsLimited &&\n          !this._deps.evCallMonitor.calls.length\n        ) {\n          this._deps.evCallMonitor.limitCalls();\n        }\n      },\n    );\n  }\n}\n\nexport { EvCallHistory };\n"],"mappings":"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","ignoreList":[]}