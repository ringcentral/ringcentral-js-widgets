{"version":3,"file":"ConversationUI.js","names":["_di","require","_formatNumber","_core","_trackEvents","_dec","_dec2","_class","_class2","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","_toPropertyKey","configurable","writable","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","err","undefined","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","property","decorators","context","desc","initializer","slice","reverse","reduce","decorator","ConversationUI","Module","name","deps","dep","optional","track","_","href","linkType","startsWith","trackEvents","clickConversationHyperlink","_RcUIModuleV","_super","getUIProps","_ref","_this$_deps$conversat","_this$_deps$extension","_this$_deps$extension2","_this$_deps$extension3","params","_ref$enableContactFal","enableContactFallback","_ref$showGroupNumberN","showGroupNumberName","_ref$supportAttachmen","supportAttachment","_ref$perPage","perPage","inputExpandable","disableLinks","_deps","rateLimiter","throttling","connectivityMonitor","connectivity","showSpinner","dateTimeFormat","ready","contactMatcher","regionSettings","conversations","conversationLogger","currentConversation","hasInputContent","messageText","attachments","brand","currentLocale","locale","conversationId","sendButtonDisabled","pushing","areaCode","countryCode","recipients","messages","conversation","autoLog","loadingNextPage","loadingOldMessages","enableCDC","appFeatures","isCDCEnabled","isMultipleSiteEnabled","extensionInfo","currentSiteCode","site","code","maxExtensionNumberLength","accountInfo","getUIFunctions","_ref2","_this","dateTimeFormatter","onLogConversation","_ref2$conversationsPa","conversationsPath","renderExtraButton","getMatcherContactName","getMatcherContactList","getMatcherContactNameList","phoneNumber","matcherNames","dataMapping","map","matcher","concat","phoneNumbers","phoneType","join","replyToReceivers","text","unloadConversation","loadConversation","id","updateMessageText","addAttachment","attachment","removeAttachment","options","formatDateTime","formatPhone","formatNumber","maxExtensionLength","_ref4","regeneratorRuntime","mark","_callee","_ref3","_ref3$redirect","redirect","wrap","_callee$","_context","prev","next","logConversation","stop","_x","goBack","routerInteraction","readMessages","messageStore","loadPreviousMessages","fetchOldMessages","onLinkClick","_trackClickConversationHyperlink","RcUIModuleV2","exports"],"sources":["modules/ConversationUI/ConversationUI.ts"],"sourcesContent":["import { Module } from '@ringcentral-integration/commons/lib/di';\nimport { formatNumber } from '@ringcentral-integration/commons/lib/formatNumber';\nimport type { UIFunctions, UIProps } from '@ringcentral-integration/core';\nimport { RcUIModuleV2, track } from '@ringcentral-integration/core';\nimport { trackEvents } from '@ringcentral-integration/commons/enums/trackEvents';\n\nimport type {\n  ConversationContainerProps,\n  ConversationPanelProps,\n  Deps,\n} from './ConversationUI.interface';\n\n@Module({\n  name: 'ConversationUI',\n  deps: [\n    'AppFeatures',\n    'Brand',\n    'Locale',\n    'DateTimeFormat',\n    'RegionSettings',\n    'Conversations',\n    'RateLimiter',\n    'ConnectivityMonitor',\n    'MessageStore',\n    'RouterInteraction',\n    'AccountInfo',\n    'ExtensionInfo',\n    { dep: 'ConversationLogger', optional: true },\n    { dep: 'ContactMatcher', optional: true },\n    { dep: 'ConversationUIOptions', optional: true },\n  ],\n})\nexport class ConversationUI<T extends Deps = Deps> extends RcUIModuleV2<T> {\n  constructor(deps: T) {\n    super({\n      deps,\n    });\n  }\n\n  getUIProps({\n    params,\n    enableContactFallback = false,\n    showGroupNumberName = false,\n    supportAttachment = false,\n    perPage = 20,\n    inputExpandable,\n  }: ConversationContainerProps): UIProps<ConversationPanelProps> {\n    const disableLinks =\n      this._deps.rateLimiter.throttling ||\n      !this._deps.connectivityMonitor.connectivity;\n    const showSpinner = !(\n      this._deps.dateTimeFormat.ready &&\n      (!this._deps.contactMatcher || this._deps.contactMatcher.ready) &&\n      this._deps.regionSettings.ready &&\n      this._deps.conversations.ready &&\n      this._deps.rateLimiter.ready &&\n      this._deps.connectivityMonitor.ready &&\n      (!this._deps.conversationLogger || this._deps.conversationLogger.ready)\n    );\n    const currentConversation = this._deps.conversations.currentConversation;\n    const hasInputContent =\n      // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n      this._deps.conversations.messageText.length > 0 ||\n      (this._deps.conversations.attachments &&\n        this._deps.conversations.attachments.length > 0);\n    return {\n      brand: this._deps.brand.name,\n      enableContactFallback,\n      showGroupNumberName,\n      supportAttachment,\n      currentLocale: this._deps.locale.currentLocale,\n      conversationId: params.conversationId,\n      sendButtonDisabled:\n        this._deps.conversations.pushing ||\n        disableLinks ||\n        !hasInputContent ||\n        showSpinner,\n      areaCode: this._deps.regionSettings.areaCode,\n      countryCode: this._deps.regionSettings.countryCode,\n      showSpinner,\n      recipients: currentConversation.recipients,\n      messages: currentConversation.messages,\n      // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n      messageText: this._deps.conversations.messageText,\n      // @ts-expect-error TS(2322): Type 'Attachment[] | undefined' is not assignable ... Remove this comment to see the full error message\n      attachments: this._deps.conversations.attachments,\n      conversation: currentConversation,\n      disableLinks,\n      autoLog: !!this._deps.conversationLogger?.autoLog,\n      perPage,\n      loadingNextPage: this._deps.conversations.loadingOldMessages,\n      // @ts-expect-error TS(2322): Type 'boolean | undefined' is not assignable to ty... Remove this comment to see the full error message\n      inputExpandable,\n      enableCDC: this._deps.appFeatures.isCDCEnabled,\n      isMultipleSiteEnabled: this._deps.extensionInfo?.isMultipleSiteEnabled,\n      currentSiteCode: this._deps.extensionInfo?.site?.code,\n      maxExtensionNumberLength: this._deps.accountInfo.maxExtensionNumberLength,\n    };\n  }\n\n  getUIFunctions({\n    dateTimeFormatter,\n    onLogConversation,\n    conversationsPath = '/messages',\n    renderExtraButton,\n  }: ConversationContainerProps): UIFunctions<ConversationPanelProps> {\n    let getMatcherContactName: ConversationPanelProps['getMatcherContactName'];\n    let getMatcherContactList: ConversationPanelProps['getMatcherContactList'];\n    let getMatcherContactNameList: ConversationPanelProps['getMatcherContactNameList'];\n    if (this._deps.contactMatcher && this._deps.contactMatcher.ready) {\n      getMatcherContactList = (phoneNumber) => {\n        // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n        const matcherNames = this._deps.contactMatcher.dataMapping[phoneNumber];\n        if (matcherNames?.length > 0) {\n          return matcherNames.map(\n            (matcher) =>\n              // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n              `${matcher.name} | ${matcher.phoneNumbers[0].phoneType}`,\n          );\n        }\n        return [];\n      };\n      getMatcherContactNameList = (phoneNumber) => {\n        // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n        const matcherNames = this._deps.contactMatcher.dataMapping[phoneNumber];\n        if (matcherNames?.length > 0) {\n          return matcherNames.map((matcher) => matcher.name);\n        }\n        return [];\n      };\n      // @ts-expect-error TS(2322): Type '(phoneNumber: string) => string | null' is n... Remove this comment to see the full error message\n      getMatcherContactName = (phoneNumber) => {\n        const matcherNames = getMatcherContactNameList(phoneNumber);\n        return matcherNames?.length > 0 ? matcherNames.join('&') : null;\n      };\n    }\n\n    return {\n      replyToReceivers: (text, attachments) =>\n        // @ts-expect-error TS(2322): Type 'Promise<GetMessageInfoResponse | null>' is n... Remove this comment to see the full error message\n        this._deps.conversations.replyToReceivers(text, attachments),\n      unloadConversation: () => this._deps.conversations.unloadConversation(),\n      loadConversation: (id) => this._deps.conversations.loadConversation(id),\n      updateMessageText: (text) =>\n        // @ts-expect-error TS(2322): Type 'Promise<boolean | undefined>' is not assigna... Remove this comment to see the full error message\n        this._deps.conversations.updateMessageText(text),\n      addAttachment: (attachment) =>\n        this._deps.conversations.addAttachment(attachment),\n      removeAttachment: (attachment) =>\n        this._deps.conversations.removeAttachment(attachment),\n      // @ts-expect-error TS(2322): Type '(options: Partial<FormatDateTimeOptions>) =>... Remove this comment to see the full error message\n      dateTimeFormatter:\n        dateTimeFormatter ??\n        ((options) => this._deps.dateTimeFormat.formatDateTime(options)),\n      formatPhone: (phoneNumber) =>\n        // @ts-expect-error TS(2322): Type 'string | null | undefined' is not assignable... Remove this comment to see the full error message\n        formatNumber({\n          phoneNumber,\n          areaCode: this._deps.regionSettings.areaCode,\n          countryCode: this._deps.regionSettings.countryCode,\n          maxExtensionLength: this._deps.accountInfo.maxExtensionNumberLength,\n        }),\n      // @ts-expect-error TS(2454): Variable 'getMatcherContactName' is used before be... Remove this comment to see the full error message\n      getMatcherContactName,\n      // @ts-expect-error TS(2454): Variable 'getMatcherContactList' is used before be... Remove this comment to see the full error message\n      getMatcherContactList,\n      // @ts-expect-error TS(2454): Variable 'getMatcherContactNameList' is used befor... Remove this comment to see the full error message\n      getMatcherContactNameList,\n      onLogConversation:\n        onLogConversation ||\n        (this._deps.conversationLogger &&\n          (async ({ redirect = true, ...options }) => {\n            await this._deps.conversationLogger.logConversation({\n              ...options,\n              redirect,\n            });\n          })),\n      goBack: () => {\n        this._deps.routerInteraction.push(conversationsPath);\n      },\n      readMessages: (id) => {\n        this._deps.messageStore.readMessages(id);\n      },\n      loadPreviousMessages: () => {\n        this._deps.conversations.fetchOldMessages();\n      },\n      renderExtraButton,\n      onLinkClick: (href: string) =>\n        this._trackClickConversationHyperlink(href),\n    };\n  }\n\n  @track((_, href) => {\n    let linkType = 'website';\n    if (href.startsWith('mailto:')) {\n      linkType = 'email';\n    }\n    return [\n      trackEvents.clickConversationHyperlink,\n      { 'Hyperlink type': linkType },\n    ];\n  })\n  private _trackClickConversationHyperlink(href: string) {}\n}\n"],"mappings":"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"}