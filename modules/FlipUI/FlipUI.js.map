{"version":3,"file":"FlipUI.js","names":["_contactHelper","require","_di","_formatNumber","_core","_dec","_dec2","_class","_class2","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_classCallCheck","a","n","TypeError","_defineProperties","key","_createClass","prototype","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","__proto__","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","l","initializer","slice","reverse","reduce","FlipUI","Module","name","deps","dep","optional","computed","that","sessionId","_deps","webphone","sessions","_RcUIModuleV","_super","_this","getUIProps","_ref","_this$session","_this2","params","_ref$showCustomPhoneL","showCustomPhoneLabel","isOnFlip","session","currentLocale","locale","flipNumbers","forwardingNumber","map","flipNumber","customLabel","getExtensionPhoneNumberLabel","phoneNumber","extensionPhoneNumber","numbers","label","getUIFunctions","_this3","onFlip","_this3$_deps$webphone","flip","onComplete","_this3$_deps$webphone2","hangup","onBack","routerInteraction","goBack","onCallEnd","replace","formatPhone","formatNumber","areaCode","regionSettings","countryCode","maxExtensionLength","accountInfo","maxExtensionNumberLength","get","_this4","find","id","RcUIModuleV2","exports"],"sources":["modules/FlipUI/FlipUI.ts"],"sourcesContent":["import { getExtensionPhoneNumberLabel } from '@ringcentral-integration/commons/lib/contactHelper';\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport { formatNumber } from '@ringcentral-integration/commons/lib/formatNumber';\nimport type { UIFunctions, UIProps } from '@ringcentral-integration/core';\nimport { computed, RcUIModuleV2 } from '@ringcentral-integration/core';\n\nimport type {\n  Deps,\n  FlipUIContainerProps,\n  FlipUIPanelProps,\n} from './FlipUI.interface';\n\n@Module({\n  name: 'FlipUI',\n  deps: [\n    'Locale',\n    'Webphone',\n    'ForwardingNumber',\n    'ExtensionPhoneNumber',\n    'RegionSettings',\n    'RouterInteraction',\n    'AccountInfo',\n    { dep: 'FlipUIOptions', optional: true },\n  ],\n})\nexport class FlipUI extends RcUIModuleV2<Deps> {\n  private sessionId: string | null = null;\n\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n  }\n\n  @computed((that: FlipUI) => [that.sessionId, that._deps.webphone.sessions])\n  get session() {\n    return (\n      this.sessionId &&\n      this._deps.webphone.sessions.find((s) => s.id === this.sessionId)\n    );\n  }\n\n  getUIProps({\n    params: { sessionId },\n    showCustomPhoneLabel = false,\n  }: FlipUIContainerProps): UIProps<FlipUIPanelProps> {\n    this.sessionId = sessionId;\n\n    return {\n      sessionId,\n      // @ts-expect-error TS(2339): Property 'isOnFlip' does not exist on type '\"\" | N... Remove this comment to see the full error message\n      isOnFlip: this.session?.isOnFlip,\n      currentLocale: this._deps.locale.currentLocale,\n      flipNumbers: this._deps.forwardingNumber.flipNumbers.map((flipNumber) => {\n        // get phone label from extensionPhoneNumber\n        let customLabel;\n        if (showCustomPhoneLabel) {\n          customLabel = getExtensionPhoneNumberLabel(\n            flipNumber.phoneNumber!,\n            this._deps.extensionPhoneNumber.numbers,\n          );\n        }\n        return {\n          ...flipNumber,\n          label: customLabel || flipNumber.label,\n        };\n      }),\n      // @ts-expect-error TS(2322): Type '\"\" | NormalizedSession | null | undefined' i... Remove this comment to see the full error message\n      session: this.session,\n    };\n  }\n\n  getUIFunctions(): UIFunctions<FlipUIPanelProps> {\n    return {\n      onFlip: (...args) => this._deps.webphone.flip(...args),\n      onComplete: (...args) => this._deps.webphone.hangup(...args),\n      onBack: () => this._deps.routerInteraction.goBack(),\n      onCallEnd: () => this._deps.routerInteraction.replace('/dialer'),\n      formatPhone: (phoneNumber) =>\n        // @ts-expect-error TS(2322): Type 'string | null | undefined' is not assignable... Remove this comment to see the full error message\n        formatNumber({\n          phoneNumber,\n          areaCode: this._deps.regionSettings.areaCode,\n          countryCode: this._deps.regionSettings.countryCode,\n          maxExtensionLength: this._deps.accountInfo.maxExtensionNumberLength,\n        }),\n    };\n  }\n}\n"],"mappings":"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","ignoreList":[]}