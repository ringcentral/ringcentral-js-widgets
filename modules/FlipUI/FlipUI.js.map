{"version":3,"sources":["modules/FlipUI/FlipUI.ts"],"names":["FlipUI","name","deps","dep","optional","that","sessionId","_deps","webphone","sessions","params","isOnFlip","session","currentLocale","locale","flipNumbers","forwardingNumber","onFlip","flip","onComplete","hangup","onBack","routerInteraction","goBack","onCallEnd","replace","formatPhone","phoneNumber","areaCode","regionSettings","countryCode","find","s","id","RcUIModuleV2"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;IAwBaA,M,WAXZ,gBAAO;AACNC,EAAAA,IAAI,EAAE,QADA;AAENC,EAAAA,IAAI,EAAE,CACJ,QADI,EAEJ,UAFI,EAGJ,kBAHI,EAIJ,gBAJI,EAKJ,mBALI,EAMJ;AAAEC,IAAAA,GAAG,EAAE,eAAP;AAAwBC,IAAAA,QAAQ,EAAE;AAAlC,GANI;AAFA,CAAP,C,UAoBE,oBAAS,UAACC,IAAD;AAAA,SAAkB,CAACA,IAAI,CAACC,SAAN,EAAiBD,IAAI,CAACE,KAAL,CAAWC,QAAX,CAAoBC,QAArC,CAAlB;AAAA,CAAT,C;;;;;AAND,kBAAYP,IAAZ,EAAwB;AAAA;;AAAA;;AACtB,8BAAM;AACJA,MAAAA,IAAI,EAAJA;AADI,KAAN;AADsB,UAFhBI,SAEgB,GAFW,IAEX;AAAA;AAIvB;;;;qCAYmD;AAAA;;AAAA,UADxCA,SACwC,QADlDI,MACkD,CADxCJ,SACwC;AAClD,WAAKA,SAAL,GAAiBA,SAAjB;AAEA,aAAO;AACLA,QAAAA,SAAS,EAATA,SADK;AAELK,QAAAA,QAAQ,mBAAE,KAAKC,OAAP,kDAAE,cAAcD,QAFnB;AAGLE,QAAAA,aAAa,EAAE,KAAKN,KAAL,CAAWO,MAAX,CAAkBD,aAH5B;AAILE,QAAAA,WAAW,EAAE,KAAKR,KAAL,CAAWS,gBAAX,CAA4BD,WAJpC;AAKLH,QAAAA,OAAO,EAAE,KAAKA;AALT,OAAP;AAOD;;;qCAE+C;AAAA;;AAC9C,aAAO;AACLK,QAAAA,MAAM,EAAE;AAAA;;AAAA,iBAAa,yBAAA,MAAI,CAACV,KAAL,CAAWC,QAAX,EAAoBU,IAApB,wCAAb;AAAA,SADH;AAELC,QAAAA,UAAU,EAAE;AAAA;;AAAA,iBAAa,0BAAA,MAAI,CAACZ,KAAL,CAAWC,QAAX,EAAoBY,MAApB,yCAAb;AAAA,SAFP;AAGLC,QAAAA,MAAM,EAAE;AAAA,iBAAM,MAAI,CAACd,KAAL,CAAWe,iBAAX,CAA6BC,MAA7B,EAAN;AAAA,SAHH;AAILC,QAAAA,SAAS,EAAE;AAAA,iBAAM,MAAI,CAACjB,KAAL,CAAWe,iBAAX,CAA6BG,OAA7B,CAAqC,SAArC,CAAN;AAAA,SAJN;AAKLC,QAAAA,WAAW,EAAE,qBAACC,WAAD;AAAA,iBACX,gCAAa;AACXA,YAAAA,WAAW,EAAXA,WADW;AAEXC,YAAAA,QAAQ,EAAE,MAAI,CAACrB,KAAL,CAAWsB,cAAX,CAA0BD,QAFzB;AAGXE,YAAAA,WAAW,EAAE,MAAI,CAACvB,KAAL,CAAWsB,cAAX,CAA0BC;AAH5B,WAAb,CADW;AAAA;AALR,OAAP;AAYD;;;wBAlCa;AAAA;;AACZ,aACE,KAAKxB,SAAL,IACA,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,QAApB,CAA6BsB,IAA7B,CAAkC,UAACC,CAAD;AAAA,eAAOA,CAAC,CAACC,EAAF,KAAS,MAAI,CAAC3B,SAArB;AAAA,OAAlC,CAFF;AAID;;;;EAfyB4B,kB","sourcesContent":["import { Module } from '@ringcentral-integration/commons/lib/di';\nimport { formatNumber } from '@ringcentral-integration/commons/lib/formatNumber';\nimport {\n  computed,\n  RcUIModuleV2,\n  UIFunctions,\n  UIProps,\n} from '@ringcentral-integration/core';\n\nimport {\n  Deps,\n  FlipUIContainerProps,\n  FlipUIPanelProps,\n} from './FlipUI.interface';\n\n@Module({\n  name: 'FlipUI',\n  deps: [\n    'Locale',\n    'Webphone',\n    'ForwardingNumber',\n    'RegionSettings',\n    'RouterInteraction',\n    { dep: 'FlipUIOptions', optional: true },\n  ],\n})\nexport class FlipUI extends RcUIModuleV2<Deps> {\n  private sessionId: string | null = null;\n\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n  }\n\n  @computed((that: FlipUI) => [that.sessionId, that._deps.webphone.sessions])\n  get session() {\n    return (\n      this.sessionId &&\n      this._deps.webphone.sessions.find((s) => s.id === this.sessionId)\n    );\n  }\n\n  getUIProps({\n    params: { sessionId },\n  }: FlipUIContainerProps): UIProps<FlipUIPanelProps> {\n    this.sessionId = sessionId;\n\n    return {\n      sessionId,\n      isOnFlip: this.session?.isOnFlip,\n      currentLocale: this._deps.locale.currentLocale,\n      flipNumbers: this._deps.forwardingNumber.flipNumbers,\n      session: this.session,\n    };\n  }\n\n  getUIFunctions(): UIFunctions<FlipUIPanelProps> {\n    return {\n      onFlip: (...args) => this._deps.webphone.flip(...args),\n      onComplete: (...args) => this._deps.webphone.hangup(...args),\n      onBack: () => this._deps.routerInteraction.goBack(),\n      onCallEnd: () => this._deps.routerInteraction.replace('/dialer'),\n      formatPhone: (phoneNumber) =>\n        formatNumber({\n          phoneNumber,\n          areaCode: this._deps.regionSettings.areaCode,\n          countryCode: this._deps.regionSettings.countryCode,\n        }),\n    };\n  }\n}\n"],"file":"FlipUI.js"}