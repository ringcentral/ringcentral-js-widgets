{"version":3,"file":"FlipUI.js","names":["_contactHelper","require","_di","_formatNumber","_core","_dec","_dec2","_class","_class2","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_classCallCheck","a","n","TypeError","_defineProperties","key","_createClass","prototype","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","_setPrototypeOf","_applyDecoratedDescriptor","l","initializer","slice","reverse","reduce","FlipUI","exports","Module","name","deps","dep","optional","computed","that","sessionId","_deps","webphone","sessions","_RcUIModuleV","_this","get","_this2","find","s","id","getUIProps","_ref","_this$session","_this3","params","_ref$showCustomPhoneL","showCustomPhoneLabel","isOnFlip","session","currentLocale","locale","flipNumbers","forwardingNumber","map","flipNumber","customLabel","getExtensionPhoneNumberLabel","phoneNumber","extensionPhoneNumber","numbers","label","getUIFunctions","_this4","onFlip","_this4$_deps$webphone","flip","onComplete","_this4$_deps$webphone2","hangup","onBack","routerInteraction","goBack","onCallEnd","replace","formatPhone","formatNumber","areaCode","regionSettings","countryCode","maxExtensionLength","accountInfo","maxExtensionNumberLength","RcUIModuleV2"],"sources":["modules/FlipUI/FlipUI.ts"],"sourcesContent":["import { getExtensionPhoneNumberLabel } from '@ringcentral-integration/commons/lib/contactHelper';\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport { formatNumber } from '@ringcentral-integration/commons/lib/formatNumber';\nimport type { UIFunctions, UIProps } from '@ringcentral-integration/core';\nimport { computed, RcUIModuleV2 } from '@ringcentral-integration/core';\n\nimport type {\n  Deps,\n  FlipUIContainerProps,\n  FlipUIPanelProps,\n} from './FlipUI.interface';\n\n@Module({\n  name: 'FlipUI',\n  deps: [\n    'Locale',\n    'Webphone',\n    'ForwardingNumber',\n    'ExtensionPhoneNumber',\n    'RegionSettings',\n    'RouterInteraction',\n    'AccountInfo',\n    { dep: 'FlipUIOptions', optional: true },\n  ],\n})\nexport class FlipUI extends RcUIModuleV2<Deps> {\n  private sessionId: string | null = null;\n\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n  }\n\n  @computed((that: FlipUI) => [that.sessionId, that._deps.webphone.sessions])\n  get session() {\n    return (\n      this.sessionId &&\n      this._deps.webphone.sessions.find((s) => s.id === this.sessionId)\n    );\n  }\n\n  getUIProps({\n    params: { sessionId },\n    showCustomPhoneLabel = false,\n  }: FlipUIContainerProps): UIProps<FlipUIPanelProps> {\n    this.sessionId = sessionId;\n\n    return {\n      sessionId,\n      // @ts-expect-error TS(2339): Property 'isOnFlip' does not exist on type '\"\" | N... Remove this comment to see the full error message\n      isOnFlip: this.session?.isOnFlip,\n      currentLocale: this._deps.locale.currentLocale,\n      flipNumbers: this._deps.forwardingNumber.flipNumbers.map((flipNumber) => {\n        // get phone label from extensionPhoneNumber\n        let customLabel;\n        if (showCustomPhoneLabel) {\n          customLabel = getExtensionPhoneNumberLabel(\n            flipNumber.phoneNumber!,\n            this._deps.extensionPhoneNumber.numbers,\n          );\n        }\n        return {\n          ...flipNumber,\n          label: customLabel || flipNumber.label,\n        };\n      }),\n      // @ts-expect-error TS(2322): Type '\"\" | NormalizedSession | null | undefined' i... Remove this comment to see the full error message\n      session: this.session,\n    };\n  }\n\n  getUIFunctions(): UIFunctions<FlipUIPanelProps> {\n    return {\n      onFlip: (...args) => this._deps.webphone.flip(...args),\n      onComplete: (...args) => this._deps.webphone.hangup(...args),\n      onBack: () => this._deps.routerInteraction.goBack(),\n      onCallEnd: () => this._deps.routerInteraction.replace('/dialer'),\n      formatPhone: (phoneNumber) =>\n        // @ts-expect-error TS(2322): Type 'string | null | undefined' is not assignable... Remove this comment to see the full error message\n        formatNumber({\n          phoneNumber,\n          areaCode: this._deps.regionSettings.areaCode,\n          countryCode: this._deps.regionSettings.countryCode,\n          maxExtensionLength: this._deps.accountInfo.maxExtensionNumberLength,\n        }),\n    };\n  }\n}\n"],"mappings":"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","ignoreList":[]}