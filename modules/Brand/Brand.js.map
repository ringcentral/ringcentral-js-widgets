{"version":3,"file":"Brand.js","names":["_core","require","_i18n","_di","_processI18n","_processAssets","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_descriptor","_descriptor2","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","call","slice","constructor","name","Array","from","test","n","l","Symbol","iterator","i","u","f","next","done","isArray","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","prototype","_toPrimitive","_typeof","toPrimitive","String","Number","_inherits","create","_setPrototypeOf","setPrototypeOf","bind","__proto__","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","reverse","reduce","_initializerWarningHelper","Error","Brand","Module","deps","dep","optional","computed","that","_that$_deps$locale","_that$_deps$locale2","_dynamicConfig","_deps","locale","currentLocale","defaultLocale","brandConfig","_defaultConfig","_that$_deps$locale3","_that$_deps$locale4","_RcModuleV","_super","_this$_deps$brandConf","_this","_prefix","concat","code","application","bindUpdateDocumentVariables","setDynamicConfig","config","setThemeMap","val","themeMap","_this2","global","document","updateDocumentVariables","check","JSON","stringify","styleVariable","updateVal","watch","Promise","resolve","then","_this$brandConfig$sty","entries","_ref","_ref2","documentElement","style","setProperty","get","_this$_deps$locale$cu","_this$_deps$locale","_this$_deps$locale$de","_this$_deps$locale2","processI18n","DEFAULT_LOCALE","_this$_deps$brandConf2","assets","processAssets","brandConfigOptions","assetOrigin","window","location","origin","_this$_dynamicConfig","_this$_deps$locale$cu2","_this$_deps$locale3","_this$_deps$locale$de2","_this$_deps$locale4","_this$_deps$prefix","prefix","id","_this$brandConfig$sho","shortName","appName","shortAppName","rcvProductName","rcvE2EESupportUrl","rcvTeleconference","RcModuleV2","state","action","light","dark","contrast","exports"],"sources":["modules/Brand/Brand.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n  watch,\n} from '@ringcentral-integration/core';\nimport { DEFAULT_LOCALE } from '@ringcentral-integration/i18n';\n\nimport { Module } from '../../lib/di';\nimport { processI18n } from '../../lib/processI18n';\n\nimport type { BrandThemeMap, Deps } from './Brand.interface';\nimport type { BrandConfig } from './BrandConfig.interface';\nimport { processAssets } from './processAssets';\n\n@Module({\n  name: 'Brand',\n  deps: [\n    'BrandConfig',\n    'Locale',\n    { dep: 'Prefix', optional: true },\n    { dep: 'BrandConfigOptions', optional: true },\n  ],\n})\nexport class Brand<\n  T extends BrandConfig = BrandConfig,\n  D extends Deps<T> = Deps<T>,\n> extends RcModuleV2<D> {\n  protected _prefix: string | null = null;\n  constructor(deps: D) {\n    super({\n      deps,\n    });\n    this._prefix = `${this._deps.brandConfig.code}-${\n      this._deps.brandConfig.application ?? ''\n    }`;\n\n    this.bindUpdateDocumentVariables();\n  }\n\n  @state\n  protected _dynamicConfig: T | null = null;\n\n  @action\n  setDynamicConfig(config: T) {\n    this._dynamicConfig = config;\n  }\n\n  @state\n  themeMap: BrandThemeMap = {\n    default: [],\n    light: [],\n    dark: [],\n    contrast: [],\n  };\n\n  @action\n  setThemeMap(val: BrandThemeMap) {\n    this.themeMap = val;\n  }\n\n  private bindUpdateDocumentVariables() {\n    if (!global.document) return;\n\n    const updateDocumentVariables = () => {\n      const check = () => JSON.stringify(this.brandConfig.styleVariable);\n      let updateVal = check();\n      this.updateDocumentVariables();\n\n      watch(this, check, (val) => {\n        if (val === updateVal) return;\n        updateVal = val;\n        this.updateDocumentVariables();\n      });\n    };\n\n    // * in old arch chrome extension content page, need to wait a tick, otherwise the watch event will not get any update\n    Promise.resolve().then(updateDocumentVariables);\n  }\n\n  private updateDocumentVariables() {\n    // apply that style variable to global css variable\n    Object.entries(this.brandConfig.styleVariable ?? {}).forEach(\n      ([key, value]) => {\n        document.documentElement.style.setProperty(`--${key}`, `${value}`);\n      },\n    );\n  }\n  /**\n   * dynamic brand config with i18n processed with currentLocale\n   */\n  @computed((that: Brand<T, D>) => [\n    that._dynamicConfig,\n    that._deps.locale?.currentLocale,\n    that._deps.locale?.defaultLocale,\n  ])\n  get dynamicConfig() {\n    return (\n      this._dynamicConfig &&\n      processI18n(\n        this._dynamicConfig,\n        this._deps.locale?.currentLocale ?? DEFAULT_LOCALE,\n        this._deps.locale?.defaultLocale ?? DEFAULT_LOCALE,\n      )\n    );\n  }\n\n  /**\n   * default brand config with assets processed\n   */\n  @computed((that: Brand<T, D>) => [that._deps.brandConfig])\n  protected get _defaultConfig() {\n    const brandConfig = this._deps.brandConfig;\n\n    if (!brandConfig?.assets) return brandConfig;\n\n    /**\n     * use current window location.origin as origin\n     * to avoid app inject into others page meet resource path issue\n     * like chrome extension content page\n     */\n    return {\n      ...brandConfig,\n      assets: processAssets(\n        brandConfig.assets,\n        this._deps.brandConfigOptions?.assetOrigin || window.location.origin,\n      ),\n    };\n  }\n\n  /**\n   * default brand config with assets and i18n processed using en-US\n   */\n  @computed((that: Brand<T, D>) => [that._defaultConfig])\n  get defaultConfig() {\n    return processI18n(this._defaultConfig);\n  }\n\n  /**\n   * Generic brand config accessor that returns dynamic config if available, and defaults\n   * to default config. The result is assets and i18n processed with current Locale.\n   */\n  @computed((that: Brand<T, D>) => [\n    that._defaultConfig,\n    that._dynamicConfig,\n    that._deps.locale?.currentLocale,\n    that._deps.locale?.defaultLocale,\n  ])\n  get brandConfig() {\n    return processI18n(\n      this._dynamicConfig ?? this._defaultConfig,\n      this._deps.locale?.currentLocale ?? DEFAULT_LOCALE,\n      this._deps.locale?.defaultLocale ?? DEFAULT_LOCALE,\n    );\n  }\n\n  get prefix() {\n    return this._deps.prefix ?? this._prefix;\n  }\n\n  get id() {\n    return this.brandConfig.id;\n  }\n\n  get code() {\n    return this.brandConfig.code;\n  }\n\n  get name() {\n    return this.brandConfig.name;\n  }\n\n  get shortName() {\n    return this.brandConfig.shortName ?? this.brandConfig.name;\n  }\n\n  get appName() {\n    return this.brandConfig.appName;\n  }\n\n  get shortAppName() {\n    return this.brandConfig.shortAppName;\n  }\n\n  get rcvProductName() {\n    return this.brandConfig.rcvProductName;\n  }\n\n  get rcvE2EESupportUrl() {\n    return this.brandConfig.rcvE2EESupportUrl;\n  }\n\n  get application() {\n    return this.brandConfig.application;\n  }\n\n  get rcvTeleconference() {\n    return this.brandConfig.rcvTeleconference;\n  }\n\n  get assets() {\n    return this.brandConfig.assets;\n  }\n}\n"],"mappings":"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","ignoreList":[]}