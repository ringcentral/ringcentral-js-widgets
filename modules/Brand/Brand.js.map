{"version":3,"file":"Brand.js","names":["_core","require","_i18n","_processI18n","_di","_processAssets","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_descriptor","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","call","slice","constructor","name","Array","from","test","n","l","Symbol","iterator","i","u","f","next","done","isArray","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","prototype","_toPrimitive","_typeof","toPrimitive","String","Number","_inherits","create","_setPrototypeOf","setPrototypeOf","bind","__proto__","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","reverse","reduce","_initializerWarningHelper","Error","Brand","Module","deps","dep","optional","computed","that","_that$_deps$locale","_that$_deps$locale2","_dynamicConfig","_deps","locale","currentLocale","defaultLocale","brandConfig","_defaultConfig","_that$_deps$locale3","_that$_deps$locale4","_RcModuleV","_super","_this$_deps$brandConf","_this","_prefix","concat","code","application","bindUpdateDocumentVariables","setDynamicConfig","config","_this2","global","document","updateDocumentVariables","check","JSON","stringify","styleVariable","updateVal","watch","val","Promise","resolve","then","_this$brandConfig$sty","entries","_ref","_ref2","documentElement","style","setProperty","get","_this$_deps$locale$cu","_this$_deps$locale","_this$_deps$locale$de","_this$_deps$locale2","processI18n","DEFAULT_LOCALE","_this$_deps$brandConf2","assets","processAssets","brandConfigOptions","assetOrigin","location","origin","_this$_dynamicConfig","_this$_deps$locale$cu2","_this$_deps$locale3","_this$_deps$locale$de2","_this$_deps$locale4","_this$_deps$prefix","prefix","id","_this$brandConfig$sho","shortName","appName","shortAppName","rcvProductName","rcvE2EESupportUrl","rcvTeleconference","RcModuleV2","state","action","exports"],"sources":["modules/Brand/Brand.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n  watch,\n} from '@ringcentral-integration/core';\nimport { DEFAULT_LOCALE } from '@ringcentral-integration/i18n';\nimport { processI18n } from '@ringcentral-integration/i18n/lib/processI18n';\n\nimport { Module } from '../../lib/di';\n\nimport type { Deps } from './Brand.interface';\nimport type { BrandConfig } from './BrandConfig.interface';\nimport { processAssets } from './processAssets';\n\n@Module({\n  name: 'Brand',\n  deps: [\n    'BrandConfig',\n    'Locale',\n    { dep: 'Prefix', optional: true },\n    { dep: 'BrandConfigOptions', optional: true },\n  ],\n})\nexport class Brand<\n  T extends BrandConfig = BrandConfig,\n  D extends Deps<T> = Deps<T>,\n> extends RcModuleV2<D> {\n  protected _prefix: string | null = null;\n  constructor(deps: D) {\n    super({\n      deps,\n    });\n    this._prefix = `${this._deps.brandConfig.code}-${\n      this._deps.brandConfig.application ?? ''\n    }`;\n\n    this.bindUpdateDocumentVariables();\n  }\n\n  @state\n  protected _dynamicConfig: T | null = null;\n\n  @action\n  setDynamicConfig(config: T) {\n    this._dynamicConfig = config;\n  }\n\n  private bindUpdateDocumentVariables() {\n    if (!global.document) return;\n\n    const updateDocumentVariables = () => {\n      const check = () => JSON.stringify(this.brandConfig.styleVariable);\n      let updateVal = check();\n      this.updateDocumentVariables();\n\n      watch(this, check, (val) => {\n        if (val === updateVal) return;\n        updateVal = val;\n        this.updateDocumentVariables();\n      });\n    };\n\n    // * in old arch chrome extension content page, need to wait a tick, otherwise the watch event will not get any update\n    Promise.resolve().then(updateDocumentVariables);\n  }\n\n  private updateDocumentVariables() {\n    // apply that style variable to global css variable\n    Object.entries(this.brandConfig.styleVariable ?? {}).forEach(\n      ([key, value]) => {\n        document.documentElement.style.setProperty(`--${key}`, `${value}`);\n      },\n    );\n  }\n  /**\n   * dynamic brand config with i18n processed with currentLocale\n   */\n  @computed((that: Brand<T, D>) => [\n    that._dynamicConfig,\n    that._deps.locale?.currentLocale,\n    that._deps.locale?.defaultLocale,\n  ])\n  get dynamicConfig() {\n    return (\n      this._dynamicConfig &&\n      processI18n(\n        this._dynamicConfig,\n        this._deps.locale?.currentLocale ?? DEFAULT_LOCALE,\n        this._deps.locale?.defaultLocale ?? DEFAULT_LOCALE,\n      )\n    );\n  }\n\n  /**\n   * default brand config with assets processed\n   */\n  @computed((that: Brand<T, D>) => [that._deps.brandConfig])\n  protected get _defaultConfig() {\n    const brandConfig = this._deps.brandConfig;\n\n    if (!brandConfig?.assets) return brandConfig;\n\n    /**\n     * use current window location.origin as origin\n     * to avoid app inject into others page meet resource path issue\n     * like chrome extension content page\n     */\n    return {\n      ...brandConfig,\n      assets: processAssets(\n        brandConfig.assets,\n        this._deps.brandConfigOptions?.assetOrigin || location.origin,\n      ),\n    };\n  }\n\n  /**\n   * default brand config with assets and i18n processed using en-US\n   */\n  @computed((that: Brand<T, D>) => [that._defaultConfig])\n  get defaultConfig() {\n    return processI18n(this._defaultConfig);\n  }\n\n  /**\n   * Generic brand config accessor that returns dynamic config if available, and defaults\n   * to default config. The result is assets and i18n processed with current Locale.\n   */\n  @computed((that: Brand<T, D>) => [\n    that._defaultConfig,\n    that._dynamicConfig,\n    that._deps.locale?.currentLocale,\n    that._deps.locale?.defaultLocale,\n  ])\n  get brandConfig() {\n    return processI18n(\n      this._dynamicConfig ?? this._defaultConfig,\n      this._deps.locale?.currentLocale ?? DEFAULT_LOCALE,\n      this._deps.locale?.defaultLocale ?? DEFAULT_LOCALE,\n    );\n  }\n\n  get prefix() {\n    return this._deps.prefix ?? this._prefix;\n  }\n\n  get id() {\n    return this.brandConfig.id;\n  }\n\n  get code() {\n    return this.brandConfig.code;\n  }\n\n  get name() {\n    return this.brandConfig.name;\n  }\n\n  get shortName() {\n    return this.brandConfig.shortName ?? this.brandConfig.name;\n  }\n\n  get appName() {\n    return this.brandConfig.appName;\n  }\n\n  get shortAppName() {\n    return this.brandConfig.shortAppName;\n  }\n\n  get rcvProductName() {\n    return this.brandConfig.rcvProductName;\n  }\n\n  get rcvE2EESupportUrl() {\n    return this.brandConfig.rcvE2EESupportUrl;\n  }\n\n  get application() {\n    return this.brandConfig.application;\n  }\n\n  get rcvTeleconference() {\n    return this.brandConfig.rcvTeleconference;\n  }\n\n  get assets() {\n    return this.brandConfig.assets;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAOA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,YAAA,GAAAF,OAAA;AAEA,IAAAG,GAAA,GAAAH,OAAA;AAIA,IAAAI,cAAA,GAAAJ,OAAA;AAAgD,IAAAK,IAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,OAAA,EAAAC,WAAA;AAAA,SAAAC,QAAAC,CAAA,EAAAC,CAAA,QAAAC,CAAA,GAAAC,MAAA,CAAAC,IAAA,CAAAJ,CAAA,OAAAG,MAAA,CAAAE,qBAAA,QAAAC,CAAA,GAAAH,MAAA,CAAAE,qBAAA,CAAAL,CAAA,GAAAC,CAAA,KAAAK,CAAA,GAAAA,CAAA,CAAAC,MAAA,WAAAN,CAAA,WAAAE,MAAA,CAAAK,wBAAA,CAAAR,CAAA,EAAAC,CAAA,EAAAQ,UAAA,OAAAP,CAAA,CAAAQ,IAAA,CAAAC,KAAA,CAAAT,CAAA,EAAAI,CAAA,YAAAJ,CAAA;AAAA,SAAAU,cAAAZ,CAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAY,SAAA,CAAAC,MAAA,EAAAb,CAAA,UAAAC,CAAA,WAAAW,SAAA,CAAAZ,CAAA,IAAAY,SAAA,CAAAZ,CAAA,QAAAA,CAAA,OAAAF,OAAA,CAAAI,MAAA,CAAAD,CAAA,OAAAa,OAAA,WAAAd,CAAA,IAAAe,eAAA,CAAAhB,CAAA,EAAAC,CAAA,EAAAC,CAAA,CAAAD,CAAA,SAAAE,MAAA,CAAAc,yBAAA,GAAAd,MAAA,CAAAe,gBAAA,CAAAlB,CAAA,EAAAG,MAAA,CAAAc,yBAAA,CAAAf,CAAA,KAAAH,OAAA,CAAAI,MAAA,CAAAD,CAAA,GAAAa,OAAA,WAAAd,CAAA,IAAAE,MAAA,CAAAgB,cAAA,CAAAnB,CAAA,EAAAC,CAAA,EAAAE,MAAA,CAAAK,wBAAA,CAAAN,CAAA,EAAAD,CAAA,iBAAAD,CAAA;AAAA,SAAAgB,gBAAAhB,CAAA,EAAAC,CAAA,EAAAC,CAAA,YAAAD,CAAA,GAAAmB,cAAA,CAAAnB,CAAA,MAAAD,CAAA,GAAAG,MAAA,CAAAgB,cAAA,CAAAnB,CAAA,EAAAC,CAAA,IAAAoB,KAAA,EAAAnB,CAAA,EAAAO,UAAA,MAAAa,YAAA,MAAAC,QAAA,UAAAvB,CAAA,CAAAC,CAAA,IAAAC,CAAA,EAAAF,CAAA;AAAA,SAAAwB,eAAAvB,CAAA,EAAAD,CAAA,WAAAyB,eAAA,CAAAxB,CAAA,KAAAyB,qBAAA,CAAAzB,CAAA,EAAAD,CAAA,KAAA2B,2BAAA,CAAA1B,CAAA,EAAAD,CAAA,KAAA4B,gBAAA;AAAA,SAAAA,iBAAA,cAAAC,SAAA;AAAA,SAAAF,4BAAA1B,CAAA,EAAA6B,CAAA,QAAA7B,CAAA,2BAAAA,CAAA,SAAA8B,iBAAA,CAAA9B,CAAA,EAAA6B,CAAA,OAAA5B,CAAA,MAAA8B,QAAA,CAAAC,IAAA,CAAAhC,CAAA,EAAAiC,KAAA,6BAAAhC,CAAA,IAAAD,CAAA,CAAAkC,WAAA,KAAAjC,CAAA,GAAAD,CAAA,CAAAkC,WAAA,CAAAC,IAAA,aAAAlC,CAAA,cAAAA,CAAA,GAAAmC,KAAA,CAAAC,IAAA,CAAArC,CAAA,oBAAAC,CAAA,+CAAAqC,IAAA,CAAArC,CAAA,IAAA6B,iBAAA,CAAA9B,CAAA,EAAA6B,CAAA;AAAA,SAAAC,kBAAA9B,CAAA,EAAA6B,CAAA,aAAAA,CAAA,IAAAA,CAAA,GAAA7B,CAAA,CAAAa,MAAA,MAAAgB,CAAA,GAAA7B,CAAA,CAAAa,MAAA,YAAAd,CAAA,MAAAwC,CAAA,GAAAH,KAAA,CAAAP,CAAA,GAAA9B,CAAA,GAAA8B,CAAA,EAAA9B,CAAA,MAAAwC,CAAA,CAAAxC,CAAA,IAAAC,CAAA,CAAAD,CAAA,YAAAwC,CAAA;AAAA,SAAAd,sBAAAzB,CAAA,EAAAwC,CAAA,QAAAvC,CAAA,WAAAD,CAAA,gCAAAyC,MAAA,IAAAzC,CAAA,CAAAyC,MAAA,CAAAC,QAAA,KAAA1C,CAAA,4BAAAC,CAAA,QAAAF,CAAA,EAAAwC,CAAA,EAAAI,CAAA,EAAAC,CAAA,EAAAf,CAAA,OAAAgB,CAAA,OAAAxC,CAAA,iBAAAsC,CAAA,IAAA1C,CAAA,GAAAA,CAAA,CAAA+B,IAAA,CAAAhC,CAAA,GAAA8C,IAAA,QAAAN,CAAA,QAAAtC,MAAA,CAAAD,CAAA,MAAAA,CAAA,UAAA4C,CAAA,uBAAAA,CAAA,IAAA9C,CAAA,GAAA4C,CAAA,CAAAX,IAAA,CAAA/B,CAAA,GAAA8C,IAAA,MAAAlB,CAAA,CAAApB,IAAA,CAAAV,CAAA,CAAAqB,KAAA,GAAAS,CAAA,CAAAhB,MAAA,KAAA2B,CAAA,GAAAK,CAAA,sBAAA7C,CAAA,IAAAK,CAAA,OAAAkC,CAAA,GAAAvC,CAAA,yBAAA6C,CAAA,YAAA5C,CAAA,eAAA2C,CAAA,GAAA3C,CAAA,cAAAC,MAAA,CAAA0C,CAAA,MAAAA,CAAA,2BAAAvC,CAAA,QAAAkC,CAAA,aAAAV,CAAA;AAAA,SAAAL,gBAAAxB,CAAA,QAAAoC,KAAA,CAAAY,OAAA,CAAAhD,CAAA,UAAAA,CAAA;AAAA,SAAAiD,2BAAAlD,CAAA,EAAA4C,CAAA,EAAA3C,CAAA,EAAAwC,CAAA,IAAAxC,CAAA,IAAAE,MAAA,CAAAgB,cAAA,CAAAnB,CAAA,EAAA4C,CAAA,IAAAnC,UAAA,EAAAR,CAAA,CAAAQ,UAAA,EAAAa,YAAA,EAAArB,CAAA,CAAAqB,YAAA,EAAAC,QAAA,EAAAtB,CAAA,CAAAsB,QAAA,EAAAF,KAAA,EAAApB,CAAA,CAAAkD,WAAA,GAAAlD,CAAA,CAAAkD,WAAA,CAAAlB,IAAA,CAAAQ,CAAA;AAAA,SAAAW,gBAAAtB,CAAA,EAAAU,CAAA,UAAAV,CAAA,YAAAU,CAAA,aAAAX,SAAA;AAAA,SAAAwB,kBAAArD,CAAA,EAAAC,CAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAD,CAAA,CAAAa,MAAA,EAAAZ,CAAA,UAAAI,CAAA,GAAAL,CAAA,CAAAC,CAAA,GAAAI,CAAA,CAAAG,UAAA,GAAAH,CAAA,CAAAG,UAAA,QAAAH,CAAA,CAAAgB,YAAA,kBAAAhB,CAAA,KAAAA,CAAA,CAAAiB,QAAA,QAAApB,MAAA,CAAAgB,cAAA,CAAAnB,CAAA,EAAAoB,cAAA,CAAAd,CAAA,CAAAgD,GAAA,GAAAhD,CAAA;AAAA,SAAAiD,aAAAvD,CAAA,EAAAC,CAAA,EAAAC,CAAA,WAAAD,CAAA,IAAAoD,iBAAA,CAAArD,CAAA,CAAAwD,SAAA,EAAAvD,CAAA,GAAAC,CAAA,IAAAmD,iBAAA,CAAArD,CAAA,EAAAE,CAAA,GAAAC,MAAA,CAAAgB,cAAA,CAAAnB,CAAA,iBAAAuB,QAAA,SAAAvB,CAAA;AAAA,SAAAoB,eAAAlB,CAAA,QAAA0C,CAAA,GAAAa,YAAA,CAAAvD,CAAA,gCAAAwD,OAAA,CAAAd,CAAA,IAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAa,aAAAvD,CAAA,EAAAD,CAAA,oBAAAyD,OAAA,CAAAxD,CAAA,MAAAA,CAAA,SAAAA,CAAA,MAAAF,CAAA,GAAAE,CAAA,CAAAwC,MAAA,CAAAiB,WAAA,kBAAA3D,CAAA,QAAA4C,CAAA,GAAA5C,CAAA,CAAAiC,IAAA,CAAA/B,CAAA,EAAAD,CAAA,gCAAAyD,OAAA,CAAAd,CAAA,UAAAA,CAAA,YAAAf,SAAA,yEAAA5B,CAAA,GAAA2D,MAAA,GAAAC,MAAA,EAAA3D,CAAA;AAAA,SAAA4D,UAAA5D,CAAA,EAAAF,CAAA,6BAAAA,CAAA,aAAAA,CAAA,YAAA6B,SAAA,wDAAA3B,CAAA,CAAAsD,SAAA,GAAArD,MAAA,CAAA4D,MAAA,CAAA/D,CAAA,IAAAA,CAAA,CAAAwD,SAAA,IAAArB,WAAA,IAAAd,KAAA,EAAAnB,CAAA,EAAAqB,QAAA,MAAAD,YAAA,WAAAnB,MAAA,CAAAgB,cAAA,CAAAjB,CAAA,iBAAAqB,QAAA,SAAAvB,CAAA,IAAAgE,eAAA,CAAA9D,CAAA,EAAAF,CAAA;AAAA,SAAAgE,gBAAA9D,CAAA,EAAAF,CAAA,WAAAgE,eAAA,GAAA7D,MAAA,CAAA8D,cAAA,GAAA9D,MAAA,CAAA8D,cAAA,CAAAC,IAAA,eAAAhE,CAAA,EAAAF,CAAA,WAAAE,CAAA,CAAAiE,SAAA,GAAAnE,CAAA,EAAAE,CAAA,KAAA8D,eAAA,CAAA9D,CAAA,EAAAF,CAAA;AAAA,SAAAoE,aAAAlE,CAAA,QAAAD,CAAA,GAAAoE,yBAAA,6BAAArE,CAAA,EAAAM,CAAA,GAAAgE,eAAA,CAAApE,CAAA,OAAAD,CAAA,QAAAsE,CAAA,GAAAD,eAAA,OAAAnC,WAAA,EAAAnC,CAAA,GAAAwE,OAAA,CAAAC,SAAA,CAAAnE,CAAA,EAAAO,SAAA,EAAA0D,CAAA,UAAAvE,CAAA,GAAAM,CAAA,CAAAK,KAAA,OAAAE,SAAA,UAAA6D,0BAAA,OAAA1E,CAAA;AAAA,SAAA0E,2BAAAxE,CAAA,EAAAF,CAAA,QAAAA,CAAA,iBAAA0D,OAAA,CAAA1D,CAAA,0BAAAA,CAAA,UAAAA,CAAA,iBAAAA,CAAA,YAAA6B,SAAA,qEAAA8C,sBAAA,CAAAzE,CAAA;AAAA,SAAAyE,uBAAA3E,CAAA,mBAAAA,CAAA,YAAA4E,cAAA,sEAAA5E,CAAA;AAAA,SAAAqE,0BAAA,cAAAnE,CAAA,IAAA2E,OAAA,CAAArB,SAAA,CAAAsB,OAAA,CAAA7C,IAAA,CAAAuC,OAAA,CAAAC,SAAA,CAAAI,OAAA,iCAAA3E,CAAA,aAAAmE,yBAAA,YAAAA,0BAAA,aAAAnE,CAAA;AAAA,SAAAoE,gBAAApE,CAAA,WAAAoE,eAAA,GAAAnE,MAAA,CAAA8D,cAAA,GAAA9D,MAAA,CAAA4E,cAAA,CAAAb,IAAA,eAAAhE,CAAA,WAAAA,CAAA,CAAAiE,SAAA,IAAAhE,MAAA,CAAA4E,cAAA,CAAA7E,CAAA,MAAAoE,eAAA,CAAApE,CAAA;AAAA,SAAA8E,0BAAApC,CAAA,EAAA5C,CAAA,EAAAC,CAAA,EAAAuC,CAAA,EAAAC,CAAA,QAAAX,CAAA,cAAA3B,MAAA,CAAAC,IAAA,CAAAoC,CAAA,EAAAzB,OAAA,WAAA6B,CAAA,IAAAd,CAAA,CAAAc,CAAA,IAAAJ,CAAA,CAAAI,CAAA,OAAAd,CAAA,CAAArB,UAAA,KAAAqB,CAAA,CAAArB,UAAA,EAAAqB,CAAA,CAAAR,YAAA,KAAAQ,CAAA,CAAAR,YAAA,cAAAQ,CAAA,IAAAA,CAAA,CAAAqB,WAAA,MAAArB,CAAA,CAAAP,QAAA,QAAAO,CAAA,GAAA7B,CAAA,CAAAiC,KAAA,GAAA+C,OAAA,GAAAC,MAAA,WAAAjF,CAAA,EAAAuC,CAAA,WAAAA,CAAA,CAAAI,CAAA,EAAA5C,CAAA,EAAAC,CAAA,KAAAA,CAAA,KAAA6B,CAAA,GAAAW,CAAA,eAAAX,CAAA,CAAAqB,WAAA,KAAArB,CAAA,CAAAT,KAAA,GAAAS,CAAA,CAAAqB,WAAA,GAAArB,CAAA,CAAAqB,WAAA,CAAAlB,IAAA,CAAAQ,CAAA,YAAAX,CAAA,CAAAqB,WAAA,uBAAArB,CAAA,CAAAqB,WAAA,IAAAhD,MAAA,CAAAgB,cAAA,CAAAyB,CAAA,EAAA5C,CAAA,EAAA8B,CAAA,WAAAA,CAAA;AAAA,SAAAqD,0BAAAlF,CAAA,EAAAD,CAAA,UAAAoF,KAAA;AAAA,IAWnCC,KAAK,IAAA9F,IAAA,GATjB,IAAA+F,UAAM,EAAC;EACNlD,IAAI,EAAE,OAAO;EACbmD,IAAI,EAAE,CACJ,aAAa,EACb,QAAQ,EACR;IAAEC,GAAG,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC,EACjC;IAAED,GAAG,EAAE,oBAAoB;IAAEC,QAAQ,EAAE;EAAK,CAAC;AAEjD,CAAC,CAAC,EAAAjG,KAAA,GAuDC,IAAAkG,cAAQ,EAAC,UAACC,IAAiB;EAAA,IAAAC,kBAAA,EAAAC,mBAAA;EAAA,OAAK,CAC/BF,IAAI,CAACG,cAAc,GAAAF,kBAAA,GACnBD,IAAI,CAACI,KAAK,CAACC,MAAM,cAAAJ,kBAAA,uBAAjBA,kBAAA,CAAmBK,aAAa,GAAAJ,mBAAA,GAChCF,IAAI,CAACI,KAAK,CAACC,MAAM,cAAAH,mBAAA,uBAAjBA,mBAAA,CAAmBK,aAAa,CACjC;AAAA,EAAC,EAAAzG,KAAA,GAeD,IAAAiG,cAAQ,EAAC,UAACC,IAAiB;EAAA,OAAK,CAACA,IAAI,CAACI,KAAK,CAACI,WAAW,CAAC;AAAA,EAAC,EAAAzG,KAAA,GAuBzD,IAAAgG,cAAQ,EAAC,UAACC,IAAiB;EAAA,OAAK,CAACA,IAAI,CAACS,cAAc,CAAC;AAAA,EAAC,EAAAzG,KAAA,GAStD,IAAA+F,cAAQ,EAAC,UAACC,IAAiB;EAAA,IAAAU,mBAAA,EAAAC,mBAAA;EAAA,OAAK,CAC/BX,IAAI,CAACS,cAAc,EACnBT,IAAI,CAACG,cAAc,GAAAO,mBAAA,GACnBV,IAAI,CAACI,KAAK,CAACC,MAAM,cAAAK,mBAAA,uBAAjBA,mBAAA,CAAmBJ,aAAa,GAAAK,mBAAA,GAChCX,IAAI,CAACI,KAAK,CAACC,MAAM,cAAAM,mBAAA,uBAAjBA,mBAAA,CAAmBJ,aAAa,CACjC;AAAA,EAAC,EAAA3G,IAAA,CAAAK,MAAA,IAAAC,OAAA,0BAAA0G,UAAA;EAAAzC,SAAA,CAAAuB,KAAA,EAAAkB,UAAA;EAAA,IAAAC,MAAA,GAAApC,YAAA,CAAAiB,KAAA;EAzGF,SAAAA,MAAYE,IAAO,EAAE;IAAA,IAAAkB,qBAAA;IAAA,IAAAC,KAAA;IAAAtD,eAAA,OAAAiC,KAAA;IACnBqB,KAAA,GAAAF,MAAA,CAAAvE,IAAA,OAAM;MACJsD,IAAI,EAAJA;IACF,CAAC;IAAEmB,KAAA,CAJKC,OAAO,GAAkB,IAAI;IAAAzD,0BAAA,CAAAwD,KAAA,oBAAA5G,WAAA,EAAA6E,sBAAA,CAAA+B,KAAA;IAKrCA,KAAA,CAAKC,OAAO,MAAAC,MAAA,CAAMF,KAAA,CAAKX,KAAK,CAACI,WAAW,CAACU,IAAI,OAAAD,MAAA,EAAAH,qBAAA,GAC3CC,KAAA,CAAKX,KAAK,CAACI,WAAW,CAACW,WAAW,cAAAL,qBAAA,cAAAA,qBAAA,GAAI,EAAE,CACxC;IAEFC,KAAA,CAAKK,2BAA2B,CAAC,CAAC;IAAC,OAAAL,KAAA;EACrC;EAACnD,YAAA,CAAA8B,KAAA;IAAA/B,GAAA;IAAAjC,KAAA,WAAA2F,iBAMgBC,MAAS,EAAE;MAC1B,IAAI,CAACnB,cAAc,GAAGmB,MAAM;IAC9B;EAAC;IAAA3D,GAAA;IAAAjC,KAAA,WAAA0F,4BAAA,EAEqC;MAAA,IAAAG,MAAA;MACpC,IAAI,CAACC,MAAM,CAACC,QAAQ,EAAE;MAEtB,IAAMC,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA,EAAS;QACpC,IAAMC,KAAK,GAAG,SAARA,KAAKA,CAAA;UAAA,OAASC,IAAI,CAACC,SAAS,CAACN,MAAI,CAACf,WAAW,CAACsB,aAAa,CAAC;QAAA;QAClE,IAAIC,SAAS,GAAGJ,KAAK,CAAC,CAAC;QACvBJ,MAAI,CAACG,uBAAuB,CAAC,CAAC;QAE9B,IAAAM,WAAK,EAACT,MAAI,EAAEI,KAAK,EAAE,UAACM,GAAG,EAAK;UAC1B,IAAIA,GAAG,KAAKF,SAAS,EAAE;UACvBA,SAAS,GAAGE,GAAG;UACfV,MAAI,CAACG,uBAAuB,CAAC,CAAC;QAChC,CAAC,CAAC;MACJ,CAAC;;MAED;MACAQ,OAAO,CAACC,OAAO,CAAC,CAAC,CAACC,IAAI,CAACV,uBAAuB,CAAC;IACjD;EAAC;IAAA/D,GAAA;IAAAjC,KAAA,WAAAgG,wBAAA,EAEiC;MAAA,IAAAW,qBAAA;MAChC;MACA7H,MAAM,CAAC8H,OAAO,EAAAD,qBAAA,GAAC,IAAI,CAAC7B,WAAW,CAACsB,aAAa,cAAAO,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC,CAAC,CAACjH,OAAO,CAC1D,UAAAmH,IAAA,EAAkB;QAAA,IAAAC,KAAA,GAAA3G,cAAA,CAAA0G,IAAA;UAAhB5E,GAAG,GAAA6E,KAAA;UAAE9G,KAAK,GAAA8G,KAAA;QACVf,QAAQ,CAACgB,eAAe,CAACC,KAAK,CAACC,WAAW,MAAA1B,MAAA,CAAMtD,GAAG,MAAAsD,MAAA,CAAOvF,KAAK,CAAE,CAAC;MACpE,CACF,CAAC;IACH;IACA;AACF;AACA;EAFE;IAAAiC,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAQoB;MAAA,IAAAC,qBAAA,EAAAC,kBAAA,EAAAC,qBAAA,EAAAC,mBAAA;MAClB,OACE,IAAI,CAAC7C,cAAc,IACnB,IAAA8C,wBAAW,EACT,IAAI,CAAC9C,cAAc,GAAA0C,qBAAA,IAAAC,kBAAA,GACnB,IAAI,CAAC1C,KAAK,CAACC,MAAM,cAAAyC,kBAAA,uBAAjBA,kBAAA,CAAmBxC,aAAa,cAAAuC,qBAAA,cAAAA,qBAAA,GAAIK,oBAAc,GAAAH,qBAAA,IAAAC,mBAAA,GAClD,IAAI,CAAC5C,KAAK,CAACC,MAAM,cAAA2C,mBAAA,uBAAjBA,mBAAA,CAAmBzC,aAAa,cAAAwC,qBAAA,cAAAA,qBAAA,GAAIG,oBACtC,CAAC;IAEL;IAEA;AACF;AACA;EAFE;IAAAvF,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAI+B;MAAA,IAAAO,sBAAA;MAC7B,IAAM3C,WAAW,GAAG,IAAI,CAACJ,KAAK,CAACI,WAAW;MAE1C,IAAI,EAACA,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAE4C,MAAM,GAAE,OAAO5C,WAAW;;MAE5C;AACJ;AACA;AACA;AACA;MACI,OAAAvF,aAAA,CAAAA,aAAA,KACKuF,WAAW;QACd4C,MAAM,EAAE,IAAAC,4BAAa,EACnB7C,WAAW,CAAC4C,MAAM,EAClB,EAAAD,sBAAA,OAAI,CAAC/C,KAAK,CAACkD,kBAAkB,cAAAH,sBAAA,uBAA7BA,sBAAA,CAA+BI,WAAW,KAAIC,QAAQ,CAACC,MACzD;MAAC;IAEL;IAEA;AACF;AACA;EAFE;IAAA9F,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAIoB;MAClB,OAAO,IAAAK,wBAAW,EAAC,IAAI,CAACxC,cAAc,CAAC;IACzC;IAEA;AACF;AACA;AACA;EAHE;IAAA9C,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAUkB;MAAA,IAAAc,oBAAA,EAAAC,sBAAA,EAAAC,mBAAA,EAAAC,sBAAA,EAAAC,mBAAA;MAChB,OAAO,IAAAb,wBAAW,GAAAS,oBAAA,GAChB,IAAI,CAACvD,cAAc,cAAAuD,oBAAA,cAAAA,oBAAA,GAAI,IAAI,CAACjD,cAAc,GAAAkD,sBAAA,IAAAC,mBAAA,GAC1C,IAAI,CAACxD,KAAK,CAACC,MAAM,cAAAuD,mBAAA,uBAAjBA,mBAAA,CAAmBtD,aAAa,cAAAqD,sBAAA,cAAAA,sBAAA,GAAIT,oBAAc,GAAAW,sBAAA,IAAAC,mBAAA,GAClD,IAAI,CAAC1D,KAAK,CAACC,MAAM,cAAAyD,mBAAA,uBAAjBA,mBAAA,CAAmBvD,aAAa,cAAAsD,sBAAA,cAAAA,sBAAA,GAAIX,oBACtC,CAAC;IACH;EAAC;IAAAvF,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEY;MAAA,IAAAmB,kBAAA;MACX,QAAAA,kBAAA,GAAO,IAAI,CAAC3D,KAAK,CAAC4D,MAAM,cAAAD,kBAAA,cAAAA,kBAAA,GAAI,IAAI,CAAC/C,OAAO;IAC1C;EAAC;IAAArD,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEQ;MACP,OAAO,IAAI,CAACpC,WAAW,CAACyD,EAAE;IAC5B;EAAC;IAAAtG,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEU;MACT,OAAO,IAAI,CAACpC,WAAW,CAACU,IAAI;IAC9B;EAAC;IAAAvD,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEU;MACT,OAAO,IAAI,CAACpC,WAAW,CAAC/D,IAAI;IAC9B;EAAC;IAAAkB,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEe;MAAA,IAAAsB,qBAAA;MACd,QAAAA,qBAAA,GAAO,IAAI,CAAC1D,WAAW,CAAC2D,SAAS,cAAAD,qBAAA,cAAAA,qBAAA,GAAI,IAAI,CAAC1D,WAAW,CAAC/D,IAAI;IAC5D;EAAC;IAAAkB,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEa;MACZ,OAAO,IAAI,CAACpC,WAAW,CAAC4D,OAAO;IACjC;EAAC;IAAAzG,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEkB;MACjB,OAAO,IAAI,CAACpC,WAAW,CAAC6D,YAAY;IACtC;EAAC;IAAA1G,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEoB;MACnB,OAAO,IAAI,CAACpC,WAAW,CAAC8D,cAAc;IACxC;EAAC;IAAA3G,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEuB;MACtB,OAAO,IAAI,CAACpC,WAAW,CAAC+D,iBAAiB;IAC3C;EAAC;IAAA5G,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEiB;MAChB,OAAO,IAAI,CAACpC,WAAW,CAACW,WAAW;IACrC;EAAC;IAAAxD,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEuB;MACtB,OAAO,IAAI,CAACpC,WAAW,CAACgE,iBAAiB;IAC3C;EAAC;IAAA7G,GAAA;IAAAiF,GAAA,WAAAA,IAAA,EAEY;MACX,OAAO,IAAI,CAACpC,WAAW,CAAC4C,MAAM;IAChC;EAAC;EAAA,OAAA1D,KAAA;AAAA,EAlKO+E,gBAAU,IAAAtK,WAAA,GAAAkF,yBAAA,CAAAnF,OAAA,CAAA2D,SAAA,qBAajB6G,WAAK;EAAA/I,YAAA;EAAAb,UAAA;EAAAc,QAAA;EAAA4B,WAAA,WAAAA,YAAA;IAAA,OAC+B,IAAI;EAAA;AAAA,IAAA6B,yBAAA,CAAAnF,OAAA,CAAA2D,SAAA,uBAExC8G,YAAM,GAAAnK,MAAA,CAAAK,wBAAA,CAAAX,OAAA,CAAA2D,SAAA,uBAAA3D,OAAA,CAAA2D,SAAA,GAAAwB,yBAAA,CAAAnF,OAAA,CAAA2D,SAAA,oBAAAhE,KAAA,GAAAW,MAAA,CAAAK,wBAAA,CAAAX,OAAA,CAAA2D,SAAA,oBAAA3D,OAAA,CAAA2D,SAAA,GAAAwB,yBAAA,CAAAnF,OAAA,CAAA2D,SAAA,qBAAA/D,KAAA,GAAAU,MAAA,CAAAK,wBAAA,CAAAX,OAAA,CAAA2D,SAAA,qBAAA3D,OAAA,CAAA2D,SAAA,GAAAwB,yBAAA,CAAAnF,OAAA,CAAA2D,SAAA,oBAAA9D,KAAA,GAAAS,MAAA,CAAAK,wBAAA,CAAAX,OAAA,CAAA2D,SAAA,oBAAA3D,OAAA,CAAA2D,SAAA,GAAAwB,yBAAA,CAAAnF,OAAA,CAAA2D,SAAA,kBAAA7D,KAAA,GAAAQ,MAAA,CAAAK,wBAAA,CAAAX,OAAA,CAAA2D,SAAA,kBAAA3D,OAAA,CAAA2D,SAAA,IAAA3D,OAAA,MAAAD,MAAA;AAAA2K,OAAA,CAAAlF,KAAA,GAAAA,KAAA","ignoreList":[]}