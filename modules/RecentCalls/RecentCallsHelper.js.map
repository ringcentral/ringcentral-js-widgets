{"version":3,"file":"RecentCallsHelper.js","names":["filterPhoneNumber","call","_ref","phoneNumber","from","to","extensionNumber","exports","flattenToRecords","items","reduce","acc","_ref2","records","concat","sortByTime","a","b","Date","startTime","getTime","dedup","calls","hash","cur","id"],"sources":["modules/RecentCalls/RecentCallsHelper.ts"],"sourcesContent":["import type CallLogRecord from '@rc-ex/core/lib/definitions/CallLogRecord';\nimport type CallLogResponse from '@rc-ex/core/lib/definitions/CallLogResponse';\n\nimport type { HistoryCall } from '../CallHistory';\n\nexport const filterPhoneNumber =\n  (call: HistoryCall) =>\n  ({ phoneNumber }: { phoneNumber: string }) =>\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    phoneNumber === call.from.phoneNumber ||\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    phoneNumber === call.to.phoneNumber ||\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    phoneNumber === call.from.extensionNumber ||\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    phoneNumber === call.to.extensionNumber;\n\nexport const flattenToRecords = (items: CallLogResponse[]) =>\n  items.reduce(\n    // @ts-expect-error TS(2769): No overload matches this call.\n    (acc, { records }) => acc.concat(records),\n    [] as CallLogRecord[],\n  );\n\n// Sort by time in descending order\n// TODO: fix type optional in `@rc-ex/core/definitions`\nexport const sortByTime = (\n  a: { startTime?: number },\n  b: { startTime?: number },\n  // @ts-expect-error TS(2769): No overload matches this call.\n) => new Date(b.startTime).getTime() - new Date(a.startTime).getTime();\n\nexport const dedup = (calls: HistoryCall[]) => {\n  const hash: Record<string, boolean> = {};\n  return calls.reduce((acc, cur) => {\n    // @ts-expect-error TS(2538): Type 'undefined' cannot be used as an index type.\n    if (hash[cur.id]) return acc;\n    // @ts-expect-error TS(2538): Type 'undefined' cannot be used as an index type.\n    hash[cur.id] = true;\n    // @ts-expect-error TS(2769): No overload matches this call.\n    return acc.concat(cur);\n  }, []);\n};\n"],"mappings":";;;;;;;;;AAKO,IAAMA,iBAAiB,GAC5B,SADWA,iBAAiBA,CAC3BC,IAAiB;EAAA,OAClB,UAAAC,IAAA;IAAA,IAAGC,WAAW,GAAAD,IAAA,CAAXC,WAAW;IAAA;MACZ;MACAA,WAAW,KAAKF,IAAI,CAACG,IAAI,CAACD,WAAW;MACrC;MACAA,WAAW,KAAKF,IAAI,CAACI,EAAE,CAACF,WAAW;MACnC;MACAA,WAAW,KAAKF,IAAI,CAACG,IAAI,CAACE,eAAe;MACzC;MACAH,WAAW,KAAKF,IAAI,CAACI,EAAE,CAACC;IAAe;EAAA;AAAA;AAACC,OAAA,CAAAP,iBAAA,GAAAA,iBAAA;AAErC,IAAMQ,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIC,KAAwB;EAAA,OACvDA,KAAK,CAACC,MAAM;EACV;EACA,UAACC,GAAG,EAAAC,KAAA;IAAA,IAAIC,OAAO,GAAAD,KAAA,CAAPC,OAAO;IAAA,OAAOF,GAAG,CAACG,MAAM,CAACD,OAAO,CAAC;EAAA,GACzC,EACF,CAAC;AAAA;;AAEH;AACA;AAAAN,OAAA,CAAAC,gBAAA,GAAAA,gBAAA;AACO,IAAMO,UAAU,GAAG,SAAbA,UAAUA,CACrBC,CAAyB,EACzBC;AACA;AAAA;EAAA,OACG,IAAIC,IAAI,CAACD,CAAC,CAACE,SAAS,CAAC,CAACC,OAAO,CAAC,CAAC,GAAG,IAAIF,IAAI,CAACF,CAAC,CAACG,SAAS,CAAC,CAACC,OAAO,CAAC,CAAC;AAAA;AAACb,OAAA,CAAAQ,UAAA,GAAAA,UAAA;AAEhE,IAAMM,KAAK,GAAG,SAARA,KAAKA,CAAIC,KAAoB,EAAK;EAC7C,IAAMC,IAA6B,GAAG,CAAC,CAAC;EACxC,OAAOD,KAAK,CAACZ,MAAM,CAAC,UAACC,GAAG,EAAEa,GAAG,EAAK;IAChC;IACA,IAAID,IAAI,CAACC,GAAG,CAACC,EAAE,CAAC,EAAE,OAAOd,GAAG;IAC5B;IACAY,IAAI,CAACC,GAAG,CAACC,EAAE,CAAC,GAAG,IAAI;IACnB;IACA,OAAOd,GAAG,CAACG,MAAM,CAACU,GAAG,CAAC;EACxB,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAACjB,OAAA,CAAAc,KAAA,GAAAA,KAAA","ignoreList":[]}