{"version":3,"file":"AddressBook.js","names":["_core","require","_utils","_ramda","_availabilityTypes","_phoneSources","_contactHelper","_di","_proxify","_DataFetcherV","_helpers","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","slice","reverse","reduce","_initializerWarningHelper","Error","DEFAULT_FETCH_INTERVAL","exports","DEFAULT_CONTACTS_PER_PAGE","INVALID_TOKEN_ERROR_CODES","AddressBook","Module","name","deps","dep","optional","computed","_ref","data","_ref2","that","contacts","_ref3","_deps$addressBookOpti","_deps$addressBookOpti2","_this$_deps$addressBo","_this","enableCache","addressBookOptions","disableCache","storageKey","_ref4","_deps","_ref4$polling","polling","_source","DataSource","cleanOnReset","permissionCheckFunction","_this$_deps$extension","_this$_deps$extension2","_this$_deps$extension3","extensionFeatures","features","ReadPersonalContacts","available","readyCheckFunction","ready","fetchFunction","_fetchFunction","_callee","_context","_sync","setAddressBookData","dataFetcherV2","register","addressBookData","onInit","getData","syncToken","updateData","Date","now","get","_this$_deps$addressBo2","_this$_deps$addressBo3","fetchInterval","_this$_deps$addressBo4","_this$_deps$addressBo5","perPage","_this$data","_fetch2","_callee2","pageId","params","_t","_context2","getSyncParams","processAddressBookResponse","client","account","extension","addressBookSync","list","_fetch","_x","_x2","_x3","_processISyncData","records","_this$data$records","_this$data2","updatedRecords","processedIDMap","record","availability","availabilityTypes","alive","id","_fetchAll2","_callee3","_response$records","response","_response$records2","_context3","_perPage","concat","nextPageId","sleep","_fetchInterval","syncInfo","syncType","_fetchAll","_x4","_sync2","_callee4","_error$response","_error$response2","_responseResult$error","_error$response3","error","responseResult","_data","_t2","_context4","status","clone","json","errors","some","_ref5","undefined","_ref5$errorCode","errorCode","includes","console","_sync3","_callee5","_context5","fetchData","sync","findContact","contactId","find","x","filterContacts","searchFilter","getFilterContacts","searchForPhoneNumbers","searchString","getSearchForPhoneNumbers","entityType","phoneSources","contact","matchContactsByPhoneNumber","phoneNumber","getMatchContactsByPhoneNumber","rcContact","_this2","_this$data$records2","_this$data3","map","rawContact","_rawContact$firstName","_rawContact$lastName","type","sourceName","phoneNumbers","emails","firstName","lastName","email","email2","email3","test","addPhoneToContact","_this$data$records3","_this$data4","rcPersonalMapping","item","DataFetcherV2Consumer","storage","state","action","proxify"],"sources":["modules/AddressBook/AddressBook.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  state,\n  storage,\n} from '@ringcentral-integration/core';\nimport { sleep } from '@ringcentral-integration/utils';\nimport type { ApiError } from '@ringcentral/sdk';\nimport { forEach, map } from 'ramda';\n\nimport { availabilityTypes } from '../../enums/availabilityTypes';\nimport { phoneSources } from '../../enums/phoneSources';\nimport type {\n  ContactModel,\n  ContactSource,\n} from '../../interfaces/Contact.model';\nimport {\n  addPhoneToContact,\n  getFilterContacts,\n  getMatchContactsByPhoneNumber,\n  getSearchForPhoneNumbers,\n} from '../../lib/contactHelper';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport { DataFetcherV2Consumer, DataSource } from '../DataFetcherV2';\n\nimport type {\n  AddressBookData,\n  Deps,\n  PersonalContactResource,\n} from './AddressBook.interface';\nimport { getSyncParams, processAddressBookResponse } from './helpers';\n\nexport const DEFAULT_FETCH_INTERVAL = 1000;\nexport const DEFAULT_CONTACTS_PER_PAGE = 250;\n\n// reference: https://developers.ringcentral.com/api-reference/External-Contacts/syncAddressBook\nconst INVALID_TOKEN_ERROR_CODES = [\n  // 400 CMN-101 Parameter [${parameterName}] value is invalid.\n  'CMN-101',\n];\n\n@Module({\n  name: 'AddressBook',\n  deps: [\n    'Client',\n    'ExtensionFeatures',\n    'DataFetcherV2',\n    'Storage',\n    { dep: 'AddressBookOptions', optional: true },\n  ],\n})\nexport class AddressBook\n  extends DataFetcherV2Consumer<Deps, Partial<AddressBookData>>\n  implements ContactSource\n{\n  constructor(deps: Deps) {\n    super({\n      deps,\n      enableCache: !(deps.addressBookOptions?.disableCache ?? false),\n      storageKey: 'AddressBook',\n    });\n    const { polling = true } = this._deps.addressBookOptions ?? {};\n    this._source = new DataSource({\n      ...this._deps.addressBookOptions,\n      key: 'addressBook',\n      polling,\n      cleanOnReset: true,\n      permissionCheckFunction: () =>\n        this._deps.extensionFeatures.features?.ReadPersonalContacts\n          ?.available ?? false,\n      readyCheckFunction: () => this._deps.extensionFeatures.ready,\n      fetchFunction: async () => {\n        const data = await this._sync();\n        this.setAddressBookData(data);\n        return {};\n      },\n    });\n    this._deps.dataFetcherV2.register(this._source);\n  }\n\n  @storage\n  @state\n  addressBookData: Partial<AddressBookData> = {};\n\n  @action\n  setAddressBookData(data: Partial<AddressBookData>) {\n    this.addressBookData = data;\n  }\n\n  override onInit() {\n    // for compatibility with old version cache\n    const data = this._deps.dataFetcherV2.getData(this._source);\n    if (data?.syncToken) {\n      this._deps.dataFetcherV2.updateData(this._source, {}, Date.now());\n      this.setAddressBookData(data);\n    }\n  }\n\n  // just a workaround for the update performance issue\n  // TODO: refactor with type\n  override get data() {\n    return this.addressBookData;\n  }\n\n  protected get _fetchInterval() {\n    return (\n      this._deps.addressBookOptions?.fetchInterval ?? DEFAULT_FETCH_INTERVAL\n    );\n  }\n\n  protected get _perPage() {\n    return this._deps.addressBookOptions?.perPage ?? DEFAULT_CONTACTS_PER_PAGE;\n  }\n\n  get syncToken() {\n    return this.data?.syncToken;\n  }\n\n  protected async _fetch(perPage: number, syncToken?: string, pageId?: number) {\n    const params = getSyncParams({\n      perPage,\n      syncToken,\n      pageId,\n    });\n    return processAddressBookResponse(\n      await this._deps.client\n        .account()\n        .extension()\n        .addressBookSync()\n        .list(params),\n    );\n  }\n\n  protected _processISyncData(records: PersonalContactResource[]) {\n    if (records?.length > 0) {\n      const updatedRecords: PersonalContactResource[] = [];\n      // @ts-expect-error TS(2344): Type 'number | undefined' does not satisfy the con... Remove this comment to see the full error message\n      const processedIDMap: Record<PersonalContactResource['id'], true> = {};\n      forEach((record) => {\n        if (record.availability === availabilityTypes.alive) {\n          // Only keep entries that is 'alive', omit 'purged' and 'deleted'\n          updatedRecords.push(record);\n        }\n        // @ts-expect-error TS(2538): Type 'undefined' cannot be used as an index type.\n        processedIDMap[record.id] = true;\n      }, records);\n      forEach((record) => {\n        // @ts-expect-error TS(2538): Type 'undefined' cannot be used as an index type.\n        if (!processedIDMap[record.id]) {\n          // record has no updates\n          updatedRecords.push(record);\n        }\n      }, this.data?.records ?? []);\n      return updatedRecords;\n    }\n    return this.data.records;\n  }\n\n  protected async _fetchAll(syncToken?: string) {\n    const perPage = this._perPage;\n    let records: PersonalContactResource[] = [];\n    let response = await this._fetch(perPage, syncToken);\n    records = records.concat(response.records ?? []);\n    while (response.nextPageId) {\n      await sleep(this._fetchInterval);\n      response = await this._fetch(perPage, syncToken, response.nextPageId);\n      records = records.concat(response.records ?? []);\n    }\n    if (response.syncInfo!.syncType === 'ISync') {\n      // @ts-expect-error TS(2322): Type 'PersonalContactResource[] | undefined' is no... Remove this comment to see the full error message\n      records = this._processISyncData(records);\n    }\n    return {\n      syncToken: response.syncInfo!.syncToken,\n      records,\n    };\n  }\n\n  protected async _sync(): Promise<AddressBookData> {\n    try {\n      const data = await this._fetchAll(this.syncToken);\n      return data;\n    } catch (e: unknown) {\n      const error = e as ApiError;\n\n      // 403 Forbidden\n      if (error.response?.status === 403) {\n        return {} as AddressBookData;\n      }\n\n      // try Full Sync\n      const responseResult = await error.response?.clone().json();\n      if (\n        responseResult?.errors?.some(({ errorCode = '' } = {}) =>\n          INVALID_TOKEN_ERROR_CODES.includes(errorCode),\n        )\n      ) {\n        const data = await this._fetchAll();\n        return data;\n      }\n\n      // exception\n      console.error('[AddressBook] > _sync', error.response?.status, error);\n      throw error;\n    }\n  }\n\n  // interface of ContactSource\n  @proxify\n  async sync() {\n    await this._deps.dataFetcherV2.fetchData(this._source);\n  }\n\n  // interface of ContactSource\n  findContact(contactId: string) {\n    return this.contacts.find((x) => x.id === contactId);\n  }\n\n  // interface of ContactSource\n  filterContacts(searchFilter: string) {\n    return getFilterContacts(this.contacts, searchFilter);\n  }\n\n  // interface of ContactSource\n  searchForPhoneNumbers(searchString: string) {\n    return getSearchForPhoneNumbers({\n      contacts: this.contacts,\n      searchString,\n      entityType: phoneSources.contact,\n    });\n  }\n\n  // interface of ContactSource\n  matchContactsByPhoneNumber(phoneNumber: string) {\n    return getMatchContactsByPhoneNumber({\n      contacts: this.contacts,\n      phoneNumber,\n      entityType: phoneSources.rcContact,\n    });\n  }\n\n  // interface of ContactSource\n  get sourceName() {\n    return 'personal';\n  }\n\n  // interface of ContactSource\n  @computed(({ data }: AddressBook) => [data])\n  get contacts() {\n    return map((rawContact) => {\n      const contact: ContactModel = {\n        ...rawContact,\n        type: this.sourceName,\n        phoneNumbers: [],\n        emails: [],\n        id: `${rawContact.id}`,\n        name: `${rawContact.firstName ?? ''} ${rawContact.lastName ?? ''}`,\n      };\n      if (rawContact.email) {\n        contact.emails.push(rawContact.email);\n      }\n      if (rawContact.email2) {\n        contact.emails.push(rawContact.email2);\n      }\n      if (rawContact.email3) {\n        contact.emails.push(rawContact.email3);\n      }\n      forEach((key) => {\n        if (/Phone|Fax/.test(key) && typeof contact[key] === 'string') {\n          addPhoneToContact(contact, contact[key] as string, key);\n        }\n      }, Object.keys(contact) as (keyof typeof contact)[]);\n      return contact;\n    }, this.data?.records ?? []);\n  }\n\n  // interface of ContactSource\n  @computed(({ data }: AddressBook) => [data])\n  get rawContacts() {\n    return this.data?.records ?? [];\n  }\n\n  @computed((that: AddressBook) => [that.contacts])\n  get rcPersonalMapping() {\n    const rcPersonalMapping: any = {};\n    this.contacts.forEach((item: any) => {\n      rcPersonalMapping[item.id] = item;\n    });\n    return rcPersonalMapping;\n  }\n\n  // interface of ContactSource\n  get sourceReady() {\n    return this.ready;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAMA,IAAAC,MAAA,GAAAD,OAAA;AAEA,IAAAE,MAAA,GAAAF,OAAA;AAEA,IAAAG,kBAAA,GAAAH,OAAA;AACA,IAAAI,aAAA,GAAAJ,OAAA;AAKA,IAAAK,cAAA,GAAAL,OAAA;AAMA,IAAAM,GAAA,GAAAN,OAAA;AACA,IAAAO,QAAA,GAAAP,OAAA;AACA,IAAAQ,aAAA,GAAAR,OAAA;AAOA,IAAAS,QAAA,GAAAT,OAAA;AAAsE,IAAAU,IAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,OAAA,EAAAC,WAAA;AAAA,SAAAC,aAAA,IA9BtE,uKAAAC,CAAA,EAAAC,CAAA,EAAAC,CAAA,wBAAAC,MAAA,GAAAA,MAAA,OAAAC,CAAA,GAAAF,CAAA,CAAAG,QAAA,kBAAAC,CAAA,GAAAJ,CAAA,CAAAK,WAAA,8BAAAC,EAAAN,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAE,CAAA,QAAAC,CAAA,GAAAL,CAAA,IAAAA,CAAA,CAAAM,SAAA,YAAAC,SAAA,GAAAP,CAAA,GAAAO,SAAA,EAAAC,CAAA,GAAAC,MAAA,CAAAC,MAAA,CAAAL,CAAA,CAAAC,SAAA,UAAAK,mBAAA,CAAAH,CAAA,uBAAAV,CAAA,EAAAE,CAAA,EAAAE,CAAA,QAAAE,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAI,CAAA,MAAAC,CAAA,GAAAX,CAAA,QAAAY,CAAA,OAAAC,CAAA,KAAAF,CAAA,KAAAb,CAAA,KAAAgB,CAAA,EAAApB,CAAA,EAAAqB,CAAA,EAAAC,CAAA,EAAAN,CAAA,EAAAM,CAAA,CAAAC,IAAA,CAAAvB,CAAA,MAAAsB,CAAA,WAAAA,EAAArB,CAAA,EAAAC,CAAA,WAAAM,CAAA,GAAAP,CAAA,EAAAQ,CAAA,MAAAG,CAAA,GAAAZ,CAAA,EAAAmB,CAAA,CAAAf,CAAA,GAAAF,CAAA,EAAAmB,CAAA,gBAAAC,EAAApB,CAAA,EAAAE,CAAA,SAAAK,CAAA,GAAAP,CAAA,EAAAU,CAAA,GAAAR,CAAA,EAAAH,CAAA,OAAAiB,CAAA,IAAAF,CAAA,KAAAV,CAAA,IAAAL,CAAA,GAAAgB,CAAA,CAAAO,MAAA,EAAAvB,CAAA,UAAAK,CAAA,EAAAE,CAAA,GAAAS,CAAA,CAAAhB,CAAA,GAAAqB,CAAA,GAAAH,CAAA,CAAAF,CAAA,EAAAQ,CAAA,GAAAjB,CAAA,KAAAN,CAAA,QAAAI,CAAA,GAAAmB,CAAA,KAAArB,CAAA,MAAAQ,CAAA,GAAAJ,CAAA,EAAAC,CAAA,GAAAD,CAAA,YAAAC,CAAA,WAAAD,CAAA,MAAAA,CAAA,MAAAR,CAAA,IAAAQ,CAAA,OAAAc,CAAA,MAAAhB,CAAA,GAAAJ,CAAA,QAAAoB,CAAA,GAAAd,CAAA,QAAAC,CAAA,MAAAU,CAAA,CAAAC,CAAA,GAAAhB,CAAA,EAAAe,CAAA,CAAAf,CAAA,GAAAI,CAAA,OAAAc,CAAA,GAAAG,CAAA,KAAAnB,CAAA,GAAAJ,CAAA,QAAAM,CAAA,MAAAJ,CAAA,IAAAA,CAAA,GAAAqB,CAAA,MAAAjB,CAAA,MAAAN,CAAA,EAAAM,CAAA,MAAAJ,CAAA,EAAAe,CAAA,CAAAf,CAAA,GAAAqB,CAAA,EAAAhB,CAAA,cAAAH,CAAA,IAAAJ,CAAA,aAAAmB,CAAA,QAAAH,CAAA,OAAAd,CAAA,qBAAAE,CAAA,EAAAW,CAAA,EAAAQ,CAAA,QAAAT,CAAA,YAAAU,SAAA,uCAAAR,CAAA,UAAAD,CAAA,IAAAK,CAAA,CAAAL,CAAA,EAAAQ,CAAA,GAAAhB,CAAA,GAAAQ,CAAA,EAAAL,CAAA,GAAAa,CAAA,GAAAxB,CAAA,GAAAQ,CAAA,OAAAT,CAAA,GAAAY,CAAA,MAAAM,CAAA,KAAAV,CAAA,KAAAC,CAAA,GAAAA,CAAA,QAAAA,CAAA,SAAAU,CAAA,CAAAf,CAAA,QAAAkB,CAAA,CAAAb,CAAA,EAAAG,CAAA,KAAAO,CAAA,CAAAf,CAAA,GAAAQ,CAAA,GAAAO,CAAA,CAAAC,CAAA,GAAAR,CAAA,aAAAI,CAAA,MAAAR,CAAA,QAAAC,CAAA,KAAAH,CAAA,YAAAL,CAAA,GAAAO,CAAA,CAAAF,CAAA,WAAAL,CAAA,GAAAA,CAAA,CAAA0B,IAAA,CAAAnB,CAAA,EAAAI,CAAA,UAAAc,SAAA,2CAAAzB,CAAA,CAAA2B,IAAA,SAAA3B,CAAA,EAAAW,CAAA,GAAAX,CAAA,CAAA4B,KAAA,EAAApB,CAAA,SAAAA,CAAA,oBAAAA,CAAA,KAAAR,CAAA,GAAAO,CAAA,eAAAP,CAAA,CAAA0B,IAAA,CAAAnB,CAAA,GAAAC,CAAA,SAAAG,CAAA,GAAAc,SAAA,uCAAApB,CAAA,gBAAAG,CAAA,OAAAD,CAAA,GAAAR,CAAA,cAAAC,CAAA,IAAAiB,CAAA,GAAAC,CAAA,CAAAf,CAAA,QAAAQ,CAAA,GAAAV,CAAA,CAAAyB,IAAA,CAAAvB,CAAA,EAAAe,CAAA,OAAAE,CAAA,kBAAApB,CAAA,IAAAO,CAAA,GAAAR,CAAA,EAAAS,CAAA,MAAAG,CAAA,GAAAX,CAAA,cAAAe,CAAA,mBAAAa,KAAA,EAAA5B,CAAA,EAAA2B,IAAA,EAAAV,CAAA,SAAAhB,CAAA,EAAAI,CAAA,EAAAE,CAAA,QAAAI,CAAA,QAAAS,CAAA,gBAAAV,UAAA,cAAAmB,kBAAA,cAAAC,2BAAA,KAAA9B,CAAA,GAAAY,MAAA,CAAAmB,cAAA,MAAAvB,CAAA,MAAAL,CAAA,IAAAH,CAAA,CAAAA,CAAA,IAAAG,CAAA,SAAAW,mBAAA,CAAAd,CAAA,OAAAG,CAAA,iCAAAH,CAAA,GAAAW,CAAA,GAAAmB,0BAAA,CAAArB,SAAA,GAAAC,SAAA,CAAAD,SAAA,GAAAG,MAAA,CAAAC,MAAA,CAAAL,CAAA,YAAAO,EAAAhB,CAAA,WAAAa,MAAA,CAAAoB,cAAA,GAAApB,MAAA,CAAAoB,cAAA,CAAAjC,CAAA,EAAA+B,0BAAA,KAAA/B,CAAA,CAAAkC,SAAA,GAAAH,0BAAA,EAAAhB,mBAAA,CAAAf,CAAA,EAAAM,CAAA,yBAAAN,CAAA,CAAAU,SAAA,GAAAG,MAAA,CAAAC,MAAA,CAAAF,CAAA,GAAAZ,CAAA,WAAA8B,iBAAA,CAAApB,SAAA,GAAAqB,0BAAA,EAAAhB,mBAAA,CAAAH,CAAA,iBAAAmB,0BAAA,GAAAhB,mBAAA,CAAAgB,0BAAA,iBAAAD,iBAAA,GAAAA,iBAAA,CAAAK,WAAA,wBAAApB,mBAAA,CAAAgB,0BAAA,EAAAzB,CAAA,wBAAAS,mBAAA,CAAAH,CAAA,GAAAG,mBAAA,CAAAH,CAAA,EAAAN,CAAA,gBAAAS,mBAAA,CAAAH,CAAA,EAAAR,CAAA,iCAAAW,mBAAA,CAAAH,CAAA,8DAAAb,YAAA,YAAAA,aAAA,aAAAqC,CAAA,EAAA5B,CAAA,EAAA6B,CAAA,EAAArB,CAAA;AAAA,SAAAD,oBAAAf,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAH,CAAA,QAAAO,CAAA,GAAAK,MAAA,CAAAyB,cAAA,QAAA9B,CAAA,uBAAAR,CAAA,IAAAQ,CAAA,QAAAO,mBAAA,YAAAwB,mBAAAvC,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAH,CAAA,aAAAK,EAAAJ,CAAA,EAAAE,CAAA,IAAAW,mBAAA,CAAAf,CAAA,EAAAE,CAAA,YAAAF,CAAA,gBAAAwC,OAAA,CAAAtC,CAAA,EAAAE,CAAA,EAAAJ,CAAA,SAAAE,CAAA,GAAAM,CAAA,GAAAA,CAAA,CAAAR,CAAA,EAAAE,CAAA,IAAA2B,KAAA,EAAAzB,CAAA,EAAAqC,UAAA,GAAAxC,CAAA,EAAAyC,YAAA,GAAAzC,CAAA,EAAA0C,QAAA,GAAA1C,CAAA,MAAAD,CAAA,CAAAE,CAAA,IAAAE,CAAA,IAAAE,CAAA,aAAAA,CAAA,cAAAA,CAAA,mBAAAS,mBAAA,CAAAf,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAH,CAAA;AAAA,SAAA2C,mBAAAxC,CAAA,EAAAH,CAAA,EAAAD,CAAA,EAAAE,CAAA,EAAAI,CAAA,EAAAe,CAAA,EAAAZ,CAAA,cAAAD,CAAA,GAAAJ,CAAA,CAAAiB,CAAA,EAAAZ,CAAA,GAAAG,CAAA,GAAAJ,CAAA,CAAAqB,KAAA,WAAAzB,CAAA,gBAAAJ,CAAA,CAAAI,CAAA,KAAAI,CAAA,CAAAoB,IAAA,GAAA3B,CAAA,CAAAW,CAAA,IAAAiC,OAAA,CAAAC,OAAA,CAAAlC,CAAA,EAAAmC,IAAA,CAAA7C,CAAA,EAAAI,CAAA;AAAA,SAAA0C,kBAAA5C,CAAA,6BAAAH,CAAA,SAAAD,CAAA,GAAAiD,SAAA,aAAAJ,OAAA,WAAA3C,CAAA,EAAAI,CAAA,QAAAe,CAAA,GAAAjB,CAAA,CAAA8C,KAAA,CAAAjD,CAAA,EAAAD,CAAA,YAAAmD,MAAA/C,CAAA,IAAAwC,kBAAA,CAAAvB,CAAA,EAAAnB,CAAA,EAAAI,CAAA,EAAA6C,KAAA,EAAAC,MAAA,UAAAhD,CAAA,cAAAgD,OAAAhD,CAAA,IAAAwC,kBAAA,CAAAvB,CAAA,EAAAnB,CAAA,EAAAI,CAAA,EAAA6C,KAAA,EAAAC,MAAA,WAAAhD,CAAA,KAAA+C,KAAA;AAAA,SAAAE,QAAArD,CAAA,EAAAE,CAAA,QAAAD,CAAA,GAAAY,MAAA,CAAAyC,IAAA,CAAAtD,CAAA,OAAAa,MAAA,CAAA0C,qBAAA,QAAAjD,CAAA,GAAAO,MAAA,CAAA0C,qBAAA,CAAAvD,CAAA,GAAAE,CAAA,KAAAI,CAAA,GAAAA,CAAA,CAAAkD,MAAA,WAAAtD,CAAA,WAAAW,MAAA,CAAA4C,wBAAA,CAAAzD,CAAA,EAAAE,CAAA,EAAAuC,UAAA,OAAAxC,CAAA,CAAAyD,IAAA,CAAAR,KAAA,CAAAjD,CAAA,EAAAK,CAAA,YAAAL,CAAA;AAAA,SAAA0D,cAAA3D,CAAA,aAAAE,CAAA,MAAAA,CAAA,GAAA+C,SAAA,CAAAzB,MAAA,EAAAtB,CAAA,UAAAD,CAAA,WAAAgD,SAAA,CAAA/C,CAAA,IAAA+C,SAAA,CAAA/C,CAAA,QAAAA,CAAA,OAAAmD,OAAA,CAAAxC,MAAA,CAAAZ,CAAA,OAAA2D,OAAA,WAAA1D,CAAA,IAAA2D,eAAA,CAAA7D,CAAA,EAAAE,CAAA,EAAAD,CAAA,CAAAC,CAAA,SAAAW,MAAA,CAAAiD,yBAAA,GAAAjD,MAAA,CAAAkD,gBAAA,CAAA/D,CAAA,EAAAa,MAAA,CAAAiD,yBAAA,CAAA7D,CAAA,KAAAoD,OAAA,CAAAxC,MAAA,CAAAZ,CAAA,GAAA2D,OAAA,WAAA1D,CAAA,IAAAW,MAAA,CAAAyB,cAAA,CAAAtC,CAAA,EAAAE,CAAA,EAAAW,MAAA,CAAA4C,wBAAA,CAAAxD,CAAA,EAAAC,CAAA,iBAAAF,CAAA;AAAA,SAAA6D,gBAAA7D,CAAA,EAAAE,CAAA,EAAAD,CAAA,YAAAC,CAAA,GAAA8D,cAAA,CAAA9D,CAAA,MAAAF,CAAA,GAAAa,MAAA,CAAAyB,cAAA,CAAAtC,CAAA,EAAAE,CAAA,IAAA2B,KAAA,EAAA5B,CAAA,EAAAwC,UAAA,MAAAC,YAAA,MAAAC,QAAA,UAAA3C,CAAA,CAAAE,CAAA,IAAAD,CAAA,EAAAD,CAAA;AAAA,SAAAiE,2BAAAjE,CAAA,EAAAQ,CAAA,EAAAN,CAAA,EAAAuB,CAAA,IAAAvB,CAAA,IAAAW,MAAA,CAAAyB,cAAA,CAAAtC,CAAA,EAAAQ,CAAA,IAAAiC,UAAA,EAAAvC,CAAA,CAAAuC,UAAA,EAAAC,YAAA,EAAAxC,CAAA,CAAAwC,YAAA,EAAAC,QAAA,EAAAzC,CAAA,CAAAyC,QAAA,EAAAd,KAAA,EAAA3B,CAAA,CAAAgE,WAAA,GAAAhE,CAAA,CAAAgE,WAAA,CAAAvC,IAAA,CAAAF,CAAA;AAAA,SAAA0C,gBAAA9C,CAAA,EAAAjB,CAAA,UAAAiB,CAAA,YAAAjB,CAAA,aAAAsB,SAAA;AAAA,SAAA0C,kBAAApE,CAAA,EAAAE,CAAA,aAAAD,CAAA,MAAAA,CAAA,GAAAC,CAAA,CAAAsB,MAAA,EAAAvB,CAAA,UAAAK,CAAA,GAAAJ,CAAA,CAAAD,CAAA,GAAAK,CAAA,CAAAmC,UAAA,GAAAnC,CAAA,CAAAmC,UAAA,QAAAnC,CAAA,CAAAoC,YAAA,kBAAApC,CAAA,KAAAA,CAAA,CAAAqC,QAAA,QAAA9B,MAAA,CAAAyB,cAAA,CAAAtC,CAAA,EAAAgE,cAAA,CAAA1D,CAAA,CAAA+D,GAAA,GAAA/D,CAAA;AAAA,SAAAgE,aAAAtE,CAAA,EAAAE,CAAA,EAAAD,CAAA,WAAAC,CAAA,IAAAkE,iBAAA,CAAApE,CAAA,CAAAU,SAAA,EAAAR,CAAA,GAAAD,CAAA,IAAAmE,iBAAA,CAAApE,CAAA,EAAAC,CAAA,GAAAY,MAAA,CAAAyB,cAAA,CAAAtC,CAAA,iBAAA2C,QAAA,SAAA3C,CAAA;AAAA,SAAAgE,eAAA/D,CAAA,QAAAO,CAAA,GAAA+D,YAAA,CAAAtE,CAAA,gCAAAuE,OAAA,CAAAhE,CAAA,IAAAA,CAAA,GAAAA,CAAA;AAAA,SAAA+D,aAAAtE,CAAA,EAAAC,CAAA,oBAAAsE,OAAA,CAAAvE,CAAA,MAAAA,CAAA,SAAAA,CAAA,MAAAD,CAAA,GAAAC,CAAA,CAAAE,MAAA,CAAAsE,WAAA,kBAAAzE,CAAA,QAAAQ,CAAA,GAAAR,CAAA,CAAA2B,IAAA,CAAA1B,CAAA,EAAAC,CAAA,gCAAAsE,OAAA,CAAAhE,CAAA,UAAAA,CAAA,YAAAkB,SAAA,yEAAAxB,CAAA,GAAAwE,MAAA,GAAAC,MAAA,EAAA1E,CAAA;AAAA,SAAA2E,WAAA3E,CAAA,EAAAK,CAAA,EAAAN,CAAA,WAAAM,CAAA,GAAAuE,eAAA,CAAAvE,CAAA,GAAAwE,0BAAA,CAAA7E,CAAA,EAAA8E,yBAAA,KAAAC,OAAA,CAAAC,SAAA,CAAA3E,CAAA,EAAAN,CAAA,QAAA6E,eAAA,CAAA5E,CAAA,EAAAiF,WAAA,IAAA5E,CAAA,CAAA4C,KAAA,CAAAjD,CAAA,EAAAD,CAAA;AAAA,SAAA8E,2BAAA7E,CAAA,EAAAD,CAAA,QAAAA,CAAA,iBAAAwE,OAAA,CAAAxE,CAAA,0BAAAA,CAAA,UAAAA,CAAA,iBAAAA,CAAA,YAAA0B,SAAA,qEAAAyD,sBAAA,CAAAlF,CAAA;AAAA,SAAAkF,uBAAAnF,CAAA,mBAAAA,CAAA,YAAAoF,cAAA,sEAAApF,CAAA;AAAA,SAAA+E,0BAAA,cAAA9E,CAAA,IAAAoF,OAAA,CAAA3E,SAAA,CAAA4E,OAAA,CAAA3D,IAAA,CAAAqD,OAAA,CAAAC,SAAA,CAAAI,OAAA,iCAAApF,CAAA,aAAA8E,yBAAA,YAAAA,0BAAA,aAAA9E,CAAA;AAAA,SAAA4E,gBAAA5E,CAAA,WAAA4E,eAAA,GAAAhE,MAAA,CAAAoB,cAAA,GAAApB,MAAA,CAAAmB,cAAA,CAAAT,IAAA,eAAAtB,CAAA,WAAAA,CAAA,CAAAiC,SAAA,IAAArB,MAAA,CAAAmB,cAAA,CAAA/B,CAAA,MAAA4E,eAAA,CAAA5E,CAAA;AAAA,SAAAsF,UAAAtF,CAAA,EAAAD,CAAA,6BAAAA,CAAA,aAAAA,CAAA,YAAA0B,SAAA,wDAAAzB,CAAA,CAAAS,SAAA,GAAAG,MAAA,CAAAC,MAAA,CAAAd,CAAA,IAAAA,CAAA,CAAAU,SAAA,IAAAwE,WAAA,IAAArD,KAAA,EAAA5B,CAAA,EAAA0C,QAAA,MAAAD,YAAA,WAAA7B,MAAA,CAAAyB,cAAA,CAAArC,CAAA,iBAAA0C,QAAA,SAAA3C,CAAA,IAAAwF,eAAA,CAAAvF,CAAA,EAAAD,CAAA;AAAA,SAAAwF,gBAAAvF,CAAA,EAAAD,CAAA,WAAAwF,eAAA,GAAA3E,MAAA,CAAAoB,cAAA,GAAApB,MAAA,CAAAoB,cAAA,CAAAV,IAAA,eAAAtB,CAAA,EAAAD,CAAA,WAAAC,CAAA,CAAAiC,SAAA,GAAAlC,CAAA,EAAAC,CAAA,KAAAuF,eAAA,CAAAvF,CAAA,EAAAD,CAAA;AAAA,SAAAyF,0BAAAjF,CAAA,EAAAR,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAqB,CAAA,QAAAJ,CAAA,cAAAR,MAAA,CAAAyC,IAAA,CAAAlD,CAAA,EAAAwD,OAAA,WAAApD,CAAA,IAAAa,CAAA,CAAAb,CAAA,IAAAJ,CAAA,CAAAI,CAAA,OAAAa,CAAA,CAAAoB,UAAA,KAAApB,CAAA,CAAAoB,UAAA,EAAApB,CAAA,CAAAqB,YAAA,KAAArB,CAAA,CAAAqB,YAAA,cAAArB,CAAA,IAAAA,CAAA,CAAA6C,WAAA,MAAA7C,CAAA,CAAAsB,QAAA,QAAAtB,CAAA,GAAAnB,CAAA,CAAAwF,KAAA,GAAAC,OAAA,GAAAC,MAAA,WAAA1F,CAAA,EAAAE,CAAA,WAAAA,CAAA,CAAAI,CAAA,EAAAR,CAAA,EAAAE,CAAA,KAAAA,CAAA,KAAAmB,CAAA,GAAAI,CAAA,eAAAJ,CAAA,CAAA6C,WAAA,KAAA7C,CAAA,CAAAQ,KAAA,GAAAR,CAAA,CAAA6C,WAAA,GAAA7C,CAAA,CAAA6C,WAAA,CAAAvC,IAAA,CAAAF,CAAA,YAAAJ,CAAA,CAAA6C,WAAA,uBAAA7C,CAAA,CAAA6C,WAAA,IAAArD,MAAA,CAAAyB,cAAA,CAAA9B,CAAA,EAAAR,CAAA,EAAAqB,CAAA,WAAAA,CAAA;AAAA,SAAAwE,0BAAA3F,CAAA,EAAAF,CAAA,UAAA8F,KAAA;AAgCO,IAAMC,sBAAsB,GAAAC,OAAA,CAAAD,sBAAA,GAAG,IAAI;AACnC,IAAME,yBAAyB,GAAAD,OAAA,CAAAC,yBAAA,GAAG,GAAG;;AAE5C;AACA,IAAMC,yBAAyB,GAAG;AAChC;AACA,SAAS,CACV;AAAC,IAYWC,WAAW,GAAAH,OAAA,CAAAG,WAAA,IAAA3G,IAAA,GAVvB,IAAA4G,UAAM,EAAC;EACNC,IAAI,EAAE,aAAa;EACnBC,IAAI,EAAE,CACJ,QAAQ,EACR,mBAAmB,EACnB,eAAe,EACf,SAAS,EACT;IAAEC,GAAG,EAAE,oBAAoB;IAAEC,QAAQ,EAAE;EAAK,CAAC;AAEjD,CAAC,CAAC,EAAA/G,KAAA,GAqMC,IAAAgH,cAAQ,EAAC,UAAAC,IAAA;EAAA,IAAGC,IAAI,GAAAD,IAAA,CAAJC,IAAI;EAAA,OAAoB,CAACA,IAAI,CAAC;AAAA,EAAC,EAAAjH,KAAA,GA8B3C,IAAA+G,cAAQ,EAAC,UAAAG,KAAA;EAAA,IAAGD,IAAI,GAAAC,KAAA,CAAJD,IAAI;EAAA,OAAoB,CAACA,IAAI,CAAC;AAAA,EAAC,EAAAhH,KAAA,GAK3C,IAAA8G,cAAQ,EAAC,UAACI,IAAiB;EAAA,OAAK,CAACA,IAAI,CAACC,QAAQ,CAAC;AAAA,EAAC,EAAAtH,IAAA,CAAAI,MAAA,IAAAC,OAAA,0BAAAkH,KAAA;EAnOjD,SAAAZ,YAAYG,IAAU,EAAE;IAAA,IAAAU,qBAAA,EAAAC,sBAAA,EAAAC,qBAAA;IAAA,IAAAC,KAAA;IAAAhD,eAAA,OAAAgC,WAAA;IACtBgB,KAAA,GAAAvC,UAAA,OAAAuB,WAAA,GAAM;MACJG,IAAI,EAAJA,IAAI;MACJc,WAAW,EAAE,GAAAJ,qBAAA,IAAAC,sBAAA,GAAEX,IAAI,CAACe,kBAAkB,cAAAJ,sBAAA,uBAAvBA,sBAAA,CAAyBK,YAAY,cAAAN,qBAAA,cAAAA,qBAAA,GAAI,KAAK,CAAC;MAC9DO,UAAU,EAAE;IACd,CAAC;IAAEtD,0BAAA,CAAAkD,KAAA,qBAAArH,WAAA,EAAAqH,KAAA;IACH,IAAAK,KAAA,IAAAN,qBAAA,GAA2BC,KAAA,CAAKM,KAAK,CAACJ,kBAAkB,cAAAH,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC;MAAAQ,aAAA,GAAAF,KAAA,CAAtDG,OAAO;MAAPA,OAAO,GAAAD,aAAA,cAAG,IAAI,GAAAA,aAAA;IACtBP,KAAA,CAAKS,OAAO,GAAG,IAAIC,wBAAU,CAAAlE,aAAA,CAAAA,aAAA,KACxBwD,KAAA,CAAKM,KAAK,CAACJ,kBAAkB;MAChChD,GAAG,EAAE,aAAa;MAClBsD,OAAO,EAAPA,OAAO;MACPG,YAAY,EAAE,IAAI;MAClBC,uBAAuB,EAAE,SAAzBA,uBAAuBA,CAAA;QAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;QAAA,QAAAF,qBAAA,IAAAC,sBAAA,GACrBd,KAAA,CAAKM,KAAK,CAACU,iBAAiB,CAACC,QAAQ,cAAAH,sBAAA,wBAAAC,sBAAA,GAArCD,sBAAA,CAAuCI,oBAAoB,cAAAH,sBAAA,uBAA3DA,sBAAA,CACII,SAAS,cAAAN,qBAAA,cAAAA,qBAAA,GAAI,KAAK;MAAA;MACxBO,kBAAkB,EAAE,SAApBA,kBAAkBA,CAAA;QAAA,OAAQpB,KAAA,CAAKM,KAAK,CAACU,iBAAiB,CAACK,KAAK;MAAA;MAC5DC,aAAa;QAAA,IAAAC,cAAA,GAAA1F,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CAAE,SAAAsG,QAAA;UAAA,IAAAhC,IAAA;UAAA,OAAA5G,YAAA,GAAAqC,CAAA,WAAAwG,QAAA;YAAA,kBAAAA,QAAA,CAAAxI,CAAA;cAAA;gBAAAwI,QAAA,CAAAxI,CAAA;gBAAA,OACM+G,KAAA,CAAK0B,KAAK,CAAC,CAAC;cAAA;gBAAzBlC,IAAI,GAAAiC,QAAA,CAAAxH,CAAA;gBACV+F,KAAA,CAAK2B,kBAAkB,CAACnC,IAAI,CAAC;gBAAC,OAAAiC,QAAA,CAAAvH,CAAA,IACvB,CAAC,CAAC;YAAA;UAAA,GAAAsH,OAAA;QAAA,CACV;QAAA,SAJDF,aAAaA,CAAA;UAAA,OAAAC,cAAA,CAAAxF,KAAA,OAAAD,SAAA;QAAA;QAAA,OAAbwF,aAAa;MAAA;IAIZ,EACF,CAAC;IACFtB,KAAA,CAAKM,KAAK,CAACsB,aAAa,CAACC,QAAQ,CAAC7B,KAAA,CAAKS,OAAO,CAAC;IAAC,OAAAT,KAAA;EAClD;EAAC5B,SAAA,CAAAY,WAAA,EAAAY,KAAA;EAAA,OAAAzC,YAAA,CAAA6B,WAAA;IAAA9B,GAAA;IAAAxC,KAAA,EAMD,SACAiH,kBAAkBA,CAACnC,IAA8B,EAAE;MACjD,IAAI,CAACsC,eAAe,GAAGtC,IAAI;IAC7B;EAAC;IAAAtC,GAAA;IAAAxC,KAAA,EAED,SAASqH,MAAMA,CAAA,EAAG;MAChB;MACA,IAAMvC,IAAI,GAAG,IAAI,CAACc,KAAK,CAACsB,aAAa,CAACI,OAAO,CAAC,IAAI,CAACvB,OAAO,CAAC;MAC3D,IAAIjB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEyC,SAAS,EAAE;QACnB,IAAI,CAAC3B,KAAK,CAACsB,aAAa,CAACM,UAAU,CAAC,IAAI,CAACzB,OAAO,EAAE,CAAC,CAAC,EAAE0B,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;QACjE,IAAI,CAACT,kBAAkB,CAACnC,IAAI,CAAC;MAC/B;IACF;;IAEA;IACA;EAAA;IAAAtC,GAAA;IAAAmF,GAAA,EACA,SAAAA,IAAA,EAAoB;MAClB,OAAO,IAAI,CAACP,eAAe;IAC7B;EAAC;IAAA5E,GAAA;IAAAmF,GAAA,EAED,SAAAA,IAAA,EAA+B;MAAA,IAAAC,sBAAA,EAAAC,sBAAA;MAC7B,QAAAD,sBAAA,IAAAC,sBAAA,GACE,IAAI,CAACjC,KAAK,CAACJ,kBAAkB,cAAAqC,sBAAA,uBAA7BA,sBAAA,CAA+BC,aAAa,cAAAF,sBAAA,cAAAA,sBAAA,GAAI1D,sBAAsB;IAE1E;EAAC;IAAA1B,GAAA;IAAAmF,GAAA,EAED,SAAAA,IAAA,EAAyB;MAAA,IAAAI,sBAAA,EAAAC,sBAAA;MACvB,QAAAD,sBAAA,IAAAC,sBAAA,GAAO,IAAI,CAACpC,KAAK,CAACJ,kBAAkB,cAAAwC,sBAAA,uBAA7BA,sBAAA,CAA+BC,OAAO,cAAAF,sBAAA,cAAAA,sBAAA,GAAI3D,yBAAyB;IAC5E;EAAC;IAAA5B,GAAA;IAAAmF,GAAA,EAED,SAAAA,IAAA,EAAgB;MAAA,IAAAO,UAAA;MACd,QAAAA,UAAA,GAAO,IAAI,CAACpD,IAAI,cAAAoD,UAAA,uBAATA,UAAA,CAAWX,SAAS;IAC7B;EAAC;IAAA/E,GAAA;IAAAxC,KAAA;MAAA,IAAAmI,OAAA,GAAAhH,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CAED,SAAA4H,SAAuBH,OAAe,EAAEV,SAAkB,EAAEc,MAAe;QAAA,IAAAC,MAAA,EAAAC,EAAA;QAAA,OAAArK,YAAA,GAAAqC,CAAA,WAAAiI,SAAA;UAAA,kBAAAA,SAAA,CAAAjK,CAAA;YAAA;cACnE+J,MAAM,GAAG,IAAAG,sBAAa,EAAC;gBAC3BR,OAAO,EAAPA,OAAO;gBACPV,SAAS,EAATA,SAAS;gBACTc,MAAM,EAANA;cACF,CAAC,CAAC;cAAAE,EAAA,GACKG,mCAA0B;cAAAF,SAAA,CAAAjK,CAAA;cAAA,OACzB,IAAI,CAACqH,KAAK,CAAC+C,MAAM,CACpBC,OAAO,CAAC,CAAC,CACTC,SAAS,CAAC,CAAC,CACXC,eAAe,CAAC,CAAC,CACjBC,IAAI,CAACT,MAAM,CAAC;YAAA;cAAA,OAAAE,SAAA,CAAAhJ,CAAA,IAAA+I,EAAA,CAAAC,SAAA,CAAAjJ,CAAA;UAAA;QAAA,GAAA6I,QAAA;MAAA,CAElB;MAAA,SAbeY,MAAMA,CAAAC,EAAA,EAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAhB,OAAA,CAAA9G,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAN4H,MAAM;IAAA;EAAA;IAAAxG,GAAA;IAAAxC,KAAA,EAetB,SAAUoJ,iBAAiBA,CAACC,OAAkC,EAAE;MAC9D,IAAI,CAAAA,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE1J,MAAM,IAAG,CAAC,EAAE;QAAA,IAAA2J,kBAAA,EAAAC,WAAA;QACvB,IAAMC,cAAyC,GAAG,EAAE;QACpD;QACA,IAAMC,cAA2D,GAAG,CAAC,CAAC;QACtE,IAAA1H,cAAO,EAAC,UAAC2H,MAAM,EAAK;UAClB,IAAIA,MAAM,CAACC,YAAY,KAAKC,oCAAiB,CAACC,KAAK,EAAE;YACnD;YACAL,cAAc,CAAC3H,IAAI,CAAC6H,MAAM,CAAC;UAC7B;UACA;UACAD,cAAc,CAACC,MAAM,CAACI,EAAE,CAAC,GAAG,IAAI;QAClC,CAAC,EAAET,OAAO,CAAC;QACX,IAAAtH,cAAO,EAAC,UAAC2H,MAAM,EAAK;UAClB;UACA,IAAI,CAACD,cAAc,CAACC,MAAM,CAACI,EAAE,CAAC,EAAE;YAC9B;YACAN,cAAc,CAAC3H,IAAI,CAAC6H,MAAM,CAAC;UAC7B;QACF,CAAC,GAAAJ,kBAAA,IAAAC,WAAA,GAAE,IAAI,CAACzE,IAAI,cAAAyE,WAAA,uBAATA,WAAA,CAAWF,OAAO,cAAAC,kBAAA,cAAAA,kBAAA,GAAI,EAAE,CAAC;QAC5B,OAAOE,cAAc;MACvB;MACA,OAAO,IAAI,CAAC1E,IAAI,CAACuE,OAAO;IAC1B;EAAC;IAAA7G,GAAA;IAAAxC,KAAA;MAAA,IAAA+J,UAAA,GAAA5I,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CAED,SAAAwJ,SAA0BzC,SAAkB;QAAA,IAAA0C,iBAAA;QAAA,IAAAhC,OAAA,EAAAoB,OAAA,EAAAa,QAAA,EAAAC,kBAAA;QAAA,OAAAjM,YAAA,GAAAqC,CAAA,WAAA6J,SAAA;UAAA,kBAAAA,SAAA,CAAA7L,CAAA;YAAA;cACpC0J,OAAO,GAAG,IAAI,CAACoC,QAAQ;cACzBhB,OAAkC,GAAG,EAAE;cAAAe,SAAA,CAAA7L,CAAA;cAAA,OACtB,IAAI,CAACyK,MAAM,CAACf,OAAO,EAAEV,SAAS,CAAC;YAAA;cAAhD2C,QAAQ,GAAAE,SAAA,CAAA7K,CAAA;cACZ8J,OAAO,GAAGA,OAAO,CAACiB,MAAM,EAAAL,iBAAA,GAACC,QAAQ,CAACb,OAAO,cAAAY,iBAAA,cAAAA,iBAAA,GAAI,EAAE,CAAC;YAAC;cAAA,KAC1CC,QAAQ,CAACK,UAAU;gBAAAH,SAAA,CAAA7L,CAAA;gBAAA;cAAA;cAAA6L,SAAA,CAAA7L,CAAA;cAAA,OAClB,IAAAiM,YAAK,EAAC,IAAI,CAACC,cAAc,CAAC;YAAA;cAAAL,SAAA,CAAA7L,CAAA;cAAA,OACf,IAAI,CAACyK,MAAM,CAACf,OAAO,EAAEV,SAAS,EAAE2C,QAAQ,CAACK,UAAU,CAAC;YAAA;cAArEL,QAAQ,GAAAE,SAAA,CAAA7K,CAAA;cACR8J,OAAO,GAAGA,OAAO,CAACiB,MAAM,EAAAH,kBAAA,GAACD,QAAQ,CAACb,OAAO,cAAAc,kBAAA,cAAAA,kBAAA,GAAI,EAAE,CAAC;cAACC,SAAA,CAAA7L,CAAA;cAAA;YAAA;cAEnD,IAAI2L,QAAQ,CAACQ,QAAQ,CAAEC,QAAQ,KAAK,OAAO,EAAE;gBAC3C;gBACAtB,OAAO,GAAG,IAAI,CAACD,iBAAiB,CAACC,OAAO,CAAC;cAC3C;cAAC,OAAAe,SAAA,CAAA5K,CAAA,IACM;gBACL+H,SAAS,EAAE2C,QAAQ,CAACQ,QAAQ,CAAEnD,SAAS;gBACvC8B,OAAO,EAAPA;cACF,CAAC;UAAA;QAAA,GAAAW,QAAA;MAAA,CACF;MAAA,SAlBeY,SAASA,CAAAC,GAAA;QAAA,OAAAd,UAAA,CAAA1I,KAAA,OAAAD,SAAA;MAAA;MAAA,OAATwJ,SAAS;IAAA;EAAA;IAAApI,GAAA;IAAAxC,KAAA;MAAA,IAAA8K,MAAA,GAAA3J,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CAoBzB,SAAAuK,SAAA;QAAA,IAAAjG,IAAA,EAAAkG,eAAA,EAAAC,gBAAA,EAAAC,qBAAA,EAAAC,gBAAA,EAAAC,KAAA,EAAAC,cAAA,EAAAC,KAAA,EAAAC,GAAA;QAAA,OAAArN,YAAA,GAAAqC,CAAA,WAAAiL,SAAA;UAAA,kBAAAA,SAAA,CAAApM,CAAA,GAAAoM,SAAA,CAAAjN,CAAA;YAAA;cAAAiN,SAAA,CAAApM,CAAA;cAAAoM,SAAA,CAAAjN,CAAA;cAAA,OAEuB,IAAI,CAACqM,SAAS,CAAC,IAAI,CAACrD,SAAS,CAAC;YAAA;cAA3CzC,IAAI,GAAA0G,SAAA,CAAAjM,CAAA;cAAA,OAAAiM,SAAA,CAAAhM,CAAA,IACHsF,IAAI;YAAA;cAAA0G,SAAA,CAAApM,CAAA;cAAAmM,GAAA,GAAAC,SAAA,CAAAjM,CAAA;cAEL6L,KAAK,GAAAG,GAAA,EAEX;cAAA,MACI,EAAAP,eAAA,GAAAI,KAAK,CAAClB,QAAQ,cAAAc,eAAA,uBAAdA,eAAA,CAAgBS,MAAM,MAAK,GAAG;gBAAAD,SAAA,CAAAjN,CAAA;gBAAA;cAAA;cAAA,OAAAiN,SAAA,CAAAhM,CAAA,IACzB,CAAC,CAAC;YAAA;cAAAgM,SAAA,CAAAjN,CAAA;cAAA,QAAA0M,gBAAA,GAIkBG,KAAK,CAAClB,QAAQ,cAAAe,gBAAA,uBAAdA,gBAAA,CAAgBS,KAAK,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;YAAA;cAArDN,cAAc,GAAAG,SAAA,CAAAjM,CAAA;cAAA,MAElB8L,cAAc,aAAdA,cAAc,wBAAAH,qBAAA,GAAdG,cAAc,CAAEO,MAAM,cAAAV,qBAAA,uBAAtBA,qBAAA,CAAwBW,IAAI,CAAC;gBAAA,IAAAC,KAAA,GAAA1K,SAAA,CAAAzB,MAAA,QAAAyB,SAAA,QAAA2K,SAAA,GAAA3K,SAAA,MAAsB,CAAC,CAAC;kBAAA4K,eAAA,GAAAF,KAAA,CAArBG,SAAS;kBAATA,SAAS,GAAAD,eAAA,cAAG,EAAE,GAAAA,eAAA;gBAAA,OAC5C3H,yBAAyB,CAAC6H,QAAQ,CAACD,SAAS,CAAC;cAAA,CAC/C,CAAC;gBAAAT,SAAA,CAAAjN,CAAA;gBAAA;cAAA;cAAAiN,SAAA,CAAAjN,CAAA;cAAA,OAEkB,IAAI,CAACqM,SAAS,CAAC,CAAC;YAAA;cAA7B9F,KAAI,GAAA0G,SAAA,CAAAjM,CAAA;cAAA,OAAAiM,SAAA,CAAAhM,CAAA,IACHsF,KAAI;YAAA;cAGb;cACAqH,OAAO,CAACf,KAAK,CAAC,uBAAuB,GAAAD,gBAAA,GAAEC,KAAK,CAAClB,QAAQ,cAAAiB,gBAAA,uBAAdA,gBAAA,CAAgBM,MAAM,EAAEL,KAAK,CAAC;cAAC,MAChEA,KAAK;YAAA;cAAA,OAAAI,SAAA,CAAAhM,CAAA;UAAA;QAAA,GAAAuL,QAAA;MAAA,CAEd;MAAA,SA3Be/D,KAAKA,CAAA;QAAA,OAAA8D,MAAA,CAAAzJ,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAL4F,KAAK;IAAA,IA6BrB;EAAA;IAAAxE,GAAA;IAAAxC,KAAA;MAAA,IAAAoM,MAAA,GAAAjL,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CACA,SAAA6L,SAAA;QAAA,OAAAnO,YAAA,GAAAqC,CAAA,WAAA+L,SAAA;UAAA,kBAAAA,SAAA,CAAA/N,CAAA;YAAA;cAAA+N,SAAA,CAAA/N,CAAA;cAAA,OAEQ,IAAI,CAACqH,KAAK,CAACsB,aAAa,CAACqF,SAAS,CAAC,IAAI,CAACxG,OAAO,CAAC;YAAA;cAAA,OAAAuG,SAAA,CAAA9M,CAAA;UAAA;QAAA,GAAA6M,QAAA;MAAA,CACvD;MAAA,SAFKG,IAAIA,CAAA;QAAA,OAAAJ,MAAA,CAAA/K,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAJoL,IAAI;IAAA,IAIV;EAAA;IAAAhK,GAAA;IAAAxC,KAAA,EACA,SAAAyM,WAAWA,CAACC,SAAiB,EAAE;MAC7B,OAAO,IAAI,CAACzH,QAAQ,CAAC0H,IAAI,CAAC,UAACC,CAAC;QAAA,OAAKA,CAAC,CAAC9C,EAAE,KAAK4C,SAAS;MAAA,EAAC;IACtD;;IAEA;EAAA;IAAAlK,GAAA;IAAAxC,KAAA,EACA,SAAA6M,cAAcA,CAACC,YAAoB,EAAE;MACnC,OAAO,IAAAC,gCAAiB,EAAC,IAAI,CAAC9H,QAAQ,EAAE6H,YAAY,CAAC;IACvD;;IAEA;EAAA;IAAAtK,GAAA;IAAAxC,KAAA,EACA,SAAAgN,qBAAqBA,CAACC,YAAoB,EAAE;MAC1C,OAAO,IAAAC,uCAAwB,EAAC;QAC9BjI,QAAQ,EAAE,IAAI,CAACA,QAAQ;QACvBgI,YAAY,EAAZA,YAAY;QACZE,UAAU,EAAEC,0BAAY,CAACC;MAC3B,CAAC,CAAC;IACJ;;IAEA;EAAA;IAAA7K,GAAA;IAAAxC,KAAA,EACA,SAAAsN,0BAA0BA,CAACC,WAAmB,EAAE;MAC9C,OAAO,IAAAC,4CAA6B,EAAC;QACnCvI,QAAQ,EAAE,IAAI,CAACA,QAAQ;QACvBsI,WAAW,EAAXA,WAAW;QACXJ,UAAU,EAAEC,0BAAY,CAACK;MAC3B,CAAC,CAAC;IACJ;;IAEA;EAAA;IAAAjL,GAAA;IAAAmF,GAAA,EACA,SAAAA,IAAA,EAAiB;MACf,OAAO,UAAU;IACnB;;IAEA;EAAA;IAAAnF,GAAA;IAAAmF,GAAA,EACA,SAAAA,IAAA,EACe;MAAA,IAAA+F,MAAA;QAAAC,mBAAA;QAAAC,WAAA;MACb,OAAO,IAAAC,UAAG,EAAC,UAACC,UAAU,EAAK;QAAA,IAAAC,qBAAA,EAAAC,oBAAA;QACzB,IAAMX,OAAqB,GAAAvL,aAAA,CAAAA,aAAA,KACtBgM,UAAU;UACbG,IAAI,EAAEP,MAAI,CAACQ,UAAU;UACrBC,YAAY,EAAE,EAAE;UAChBC,MAAM,EAAE,EAAE;UACVtE,EAAE,KAAAQ,MAAA,CAAKwD,UAAU,CAAChE,EAAE,CAAE;UACtBtF,IAAI,KAAA8F,MAAA,EAAAyD,qBAAA,GAAKD,UAAU,CAACO,SAAS,cAAAN,qBAAA,cAAAA,qBAAA,GAAI,EAAE,OAAAzD,MAAA,EAAA0D,oBAAA,GAAIF,UAAU,CAACQ,QAAQ,cAAAN,oBAAA,cAAAA,oBAAA,GAAI,EAAE;QAAE,EACnE;QACD,IAAIF,UAAU,CAACS,KAAK,EAAE;UACpBlB,OAAO,CAACe,MAAM,CAACvM,IAAI,CAACiM,UAAU,CAACS,KAAK,CAAC;QACvC;QACA,IAAIT,UAAU,CAACU,MAAM,EAAE;UACrBnB,OAAO,CAACe,MAAM,CAACvM,IAAI,CAACiM,UAAU,CAACU,MAAM,CAAC;QACxC;QACA,IAAIV,UAAU,CAACW,MAAM,EAAE;UACrBpB,OAAO,CAACe,MAAM,CAACvM,IAAI,CAACiM,UAAU,CAACW,MAAM,CAAC;QACxC;QACA,IAAA1M,cAAO,EAAC,UAACS,GAAG,EAAK;UACf,IAAI,WAAW,CAACkM,IAAI,CAAClM,GAAG,CAAC,IAAI,OAAO6K,OAAO,CAAC7K,GAAG,CAAC,KAAK,QAAQ,EAAE;YAC7D,IAAAmM,gCAAiB,EAACtB,OAAO,EAAEA,OAAO,CAAC7K,GAAG,CAAC,EAAYA,GAAG,CAAC;UACzD;QACF,CAAC,EAAExD,MAAM,CAACyC,IAAI,CAAC4L,OAAO,CAA6B,CAAC;QACpD,OAAOA,OAAO;MAChB,CAAC,GAAAM,mBAAA,IAAAC,WAAA,GAAE,IAAI,CAAC9I,IAAI,cAAA8I,WAAA,uBAATA,WAAA,CAAWvE,OAAO,cAAAsE,mBAAA,cAAAA,mBAAA,GAAI,EAAE,CAAC;IAC9B;;IAEA;EAAA;IAAAnL,GAAA;IAAAmF,GAAA,EACA,SAAAA,IAAA,EACkB;MAAA,IAAAiH,mBAAA,EAAAC,WAAA;MAChB,QAAAD,mBAAA,IAAAC,WAAA,GAAO,IAAI,CAAC/J,IAAI,cAAA+J,WAAA,uBAATA,WAAA,CAAWxF,OAAO,cAAAuF,mBAAA,cAAAA,mBAAA,GAAI,EAAE;IACjC;EAAC;IAAApM,GAAA;IAAAmF,GAAA,EAED,SAAAA,IAAA,EACwB;MACtB,IAAMmH,iBAAsB,GAAG,CAAC,CAAC;MACjC,IAAI,CAAC7J,QAAQ,CAAClD,OAAO,CAAC,UAACgN,IAAS,EAAK;QACnCD,iBAAiB,CAACC,IAAI,CAACjF,EAAE,CAAC,GAAGiF,IAAI;MACnC,CAAC,CAAC;MACF,OAAOD,iBAAiB;IAC1B;;IAEA;EAAA;IAAAtM,GAAA;IAAAmF,GAAA,EACA,SAAAA,IAAA,EAAkB;MAChB,OAAO,IAAI,CAAChB,KAAK;IACnB;EAAC;AAAA,EAlPOqI,mCAAqB,GAAA/Q,WAAA,GAAA2F,yBAAA,CAAA5F,OAAA,CAAAa,SAAA,sBA4B5BoQ,aAAO,EACPC,WAAK;EAAArO,YAAA;EAAAD,UAAA;EAAAE,QAAA;EAAAuB,WAAA,WAAAA,YAAA;IAAA,OACsC,CAAC,CAAC;EAAA;AAAA,IAAAuB,yBAAA,CAAA5F,OAAA,CAAAa,SAAA,yBAE7CsQ,YAAM,GAAAnQ,MAAA,CAAA4C,wBAAA,CAAA5D,OAAA,CAAAa,SAAA,yBAAAb,OAAA,CAAAa,SAAA,GAAA+E,yBAAA,CAAA5F,OAAA,CAAAa,SAAA,WA4HNuQ,gBAAO,GAAApQ,MAAA,CAAA4C,wBAAA,CAAA5D,OAAA,CAAAa,SAAA,WAAAb,OAAA,CAAAa,SAAA,GAAA+E,yBAAA,CAAA5F,OAAA,CAAAa,SAAA,eAAAjB,KAAA,GAAAoB,MAAA,CAAA4C,wBAAA,CAAA5D,OAAA,CAAAa,SAAA,eAAAb,OAAA,CAAAa,SAAA,GAAA+E,yBAAA,CAAA5F,OAAA,CAAAa,SAAA,kBAAAhB,KAAA,GAAAmB,MAAA,CAAA4C,wBAAA,CAAA5D,OAAA,CAAAa,SAAA,kBAAAb,OAAA,CAAAa,SAAA,GAAA+E,yBAAA,CAAA5F,OAAA,CAAAa,SAAA,wBAAAf,KAAA,GAAAkB,MAAA,CAAA4C,wBAAA,CAAA5D,OAAA,CAAAa,SAAA,wBAAAb,OAAA,CAAAa,SAAA,GAAAb,OAAA,MAAAD,MAAA","ignoreList":[]}