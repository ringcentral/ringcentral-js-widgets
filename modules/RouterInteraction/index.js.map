{"version":3,"sources":["modules/RouterInteraction/index.js"],"names":["getDefaultHistory","RouterInteraction","deps","dep","optional","spread","history","options","_reducer","_history","store","selectLocationState","state","push","replace","goBack","locationBeforeTransitions","pathname","ready","locationChange"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;AACA;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,SAASA,iBAAT,GAA6B;AAC3B,SAAO,sEAAP;AACD;;IAQoBC,iB,WALpB,gBAAO;AACNC,QAAM,CACJ,EAAEC,KAAK,0BAAP,EAAmCC,UAAU,IAA7C,EAAmDC,QAAQ,IAA3D,EADI;AADA,CAAP,C;;;AAMC,mCAGG;AAAA,4BAFDC,OAEC;AAAA,QAFDA,OAEC,gCAFSN,mBAET;AAAA,QADEO,OACF;AAAA;;AAAA,uLACUA,OADV;;AAED,UAAKC,QAAL;AACA,UAAKC,QAAL,GAAgBH,OAAhB;AAHC;AAIF;;;;iCACY;AAAA;;AACX,WAAKG,QAAL,GAAgB,4CAAqB,KAAKA,QAA1B,EAAoC,KAAKC,KAAzC,EAAgD;AAC9DC,6BAAqB;AAAA,iBAAM,OAAKC,KAAX;AAAA;AADyC,OAAhD,CAAhB;AAGD;;;sCACiB;AAAA;;AAChB,WAAKH,QAAL,GAAgB,4CAAqB,KAAKA,QAA1B,EAAoC,KAAKC,KAAzC,EAAgD;AAC9DC,6BAAqB;AAAA,iBAAM,OAAKC,KAAX;AAAA;AADyC,OAAhD,CAAhB;AAGD;;;qCAOgB;AACf;AACD;;;;;;;;;;;;AAgBC,iCAAKH,QAAL,EAAcI,IAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,kCAAKJ,QAAL,EAAcK,OAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,kCAAKL,QAAL,EAAcM,MAAd;;;;;;;;;;;;;;;;;;wBA/BiB;AACjB;AACA,aAAO,IAAP;AACD;;;wBAMa;AACZ,aAAO,KAAKN,QAAZ;AACD;;;wBAEiB;AAChB,aAAO,KAAKG,KAAL,CAAWI,yBAAX,CAAqCC,QAA5C;AACD;;;wBAEY;AACX,aAAO,yBAAeC,KAAtB;AACD;;;wBAeiB;AAChB,aAAO;AACLC;AADK,OAAP;AAGD;;;;kBA1DkBlB,iB","file":"index.js","sourcesContent":["import RcModule from 'ringcentral-integration/lib/RcModule';\nimport { Module } from 'ringcentral-integration/lib/di';\nimport { useRouterHistory, createMemoryHistory } from 'react-router';\nimport { syncHistoryWithStore, routerReducer, LOCATION_CHANGE } from 'react-router-redux';\nimport proxify from 'ringcentral-integration/lib/proxy/proxify';\nimport moduleStatuses from 'ringcentral-integration/enums/moduleStatuses';\n\nfunction getDefaultHistory() {\n  return useRouterHistory(createMemoryHistory)();\n}\n\n\n@Module({\n  deps: [\n    { dep: 'RouterInteractionOptions', optional: true, spread: true },\n  ],\n})\nexport default class RouterInteraction extends RcModule {\n  constructor({\n    history = getDefaultHistory(),\n    ...options\n  }) {\n    super({ ...options });\n    this._reducer = routerReducer;\n    this._history = history;\n  }\n  initialize() {\n    this._history = syncHistoryWithStore(this._history, this.store, {\n      selectLocationState: () => this.state,\n    });\n  }\n  initializeProxy() {\n    this._history = syncHistoryWithStore(this._history, this.store, {\n      selectLocationState: () => this.state,\n    });\n  }\n\n  get _actionTypes() {\n    /* no action types */\n    return null;\n  }\n\n  _onStateChange() {\n    /* do nothing */\n  }\n\n  get history() {\n    return this._history;\n  }\n\n  get currentPath() {\n    return this.state.locationBeforeTransitions.pathname;\n  }\n\n  get status() {\n    return moduleStatuses.ready;\n  }\n\n  @proxify\n  async push(...args) {\n    this._history.push(...args);\n  }\n  @proxify\n  async replace(...args) {\n    this._history.replace(...args);\n  }\n  @proxify\n  async goBack(...args) {\n    this._history.goBack(...args);\n  }\n\n  get actionTypes() {\n    return {\n      locationChange: LOCATION_CHANGE\n    };\n  }\n}\n"]}