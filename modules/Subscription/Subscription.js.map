{"version":3,"file":"Subscription.js","names":["_core","require","_subscriptions","_interopRequireDefault","_ramda","_debounceThrottle","_di","_proxify","_normalizeEventFilter","_subscriptionStatus","_dec","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","e","__esModule","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","Symbol","iterator","isArray","length","n","asyncGeneratorStep","o","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","l","Object","defineProperty","enumerable","configurable","writable","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","prototype","_toPrimitive","_typeof","toPrimitive","String","Number","_get","Reflect","get","bind","p","_superPropBase","getOwnPropertyDescriptor","hasOwnProperty","_getPrototypeOf","_inherits","create","_setPrototypeOf","setPrototypeOf","__proto__","_createSuper","_isNativeReflectConstruct","s","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","keys","forEach","reverse","reduce","_initializerWarningHelper","Error","DEFAULT_TIME_TO_RETRY","DEFAULT_REGISTER_DELAY","SUBSCRIPTION_LOCK_KEY","Subscription","Module","deps","dep","optional","_RcModuleV","_super","_this","storageKey","enableCache","_subscription","_retryTimeoutId","_debouncedRegister","_retry","_subscriberMap","Map","__debugNotification__","_handleSleep","regeneratorRuntime","mark","_callee","_this$_subscription","renewPromise","wrap","_callee$","_context","prev","next","ready","automaticRenewing","resubscribeAtPubNub","stop","_onBeforeLogout","_callee2","_callee2$","_context2","_removeSubscription","promisedDebounce","fn","_register","threshold","_registerDelay","debounce","_createSubscriptionWithLock","_timeToRetry","maxThreshold","_addFilters","filters","_setStates","uniq","concat","_ref3","_ref3$message","message","_ref3$filters","_ref3$status","status","subscriptionStatus","_ref3$cachedSubscript","cachedSubscription","_shouldInit","_deps","auth","loggedIn","_shouldReset","onInit","sleepDetector","on","events","detected","addBeforeLogoutHandler","_onInitSuccess","_callee3","_callee3$","_context3","size","onInitSuccess","_onReset","_callee4","_callee4$","_context4","notSubscribed","off","cancel","removeBeforeLogoutHandler","reset","removeAllListeners","onReset","_onRemoveSuccess","_onRemoveError","error","_onRenewSuccess","subscribed","subscription","_onRenewError","flush","_onSubscribeSuccess","_onSubscribeError","_onNotification","console","log","JSON","stringify","_createSubscription2","_callee5","_this2","sdk","_callee5$","_context5","client","service","Subscriptions","createSubscription","setSubscription","notification","removeSuccess","removeError","renewSuccess","renewError","subscribeSuccess","subscribeError","t0","_createSubscription","_createSubscriptionWithLock2","_callee6","_navigator","_navigator$locks","_this3","_callee6$","_context6","navigator","locks","request","_shouldUpdateSubscription","eventFilters","equals","map","normalizeEventFilter","sort","_register2","_callee7","_callee7$","_context7","getFilters","subscribing","setEventFilters","register","_removeSubscription2","_callee8","_callee8$","_context8","unsubscribing","remove","_subscribe","_callee9","_this$_subscription$e","_this$_subscription2","oldFiltersCount","_args9","_callee9$","_context9","undefined","subscribe","module","metadata","set","values","acc","filter","x","index","array","indexOf","_this$_deps$subscript","_this$_deps$subscript2","Math","max","subscriptionOptions","timeToRetry","_this$_deps$subscript3","_this$_deps$subscript4","registerDelay","RcModuleV2","state","storage","action","proxify","exports"],"sources":["modules/Subscription/Subscription.ts"],"sourcesContent":["import {\n  action,\n  RcModuleV2,\n  state,\n  storage,\n} from '@ringcentral-integration/core';\nimport type { ObjectMapValue } from '@ringcentral-integration/core/lib/ObjectMap';\nimport type { ApiError } from '@ringcentral/sdk';\nimport Subscriptions from '@ringcentral/subscriptions';\nimport type { SubscriptionData } from '@ringcentral/subscriptions/src/subscription/Subscription';\nimport { concat, equals, map, uniq } from 'ramda';\n\nimport type { SubscriptionFilter } from '../../enums/subscriptionFilters';\nimport type {\n  DebouncedFunction,\n  PromisedDebounceFunction,\n} from '../../lib/debounce-throttle';\nimport { debounce, promisedDebounce } from '../../lib/debounce-throttle';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\n\nimport type {\n  Deps,\n  MessageBase,\n  SubscriptionMetadata,\n} from './Subscription.interface';\nimport { normalizeEventFilter } from './normalizeEventFilter';\nimport { subscriptionStatus } from './subscriptionStatus';\n\nconst DEFAULT_TIME_TO_RETRY = 20 * 1000;\nconst DEFAULT_REGISTER_DELAY = 2 * 1000;\nconst SUBSCRIPTION_LOCK_KEY = 'subscription-creating-lock';\n\n@Module({\n  name: 'Subscription',\n  deps: [\n    'Auth',\n    'Client',\n    'Storage',\n    'SleepDetector',\n    { dep: 'SubscriptionOptions', optional: true },\n  ],\n})\nexport class Subscription extends RcModuleV2<Deps> {\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Subscriptio... Remove this comment to see the full error message\n  protected _subscription: ReturnType<Subscriptions['createSubscription']> =\n    null;\n\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n  protected _retryTimeoutId: NodeJS.Timeout = null;\n\n  protected _debouncedRegister: PromisedDebounceFunction<\n    Subscription['_register']\n  >;\n\n  protected _retry: DebouncedFunction<\n    Subscription['_createSubscriptionWithLock']\n  >;\n\n  protected _subscriberMap = new Map<any, SubscriptionMetadata>();\n\n  __debugNotification__ = false;\n\n  constructor(deps: Deps) {\n    super({\n      deps,\n      storageKey: 'subscription',\n      enableCache: true,\n    });\n    this._debouncedRegister = promisedDebounce({\n      fn: this._register,\n      threshold: this._registerDelay,\n    });\n\n    this._retry = debounce({\n      fn: this._createSubscriptionWithLock,\n      threshold: this._timeToRetry,\n      maxThreshold: this._timeToRetry,\n    });\n  }\n\n  @state\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'MessageBase... Remove this comment to see the full error message\n  message: MessageBase = null;\n\n  @state\n  filters: SubscriptionFilter[] = [];\n\n  protected _addFilters(filters: Subscription['filters']) {\n    this._setStates({ filters: uniq(concat(filters, this.filters)) });\n  }\n\n  @storage\n  @state\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Subscriptio... Remove this comment to see the full error message\n  cachedSubscription: SubscriptionData = null;\n\n  @state\n  subscriptionStatus: ObjectMapValue<typeof subscriptionStatus> =\n    subscriptionStatus.notSubscribed;\n\n  @action\n  protected _setStates({\n    message = this.message,\n    filters = this.filters,\n    status = this.subscriptionStatus,\n    cachedSubscription = this.cachedSubscription,\n  }) {\n    this.message = message;\n    this.filters = filters;\n    this.subscriptionStatus = status;\n    this.cachedSubscription = cachedSubscription;\n  }\n\n  get _timeToRetry() {\n    return Math.max(\n      0,\n      this._deps.subscriptionOptions?.timeToRetry ?? DEFAULT_TIME_TO_RETRY,\n    );\n  }\n\n  get _registerDelay() {\n    return Math.max(\n      0,\n      this._deps.subscriptionOptions?.registerDelay ?? DEFAULT_REGISTER_DELAY,\n    );\n  }\n\n  override _shouldInit() {\n    return super._shouldInit() && this._deps.auth.loggedIn;\n  }\n\n  override _shouldReset() {\n    return super._shouldReset() || (this.ready && !this._deps.auth.loggedIn);\n  }\n\n  _handleSleep = async () => {\n    if (this.ready && this._subscription) {\n      // to wait automatic renew finish\n      const renewPromise = this._subscription.automaticRenewing();\n      if (renewPromise) {\n        await renewPromise;\n      }\n      // this._subscription may be removed at renewError event\n      // forcibly reconnect pubnub to ensure pubnub is alive\n      await this._subscription?.resubscribeAtPubNub();\n    }\n  };\n\n  protected _onBeforeLogout = async () => {\n    if (this._subscription) {\n      await this._removeSubscription();\n    }\n  };\n\n  override onInit() {\n    this._deps.sleepDetector.on(\n      this._deps.sleepDetector.events.detected,\n      this._handleSleep,\n    );\n    this._deps.auth.addBeforeLogoutHandler(this._onBeforeLogout);\n  }\n\n  override async onInitSuccess() {\n    if (this._subscriberMap.size > 0) {\n      this._createSubscriptionWithLock();\n    }\n  }\n\n  override async onReset() {\n    this._setStates({\n      filters: [],\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'MessageBase... Remove this comment to see the full error message\n      message: null,\n      status: subscriptionStatus.notSubscribed,\n    });\n    this._deps.sleepDetector.off(\n      this._deps.sleepDetector.events.detected,\n      this._handleSleep,\n    );\n    this._retry.cancel();\n    this._deps.auth.removeBeforeLogoutHandler(this._onBeforeLogout);\n    this._debouncedRegister.cancel();\n    if (this._subscription) {\n      this._subscription.reset();\n      this._subscription.removeAllListeners();\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Subscriptio... Remove this comment to see the full error message\n      this._subscription = null;\n    }\n  }\n\n  protected _onRemoveSuccess() {\n    this._setStates({\n      status: subscriptionStatus.notSubscribed,\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Subscriptio... Remove this comment to see the full error message\n      cachedSubscription: null,\n    });\n  }\n\n  protected _onRemoveError(error: ApiError | Error) {\n    this._setStates({\n      status: subscriptionStatus.notSubscribed,\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Subscriptio... Remove this comment to see the full error message\n      cachedSubscription: null,\n    });\n  }\n\n  protected _onRenewSuccess() {\n    if (this._subscription) {\n      this._setStates({\n        status: subscriptionStatus.subscribed,\n        cachedSubscription: this._subscription.subscription(),\n      });\n    }\n  }\n\n  protected _onRenewError(error: ApiError | Error) {\n    if (this._subscription) {\n      this._subscription.reset();\n      this._subscription.removeAllListeners();\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Subscriptio... Remove this comment to see the full error message\n      this._subscription = null;\n    }\n    this._setStates({\n      status: subscriptionStatus.notSubscribed,\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Subscriptio... Remove this comment to see the full error message\n      cachedSubscription: null,\n    });\n    if (this.ready) {\n      // immediately start the retry process after the first renewError\n      this._retry();\n      this._retry.flush();\n    }\n  }\n\n  protected _onSubscribeSuccess() {\n    if (this._subscription) {\n      this._setStates({\n        status: subscriptionStatus.subscribed,\n        cachedSubscription: this._subscription.subscription(),\n      });\n    }\n  }\n\n  protected _onSubscribeError(error: ApiError | Error) {\n    this._setStates({\n      status: subscriptionStatus.notSubscribed,\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Subscriptio... Remove this comment to see the full error message\n      cachedSubscription: null,\n    });\n    if (this.ready) {\n      this._retry();\n    }\n  }\n\n  protected _onNotification(message: MessageBase) {\n    // for our support collect pubnub message;\n    if (this.__debugNotification__) {\n      console.log('Received Notification:', JSON.stringify(message));\n    }\n    this._setStates({\n      message,\n    });\n  }\n\n  protected async _createSubscription() {\n    if (this.ready && !this._subscription) {\n      const sdk = this._deps.client.service;\n      this._subscription = new Subscriptions({ sdk }).createSubscription();\n      if (this.cachedSubscription) {\n        try {\n          this._subscription.setSubscription(this.cachedSubscription);\n        } catch (error: any /** TODO: confirm with instanceof */) {\n          this._subscription = new Subscriptions({ sdk }).createSubscription();\n        }\n      }\n      // TODO: fix Subscription limit issue about multiple create Subscription issue when multi-tab login.\n      this._subscription.on(\n        this._subscription.events.notification,\n        (message: MessageBase) => this._onNotification(message),\n      );\n      this._subscription.on(this._subscription.events.removeSuccess, () =>\n        this._onRemoveSuccess(),\n      );\n      this._subscription.on(this._subscription.events.removeError, (error) =>\n        this._onRemoveError(error),\n      );\n      this._subscription.on(this._subscription.events.renewSuccess, () =>\n        this._onRenewSuccess(),\n      );\n      this._subscription.on(this._subscription.events.renewError, (error) =>\n        this._onRenewError(error),\n      );\n      this._subscription.on(this._subscription.events.subscribeSuccess, () =>\n        this._onSubscribeSuccess(),\n      );\n      this._subscription.on(this._subscription.events.subscribeError, (error) =>\n        this._onSubscribeError(error),\n      );\n    }\n    try {\n      await this._debouncedRegister();\n    } catch (error: any /** TODO: confirm with instanceof */) {\n      if (error.message !== 'cancelled') {\n        throw error;\n      }\n    }\n  }\n\n  protected async _createSubscriptionWithLock() {\n    if (!navigator?.locks?.request) {\n      await this._createSubscription();\n    } else {\n      await navigator.locks.request(SUBSCRIPTION_LOCK_KEY, () =>\n        this._createSubscription(),\n      );\n    }\n  }\n\n  protected _shouldUpdateSubscription(eventFilters: SubscriptionFilter[]) {\n    return !!(\n      this._subscription &&\n      !equals(\n        map(normalizeEventFilter, this._subscription.eventFilters()).sort(),\n        map(normalizeEventFilter, eventFilters).sort(),\n      )\n    );\n  }\n\n  protected async _register() {\n    const eventFilters = this.getFilters();\n    if (this._shouldUpdateSubscription(eventFilters)) {\n      this._setStates({\n        status: subscriptionStatus.subscribing,\n      });\n      this._subscription.setEventFilters([...eventFilters]);\n      await this._subscription.register();\n    }\n  }\n\n  protected async _removeSubscription() {\n    if (this._subscription) {\n      this._setStates({\n        status: subscriptionStatus.unsubscribing,\n      });\n      try {\n        await this._subscription.remove();\n      } catch (error: any /** TODO: confirm with instanceof */) {\n        /* removeError is handled elsewhere */\n      }\n      if (this._subscription) {\n        this._subscription.reset();\n        this._subscription.removeAllListeners();\n        // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Subscriptio... Remove this comment to see the full error message\n        this._subscription = null;\n      }\n      this._setStates({\n        status: subscriptionStatus.notSubscribed,\n      });\n    }\n  }\n\n  @proxify\n  async subscribe(events: Subscription['filters'] = []) {\n    if (this.ready) {\n      const oldFiltersCount = this._subscription?.eventFilters().length ?? 0;\n      // use [].concat for potential compatibility issue\n      // @ts-expect-error TS(2769): No overload matches this call.\n      this._addFilters([].concat(events));\n      if (oldFiltersCount !== this.filters.length) {\n        await this._createSubscriptionWithLock();\n      }\n    }\n  }\n\n  register(module: any, metadata: any) {\n    this._subscriberMap.set(module, metadata);\n  }\n\n  getFilters() {\n    // Registered filters\n    let filters = Array.from(this._subscriberMap.values()).reduce<\n      SubscriptionFilter[]\n    >((acc, metadata) => acc.concat(metadata.filters), []);\n\n    filters = filters\n      .concat(this.filters) // Concat subscribed filters\n      .filter((x, index, array) => array.indexOf(x) === index); // remove duplicates\n\n    return filters;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAQA,IAAAC,cAAA,GAAAC,sBAAA,CAAAF,OAAA;AAEA,IAAAG,MAAA,GAAAH,OAAA;AAOA,IAAAI,iBAAA,GAAAJ,OAAA;AACA,IAAAK,GAAA,GAAAL,OAAA;AACA,IAAAM,QAAA,GAAAN,OAAA;AAOA,IAAAO,qBAAA,GAAAP,OAAA;AACA,IAAAQ,mBAAA,GAAAR,OAAA;AAA0D,IAAAS,IAAA,EAAAC,MAAA,EAAAC,OAAA,EAAAC,WAAA,EAAAC,YAAA,EAAAC,YAAA,EAAAC,YAAA;AAAA,SAAAb,uBAAAc,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAAA,SAAAE,mBAAAC,CAAA,WAAAC,kBAAA,CAAAD,CAAA,KAAAE,gBAAA,CAAAF,CAAA,KAAAG,2BAAA,CAAAH,CAAA,KAAAI,kBAAA;AAAA,SAAAA,mBAAA,cAAAC,SAAA;AAAA,SAAAF,4BAAAH,CAAA,EAAAM,CAAA,QAAAN,CAAA,2BAAAA,CAAA,SAAAO,iBAAA,CAAAP,CAAA,EAAAM,CAAA,OAAAE,CAAA,MAAAC,QAAA,CAAAC,IAAA,CAAAV,CAAA,EAAAW,KAAA,6BAAAH,CAAA,IAAAR,CAAA,CAAAY,WAAA,KAAAJ,CAAA,GAAAR,CAAA,CAAAY,WAAA,CAAAC,IAAA,aAAAL,CAAA,cAAAA,CAAA,GAAAM,KAAA,CAAAC,IAAA,CAAAf,CAAA,oBAAAQ,CAAA,+CAAAQ,IAAA,CAAAR,CAAA,IAAAD,iBAAA,CAAAP,CAAA,EAAAM,CAAA;AAAA,SAAAJ,iBAAAF,CAAA,8BAAAiB,MAAA,YAAAjB,CAAA,CAAAiB,MAAA,CAAAC,QAAA,aAAAlB,CAAA,uBAAAc,KAAA,CAAAC,IAAA,CAAAf,CAAA;AAAA,SAAAC,mBAAAD,CAAA,QAAAc,KAAA,CAAAK,OAAA,CAAAnB,CAAA,UAAAO,iBAAA,CAAAP,CAAA;AAAA,SAAAO,kBAAAP,CAAA,EAAAM,CAAA,aAAAA,CAAA,IAAAA,CAAA,GAAAN,CAAA,CAAAoB,MAAA,MAAAd,CAAA,GAAAN,CAAA,CAAAoB,MAAA,YAAAvB,CAAA,MAAAwB,CAAA,GAAAP,KAAA,CAAAR,CAAA,GAAAT,CAAA,GAAAS,CAAA,EAAAT,CAAA,MAAAwB,CAAA,CAAAxB,CAAA,IAAAG,CAAA,CAAAH,CAAA,YAAAwB,CAAA;AAAA,SAAAC,mBAAAD,CAAA,EAAAb,CAAA,EAAAX,CAAA,EAAAG,CAAA,EAAAuB,CAAA,EAAAjB,CAAA,EAAAkB,CAAA,cAAAC,CAAA,GAAAJ,CAAA,CAAAf,CAAA,EAAAkB,CAAA,GAAAE,CAAA,GAAAD,CAAA,CAAAE,KAAA,WAAAN,CAAA,gBAAAxB,CAAA,CAAAwB,CAAA,KAAAI,CAAA,CAAAG,IAAA,GAAApB,CAAA,CAAAkB,CAAA,IAAAG,OAAA,CAAAC,OAAA,CAAAJ,CAAA,EAAAK,IAAA,CAAA/B,CAAA,EAAAuB,CAAA;AAAA,SAAAS,kBAAAX,CAAA,6BAAAb,CAAA,SAAAX,CAAA,GAAAoC,SAAA,aAAAJ,OAAA,WAAA7B,CAAA,EAAAuB,CAAA,QAAAjB,CAAA,GAAAe,CAAA,CAAAa,KAAA,CAAA1B,CAAA,EAAAX,CAAA,YAAAsC,MAAAd,CAAA,IAAAC,kBAAA,CAAAhB,CAAA,EAAAN,CAAA,EAAAuB,CAAA,EAAAY,KAAA,EAAAC,MAAA,UAAAf,CAAA,cAAAe,OAAAf,CAAA,IAAAC,kBAAA,CAAAhB,CAAA,EAAAN,CAAA,EAAAuB,CAAA,EAAAY,KAAA,EAAAC,MAAA,WAAAf,CAAA,KAAAc,KAAA;AAAA,SAAAE,2BAAAxC,CAAA,EAAA4B,CAAA,EAAAzB,CAAA,EAAAsC,CAAA,IAAAtC,CAAA,IAAAuC,MAAA,CAAAC,cAAA,CAAA3C,CAAA,EAAA4B,CAAA,IAAAgB,UAAA,EAAAzC,CAAA,CAAAyC,UAAA,EAAAC,YAAA,EAAA1C,CAAA,CAAA0C,YAAA,EAAAC,QAAA,EAAA3C,CAAA,CAAA2C,QAAA,EAAAhB,KAAA,EAAA3B,CAAA,CAAA4C,WAAA,GAAA5C,CAAA,CAAA4C,WAAA,CAAAlC,IAAA,CAAA4B,CAAA;AAAA,SAAAO,gBAAAvC,CAAA,EAAAe,CAAA,UAAAf,CAAA,YAAAe,CAAA,aAAAhB,SAAA;AAAA,SAAAyC,kBAAAjD,CAAA,EAAAG,CAAA,aAAAQ,CAAA,MAAAA,CAAA,GAAAR,CAAA,CAAAoB,MAAA,EAAAZ,CAAA,UAAAe,CAAA,GAAAvB,CAAA,CAAAQ,CAAA,GAAAe,CAAA,CAAAkB,UAAA,GAAAlB,CAAA,CAAAkB,UAAA,QAAAlB,CAAA,CAAAmB,YAAA,kBAAAnB,CAAA,KAAAA,CAAA,CAAAoB,QAAA,QAAAJ,MAAA,CAAAC,cAAA,CAAA3C,CAAA,EAAAkD,cAAA,CAAAxB,CAAA,CAAAyB,GAAA,GAAAzB,CAAA;AAAA,SAAA0B,aAAApD,CAAA,EAAAG,CAAA,EAAAQ,CAAA,WAAAR,CAAA,IAAA8C,iBAAA,CAAAjD,CAAA,CAAAqD,SAAA,EAAAlD,CAAA,GAAAQ,CAAA,IAAAsC,iBAAA,CAAAjD,CAAA,EAAAW,CAAA,GAAA+B,MAAA,CAAAC,cAAA,CAAA3C,CAAA,iBAAA8C,QAAA,SAAA9C,CAAA;AAAA,SAAAkD,eAAAvC,CAAA,QAAAiB,CAAA,GAAA0B,YAAA,CAAA3C,CAAA,gCAAA4C,OAAA,CAAA3B,CAAA,IAAAA,CAAA,GAAAA,CAAA;AAAA,SAAA0B,aAAA3C,CAAA,EAAAR,CAAA,oBAAAoD,OAAA,CAAA5C,CAAA,MAAAA,CAAA,SAAAA,CAAA,MAAAX,CAAA,GAAAW,CAAA,CAAAS,MAAA,CAAAoC,WAAA,kBAAAxD,CAAA,QAAA4B,CAAA,GAAA5B,CAAA,CAAAa,IAAA,CAAAF,CAAA,EAAAR,CAAA,gCAAAoD,OAAA,CAAA3B,CAAA,UAAAA,CAAA,YAAApB,SAAA,yEAAAL,CAAA,GAAAsD,MAAA,GAAAC,MAAA,EAAA/C,CAAA;AAAA,SAAAgD,KAAA,WAAAA,IAAA,yBAAAC,OAAA,IAAAA,OAAA,CAAAC,GAAA,GAAAD,OAAA,CAAAC,GAAA,CAAAC,IAAA,eAAA9D,CAAA,EAAAW,CAAA,EAAAR,CAAA,QAAA4D,CAAA,GAAAC,cAAA,CAAAhE,CAAA,EAAAW,CAAA,OAAAoD,CAAA,QAAAvC,CAAA,GAAAkB,MAAA,CAAAuB,wBAAA,CAAAF,CAAA,EAAApD,CAAA,UAAAa,CAAA,CAAAqC,GAAA,GAAArC,CAAA,CAAAqC,GAAA,CAAAhD,IAAA,CAAAuB,SAAA,CAAAb,MAAA,OAAAvB,CAAA,GAAAG,CAAA,IAAAqB,CAAA,CAAAM,KAAA,OAAA6B,IAAA,CAAAtB,KAAA,OAAAD,SAAA;AAAA,SAAA4B,eAAArD,CAAA,EAAAe,CAAA,eAAAwC,cAAA,CAAArD,IAAA,CAAAF,CAAA,EAAAe,CAAA,eAAAf,CAAA,GAAAwD,eAAA,CAAAxD,CAAA,kBAAAA,CAAA;AAAA,SAAAyD,UAAAzD,CAAA,EAAAX,CAAA,6BAAAA,CAAA,aAAAA,CAAA,YAAAQ,SAAA,wDAAAG,CAAA,CAAA0C,SAAA,GAAAX,MAAA,CAAA2B,MAAA,CAAArE,CAAA,IAAAA,CAAA,CAAAqD,SAAA,IAAAtC,WAAA,IAAAe,KAAA,EAAAnB,CAAA,EAAAmC,QAAA,MAAAD,YAAA,WAAAH,MAAA,CAAAC,cAAA,CAAAhC,CAAA,iBAAAmC,QAAA,SAAA9C,CAAA,IAAAsE,eAAA,CAAA3D,CAAA,EAAAX,CAAA;AAAA,SAAAsE,gBAAA3D,CAAA,EAAAX,CAAA,WAAAsE,eAAA,GAAA5B,MAAA,CAAA6B,cAAA,GAAA7B,MAAA,CAAA6B,cAAA,CAAAT,IAAA,eAAAnD,CAAA,EAAAX,CAAA,WAAAW,CAAA,CAAA6D,SAAA,GAAAxE,CAAA,EAAAW,CAAA,KAAA2D,eAAA,CAAA3D,CAAA,EAAAX,CAAA;AAAA,SAAAyE,aAAA9D,CAAA,QAAAR,CAAA,GAAAuE,yBAAA,6BAAA1E,CAAA,EAAA0B,CAAA,GAAAyC,eAAA,CAAAxD,CAAA,OAAAR,CAAA,QAAAwE,CAAA,GAAAR,eAAA,OAAApD,WAAA,EAAAf,CAAA,GAAA4D,OAAA,CAAAgB,SAAA,CAAAlD,CAAA,EAAAU,SAAA,EAAAuC,CAAA,UAAA3E,CAAA,GAAA0B,CAAA,CAAAW,KAAA,OAAAD,SAAA,UAAAyC,0BAAA,OAAA7E,CAAA;AAAA,SAAA6E,2BAAAlE,CAAA,EAAAX,CAAA,QAAAA,CAAA,iBAAAuD,OAAA,CAAAvD,CAAA,0BAAAA,CAAA,UAAAA,CAAA,iBAAAA,CAAA,YAAAQ,SAAA,qEAAAsE,sBAAA,CAAAnE,CAAA;AAAA,SAAAmE,uBAAA9E,CAAA,mBAAAA,CAAA,YAAA+E,cAAA,sEAAA/E,CAAA;AAAA,SAAA0E,0BAAA,cAAA/D,CAAA,IAAAqE,OAAA,CAAA3B,SAAA,CAAA4B,OAAA,CAAApE,IAAA,CAAA+C,OAAA,CAAAgB,SAAA,CAAAI,OAAA,iCAAArE,CAAA,aAAA+D,yBAAA,YAAAA,0BAAA,aAAA/D,CAAA;AAAA,SAAAwD,gBAAAxD,CAAA,WAAAwD,eAAA,GAAAzB,MAAA,CAAA6B,cAAA,GAAA7B,MAAA,CAAAwC,cAAA,CAAApB,IAAA,eAAAnD,CAAA,WAAAA,CAAA,CAAA6D,SAAA,IAAA9B,MAAA,CAAAwC,cAAA,CAAAvE,CAAA,MAAAwD,eAAA,CAAAxD,CAAA;AAAA,SAAAwE,0BAAAvD,CAAA,EAAA5B,CAAA,EAAAG,CAAA,EAAAqB,CAAA,EAAAiB,CAAA,QAAAhC,CAAA,cAAAiC,MAAA,CAAA0C,IAAA,CAAA5D,CAAA,EAAA6D,OAAA,WAAAzD,CAAA,IAAAnB,CAAA,CAAAmB,CAAA,IAAAJ,CAAA,CAAAI,CAAA,OAAAnB,CAAA,CAAAmC,UAAA,KAAAnC,CAAA,CAAAmC,UAAA,EAAAnC,CAAA,CAAAoC,YAAA,KAAApC,CAAA,CAAAoC,YAAA,cAAApC,CAAA,IAAAA,CAAA,CAAAsC,WAAA,MAAAtC,CAAA,CAAAqC,QAAA,QAAArC,CAAA,GAAAN,CAAA,CAAAW,KAAA,GAAAwE,OAAA,GAAAC,MAAA,WAAApF,CAAA,EAAAqB,CAAA,WAAAA,CAAA,CAAAI,CAAA,EAAA5B,CAAA,EAAAG,CAAA,KAAAA,CAAA,KAAAM,CAAA,GAAAgC,CAAA,eAAAhC,CAAA,CAAAsC,WAAA,KAAAtC,CAAA,CAAAqB,KAAA,GAAArB,CAAA,CAAAsC,WAAA,GAAAtC,CAAA,CAAAsC,WAAA,CAAAlC,IAAA,CAAA4B,CAAA,YAAAhC,CAAA,CAAAsC,WAAA,uBAAAtC,CAAA,CAAAsC,WAAA,IAAAL,MAAA,CAAAC,cAAA,CAAAf,CAAA,EAAA5B,CAAA,EAAAS,CAAA,WAAAA,CAAA;AAAA,SAAA+E,0BAAArF,CAAA,EAAAH,CAAA,UAAAyF,KAAA;AAE1D,IAAMC,qBAAqB,GAAG,EAAE,GAAG,IAAI;AACvC,IAAMC,sBAAsB,GAAG,CAAC,GAAG,IAAI;AACvC,IAAMC,qBAAqB,GAAG,4BAA4B;AAAC,IAY9CC,YAAY,IAAApG,IAAA,GAVxB,IAAAqG,UAAM,EAAC;EACN9E,IAAI,EAAE,cAAc;EACpB+E,IAAI,EAAE,CACJ,MAAM,EACN,QAAQ,EACR,SAAS,EACT,eAAe,EACf;IAAEC,GAAG,EAAE,qBAAqB;IAAEC,QAAQ,EAAE;EAAK,CAAC;AAElD,CAAC,CAAC,EAAAxG,IAAA,CAAAC,MAAA,IAAAC,OAAA,0BAAAuG,UAAA;EAAA9B,SAAA,CAAAyB,YAAA,EAAAK,UAAA;EAAA,IAAAC,MAAA,GAAA1B,YAAA,CAAAoB,YAAA;EAqBA,SAAAA,aAAYE,IAAU,EAAE;IAAA,IAAAK,KAAA;IAAApD,eAAA,OAAA6C,YAAA;IACtBO,KAAA,GAAAD,MAAA,CAAAtF,IAAA,OAAM;MACJkF,IAAI,EAAJA,IAAI;MACJM,UAAU,EAAE,cAAc;MAC1BC,WAAW,EAAE;IACf,CAAC;IAxBH;IAAAF,KAAA,CACUG,aAAa,GACrB,IAAI;IAEN;IAAAH,KAAA,CACUI,eAAe,GAAmB,IAAI;IAAAJ,KAAA,CAEtCK,kBAAkB;IAAAL,KAAA,CAIlBM,MAAM;IAAAN,KAAA,CAINO,cAAc,GAAG,IAAIC,GAAG,CAA4B,CAAC;IAAAR,KAAA,CAE/DS,qBAAqB,GAAG,KAAK;IAAArE,0BAAA,CAAA4D,KAAA,aAAAxG,WAAA,EAAAkF,sBAAA,CAAAsB,KAAA;IAAA5D,0BAAA,CAAA4D,KAAA,aAAAvG,YAAA,EAAAiF,sBAAA,CAAAsB,KAAA;IAAA5D,0BAAA,CAAA4D,KAAA,wBAAAtG,YAAA,EAAAgF,sBAAA,CAAAsB,KAAA;IAAA5D,0BAAA,CAAA4D,KAAA,wBAAArG,YAAA,EAAA+E,sBAAA,CAAAsB,KAAA;IAAAA,KAAA,CA2E7BU,YAAY,gBAAA3E,iBAAA,eAAA4E,kBAAA,CAAAC,IAAA,CAAG,SAAAC,QAAA;MAAA,IAAAC,mBAAA,EAAAC,YAAA;MAAA,OAAAJ,kBAAA,CAAAK,IAAA,UAAAC,SAAAC,QAAA;QAAA;UAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAA,MACTpB,KAAA,CAAKqB,KAAK,IAAIrB,KAAA,CAAKG,aAAa;gBAAAe,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAClC;cACML,YAAY,GAAGf,KAAA,CAAKG,aAAa,CAACmB,iBAAiB,CAAC,CAAC;cAAA,KACvDP,YAAY;gBAAAG,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OACRL,YAAY;YAAA;cAAAG,QAAA,CAAAE,IAAA;cAAA,QAAAN,mBAAA,GAIdd,KAAA,CAAKG,aAAa,cAAAW,mBAAA,uBAAlBA,mBAAA,CAAoBS,mBAAmB,CAAC,CAAC;YAAA;YAAA;cAAA,OAAAL,QAAA,CAAAM,IAAA;UAAA;QAAA;MAAA,GAAAX,OAAA;IAAA,CAElD;IAAAb,KAAA,CAESyB,eAAe,gBAAA1F,iBAAA,eAAA4E,kBAAA,CAAAC,IAAA,CAAG,SAAAc,SAAA;MAAA,OAAAf,kBAAA,CAAAK,IAAA,UAAAW,UAAAC,SAAA;QAAA;UAAA,QAAAA,SAAA,CAAAT,IAAA,GAAAS,SAAA,CAAAR,IAAA;YAAA;cAAA,KACtBpB,KAAA,CAAKG,aAAa;gBAAAyB,SAAA,CAAAR,IAAA;gBAAA;cAAA;cAAAQ,SAAA,CAAAR,IAAA;cAAA,OACdpB,KAAA,CAAK6B,mBAAmB,CAAC,CAAC;YAAA;YAAA;cAAA,OAAAD,SAAA,CAAAJ,IAAA;UAAA;QAAA;MAAA,GAAAE,QAAA;IAAA,CAEnC;IApFC1B,KAAA,CAAKK,kBAAkB,GAAG,IAAAyB,kCAAgB,EAAC;MACzCC,EAAE,EAAE/B,KAAA,CAAKgC,SAAS;MAClBC,SAAS,EAAEjC,KAAA,CAAKkC;IAClB,CAAC,CAAC;IAEFlC,KAAA,CAAKM,MAAM,GAAG,IAAA6B,0BAAQ,EAAC;MACrBJ,EAAE,EAAE/B,KAAA,CAAKoC,2BAA2B;MACpCH,SAAS,EAAEjC,KAAA,CAAKqC,YAAY;MAC5BC,YAAY,EAAEtC,KAAA,CAAKqC;IACrB,CAAC,CAAC;IAAC,OAAArC,KAAA;EACL;EAAChD,YAAA,CAAAyC,YAAA;IAAA1C,GAAA;IAAArB,KAAA,WAAA6G,YASqBC,OAAgC,EAAE;MACtD,IAAI,CAACC,UAAU,CAAC;QAAED,OAAO,EAAE,IAAAE,WAAI,EAAC,IAAAC,aAAM,EAACH,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC;MAAE,CAAC,CAAC;IACnE;EAAC;IAAAzF,GAAA;IAAArB,KAAA,WAAA+G,WAAAG,KAAA,EAiBE;MAAA,IAAAC,aAAA,GAAAD,KAAA,CAJDE,OAAO;QAAPA,OAAO,GAAAD,aAAA,cAAG,IAAI,CAACC,OAAO,GAAAD,aAAA;QAAAE,aAAA,GAAAH,KAAA,CACtBJ,OAAO;QAAPA,OAAO,GAAAO,aAAA,cAAG,IAAI,CAACP,OAAO,GAAAO,aAAA;QAAAC,YAAA,GAAAJ,KAAA,CACtBK,MAAM;QAANA,MAAM,GAAAD,YAAA,cAAG,IAAI,CAACE,kBAAkB,GAAAF,YAAA;QAAAG,qBAAA,GAAAP,KAAA,CAChCQ,kBAAkB;QAAlBA,kBAAkB,GAAAD,qBAAA,cAAG,IAAI,CAACC,kBAAkB,GAAAD,qBAAA;MAE5C,IAAI,CAACL,OAAO,GAAGA,OAAO;MACtB,IAAI,CAACN,OAAO,GAAGA,OAAO;MACtB,IAAI,CAACU,kBAAkB,GAAGD,MAAM;MAChC,IAAI,CAACG,kBAAkB,GAAGA,kBAAkB;IAC9C;EAAC;IAAArG,GAAA;IAAArB,KAAA,WAAA2H,YAAA,EAgBsB;MACrB,OAAO9F,IAAA,CAAAQ,eAAA,CAAA0B,YAAA,CAAAxC,SAAA,wBAAAxC,IAAA,UAAuB,IAAI,CAAC6I,KAAK,CAACC,IAAI,CAACC,QAAQ;IACxD;EAAC;IAAAzG,GAAA;IAAArB,KAAA,WAAA+H,aAAA,EAEuB;MACtB,OAAOlG,IAAA,CAAAQ,eAAA,CAAA0B,YAAA,CAAAxC,SAAA,yBAAAxC,IAAA,UAAyB,IAAI,CAAC4G,KAAK,IAAI,CAAC,IAAI,CAACiC,KAAK,CAACC,IAAI,CAACC,QAAS;IAC1E;EAAC;IAAAzG,GAAA;IAAArB,KAAA,WAAAgI,OAAA,EAqBiB;MAChB,IAAI,CAACJ,KAAK,CAACK,aAAa,CAACC,EAAE,CACzB,IAAI,CAACN,KAAK,CAACK,aAAa,CAACE,MAAM,CAACC,QAAQ,EACxC,IAAI,CAACpD,YACP,CAAC;MACD,IAAI,CAAC4C,KAAK,CAACC,IAAI,CAACQ,sBAAsB,CAAC,IAAI,CAACtC,eAAe,CAAC;IAC9D;EAAC;IAAA1E,GAAA;IAAArB,KAAA;MAAA,IAAAsI,cAAA,GAAAjI,iBAAA,eAAA4E,kBAAA,CAAAC,IAAA,UAAAqD,SAAA;QAAA,OAAAtD,kBAAA,CAAAK,IAAA,UAAAkD,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAAhD,IAAA,GAAAgD,SAAA,CAAA/C,IAAA;cAAA;gBAGC,IAAI,IAAI,CAACb,cAAc,CAAC6D,IAAI,GAAG,CAAC,EAAE;kBAChC,IAAI,CAAChC,2BAA2B,CAAC,CAAC;gBACpC;cAAC;cAAA;gBAAA,OAAA+B,SAAA,CAAA3C,IAAA;YAAA;UAAA;QAAA,GAAAyC,QAAA;MAAA;MAAA,SAAAI,cAAA;QAAA,OAAAL,cAAA,CAAA/H,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAqI,aAAA;IAAA;EAAA;IAAAtH,GAAA;IAAArB,KAAA;MAAA,IAAA4I,QAAA,GAAAvI,iBAAA,eAAA4E,kBAAA,CAAAC,IAAA,UAAA2D,SAAA;QAAA,OAAA5D,kBAAA,CAAAK,IAAA,UAAAwD,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAAtD,IAAA,GAAAsD,SAAA,CAAArD,IAAA;cAAA;gBAID,IAAI,CAACqB,UAAU,CAAC;kBACdD,OAAO,EAAE,EAAE;kBACX;kBACAM,OAAO,EAAE,IAAI;kBACbG,MAAM,EAAEC,sCAAkB,CAACwB;gBAC7B,CAAC,CAAC;gBACF,IAAI,CAACpB,KAAK,CAACK,aAAa,CAACgB,GAAG,CAC1B,IAAI,CAACrB,KAAK,CAACK,aAAa,CAACE,MAAM,CAACC,QAAQ,EACxC,IAAI,CAACpD,YACP,CAAC;gBACD,IAAI,CAACJ,MAAM,CAACsE,MAAM,CAAC,CAAC;gBACpB,IAAI,CAACtB,KAAK,CAACC,IAAI,CAACsB,yBAAyB,CAAC,IAAI,CAACpD,eAAe,CAAC;gBAC/D,IAAI,CAACpB,kBAAkB,CAACuE,MAAM,CAAC,CAAC;gBAChC,IAAI,IAAI,CAACzE,aAAa,EAAE;kBACtB,IAAI,CAACA,aAAa,CAAC2E,KAAK,CAAC,CAAC;kBAC1B,IAAI,CAAC3E,aAAa,CAAC4E,kBAAkB,CAAC,CAAC;kBACvC;kBACA,IAAI,CAAC5E,aAAa,GAAG,IAAI;gBAC3B;cAAC;cAAA;gBAAA,OAAAsE,SAAA,CAAAjD,IAAA;YAAA;UAAA;QAAA,GAAA+C,QAAA;MAAA;MAAA,SAAAS,QAAA;QAAA,OAAAV,QAAA,CAAArI,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAgJ,OAAA;IAAA;EAAA;IAAAjI,GAAA;IAAArB,KAAA,WAAAuJ,iBAAA,EAG0B;MAC3B,IAAI,CAACxC,UAAU,CAAC;QACdQ,MAAM,EAAEC,sCAAkB,CAACwB,aAAa;QACxC;QACAtB,kBAAkB,EAAE;MACtB,CAAC,CAAC;IACJ;EAAC;IAAArG,GAAA;IAAArB,KAAA,WAAAwJ,eAEwBC,KAAuB,EAAE;MAChD,IAAI,CAAC1C,UAAU,CAAC;QACdQ,MAAM,EAAEC,sCAAkB,CAACwB,aAAa;QACxC;QACAtB,kBAAkB,EAAE;MACtB,CAAC,CAAC;IACJ;EAAC;IAAArG,GAAA;IAAArB,KAAA,WAAA0J,gBAAA,EAE2B;MAC1B,IAAI,IAAI,CAACjF,aAAa,EAAE;QACtB,IAAI,CAACsC,UAAU,CAAC;UACdQ,MAAM,EAAEC,sCAAkB,CAACmC,UAAU;UACrCjC,kBAAkB,EAAE,IAAI,CAACjD,aAAa,CAACmF,YAAY,CAAC;QACtD,CAAC,CAAC;MACJ;IACF;EAAC;IAAAvI,GAAA;IAAArB,KAAA,WAAA6J,cAEuBJ,KAAuB,EAAE;MAC/C,IAAI,IAAI,CAAChF,aAAa,EAAE;QACtB,IAAI,CAACA,aAAa,CAAC2E,KAAK,CAAC,CAAC;QAC1B,IAAI,CAAC3E,aAAa,CAAC4E,kBAAkB,CAAC,CAAC;QACvC;QACA,IAAI,CAAC5E,aAAa,GAAG,IAAI;MAC3B;MACA,IAAI,CAACsC,UAAU,CAAC;QACdQ,MAAM,EAAEC,sCAAkB,CAACwB,aAAa;QACxC;QACAtB,kBAAkB,EAAE;MACtB,CAAC,CAAC;MACF,IAAI,IAAI,CAAC/B,KAAK,EAAE;QACd;QACA,IAAI,CAACf,MAAM,CAAC,CAAC;QACb,IAAI,CAACA,MAAM,CAACkF,KAAK,CAAC,CAAC;MACrB;IACF;EAAC;IAAAzI,GAAA;IAAArB,KAAA,WAAA+J,oBAAA,EAE+B;MAC9B,IAAI,IAAI,CAACtF,aAAa,EAAE;QACtB,IAAI,CAACsC,UAAU,CAAC;UACdQ,MAAM,EAAEC,sCAAkB,CAACmC,UAAU;UACrCjC,kBAAkB,EAAE,IAAI,CAACjD,aAAa,CAACmF,YAAY,CAAC;QACtD,CAAC,CAAC;MACJ;IACF;EAAC;IAAAvI,GAAA;IAAArB,KAAA,WAAAgK,kBAE2BP,KAAuB,EAAE;MACnD,IAAI,CAAC1C,UAAU,CAAC;QACdQ,MAAM,EAAEC,sCAAkB,CAACwB,aAAa;QACxC;QACAtB,kBAAkB,EAAE;MACtB,CAAC,CAAC;MACF,IAAI,IAAI,CAAC/B,KAAK,EAAE;QACd,IAAI,CAACf,MAAM,CAAC,CAAC;MACf;IACF;EAAC;IAAAvD,GAAA;IAAArB,KAAA,WAAAiK,gBAEyB7C,OAAoB,EAAE;MAC9C;MACA,IAAI,IAAI,CAACrC,qBAAqB,EAAE;QAC9BmF,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEC,IAAI,CAACC,SAAS,CAACjD,OAAO,CAAC,CAAC;MAChE;MACA,IAAI,CAACL,UAAU,CAAC;QACdK,OAAO,EAAPA;MACF,CAAC,CAAC;IACJ;EAAC;IAAA/F,GAAA;IAAArB,KAAA;MAAA,IAAAsK,oBAAA,GAAAjK,iBAAA,eAAA4E,kBAAA,CAAAC,IAAA,UAAAqF,SAAA;QAAA,IAAAC,MAAA;QAAA,IAAAC,GAAA;QAAA,OAAAxF,kBAAA,CAAAK,IAAA,UAAAoF,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAAlF,IAAA,GAAAkF,SAAA,CAAAjF,IAAA;cAAA;gBAGC,IAAI,IAAI,CAACC,KAAK,IAAI,CAAC,IAAI,CAAClB,aAAa,EAAE;kBAC/BgG,GAAG,GAAG,IAAI,CAAC7C,KAAK,CAACgD,MAAM,CAACC,OAAO;kBACrC,IAAI,CAACpG,aAAa,GAAG,IAAIqG,yBAAa,CAAC;oBAAEL,GAAG,EAAHA;kBAAI,CAAC,CAAC,CAACM,kBAAkB,CAAC,CAAC;kBACpE,IAAI,IAAI,CAACrD,kBAAkB,EAAE;oBAC3B,IAAI;sBACF,IAAI,CAACjD,aAAa,CAACuG,eAAe,CAAC,IAAI,CAACtD,kBAAkB,CAAC;oBAC7D,CAAC,CAAC,OAAO+B,KAAU,EAAuC;sBACxD,IAAI,CAAChF,aAAa,GAAG,IAAIqG,yBAAa,CAAC;wBAAEL,GAAG,EAAHA;sBAAI,CAAC,CAAC,CAACM,kBAAkB,CAAC,CAAC;oBACtE;kBACF;kBACA;kBACA,IAAI,CAACtG,aAAa,CAACyD,EAAE,CACnB,IAAI,CAACzD,aAAa,CAAC0D,MAAM,CAAC8C,YAAY,EACtC,UAAC7D,OAAoB;oBAAA,OAAKoD,MAAI,CAACP,eAAe,CAAC7C,OAAO,CAAC;kBAAA,CACzD,CAAC;kBACD,IAAI,CAAC3C,aAAa,CAACyD,EAAE,CAAC,IAAI,CAACzD,aAAa,CAAC0D,MAAM,CAAC+C,aAAa,EAAE;oBAAA,OAC7DV,MAAI,CAACjB,gBAAgB,CAAC,CAAC;kBAAA,CACzB,CAAC;kBACD,IAAI,CAAC9E,aAAa,CAACyD,EAAE,CAAC,IAAI,CAACzD,aAAa,CAAC0D,MAAM,CAACgD,WAAW,EAAE,UAAC1B,KAAK;oBAAA,OACjEe,MAAI,CAAChB,cAAc,CAACC,KAAK,CAAC;kBAAA,CAC5B,CAAC;kBACD,IAAI,CAAChF,aAAa,CAACyD,EAAE,CAAC,IAAI,CAACzD,aAAa,CAAC0D,MAAM,CAACiD,YAAY,EAAE;oBAAA,OAC5DZ,MAAI,CAACd,eAAe,CAAC,CAAC;kBAAA,CACxB,CAAC;kBACD,IAAI,CAACjF,aAAa,CAACyD,EAAE,CAAC,IAAI,CAACzD,aAAa,CAAC0D,MAAM,CAACkD,UAAU,EAAE,UAAC5B,KAAK;oBAAA,OAChEe,MAAI,CAACX,aAAa,CAACJ,KAAK,CAAC;kBAAA,CAC3B,CAAC;kBACD,IAAI,CAAChF,aAAa,CAACyD,EAAE,CAAC,IAAI,CAACzD,aAAa,CAAC0D,MAAM,CAACmD,gBAAgB,EAAE;oBAAA,OAChEd,MAAI,CAACT,mBAAmB,CAAC,CAAC;kBAAA,CAC5B,CAAC;kBACD,IAAI,CAACtF,aAAa,CAACyD,EAAE,CAAC,IAAI,CAACzD,aAAa,CAAC0D,MAAM,CAACoD,cAAc,EAAE,UAAC9B,KAAK;oBAAA,OACpEe,MAAI,CAACR,iBAAiB,CAACP,KAAK,CAAC;kBAAA,CAC/B,CAAC;gBACH;gBAACkB,SAAA,CAAAlF,IAAA;gBAAAkF,SAAA,CAAAjF,IAAA;gBAAA,OAEO,IAAI,CAACf,kBAAkB,CAAC,CAAC;cAAA;gBAAAgG,SAAA,CAAAjF,IAAA;gBAAA;cAAA;gBAAAiF,SAAA,CAAAlF,IAAA;gBAAAkF,SAAA,CAAAa,EAAA,GAAAb,SAAA;gBAAA,MAE3BA,SAAA,CAAAa,EAAA,CAAMpE,OAAO,KAAK,WAAW;kBAAAuD,SAAA,CAAAjF,IAAA;kBAAA;gBAAA;gBAAA,MAAAiF,SAAA,CAAAa,EAAA;cAAA;cAAA;gBAAA,OAAAb,SAAA,CAAA7E,IAAA;YAAA;UAAA;QAAA,GAAAyE,QAAA;MAAA;MAAA,SAAAkB,oBAAA;QAAA,OAAAnB,oBAAA,CAAA/J,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAmL,mBAAA;IAAA;EAAA;IAAApK,GAAA;IAAArB,KAAA;MAAA,IAAA0L,4BAAA,GAAArL,iBAAA,eAAA4E,kBAAA,CAAAC,IAAA,UAAAyG,SAAA;QAAA,IAAAC,UAAA;UAAAC,gBAAA;UAAAC,MAAA;QAAA,OAAA7G,kBAAA,CAAAK,IAAA,UAAAyG,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAAvG,IAAA,GAAAuG,SAAA,CAAAtG,IAAA;cAAA;gBAAA,KAAAkG,UAAA,GAO9BK,SAAS,cAAAL,UAAA,wBAAAC,gBAAA,GAATD,UAAA,CAAWM,KAAK,cAAAL,gBAAA,uBAAhBA,gBAAA,CAAkBM,OAAO;kBAAAH,SAAA,CAAAtG,IAAA;kBAAA;gBAAA;gBAAAsG,SAAA,CAAAtG,IAAA;gBAAA,OACtB,IAAI,CAAC+F,mBAAmB,CAAC,CAAC;cAAA;gBAAAO,SAAA,CAAAtG,IAAA;gBAAA;cAAA;gBAAAsG,SAAA,CAAAtG,IAAA;gBAAA,OAE1BuG,SAAS,CAACC,KAAK,CAACC,OAAO,CAACrI,qBAAqB,EAAE;kBAAA,OACnDgI,MAAI,CAACL,mBAAmB,CAAC,CAAC;gBAAA,CAC5B,CAAC;cAAA;cAAA;gBAAA,OAAAO,SAAA,CAAAlG,IAAA;YAAA;UAAA;QAAA,GAAA6F,QAAA;MAAA;MAAA,SAAAjF,4BAAA;QAAA,OAAAgF,4BAAA,CAAAnL,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAoG,2BAAA;IAAA;EAAA;IAAArF,GAAA;IAAArB,KAAA,WAAAoM,0BAI+BC,YAAkC,EAAE;MACtE,OAAO,CAAC,EACN,IAAI,CAAC5H,aAAa,IAClB,CAAC,IAAA6H,aAAM,EACL,IAAAC,UAAG,EAACC,0CAAoB,EAAE,IAAI,CAAC/H,aAAa,CAAC4H,YAAY,CAAC,CAAC,CAAC,CAACI,IAAI,CAAC,CAAC,EACnE,IAAAF,UAAG,EAACC,0CAAoB,EAAEH,YAAY,CAAC,CAACI,IAAI,CAAC,CAC/C,CAAC,CACF;IACH;EAAC;IAAApL,GAAA;IAAArB,KAAA;MAAA,IAAA0M,UAAA,GAAArM,iBAAA,eAAA4E,kBAAA,CAAAC,IAAA,UAAAyH,SAAA;QAAA,IAAAN,YAAA;QAAA,OAAApH,kBAAA,CAAAK,IAAA,UAAAsH,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAApH,IAAA,GAAAoH,SAAA,CAAAnH,IAAA;cAAA;gBAGO2G,YAAY,GAAG,IAAI,CAACS,UAAU,CAAC,CAAC;gBAAA,KAClC,IAAI,CAACV,yBAAyB,CAACC,YAAY,CAAC;kBAAAQ,SAAA,CAAAnH,IAAA;kBAAA;gBAAA;gBAC9C,IAAI,CAACqB,UAAU,CAAC;kBACdQ,MAAM,EAAEC,sCAAkB,CAACuF;gBAC7B,CAAC,CAAC;gBACF,IAAI,CAACtI,aAAa,CAACuI,eAAe,CAAA5O,kBAAA,CAAKiO,YAAY,CAAC,CAAC;gBAACQ,SAAA,CAAAnH,IAAA;gBAAA,OAChD,IAAI,CAACjB,aAAa,CAACwI,QAAQ,CAAC,CAAC;cAAA;cAAA;gBAAA,OAAAJ,SAAA,CAAA/G,IAAA;YAAA;UAAA;QAAA,GAAA6G,QAAA;MAAA;MAAA,SAAArG,UAAA;QAAA,OAAAoG,UAAA,CAAAnM,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAgG,SAAA;IAAA;EAAA;IAAAjF,GAAA;IAAArB,KAAA;MAAA,IAAAkN,oBAAA,GAAA7M,iBAAA,eAAA4E,kBAAA,CAAAC,IAAA,UAAAiI,SAAA;QAAA,OAAAlI,kBAAA,CAAAK,IAAA,UAAA8H,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAA5H,IAAA,GAAA4H,SAAA,CAAA3H,IAAA;cAAA;gBAAA,KAKjC,IAAI,CAACjB,aAAa;kBAAA4I,SAAA,CAAA3H,IAAA;kBAAA;gBAAA;gBACpB,IAAI,CAACqB,UAAU,CAAC;kBACdQ,MAAM,EAAEC,sCAAkB,CAAC8F;gBAC7B,CAAC,CAAC;gBAACD,SAAA,CAAA5H,IAAA;gBAAA4H,SAAA,CAAA3H,IAAA;gBAAA,OAEK,IAAI,CAACjB,aAAa,CAAC8I,MAAM,CAAC,CAAC;cAAA;gBAAAF,SAAA,CAAA3H,IAAA;gBAAA;cAAA;gBAAA2H,SAAA,CAAA5H,IAAA;gBAAA4H,SAAA,CAAA7B,EAAA,GAAA6B,SAAA;cAAA;gBAInC,IAAI,IAAI,CAAC5I,aAAa,EAAE;kBACtB,IAAI,CAACA,aAAa,CAAC2E,KAAK,CAAC,CAAC;kBAC1B,IAAI,CAAC3E,aAAa,CAAC4E,kBAAkB,CAAC,CAAC;kBACvC;kBACA,IAAI,CAAC5E,aAAa,GAAG,IAAI;gBAC3B;gBACA,IAAI,CAACsC,UAAU,CAAC;kBACdQ,MAAM,EAAEC,sCAAkB,CAACwB;gBAC7B,CAAC,CAAC;cAAC;cAAA;gBAAA,OAAAqE,SAAA,CAAAvH,IAAA;YAAA;UAAA;QAAA,GAAAqH,QAAA;MAAA;MAAA,SAAAhH,oBAAA;QAAA,OAAA+G,oBAAA,CAAA3M,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAA6F,mBAAA;IAAA;EAAA;IAAA9E,GAAA;IAAArB,KAAA;MAAA,IAAAwN,UAAA,GAAAnN,iBAAA,eAAA4E,kBAAA,CAAAC,IAAA,UAAAuI,SAAA;QAAA,IAAAtF,MAAA;UAAAuF,qBAAA;UAAAC,oBAAA;UAAAC,eAAA;UAAAC,MAAA,GAAAvN,SAAA;QAAA,OAAA2E,kBAAA,CAAAK,IAAA,UAAAwI,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAAtI,IAAA,GAAAsI,SAAA,CAAArI,IAAA;cAAA;gBAKSyC,MAA+B,GAAA0F,MAAA,CAAApO,MAAA,QAAAoO,MAAA,QAAAG,SAAA,GAAAH,MAAA,MAAG,EAAE;gBAAA,KAC9C,IAAI,CAAClI,KAAK;kBAAAoI,SAAA,CAAArI,IAAA;kBAAA;gBAAA;gBACNkI,eAAe,IAAAF,qBAAA,IAAAC,oBAAA,GAAG,IAAI,CAAClJ,aAAa,cAAAkJ,oBAAA,uBAAlBA,oBAAA,CAAoBtB,YAAY,CAAC,CAAC,CAAC5M,MAAM,cAAAiO,qBAAA,cAAAA,qBAAA,GAAI,CAAC,EACtE;gBACA;gBACA,IAAI,CAAC7G,WAAW,CAAC,EAAE,CAACI,MAAM,CAACkB,MAAM,CAAC,CAAC;gBAAC,MAChCyF,eAAe,KAAK,IAAI,CAAC9G,OAAO,CAACrH,MAAM;kBAAAsO,SAAA,CAAArI,IAAA;kBAAA;gBAAA;gBAAAqI,SAAA,CAAArI,IAAA;gBAAA,OACnC,IAAI,CAACgB,2BAA2B,CAAC,CAAC;cAAA;cAAA;gBAAA,OAAAqH,SAAA,CAAAjI,IAAA;YAAA;UAAA;QAAA,GAAA2H,QAAA;MAAA;MAAA,SAAAQ,UAAA;QAAA,OAAAT,UAAA,CAAAjN,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAA2N,SAAA;IAAA;EAAA;IAAA5M,GAAA;IAAArB,KAAA,WAAAiN,SAKrCiB,MAAW,EAAEC,QAAa,EAAE;MACnC,IAAI,CAACtJ,cAAc,CAACuJ,GAAG,CAACF,MAAM,EAAEC,QAAQ,CAAC;IAC3C;EAAC;IAAA9M,GAAA;IAAArB,KAAA,WAAA8M,WAAA,EAEY;MACX;MACA,IAAIhG,OAAO,GAAG3H,KAAK,CAACC,IAAI,CAAC,IAAI,CAACyF,cAAc,CAACwJ,MAAM,CAAC,CAAC,CAAC,CAAC5K,MAAM,CAE3D,UAAC6K,GAAG,EAAEH,QAAQ;QAAA,OAAKG,GAAG,CAACrH,MAAM,CAACkH,QAAQ,CAACrH,OAAO,CAAC;MAAA,GAAE,EAAE,CAAC;MAEtDA,OAAO,GAAGA,OAAO,CACdG,MAAM,CAAC,IAAI,CAACH,OAAO,CAAC,CAAC;MAAA,CACrByH,MAAM,CAAC,UAACC,CAAC,EAAEC,KAAK,EAAEC,KAAK;QAAA,OAAKA,KAAK,CAACC,OAAO,CAACH,CAAC,CAAC,KAAKC,KAAK;MAAA,EAAC,CAAC,CAAC;;MAE5D,OAAO3H,OAAO;IAChB;EAAC;IAAAzF,GAAA;IAAAU,GAAA,WAAAA,IAAA,EApRkB;MAAA,IAAA6M,qBAAA,EAAAC,sBAAA;MACjB,OAAOC,IAAI,CAACC,GAAG,CACb,CAAC,GAAAH,qBAAA,IAAAC,sBAAA,GACD,IAAI,CAACjH,KAAK,CAACoH,mBAAmB,cAAAH,sBAAA,uBAA9BA,sBAAA,CAAgCI,WAAW,cAAAL,qBAAA,cAAAA,qBAAA,GAAIhL,qBACjD,CAAC;IACH;EAAC;IAAAvC,GAAA;IAAAU,GAAA,WAAAA,IAAA,EAEoB;MAAA,IAAAmN,sBAAA,EAAAC,sBAAA;MACnB,OAAOL,IAAI,CAACC,GAAG,CACb,CAAC,GAAAG,sBAAA,IAAAC,sBAAA,GACD,IAAI,CAACvH,KAAK,CAACoH,mBAAmB,cAAAG,sBAAA,uBAA9BA,sBAAA,CAAgCC,aAAa,cAAAF,sBAAA,cAAAA,sBAAA,GAAIrL,sBACnD,CAAC;IACH;EAAC;EAAA,OAAAE,YAAA;AAAA,EAnF+BsL,gBAAU,IAAAvR,WAAA,GAAAuF,yBAAA,CAAAxF,OAAA,CAAA0D,SAAA,cAsCzC+N,WAAK;EAAAvO,YAAA;EAAAD,UAAA;EAAAE,QAAA;EAAAC,WAAA,WAAAA,YAAA;IAAA,OAEiB,IAAI;EAAA;AAAA,IAAAlD,YAAA,GAAAsF,yBAAA,CAAAxF,OAAA,CAAA0D,SAAA,cAE1B+N,WAAK;EAAAvO,YAAA;EAAAD,UAAA;EAAAE,QAAA;EAAAC,WAAA,WAAAA,YAAA;IAAA,OAC0B,EAAE;EAAA;AAAA,IAAAjD,YAAA,GAAAqF,yBAAA,CAAAxF,OAAA,CAAA0D,SAAA,yBAMjCgO,aAAO,EACPD,WAAK;EAAAvO,YAAA;EAAAD,UAAA;EAAAE,QAAA;EAAAC,WAAA,WAAAA,YAAA;IAAA,OAEiC,IAAI;EAAA;AAAA,IAAAhD,YAAA,GAAAoF,yBAAA,CAAAxF,OAAA,CAAA0D,SAAA,yBAE1C+N,WAAK;EAAAvO,YAAA;EAAAD,UAAA;EAAAE,QAAA;EAAAC,WAAA,WAAAA,YAAA;IAAA,OAEJuG,sCAAkB,CAACwB,aAAa;EAAA;AAAA,IAAA3F,yBAAA,CAAAxF,OAAA,CAAA0D,SAAA,iBAEjCiO,YAAM,GAAA5O,MAAA,CAAAuB,wBAAA,CAAAtE,OAAA,CAAA0D,SAAA,iBAAA1D,OAAA,CAAA0D,SAAA,GAAA8B,yBAAA,CAAAxF,OAAA,CAAA0D,SAAA,gBAqQNkO,gBAAO,GAAA7O,MAAA,CAAAuB,wBAAA,CAAAtE,OAAA,CAAA0D,SAAA,gBAAA1D,OAAA,CAAA0D,SAAA,IAAA1D,OAAA,MAAAD,MAAA;AAAA8R,OAAA,CAAA3L,YAAA,GAAAA,YAAA","ignoreList":[]}