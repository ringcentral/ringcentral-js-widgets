{"version":3,"sources":["modules/Subscription/getSubscriptionReducer.ts"],"names":["getCachedSubscriptionReducer","types","state","type","subscription","renewSuccess","subscribeSuccess","removeSuccess","subscribeError","renewError","getSubscriptionStatusReducer","subscriptionStatus","notSubscribed","subscribe","subscribing","subscribed","resetSuccess","removeError","remove","unsubscribing","getMessageReducer","message","notification","getFiltersReducer","filters","setFilters","addFilters","filterMap","concat","filter","f","removeFilters","forEach","getSubscriptionReducer","status"],"mappings":"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","sourcesContent":["import { combineReducers } from 'redux';\n\nimport getModuleStatusReducer from '../../lib/getModuleStatusReducer';\nimport { subscriptionStatus } from './subscriptionStatus';\n\nexport function getCachedSubscriptionReducer(types) {\n  return (state = null, { type, subscription }) => {\n    switch (type) {\n      case types.renewSuccess:\n      case types.subscribeSuccess:\n        return subscription;\n\n      case types.removeSuccess:\n      case types.subscribeError:\n      case types.renewError:\n        return null;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getSubscriptionStatusReducer(types) {\n  return (state = subscriptionStatus.notSubscribed, { type }) => {\n    switch (type) {\n      case types.subscribe:\n        return subscriptionStatus.subscribing;\n\n      case types.subscribeSuccess:\n      case types.renewSuccess:\n        return subscriptionStatus.subscribed;\n\n      case types.renewError:\n      case types.resetSuccess:\n      case types.removeSuccess:\n      case types.removeError:\n      case types.subscribeError:\n        return subscriptionStatus.notSubscribed;\n\n      case types.remove:\n        return subscriptionStatus.unsubscribing;\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport function getMessageReducer(types) {\n  return (state = null, { type, message = state }) => {\n    if (type === types.notification) {\n      return message;\n    }\n    if (type === types.resetSuccess) {\n      return null;\n    }\n    return state;\n  };\n}\n\nexport function getFiltersReducer(types) {\n  return (state = [], { type, filters }) => {\n    switch (type) {\n      case types.setFilters:\n        return filters;\n\n      case types.addFilters: {\n        const filterMap = {};\n        return state.concat(filters).filter((f) => {\n          if (!filterMap[f]) {\n            filterMap[f] = true;\n            return true;\n          }\n          return false;\n        });\n      }\n      case types.removeFilters: {\n        const filterMap = {};\n        filters.forEach((f) => {\n          filterMap[f] = true;\n        });\n        return state.filter((f) => !filterMap[f]);\n      }\n      case types.resetSuccess:\n        return [];\n\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getSubscriptionReducer(types) {\n  return combineReducers({\n    status: getModuleStatusReducer(types),\n    message: getMessageReducer(types),\n    filters: getFiltersReducer(types),\n    subscriptionStatus: getSubscriptionStatusReducer(types),\n  });\n}\n"],"file":"getSubscriptionReducer.js"}