{"version":3,"file":"callHistoryHelper.js","names":["RC_EXTENSION_DELIMITER","addIfNotExist","number","output","numberMap","push","exports","pickPhoneNumber","phoneNumber","pickPhoneOrExtensionNumber","extension","formatExt","num","concat","pickFullPhoneNumber","extensionNumber","addNumbersFromCall","pickingFullNumber","arguments","length","undefined","call","pickNumber","from","to"],"sources":["modules/CallHistory/callHistoryHelper.ts"],"sourcesContent":["import type { Call } from '../../interfaces/Call.interface';\n\nconst RC_EXTENSION_DELIMITER = '*';\n\nexport type PhoneNumberPicker = (\n  phoneNumber: string,\n  extNumber?: string,\n) => string;\n\nexport const addIfNotExist = (\n  number: string,\n  output: string[],\n  numberMap: Record<string, boolean>,\n) => {\n  if (!numberMap[number]) {\n    output.push(number);\n    numberMap[number] = true;\n  }\n};\n\n// NOTE:\n// business logic for commons for now\n// return phone number only.\nconst pickPhoneNumber: PhoneNumberPicker = (phoneNumber: string) => phoneNumber;\n\n// @ts-expect-error TS(2322): Type '(phoneNumber: string, extension: string) => ... Remove this comment to see the full error message\nexport const pickPhoneOrExtensionNumber: PhoneNumberPicker = (\n  phoneNumber: string,\n  extension: string,\n) => phoneNumber || extension;\n\nconst formatExt = (num: string) => `${RC_EXTENSION_DELIMITER}${num}`;\n\n// @ts-expect-error TS(2322): Type '(phoneNumber: string, extensionNumber: strin... Remove this comment to see the full error message\nexport const pickFullPhoneNumber: PhoneNumberPicker = (\n  phoneNumber: string,\n  extensionNumber: string,\n) => {\n  let number = phoneNumber;\n  if (phoneNumber && extensionNumber) {\n    number = `${phoneNumber}${formatExt(extensionNumber)}`;\n  } else if (extensionNumber) {\n    number = extensionNumber;\n  }\n  return number;\n};\n\nexport const addNumbersFromCall =\n  (\n    output: string[],\n    numberMap: Record<string, boolean>,\n    pickingFullNumber = false,\n  ) =>\n  (call: Call) => {\n    const pickNumber = pickingFullNumber\n      ? pickFullPhoneNumber\n      : pickPhoneNumber;\n    if (call.from && call.from.phoneNumber) {\n      const number = pickNumber(\n        call.from.phoneNumber,\n        call.from.extensionNumber,\n      );\n      addIfNotExist(number, output, numberMap);\n    } else if (call.from && call.from.extensionNumber) {\n      addIfNotExist(call.from.extensionNumber, output, numberMap);\n    }\n    if (call.to && call.to.phoneNumber) {\n      const number = pickNumber(call.to.phoneNumber, call.to.extensionNumber);\n      addIfNotExist(number, output, numberMap);\n    } else if (call.to && call.to.extensionNumber) {\n      addIfNotExist(call.to.extensionNumber, output, numberMap);\n    }\n  };\n"],"mappings":";;;;;;;AAEA,IAAMA,sBAAsB,GAAG,GAAG;AAO3B,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CACxBC,MAAc,EACdC,MAAgB,EAChBC,SAAkC,EAC/B;EACH,IAAI,CAACA,SAAS,CAACF,MAAM,CAAC,EAAE;IACtBC,MAAM,CAACE,IAAI,CAACH,MAAM,CAAC;IACnBE,SAAS,CAACF,MAAM,CAAC,GAAG,IAAI;EAC1B;AACF,CAAC;;AAED;AACA;AACA;AAAAI,OAAA,CAAAL,aAAA,GAAAA,aAAA;AACA,IAAMM,eAAkC,GAAG,SAArCA,eAAkCA,CAAIC,WAAmB;EAAA,OAAKA,WAAW;AAAA;;AAE/E;AACO,IAAMC,0BAA6C,GAAG,SAAhDA,0BAA6CA,CACxDD,WAAmB,EACnBE,SAAiB;EAAA,OACdF,WAAW,IAAIE,SAAS;AAAA;AAACJ,OAAA,CAAAG,0BAAA,GAAAA,0BAAA;AAE9B,IAAME,SAAS,GAAG,SAAZA,SAASA,CAAIC,GAAW;EAAA,UAAAC,MAAA,CAAQb,sBAAsB,EAAAa,MAAA,CAAGD,GAAG;AAAA,CAAE;;AAEpE;AACO,IAAME,mBAAsC,GAAG,SAAzCA,mBAAsCA,CACjDN,WAAmB,EACnBO,eAAuB,EACpB;EACH,IAAIb,MAAM,GAAGM,WAAW;EACxB,IAAIA,WAAW,IAAIO,eAAe,EAAE;IAClCb,MAAM,MAAAW,MAAA,CAAML,WAAW,EAAAK,MAAA,CAAGF,SAAS,CAACI,eAAe,CAAC,CAAE;EACxD,CAAC,MAAM,IAAIA,eAAe,EAAE;IAC1Bb,MAAM,GAAGa,eAAe;EAC1B;EACA,OAAOb,MAAM;AACf,CAAC;AAACI,OAAA,CAAAQ,mBAAA,GAAAA,mBAAA;AAEK,IAAME,kBAAkB,GAC7B,SADWA,kBAAkBA,CAE3Bb,MAAgB,EAChBC,SAAkC;EAAA,IAClCa,iBAAiB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EAAA,OAE3B,UAACG,IAAU,EAAK;IACd,IAAMC,UAAU,GAAGL,iBAAiB,GAChCH,mBAAmB,GACnBP,eAAe;IACnB,IAAIc,IAAI,CAACE,IAAI,IAAIF,IAAI,CAACE,IAAI,CAACf,WAAW,EAAE;MACtC,IAAMN,MAAM,GAAGoB,UAAU,CACvBD,IAAI,CAACE,IAAI,CAACf,WAAW,EACrBa,IAAI,CAACE,IAAI,CAACR,eACZ,CAAC;MACDd,aAAa,CAACC,MAAM,EAAEC,MAAM,EAAEC,SAAS,CAAC;IAC1C,CAAC,MAAM,IAAIiB,IAAI,CAACE,IAAI,IAAIF,IAAI,CAACE,IAAI,CAACR,eAAe,EAAE;MACjDd,aAAa,CAACoB,IAAI,CAACE,IAAI,CAACR,eAAe,EAAEZ,MAAM,EAAEC,SAAS,CAAC;IAC7D;IACA,IAAIiB,IAAI,CAACG,EAAE,IAAIH,IAAI,CAACG,EAAE,CAAChB,WAAW,EAAE;MAClC,IAAMN,OAAM,GAAGoB,UAAU,CAACD,IAAI,CAACG,EAAE,CAAChB,WAAW,EAAEa,IAAI,CAACG,EAAE,CAACT,eAAe,CAAC;MACvEd,aAAa,CAACC,OAAM,EAAEC,MAAM,EAAEC,SAAS,CAAC;IAC1C,CAAC,MAAM,IAAIiB,IAAI,CAACG,EAAE,IAAIH,IAAI,CAACG,EAAE,CAACT,eAAe,EAAE;MAC7Cd,aAAa,CAACoB,IAAI,CAACG,EAAE,CAACT,eAAe,EAAEZ,MAAM,EAAEC,SAAS,CAAC;IAC3D;EACF,CAAC;AAAA;AAACE,OAAA,CAAAU,kBAAA,GAAAA,kBAAA","ignoreList":[]}