{"version":3,"file":"RcVideoV2.js","names":["_di","require","_proxify","_RcVideo","_constants","_dec","_class","_class2","asyncGeneratorStep","n","t","e","r","o","a","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_classCallCheck","TypeError","_defineProperties","length","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","prototype","_toPrimitive","_typeof","Symbol","toPrimitive","call","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","__proto__","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","l","keys","forEach","initializer","slice","reverse","reduce","formatJoinUriWithPMN","settings","_settings$discovery","_settings$pins","_settings$pins$aliase","joinUri","discovery","web","alias","pins","aliases","type","_settings$pins2","pmiId","pstn","participant","replace","RcVideo","Module","name","deps","dep","optional","_BaseRcVideo","_super","transformV2ResponseToV1","_settings$pins3","_settings$host","_settings$host2","_settings$pins4","_settings$pins4$alias","_settings$security$pa","_settings$security$pa2","_settings$security$pa3","_settings$preferences","_settings$preferences2","_settings$preferences3","_settings$preferences4","_settings$preferences5","_settings$preferences6","id","shortId","extensionId","host","accountId","personalMeetingName","allowJoinBeforeHost","preferences","joinBeforeHost","allowScreenSharing","screenSharing","isMeetingSecret","security","passwordProtected","meetingPassword","password","plainText","meetingPasswordMasked","joinQuery","meetingPasswordPSTN","isOnlyAuthUserJoin","noGuests","isOnlyCoworkersJoin","sameAccount","e2ee","muteAudio","join","audioMuted","muteVideo","videoMuted","waitingRoomMode","RCV_WAITING_ROOM_MODE","waitingRoomRequired","allowAnyoneRecord","recordings","everyoneCanControl","enabled","allowAnyoneTranscribe","allowEveryoneTranscribeMeetings","transformV1MeetingToV2","usePersonalMeetingId","result","enableWaitingRoom","RCV_WAITING_ROOM_MODE_REVERSE","enableE2EE","_initPersonalMeeting2","regeneratorRuntime","mark","_callee","meetingResult","meeting","_args","wrap","_callee$","_context","prev","next","undefined","_enablePersonalMeeting","abrupt","_deps","client","service","platform","get","concat","sent","json","_savePersonalMeeting","t0","console","error","_resetPersonalMeeting","stop","_initPersonalMeeting","_postBridges2","_callee2","meetingDetail","postData","resp","_callee2$","_context2","post","_postBridges","_x","_x2","_patchBridges2","_callee3","meetingId","body","_callee3$","_context3","send","method","url","_patchBridges","_x3","_x4","_x5","_getMeeting","_callee4","_callee4$","_context4","getMeeting","_x6","BaseRcVideo","proxify","getOwnPropertyDescriptor","exports"],"sources":["modules/RcVideoV2/RcVideoV2.ts"],"sourcesContent":["import type {\n  RcVideoAPI,\n  RcVideoAPIResponse,\n  RcVideoV2Api,\n  RcVideoV2PostData,\n} from '../../interfaces/Rcv.model';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport { RcVideo as BaseRcVideo } from '../RcVideo';\n\nimport {\n  RCV_WAITING_ROOM_MODE,\n  RCV_WAITING_ROOM_MODE_REVERSE,\n} from './constants';\n\nconst formatJoinUriWithPMN = (settings: RcVideoV2Api) => {\n  const joinUri = settings.discovery?.web;\n  const alias = settings.pins?.aliases?.[0];\n\n  if (settings.type === 'PMI' && alias) {\n    const pmiId = settings.pins?.pstn.participant;\n    return joinUri.replace(pmiId, alias);\n  }\n\n  return joinUri;\n};\n\n@Module({\n  name: 'RcVideo',\n  deps: [\n    'Alert',\n    'Client',\n    'Brand',\n    'Storage',\n    'AccountInfo',\n    'ExtensionInfo',\n    'VideoConfiguration',\n    'Locale',\n    'AppFeatures',\n    { dep: 'AvailabilityMonitor', optional: true },\n    { dep: 'RcVideoOptions', optional: true },\n  ],\n})\nexport class RcVideo extends BaseRcVideo {\n  // Convert the data structure of RcVideoV2 to RcVideoV1\n  transformV2ResponseToV1(\n    settings: RcVideoV2Api,\n  ): Partial<RcVideoAPIResponse | RcVideoAPI> {\n    return {\n      id: settings.id,\n      name: settings.name,\n      shortId: settings.pins?.pstn.participant,\n      extensionId: settings.host?.extensionId,\n      accountId: settings.host?.accountId,\n      type: 0,\n      personalMeetingName: settings.pins?.aliases?.[0],\n      allowJoinBeforeHost: settings.preferences.joinBeforeHost,\n      allowScreenSharing: settings.preferences.screenSharing,\n      isMeetingSecret: settings.security.passwordProtected,\n      meetingPassword: settings.security.password?.plainText,\n      meetingPasswordMasked: settings.security.password?.joinQuery,\n      meetingPasswordPSTN: settings.security.password?.pstn,\n      isOnlyAuthUserJoin: settings.security.noGuests,\n      isOnlyCoworkersJoin: settings.security.sameAccount,\n      e2ee: settings.security.e2ee,\n      joinUri: formatJoinUriWithPMN(settings),\n      muteAudio: settings.preferences.join?.audioMuted,\n      muteVideo: settings.preferences.join?.videoMuted,\n      waitingRoomMode:\n        RCV_WAITING_ROOM_MODE[settings.preferences.join?.waitingRoomRequired],\n      allowAnyoneRecord:\n        settings.preferences.recordings?.everyoneCanControl.enabled ?? false,\n      allowAnyoneTranscribe:\n        settings.preferences.allowEveryoneTranscribeMeetings ?? false,\n    };\n  }\n\n  transformV1MeetingToV2(\n    settings: RcVideoAPI,\n    usePersonalMeetingId: boolean,\n  ): RcVideoV2PostData {\n    const result: RcVideoV2PostData = {\n      name: settings.name,\n      type: usePersonalMeetingId ? 'PMI' : 'Scheduled',\n      security: {\n        passwordProtected: settings.isMeetingSecret,\n        password: settings.isMeetingSecret ? settings.meetingPassword! : '',\n        // If true, only authenticated users can join to a meeting.\n        noGuests: settings.isOnlyAuthUserJoin,\n        // If true, only users have the same account can join to a meeting.\n        sameAccount: settings.isOnlyCoworkersJoin,\n      },\n      preferences: {\n        join: {\n          audioMuted: settings.muteAudio,\n          videoMuted: settings.muteVideo,\n        },\n        joinBeforeHost: settings.allowJoinBeforeHost,\n        screenSharing: settings.allowScreenSharing,\n        allowEveryoneTranscribeMeetings: !!settings.allowAnyoneTranscribe,\n        recordings: {\n          everyoneCanControl: { enabled: !!settings.allowAnyoneRecord },\n        },\n      },\n    };\n    if (this.enableWaitingRoom) {\n      result.preferences.join.waitingRoomRequired =\n        RCV_WAITING_ROOM_MODE_REVERSE[settings.waitingRoomMode!];\n    }\n    if (this.enableE2EE) {\n      result.security.e2ee = settings.e2ee!;\n    }\n    if (usePersonalMeetingId) {\n      result.id = settings.id!;\n    }\n    return result;\n  }\n\n  override async _initPersonalMeeting(\n    accountId: number = this.accountId,\n    extensionId: number = this.extensionId,\n  ) {\n    if (!this._enablePersonalMeeting) {\n      return;\n    }\n    try {\n      const meetingResult = await this._deps.client.service\n        .platform()\n        .get(\n          `/rcvideo/v2/account/${accountId}/extension/${extensionId}/bridges/default`,\n        );\n      const meeting = (await meetingResult.json()) as RcVideoV2Api;\n      this._savePersonalMeeting(this.transformV2ResponseToV1(meeting));\n    } catch (errors) {\n      console.error('fetch personal meeting error:', errors);\n      this._resetPersonalMeeting();\n    }\n  }\n\n  @proxify\n  protected override async _postBridges(\n    meetingDetail: RcVideoAPI,\n    usePersonalMeetingId: boolean,\n  ) {\n    const postData = this.transformV1MeetingToV2(\n      meetingDetail,\n      usePersonalMeetingId,\n    );\n    const result = await this._deps.client.service\n      .platform()\n      .post(\n        `/rcvideo/v2/account/${meetingDetail.accountId}/extension/${meetingDetail.extensionId}/bridges`,\n        postData,\n      );\n    const resp = await result.json();\n    return this.transformV2ResponseToV1(resp);\n  }\n\n  @proxify\n  protected override async _patchBridges(\n    meetingId: string,\n    meetingDetail: RcVideoAPI,\n    usePersonalMeetingId: boolean,\n  ) {\n    const body = this.transformV1MeetingToV2(\n      meetingDetail,\n      usePersonalMeetingId,\n    );\n    const result = await this._deps.client.service.platform().send({\n      method: 'PATCH',\n      url: `/rcvideo/v2/bridges/${meetingId}`,\n      body,\n    });\n    const resp = await result.json();\n    return this.transformV2ResponseToV1(resp);\n  }\n\n  @proxify\n  override async getMeeting(shortId: string) {\n    const result = await this._deps.client.service\n      .platform()\n      .get(`/rcvideo/v2/bridges/pin/web/${shortId}`);\n    const meeting = await result.json();\n    return this.transformV2ResponseToV1(meeting) as RcVideoAPI;\n  }\n}\n"],"mappings":"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","ignoreList":[]}