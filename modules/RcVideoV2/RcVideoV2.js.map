{"version":3,"file":"RcVideoV2.js","names":["_di","require","_proxify","_RcVideo","_constants","_dec","_class","_class2","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","keys","forEach","initializer","slice","reverse","reduce","formatJoinUriWithPMN","settings","_settings$discovery","_settings$pins","_settings$pins$aliase","joinUri","discovery","web","alias","pins","aliases","type","_settings$pins2","pmiId","pstn","participant","replace","RcVideo","exports","Module","name","deps","dep","optional","_BaseRcVideo","transformV2ResponseToV1","_settings$pins3","_settings$host","_settings$host2","_settings$pins4","_settings$pins4$alias","_settings$security$pa","_settings$security$pa2","_settings$security$pa3","_settings$preferences","_settings$preferences2","_settings$preferences3","_settings$preferences4","_settings$preferences5","_settings$preferences6","id","shortId","extensionId","host","accountId","personalMeetingName","allowJoinBeforeHost","preferences","joinBeforeHost","allowScreenSharing","screenSharing","isMeetingSecret","security","passwordProtected","meetingPassword","password","plainText","meetingPasswordMasked","joinQuery","meetingPasswordPSTN","isOnlyAuthUserJoin","noGuests","isOnlyCoworkersJoin","sameAccount","e2ee","muteAudio","join","audioMuted","muteVideo","videoMuted","waitingRoomMode","RCV_WAITING_ROOM_MODE","waitingRoomRequired","allowAnyoneRecord","recordings","everyoneCanControl","enabled","allowAnyoneTranscribe","allowEveryoneTranscribeMeetings","transformV1MeetingToV2","usePersonalMeetingId","result","enableWaitingRoom","RCV_WAITING_ROOM_MODE_REVERSE","enableE2EE","_initPersonalMeeting2","_callee","meetingResult","meeting","_args","_t","_context","undefined","_enablePersonalMeeting","_deps","client","service","platform","get","concat","json","_savePersonalMeeting","console","error","_resetPersonalMeeting","_initPersonalMeeting","_postBridges2","_callee2","meetingDetail","postData","resp","_context2","post","_postBridges","_x","_x2","_patchBridges2","_callee3","meetingId","body","_context3","send","method","url","_patchBridges","_x3","_x4","_x5","_getMeeting","_callee4","_context4","getMeeting","_x6","BaseRcVideo","proxify","getOwnPropertyDescriptor"],"sources":["modules/RcVideoV2/RcVideoV2.ts"],"sourcesContent":["import type {\n  RcVideoAPI,\n  RcVideoAPIResponse,\n  RcVideoV2Api,\n  RcVideoV2PostData,\n} from '../../interfaces/Rcv.model';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport { RcVideo as BaseRcVideo } from '../RcVideo';\n\nimport {\n  RCV_WAITING_ROOM_MODE,\n  RCV_WAITING_ROOM_MODE_REVERSE,\n} from './constants';\n\nconst formatJoinUriWithPMN = (settings: RcVideoV2Api) => {\n  const joinUri = settings.discovery?.web;\n  const alias = settings.pins?.aliases?.[0];\n\n  if (settings.type === 'PMI' && alias) {\n    const pmiId = settings.pins?.pstn.participant;\n    return joinUri.replace(pmiId, alias);\n  }\n\n  return joinUri;\n};\n\n@Module({\n  name: 'RcVideo',\n  deps: [\n    'Alert',\n    'Client',\n    'Brand',\n    'Storage',\n    'AccountInfo',\n    'ExtensionInfo',\n    'VideoConfiguration',\n    'Locale',\n    'AppFeatures',\n    { dep: 'AvailabilityMonitor', optional: true },\n    { dep: 'RcVideoOptions', optional: true },\n  ],\n})\nexport class RcVideo extends BaseRcVideo {\n  // Convert the data structure of RcVideoV2 to RcVideoV1\n  transformV2ResponseToV1(\n    settings: RcVideoV2Api,\n  ): Partial<RcVideoAPIResponse | RcVideoAPI> {\n    return {\n      id: settings.id,\n      name: settings.name,\n      shortId: settings.pins?.pstn.participant,\n      extensionId: settings.host?.extensionId,\n      accountId: settings.host?.accountId,\n      type: 0,\n      personalMeetingName: settings.pins?.aliases?.[0],\n      allowJoinBeforeHost: settings.preferences.joinBeforeHost,\n      allowScreenSharing: settings.preferences.screenSharing,\n      isMeetingSecret: settings.security.passwordProtected,\n      meetingPassword: settings.security.password?.plainText,\n      meetingPasswordMasked: settings.security.password?.joinQuery,\n      meetingPasswordPSTN: settings.security.password?.pstn,\n      isOnlyAuthUserJoin: settings.security.noGuests,\n      isOnlyCoworkersJoin: settings.security.sameAccount,\n      e2ee: settings.security.e2ee,\n      joinUri: formatJoinUriWithPMN(settings),\n      muteAudio: settings.preferences.join?.audioMuted,\n      muteVideo: settings.preferences.join?.videoMuted,\n      waitingRoomMode:\n        RCV_WAITING_ROOM_MODE[settings.preferences.join?.waitingRoomRequired],\n      allowAnyoneRecord:\n        settings.preferences.recordings?.everyoneCanControl.enabled ?? false,\n      allowAnyoneTranscribe:\n        settings.preferences.allowEveryoneTranscribeMeetings ?? false,\n    };\n  }\n\n  transformV1MeetingToV2(\n    settings: RcVideoAPI,\n    usePersonalMeetingId: boolean,\n  ): RcVideoV2PostData {\n    const result: RcVideoV2PostData = {\n      name: settings.name,\n      type: usePersonalMeetingId ? 'PMI' : 'Scheduled',\n      security: {\n        passwordProtected: settings.isMeetingSecret,\n        password: settings.isMeetingSecret ? settings.meetingPassword! : '',\n        // If true, only authenticated users can join to a meeting.\n        noGuests: settings.isOnlyAuthUserJoin,\n        // If true, only users have the same account can join to a meeting.\n        sameAccount: settings.isOnlyCoworkersJoin,\n      },\n      preferences: {\n        join: {\n          audioMuted: settings.muteAudio,\n          videoMuted: settings.muteVideo,\n        },\n        joinBeforeHost: settings.allowJoinBeforeHost,\n        screenSharing: settings.allowScreenSharing,\n        allowEveryoneTranscribeMeetings: !!settings.allowAnyoneTranscribe,\n        recordings: {\n          everyoneCanControl: { enabled: !!settings.allowAnyoneRecord },\n        },\n      },\n    };\n    if (this.enableWaitingRoom) {\n      result.preferences.join.waitingRoomRequired =\n        RCV_WAITING_ROOM_MODE_REVERSE[settings.waitingRoomMode!];\n    }\n    if (this.enableE2EE) {\n      result.security.e2ee = settings.e2ee!;\n    }\n    if (usePersonalMeetingId) {\n      result.id = settings.id!;\n    }\n    return result;\n  }\n\n  override async _initPersonalMeeting(\n    accountId: number = this.accountId,\n    extensionId: number = this.extensionId,\n  ) {\n    if (!this._enablePersonalMeeting) {\n      return;\n    }\n    try {\n      const meetingResult = await this._deps.client.service\n        .platform()\n        .get(\n          `/rcvideo/v2/account/${accountId}/extension/${extensionId}/bridges/default`,\n        );\n      const meeting = (await meetingResult.json()) as RcVideoV2Api;\n      this._savePersonalMeeting(this.transformV2ResponseToV1(meeting));\n    } catch (errors) {\n      console.error('fetch personal meeting error:', errors);\n      this._resetPersonalMeeting();\n    }\n  }\n\n  @proxify\n  protected override async _postBridges(\n    meetingDetail: RcVideoAPI,\n    usePersonalMeetingId: boolean,\n  ) {\n    const postData = this.transformV1MeetingToV2(\n      meetingDetail,\n      usePersonalMeetingId,\n    );\n    const result = await this._deps.client.service\n      .platform()\n      .post(\n        `/rcvideo/v2/account/${meetingDetail.accountId}/extension/${meetingDetail.extensionId}/bridges`,\n        postData,\n      );\n    const resp = await result.json();\n    return this.transformV2ResponseToV1(resp);\n  }\n\n  @proxify\n  protected override async _patchBridges(\n    meetingId: string,\n    meetingDetail: RcVideoAPI,\n    usePersonalMeetingId: boolean,\n  ) {\n    const body = this.transformV1MeetingToV2(\n      meetingDetail,\n      usePersonalMeetingId,\n    );\n    const result = await this._deps.client.service.platform().send({\n      method: 'PATCH',\n      url: `/rcvideo/v2/bridges/${meetingId}`,\n      body,\n    });\n    const resp = await result.json();\n    return this.transformV2ResponseToV1(resp);\n  }\n\n  @proxify\n  override async getMeeting(shortId: string) {\n    const result = await this._deps.client.service\n      .platform()\n      .get(`/rcvideo/v2/bridges/pin/web/${shortId}`);\n    const meeting = await result.json();\n    return this.transformV2ResponseToV1(meeting) as RcVideoAPI;\n  }\n}\n"],"mappings":"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","ignoreList":[]}