{"version":3,"sources":["modules/RcVideoV2/videoHelper.ts"],"names":["meetingProviderTypes","meeting","video","RcVideoTypes","call","RCV_CREATE_API_KEYS","RCV_WAITING_ROOM_API_KEYS","RCV_E2EE_API_KEYS","RCV_PREFERENCES_IDS","RCV_PREFERENCES_KEYS","RCV_E2EE_RELATED_KEYS","RCV_E2EE_DEFAULT_SECURITY_OPTIONS","allowJoinBeforeHost","isMeetingSecret","isOnlyAuthUserJoin","isOnlyCoworkersJoin","waitingRoomMode","RCV_WAITING_ROOM_MODE","notcoworker","getDefaultChars","DEFAULT_PASSWORD_CHARSET","validateRandomPassword","pwd","test","generateRandomPassword","length","charset","charLen","retVal","i","charAt","Math","floor","random","validatePasswordSettings","meetingPassword","RCV_PASSWORD_REGEX","getVideoSettings","data","name","params","settings","type","expiresIn","getDefaultVideoSettings","topic","accountId","extensionId","e2ee","muteAudio","muteVideo","allowScreenSharing","off","settingLock","startTime","Date","duration","saveAsDefault","isMeetingPasswordValid","usePersonalMeetingId","getTopic","extensionName","brandName","shortName","fullName","brandCode","currentLocale","i18n","getString","pruneMeetingObject","omitArr","meetingDetail","forEach","condition","key","transformPreferences","preferences","isInstantMeeting","join_before_host","password_instant","password_scheduled","guest_join","join_authenticated_from_account_only","screen_sharing_host_only","waiting_room","waiting_room_guests_only","transformSettingLocks","settingLocks","reversePreferences","result","RCV_WAITING_ROOM_MODE_REVERSE","prunePreferencesObject","comparePreferences","preferencesChanged","Object","keys","settingKey","assignValue","a","b","assignObject","getLockedPreferences","lockedPreferences","entries","locked","getAvaliableWaitingRoomOpions","all","patchWaitingRoomRelated","isUpdatingMode","processedSettings","includes","formatMainPhoneNumber","dialInNumber","undefined","phoneNumber","formatPremiumNumbers","obj","locationField","country","location"],"mappings":"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","sourcesContent":["import { map, omit, pick } from 'ramda';\nimport formatMessage from 'format-message';\nimport i18n from './i18n';\nimport {\n  MeetingProviderTypesProps,\n  RcVideoTypesProps,\n  RcVMeetingModel,\n  RcvGSuiteMeetingModel,\n  RcVideoAPI,\n  RcVSettingId,\n  RcVPreferencesGET,\n  RcVSettingLocksGET,\n  RcVSettingKey,\n  RcVPreferences,\n  RcVSettingLocks,\n  RcVDialInNumberObj,\n} from '../../interfaces/Rcv.model';\nimport {\n  RCV_WAITING_ROOM_MODE,\n  RCV_WAITING_ROOM_API_KEYS,\n  RCV_WAITING_ROOM_MODE_REVERSE,\n  RCV_PASSWORD_REGEX,\n  RCV_E2EE_API_KEYS,\n} from './constants';\nimport { TopicProps } from './RcVideo.interface';\n\n/* TODO: this meetingProviderTypes is only used for calender-addon\n * if you want to use meetingProviderTypes\n * please turn to use MeetingProvider/interface\n */\nconst meetingProviderTypes: MeetingProviderTypesProps = {\n  meeting: 'RCMeetings',\n  video: 'RCVideo',\n};\n\nconst RcVideoTypes: RcVideoTypesProps = {\n  meeting: 0, // schedule\n  call: 1, // instant meeting\n};\n\nconst RCV_CREATE_API_KEYS: Array<keyof RcVideoAPI> = [\n  'name',\n  'type',\n  'startTime',\n  'expiresIn',\n  'duration',\n  'accountId',\n  'extensionId',\n  'allowJoinBeforeHost',\n  'muteAudio',\n  'muteVideo',\n  'isMeetingSecret',\n  'meetingPassword',\n  'isOnlyAuthUserJoin',\n  'isOnlyCoworkersJoin',\n  'allowScreenSharing',\n  RCV_WAITING_ROOM_API_KEYS,\n  RCV_E2EE_API_KEYS,\n];\n\nconst RCV_PREFERENCES_IDS: Array<RcVSettingId> = [\n  'e2ee',\n  'join_before_host',\n  // 'join_video_off',\n  // 'join_audio_mute',\n  'password_scheduled',\n  'password_instant',\n  'guest_join',\n  'join_authenticated_from_account_only',\n  'screen_sharing_host_only',\n  'waiting_room_guests_only',\n  'waiting_room',\n];\n\nconst RCV_PREFERENCES_KEYS: Array<RcVSettingKey> = [\n  'allowJoinBeforeHost',\n  // 'muteVideo',\n  // 'muteAudio',\n  'isMeetingSecret',\n  'isOnlyAuthUserJoin',\n  'isOnlyCoworkersJoin',\n  'allowScreenSharing',\n  RCV_WAITING_ROOM_API_KEYS,\n  RCV_E2EE_API_KEYS,\n];\n\nconst RCV_E2EE_RELATED_KEYS: Array<RcVSettingKey> = [\n  'allowJoinBeforeHost',\n  'isMeetingSecret',\n  'isOnlyAuthUserJoin',\n  'isOnlyCoworkersJoin',\n  RCV_WAITING_ROOM_API_KEYS,\n];\n\nconst RCV_E2EE_DEFAULT_SECURITY_OPTIONS: Partial<RcVideoAPI> = {\n  allowJoinBeforeHost: false,\n  isMeetingSecret: true,\n  isOnlyAuthUserJoin: true,\n  isOnlyCoworkersJoin: false,\n  waitingRoomMode: RCV_WAITING_ROOM_MODE.notcoworker,\n} as const;\n\n/* RCINT-14566\n * Exclude characters that are hard to visually differentiate [\"0\", \"o\", \"O\", \"I\", \"l\"]\n */\nfunction getDefaultChars(): string {\n  const DEFAULT_PASSWORD_CHARSET =\n    'abcdefghijkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ123456789';\n  return DEFAULT_PASSWORD_CHARSET;\n}\n\nfunction validateRandomPassword(pwd: string): boolean {\n  return /^(?=.*\\d)(?=.*[A-Z])(?=.*[a-z])[A-Za-z0-9]*$/.test(pwd);\n}\n\nfunction generateRandomPassword(length: number = 10): string {\n  const charset = getDefaultChars();\n  const charLen = charset.length;\n  let retVal = '';\n  for (let i = 0; i < length; i++) {\n    retVal += charset.charAt(Math.floor(Math.random() * charLen));\n  }\n  if (!validateRandomPassword(retVal)) {\n    return generateRandomPassword(length);\n  }\n  return retVal;\n}\n\nfunction validatePasswordSettings(\n  meetingPassword: string,\n  isMeetingSecret: boolean,\n): boolean {\n  if (!isMeetingSecret) {\n    return true;\n  }\n  if (meetingPassword && RCV_PASSWORD_REGEX.test(meetingPassword)) {\n    return true;\n  }\n  return false;\n}\n\n// gsuite\nfunction getVideoSettings(data: RcVideoAPI): RcvGSuiteMeetingModel {\n  const {\n    name = 'Scheduled meeting',\n    isMeetingSecret,\n    meetingPassword,\n    ...params\n  } = data;\n  const settings: RcvGSuiteMeetingModel = {\n    ...params,\n    name,\n    type: RcVideoTypes.meeting,\n    expiresIn: 31536000,\n  };\n\n  if (isMeetingSecret) {\n    settings.isMeetingSecret = true;\n    settings.meetingPassword = meetingPassword;\n  } else {\n    settings.isMeetingSecret = false;\n    settings.meetingPassword = '';\n  }\n\n  return settings;\n}\n\nfunction getDefaultVideoSettings({\n  topic,\n  accountId,\n  extensionId,\n}: {\n  topic: string;\n  accountId: string;\n  extensionId: string;\n}): RcVMeetingModel {\n  return {\n    // api fields\n    accountId,\n    extensionId,\n    name: topic,\n    type: RcVideoTypes.meeting,\n    expiresIn: 31536000,\n    e2ee: false,\n    allowJoinBeforeHost: false,\n    muteAudio: false,\n    muteVideo: false,\n    isMeetingSecret: true,\n    meetingPassword: '',\n    isOnlyAuthUserJoin: false,\n    isOnlyCoworkersJoin: false,\n    allowScreenSharing: true,\n    waitingRoomMode: RCV_WAITING_ROOM_MODE.off,\n    settingLock: {\n      allowJoinBeforeHost: false,\n      // muteVideo: false,\n      // muteAudio: false,\n      isMeetingSecret: false,\n      isOnlyAuthUserJoin: false,\n      isOnlyCoworkersJoin: false,\n      allowScreenSharing: false,\n      waitingRoomMode: false,\n      e2ee: false,\n    },\n    // ui fields\n    startTime: new Date(),\n    duration: 60,\n    saveAsDefault: false,\n    isMeetingPasswordValid: false,\n    usePersonalMeetingId: false,\n  };\n}\n\nfunction getTopic({\n  extensionName,\n  brandName,\n  shortName,\n  fullName,\n  brandCode,\n  currentLocale,\n}: TopicProps) {\n  switch (brandCode) {\n    case 'telus':\n      return formatMessage(i18n.getString('TelusVideoMeeting', currentLocale), {\n        extensionName,\n      });\n    case 'att':\n      return formatMessage(\n        i18n.getString('videoMeetingWithBrand', currentLocale),\n        {\n          extensionName,\n          brandName: fullName,\n        },\n      );\n    case 'bt':\n      brandName = shortName;\n    // eslint-disable-next-line\n    default:\n      return formatMessage(i18n.getString('videoMeeting', currentLocale), {\n        extensionName,\n        brandName,\n      });\n  }\n}\n\n/**\n * Remove client side properties before sending to RCV API\n */\nfunction pruneMeetingObject(\n  meeting: RcVMeetingModel,\n  omitArr: Array<{\n    condition: boolean;\n    key: keyof RcVideoAPI;\n  }>,\n): RcVideoAPI {\n  let meetingDetail = pick(RCV_CREATE_API_KEYS, meeting);\n  omitArr.forEach(({ condition, key }) => {\n    if (!condition) {\n      meetingDetail = omit([key], meetingDetail) as RcVideoAPI;\n    }\n  });\n  return meetingDetail;\n}\n\nfunction transformPreferences(\n  preferences: RcVPreferencesGET,\n  isInstantMeeting = false,\n): RcVPreferences {\n  return {\n    allowJoinBeforeHost: preferences.join_before_host,\n    // muteVideo: preferences.join_video_off,\n    // muteAudio: preferences.join_audio_mute,\n    e2ee: preferences.e2ee,\n    isMeetingSecret: isInstantMeeting\n      ? preferences.password_instant\n      : preferences.password_scheduled,\n    isOnlyAuthUserJoin: preferences.guest_join,\n    isOnlyCoworkersJoin: preferences.guest_join\n      ? preferences.join_authenticated_from_account_only === 'only_co_workers'\n      : false,\n    allowScreenSharing: preferences.screen_sharing_host_only === 'all',\n    waitingRoomMode: preferences.waiting_room\n      ? RCV_WAITING_ROOM_MODE[preferences.waiting_room_guests_only]\n      : RCV_WAITING_ROOM_MODE.off,\n  };\n}\n\nfunction transformSettingLocks(\n  settingLocks: RcVSettingLocksGET,\n  isInstantMeeting = false,\n): RcVSettingLocks {\n  return {\n    allowJoinBeforeHost: settingLocks.join_before_host,\n    // muteVideo: settingLocks.join_video_off,\n    // muteAudio: settingLocks.join_audio_mute,\n    e2ee: settingLocks.e2ee,\n    isMeetingSecret: isInstantMeeting\n      ? settingLocks.password_instant\n      : settingLocks.password_scheduled,\n    isOnlyAuthUserJoin: settingLocks.guest_join,\n    isOnlyCoworkersJoin: settingLocks.join_authenticated_from_account_only,\n    allowScreenSharing: settingLocks.screen_sharing_host_only,\n    waitingRoomMode: settingLocks.waiting_room,\n  };\n}\n\nfunction reversePreferences(\n  preferences: RcVPreferences,\n  isInstantMeeting = false,\n): Partial<RcVPreferencesGET> {\n  const result: Partial<RcVPreferencesGET> = {\n    join_before_host: preferences.allowJoinBeforeHost,\n    // join_video_off: preferences.muteVideo,\n    // join_audio_mute: preferences.muteAudio,\n    guest_join: preferences.isOnlyAuthUserJoin,\n    join_authenticated_from_account_only: preferences.isOnlyCoworkersJoin\n      ? 'only_co_workers'\n      : 'anyone_signed_into_rc',\n    screen_sharing_host_only: preferences.allowScreenSharing ? 'all' : 'host',\n    waiting_room: !!preferences.waitingRoomMode,\n    waiting_room_guests_only:\n      RCV_WAITING_ROOM_MODE_REVERSE[preferences.waitingRoomMode],\n    e2ee: preferences.e2ee,\n  };\n  if (isInstantMeeting) {\n    result.password_instant = preferences.isMeetingSecret;\n  } else {\n    result.password_scheduled = preferences.isMeetingSecret;\n  }\n  return result;\n}\n\n/**\n * Reserve only preferences fields\n */\nfunction prunePreferencesObject(meeting: RcVMeetingModel): RcVPreferences {\n  return pick(RCV_PREFERENCES_KEYS, meeting);\n}\n\nfunction comparePreferences(\n  preferences: RcVPreferences,\n  meeting: RcVMeetingModel,\n): boolean {\n  let preferencesChanged = false;\n  if (preferences && meeting) {\n    for (const key of Object.keys(preferences)) {\n      const settingKey = key as RcVSettingKey;\n      if (preferences[settingKey] !== meeting[settingKey]) {\n        preferencesChanged = true;\n        break;\n      }\n    }\n  }\n  return preferencesChanged;\n}\n\nfunction assignValue<T, K extends keyof T>(a: T, b: T, key: K) {\n  a[key] = b[key];\n}\n\nfunction assignObject<T, P extends T[K], K extends keyof T>(\n  a: T,\n  b: P,\n  key: K,\n) {\n  a[key] = b;\n}\n\nfunction getLockedPreferences(\n  settingLocks: RcVSettingLocks,\n  preferences: RcVPreferences,\n): Partial<RcVPreferences> {\n  const lockedPreferences: Partial<RcVPreferences> = {};\n  for (const [key, locked] of Object.entries(settingLocks)) {\n    if (locked) {\n      const settingKey = key as RcVSettingKey;\n      assignValue(lockedPreferences, preferences, settingKey);\n    }\n  }\n  return lockedPreferences;\n}\n\nfunction getAvaliableWaitingRoomOpions(\n  isOnlyCoworkersJoin: boolean,\n): Array<number> {\n  return isOnlyCoworkersJoin\n    ? [RCV_WAITING_ROOM_MODE.off, RCV_WAITING_ROOM_MODE.all]\n    : [\n        RCV_WAITING_ROOM_MODE.off,\n        RCV_WAITING_ROOM_MODE.all,\n        RCV_WAITING_ROOM_MODE.notcoworker,\n      ];\n}\n\nfunction patchWaitingRoomRelated(\n  settings: RcVMeetingModel,\n  { waitingRoomMode }: RcVPreferences,\n  isUpdatingMode: boolean = false,\n): Partial<RcVMeetingModel> {\n  const processedSettings: Partial<RcVMeetingModel> = {};\n  if (settings.isOnlyAuthUserJoin) {\n    // for pmi setting, waitingRoom, joinAfterMe option maybe not avaliable\n    if (\n      !getAvaliableWaitingRoomOpions(settings.isOnlyCoworkersJoin).includes(\n        settings.waitingRoomMode,\n      )\n    ) {\n      processedSettings.waitingRoomMode = isUpdatingMode\n        ? RCV_WAITING_ROOM_MODE.all\n        : waitingRoomMode;\n    }\n  }\n  // when waitingRoom is 'everyone', joinAfterMe should be always checked\n  if (\n    (processedSettings.waitingRoomMode === RCV_WAITING_ROOM_MODE.all ||\n      settings.waitingRoomMode === RCV_WAITING_ROOM_MODE.all) &&\n    settings.allowJoinBeforeHost\n  ) {\n    processedSettings.allowJoinBeforeHost = false;\n  }\n  return processedSettings;\n}\n\nfunction formatMainPhoneNumber(\n  dialInNumber: string | RcVDialInNumberObj[],\n): string {\n  if (typeof dialInNumber === 'string') {\n    return dialInNumber;\n  }\n\n  if (!dialInNumber || dialInNumber.length === 0) {\n    return undefined;\n  }\n\n  return dialInNumber[0].phoneNumber;\n}\n\nfunction formatPremiumNumbers(\n  dialInNumber: string | RcVDialInNumberObj[],\n): string[] {\n  if (typeof dialInNumber === 'string') {\n    return [dialInNumber];\n  }\n\n  if (!dialInNumber || dialInNumber.length === 0) {\n    return [];\n  }\n\n  return map((obj) => {\n    const locationField =\n      obj?.country?.name && obj.location\n        ? `${obj.country.name} (${obj.location})`\n        : obj?.country?.name || '';\n\n    return `${obj.phoneNumber} ${locationField}`;\n  }, dialInNumber);\n}\n\n// TODO: will remove this when google app script could support export seperately\n// export together because google app script not fully support export\nexport {\n  RCV_PREFERENCES_IDS,\n  RCV_PREFERENCES_KEYS,\n  RCV_E2EE_RELATED_KEYS,\n  RcVideoTypes,\n  meetingProviderTypes,\n  RCV_E2EE_DEFAULT_SECURITY_OPTIONS,\n  assignObject,\n  getDefaultChars,\n  validateRandomPassword,\n  generateRandomPassword,\n  validatePasswordSettings,\n  getVideoSettings,\n  getDefaultVideoSettings,\n  getTopic,\n  pruneMeetingObject,\n  transformPreferences,\n  reversePreferences,\n  prunePreferencesObject,\n  comparePreferences,\n  transformSettingLocks,\n  getLockedPreferences,\n  patchWaitingRoomRelated,\n  formatMainPhoneNumber,\n  formatPremiumNumbers,\n};\n"],"file":"videoHelper.js"}