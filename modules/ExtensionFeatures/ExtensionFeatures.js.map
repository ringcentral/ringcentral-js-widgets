{"version":3,"file":"ExtensionFeatures.js","names":["_core","require","_ramda","_permissionsMessages","_subscriptionFilters","_subscriptionHints","_di","_Auth","_DataFetcherV","_dec","_dec2","_class","_class2","_slicedToArray","r","e","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","length","n","l","Symbol","iterator","i","u","f","o","next","Object","done","push","value","isArray","_regenerator","toStringTag","c","prototype","Generator","create","_regeneratorDefine2","p","y","G","v","d","bind","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","initializer","reverse","reduce","ExtensionFeatures","exports","Module","deps","dep","optional","computed","_ref","data","_DataFetcherV2Consume","_deps$extensionFeatur","_deps$extensionFeatur2","_this$_deps$subscript","_this","_stopWatchingSubscription","_handleSubscription","message","_this$_deps$tabManage","_this$_deps$tabManage2","_message$body","ready","_source","disableCache","_deps","tabManager","active","body","hints","includes","subscriptionHints","limits","features","permissions","fetchData","DataSource","polling","extensionFeaturesOptions","cleanOnReset","fetchFunction","_fetchFunction","_callee","response","_response","_t","_context","client","service","platform","get","json","status","auth","logout","alert","danger","permissionsMessages","insufficientPrivilege","ttl","readyCheckFunction","dataFetcherV2","register","subscription","filters","subscriptionFilters","extensionInfo","onInitOnce","_this2","watch","_this2$features","_this2$features$ReadE","ReadExtensionInfo","available","loginStatus","loggedIn","_ref3","_callee2","_ref2","_ref4","hasData","readExtensionInfo","_context2","_x","multiple","onInit","_this3","onReset","_this$_stopWatchingSu","_this$data$records","_this$data","item","id","records","DataFetcherV2Consumer"],"sources":["modules/ExtensionFeatures/ExtensionFeatures.ts"],"sourcesContent":["import type ExtensionInfoEvent from '@rc-ex/core/lib/definitions/ExtensionInfoEvent';\nimport type FeatureInfo from '@rc-ex/core/lib/definitions/FeatureInfo';\nimport type FeatureList from '@rc-ex/core/lib/definitions/FeatureList';\nimport { computed, watch } from '@ringcentral-integration/core';\nimport { reduce } from 'ramda';\nimport type { Unsubscribe } from 'redux';\n\nimport { permissionsMessages } from '../../enums/permissionsMessages';\nimport { subscriptionFilters } from '../../enums/subscriptionFilters';\nimport { subscriptionHints } from '../../enums/subscriptionHints';\nimport { Module } from '../../lib/di';\nimport { loginStatus } from '../Auth';\nimport { DataFetcherV2Consumer, DataSource } from '../DataFetcherV2';\n\nimport type { Deps } from './ExtensionFeatures.interface';\n\n@Module({\n  name: 'ExtensionFeatures',\n  deps: [\n    'Auth',\n    'Alert',\n    'Client',\n    'DataFetcherV2',\n    { dep: 'Subscription', optional: true },\n    { dep: 'TabManager', optional: true },\n    { dep: 'ExtensionFeaturesOptions', optional: true },\n  ],\n})\nexport class ExtensionFeatures extends DataFetcherV2Consumer<\n  Deps,\n  FeatureList\n> {\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Unsubscribe... Remove this comment to see the full error message\n  protected _stopWatchingSubscription: Unsubscribe = null;\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n\n    this._source = new DataSource({\n      polling: deps.extensionFeaturesOptions?.polling ?? true,\n      ...deps.extensionFeaturesOptions,\n      key: 'extensionFeatures',\n      cleanOnReset: true,\n      fetchFunction: async () => {\n        try {\n          const response = await this._deps.client.service\n            .platform()\n            .get('/restapi/v1.0/account/~/extension/~/features');\n          return response.json();\n        } catch (error: any /** TODO: confirm with instanceof */) {\n          if ((error as { response?: Response }).response?.status === 403) {\n            await this._deps.auth.logout();\n            this._deps.alert.danger({\n              message: permissionsMessages.insufficientPrivilege,\n              ttl: 0,\n            });\n            return {};\n          }\n          throw error;\n        }\n      },\n      readyCheckFunction: () => true,\n    });\n    this._deps.dataFetcherV2.register(this._source);\n\n    this._deps.subscription?.register(this, {\n      filters: [subscriptionFilters.extensionInfo],\n    });\n  }\n\n  protected _handleSubscription = (message?: ExtensionInfoEvent) => {\n    if (\n      this.ready &&\n      (this._source.disableCache || (this._deps.tabManager?.active ?? true)) &&\n      message?.body?.hints &&\n      (message.body.hints.includes(subscriptionHints.limits) ||\n        message.body.hints.includes(subscriptionHints.features) ||\n        message.body.hints.includes(subscriptionHints.permissions))\n    ) {\n      this.fetchData();\n    }\n  };\n\n  override onInitOnce() {\n    watch(\n      this,\n      () => [\n        this.ready,\n        !!this.data,\n        !!this.features?.ReadExtensionInfo?.available,\n        this._deps.auth.loginStatus === loginStatus.loggedIn,\n      ],\n      async ([ready, hasData, readExtensionInfo, loggedIn]) => {\n        if (ready && loggedIn && !readExtensionInfo) {\n          await this._deps.auth.logout();\n          if (hasData) {\n            // only show alert if featuresList was successfully fetched,\n            // but the user has no ReadExtensionInfo feature\n            this._deps.alert.danger({\n              message: permissionsMessages.insufficientPrivilege,\n              ttl: 0,\n            });\n          }\n        }\n      },\n      {\n        multiple: true,\n      },\n    );\n  }\n\n  override onInit() {\n    if (this._deps.subscription) {\n      this._stopWatchingSubscription = watch(\n        this,\n        () =>\n          this._deps.subscription!.message as ExtensionInfoEvent | undefined,\n        this._handleSubscription,\n      );\n    }\n  }\n\n  override onReset() {\n    this._stopWatchingSubscription?.();\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Unsubscribe... Remove this comment to see the full error message\n    this._stopWatchingSubscription = null;\n  }\n\n  @computed(({ data }: ExtensionFeatures) => [data])\n  get features() {\n    return reduce(\n      (features, item) => {\n        if (item && item.id) features[item.id] = item;\n        return features;\n      },\n      {} as Record<string, FeatureInfo>,\n      this.data?.records ?? [],\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}