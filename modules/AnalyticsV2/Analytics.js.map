{"version":3,"file":"Analytics.js","names":["_core","require","_utils","_mixpanelBrowser","_interopRequireDefault","_Analytics","_di","_proxify","_saveBlob","_analyticsRouters","_dec","_dec2","_class","_class2","e","__esModule","ownKeys","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_objectWithoutProperties","i","_objectWithoutPropertiesLoose","n","indexOf","propertyIsEnumerable","call","hasOwnProperty","asyncGeneratorStep","a","c","u","done","Promise","resolve","then","_asyncToGenerator","_next","_throw","_classCallCheck","TypeError","_defineProperties","key","_createClass","prototype","_toPrimitive","_typeof","Symbol","toPrimitive","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","__proto__","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","l","initializer","slice","reverse","reduce","Analytics","Module","name","deps","dep","optional","computed","that","_that$_deps$accountIn","_that$_deps$extension","_that$_deps$extension2","_deps","brand","brandConfig","accountInfo","id","extensionInfo","country","extensionFeatures","features","_ref","_super","_this$_deps$analytics","_this$_deps$analytics2","_this$_deps$analytics3","_this$_deps$analytics4","_this$_deps$analytics5","_this$_deps$analytics6","_this$_deps$analytics7","_this$_deps$analytics8","_this$_deps$analytics9","_this","appInitTime","Date","now","_useLog","analyticsOptions","useLog","_lingerThreshold","lingerThreshold","_enablePendo","enablePendo","_analyticsKey","analyticsKey","_enableMixpanel","enableMixpanel","_pendoApiKey","pendoApiKey","_trackRouters","trackRouters","_segment","_logs","_lingerTimeout","_pendo","_waitPendoCount","_pendoTimeout","_env","env","_eventExtendedPropsMap","Map","_useLocalPendoJS","useLocalPendoJS","_useLocalAnalyticsJS","useLocalAnalyticsJS","_identifyMixpanelPromise","_identifyMixpanelResolve","_OSInfo","getOsInfo","Segment","mixpanel","init","set_config","ip","console","log","Pendo","pendoInstance","onInitOnce","_this2","load","integrations","All","Mixpanel","routerInteraction","watch","currentPath","trackRouter","_trackRouter","regeneratorRuntime","mark","_callee","_this$_deps$routerInt","_this3","target","_args","wrap","_callee$","_context","prev","next","undefined","getTrackTarget","trackNavigation","clearTimeout","setTimeout","_this3$_deps$routerIn","trackLinger","stop","setUserId","_identify","userId","auth","ownerId","identify","options","_ref2","props","_mixpanelInitialize","analytics","_pendoInitialize","_ref3","_mixpanel$get_distinc","_this$_identifyMixpan","get_distinct_id","pendoIdentify","_ref4","_ref5","_this4","_this$_deps$accountIn","_this$_deps$accountIn2","_this$_deps$accountIn3","_this$_deps$accountIn4","initializeFunc","isReady","initialize","updateOptions","pendoAgent","visitor","appName","defaultConfig","appVersion","appBrand","code","plaBrand","serviceInfo","countryCode","account","concat","_track","_callee2","event","_this$_pendo","_this$_pendo$isReady","properties","trackProps","_this$_deps$auth","_args2","_callee2$","_context2","abrupt","extendedProps","get","process","NODE_ENV","track","mock","Error","t0","timeStamp","toISOString","_x","downloadLogs","blob","Blob","JSON","stringify","type","saveBlob","_ref6","router","eventPostfix","_ref7","_this$_deps$routerInt2","routes","split","formatRoute","needMatchSecondRoutes","find","addEventsExtendedProps","_ref8","_this5","events","error","oldValue","set","toggleDebug","debug","get_config","global","_this$_deps$accountIn5","_this$_deps$accountIn6","_this$_deps$accountIn7","_this$_deps$accountIn8","_this$_deps$extension","_features$RingOut","_features$WebPhone","_features$PagesReceiv","_features$SMSReceivin","_features$FaxReceivin","_features$Glip","userInfo","BrandId","AccountID","BrandName","CRMEnabled","isCRMEnabled","servicePlanId","servicePlan","edition","isCallingEnabled","RingOut","available","WebPhone","hasSmsPermission","PagesReceiving","SMSReceiving","hasFaxPermission","FaxReceiving","hasGlipPermission","Glip","_ref9","_this$_deps$locale","_this$_deps$locale2","_this$_deps$extension2","trackedUserInfo","locale","currentLocale","browserLocale","info","environment","allowDataTracking","RcModuleV2","proxify","exports"],"sources":["modules/AnalyticsV2/Analytics.ts"],"sourcesContent":["import { computed, RcModuleV2, watch } from '@ringcentral-integration/core';\nimport type { IAnalytics } from '@ringcentral-integration/core/lib/track';\nimport { getOsInfo } from '@ringcentral-integration/utils';\nimport mixpanel from 'mixpanel-browser';\n\nimport { Pendo, Segment } from '../../lib/Analytics';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport saveBlob from '../../lib/saveBlob';\n\nimport type {\n  Deps,\n  IdentifyOptions,\n  IExtendedProps,\n  PendoAgent,\n  TrackLog,\n  TrackProps,\n  TrackRouter,\n} from './Analytics.interface';\nimport { trackRouters } from './analyticsRouters';\n\n// TODO: if use `dialerUI`/`callLogSection`/`adapter`, make sure they should all be RcModuleV2\n@Module({\n  name: 'Analytics',\n  deps: [\n    'Auth',\n    'Brand',\n    'ExtensionFeatures',\n    'AnalyticsOptions',\n    { dep: 'Environment', optional: true },\n    { dep: 'AccountInfo', optional: true },\n    { dep: 'ExtensionInfo', optional: true },\n    { dep: 'RouterInteraction', optional: true },\n    { dep: 'Locale', optional: true },\n  ],\n})\nexport class Analytics<T extends Deps = Deps>\n  extends RcModuleV2<T>\n  implements IAnalytics\n{\n  appInitTime = Date.now();\n\n  protected _useLog = this._deps.analyticsOptions.useLog ?? false;\n\n  protected _lingerThreshold =\n    this._deps.analyticsOptions.lingerThreshold ?? 1000;\n\n  protected _enablePendo = this._deps.analyticsOptions.enablePendo ?? false;\n\n  protected _analyticsKey = this._deps.analyticsOptions.analyticsKey;\n  protected _enableMixpanel =\n    this._deps.analyticsOptions.enableMixpanel ?? false;\n\n  protected _pendoApiKey = this._deps.analyticsOptions.pendoApiKey ?? '';\n\n  protected _trackRouters =\n    this._deps.analyticsOptions.trackRouters ?? trackRouters;\n\n  protected _segment: any;\n\n  protected _logs: TrackLog[] = [];\n\n  protected _lingerTimeout: NodeJS.Timeout | null = null;\n\n  private _pendo: any;\n\n  private _waitPendoCount = 0;\n\n  private _pendoTimeout?: ReturnType<typeof setTimeout>;\n\n  private _env = this._deps.analyticsOptions.env ?? 'dev';\n\n  private _eventExtendedPropsMap = new Map<string, IExtendedProps>();\n  private _useLocalPendoJS =\n    this._deps.analyticsOptions.useLocalPendoJS ?? false;\n  private _useLocalAnalyticsJS =\n    this._deps.analyticsOptions.useLocalAnalyticsJS ?? false;\n  protected _identifyMixpanelPromise: Promise<void> | undefined;\n  protected _identifyMixpanelResolve?: () => void;\n\n  private _OSInfo: { OS: string; Device: string };\n\n  constructor(deps: T) {\n    super({\n      deps,\n    });\n    this._OSInfo = getOsInfo();\n    this._segment =\n      this._enableMixpanel && this._analyticsKey ? null : Segment();\n    if (this.enableMixpanel) {\n      mixpanel.init(this._analyticsKey);\n      // According to EU policy, we had to disable mixpanel to upload IP addresses\n      mixpanel.set_config({ ip: false });\n      console.log('mixpanel init');\n    }\n    if (this._enablePendo && this._pendoApiKey) {\n      Pendo.init(\n        this._pendoApiKey,\n        this._useLocalPendoJS,\n        (pendoInstance: any) => {\n          this._pendo = pendoInstance;\n        },\n      );\n    }\n  }\n\n  override onInitOnce() {\n    this._identifyMixpanelPromise = new Promise((resolve) => {\n      this._identifyMixpanelResolve = resolve;\n    });\n    if (this._analyticsKey && this._segment) {\n      this._segment.load(\n        this._analyticsKey,\n        {\n          integrations: {\n            All: true,\n            Mixpanel: true,\n          },\n        },\n        this._useLocalAnalyticsJS,\n      );\n    }\n    if (this._deps.routerInteraction) {\n      watch(\n        this,\n        () => this._deps.routerInteraction!.currentPath,\n        (currentPath) => {\n          this.trackRouter(currentPath);\n        },\n      );\n    }\n  }\n\n  async trackRouter(currentPath = this._deps.routerInteraction?.currentPath) {\n    if (this.enableMixpanel) {\n      await this._identifyMixpanelPromise;\n    }\n    const target = this.getTrackTarget(currentPath);\n    if (target) {\n      this.trackNavigation(target);\n    }\n\n    if (this._lingerTimeout) {\n      clearTimeout(this._lingerTimeout);\n    }\n    this._lingerTimeout = setTimeout(() => {\n      this._lingerTimeout = null;\n      if (target && this._deps.routerInteraction?.currentPath === currentPath) {\n        this.trackLinger(target);\n      }\n    }, this._lingerThreshold);\n  }\n\n  setUserId() {\n    this._identify({\n      userId: this._deps.auth.ownerId,\n    });\n  }\n\n  identify(options: IdentifyOptions) {\n    this._identify(options);\n  }\n\n  protected _identify({ userId, ...props }: IdentifyOptions) {\n    if (this.enableMixpanel) {\n      this._mixpanelInitialize({ userId });\n    } else if (this.analytics) {\n      this.analytics.identify(userId, props, {\n        integrations: {\n          All: true,\n          Mixpanel: true,\n          Pendo: this._enablePendo,\n        },\n      });\n    }\n    if (this._enablePendo && this._pendoApiKey) {\n      this._pendoInitialize({ userId, ...props, env: this._env });\n    }\n  }\n\n  protected _mixpanelInitialize({ userId }: { userId: string }) {\n    if (!userId || mixpanel.get_distinct_id?.() === userId) {\n      return;\n    }\n    console.log('mixpanel identify');\n    mixpanel.identify(userId);\n    this._identifyMixpanelResolve?.();\n  }\n\n  pendoIdentify({\n    userId,\n    ...props\n  }: { userId: string } & Record<string, any>) {\n    this._pendoInitialize({ userId, ...props, env: this._env });\n  }\n\n  protected _pendoInitialize({\n    userId,\n    ...props\n  }: { userId: string } & Record<string, any>) {\n    if (!this._deps.accountInfo || !this._deps.accountInfo.id || !userId) {\n      return;\n    }\n    if (this._pendoTimeout) {\n      clearTimeout(this._pendoTimeout);\n    }\n    if (this._waitPendoCount > 3) {\n      return;\n    }\n    if (!this._pendo) {\n      this._pendoTimeout = setTimeout(() => {\n        this._waitPendoCount += 1;\n        this._pendoInitialize({ userId, ...props });\n      }, 5 * 1000);\n      return;\n    }\n    const initializeFunc = !this._pendo.isReady()\n      ? this._pendo.initialize\n      : this._pendo.updateOptions;\n    const pendoAgent: PendoAgent = {\n      visitor: {\n        id: userId,\n        ...props,\n        appName: this._deps.brand.defaultConfig.appName,\n        appVersion: this._deps.analyticsOptions.appVersion,\n        appBrand: this._deps.brand.defaultConfig.code,\n        plaBrand: this._deps.accountInfo?.serviceInfo?.brand?.name,\n        countryCode: this._deps.accountInfo?.countryCode,\n      },\n      account: {\n        id: `${this._deps.accountInfo.id}`,\n      },\n    };\n    typeof initializeFunc === 'function' &&\n      initializeFunc({\n        ...pendoAgent,\n      });\n  }\n\n  @proxify\n  async track(event: string, properties: any = {}) {\n    if (!this.analytics && !this.enableMixpanel) {\n      return;\n    }\n\n    const trackProps: TrackProps = {\n      ...this.trackProps,\n      ...properties,\n      ...this.extendedProps.get(event),\n    };\n    if (this.enableMixpanel) {\n      // NOTE: Data tracking has been migrated from Segment to Mixpanel.\n      // Add id to identify in Mixpanel, so the usage data can be filtered same as before.\n      if (this._deps.auth?.ownerId) {\n        trackProps.id = this._deps.auth.ownerId;\n      }\n\n      if (process.env.NODE_ENV === 'test') {\n        try {\n          // when in test environment, if that mixpanel.track is not mocked, set the mock function to avoid miss send data to remote\n          if (!(mixpanel.track as any).mock) {\n            throw new Error(\n              'Mocked Mixpanel track is not mocked, should set a mock function to avoid miss send data to remote',\n            );\n          }\n        } catch (error) {\n          //\n        }\n      }\n\n      mixpanel.track(event, trackProps);\n    }\n\n    if (this.analytics) {\n      this.analytics.track(event, trackProps, {\n        integrations: {\n          All: true,\n          Mixpanel: true,\n          Pendo: this._enablePendo,\n        },\n      });\n    }\n\n    if (this._useLog) {\n      this._logs.push({\n        timeStamp: new Date().toISOString(),\n        event,\n        trackProps,\n      });\n    }\n\n    if (this._enablePendo && this._pendo?.isReady?.()) {\n      this._pendo.track(`${trackProps.appName}-${event}`, trackProps);\n    }\n  }\n\n  downloadLogs() {\n    if (!this._useLog) {\n      return;\n    }\n    const blob = new Blob([JSON.stringify(this._logs, null, 2)], {\n      type: 'application/json',\n    });\n    saveBlob('logs.json', blob);\n  }\n\n  trackNavigation({\n    router,\n    eventPostfix,\n  }: Exclude<TrackRouter, null | undefined>) {\n    const trackProps = {\n      router,\n      appName: this._deps.brand.defaultConfig.appName,\n      appVersion: this._deps.analyticsOptions.appVersion,\n      brand: this._deps.brand.defaultConfig.code,\n    };\n    this.track(`Navigation: Click/${eventPostfix}`, trackProps);\n  }\n\n  trackLinger({\n    router,\n    eventPostfix,\n  }: Exclude<TrackRouter, null | undefined>) {\n    const trackProps = {\n      router,\n      appName: this._deps.brand.defaultConfig.appName,\n      appVersion: this._deps.analyticsOptions.appVersion,\n      brand: this._deps.brand.defaultConfig.code,\n    };\n    this.track(`Navigation: View/${eventPostfix}`, trackProps);\n  }\n\n  getTrackTarget(\n    currentPath = this._deps.routerInteraction?.currentPath,\n  ): TrackRouter {\n    if (!currentPath) {\n      return null;\n    }\n    const routes = currentPath.split('/');\n    let formatRoute: string | null = null;\n    const needMatchSecondRoutes = ['calls'];\n    if (routes.length >= 3 && needMatchSecondRoutes.indexOf(routes[1]) !== -1) {\n      formatRoute = `/${routes[1]}/${routes[2]}`;\n    } else if (routes.length > 1) {\n      formatRoute = `/${routes[1]}`;\n    }\n    const target = this._trackRouters.find(\n      (target) => formatRoute === target?.router,\n    );\n    return target;\n  }\n\n  addEventsExtendedProps({\n    events,\n    extendedProps,\n  }: {\n    events: string[];\n    extendedProps: IExtendedProps;\n  }) {\n    if (!events || !extendedProps) {\n      console.error('[events or extendedProps] is required');\n      return;\n    }\n    events.forEach((event) => {\n      const oldValue = this._eventExtendedPropsMap.get(event);\n      this._eventExtendedPropsMap.set(event, { ...oldValue, ...extendedProps });\n    });\n  }\n\n  toggleDebug() {\n    this.mixpanel.set_config({ debug: !this.mixpanel.get_config('debug') });\n  }\n\n  get extendedProps() {\n    return this._eventExtendedPropsMap;\n  }\n\n  get analytics() {\n    return (global as any).analytics;\n  }\n\n  get mixpanel() {\n    return mixpanel;\n  }\n\n  @computed((that: Analytics) => [\n    that._deps.brand.brandConfig,\n    that._deps.accountInfo?.id,\n    that._deps.extensionInfo?.country,\n    that._deps.extensionFeatures?.features,\n  ])\n  private get trackedUserInfo(): TrackProps {\n    const userInfo: Record<string, any> = {\n      BrandId: this._deps.brand.brandConfig.id,\n      AccountID: this._deps.accountInfo?.id,\n      BrandName: this._deps.brand.brandConfig.name,\n      CRMEnabled: this._deps.accountInfo?.isCRMEnabled,\n      servicePlanId: this._deps.accountInfo?.servicePlan.id,\n      edition: this._deps.accountInfo?.servicePlan.edition,\n    };\n\n    const features = this._deps.extensionFeatures?.features;\n    const isCallingEnabled =\n      features?.RingOut?.available || features?.WebPhone?.available;\n    const hasSmsPermission =\n      features?.PagesReceiving?.available || features?.SMSReceiving?.available;\n    const hasFaxPermission = features?.FaxReceiving?.available;\n    const hasGlipPermission = features?.Glip?.available;\n\n    const properties = [\n      { name: 'PhoneService', value: isCallingEnabled },\n      { name: 'SMSService', value: hasSmsPermission },\n      { name: 'FaxService', value: hasFaxPermission },\n      { name: 'MessageService', value: hasGlipPermission },\n    ];\n\n    properties.forEach(({ name, value }) => {\n      if (value !== undefined) {\n        userInfo[name] = value ? 'ON' : 'OFF';\n      }\n    });\n\n    return userInfo as TrackProps;\n  }\n\n  get trackProps(): TrackProps {\n    return {\n      ...this.trackedUserInfo,\n      ...this._OSInfo,\n      appName: this._deps.brand.defaultConfig.appName,\n      appVersion: this._deps.analyticsOptions.appVersion,\n      brand: this._deps.brand.defaultConfig.code,\n      'App Language': this._deps.locale?.currentLocale || '',\n      'Browser Language': this._deps.locale?.browserLocale || '',\n      'Extension Type': this._deps.extensionInfo?.info.type || '',\n      'App Init Time': this.appInitTime,\n    };\n  }\n\n  get pendo() {\n    return this._pendo;\n  }\n\n  get enableMixpanel() {\n    return !!(\n      this._enableMixpanel &&\n      this._analyticsKey &&\n      (!this._deps.environment || this._deps.environment.allowDataTracking)\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}