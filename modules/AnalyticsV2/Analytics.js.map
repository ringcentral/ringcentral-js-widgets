{"version":3,"file":"Analytics.js","names":["_core","require","_Analytics","_di","_proxify","_saveBlob","_interopRequireDefault","_analyticsRouters","_dec","_class","_class2","obj","__esModule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","target","i","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","configurable","writable","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","property","decorators","context","desc","initializer","slice","reverse","reduce","decorator","Analytics","Module","name","deps","dep","optional","_ref","_super","_this$_deps$analytics","_this$_deps$analytics2","_this$_deps$analytics3","_this$_deps$analytics4","_this$_deps$analytics5","_this$_deps$analytics6","_this$_deps$analytics7","_this$_deps$analytics8","_this","_useLog","_deps","analyticsOptions","useLog","_lingerThreshold","lingerThreshold","_enablePendo","enablePendo","_pendoApiKey","pendoApiKey","_trackRouters","trackRouters","_segment","_logs","_lingerTimeout","_pendo","_waitPendoCount","_pendoTimeout","_env","env","_eventExtendedPropsMap","Map","_useLocalPendoJS","useLocalPendoJS","_useLocalAnalyticsJS","useLocalAnalyticsJS","Segment","Pendo","init","pendoInstance","onInitOnce","_this2","analyticsKey","load","integrations","All","Mixpanel","routerInteraction","trackRouter","watch","currentPath","_this$_deps$routerInt","_this3","getTrackTarget","trackNavigation","clearTimeout","setTimeout","_this3$_deps$routerIn","trackLinger","setUserId","_identify","userId","auth","ownerId","identify","options","_ref2","_this$analytics","analytics","_pendoInitialize","pendoIdentify","_ref3","_ref4","_this4","_this$_deps$accountIn","_this$_deps$accountIn2","_this$_deps$accountIn3","_this$_deps$accountIn4","accountInfo","id","initializeFunc","isReady","initialize","updateOptions","pendoAgent","visitor","appName","brand","defaultConfig","appVersion","appBrand","code","plaBrand","serviceInfo","countryCode","account","concat","_track","regeneratorRuntime","mark","_callee","event","_this$_pendo","_this$_pendo$isReady","properties","trackProps","_args","wrap","_callee$","_context","prev","next","abrupt","extendedProps","get","track","timeStamp","Date","toISOString","stop","_x","downloadLogs","blob","Blob","JSON","stringify","type","saveBlob","_ref5","router","eventPostfix","_ref6","_this$_deps$routerInt2","routes","split","formatRoute","needMatchSecondRoutes","find","addEventsExtendedProps","_ref7","_this5","events","console","oldValue","set","global","_this$_deps$locale","_this$_deps$locale2","_this$_deps$extension","locale","currentLocale","browserLocale","extensionInfo","RcModuleV2","proxify","exports"],"sources":["modules/AnalyticsV2/Analytics.ts"],"sourcesContent":["import { RcModuleV2, watch } from '@ringcentral-integration/core';\nimport type { IAnalytics } from '@ringcentral-integration/core/lib/track';\n\nimport { Pendo, Segment } from '../../lib/Analytics';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport saveBlob from '../../lib/saveBlob';\nimport type {\n  Deps,\n  IdentifyOptions,\n  IExtendedProps,\n  PendoAgent,\n  TrackLog,\n  TrackProps,\n  TrackRouter,\n} from './Analytics.interface';\nimport { trackRouters } from './analyticsRouters';\n\n// TODO: refactoring the module against `https://docs.google.com/spreadsheets/d/1xufV6-C-RJR6OJgwFYHYzNQwhIdN4BXXCo8ABs7RT-8/edit#gid=1480480736`\n// TODO: if use `dialerUI`/`callLogSection`/`adapter`, make sure they should all be RcModuleV2\n@Module({\n  name: 'Analytics',\n  deps: [\n    'Auth',\n    'Brand',\n    'AnalyticsOptions',\n    { dep: 'AccountInfo', optional: true },\n    { dep: 'ExtensionInfo', optional: true },\n    { dep: 'RouterInteraction', optional: true },\n    { dep: 'Locale', optional: true },\n  ],\n})\nexport class Analytics<T extends Deps = Deps>\n  extends RcModuleV2<T>\n  implements IAnalytics\n{\n  protected _useLog = this._deps.analyticsOptions.useLog ?? false;\n\n  protected _lingerThreshold =\n    this._deps.analyticsOptions.lingerThreshold ?? 1000;\n\n  protected _enablePendo = this._deps.analyticsOptions.enablePendo ?? false;\n\n  protected _pendoApiKey = this._deps.analyticsOptions.pendoApiKey ?? '';\n\n  protected _trackRouters =\n    this._deps.analyticsOptions.trackRouters ?? trackRouters;\n\n  protected _segment: any;\n\n  protected _logs: TrackLog[] = [];\n\n  protected _lingerTimeout: NodeJS.Timeout | null = null;\n\n  private _pendo: any;\n\n  private _waitPendoCount = 0;\n\n  private _pendoTimeout?: ReturnType<typeof setTimeout>;\n\n  private _env = this._deps.analyticsOptions.env ?? 'dev';\n\n  private _eventExtendedPropsMap = new Map<string, IExtendedProps>();\n  private _useLocalPendoJS =\n    this._deps.analyticsOptions.useLocalPendoJS ?? false;\n  private _useLocalAnalyticsJS =\n    this._deps.analyticsOptions.useLocalAnalyticsJS ?? false;\n\n  constructor(deps: T) {\n    super({\n      deps,\n    });\n    this._segment = Segment();\n    if (this._enablePendo && this._pendoApiKey) {\n      Pendo.init(\n        this._pendoApiKey,\n        this._useLocalPendoJS,\n        (pendoInstance: any) => {\n          this._pendo = pendoInstance;\n        },\n      );\n    }\n  }\n\n  override onInitOnce() {\n    if (this._deps.analyticsOptions.analyticsKey && this._segment) {\n      this._segment.load(\n        this._deps.analyticsOptions.analyticsKey,\n        {\n          integrations: {\n            All: true,\n            Mixpanel: true,\n          },\n        },\n        this._useLocalAnalyticsJS,\n      );\n    }\n    if (this._deps.routerInteraction) {\n      // make sure that track if refresh app\n      this.trackRouter();\n      watch(\n        this,\n        () => this._deps.routerInteraction!.currentPath,\n        (currentPath) => {\n          this.trackRouter(currentPath);\n        },\n      );\n    }\n  }\n\n  trackRouter(currentPath = this._deps.routerInteraction?.currentPath) {\n    const target = this.getTrackTarget(currentPath);\n    if (target) {\n      this.trackNavigation(target);\n    }\n\n    if (this._lingerTimeout) {\n      clearTimeout(this._lingerTimeout);\n    }\n    this._lingerTimeout = setTimeout(() => {\n      this._lingerTimeout = null;\n      if (target && this._deps.routerInteraction?.currentPath === currentPath) {\n        this.trackLinger(target);\n      }\n    }, this._lingerThreshold);\n  }\n\n  setUserId() {\n    this._identify({\n      userId: this._deps.auth.ownerId,\n    });\n  }\n\n  identify(options: IdentifyOptions) {\n    this._identify(options);\n  }\n\n  protected _identify({ userId, ...props }: IdentifyOptions) {\n    this.analytics?.identify(userId, props, {\n      integrations: {\n        All: true,\n        Mixpanel: true,\n        Pendo: this._enablePendo,\n      },\n    });\n    if (this._enablePendo && this._pendoApiKey) {\n      this._pendoInitialize({ userId, ...props, env: this._env });\n    }\n  }\n\n  pendoIdentify({\n    userId,\n    ...props\n  }: { userId: string } & Record<string, any>) {\n    this._pendoInitialize({ userId, ...props, env: this._env });\n  }\n\n  protected _pendoInitialize({\n    userId,\n    ...props\n  }: { userId: string } & Record<string, any>) {\n    if (!this._deps.accountInfo || !this._deps.accountInfo.id || !userId) {\n      return;\n    }\n    if (this._pendoTimeout) {\n      clearTimeout(this._pendoTimeout);\n    }\n    if (this._waitPendoCount > 3) {\n      return;\n    }\n    if (!this._pendo) {\n      this._pendoTimeout = setTimeout(() => {\n        this._waitPendoCount += 1;\n        this._pendoInitialize({ userId, ...props });\n      }, 5 * 1000);\n      return;\n    }\n    const initializeFunc = !this._pendo.isReady()\n      ? this._pendo.initialize\n      : this._pendo.updateOptions;\n    const pendoAgent: PendoAgent = {\n      visitor: {\n        id: userId,\n        ...props,\n        appName: this._deps.brand.defaultConfig.appName,\n        appVersion: this._deps.analyticsOptions.appVersion,\n        appBrand: this._deps.brand.defaultConfig.code,\n        plaBrand: this._deps.accountInfo?.serviceInfo?.brand?.name,\n        countryCode: this._deps.accountInfo?.countryCode,\n      },\n      account: {\n        id: `${this._deps.accountInfo.id}`,\n      },\n    };\n    typeof initializeFunc === 'function' &&\n      initializeFunc({\n        ...pendoAgent,\n      });\n  }\n\n  @proxify\n  async track(event: string, properties: any = {}) {\n    if (!this.analytics) {\n      return;\n    }\n\n    const trackProps: TrackProps = {\n      ...this.trackProps,\n      ...properties,\n      ...this.extendedProps.get(event),\n    };\n\n    this.analytics.track(event, trackProps, {\n      integrations: {\n        All: true,\n        Mixpanel: true,\n        Pendo: this._enablePendo,\n      },\n    });\n\n    if (this._useLog) {\n      this._logs.push({\n        timeStamp: new Date().toISOString(),\n        event,\n        trackProps,\n      });\n    }\n\n    if (this._enablePendo && this._pendo?.isReady?.()) {\n      this._pendo.track(`${trackProps.appName}-${event}`, trackProps);\n    }\n  }\n\n  downloadLogs() {\n    if (!this._useLog) {\n      return;\n    }\n    const blob = new Blob([JSON.stringify(this._logs, null, 2)], {\n      type: 'application/json',\n    });\n    saveBlob('logs.json', blob);\n  }\n\n  trackNavigation({\n    router,\n    eventPostfix,\n  }: Exclude<TrackRouter, null | undefined>) {\n    const trackProps = {\n      router,\n      appName: this._deps.brand.defaultConfig.appName,\n      appVersion: this._deps.analyticsOptions.appVersion,\n      brand: this._deps.brand.defaultConfig.code,\n    };\n    this.track(`Navigation: Click/${eventPostfix}`, trackProps);\n  }\n\n  trackLinger({\n    router,\n    eventPostfix,\n  }: Exclude<TrackRouter, null | undefined>) {\n    const trackProps = {\n      router,\n      appName: this._deps.brand.defaultConfig.appName,\n      appVersion: this._deps.analyticsOptions.appVersion,\n      brand: this._deps.brand.defaultConfig.code,\n    };\n    this.track(`Navigation: View/${eventPostfix}`, trackProps);\n  }\n\n  getTrackTarget(\n    currentPath = this._deps.routerInteraction?.currentPath,\n  ): TrackRouter {\n    if (!currentPath) {\n      return null;\n    }\n    const routes = currentPath.split('/');\n    let formatRoute: string | null = null;\n    const needMatchSecondRoutes = ['calls'];\n    if (routes.length >= 3 && needMatchSecondRoutes.indexOf(routes[1]) !== -1) {\n      formatRoute = `/${routes[1]}/${routes[2]}`;\n    } else if (routes.length > 1) {\n      formatRoute = `/${routes[1]}`;\n    }\n    const target = this._trackRouters.find(\n      (target) => formatRoute === target?.router,\n    );\n    return target;\n  }\n\n  addEventsExtendedProps({\n    events,\n    extendedProps,\n  }: {\n    events: string[];\n    extendedProps: IExtendedProps;\n  }) {\n    if (!events || !extendedProps) {\n      console.error('[events or extendedProps] is required');\n      return;\n    }\n    events.forEach((event) => {\n      const oldValue = this._eventExtendedPropsMap.get(event);\n      this._eventExtendedPropsMap.set(event, { ...oldValue, ...extendedProps });\n    });\n  }\n\n  get extendedProps() {\n    return this._eventExtendedPropsMap;\n  }\n\n  get analytics() {\n    return (global as any).analytics;\n  }\n\n  get trackProps(): TrackProps {\n    return {\n      appName: this._deps.brand.defaultConfig.appName,\n      appVersion: this._deps.analyticsOptions.appVersion,\n      brand: this._deps.brand.defaultConfig.code,\n      'App Language': this._deps.locale?.currentLocale || '',\n      'Browser Language': this._deps.locale?.browserLocale || '',\n      'Extension Type': this._deps.extensionInfo?.info.type || '',\n    };\n  }\n\n  get pendo() {\n    return this._pendo;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAGA,IAAAC,UAAA,GAAAD,OAAA;AACA,IAAAE,GAAA,GAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AACA,IAAAI,SAAA,GAAAC,sBAAA,CAAAL,OAAA;AAUA,IAAAM,iBAAA,GAAAN,OAAA;AAAkD,IAAAO,IAAA,EAAAC,MAAA,EAAAC,OAAA;AAAA,SAAAJ,uBAAAK,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,gBAAAA,GAAA;AAAA,SAAAE,mBAAAC,GAAA,EAAAC,OAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,GAAA,EAAAC,GAAA,cAAAC,IAAA,GAAAP,GAAA,CAAAK,GAAA,EAAAC,GAAA,OAAAE,KAAA,GAAAD,IAAA,CAAAC,KAAA,WAAAC,KAAA,IAAAP,MAAA,CAAAO,KAAA,iBAAAF,IAAA,CAAAG,IAAA,IAAAT,OAAA,CAAAO,KAAA,YAAAG,OAAA,CAAAV,OAAA,CAAAO,KAAA,EAAAI,IAAA,CAAAT,KAAA,EAAAC,MAAA;AAAA,SAAAS,kBAAAC,EAAA,6BAAAC,IAAA,SAAAC,IAAA,GAAAC,SAAA,aAAAN,OAAA,WAAAV,OAAA,EAAAC,MAAA,QAAAF,GAAA,GAAAc,EAAA,CAAAI,KAAA,CAAAH,IAAA,EAAAC,IAAA,YAAAb,MAAAK,KAAA,IAAAT,kBAAA,CAAAC,GAAA,EAAAC,OAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,MAAA,UAAAI,KAAA,cAAAJ,OAAAe,GAAA,IAAApB,kBAAA,CAAAC,GAAA,EAAAC,OAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,MAAA,WAAAe,GAAA,KAAAhB,KAAA,CAAAiB,SAAA;AAAA,SAAAC,QAAAC,MAAA,EAAAC,cAAA,QAAAC,IAAA,GAAAC,MAAA,CAAAD,IAAA,CAAAF,MAAA,OAAAG,MAAA,CAAAC,qBAAA,QAAAC,OAAA,GAAAF,MAAA,CAAAC,qBAAA,CAAAJ,MAAA,GAAAC,cAAA,KAAAI,OAAA,GAAAA,OAAA,CAAAC,MAAA,WAAAC,GAAA,WAAAJ,MAAA,CAAAK,wBAAA,CAAAR,MAAA,EAAAO,GAAA,EAAAE,UAAA,OAAAP,IAAA,CAAAQ,IAAA,CAAAd,KAAA,CAAAM,IAAA,EAAAG,OAAA,YAAAH,IAAA;AAAA,SAAAS,cAAAC,MAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAlB,SAAA,CAAAmB,MAAA,EAAAD,CAAA,UAAAE,MAAA,WAAApB,SAAA,CAAAkB,CAAA,IAAAlB,SAAA,CAAAkB,CAAA,QAAAA,CAAA,OAAAd,OAAA,CAAAI,MAAA,CAAAY,MAAA,OAAAC,OAAA,WAAAjC,GAAA,IAAAkC,eAAA,CAAAL,MAAA,EAAA7B,GAAA,EAAAgC,MAAA,CAAAhC,GAAA,SAAAoB,MAAA,CAAAe,yBAAA,GAAAf,MAAA,CAAAgB,gBAAA,CAAAP,MAAA,EAAAT,MAAA,CAAAe,yBAAA,CAAAH,MAAA,KAAAhB,OAAA,CAAAI,MAAA,CAAAY,MAAA,GAAAC,OAAA,WAAAjC,GAAA,IAAAoB,MAAA,CAAAiB,cAAA,CAAAR,MAAA,EAAA7B,GAAA,EAAAoB,MAAA,CAAAK,wBAAA,CAAAO,MAAA,EAAAhC,GAAA,iBAAA6B,MAAA;AAAA,SAAAK,gBAAA1C,GAAA,EAAAQ,GAAA,EAAAG,KAAA,IAAAH,GAAA,GAAAsC,cAAA,CAAAtC,GAAA,OAAAA,GAAA,IAAAR,GAAA,IAAA4B,MAAA,CAAAiB,cAAA,CAAA7C,GAAA,EAAAQ,GAAA,IAAAG,KAAA,EAAAA,KAAA,EAAAuB,UAAA,QAAAa,YAAA,QAAAC,QAAA,oBAAAhD,GAAA,CAAAQ,GAAA,IAAAG,KAAA,WAAAX,GAAA;AAAA,SAAAiD,yBAAAT,MAAA,EAAAU,QAAA,QAAAV,MAAA,yBAAAH,MAAA,GAAAc,6BAAA,CAAAX,MAAA,EAAAU,QAAA,OAAA1C,GAAA,EAAA8B,CAAA,MAAAV,MAAA,CAAAC,qBAAA,QAAAuB,gBAAA,GAAAxB,MAAA,CAAAC,qBAAA,CAAAW,MAAA,QAAAF,CAAA,MAAAA,CAAA,GAAAc,gBAAA,CAAAb,MAAA,EAAAD,CAAA,MAAA9B,GAAA,GAAA4C,gBAAA,CAAAd,CAAA,OAAAY,QAAA,CAAAG,OAAA,CAAA7C,GAAA,uBAAAoB,MAAA,CAAA0B,SAAA,CAAAC,oBAAA,CAAAC,IAAA,CAAAhB,MAAA,EAAAhC,GAAA,aAAA6B,MAAA,CAAA7B,GAAA,IAAAgC,MAAA,CAAAhC,GAAA,cAAA6B,MAAA;AAAA,SAAAc,8BAAAX,MAAA,EAAAU,QAAA,QAAAV,MAAA,yBAAAH,MAAA,WAAAoB,UAAA,GAAA7B,MAAA,CAAAD,IAAA,CAAAa,MAAA,OAAAhC,GAAA,EAAA8B,CAAA,OAAAA,CAAA,MAAAA,CAAA,GAAAmB,UAAA,CAAAlB,MAAA,EAAAD,CAAA,MAAA9B,GAAA,GAAAiD,UAAA,CAAAnB,CAAA,OAAAY,QAAA,CAAAG,OAAA,CAAA7C,GAAA,kBAAA6B,MAAA,CAAA7B,GAAA,IAAAgC,MAAA,CAAAhC,GAAA,YAAA6B,MAAA;AAAA,SAAAqB,gBAAAC,QAAA,EAAAC,WAAA,UAAAD,QAAA,YAAAC,WAAA,eAAAC,SAAA;AAAA,SAAAC,kBAAAzB,MAAA,EAAA0B,KAAA,aAAAzB,CAAA,MAAAA,CAAA,GAAAyB,KAAA,CAAAxB,MAAA,EAAAD,CAAA,UAAA0B,UAAA,GAAAD,KAAA,CAAAzB,CAAA,GAAA0B,UAAA,CAAA9B,UAAA,GAAA8B,UAAA,CAAA9B,UAAA,WAAA8B,UAAA,CAAAjB,YAAA,wBAAAiB,UAAA,EAAAA,UAAA,CAAAhB,QAAA,SAAApB,MAAA,CAAAiB,cAAA,CAAAR,MAAA,EAAAS,cAAA,CAAAkB,UAAA,CAAAxD,GAAA,GAAAwD,UAAA;AAAA,SAAAC,aAAAL,WAAA,EAAAM,UAAA,EAAAC,WAAA,QAAAD,UAAA,EAAAJ,iBAAA,CAAAF,WAAA,CAAAN,SAAA,EAAAY,UAAA,OAAAC,WAAA,EAAAL,iBAAA,CAAAF,WAAA,EAAAO,WAAA,GAAAvC,MAAA,CAAAiB,cAAA,CAAAe,WAAA,iBAAAZ,QAAA,mBAAAY,WAAA;AAAA,SAAAd,eAAArC,GAAA,QAAAD,GAAA,GAAA4D,YAAA,CAAA3D,GAAA,oBAAA4D,OAAA,CAAA7D,GAAA,iBAAAA,GAAA,GAAA8D,MAAA,CAAA9D,GAAA;AAAA,SAAA4D,aAAAG,KAAA,EAAAC,IAAA,QAAAH,OAAA,CAAAE,KAAA,kBAAAA,KAAA,kBAAAA,KAAA,MAAAE,IAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,WAAA,OAAAF,IAAA,KAAAlD,SAAA,QAAAqD,GAAA,GAAAH,IAAA,CAAAjB,IAAA,CAAAe,KAAA,EAAAC,IAAA,oBAAAH,OAAA,CAAAO,GAAA,uBAAAA,GAAA,YAAAf,SAAA,4DAAAW,IAAA,gBAAAF,MAAA,GAAAO,MAAA,EAAAN,KAAA;AAAA,SAAAO,UAAAC,QAAA,EAAAC,UAAA,eAAAA,UAAA,mBAAAA,UAAA,uBAAAnB,SAAA,0DAAAkB,QAAA,CAAAzB,SAAA,GAAA1B,MAAA,CAAAqD,MAAA,CAAAD,UAAA,IAAAA,UAAA,CAAA1B,SAAA,IAAA4B,WAAA,IAAAvE,KAAA,EAAAoE,QAAA,EAAA/B,QAAA,QAAAD,YAAA,aAAAnB,MAAA,CAAAiB,cAAA,CAAAkC,QAAA,iBAAA/B,QAAA,gBAAAgC,UAAA,EAAAG,eAAA,CAAAJ,QAAA,EAAAC,UAAA;AAAA,SAAAG,gBAAAC,CAAA,EAAAC,CAAA,IAAAF,eAAA,GAAAvD,MAAA,CAAA0D,cAAA,GAAA1D,MAAA,CAAA0D,cAAA,CAAAC,IAAA,cAAAJ,gBAAAC,CAAA,EAAAC,CAAA,IAAAD,CAAA,CAAAI,SAAA,GAAAH,CAAA,SAAAD,CAAA,YAAAD,eAAA,CAAAC,CAAA,EAAAC,CAAA;AAAA,SAAAI,aAAAC,OAAA,QAAAC,yBAAA,GAAAC,yBAAA,oBAAAC,qBAAA,QAAAC,KAAA,GAAAC,eAAA,CAAAL,OAAA,GAAAM,MAAA,MAAAL,yBAAA,QAAAM,SAAA,GAAAF,eAAA,OAAAb,WAAA,EAAAc,MAAA,GAAAE,OAAA,CAAAC,SAAA,CAAAL,KAAA,EAAA1E,SAAA,EAAA6E,SAAA,YAAAD,MAAA,GAAAF,KAAA,CAAAzE,KAAA,OAAAD,SAAA,YAAAgF,0BAAA,OAAAJ,MAAA;AAAA,SAAAI,2BAAAlF,IAAA,EAAAsC,IAAA,QAAAA,IAAA,KAAAa,OAAA,CAAAb,IAAA,yBAAAA,IAAA,2BAAAA,IAAA,aAAAA,IAAA,yBAAAK,SAAA,uEAAAwC,sBAAA,CAAAnF,IAAA;AAAA,SAAAmF,uBAAAnF,IAAA,QAAAA,IAAA,yBAAAoF,cAAA,wEAAApF,IAAA;AAAA,SAAA0E,0BAAA,eAAAM,OAAA,qBAAAA,OAAA,CAAAC,SAAA,oBAAAD,OAAA,CAAAC,SAAA,CAAAI,IAAA,2BAAAC,KAAA,oCAAAC,OAAA,CAAAnD,SAAA,CAAAoD,OAAA,CAAAlD,IAAA,CAAA0C,OAAA,CAAAC,SAAA,CAAAM,OAAA,8CAAAE,CAAA;AAAA,SAAAZ,gBAAAX,CAAA,IAAAW,eAAA,GAAAnE,MAAA,CAAA0D,cAAA,GAAA1D,MAAA,CAAAgF,cAAA,CAAArB,IAAA,cAAAQ,gBAAAX,CAAA,WAAAA,CAAA,CAAAI,SAAA,IAAA5D,MAAA,CAAAgF,cAAA,CAAAxB,CAAA,aAAAW,eAAA,CAAAX,CAAA;AAAA,SAAAyB,0BAAAxE,MAAA,EAAAyE,QAAA,EAAAC,UAAA,EAAA/C,UAAA,EAAAgD,OAAA,QAAAC,IAAA,OAAArF,MAAA,CAAAD,IAAA,CAAAqC,UAAA,EAAAvB,OAAA,WAAAjC,GAAA,IAAAyG,IAAA,CAAAzG,GAAA,IAAAwD,UAAA,CAAAxD,GAAA,OAAAyG,IAAA,CAAA/E,UAAA,KAAA+E,IAAA,CAAA/E,UAAA,EAAA+E,IAAA,CAAAlE,YAAA,KAAAkE,IAAA,CAAAlE,YAAA,iBAAAkE,IAAA,IAAAA,IAAA,CAAAC,WAAA,IAAAD,IAAA,CAAAjE,QAAA,WAAAiE,IAAA,GAAAF,UAAA,CAAAI,KAAA,GAAAC,OAAA,GAAAC,MAAA,WAAAJ,IAAA,EAAAK,SAAA,WAAAA,SAAA,CAAAjF,MAAA,EAAAyE,QAAA,EAAAG,IAAA,KAAAA,IAAA,KAAAA,IAAA,OAAAD,OAAA,IAAAC,IAAA,CAAAC,WAAA,eAAAD,IAAA,CAAAtG,KAAA,GAAAsG,IAAA,CAAAC,WAAA,GAAAD,IAAA,CAAAC,WAAA,CAAA1D,IAAA,CAAAwD,OAAA,YAAAC,IAAA,CAAAC,WAAA,GAAA3F,SAAA,QAAA0F,IAAA,CAAAC,WAAA,eAAAtF,MAAA,CAAAiB,cAAA,CAAAR,MAAA,EAAAyE,QAAA,EAAAG,IAAA,GAAAA,IAAA,kBAAAA,IAAA;AAElD;AACA;AAAA,IAaaM,SAAS,IAAA1H,IAAA,GAZrB,IAAA2H,UAAM,EAAC;EACNC,IAAI,EAAE,WAAW;EACjBC,IAAI,EAAE,CACJ,MAAM,EACN,OAAO,EACP,kBAAkB,EAClB;IAAEC,GAAG,EAAE,aAAa;IAAEC,QAAQ,EAAE;EAAK,CAAC,EACtC;IAAED,GAAG,EAAE,eAAe;IAAEC,QAAQ,EAAE;EAAK,CAAC,EACxC;IAAED,GAAG,EAAE,mBAAmB;IAAEC,QAAQ,EAAE;EAAK,CAAC,EAC5C;IAAED,GAAG,EAAE,QAAQ;IAAEC,QAAQ,EAAE;EAAK,CAAC;AAErC,CAAC,CAAC,EAAA/H,IAAA,CAAAC,MAAA,IAAAC,OAAA,0BAAA8H,IAAA;EAAA/C,SAAA,CAAAyC,SAAA,EAAAM,IAAA;EAAA,IAAAC,MAAA,GAAArC,YAAA,CAAA8B,SAAA;EAqCA,SAAAA,UAAYG,IAAO,EAAE;IAAA,IAAAK,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA;IAAA,IAAAC,KAAA;IAAA7E,eAAA,OAAA6D,SAAA;IACnBgB,KAAA,GAAAT,MAAA,CAAAtE,IAAA,OAAM;MACJkE,IAAI,EAAJA;IACF,CAAC;IAAEa,KAAA,CAnCKC,OAAO,IAAAT,qBAAA,GAAGQ,KAAA,CAAKE,KAAK,CAACC,gBAAgB,CAACC,MAAM,cAAAZ,qBAAA,cAAAA,qBAAA,GAAI,KAAK;IAAAQ,KAAA,CAErDK,gBAAgB,IAAAZ,sBAAA,GACxBO,KAAA,CAAKE,KAAK,CAACC,gBAAgB,CAACG,eAAe,cAAAb,sBAAA,cAAAA,sBAAA,GAAI,IAAI;IAAAO,KAAA,CAE3CO,YAAY,IAAAb,sBAAA,GAAGM,KAAA,CAAKE,KAAK,CAACC,gBAAgB,CAACK,WAAW,cAAAd,sBAAA,cAAAA,sBAAA,GAAI,KAAK;IAAAM,KAAA,CAE/DS,YAAY,IAAAd,sBAAA,GAAGK,KAAA,CAAKE,KAAK,CAACC,gBAAgB,CAACO,WAAW,cAAAf,sBAAA,cAAAA,sBAAA,GAAI,EAAE;IAAAK,KAAA,CAE5DW,aAAa,IAAAf,sBAAA,GACrBI,KAAA,CAAKE,KAAK,CAACC,gBAAgB,CAACS,YAAY,cAAAhB,sBAAA,cAAAA,sBAAA,GAAIgB,8BAAY;IAAAZ,KAAA,CAEhDa,QAAQ;IAAAb,KAAA,CAERc,KAAK,GAAe,EAAE;IAAAd,KAAA,CAEtBe,cAAc,GAA0B,IAAI;IAAAf,KAAA,CAE9CgB,MAAM;IAAAhB,KAAA,CAENiB,eAAe,GAAG,CAAC;IAAAjB,KAAA,CAEnBkB,aAAa;IAAAlB,KAAA,CAEbmB,IAAI,IAAAtB,sBAAA,GAAGG,KAAA,CAAKE,KAAK,CAACC,gBAAgB,CAACiB,GAAG,cAAAvB,sBAAA,cAAAA,sBAAA,GAAI,KAAK;IAAAG,KAAA,CAE/CqB,sBAAsB,GAAG,IAAIC,GAAG,CAAyB,CAAC;IAAAtB,KAAA,CAC1DuB,gBAAgB,IAAAzB,sBAAA,GACtBE,KAAA,CAAKE,KAAK,CAACC,gBAAgB,CAACqB,eAAe,cAAA1B,sBAAA,cAAAA,sBAAA,GAAI,KAAK;IAAAE,KAAA,CAC9CyB,oBAAoB,IAAA1B,sBAAA,GAC1BC,KAAA,CAAKE,KAAK,CAACC,gBAAgB,CAACuB,mBAAmB,cAAA3B,sBAAA,cAAAA,sBAAA,GAAI,KAAK;IAMxDC,KAAA,CAAKa,QAAQ,GAAG,IAAAc,kBAAO,EAAC,CAAC;IACzB,IAAI3B,KAAA,CAAKO,YAAY,IAAIP,KAAA,CAAKS,YAAY,EAAE;MAC1CmB,gBAAK,CAACC,IAAI,CACR7B,KAAA,CAAKS,YAAY,EACjBT,KAAA,CAAKuB,gBAAgB,EACrB,UAACO,aAAkB,EAAK;QACtB9B,KAAA,CAAKgB,MAAM,GAAGc,aAAa;MAC7B,CACF,CAAC;IACH;IAAC,OAAA9B,KAAA;EACH;EAACtE,YAAA,CAAAsD,SAAA;IAAA/G,GAAA;IAAAG,KAAA,WAAA2J,WAAA,EAEqB;MAAA,IAAAC,MAAA;MACpB,IAAI,IAAI,CAAC9B,KAAK,CAACC,gBAAgB,CAAC8B,YAAY,IAAI,IAAI,CAACpB,QAAQ,EAAE;QAC7D,IAAI,CAACA,QAAQ,CAACqB,IAAI,CAChB,IAAI,CAAChC,KAAK,CAACC,gBAAgB,CAAC8B,YAAY,EACxC;UACEE,YAAY,EAAE;YACZC,GAAG,EAAE,IAAI;YACTC,QAAQ,EAAE;UACZ;QACF,CAAC,EACD,IAAI,CAACZ,oBACP,CAAC;MACH;MACA,IAAI,IAAI,CAACvB,KAAK,CAACoC,iBAAiB,EAAE;QAChC;QACA,IAAI,CAACC,WAAW,CAAC,CAAC;QAClB,IAAAC,WAAK,EACH,IAAI,EACJ;UAAA,OAAMR,MAAI,CAAC9B,KAAK,CAACoC,iBAAiB,CAAEG,WAAW;QAAA,GAC/C,UAACA,WAAW,EAAK;UACfT,MAAI,CAACO,WAAW,CAACE,WAAW,CAAC;QAC/B,CACF,CAAC;MACH;IACF;EAAC;IAAAxK,GAAA;IAAAG,KAAA,WAAAmK,YAAA,EAEoE;MAAA,IAAAG,qBAAA;QAAAC,MAAA;MAAA,IAAzDF,WAAW,GAAA5J,SAAA,CAAAmB,MAAA,QAAAnB,SAAA,QAAAG,SAAA,GAAAH,SAAA,OAAA6J,qBAAA,GAAG,IAAI,CAACxC,KAAK,CAACoC,iBAAiB,cAAAI,qBAAA,uBAA5BA,qBAAA,CAA8BD,WAAW;MACjE,IAAM3I,MAAM,GAAG,IAAI,CAAC8I,cAAc,CAACH,WAAW,CAAC;MAC/C,IAAI3I,MAAM,EAAE;QACV,IAAI,CAAC+I,eAAe,CAAC/I,MAAM,CAAC;MAC9B;MAEA,IAAI,IAAI,CAACiH,cAAc,EAAE;QACvB+B,YAAY,CAAC,IAAI,CAAC/B,cAAc,CAAC;MACnC;MACA,IAAI,CAACA,cAAc,GAAGgC,UAAU,CAAC,YAAM;QAAA,IAAAC,qBAAA;QACrCL,MAAI,CAAC5B,cAAc,GAAG,IAAI;QAC1B,IAAIjH,MAAM,IAAI,EAAAkJ,qBAAA,GAAAL,MAAI,CAACzC,KAAK,CAACoC,iBAAiB,cAAAU,qBAAA,uBAA5BA,qBAAA,CAA8BP,WAAW,MAAKA,WAAW,EAAE;UACvEE,MAAI,CAACM,WAAW,CAACnJ,MAAM,CAAC;QAC1B;MACF,CAAC,EAAE,IAAI,CAACuG,gBAAgB,CAAC;IAC3B;EAAC;IAAApI,GAAA;IAAAG,KAAA,WAAA8K,UAAA,EAEW;MACV,IAAI,CAACC,SAAS,CAAC;QACbC,MAAM,EAAE,IAAI,CAAClD,KAAK,CAACmD,IAAI,CAACC;MAC1B,CAAC,CAAC;IACJ;EAAC;IAAArL,GAAA;IAAAG,KAAA,WAAAmL,SAEQC,OAAwB,EAAE;MACjC,IAAI,CAACL,SAAS,CAACK,OAAO,CAAC;IACzB;EAAC;IAAAvL,GAAA;IAAAG,KAAA,WAAA+K,UAAAM,KAAA,EAE0D;MAAA,IAAAC,eAAA;MAAA,IAArCN,MAAM,GAAAK,KAAA,CAANL,MAAM;QAAK5H,KAAK,GAAAd,wBAAA,CAAA+I,KAAA;MACpC,CAAAC,eAAA,OAAI,CAACC,SAAS,cAAAD,eAAA,uBAAdA,eAAA,CAAgBH,QAAQ,CAACH,MAAM,EAAE5H,KAAK,EAAE;QACtC2G,YAAY,EAAE;UACZC,GAAG,EAAE,IAAI;UACTC,QAAQ,EAAE,IAAI;UACdT,KAAK,EAAE,IAAI,CAACrB;QACd;MACF,CAAC,CAAC;MACF,IAAI,IAAI,CAACA,YAAY,IAAI,IAAI,CAACE,YAAY,EAAE;QAC1C,IAAI,CAACmD,gBAAgB,CAAA/J,aAAA,CAAAA,aAAA;UAAGuJ,MAAM,EAANA;QAAM,GAAK5H,KAAK;UAAE4F,GAAG,EAAE,IAAI,CAACD;QAAI,EAAE,CAAC;MAC7D;IACF;EAAC;IAAAlJ,GAAA;IAAAG,KAAA,WAAAyL,cAAAC,KAAA,EAK4C;MAAA,IAF3CV,MAAM,GAAAU,KAAA,CAANV,MAAM;QACH5H,KAAK,GAAAd,wBAAA,CAAAoJ,KAAA;MAER,IAAI,CAACF,gBAAgB,CAAA/J,aAAA,CAAAA,aAAA;QAAGuJ,MAAM,EAANA;MAAM,GAAK5H,KAAK;QAAE4F,GAAG,EAAE,IAAI,CAACD;MAAI,EAAE,CAAC;IAC7D;EAAC;IAAAlJ,GAAA;IAAAG,KAAA,WAAAwL,iBAAAG,KAAA,EAK4C;MAAA,IAAAC,MAAA;QAAAC,qBAAA;QAAAC,sBAAA;QAAAC,sBAAA;QAAAC,sBAAA;MAAA,IAF3ChB,MAAM,GAAAW,KAAA,CAANX,MAAM;QACH5H,KAAK,GAAAd,wBAAA,CAAAqJ,KAAA;MAER,IAAI,CAAC,IAAI,CAAC7D,KAAK,CAACmE,WAAW,IAAI,CAAC,IAAI,CAACnE,KAAK,CAACmE,WAAW,CAACC,EAAE,IAAI,CAAClB,MAAM,EAAE;QACpE;MACF;MACA,IAAI,IAAI,CAAClC,aAAa,EAAE;QACtB4B,YAAY,CAAC,IAAI,CAAC5B,aAAa,CAAC;MAClC;MACA,IAAI,IAAI,CAACD,eAAe,GAAG,CAAC,EAAE;QAC5B;MACF;MACA,IAAI,CAAC,IAAI,CAACD,MAAM,EAAE;QAChB,IAAI,CAACE,aAAa,GAAG6B,UAAU,CAAC,YAAM;UACpCiB,MAAI,CAAC/C,eAAe,IAAI,CAAC;UACzB+C,MAAI,CAACJ,gBAAgB,CAAA/J,aAAA;YAAGuJ,MAAM,EAANA;UAAM,GAAK5H,KAAK,CAAE,CAAC;QAC7C,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;QACZ;MACF;MACA,IAAM+I,cAAc,GAAG,CAAC,IAAI,CAACvD,MAAM,CAACwD,OAAO,CAAC,CAAC,GACzC,IAAI,CAACxD,MAAM,CAACyD,UAAU,GACtB,IAAI,CAACzD,MAAM,CAAC0D,aAAa;MAC7B,IAAMC,UAAsB,GAAG;QAC7BC,OAAO,EAAA/K,aAAA,CAAAA,aAAA;UACLyK,EAAE,EAAElB;QAAM,GACP5H,KAAK;UACRqJ,OAAO,EAAE,IAAI,CAAC3E,KAAK,CAAC4E,KAAK,CAACC,aAAa,CAACF,OAAO;UAC/CG,UAAU,EAAE,IAAI,CAAC9E,KAAK,CAACC,gBAAgB,CAAC6E,UAAU;UAClDC,QAAQ,EAAE,IAAI,CAAC/E,KAAK,CAAC4E,KAAK,CAACC,aAAa,CAACG,IAAI;UAC7CC,QAAQ,GAAAlB,qBAAA,GAAE,IAAI,CAAC/D,KAAK,CAACmE,WAAW,cAAAJ,qBAAA,wBAAAC,sBAAA,GAAtBD,qBAAA,CAAwBmB,WAAW,cAAAlB,sBAAA,wBAAAC,sBAAA,GAAnCD,sBAAA,CAAqCY,KAAK,cAAAX,sBAAA,uBAA1CA,sBAAA,CAA4CjF,IAAI;UAC1DmG,WAAW,GAAAjB,sBAAA,GAAE,IAAI,CAAClE,KAAK,CAACmE,WAAW,cAAAD,sBAAA,uBAAtBA,sBAAA,CAAwBiB;QAAW,EACjD;QACDC,OAAO,EAAE;UACPhB,EAAE,KAAAiB,MAAA,CAAK,IAAI,CAACrF,KAAK,CAACmE,WAAW,CAACC,EAAE;QAClC;MACF,CAAC;MACD,OAAOC,cAAc,KAAK,UAAU,IAClCA,cAAc,CAAA1K,aAAA,KACT8K,UAAU,CACd,CAAC;IACN;EAAC;IAAA1M,GAAA;IAAAG,KAAA;MAAA,IAAAoN,MAAA,GAAA/M,iBAAA,eAAAgN,kBAAA,CAAAC,IAAA,UAAAC,QAGWC,KAAa;QAAA,IAAAC,YAAA,EAAAC,oBAAA;QAAA,IAAAC,UAAA;UAAAC,UAAA;UAAAC,KAAA,GAAApN,SAAA;QAAA,OAAA4M,kBAAA,CAAAS,IAAA,UAAAC,SAAAC,QAAA;UAAA;YAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;cAAA;gBAAEP,UAAe,GAAAE,KAAA,CAAAjM,MAAA,QAAAiM,KAAA,QAAAjN,SAAA,GAAAiN,KAAA,MAAG,CAAC,CAAC;gBAAA,IACxC,IAAI,CAACtC,SAAS;kBAAAyC,QAAA,CAAAE,IAAA;kBAAA;gBAAA;gBAAA,OAAAF,QAAA,CAAAG,MAAA;cAAA;gBAIbP,UAAsB,GAAAnM,aAAA,CAAAA,aAAA,CAAAA,aAAA,KACvB,IAAI,CAACmM,UAAU,GACfD,UAAU,GACV,IAAI,CAACS,aAAa,CAACC,GAAG,CAACb,KAAK,CAAC;gBAGlC,IAAI,CAACjC,SAAS,CAAC+C,KAAK,CAACd,KAAK,EAAEI,UAAU,EAAE;kBACtC7D,YAAY,EAAE;oBACZC,GAAG,EAAE,IAAI;oBACTC,QAAQ,EAAE,IAAI;oBACdT,KAAK,EAAE,IAAI,CAACrB;kBACd;gBACF,CAAC,CAAC;gBAEF,IAAI,IAAI,CAACN,OAAO,EAAE;kBAChB,IAAI,CAACa,KAAK,CAAClH,IAAI,CAAC;oBACd+M,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;oBACnCjB,KAAK,EAALA,KAAK;oBACLI,UAAU,EAAVA;kBACF,CAAC,CAAC;gBACJ;gBAEA,IAAI,IAAI,CAACzF,YAAY,MAAAsF,YAAA,GAAI,IAAI,CAAC7E,MAAM,cAAA6E,YAAA,wBAAAC,oBAAA,GAAXD,YAAA,CAAarB,OAAO,cAAAsB,oBAAA,uBAApBA,oBAAA,CAAA7K,IAAA,CAAA4K,YAAuB,CAAC,GAAE;kBACjD,IAAI,CAAC7E,MAAM,CAAC0F,KAAK,IAAAnB,MAAA,CAAIS,UAAU,CAACnB,OAAO,OAAAU,MAAA,CAAIK,KAAK,GAAII,UAAU,CAAC;gBACjE;cAAC;cAAA;gBAAA,OAAAI,QAAA,CAAAU,IAAA;YAAA;UAAA;QAAA,GAAAnB,OAAA;MAAA;MAAA,SAAAe,MAAAK,EAAA;QAAA,OAAAvB,MAAA,CAAA1M,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAA6N,KAAA;IAAA;EAAA;IAAAzO,GAAA;IAAAG,KAAA,WAAA4O,aAAA,EAGY;MACb,IAAI,CAAC,IAAI,CAAC/G,OAAO,EAAE;QACjB;MACF;MACA,IAAMgH,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACtG,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE;QAC3DuG,IAAI,EAAE;MACR,CAAC,CAAC;MACF,IAAAC,oBAAQ,EAAC,WAAW,EAAEL,IAAI,CAAC;IAC7B;EAAC;IAAAhP,GAAA;IAAAG,KAAA,WAAAyK,gBAAA0E,KAAA,EAK0C;MAAA,IAFzCC,MAAM,GAAAD,KAAA,CAANC,MAAM;QACNC,YAAY,GAAAF,KAAA,CAAZE,YAAY;MAEZ,IAAMzB,UAAU,GAAG;QACjBwB,MAAM,EAANA,MAAM;QACN3C,OAAO,EAAE,IAAI,CAAC3E,KAAK,CAAC4E,KAAK,CAACC,aAAa,CAACF,OAAO;QAC/CG,UAAU,EAAE,IAAI,CAAC9E,KAAK,CAACC,gBAAgB,CAAC6E,UAAU;QAClDF,KAAK,EAAE,IAAI,CAAC5E,KAAK,CAAC4E,KAAK,CAACC,aAAa,CAACG;MACxC,CAAC;MACD,IAAI,CAACwB,KAAK,sBAAAnB,MAAA,CAAsBkC,YAAY,GAAIzB,UAAU,CAAC;IAC7D;EAAC;IAAA/N,GAAA;IAAAG,KAAA,WAAA6K,YAAAyE,KAAA,EAK0C;MAAA,IAFzCF,MAAM,GAAAE,KAAA,CAANF,MAAM;QACNC,YAAY,GAAAC,KAAA,CAAZD,YAAY;MAEZ,IAAMzB,UAAU,GAAG;QACjBwB,MAAM,EAANA,MAAM;QACN3C,OAAO,EAAE,IAAI,CAAC3E,KAAK,CAAC4E,KAAK,CAACC,aAAa,CAACF,OAAO;QAC/CG,UAAU,EAAE,IAAI,CAAC9E,KAAK,CAACC,gBAAgB,CAAC6E,UAAU;QAClDF,KAAK,EAAE,IAAI,CAAC5E,KAAK,CAAC4E,KAAK,CAACC,aAAa,CAACG;MACxC,CAAC;MACD,IAAI,CAACwB,KAAK,qBAAAnB,MAAA,CAAqBkC,YAAY,GAAIzB,UAAU,CAAC;IAC5D;EAAC;IAAA/N,GAAA;IAAAG,KAAA,WAAAwK,eAAA,EAIc;MAAA,IAAA+E,sBAAA;MAAA,IADblF,WAAW,GAAA5J,SAAA,CAAAmB,MAAA,QAAAnB,SAAA,QAAAG,SAAA,GAAAH,SAAA,OAAA8O,sBAAA,GAAG,IAAI,CAACzH,KAAK,CAACoC,iBAAiB,cAAAqF,sBAAA,uBAA5BA,sBAAA,CAA8BlF,WAAW;MAEvD,IAAI,CAACA,WAAW,EAAE;QAChB,OAAO,IAAI;MACb;MACA,IAAMmF,MAAM,GAAGnF,WAAW,CAACoF,KAAK,CAAC,GAAG,CAAC;MACrC,IAAIC,WAA0B,GAAG,IAAI;MACrC,IAAMC,qBAAqB,GAAG,CAAC,OAAO,CAAC;MACvC,IAAIH,MAAM,CAAC5N,MAAM,IAAI,CAAC,IAAI+N,qBAAqB,CAACjN,OAAO,CAAC8M,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;QACzEE,WAAW,OAAAvC,MAAA,CAAOqC,MAAM,CAAC,CAAC,CAAC,OAAArC,MAAA,CAAIqC,MAAM,CAAC,CAAC,CAAC,CAAE;MAC5C,CAAC,MAAM,IAAIA,MAAM,CAAC5N,MAAM,GAAG,CAAC,EAAE;QAC5B8N,WAAW,OAAAvC,MAAA,CAAOqC,MAAM,CAAC,CAAC,CAAC,CAAE;MAC/B;MACA,IAAM9N,MAAM,GAAG,IAAI,CAAC6G,aAAa,CAACqH,IAAI,CACpC,UAAClO,MAAM;QAAA,OAAKgO,WAAW,MAAKhO,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAE0N,MAAM;MAAA,CAC5C,CAAC;MACD,OAAO1N,MAAM;IACf;EAAC;IAAA7B,GAAA;IAAAG,KAAA,WAAA6P,uBAAAC,KAAA,EAQE;MAAA,IAAAC,MAAA;MAAA,IALDC,MAAM,GAAAF,KAAA,CAANE,MAAM;QACN5B,aAAa,GAAA0B,KAAA,CAAb1B,aAAa;MAKb,IAAI,CAAC4B,MAAM,IAAI,CAAC5B,aAAa,EAAE;QAC7B6B,OAAO,CAAChQ,KAAK,CAAC,uCAAuC,CAAC;QACtD;MACF;MACA+P,MAAM,CAAClO,OAAO,CAAC,UAAC0L,KAAK,EAAK;QACxB,IAAM0C,QAAQ,GAAGH,MAAI,CAAC9G,sBAAsB,CAACoF,GAAG,CAACb,KAAK,CAAC;QACvDuC,MAAI,CAAC9G,sBAAsB,CAACkH,GAAG,CAAC3C,KAAK,EAAA/L,aAAA,CAAAA,aAAA,KAAOyO,QAAQ,GAAK9B,aAAa,CAAE,CAAC;MAC3E,CAAC,CAAC;IACJ;EAAC;IAAAvO,GAAA;IAAAwO,GAAA,WAAAA,IAAA,EAEmB;MAClB,OAAO,IAAI,CAACpF,sBAAsB;IACpC;EAAC;IAAApJ,GAAA;IAAAwO,GAAA,WAAAA,IAAA,EAEe;MACd,OAAQ+B,MAAM,CAAS7E,SAAS;IAClC;EAAC;IAAA1L,GAAA;IAAAwO,GAAA,WAAAA,IAAA,EAE4B;MAAA,IAAAgC,kBAAA,EAAAC,mBAAA,EAAAC,qBAAA;MAC3B,OAAO;QACL9D,OAAO,EAAE,IAAI,CAAC3E,KAAK,CAAC4E,KAAK,CAACC,aAAa,CAACF,OAAO;QAC/CG,UAAU,EAAE,IAAI,CAAC9E,KAAK,CAACC,gBAAgB,CAAC6E,UAAU;QAClDF,KAAK,EAAE,IAAI,CAAC5E,KAAK,CAAC4E,KAAK,CAACC,aAAa,CAACG,IAAI;QAC1C,cAAc,EAAE,EAAAuD,kBAAA,OAAI,CAACvI,KAAK,CAAC0I,MAAM,cAAAH,kBAAA,uBAAjBA,kBAAA,CAAmBI,aAAa,KAAI,EAAE;QACtD,kBAAkB,EAAE,EAAAH,mBAAA,OAAI,CAACxI,KAAK,CAAC0I,MAAM,cAAAF,mBAAA,uBAAjBA,mBAAA,CAAmBI,aAAa,KAAI,EAAE;QAC1D,gBAAgB,EAAE,EAAAH,qBAAA,OAAI,CAACzI,KAAK,CAAC6I,aAAa,cAAAJ,qBAAA,uBAAxBA,qBAAA,CAA0BxQ,IAAI,CAACkP,IAAI,KAAI;MAC3D,CAAC;IACH;EAAC;IAAApP,GAAA;IAAAwO,GAAA,WAAAA,IAAA,EAEW;MACV,OAAO,IAAI,CAACzF,MAAM;IACpB;EAAC;EAAA,OAAAhC,SAAA;AAAA,EAtSOgK,gBAAU,IAAA1K,yBAAA,CAAA9G,OAAA,CAAAuD,SAAA,YAuKjBkO,gBAAO,GAAA5P,MAAA,CAAAK,wBAAA,CAAAlC,OAAA,CAAAuD,SAAA,YAAAvD,OAAA,CAAAuD,SAAA,IAAAvD,OAAA,MAAAD,MAAA;AAAA2R,OAAA,CAAAlK,SAAA,GAAAA,SAAA"}