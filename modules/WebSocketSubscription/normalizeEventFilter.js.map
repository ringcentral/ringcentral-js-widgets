{"version":3,"file":"normalizeEventFilter.js","names":["accountRegex","extensionRegex","totalActiveCallsRegex","normalizeEventFilter","filter","arguments","length","undefined","replace","isTheSameWebSocket","firstUrl","secondUrl","first","URL","second","isEqual","origin","pathname","searchParams","get","isTheSameEventFilters","filters1","filters2","map","x","sort","join"],"sources":["modules/WebSocketSubscription/normalizeEventFilter.ts"],"sourcesContent":["// const apiUrlPrefixRegex: RegExp = /^\\/restapi\\/v[\\d]\\.[\\d]/;\nconst accountRegex = /\\/account\\/[\\d]+/;\nconst extensionRegex = /\\/extension\\/[\\d]+/;\nconst totalActiveCallsRegex = /&totalActiveCalls/;\n\n/**\n * @description Convert the subscription filters from base subscription object\n *  to the generic event filters we use to subscribe\n * @param {String} filter\n * @returns {String} normalizedFilter\n */\nexport function normalizeEventFilter(filter = ''): string {\n  return filter\n    .replace(accountRegex, '/account/~')\n    .replace(extensionRegex, '/extension/~')\n    .replace(totalActiveCallsRegex, '');\n}\n\nexport function isTheSameWebSocket(firstUrl: string, secondUrl: string) {\n  const first = new URL(firstUrl);\n  const second = new URL(secondUrl);\n  const isEqual =\n    first.origin === second.origin &&\n    first.pathname === second.pathname &&\n    first.searchParams.get('access_token') ===\n      second.searchParams.get('access_token');\n  return isEqual;\n}\n\nexport function isTheSameEventFilters(filters1: string[], filters2: string[]) {\n  return (\n    filters1\n      .map((x) => normalizeEventFilter(x))\n      .sort()\n      .join(',') ===\n    filters2\n      .map((x) => normalizeEventFilter(x))\n      .sort()\n      .join(',')\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA,IAAMA,YAAY,GAAG,kBAAkB;AACvC,IAAMC,cAAc,GAAG,oBAAoB;AAC3C,IAAMC,qBAAqB,GAAG,mBAAmB;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,oBAAoBA,CAAA,EAAsB;EAAA,IAArBC,MAAM,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EAC9C,OAAOD,MAAM,CACVI,OAAO,CAACR,YAAY,EAAE,YAAY,CAAC,CACnCQ,OAAO,CAACP,cAAc,EAAE,cAAc,CAAC,CACvCO,OAAO,CAACN,qBAAqB,EAAE,EAAE,CAAC;AACvC;AAEO,SAASO,kBAAkBA,CAACC,QAAgB,EAAEC,SAAiB,EAAE;EACtE,IAAMC,KAAK,GAAG,IAAIC,GAAG,CAACH,QAAQ,CAAC;EAC/B,IAAMI,MAAM,GAAG,IAAID,GAAG,CAACF,SAAS,CAAC;EACjC,IAAMI,OAAO,GACXH,KAAK,CAACI,MAAM,KAAKF,MAAM,CAACE,MAAM,IAC9BJ,KAAK,CAACK,QAAQ,KAAKH,MAAM,CAACG,QAAQ,IAClCL,KAAK,CAACM,YAAY,CAACC,GAAG,CAAC,cAAc,CAAC,KACpCL,MAAM,CAACI,YAAY,CAACC,GAAG,CAAC,cAAc,CAAC;EAC3C,OAAOJ,OAAO;AAChB;AAEO,SAASK,qBAAqBA,CAACC,QAAkB,EAAEC,QAAkB,EAAE;EAC5E,OACED,QAAQ,CACLE,GAAG,CAAC,UAACC,CAAC;IAAA,OAAKrB,oBAAoB,CAACqB,CAAC,CAAC;EAAA,EAAC,CACnCC,IAAI,CAAC,CAAC,CACNC,IAAI,CAAC,GAAG,CAAC,KACZJ,QAAQ,CACLC,GAAG,CAAC,UAACC,CAAC;IAAA,OAAKrB,oBAAoB,CAACqB,CAAC,CAAC;EAAA,EAAC,CACnCC,IAAI,CAAC,CAAC,CACNC,IAAI,CAAC,GAAG,CAAC;AAEhB","ignoreList":[]}