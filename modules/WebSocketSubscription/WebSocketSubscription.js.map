{"version":3,"file":"WebSocketSubscription.js","names":["_core","require","_background","_interopRequireDefault","_debounceThrottle","_di","_proxify","_webSocketReadyStates","_normalizeEventFilter","_dec","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","e","__esModule","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","Symbol","iterator","isArray","length","n","_regenerator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","d","bind","l","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_initializerWarningHelper","Error","_applyDecoratedDescriptor","keys","forEach","reverse","reduce","DEFAULT_REFRESH_DELAY","process","env","NODE_ENV","SyncMessageTabEventName","exports","DEFAULT_RECOVERY_BUFFER_SIZE","WebSocketSubscription","Module","deps","dep","optional","_RcModuleV","_this","enableCache","storageKey","_wsSubscription","_subscriberMap","Map","_subscribersAreReady","_debouncedUpdateSubscription","promisedDebounce","fn","_updateSubscription","threshold","_onInitOnce","_callee","_context","_bindEvents","onInitOnce","_onInitSuccess","_callee2","_context2","_debouncedUpdateSubscriptionCatchCancel","onInitSuccess","_onReset","_callee3","_context3","cancel","_removeSubscription","onReset","get","_deps","ringCentralExtensions","disconnectOnInactive","_bindEvents2","_callee5","_this2","_context5","watch","webSocketReadyState","_ref","_callee4","wsState","_context4","ready","webSocketReadyStates","closing","_revokeSubscription","_x","onlyOneTabConnected","tabManager","event","_tabEventHandler","_notifyMessage","args","_syncMessageToOtherTabs2","_callee6","message","_this$_deps$tabManage","_context6","send","_syncMessageToOtherTabs","_x2","_setTokens","subscriptionInfo","subscriptionChannel","_saveTokens","_this$_wsSubscription","webSocketExtension","ws","url","_clearTokens","_obtainSubscription2","_callee7","eventFilters","_this3","_subscription$subscri","isNewChannel","subscription","isNewSubscription","_context7","isTheSameWebSocket","console","log","concat","subscribe","_dispatchMessage","id","_obtainSubscription","_x3","_refreshSubscription2","_callee8","_context8","refresh","_refreshSubscription","_x4","_revokeSubscription2","_callee9","_t","_context9","revoke","client","service","platform","uri","warn","undefined","_removeSubscription2","_callee0","_context0","remove","ex","_updateSubscription2","_callee1","_this$_wsSubscription2","_this$_wsSubscription3","_context1","isWebSocketReady","getFilters","isTheSameEventFilters","_debouncedUpdateSubscriptionCatchCancel2","_callee10","_t2","_context10","register","module","metadata","_this4","subscriber","set","_updateSubscriberReady","unwatch","unregister","filters","values","acc","_ref2","filterSet","Set","_this5","messageBuffer","_dispatchModuleMessage","every","x","_clearMessageBuffer","_this6","_pushMessageBuffer","_","handler","error","_this$_deps$ringCentr","_this$_deps$ringCentr2","_this$_deps$ringCentr3","bufferSize","connectionDetails","recoveryBufferSize","shift","push","_subscribe","_callee11","oldLength","_args11","_context11","_addFilters","_unsubscribe","_callee12","_args12","_context12","_removeFilters","unsubscribe","filter","index","array","indexOf","includes","allowSync","RcModuleV2","background","getOwnPropertyDescriptor","storage","state","action","proxify"],"sources":["modules/WebSocketSubscription/WebSocketSubscription.ts"],"sourcesContent":["import type SubscriptionInfo from '@rc-ex/core/lib/definitions/SubscriptionInfo';\nimport type Subscription from '@rc-ex/ws/lib/subscription';\nimport {\n  action,\n  RcModuleV2,\n  state,\n  storage,\n  watch,\n} from '@ringcentral-integration/core';\n\nimport type { SubscriptionFilter } from '../../enums/subscriptionFilters';\nimport type RcModule from '../../lib/RcModule';\nimport background from '../../lib/background';\nimport { promisedDebounce } from '../../lib/debounce-throttle';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport { webSocketReadyStates } from '../RingCentralExtensions/webSocketReadyStates';\nimport type { TabEvent } from '../TabManager';\n\nimport type {\n  Deps,\n  SubscriberInfo,\n  SubscriptionMetadata,\n} from './WebSocketSubscription.interface';\nimport {\n  isTheSameEventFilters,\n  isTheSameWebSocket,\n} from './normalizeEventFilter';\n\nconst DEFAULT_REFRESH_DELAY = process.env.NODE_ENV === 'test' ? 0 : 1000;\nexport const SyncMessageTabEventName = 'WebSocketSubscription-syncMessage';\nconst DEFAULT_RECOVERY_BUFFER_SIZE = 100;\n\n@Module({\n  name: 'WebSocketSubscription',\n  deps: [\n    'Client',\n    'Storage',\n    'RingCentralExtensions',\n    { dep: 'TabManager', optional: true },\n    { dep: 'WebSocketSubscriptionOptions', optional: true },\n  ],\n})\nexport class WebSocketSubscription extends RcModuleV2<Deps> {\n  private _wsSubscription?: Subscription;\n  private _subscriberMap = new Map<RcModuleV2 | RcModule, SubscriberInfo>();\n  private _subscribersAreReady = false;\n\n  constructor(deps: Deps) {\n    super({\n      deps,\n      enableCache: true,\n      storageKey: 'WebSocketSubscription',\n    });\n  }\n\n  override async onInitOnce() {\n    await this._bindEvents();\n  }\n\n  override async onInitSuccess() {\n    await this._debouncedUpdateSubscriptionCatchCancel();\n  }\n\n  override async onReset() {\n    this._debouncedUpdateSubscription.cancel();\n    await this._removeSubscription();\n  }\n\n  get onlyOneTabConnected(): boolean {\n    return this._deps.ringCentralExtensions.disconnectOnInactive;\n  }\n\n  @background\n  private async _bindEvents() {\n    watch(\n      this,\n      () => this._deps.ringCentralExtensions.webSocketReadyState,\n      async (wsState) => {\n        if (!this.ready || !wsState) {\n          return;\n        }\n        this._debouncedUpdateSubscription.cancel();\n        if (wsState === webSocketReadyStates.ready) {\n          await this._updateSubscription();\n        } else if (wsState === webSocketReadyStates.closing) {\n          // when websocket is going to close, revoke subscription beforehand\n          await this._revokeSubscription();\n        } else {\n          await this._removeSubscription();\n        }\n      },\n    );\n    if (this.onlyOneTabConnected) {\n      watch(\n        this,\n        () => this._deps.tabManager!.event,\n        (event) => {\n          this._tabEventHandler(event);\n        },\n      );\n    }\n  }\n\n  private _tabEventHandler(event: TabEvent) {\n    if (!this.ready || !event) {\n      return;\n    }\n    if (event.name === SyncMessageTabEventName) {\n      this._notifyMessage(event.args![0], false);\n    }\n  }\n\n  private async _syncMessageToOtherTabs(message: unknown) {\n    // sync notification message to other tabs, so that other tabs got the latest message state\n    await this._deps.tabManager?.send(SyncMessageTabEventName, message);\n  }\n\n  @storage\n  @state\n  subscriptionInfo?: SubscriptionInfo | null = null;\n\n  @storage\n  @state\n  subscriptionChannel?: string | null = null;\n\n  @action\n  private _setTokens(\n    subscriptionInfo?: SubscriptionInfo | null,\n    subscriptionChannel?: string | null,\n  ) {\n    this.subscriptionInfo = subscriptionInfo ?? null;\n    this.subscriptionChannel = subscriptionChannel ?? null;\n  }\n\n  private _saveTokens() {\n    this._setTokens(\n      this._wsSubscription?.subscriptionInfo,\n      this._deps.ringCentralExtensions.webSocketExtension.ws.url,\n    );\n  }\n\n  private _clearTokens() {\n    this._setTokens(null, null);\n  }\n\n  private async _obtainSubscription(eventFilters: SubscriptionFilter[]) {\n    const isNewChannel =\n      !this.subscriptionChannel ||\n      !isTheSameWebSocket(\n        this.subscriptionChannel,\n        this._deps.ringCentralExtensions.webSocketExtension.ws.url,\n      );\n    if (process.env.NODE_ENV !== 'test') {\n      console.log(\n        `[WebSocketSubscription] > _obtainSubscription > isNewChannel: ${isNewChannel}`,\n      );\n    }\n\n    // For reduce the total number of subscriptions (ttl 24 hours, limited number 20),\n    // Revoke existing subscription before creating new.\n    if (isNewChannel) {\n      await this._revokeSubscription();\n      if (process.env.NODE_ENV !== 'test') {\n        console.log(\n          '[WebSocketSubscription] > _obtainSubscription > existing subscription revoked',\n        );\n      }\n    }\n\n    // Create or recover subscription\n    const subscription =\n      await this._deps.ringCentralExtensions.webSocketExtension.subscribe(\n        eventFilters,\n        (message) => {\n          this._notifyMessage(message);\n          this._dispatchMessage(message);\n        },\n        isNewChannel ? null : this.subscriptionInfo,\n      );\n\n    const isNewSubscription =\n      !this.subscriptionInfo ||\n      this.subscriptionInfo.id !== subscription.subscriptionInfo?.id;\n    if (isNewSubscription) {\n      if (process.env.NODE_ENV !== 'test') {\n        console.log(\n          '[WebSocketSubscription] > _obtainSubscription > subscription created',\n        );\n      }\n    } else {\n      if (process.env.NODE_ENV !== 'test') {\n        console.log(\n          '[WebSocketSubscription] > _obtainSubscription > subscription recovered',\n        );\n      }\n    }\n\n    this._wsSubscription = subscription;\n    this._saveTokens();\n  }\n\n  private async _refreshSubscription(eventFilters: SubscriptionFilter[]) {\n    if (this._wsSubscription) {\n      this._wsSubscription.eventFilters = eventFilters;\n      await this._wsSubscription.refresh();\n      this._saveTokens();\n    }\n  }\n\n  private async _revokeSubscription() {\n    try {\n      // Prior using ws channel for revoking, it is faster\n      if (this._wsSubscription) {\n        await this._wsSubscription.revoke();\n      }\n      // Else try to revoke over RESTful API\n      // When page reload we do have cached subscriptionInfo but not _wsSubscription object\n      else if (this.subscriptionInfo) {\n        await this._deps.client.service\n          .platform()\n          .delete(this.subscriptionInfo.uri);\n      }\n    } catch (ex) {\n      // ignore error of revoke request\n      if (process.env.NODE_ENV !== 'test') {\n        console.warn(`[WebSocketSubscription] > _revokeSubscription > ${ex}`);\n      }\n    }\n    this._wsSubscription = undefined;\n    this._clearTokens(); // once subscription is revoked, all tokens are expired\n  }\n\n  // Remove client side subscription object only\n  private async _removeSubscription() {\n    if (this._wsSubscription) {\n      try {\n        this._wsSubscription.remove();\n      } catch (ex) {\n        // ignore error of remove request\n        if (process.env.NODE_ENV !== 'test') {\n          console.warn(`[WebSocketSubscription] > _removeSubscription > ${ex}`);\n        }\n      }\n      this._wsSubscription = undefined;\n    }\n  }\n\n  @proxify\n  private async _updateSubscription() {\n    // only when websocket is ready for create/refresh/revoke subscription\n    if (!this._deps.ringCentralExtensions.isWebSocketReady) {\n      return;\n    }\n\n    const eventFilters = this.getFilters();\n    if (!eventFilters.length) {\n      await this._revokeSubscription();\n      return;\n    }\n\n    if (!this._wsSubscription) {\n      await this._obtainSubscription(eventFilters);\n      return;\n    }\n\n    if (\n      !isTheSameEventFilters(\n        eventFilters,\n        this._wsSubscription.subscriptionInfo?.eventFilters ?? [],\n      )\n    ) {\n      await this._refreshSubscription(eventFilters);\n      return;\n    }\n  }\n\n  private _debouncedUpdateSubscription = promisedDebounce({\n    fn: this._updateSubscription,\n    threshold: DEFAULT_REFRESH_DELAY,\n  });\n\n  private async _debouncedUpdateSubscriptionCatchCancel() {\n    try {\n      await this._debouncedUpdateSubscription();\n    } catch (error: any /** TODO: confirm with instanceof */) {\n      if (error.message !== 'cancelled') {\n        throw error;\n      }\n    }\n  }\n\n  register(module: any, metadata: SubscriptionMetadata) {\n    // Register subscriber\n    const subscriber: SubscriberInfo = { metadata };\n    this._subscriberMap.set(module, subscriber);\n    // Monitor subscriber ready state\n    this._updateSubscriberReady(module);\n    subscriber.unwatch = watch(\n      module,\n      () => module.ready,\n      () => {\n        this._updateSubscriberReady(module);\n      },\n    );\n  }\n\n  unregister(module: any) {\n    const subscriber = this._subscriberMap.get(module);\n    if (subscriber?.unwatch) {\n      subscriber.unwatch();\n      subscriber.unwatch = undefined;\n      this._subscriberMap.delete(module);\n    }\n  }\n\n  getFilters() {\n    // Registered filters\n    const filters = Array.from(this._subscriberMap.values()).reduce<\n      SubscriptionFilter[]\n    >((acc, { metadata }) => acc.concat(metadata.filters), []);\n\n    // Merge with subscribed filters\n    const filterSet = new Set([...filters, ...this.filters]);\n\n    return [...filterSet];\n  }\n\n  _updateSubscriberReady(module: RcModuleV2 | RcModule) {\n    // Send buffered messages to the current ready subscriber\n    if (module.ready) {\n      this.messageBuffer.forEach((message) => {\n        this._dispatchModuleMessage(module, message);\n      });\n      if (process.env.NODE_ENV !== 'test') {\n        console.log(\n          `[WebSocketSubscription] > ${module.constructor.name} ready with ${this.messageBuffer.length} buffered messages`,\n        );\n      }\n    }\n\n    // Check if all subscribers are ready\n    this._subscribersAreReady = Array.from(this._subscriberMap.keys()).every(\n      (x) => x.ready,\n    );\n\n    // Clear message buffer when all subscribers are ready\n    if (this._subscribersAreReady) {\n      this._clearMessageBuffer();\n    }\n  }\n\n  _dispatchMessage(message: unknown) {\n    if (!this._subscribersAreReady) {\n      this._pushMessageBuffer(message);\n    }\n    this._subscriberMap.forEach((_, module) => {\n      if (!module.ready) return;\n      this._dispatchModuleMessage(module, message);\n    });\n  }\n\n  _dispatchModuleMessage(module: RcModuleV2 | RcModule, message: unknown) {\n    const subscriber = this._subscriberMap.get(module);\n    if (!subscriber?.metadata.handler) return;\n    try {\n      subscriber.metadata.handler.apply(module, [message]);\n    } catch (ex) {\n      console.error('[WebSocketSubscription] > _dispatchMessage error', ex);\n    }\n  }\n\n  @action\n  _pushMessageBuffer(message: unknown) {\n    const bufferSize =\n      this._deps.ringCentralExtensions.webSocketExtension?.connectionDetails\n        ?.recoveryBufferSize ?? DEFAULT_RECOVERY_BUFFER_SIZE;\n\n    if (this.messageBuffer.length > bufferSize) {\n      this.messageBuffer.shift();\n    }\n\n    this.messageBuffer.push(message);\n  }\n\n  @action\n  _clearMessageBuffer() {\n    this.messageBuffer = [];\n  }\n\n  @state\n  messageBuffer: unknown[] = [];\n\n  /**\n   * @deprecated\n   * Use \"register\" instead\n   */\n  @proxify\n  async subscribe(eventFilters: SubscriptionFilter[] = []) {\n    if (!this.ready) {\n      return;\n    }\n    const oldLength = this.filters.length;\n    this._addFilters(eventFilters);\n    if (oldLength !== this.filters.length) {\n      await this._debouncedUpdateSubscriptionCatchCancel();\n    }\n  }\n\n  @proxify\n  async unsubscribe(eventFilters: SubscriptionFilter[] = []) {\n    if (!this.ready) {\n      return;\n    }\n    const oldLength = this.filters.length;\n    this._removeFilters(eventFilters);\n    if (oldLength !== this.filters.length) {\n      await this._debouncedUpdateSubscriptionCatchCancel();\n    }\n  }\n\n  @action\n  private _addFilters(eventFilters: SubscriptionFilter[]) {\n    this.filters = this.filters\n      .concat(eventFilters)\n      .filter((x, index, array) => array.indexOf(x) === index); // remove duplicates\n  }\n\n  @action\n  private _removeFilters(eventFilters: SubscriptionFilter[]) {\n    this.filters = this.filters.filter((x) => !eventFilters.includes(x));\n  }\n\n  @action\n  private _notifyMessage(message: unknown, allowSync = true) {\n    this.message = message ?? null;\n    if (allowSync && this.onlyOneTabConnected) {\n      this._syncMessageToOtherTabs(message);\n    }\n  }\n\n  @state\n  filters: SubscriptionFilter[] = [];\n\n  @state\n  message?: unknown = null;\n}\n"],"mappings":"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","ignoreList":[]}