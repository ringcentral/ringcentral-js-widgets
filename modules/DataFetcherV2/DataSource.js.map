{"version":3,"file":"DataSource.js","names":["DEFAULT_TTL","exports","DEFAULT_RETRY","DEFAULT_RETRY_INTERVALS","DEFAULT_READY_CHECK","DEFAULT_PERMISSION_CHECK","DataSource","_props","_classCallCheck","_createClass","key","value","fetchFunction","readyCheckFunction","_this$_props$readyChe","permissionCheckFunction","_this$_props$permissi","get","_this$_props$ttl","ttl","_this$_props$timeToRe","timeToRetry","_this$_props$retryInt","retryIntervals","disableCache","polling","_this$_props$pollingI","Math","max","pollingInterval","_ref","cleanOnReset"],"sources":["modules/DataFetcherV2/DataSource.ts"],"sourcesContent":["import type { DataSourceProps } from './DataFetcherV2.interface';\n\nexport const DEFAULT_TTL = 30 * 60 * 1000;\nexport const DEFAULT_RETRY = 62 * 1000;\n\nexport const DEFAULT_RETRY_INTERVALS = [\n  2 * 1000,\n  5 * 1000,\n  10 * 1000,\n  30 * 1000,\n];\n\nconst DEFAULT_READY_CHECK = () => true;\nconst DEFAULT_PERMISSION_CHECK = () => true;\n\nexport class DataSource<T> {\n  constructor(private _props: DataSourceProps<T>) {}\n\n  get key() {\n    return this._props.key;\n  }\n\n  fetchFunction() {\n    return this._props.fetchFunction();\n  }\n\n  get ttl() {\n    return this._props.ttl ?? DEFAULT_TTL;\n  }\n\n  get timeToRetry() {\n    return this._props.timeToRetry ?? DEFAULT_RETRY;\n  }\n\n  get retryIntervals() {\n    return this._props.retryIntervals ?? DEFAULT_RETRY_INTERVALS;\n  }\n\n  get disableCache() {\n    return !!this._props.disableCache;\n  }\n\n  get polling() {\n    return !!this._props.polling;\n  }\n\n  get pollingInterval() {\n    // polling interval should be >= than ttl\n    return Math.max(this._props.pollingInterval ?? this.ttl, this.ttl);\n  }\n\n  /**\n   * @default true\n   * @description Clean up data on logout. Default to true as DataFetcher\n   *  will always fetchData on login. This will also be always true if disableCache is true.\n   */\n  get cleanOnReset() {\n    return !!((this.disableCache || this._props.cleanOnReset) ?? true);\n  }\n\n  readyCheckFunction() {\n    return (this._props.readyCheckFunction ?? DEFAULT_READY_CHECK)();\n  }\n\n  permissionCheckFunction() {\n    return (this._props.permissionCheckFunction ?? DEFAULT_PERMISSION_CHECK)();\n  }\n}\n"],"mappings":"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","ignoreList":[]}