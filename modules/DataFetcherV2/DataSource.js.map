{"version":3,"file":"DataSource.js","names":["DEFAULT_TTL","exports","DEFAULT_RETRY","DEFAULT_RETRY_INTERVALS","DEFAULT_READY_CHECK","DEFAULT_PERMISSION_CHECK","DataSource","_props","_classCallCheck","_createClass","key","get","value","fetchFunction","_this$_props$ttl","ttl","_this$_props$timeToRe","timeToRetry","_this$_props$retryInt","retryIntervals","disableCache","polling","_this$_props$pollingI","Math","max","pollingInterval","_ref","cleanOnReset","readyCheckFunction","_this$_props$readyChe","permissionCheckFunction","_this$_props$permissi"],"sources":["modules/DataFetcherV2/DataSource.ts"],"sourcesContent":["import type { DataSourceProps } from './DataFetcherV2.interface';\n\nexport const DEFAULT_TTL = 30 * 60 * 1000;\nexport const DEFAULT_RETRY = 62 * 1000;\n\nexport const DEFAULT_RETRY_INTERVALS = [\n  2 * 1000,\n  5 * 1000,\n  10 * 1000,\n  30 * 1000,\n];\n\nconst DEFAULT_READY_CHECK = () => true;\nconst DEFAULT_PERMISSION_CHECK = () => true;\n\nexport class DataSource<T> {\n  constructor(private _props: DataSourceProps<T>) {}\n\n  get key() {\n    return this._props.key;\n  }\n\n  fetchFunction() {\n    return this._props.fetchFunction();\n  }\n\n  get ttl() {\n    return this._props.ttl ?? DEFAULT_TTL;\n  }\n\n  get timeToRetry() {\n    return this._props.timeToRetry ?? DEFAULT_RETRY;\n  }\n\n  get retryIntervals() {\n    return this._props.retryIntervals ?? DEFAULT_RETRY_INTERVALS;\n  }\n\n  get disableCache() {\n    return !!this._props.disableCache;\n  }\n\n  get polling() {\n    return !!this._props.polling;\n  }\n\n  get pollingInterval() {\n    // polling interval should be >= than ttl\n    return Math.max(this._props.pollingInterval ?? this.ttl, this.ttl);\n  }\n\n  /**\n   * @default true\n   * @description Clean up data on logout. Default to true as DataFetcher\n   *  will always fetchData on login. This will also be always true if disableCache is true.\n   */\n  get cleanOnReset() {\n    return !!((this.disableCache || this._props.cleanOnReset) ?? true);\n  }\n\n  readyCheckFunction() {\n    return (this._props.readyCheckFunction ?? DEFAULT_READY_CHECK)();\n  }\n\n  permissionCheckFunction() {\n    return (this._props.permissionCheckFunction ?? DEFAULT_PERMISSION_CHECK)();\n  }\n}\n"],"mappings":"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","ignoreList":[]}