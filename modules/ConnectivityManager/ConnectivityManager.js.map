{"version":3,"file":"ConnectivityManager.js","names":["_di","require","_proxify","_core","_connectivityTypes","_dec","_dec2","_dec3","_class","_class2","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","_createClass","protoProps","staticProps","prototype","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","call","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","property","decorators","context","desc","keys","forEach","initializer","slice","reverse","reduce","decorator","ConnectivityManager","Module","name","deps","dep","optional","computed","that","_deps","connectivityMonitor","networkLoss","connectivity","proxyRetryCount","isVoIPOnlyModeActivated","isLimitedModeActivated","webphoneAvailable","webphoneUnavailable","connectivityType","_RcModuleV","_super","onInitOnce","_this","watch","ready","showConnectivityAlert","_checkWebphoneAndConnect","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","callingSettings","isWebphoneMode","abrupt","audioSettings","showAlert","getUserMedia","webphone","connect","force","skipConnectDelay","stop","checkWebphoneAndConnect","_checkStatus","_callee2","_callee2$","_context2","availabilityMonitor","healthCheck","checkStatus","_showAlert","message","alert","danger","allowDuplicates","_hideAlerts","alertIds","messages","filter","m","type","connectivityTypes","map","id","dismiss","_showConnectivityAlert","_callee3","_callee3$","_context3","get","auth","loggedIn","userMedia","connected","_this$_deps$callingSe","disconnected","connecting","connectFailed","_this$_deps$webphone","reconnecting","connectError","inactive","oAuth","isVoIPOnlyMode","isLimitedMode","hasLimitedStatusError","offline","voipOnly","serverUnavailable","survival","mode","RcModuleV2","proxify","getOwnPropertyDescriptor","exports"],"sources":["modules/ConnectivityManager/ConnectivityManager.ts"],"sourcesContent":["import { Module } from '@ringcentral-integration/commons/lib/di';\nimport { proxify } from '@ringcentral-integration/commons/lib/proxy/proxify';\nimport { computed, RcModuleV2, watch } from '@ringcentral-integration/core';\n\nimport type { Deps } from './ConnectivityManager.interface';\nimport { connectivityTypes } from './connectivityTypes';\n\n@Module({\n  name: 'ConnectivityManager',\n  deps: [\n    'Alert',\n    'OAuth',\n    'Auth',\n    'ConnectivityMonitor',\n    { dep: 'AvailabilityMonitor', optional: true },\n    { dep: 'CallingSettings', optional: true },\n    { dep: 'AudioSettings', optional: true },\n    { dep: 'Webphone', optional: true },\n  ],\n})\nclass ConnectivityManager extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n  }\n\n  override onInitOnce() {\n    watch(\n      this,\n      () => this.connectivityType,\n      () => {\n        if (this.ready) {\n          this.showConnectivityAlert();\n        }\n      },\n    );\n  }\n\n  @proxify\n  async checkWebphoneAndConnect() {\n    if (\n      !this._deps.callingSettings ||\n      (this._deps.callingSettings &&\n        (!this._deps.callingSettings.ready ||\n          !this._deps.callingSettings.isWebphoneMode))\n    ) {\n      return;\n    }\n    if (this._deps.audioSettings && this._deps.audioSettings.ready) {\n      this._deps.audioSettings.showAlert();\n      this._deps.audioSettings.getUserMedia();\n    }\n    if (this._deps.webphone && this._deps.webphone.ready) {\n      this._deps.webphone.connect({ force: true, skipConnectDelay: true });\n    }\n  }\n\n  @proxify\n  async checkStatus() {\n    if (!this._deps.availabilityMonitor) {\n      return;\n    }\n\n    this._deps.availabilityMonitor.healthCheck();\n  }\n\n  _showAlert(message: string) {\n    if (message) {\n      this._deps.alert.danger({\n        message,\n        allowDuplicates: false,\n      });\n    }\n  }\n\n  _hideAlerts() {\n    const alertIds = this._deps.alert.messages\n      .filter((m) => {\n        for (const type in connectivityTypes) {\n          if (\n            m.message ===\n            connectivityTypes[type as keyof typeof connectivityTypes]\n          )\n            return true;\n        }\n        return false;\n      })\n      .map((m) => m.id);\n    if (alertIds.length) {\n      this._deps.alert.dismiss(alertIds);\n    }\n  }\n\n  @proxify\n  async showConnectivityAlert() {\n    if (\n      !this.connectivityType ||\n      this.connectivityType === connectivityTypes.webphoneUnavailable\n    ) {\n      this._hideAlerts();\n    } else {\n      this._showAlert(this.connectivityType);\n    }\n  }\n\n  get webphoneAvailable() {\n    return (\n      this._deps.webphone &&\n      this._deps.callingSettings &&\n      this._deps.audioSettings &&\n      this._deps.audioSettings.ready &&\n      this._deps.callingSettings.ready &&\n      this._deps.auth.ready &&\n      this._deps.auth.loggedIn &&\n      this._deps.callingSettings.isWebphoneMode &&\n      this._deps.audioSettings.userMedia &&\n      this._deps.webphone.connected\n    );\n  }\n\n  get isWebphoneInitializing() {\n    return (\n      !!this._deps.callingSettings?.isWebphoneMode &&\n      // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n      (!this._deps.webphone.ready ||\n        // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n        this._deps.webphone.disconnected ||\n        // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n        this._deps.webphone.connecting ||\n        // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n        this._deps.webphone.connectFailed)\n    );\n  }\n\n  get webphoneConnecting() {\n    return (\n      !!this._deps.webphone?.ready &&\n      (this._deps.webphone.connecting || this._deps.webphone.reconnecting)\n    );\n  }\n\n  get webphoneUnavailable() {\n    return (\n      this._deps.webphone &&\n      this._deps.callingSettings &&\n      this._deps.audioSettings &&\n      this._deps.audioSettings.ready &&\n      this._deps.auth.ready &&\n      this._deps.auth.loggedIn &&\n      this._deps.callingSettings.isWebphoneMode &&\n      (!this._deps.audioSettings.userMedia ||\n        this._deps.webphone.reconnecting ||\n        this._deps.webphone.connectError ||\n        this._deps.webphone.inactive)\n    );\n  }\n\n  // TODO: fix oAuth type\n  get proxyRetryCount(): boolean {\n    // @ts-expect-error TS(2339): Property 'proxyRetryCount' does not exist on type ... Remove this comment to see the full error message\n    return this._deps.oAuth && this._deps.oAuth.proxyRetryCount > 0;\n  }\n\n  get isVoIPOnlyModeActivated() {\n    return (\n      !!this._deps.availabilityMonitor &&\n      this._deps.availabilityMonitor.isVoIPOnlyMode\n    );\n  }\n\n  get isLimitedModeActivated() {\n    return (\n      !!this._deps.availabilityMonitor &&\n      this._deps.availabilityMonitor.isLimitedMode\n    );\n  }\n\n  get hasLimitedStatusError() {\n    return (\n      !!this._deps.availabilityMonitor &&\n      this._deps.availabilityMonitor.hasLimitedStatusError\n    );\n  }\n\n  @computed((that: ConnectivityManager) => [\n    that._deps.connectivityMonitor.networkLoss,\n    that._deps.connectivityMonitor.connectivity,\n    that.proxyRetryCount,\n    that.isVoIPOnlyModeActivated,\n    that.isLimitedModeActivated,\n    that.webphoneAvailable,\n    that.webphoneUnavailable,\n  ])\n  get connectivityType() {\n    if (this._deps.connectivityMonitor.networkLoss)\n      return connectivityTypes.networkLoss;\n    if (this.proxyRetryCount) return connectivityTypes.offline;\n    if (!this._deps.connectivityMonitor.connectivity)\n      return connectivityTypes.offline;\n    if (this.isVoIPOnlyModeActivated) {\n      if (this.webphoneAvailable) return connectivityTypes.voipOnly;\n      return connectivityTypes.serverUnavailable;\n    }\n    if (this.webphoneUnavailable) return connectivityTypes.webphoneUnavailable;\n    if (this.isLimitedModeActivated) return connectivityTypes.survival;\n    return null;\n  }\n\n  @computed((that: ConnectivityManager) => [that.connectivityType])\n  get mode() {\n    if (\n      this.connectivityType === connectivityTypes.networkLoss ||\n      this.connectivityType === connectivityTypes.serverUnavailable\n    )\n      return connectivityTypes.offline;\n    return this.connectivityType;\n  }\n\n  get isWebphoneUnavailableMode() {\n    return this.mode === connectivityTypes.webphoneUnavailable;\n  }\n\n  get isOfflineMode() {\n    return this.mode === connectivityTypes.offline;\n  }\n\n  get isVoipOnlyMode() {\n    return this.mode === connectivityTypes.voipOnly;\n  }\n}\n\nexport { ConnectivityManager };\n"],"mappings":"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"}