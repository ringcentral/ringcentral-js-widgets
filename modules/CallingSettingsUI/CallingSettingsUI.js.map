{"version":3,"sources":["modules/CallingSettingsUI/CallingSettingsUI.tsx"],"names":["CallingSettingsUI","name","deps","dep","optional","brandCode","_deps","brand","code","brandName","shortBrandName","shortName","fullBrandName","fullName","currentLocale","locale","callWithOptions","callingSettings","callWith","myLocation","ringoutPrompt","defaultRingoutPrompt","availableNumbersWithLabel","disabled","webphone","sessions","length","showSpinner","locationSearchable","showRingToneSettings","ringtoneSettings","isChangeRingToneAllowed","incomingAudioFile","incomingAudio","outgoingAudioFile","outgoingAudio","defaultIncomingAudioFile","defaultIncomingAudio","defaultOutgoingAudioFile","defaultOutgoingAudio","jupiterAppName","onBackButtonClick","routerInteraction","goBack","onSave","isCustomLocation","setData","callingOptions","browser","setRingtone","ready","callingSettingsUIOptions","RcUIModuleV2"],"mappings":"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","sourcesContent":["import { Module } from '@ringcentral-integration/commons/lib/di';\nimport {\n  RcUIModuleV2,\n  UIProps,\n  UIFunctions,\n} from '@ringcentral-integration/core';\nimport callingOptions from '@ringcentral-integration/commons/modules/CallingSettings/callingOptions';\nimport { CallingSettingsPanelProps } from '../../components/CallingSettingsPanel/CallingSettingsPenal.interface';\nimport { Deps } from './CallingSettingsUI.interface';\n\n@Module({\n  name: 'CallingSettingsUI',\n  deps: [\n    'CallingSettings',\n    'Brand',\n    'Locale',\n    'RouterInteraction',\n    { dep: 'Webphone', optional: true },\n    { dep: 'CallingSettingsUIOptions', optional: true },\n  ],\n})\nclass CallingSettingsUI<T extends Deps = Deps> extends RcUIModuleV2<T> {\n  constructor(deps: T) {\n    super({ deps });\n  }\n\n  get showSpinner() {\n    return !(\n      this._deps.callingSettings.ready &&\n      this._deps.brand.ready &&\n      this._deps.locale.ready &&\n      (!this._deps.webphone || this._deps.webphone.ready) &&\n      this._deps.routerInteraction.ready\n    );\n  }\n\n  get locationSearchable() {\n    return !!(this._deps.callingSettingsUIOptions?.locationSearchable ?? true);\n  }\n\n  get ringtoneSettings() {\n    return !!(this._deps.callingSettingsUIOptions?.ringtoneSettings ?? false);\n  }\n\n  getUIProps(): UIProps<CallingSettingsPanelProps> {\n    return {\n      brandCode: this._deps.brand.code,\n      brandName: this._deps.brand.name,\n      shortBrandName: this._deps.brand.shortName,\n      fullBrandName: this._deps.brand.fullName,\n      currentLocale: this._deps.locale.currentLocale,\n      callWithOptions: this._deps.callingSettings.callWithOptions,\n      callWith: this._deps.callingSettings.callWith,\n      myLocation: this._deps.callingSettings.myLocation,\n      ringoutPrompt: this._deps.callingSettings.ringoutPrompt,\n      defaultRingoutPrompt: this._deps.callingSettings.defaultRingoutPrompt,\n      availableNumbersWithLabel: this._deps.callingSettings\n        .availableNumbersWithLabel,\n      disabled: !!(\n        this._deps.webphone && this._deps.webphone.sessions.length > 0\n      ),\n      showSpinner: this.showSpinner,\n      locationSearchable: this.locationSearchable,\n      showRingToneSettings:\n        this.ringtoneSettings &&\n        this._deps.callingSettings.isChangeRingToneAllowed,\n      incomingAudioFile: this._deps.webphone?.incomingAudioFile,\n      incomingAudio: this._deps.webphone?.incomingAudio,\n      outgoingAudioFile: this._deps.webphone?.outgoingAudioFile,\n      outgoingAudio: this._deps.webphone?.outgoingAudio,\n      defaultIncomingAudioFile: this._deps.webphone?.defaultIncomingAudioFile,\n      defaultIncomingAudio: this._deps.webphone?.defaultIncomingAudio,\n      defaultOutgoingAudioFile: this._deps.webphone?.outgoingAudioFile,\n      defaultOutgoingAudio: this._deps.webphone?.outgoingAudio,\n      jupiterAppName: this._deps.callingSettings.jupiterAppName,\n    };\n  }\n\n  getUIFunctions(): UIFunctions<CallingSettingsPanelProps> {\n    return {\n      onBackButtonClick: () => this._deps.routerInteraction.goBack(),\n      onSave: ({\n        callWith,\n        myLocation,\n        ringoutPrompt,\n        isCustomLocation,\n        incomingAudio,\n        incomingAudioFile,\n        outgoingAudio,\n        outgoingAudioFile,\n      }) => {\n        this._deps.callingSettings.setData(\n          {\n            callWith,\n            myLocation,\n            ringoutPrompt,\n            isCustomLocation,\n          },\n          true,\n        );\n        if (this._deps.webphone && callWith === callingOptions.browser) {\n          this._deps.webphone.setRingtone({\n            incomingAudio,\n            incomingAudioFile,\n            outgoingAudio,\n            outgoingAudioFile,\n          });\n        }\n      },\n    };\n  }\n}\n\nexport { CallingSettingsUI };\n"],"file":"CallingSettingsUI.js"}