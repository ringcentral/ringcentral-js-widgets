{"version":3,"sources":["modules/CallingSettingsUI/CallingSettingsUI.tsx"],"names":["CallingSettingsUI","name","deps","dep","optional","currentLocale","_deps","locale","callWithOptions","callingSettings","callWith","myLocation","ringoutPrompt","defaultRingoutPrompt","availableNumbersWithLabel","disabled","webphone","sessions","length","showSpinner","locationSearchable","showRingToneSettings","ringtoneSettings","isChangeRingToneAllowed","incomingAudioFile","incomingAudio","outgoingAudioFile","outgoingAudio","defaultIncomingAudioFile","defaultIncomingAudio","defaultOutgoingAudioFile","defaultOutgoingAudio","jupiterAppName","softphoneAppName","brand","brandConfig","callWithSoftphone","onBackButtonClick","routerInteraction","goBack","onSave","isCustomLocation","setData","callingOptions","browser","setRingtone","ready","callingSettingsUIOptions","RcUIModuleV2"],"mappings":"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","sourcesContent":["import { Module } from '@ringcentral-integration/commons/lib/di';\nimport callingOptions from '@ringcentral-integration/commons/modules/CallingSettings/callingOptions';\nimport {\n  RcUIModuleV2,\n  UIFunctions,\n  UIProps,\n} from '@ringcentral-integration/core';\n\nimport { CallingSettingsPanelProps } from '../../components/CallingSettingsPanel/CallingSettingsPenal.interface';\nimport { Deps } from './CallingSettingsUI.interface';\n\n@Module({\n  name: 'CallingSettingsUI',\n  deps: [\n    'CallingSettings',\n    'Brand',\n    'Locale',\n    'RouterInteraction',\n    { dep: 'Webphone', optional: true },\n    { dep: 'CallingSettingsUIOptions', optional: true },\n  ],\n})\nclass CallingSettingsUI<T extends Deps = Deps> extends RcUIModuleV2<T> {\n  constructor(deps: T) {\n    super({ deps });\n  }\n\n  get showSpinner() {\n    return !(\n      this._deps.callingSettings.ready &&\n      this._deps.brand.ready &&\n      this._deps.locale.ready &&\n      (!this._deps.webphone || this._deps.webphone.ready) &&\n      this._deps.routerInteraction.ready\n    );\n  }\n\n  get locationSearchable() {\n    return !!(this._deps.callingSettingsUIOptions?.locationSearchable ?? true);\n  }\n\n  get ringtoneSettings() {\n    return !!(this._deps.callingSettingsUIOptions?.ringtoneSettings ?? false);\n  }\n\n  getUIProps(): UIProps<CallingSettingsPanelProps> {\n    return {\n      currentLocale: this._deps.locale.currentLocale,\n      callWithOptions: this._deps.callingSettings.callWithOptions,\n      callWith: this._deps.callingSettings.callWith,\n      myLocation: this._deps.callingSettings.myLocation,\n      ringoutPrompt: this._deps.callingSettings.ringoutPrompt,\n      defaultRingoutPrompt: this._deps.callingSettings.defaultRingoutPrompt,\n      availableNumbersWithLabel:\n        this._deps.callingSettings.availableNumbersWithLabel,\n      disabled: !!(\n        this._deps.webphone && this._deps.webphone.sessions.length > 0\n      ),\n      showSpinner: this.showSpinner,\n      locationSearchable: this.locationSearchable,\n      showRingToneSettings:\n        this.ringtoneSettings &&\n        this._deps.callingSettings.isChangeRingToneAllowed,\n      incomingAudioFile: this._deps.webphone?.incomingAudioFile,\n      incomingAudio: this._deps.webphone?.incomingAudio,\n      outgoingAudioFile: this._deps.webphone?.outgoingAudioFile,\n      outgoingAudio: this._deps.webphone?.outgoingAudio,\n      defaultIncomingAudioFile: this._deps.webphone?.defaultIncomingAudioFile,\n      defaultIncomingAudio: this._deps.webphone?.defaultIncomingAudio,\n      defaultOutgoingAudioFile: this._deps.webphone?.outgoingAudioFile,\n      defaultOutgoingAudio: this._deps.webphone?.outgoingAudio,\n      jupiterAppName: this._deps.callingSettings.jupiterAppName,\n      softphoneAppName: this._deps.brand.brandConfig.callWithSoftphone?.name,\n    };\n  }\n\n  getUIFunctions(): UIFunctions<CallingSettingsPanelProps> {\n    return {\n      onBackButtonClick: () => this._deps.routerInteraction.goBack(),\n      onSave: ({\n        callWith,\n        myLocation,\n        ringoutPrompt,\n        isCustomLocation,\n        incomingAudio,\n        incomingAudioFile,\n        outgoingAudio,\n        outgoingAudioFile,\n      }) => {\n        this._deps.callingSettings.setData(\n          {\n            callWith,\n            myLocation,\n            ringoutPrompt,\n            isCustomLocation,\n          },\n          true,\n        );\n        if (this._deps.webphone && callWith === callingOptions.browser) {\n          this._deps.webphone.setRingtone({\n            incomingAudio,\n            incomingAudioFile,\n            outgoingAudio,\n            outgoingAudioFile,\n          });\n        }\n      },\n    };\n  }\n}\n\nexport { CallingSettingsUI };\n"],"file":"CallingSettingsUI.js"}