{"version":3,"file":"RingCentralExtensions.js","names":["_isomorphicWs","_interopRequireDefault","require","_core","_debug","_rcsdk","_ws","_interopRequireWildcard","_core2","_background","_debounceThrottle","_di","_proxify","_webSocketReadyStates","_dec","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","err","undefined","_initializerDefineProperty","property","descriptor","context","initializer","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","_createClass","protoProps","staticProps","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_initializerWarningHelper","Error","_applyDecoratedDescriptor","decorators","slice","reverse","reduce","decorator","RECOVER_DEBOUNCE_THRESHOLD","process","env","NODE_ENV","InactiveTabEventName","exports","SyncTokensTabEventName","RingCentralExtensions","Module","name","deps","dep","optional","_RcModuleV","_super","_this","enableCache","storageKey","_webSocketExtension","_removeWsListener","_wsConnectionReady","_debouncedOnTabActive","debounce","threshold","_onTabActive","_syncWsReadyState","_this$_webSocketExten","readyState","ws","_setWebSocketReadyState","_onInitOnce","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","_setupInfra","_bindEvents","stop","onInitOnce","_onInitSuccess","_callee2","_callee2$","_context2","recoverWebSocketConnection","t0","console","log","concat","onInitSuccess","_setupInfra2","_callee4","_this$_deps$ringCentr2","_wsOptions$wscToken","_this$wscToken","_this2","_this$_deps$ringCentr","debugExtension","rcSdkExtension","wsOptions","_callee4$","_context4","CoreExtension","debugMode","DebugExtension","_deps","ringCentralExtensionsOptions","debugOptions","installExtension","RcSdkExtension","rcSdk","sdk","webSocketOptions","WebSocketExtension","wscToken","token","_useTokens","eventEmitter","addListener","Events","newWsc","_saveTokens","newWebSocketObject","_ref","_callee3","_ws$_onCreated","_callee3$","_context3","_onCreated","_exposeConnectionEvents","_x","connectionReady","auth","loggedIn","disconnectOnInactive","isTabActive","_installWebSocketExtension","_installWebSocketExtension2","_callee5","_callee5$","_context5","allowSwitchConnection","abrupt","_bindEvents2","_callee7","_this$_webSocketExten2","_this3","_this$_deps$sleepDete","_callee7$","_context7","options","autoRecover","enabled","autoRecoverSuccess","autoRecoverFailed","sleepDetector","on","addAfterLoggedInHandler","addBeforeLogoutHandler","revokeWebSocketConnection","_setSharedState","watch","isWebSocketReady","_ref2","_callee6","tabActive","_callee6$","_context6","cancel","_x2","allow","tabManager","event","_tabMessageHandler","_inactiveOtherTabs","availabilityMonitor","id","setSharedState","webSocketReady","_onTabActive2","_callee8","_callee8$","_context8","ready","_setTokens","_inactiveOtherTabs2","_callee9","_this$_deps$tabManage","_this$_deps$ringCentr3","_this$_deps$ringCentr4","_this$_deps$ringCentr5","_callee9$","_context9","send","_syncTokensToOtherTabs2","_callee10","_this$_deps$tabManage2","_callee10$","_context10","wsToken","wsTokenExpiresAt","_syncTokensToOtherTabs","wsc","_clearTokens","_recoverWebSocketConnection","_callee11","_callee11$","_context11","rc","recover","_revokeWebSocketConnection","_callee12","_callee12$","_context12","revoke","_this$_removeWsListen","_this4","addEventListener","removeEventListener","state","WebSocket","CONNECTING","webSocketReadyStates","connecting","OPEN","open","CLOSING","closing","CLOSED","closed","webSocketReadyState","_this$_deps$ringCentr6","_this$_deps$ringCentr7","active","_this$_deps$ringCentr8","_this$_deps$ringCentr9","client","service","_this$_deps$availabil","_this$_deps$availabil2","hasCallSession","hasWebSocketReady","RcModuleV2","background","action","storage","proxify"],"sources":["modules/RingCentralExtensions/RingCentralExtensions.ts"],"sourcesContent":["import WebSocket from 'isomorphic-ws';\n\nimport CoreExtension from '@rc-ex/core';\nimport DebugExtension from '@rc-ex/debug';\nimport RcSdkExtension from '@rc-ex/rcsdk';\nimport WebSocketExtension, { Events } from '@rc-ex/ws';\nimport type { Wsc, WsToken } from '@rc-ex/ws/lib/types';\nimport {\n  action,\n  RcModuleV2,\n  state,\n  storage,\n  watch,\n} from '@ringcentral-integration/core';\nimport type { SDK } from '@ringcentral/sdk';\n\nimport background from '../../lib/background';\nimport { debounce } from '../../lib/debounce-throttle';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport type { TabEvent } from '../TabManager';\nimport type { Deps } from './RingCentralExtensions.interface';\nimport type { WebSocketReadyState } from './webSocketReadyStates';\nimport { webSocketReadyStates } from './webSocketReadyStates';\n\nconst RECOVER_DEBOUNCE_THRESHOLD = process.env.NODE_ENV === 'test' ? 0 : 1000;\nexport const InactiveTabEventName = 'RingCentralExtensions-inactive';\nexport const SyncTokensTabEventName = 'RingCentralExtensions-syncTokens';\n\n@Module({\n  name: 'RingCentralExtensions',\n  deps: [\n    'Auth',\n    'Client',\n    'Storage',\n    { dep: 'TabManager', optional: true },\n    { dep: 'SleepDetector', optional: true },\n    { dep: 'AvailabilityMonitor', optional: true },\n    { dep: 'RingCentralExtensionsOptions', optional: true },\n  ],\n})\nexport class RingCentralExtensions extends RcModuleV2<Deps> {\n  // infra\n  private _core!: CoreExtension;\n  private _webSocketExtension!: WebSocketExtension;\n  // refs\n  private _removeWsListener?: () => void;\n  private _wsConnectionReady?: boolean;\n\n  constructor(deps: Deps) {\n    super({\n      deps,\n      enableCache: true,\n      storageKey: 'RingCentralExtensions',\n    });\n  }\n\n  override async onInitOnce() {\n    await this._setupInfra();\n    await this._bindEvents();\n  }\n\n  override async onInitSuccess() {\n    // to do: force recoverWebSocketConnection after user re-logins the CTI\n    try {\n      await this.recoverWebSocketConnection();\n    } catch (e: any /** TODO: confirm with instanceof */) {\n      if (process.env.NODE_ENV !== 'test') {\n        console.log(`onInitSuccess error: ${e}`);\n      }\n    }\n  }\n\n  @background\n  private async _setupInfra() {\n    this._core = new CoreExtension();\n\n    // install DebugExtension\n    if (process.env.NODE_ENV !== 'production' && this.debugMode) {\n      const debugExtension = new DebugExtension(\n        this._deps.ringCentralExtensionsOptions?.debugOptions,\n      );\n      await this._core.installExtension(debugExtension);\n    }\n\n    // install RcSdkExtension\n    const rcSdkExtension = new RcSdkExtension({ rcSdk: this.sdk });\n    await this._core.installExtension(rcSdkExtension);\n\n    // install WebSocketExtension\n    const wsOptions = this._deps.ringCentralExtensionsOptions?.webSocketOptions;\n    this._webSocketExtension = new WebSocketExtension({\n      ...wsOptions,\n      wscToken: wsOptions?.wscToken ?? this.wscToken?.token,\n    });\n    this._useTokens();\n    this._webSocketExtension.eventEmitter.addListener(Events.newWsc, () => {\n      this._saveTokens();\n    });\n    // expose WebSocket events\n    this._webSocketExtension.eventEmitter.addListener(\n      Events.newWebSocketObject,\n      async (ws) => {\n        // TODO: should mock correct from @rc-ex/ws\n        // for mock WebSocket used\n        await ws._onCreated?.();\n        // expose events\n        this._exposeConnectionEvents();\n      },\n    );\n    this._webSocketExtension.eventEmitter.addListener(\n      Events.connectionReady,\n      () => {\n        this._wsConnectionReady = true;\n        this._syncWsReadyState();\n      },\n    );\n    if (\n      this._deps.auth.loggedIn &&\n      (!this.disconnectOnInactive || this.isTabActive)\n    ) {\n      await this._installWebSocketExtension();\n    }\n  }\n\n  private async _installWebSocketExtension() {\n    if (!this.allowSwitchConnection) {\n      return;\n    }\n    try {\n      if (process.env.NODE_ENV !== 'test') {\n        console.log('[RingCentralExtensions] > WebSocketExtension > install');\n      }\n      await this._core.installExtension(this._webSocketExtension);\n    } catch (ex) {\n      // It tries to establish connection on install.\n      // Catch the connection issue and ignore.\n      if (process.env.NODE_ENV !== 'test') {\n        console.error(\n          '[RingCentralExtensions] > WebSocketExtension > install failed',\n          ex,\n        );\n      }\n    }\n  }\n\n  @background\n  private async _bindEvents() {\n    if (this._webSocketExtension.options.autoRecover?.enabled) {\n      this._webSocketExtension.eventEmitter.addListener(\n        Events.autoRecoverSuccess,\n        () => {\n          this._exposeConnectionEvents();\n        },\n      );\n      this._webSocketExtension.eventEmitter.addListener(\n        Events.autoRecoverFailed,\n        () => {\n          this._exposeConnectionEvents();\n        },\n      );\n    }\n\n    // register SleepDetector\n    this._deps.sleepDetector?.on('detected', () => {\n      this.recoverWebSocketConnection();\n    });\n\n    // hook auth events\n    this._deps.auth.addAfterLoggedInHandler(() => {\n      this.recoverWebSocketConnection();\n    });\n    this._deps.auth.addBeforeLogoutHandler(() => {\n      this.revokeWebSocketConnection();\n    });\n\n    // multiple tabs support\n    if (this.disconnectOnInactive) {\n      this._setSharedState();\n      watch(\n        this,\n        () => this.isWebSocketReady,\n        () => {\n          this._setSharedState();\n        },\n      );\n      watch(\n        this,\n        () => this.isTabActive,\n        async (tabActive) => {\n          if (tabActive) {\n            if (process.env.NODE_ENV !== 'test') {\n              console.log('[RingCentralExtensions] > tab > active');\n            }\n            await this._debouncedOnTabActive();\n          } else {\n            if (process.env.NODE_ENV !== 'test') {\n              console.log('[RingCentralExtensions] > tab > inactive');\n            }\n            await this._debouncedOnTabActive.cancel();\n          }\n        },\n      );\n      watch(\n        this,\n        () => this.allowSwitchConnection,\n        (allow) => {\n          if (allow && this.isTabActive) {\n            this._onTabActive();\n          }\n        },\n      );\n      watch(\n        this,\n        () => this._deps.tabManager!.event,\n        (event) => {\n          this._tabMessageHandler(event);\n        },\n      );\n      if (this.isTabActive) {\n        // as an active tab, inactive other tabs\n        await this._inactiveOtherTabs();\n      }\n    }\n  }\n\n  private _setSharedState() {\n    if (this._deps.availabilityMonitor && this._deps.tabManager) {\n      const key = `ws-${this._deps.tabManager.id}`;\n      this._deps.availabilityMonitor.setSharedState(key, {\n        webSocketReady: this.isWebSocketReady,\n      });\n    }\n  }\n\n  private _debouncedOnTabActive = debounce({\n    threshold: RECOVER_DEBOUNCE_THRESHOLD,\n    fn: this._onTabActive,\n  });\n\n  private async _onTabActive() {\n    // check if still active after sleep\n    if (!this.ready || !this.isTabActive) {\n      return;\n    }\n    // as an active tab, inactive other tabs\n    await this._inactiveOtherTabs();\n    // recover WebSocket for current tab and other tabs will being disconnected automatically\n    this.recoverWebSocketConnection();\n  }\n\n  private _tabMessageHandler(event: TabEvent) {\n    if (!this.ready || !event) {\n      return;\n    }\n    if (event.name === InactiveTabEventName) {\n      // as an inactive tab, disable auto recover\n      this._webSocketExtension.options.autoRecover!.enabled = false;\n    } else if (event.name === SyncTokensTabEventName) {\n      // as an inactive tab, sync and use with tokens that are received from active tab\n      this._setTokens(event.args![0], event.args![1], event.args![2]);\n      this._useTokens();\n    }\n  }\n\n  private async _inactiveOtherTabs() {\n    if (!this.allowSwitchConnection) {\n      return;\n    }\n    // inactive other tabs, for stopping WebSocket auto recover\n    await this._deps.tabManager?.send(InactiveTabEventName);\n    // when auto recover of active tab is NOT configured as disabled\n    if (\n      this._deps.ringCentralExtensionsOptions?.webSocketOptions?.autoRecover\n        ?.enabled !== false\n    ) {\n      // enable auto recover\n      this._webSocketExtension.options.autoRecover!.enabled = true;\n    }\n  }\n\n  private async _syncTokensToOtherTabs() {\n    // sync required tokens to other tabsï¼Œ so that other tabs can recover connection with latest tokens as needed\n    // although tokens that are in storage are already synced, still we pass tokens manually for sync in time\n    await this._deps.tabManager?.send(\n      SyncTokensTabEventName,\n      this.wsToken,\n      this.wsTokenExpiresAt,\n      this.wscToken,\n    );\n  }\n\n  private _useTokens() {\n    this._webSocketExtension.wsToken = this.wsToken as WsToken;\n    this._webSocketExtension.wsTokenExpiresAt = this.wsTokenExpiresAt;\n    this._webSocketExtension.wsc = this.wscToken as Wsc;\n  }\n\n  private _saveTokens() {\n    this._setTokens(\n      this._webSocketExtension.wsToken,\n      this._webSocketExtension.wsTokenExpiresAt,\n      this._webSocketExtension.wsc,\n    );\n    if (this.disconnectOnInactive) {\n      this._syncTokensToOtherTabs();\n    }\n  }\n\n  private _clearTokens() {\n    this._setTokens(null, 0, null);\n    if (this.disconnectOnInactive) {\n      this._syncTokensToOtherTabs();\n    }\n  }\n\n  @action\n  private _setTokens(\n    wsToken?: WsToken | null,\n    wsTokenExpiresAt?: number,\n    wscToken?: Wsc | null,\n  ) {\n    this.wsToken = wsToken ?? null;\n    this.wsTokenExpiresAt = wsTokenExpiresAt ?? 0;\n    this.wscToken = wscToken ?? null;\n  }\n\n  @storage\n  @state\n  wsToken?: WsToken | null = null;\n\n  @storage\n  @state\n  wsTokenExpiresAt = 0;\n\n  @storage\n  @state\n  wscToken?: Wsc | null = null;\n\n  @proxify\n  async recoverWebSocketConnection() {\n    if (!this.ready) {\n      return;\n    }\n    if (!this._deps.auth.loggedIn) {\n      return;\n    }\n    if (this.disconnectOnInactive && !this.isTabActive) {\n      return;\n    }\n    if (!this.allowSwitchConnection) {\n      return;\n    }\n    // detect if not yet installed\n    if (!this._webSocketExtension.rc) {\n      // install and establish connection\n      await this._installWebSocketExtension();\n    } else {\n      // recover directly\n      await this._webSocketExtension.recover();\n    }\n    this._exposeConnectionEvents();\n  }\n\n  @proxify\n  async revokeWebSocketConnection() {\n    if (!this.ready || !this.isWebSocketReady) {\n      return;\n    }\n    if (this.disconnectOnInactive && !this.isTabActive) {\n      return;\n    }\n    await this._webSocketExtension.revoke(true);\n    this._exposeConnectionEvents();\n    this._clearTokens();\n  }\n\n  private _exposeConnectionEvents() {\n    this._removeWsListener?.();\n\n    const { ws } = this._webSocketExtension;\n\n    if (ws) {\n      ws.addEventListener('close', this._syncWsReadyState);\n      ws.addEventListener('open', this._syncWsReadyState);\n      ws.addEventListener('error', this._syncWsReadyState);\n\n      this._removeWsListener = () => {\n        ws.removeEventListener('close', this._syncWsReadyState);\n        ws.removeEventListener('open', this._syncWsReadyState);\n        ws.removeEventListener('error', this._syncWsReadyState);\n      };\n    }\n\n    this._syncWsReadyState();\n  }\n\n  private _syncWsReadyState = () => {\n    const readyState = this._webSocketExtension.ws?.readyState;\n    this._setWebSocketReadyState(readyState);\n  };\n\n  @action\n  private _setWebSocketReadyState(\n    readyState: WebSocketExtension['ws']['readyState'],\n  ) {\n    let state: WebSocketReadyState | null;\n    switch (readyState) {\n      case WebSocket.CONNECTING: {\n        state = webSocketReadyStates.connecting;\n        break;\n      }\n      case WebSocket.OPEN: {\n        if (this._wsConnectionReady) {\n          state = webSocketReadyStates.ready;\n        } else {\n          state = webSocketReadyStates.open;\n        }\n        break;\n      }\n      case WebSocket.CLOSING: {\n        state = webSocketReadyStates.closing;\n        break;\n      }\n      case WebSocket.CLOSED: {\n        state = webSocketReadyStates.closed;\n        this._wsConnectionReady = false;\n        break;\n      }\n      default: {\n        state = null;\n        this._wsConnectionReady = undefined;\n        break;\n      }\n    }\n    if (process.env.NODE_ENV !== 'test' && this.webSocketReadyState !== state) {\n      console.log(\n        `[RingCentralExtensions] > webSocketReadyState > ${this.webSocketReadyState} -> ${state}`,\n      );\n    }\n    this.webSocketReadyState = state;\n  }\n\n  @state\n  webSocketReadyState?: WebSocketReadyState | null = null;\n\n  get isWebSocketReady() {\n    return this.webSocketReadyState === webSocketReadyStates.ready;\n  }\n\n  get debugMode(): boolean {\n    return this._deps.ringCentralExtensionsOptions?.debugMode ?? false;\n  }\n\n  get isTabActive(): boolean {\n    return !!(\n      this._deps.tabManager &&\n      this._deps.tabManager.ready &&\n      this._deps.tabManager.active\n    );\n  }\n\n  get disconnectOnInactive(): boolean {\n    return (\n      this._deps.ringCentralExtensionsOptions?.disconnectOnInactive ?? false\n    );\n  }\n\n  get sdk(): SDK {\n    return this._deps.client.service;\n  }\n\n  get core(): CoreExtension {\n    return this._core;\n  }\n\n  get webSocketExtension(): WebSocketExtension {\n    return this._webSocketExtension;\n  }\n\n  get allowSwitchConnection() {\n    if (\n      this._deps.availabilityMonitor?.hasCallSession &&\n      this._deps.availabilityMonitor?.hasWebSocketReady\n    ) {\n      return false;\n    }\n    return true;\n  }\n}\n"],"mappings":"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"}