{"version":3,"file":"UserGuide.js","names":["_core","require","_ramda","_trackEvents","_di","_proxify","_excluded","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","hasOwnProperty","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","keys","forEach","slice","reverse","reduce","_initializerWarningHelper","Error","SUPPORTED_LOCALES","exports","getFileName","fileUrl","_fileUrl$split$pop","split","pop","anyFileDiff","urls1","urls2","files1","map","url","files2","JSON","stringify","UserGuide","Module","name","deps","dep","optional","track","that","options","curIdx","playing","trackEvents","whatsNew","computed","_deps","locale","ready","allGuides","brand","code","currentLocale","_RcModuleV","_this","enableCache","storageKey","setPreLoadImageStatus","preLoadImageStatus","setGuides","guides","_this$allGuides$this$","oldGuides","_i","_Object$keys","start","firstLogin","_migrateGuides","_this2","setCarousel","_ref","carouselState","_onInitSuccess","_callee","_context","hasPermission","initUserGuide","onInitSuccess","_shouldInit","pending","auth","loggedIn","storage","appFeatures","_shouldReset","onInitOnce","_this3","watch","webphone","ringSession","dismiss","brandConfig","_callee2","_context2","_preLoadImage2","_callee3","_context3","reject","img","Image","src","onload","onerror","_preLoadImage","_x","_preLoadImage3","_callee4","_t","_context4","console","warn","preLoadImage","resolveGuides","_this$_deps$brand$bra","images","assets","locales","acc","curr","includes","push","_dismiss","_callee5","_context5","entered","updateCarousel","_updateCarousel","_callee6","_ref3","_ref3$firstLogin","_context6","_x2","get","isCallingEnabled","hasReadMessagesPermission","_initUserGuide","_callee7","_context7","_start","_callee8","_ref4","_ref4$firstLogin","_args8","_context8","undefined","brandGuides","currentGuides","RcModuleV2","state","action","getOwnPropertyDescriptor","proxify"],"sources":["modules/UserGuide/UserGuide.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n  storage,\n  track,\n  watch,\n} from '@ringcentral-integration/core';\nimport { includes } from 'ramda';\n\nimport { trackEvents } from '../../enums/trackEvents';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\n\nimport type {\n  CarouselOptions,\n  CarouselState,\n  Deps,\n  Guides,\n} from './UserGuide.interface';\n\nexport const SUPPORTED_LOCALES = {\n  'en-US': 'en-US',\n  'fr-CA': 'fr-CA',\n};\n\nfunction getFileName(fileUrl: string) {\n  return fileUrl.split('\\\\').pop()?.split('/').pop();\n}\n\n// Since file name has included file MD5, any file name change means file change\nfunction anyFileDiff(urls1: string[], urls2: string[]) {\n  const files1 = (urls1 ?? []).map((url) => getFileName(url));\n  const files2 = (urls2 ?? []).map((url) => getFileName(url));\n  return JSON.stringify(files1) !== JSON.stringify(files2);\n}\n\n@Module({\n  name: 'UserGuide',\n  deps: [\n    'Auth',\n    'Locale',\n    'Storage',\n    'Webphone',\n    'AppFeatures',\n    'Brand',\n    { dep: 'UserGuideOptions', optional: true },\n  ],\n})\nexport class UserGuide extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({\n      deps,\n      enableCache: true,\n      storageKey: 'UserGuide',\n    });\n  }\n\n  @storage\n  @state\n  allGuides: { [key: string]: Guides } = {};\n\n  @state\n  carouselState: CarouselState = {\n    curIdx: 0,\n    entered: false,\n    playing: false,\n  };\n\n  @state\n  preLoadImageStatus = false;\n\n  @state\n  firstLogin = false;\n\n  @action\n  setPreLoadImageStatus() {\n    this.preLoadImageStatus = true;\n  }\n\n  @action\n  setGuides(guides: Guides) {\n    const oldGuides = this.allGuides[this._deps.brand.code] ?? {};\n    this.allGuides[this._deps.brand.code] = guides;\n    for (const locale of Object.keys(SUPPORTED_LOCALES)) {\n      if (anyFileDiff(guides[locale], oldGuides[locale])) {\n        this.start({ firstLogin: true });\n        break;\n      }\n    }\n  }\n\n  @action\n  _migrateGuides() {\n    if (!this.allGuides[this._deps.brand.code]) {\n      this.allGuides[this._deps.brand.code] = {};\n    }\n    Object.keys(SUPPORTED_LOCALES).forEach((locale) => {\n      const allGuides: Guides = this.allGuides as any;\n      if (allGuides[locale]) {\n        this.allGuides[this._deps.brand.code][locale] = allGuides[locale];\n        delete allGuides[locale];\n      }\n    });\n  }\n\n  @track((that: UserGuide, options: Required<CarouselOptions>) => {\n    if (options.curIdx === 0 && options.playing) {\n      return [trackEvents.whatsNew];\n    }\n  })\n  @action\n  setCarousel({ firstLogin, ...carouselState }: Required<CarouselOptions>) {\n    this.carouselState = carouselState;\n    this.firstLogin = firstLogin;\n  }\n\n  override async onInitSuccess() {\n    if (this.hasPermission) {\n      await this.initUserGuide();\n    }\n  }\n\n  override _shouldInit() {\n    return !!(\n      this.pending &&\n      this._deps.auth.ready &&\n      this._deps.auth.loggedIn &&\n      this._deps.locale.ready &&\n      this._deps.storage.ready &&\n      this._deps.appFeatures.ready &&\n      this._deps.brand.ready\n    );\n  }\n\n  override _shouldReset() {\n    return !!(\n      this.ready &&\n      (!this._deps.auth.ready ||\n        !this._deps.locale.ready ||\n        !this._deps.storage.ready ||\n        !this._deps.appFeatures.ready ||\n        !this._deps.brand.ready)\n    );\n  }\n\n  override onInitOnce() {\n    this._migrateGuides();\n    // When there is an incoming call,\n    // the guide should be dismissed\n    watch(\n      this,\n      () => this._deps.webphone.ringSession,\n      (ringSession) => {\n        if (this._deps.webphone.ready && ringSession) {\n          this.dismiss();\n        }\n      },\n    );\n    watch(\n      this,\n      () => this._deps.brand.brandConfig,\n      async () => {\n        if (this.hasPermission) {\n          await this.initUserGuide();\n        }\n      },\n    );\n  }\n\n  @proxify\n  async _preLoadImage(url: string) {\n    await new Promise((resolve, reject) => {\n      const img = new Image();\n      img.src = url;\n      img.onload = resolve;\n      img.onerror = reject;\n    });\n  }\n\n  @proxify\n  async preLoadImage() {\n    const url = this.guides[0];\n    if (url) {\n      try {\n        await this._preLoadImage(url);\n      } catch (ex) {\n        console.warn('[UserGuide] Preload image failed', ex);\n      }\n    }\n    this.setPreLoadImageStatus();\n  }\n\n  resolveGuides(): Record<string, string[]> {\n    const images =\n      (this._deps.brand.brandConfig.assets?.guides as string[]) || [];\n\n    const locales = Object.keys(SUPPORTED_LOCALES);\n    return images.reduce<Record<string, string[]>>((acc, curr: string) => {\n      locales.forEach((locale) => {\n        if (!acc[locale]) {\n          acc[locale] = [];\n        }\n        if (includes(locale, curr)) {\n          acc[locale].push(curr);\n        }\n      });\n      return acc;\n    }, {});\n  }\n\n  @proxify\n  async dismiss() {\n    if (\n      this.carouselState.curIdx !== 0 ||\n      this.carouselState.playing ||\n      this.carouselState.entered ||\n      this.firstLogin\n    ) {\n      this.updateCarousel({\n        curIdx: 0,\n        entered: false,\n        playing: false,\n        firstLogin: false,\n      });\n    }\n  }\n\n  @proxify\n  async updateCarousel({\n    curIdx,\n    entered,\n    playing,\n    firstLogin = this.firstLogin,\n  }: CarouselOptions) {\n    this.setCarousel({\n      curIdx,\n      entered,\n      playing,\n      firstLogin,\n    });\n  }\n\n  get hasPermission() {\n    // For extensions without calling or read message permissions, most of the content in\n    // the user guide is not applicable to them. So we should not show the user guide for\n    // these extensions.\n    return (\n      this._deps.appFeatures.isCallingEnabled ||\n      this._deps.appFeatures.hasReadMessagesPermission\n    );\n  }\n\n  @proxify\n  async initUserGuide() {\n    const guides = this.resolveGuides();\n    // Determine if it needs to be displayed when first log in,\n    // the principles behind this is to use webpack's file hash,\n    // i.e. if any of the guide files is changed, the file name hash\n    // will be changed as well, in this case, it will be displayed.\n    if (guides) {\n      this.setGuides(guides);\n      await this.preLoadImage();\n    }\n  }\n\n  @proxify\n  async start({ firstLogin = false } = {}) {\n    // Start guides only when images are ready\n    this.setCarousel({\n      curIdx: 0,\n      entered: true,\n      playing: true,\n      firstLogin,\n    });\n  }\n\n  @computed((that: UserGuide) => [\n    that._deps.locale.ready,\n    that.allGuides[that._deps.brand.code],\n    that._deps.locale.currentLocale,\n  ])\n  get guides() {\n    if (!this._deps.locale.ready || !this._deps.auth.loggedIn) {\n      return [];\n    }\n    const brandGuides = this.allGuides[this._deps.brand.code];\n    if (brandGuides) {\n      const currentGuides = brandGuides[this._deps.locale.currentLocale];\n      if (currentGuides && currentGuides.length > 0) {\n        return currentGuides;\n      }\n      return brandGuides[SUPPORTED_LOCALES['en-US']] || [];\n    }\n    return [];\n  }\n\n  get started() {\n    return this.carouselState.entered && this.carouselState.playing;\n  }\n}\n"],"mappings":"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","ignoreList":[]}