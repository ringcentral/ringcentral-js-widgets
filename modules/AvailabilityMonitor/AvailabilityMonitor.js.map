{"version":3,"file":"AvailabilityMonitor.js","names":["_core","require","_ramda","_debounceThrottle","_di","_validateIsOffline","_interopRequireDefault","_availabilityMonitorHelper","_errorMessages","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","e","__esModule","ownKeys","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_regenerator","Symbol","n","iterator","toStringTag","i","c","prototype","Generator","u","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","_regeneratorDefine","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","slice","reverse","reduce","_initializerWarningHelper","Error","HEALTH_CHECK_INTERVAL","exports","STATUS_END_POINT","DEFAULT_TIME","SHARED_STATE_EXPIRATION","AvailabilityMonitor","Module","name","deps","dep","optional","computed","that","sharedStates","_RcModuleV","_this$_deps$availabil","_this$_deps$availabil2","_this","_enabled","_deps","availabilityMonitorOptions","enabled","_randomTime","_limitedTimeout","_normalTimeout","_promise","_healthRetryTime","_unbindHandlers","_beforeRequestHandler","params","isLimitedAvailabilityMode","requestUrl","pathOr","requestMethod","extractUrl","url","isHAEnabledAPI","method","errorMessages","serviceLimited","_requestErrorHandler","_ref","_callee","error","extractedUrl","headers","retryAfter","_context","attachErrorResponse","isHAError","hasLimitedStatusError","setLimitedModeStatusError","_retrieveRetryAfter","_switchToLimitedMode","_retry","_x","_refreshErrorHandler","_ref2","_callee2","isOffline","platform","RES_STATUS","refreshTokenValid","_t","_context2","validateIsOffline","message","client","service","response","status","auth","_switchToVoIPOnlyMode","_x2","_refreshSuccessHandler","isVoIPOnlyMode","setVoIPOnlyReset","_clearLimitedTimeout","setVoIPOnlyMode","_switchToNormalMode","setNormalMode","_clearNormalTimeout","healthCheck","promisedThrottle","fn","_this2","_callee3","_context3","_healthCheck","manual","_sharedStatesKey","_currentTabKeys","isLimitedMode","setLimitedMode","onInit","_bindHandlers","onInitOnce","_this3","_initLocalStorage","watch","_this3$_deps$environm","environment","changeCounter","_this3$_deps$environm2","ready","_this4","on","events","beforeRequest","requestError","addListener","loginSuccess","logoutSuccess","logoutError","refreshError","refreshSuccess","removeListener","parseFloat","concat","get","isNaN","clearTimeout","_getStatus2","_callee4","res","_context4","skipAuthCheck","Authorization","accessToken","_getStatus","_this5","setTimeout","_healthCheck2","_callee5","_this6","_ref3","_ref3$manual","_args5","_t2","_context5","undefined","console","generateRandomNumber","_checkIfHAError","_callee6","errMessage","_context6","checkIfHAError","_x3","_attachErrorResponse","_callee7","_t3","_context7","_json","clone","json","err","_x4","_this7","some","hasCallSession","_this8","webSocketReady","_writeSharedStates","JSON","stringify","localStorage","setItem","_retrieveSharedStates","getItem","parse","_this9","prefix","isUnloading","window","addEventListener","ev","_unloadSharedStates","_this0","states","tabManager","tabId","id","_cleanSharedStates","_this1","state","Date","now","timestamp","actualTabIds","includes","setSharedState","_this$_deps$tabManage","current","RcModuleV2","action"],"sources":["modules/AvailabilityMonitor/AvailabilityMonitor.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n  watch,\n} from '@ringcentral-integration/core';\nimport type { ApiError } from '@ringcentral/sdk';\nimport { pathOr } from 'ramda';\n\nimport { promisedThrottle } from '../../lib/debounce-throttle';\nimport { Module } from '../../lib/di';\nimport validateIsOffline from '../../lib/validateIsOffline';\n\nimport type {\n  Deps,\n  ErrorMessages,\n  SharedState,\n} from './AvailabilityMonitor.interface';\nimport {\n  extractUrl,\n  generateRandomNumber,\n  isHAEnabledAPI,\n  isHAError,\n} from './availabilityMonitorHelper';\nimport { errorMessages } from './errorMessages';\n\nexport const HEALTH_CHECK_INTERVAL = 60 * 1000;\nexport const STATUS_END_POINT = '/restapi/v1.0/status';\nconst DEFAULT_TIME = 0;\nconst SHARED_STATE_EXPIRATION = 12 * 60 * 60 * 1000;\n\n@Module({\n  name: 'AvailabilityMonitor',\n  deps: [\n    'Auth',\n    'Client',\n    { dep: 'Prefix', optional: true },\n    { dep: 'TabManager', optional: true },\n    { dep: 'Environment', optional: true },\n    { dep: 'AvailabilityMonitorOptions', optional: true },\n  ],\n})\nexport class AvailabilityMonitor extends RcModuleV2<Deps> {\n  protected _enabled = this._deps.availabilityMonitorOptions?.enabled ?? false;\n\n  protected _randomTime = DEFAULT_TIME;\n\n  protected _limitedTimeout: NodeJS.Timeout | null = null;\n\n  protected _normalTimeout: NodeJS.Timeout | null = null;\n\n  protected _promise: Promise<Response> | null = null;\n\n  _healthRetryTime = HEALTH_CHECK_INTERVAL;\n\n  _unbindHandlers: (() => void) | null = null;\n\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n  }\n\n  /**\n   * When App is in Limited Mode and Status check met a non-503 error\n   */\n  @state\n  hasLimitedStatusError = false;\n\n  @state\n  isLimitedMode = false;\n\n  @state\n  isVoIPOnlyMode = false;\n\n  @action\n  setLimitedModeStatusError() {\n    this.hasLimitedStatusError = true;\n  }\n\n  @action\n  setNormalMode() {\n    this.hasLimitedStatusError = false;\n    this.isLimitedMode = false;\n    this.isVoIPOnlyMode = false;\n  }\n\n  @action\n  setLimitedMode() {\n    this.isLimitedMode = true;\n  }\n\n  @action\n  setVoIPOnlyMode() {\n    this.isVoIPOnlyMode = true;\n  }\n\n  @action\n  setVoIPOnlyReset() {\n    this.isVoIPOnlyMode = false;\n  }\n\n  override onInit() {\n    this._bindHandlers();\n  }\n\n  override onInitOnce() {\n    this._initLocalStorage();\n    watch(\n      this,\n      () => this._deps.environment?.changeCounter,\n      () => {\n        if (this.ready && this._deps.environment?.ready) {\n          this._bindHandlers();\n        }\n      },\n    );\n  }\n\n  _bindHandlers() {\n    if (this._unbindHandlers) {\n      this._unbindHandlers();\n    }\n\n    const client = this._deps.client.service.client();\n    const platform = this._deps.client.service.platform();\n\n    // TODO: in other modules, when they catch error first check if app is in HA mode.\n    client.on(client.events.beforeRequest, this._beforeRequestHandler);\n    client.on(client.events.requestError, this._requestErrorHandler);\n    platform.addListener(\n      platform.events.loginSuccess,\n      this._switchToNormalMode,\n    );\n    platform.addListener(\n      platform.events.logoutSuccess,\n      this._switchToNormalMode,\n    );\n    platform.addListener(platform.events.logoutError, this._switchToNormalMode);\n    platform.addListener(\n      platform.events.refreshError,\n      this._refreshErrorHandler,\n    );\n    platform.addListener(\n      platform.events.refreshSuccess,\n      this._refreshSuccessHandler,\n    );\n\n    this._unbindHandlers = () => {\n      client.removeListener(\n        client.events.beforeRequest,\n        this._beforeRequestHandler,\n      );\n      client.removeListener(\n        client.events.requestError,\n        this._requestErrorHandler,\n      );\n      platform.removeListener(\n        platform.events.loginSuccess,\n        this._switchToNormalMode,\n      );\n      platform.removeListener(\n        platform.events.logoutSuccess,\n        this._switchToNormalMode,\n      );\n      platform.removeListener(\n        platform.events.logoutError,\n        this._switchToNormalMode,\n      );\n      platform.removeListener(\n        platform.events.refreshError,\n        this._refreshErrorHandler,\n      );\n      platform.removeListener(\n        platform.events.refreshSuccess,\n        this._refreshSuccessHandler,\n      );\n      this._unbindHandlers = null;\n    };\n  }\n\n  _beforeRequestHandler = (params: Request) => {\n    if (!this.isLimitedAvailabilityMode || !this._enabled) {\n      return;\n    }\n\n    const requestUrl = pathOr<string | null>(null, ['_request', 'url'], params);\n    const requestMethod = pathOr<string | null>(\n      null,\n      ['_request', 'method'],\n      params,\n    );\n\n    if (!requestUrl || !requestMethod) {\n      return;\n    }\n\n    // In the limited availability mode, should not block status check api\n    // or highly availability api.\n    if (\n      extractUrl({ url: requestUrl }) === STATUS_END_POINT ||\n      isHAEnabledAPI({ url: requestUrl, method: requestMethod })\n    ) {\n      return;\n    }\n\n    throw new Error(errorMessages.serviceLimited);\n  };\n\n  /**\n   * Retrieve retry after value from response headers\n   */\n  _retrieveRetryAfter(headers: Response['headers']) {\n    try {\n      const retryAfter = parseFloat(`${headers.get('Retry-After') || -1}`);\n      return Number.isNaN(retryAfter) ? -1 : retryAfter;\n    } catch (error: any /** TODO: confirm with instanceof */) {\n      return -1;\n    }\n  }\n\n  /**\n   * Check if app can enter LA mode.\n   * If this module is not enabled, just return.\n   *\n   */\n  _requestErrorHandler = async (error: ApiError) => {\n    await this.attachErrorResponse(error);\n\n    const requestUrl = pathOr<Request['url']>('', ['request', 'url'], error);\n    const extractedUrl = extractUrl({\n      url: requestUrl,\n    });\n\n    // If app is in Limited Mode and staus API met a status which is not 200 nor 503\n    if (\n      this.isLimitedAvailabilityMode &&\n      extractedUrl === STATUS_END_POINT &&\n      !isHAError(error)\n    ) {\n      if (!this.hasLimitedStatusError) {\n        this.setLimitedModeStatusError();\n      }\n      return;\n    }\n\n    if (!isHAError(error) || !this._enabled) {\n      return;\n    }\n\n    const headers = pathOr(\n      {},\n      ['response', 'headers'],\n      error,\n    ) as Response['headers'];\n    const retryAfter = this._retrieveRetryAfter(headers);\n\n    if (retryAfter > 0) {\n      // Retry-After unit is secons, make it mili-secons\n      this._healthRetryTime = retryAfter * 1000;\n    } else {\n      this._healthRetryTime = HEALTH_CHECK_INTERVAL;\n    }\n\n    this._switchToLimitedMode();\n    this._retry();\n  };\n\n  _refreshErrorHandler = async (error: ApiError) => {\n    const isOffline = validateIsOffline(error.message);\n\n    const platform = this._deps.client.service.platform();\n    const RES_STATUS = (error.response && error.response.status) || null;\n    const refreshTokenValid =\n      (isOffline || Number(RES_STATUS) >= 500) &&\n      (await platform.auth().refreshTokenValid());\n    if (refreshTokenValid) {\n      this._switchToVoIPOnlyMode();\n    }\n  };\n\n  _refreshSuccessHandler = () => {\n    if (this.isVoIPOnlyMode) {\n      this.setVoIPOnlyReset();\n    }\n    this._clearLimitedTimeout();\n  };\n\n  _switchToVoIPOnlyMode = () => {\n    if (this.isVoIPOnlyMode) {\n      return;\n    }\n\n    this._healthRetryTime = HEALTH_CHECK_INTERVAL;\n    this.setVoIPOnlyMode();\n    this._retry();\n  };\n\n  _switchToLimitedMode() {\n    if (this.isLimitedMode) {\n      return;\n    }\n\n    this.setLimitedMode();\n  }\n\n  _switchToNormalMode = () => {\n    if (!this.isLimitedAvailabilityMode) {\n      return;\n    }\n\n    this.setNormalMode();\n\n    this._clearLimitedTimeout();\n    this._clearNormalTimeout();\n  };\n\n  _clearLimitedTimeout() {\n    if (this._limitedTimeout) {\n      clearTimeout(this._limitedTimeout);\n      this._limitedTimeout = null;\n    }\n  }\n\n  _clearNormalTimeout() {\n    if (this._normalTimeout) {\n      clearTimeout(this._normalTimeout);\n      this._normalTimeout = null;\n    }\n  }\n\n  async _getStatus() {\n    // !!This API must be always called with OAuth token in Authorization header\n    // !! (same as in case of regular API calls) in order to ensure the request is routed to proper POD/partition.\n    // Client app can even continue use expired access token with this API - backend will pass such requests through.\n    // The result of the API call is unpredictable when it is called without access token!\n    //\n    // Reference: https://wiki_domain/display/PLAT/High+Availability+Guidelines+for+API+Clients\n\n    const res: Response = await this._deps.client.service\n      .platform()\n      .get('/restapi/v1.0/status', null, {\n        skipAuthCheck: true,\n        headers: {\n          Authorization: `Bearer ${this._deps.auth.accessToken}`,\n        },\n      });\n    return res;\n  }\n\n  _retry() {\n    if (!this._limitedTimeout) {\n      this._limitedTimeout = setTimeout(() => {\n        this._clearLimitedTimeout();\n        this._healthCheck();\n      }, this._healthRetryTime);\n    }\n  }\n\n  /**\n   * Inner method of health checking\n   */\n  async _healthCheck({ manual = false } = {}) {\n    if (this._promise) return;\n    try {\n      this._promise = this._getStatus();\n      const response = await this._promise;\n      if (!response || response.status !== 200) {\n        return;\n      }\n    } catch (err) {\n      console.error('error from request of /restapi/v1.0/status.');\n      return;\n    } finally {\n      this._promise = null;\n    }\n    if (manual) {\n      this._clearNormalTimeout();\n      this._switchToNormalMode();\n      return;\n    }\n    // In the described situation Client Application should follow an \"Exponential Backoff\" approach:\n    // The retries exponentially increase the waiting time up to a certain threshold.\n    // The idea is that if the server is down temporarily,\n    // it is not overwhelmed with requests hitting at the same time when it comes back up.\n    //\n    // Reference: https://wiki_domain/display/PLAT/Error+Handling+Guidelines+for+API+Clients\n\n    this._randomTime = this._randomTime || generateRandomNumber(); // Generate random seconds (1 ~ 121)\n    this._normalTimeout = setTimeout(() => {\n      this._clearNormalTimeout();\n      this._switchToNormalMode();\n    }, this._randomTime * 1000);\n  }\n\n  /**\n   * Health check with status API\n   */\n  healthCheck = promisedThrottle({\n    async fn(this: AvailabilityMonitor) {\n      return this._healthCheck({ manual: true });\n    },\n  });\n\n  /**\n   * Check if the error is Survival Mode error,\n   * Or if app is already in Survival Mode and current request is blocked with an error.\n   */\n  async checkIfHAError(error: ApiError) {\n    const errMessage = pathOr<string | null>(null, ['message'], error);\n    await this.attachErrorResponse(error);\n\n    return isHAError(error) || errMessage === errorMessages.serviceLimited;\n  }\n\n  private async attachErrorResponse(error: ApiError) {\n    const response = error.response as ApiError['response'] & ErrorMessages;\n    if (response && !response._json) {\n      try {\n        response._json = await response.clone().json();\n      } catch (err) {\n        // ignore response json error\n        console.error('error from response.json()', { error, err });\n      }\n    }\n  }\n\n  /**\n   * Is App in limited mode\n   */\n  get isLimitedAvailabilityMode() {\n    return this.isLimitedMode || this.isVoIPOnlyMode;\n  }\n\n  /**\n   * Custom storage with localStorage in synchronous way\n   * ! Be aware that these states are shared across multiple tabs !\n   */\n  @state\n  sharedStates: Record<string, SharedState> = {};\n\n  @computed((that: AvailabilityMonitor) => [that.sharedStates])\n  get hasCallSession() {\n    return Object.keys(this.sharedStates).some(\n      (key) => this.sharedStates[key].hasCallSession,\n    );\n  }\n\n  @computed((that: AvailabilityMonitor) => [that.sharedStates])\n  get hasWebSocketReady() {\n    return Object.keys(this.sharedStates).some(\n      (key) => this.sharedStates[key].webSocketReady,\n    );\n  }\n\n  _sharedStatesKey!: string;\n  _currentTabKeys: string[] = [];\n\n  _writeSharedStates() {\n    const json = JSON.stringify(this.sharedStates);\n    localStorage.setItem(this._sharedStatesKey, json);\n  }\n\n  @action\n  _retrieveSharedStates() {\n    const json = localStorage.getItem(this._sharedStatesKey);\n    this.sharedStates = JSON.parse(json ?? '{}');\n  }\n\n  _initLocalStorage() {\n    this._sharedStatesKey = `${this._deps.prefix}-AvailabilityMonitor-sharedStates`;\n    this._retrieveSharedStates();\n    let isUnloading: boolean | undefined;\n    window.addEventListener('storage', (ev) => {\n      if (!isUnloading && ev.key === this._sharedStatesKey) {\n        this._retrieveSharedStates();\n      }\n    });\n    window.addEventListener('pagehide', () => {\n      isUnloading = true;\n      this._unloadSharedStates();\n    });\n  }\n\n  @action\n  _unloadSharedStates() {\n    let states: Record<string, SharedState> = {\n      ...this.sharedStates,\n    };\n\n    // unload base on cached keys\n    this._currentTabKeys.forEach((key) => {\n      delete states[key];\n    });\n    this._currentTabKeys = [];\n\n    // unload base on tabId\n    if (this._deps.tabManager) {\n      Object.keys(states).forEach((key) => {\n        if (states[key].tabId === this._deps.tabManager!.id) {\n          delete states[key];\n        }\n      });\n    }\n\n    // clean\n    states = this._cleanSharedStates(states);\n\n    // write\n    this.sharedStates = states;\n    this._writeSharedStates();\n  }\n\n  _cleanSharedStates(states: Record<string, SharedState>) {\n    Object.keys(states).forEach((key) => {\n      const state = states[key];\n      if (\n        // timestamp expired\n        Date.now() - state.timestamp > SHARED_STATE_EXPIRATION ||\n        // tabs expired/closed\n        (state.tabId &&\n          this._deps.tabManager &&\n          !this._deps.tabManager.actualTabIds.includes(state.tabId))\n      ) {\n        delete states[key];\n      }\n    });\n    return states;\n  }\n\n  @action\n  setSharedState(\n    key: string,\n    state?: Omit<SharedState, 'tabId' | 'timestamp'>,\n  ) {\n    let states: Record<string, SharedState> = {\n      ...this.sharedStates,\n    };\n\n    // update\n    if (state) {\n      const current = states[key];\n      states[key] = {\n        ...current,\n        ...state,\n        timestamp: Date.now(),\n        tabId: this._deps.tabManager?.id,\n      };\n    } else {\n      delete states[key];\n    }\n\n    // clean\n    states = this._cleanSharedStates(states);\n\n    // write storage\n    this.sharedStates = states;\n    this._writeSharedStates();\n\n    // cache keys\n    if (!this._currentTabKeys.includes(key)) {\n      this._currentTabKeys.push(key);\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]}