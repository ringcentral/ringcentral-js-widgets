{"version":3,"file":"Theme.js","names":["_core","require","_di","_defaultCssVariable","_dec","_dec2","_class","_class2","_descriptor","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","_toPropertyKey","configurable","writable","_initializerDefineProperty","property","descriptor","context","initializer","call","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","_createClass","protoProps","staticProps","prototype","arg","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","undefined","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","decorators","desc","slice","reverse","reduce","decorator","_initializerWarningHelper","Error","Theme","Module","name","deps","dep","optional","computed","that","_that$_deps$brand$bra","_deps","brand","brandConfig","theme","variable","_RcModuleV","_super","_this","enableGlobalCache","storageKey","setThemeType","type","themeType","onInitOnce","_this$_deps$brand$bra","_this2","defaultThemeType","defaultTheme","watch","newValue","newDefaultThemeType","get","_this$_deps$brand$bra2","_this$_deps$brand$bra3","curr","themeMap","_this$_deps$brand$bra4","defaultCssVariable","RcModuleV2","globalStorage","state","action","exports"],"sources":["modules/Theme/Theme.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  globalStorage,\n  RcModuleV2,\n  state,\n  watch,\n} from '@ringcentral-integration/core';\nimport type { RcTheme } from '@ringcentral/juno';\n\nimport { Module } from '../../lib/di';\nimport type { CssModuleVariable } from '../Brand/BrandConfig.interface';\nimport { defaultCssVariable } from './defaultCssVariable';\nimport type { Deps } from './Theme.interface';\n\n@Module({\n  name: 'Theme',\n  deps: ['Brand', { dep: 'ThemeOptions', optional: true }],\n})\nexport class Theme extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({\n      deps,\n      enableGlobalCache: true,\n      storageKey: 'Theme',\n    });\n  }\n\n  @globalStorage\n  @state\n  themeType = '';\n\n  @action\n  setThemeType(type: string) {\n    this.themeType = type;\n  }\n\n  override onInitOnce() {\n    const defaultThemeType = this._deps.brand.brandConfig.theme?.defaultTheme;\n    if (defaultThemeType) {\n      this.setThemeType(defaultThemeType);\n    }\n\n    watch(\n      this,\n      () => this._deps.brand.brandConfig.theme,\n      (newValue) => {\n        const newDefaultThemeType = newValue?.defaultTheme;\n\n        if (newDefaultThemeType && newDefaultThemeType !== this.themeType) {\n          this.setThemeType(newValue.defaultTheme);\n        }\n      },\n    );\n  }\n\n  get theme() {\n    const curr = this._deps.brand.brandConfig.theme?.themeMap?.[\n      this.themeType\n    ] as any;\n\n    return curr as RcTheme;\n  }\n\n  @computed((that: Theme) => [that._deps.brand.brandConfig.theme?.variable])\n  get variable() {\n    return {\n      ...defaultCssVariable,\n      ...this._deps.brand.brandConfig.theme?.variable,\n    } as CssModuleVariable;\n  }\n}\n"],"mappings":"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"}