{"version":3,"sources":["modules/ConferenceParticipantUI/ConferenceParticipantUI.ts"],"names":["ConferenceParticipantUI","name","deps","dep","optional","_deps","locale","conferenceCall","webphone","participants","partyProfiles","sessionCount","sessions","length","currentLocale","routerInteraction","regionSettings","onBackButtonClick","goBack","removeFunc","id","confId","conferences","Object","keys","removeFromConference","removeParticipantClickRemoveTrack","formatPhone","phoneNumber","areaCode","countryCode","afterOnRemoveBtnClick","participantListClickHangupTrack","afterOnCancel","removeParticipantClickCancelTrack","RcUIModuleV2"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAsBMA,uB,WAXL,gBAAO;AACNC,EAAAA,IAAI,EAAE,yBADA;AAENC,EAAAA,IAAI,EAAE,CACJ,QADI,EAEJ,gBAFI,EAGJ,UAHI,EAIJ,gBAJI,EAKJ,mBALI,EAMJ;AAAEC,IAAAA,GAAG,EAAE,gCAAP;AAAyCC,IAAAA,QAAQ,EAAE;AAAnD,GANI;AAFA,CAAP,C;;;;;AAYC,mCAAYF,IAAZ,EAAwB;AAAA;;AAAA,6BAChB;AACJA,MAAAA,IAAI,EAAJA;AADI,KADgB;AAIvB;;;;iCAEsD;AAAA,wBACR,KAAKG,KADG;AAAA,UAC7CC,MAD6C,eAC7CA,MAD6C;AAAA,UACrCC,cADqC,eACrCA,cADqC;AAAA,UACrBC,QADqB,eACrBA,QADqB;AAErD,UAAMC,YAAY,GAAGF,cAAc,CAACG,aAApC;AACA,UAAMC,YAAY,GAAIH,QAAQ,CAACI,QAAT,IAAqBJ,QAAQ,CAACI,QAAT,CAAkBC,MAAxC,IAAmD,CAAxE;AACA,aAAO;AACLC,QAAAA,aAAa,EAAER,MAAM,CAACQ,aADjB;AAELL,QAAAA,YAAY,EAAZA,YAFK;AAGLE,QAAAA,YAAY,EAAZA;AAHK,OAAP;AAKD;;;qCAE8D;AAAA,yBACC,KAAKN,KADN;AAAA,UACrDE,cADqD,gBACrDA,cADqD;AAAA,UACrCQ,iBADqC,gBACrCA,iBADqC;AAAA,UAClBC,cADkB,gBAClBA,cADkB;AAE7D,aAAO;AACLC,QAAAA,iBAAiB,EAAE,6BAAM;AACvBF,UAAAA,iBAAiB,CAACG,MAAlB;AACD,SAHI;AAILC,QAAAA,UAAU;AAAA,oFAAE,iBAAOC,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACJC,oBAAAA,MADI,GAERd,cAAc,CAACe,WAAf,IACAC,MAAM,CAACC,IAAP,CAAYjB,cAAc,CAACe,WAA3B,EAAwC,CAAxC,CAHQ;AAAA;AAAA;AAAA,2BAKFf,cAAc,CAACkB,oBAAf,CAAoCJ,MAApC,EAA4CD,EAA5C,CALE;;AAAA;AAMR;AACAb,oBAAAA,cAAc,CAACmB,iCAAf;AAPQ,qDAQD,IARC;;AAAA;AAAA;AAAA;AAAA,qDAUD,KAVC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,WAJL;AAiBLC,QAAAA,WAAW,EAAE,qBAACC,WAAD;AAAA,iBACX,8BAAa;AACXA,YAAAA,WAAW,EAAXA,WADW;AAEXC,YAAAA,QAAQ,EAAEb,cAAc,CAACa,QAFd;AAGXC,YAAAA,WAAW,EAAEd,cAAc,CAACc;AAHjB,WAAb,CADW;AAAA,SAjBR;AAuBL;AACAC,QAAAA,qBAAqB,EAAE;AAAA,iBACrBxB,cAAc,CAACyB,+BAAf,EADqB;AAAA,SAxBlB;AA0BLC,QAAAA,aAAa,EAAE;AAAA,iBAAM1B,cAAc,CAAC2B,iCAAf,EAAN;AAAA;AA1BV,OAAP;AA4BD;;;;EAhDmCC,kB","sourcesContent":["import { Module } from '@ringcentral-integration/commons/lib/di';\nimport formatNumber from '@ringcentral-integration/commons/lib/formatNumber';\nimport {\n  RcUIModuleV2,\n  UIFunctions,\n  UIProps,\n} from '@ringcentral-integration/core';\n\nimport {\n  ConferenceParticipantPanelProps,\n  Deps,\n} from './ConferenceParticipantUI.interface';\n\n@Module({\n  name: 'ConferenceParticipantUI',\n  deps: [\n    'Locale',\n    'ConferenceCall',\n    'Webphone',\n    'RegionSettings',\n    'RouterInteraction',\n    { dep: 'ConferenceParticipantUIOptions', optional: true },\n  ],\n})\nclass ConferenceParticipantUI extends RcUIModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n  }\n\n  getUIProps(): UIProps<ConferenceParticipantPanelProps> {\n    const { locale, conferenceCall, webphone } = this._deps;\n    const participants = conferenceCall.partyProfiles;\n    const sessionCount = (webphone.sessions && webphone.sessions.length) || 0;\n    return {\n      currentLocale: locale.currentLocale,\n      participants,\n      sessionCount,\n    };\n  }\n\n  getUIFunctions(): UIFunctions<ConferenceParticipantPanelProps> {\n    const { conferenceCall, routerInteraction, regionSettings } = this._deps;\n    return {\n      onBackButtonClick: () => {\n        routerInteraction.goBack();\n      },\n      removeFunc: async (id) => {\n        const confId =\n          conferenceCall.conferences &&\n          Object.keys(conferenceCall.conferences)[0];\n        try {\n          await conferenceCall.removeFromConference(confId, id);\n          // user action track\n          conferenceCall.removeParticipantClickRemoveTrack();\n          return true;\n        } catch (e) {\n          return false;\n        }\n      },\n      formatPhone: (phoneNumber) =>\n        formatNumber({\n          phoneNumber,\n          areaCode: regionSettings.areaCode,\n          countryCode: regionSettings.countryCode,\n        }),\n      // user action track functions\n      afterOnRemoveBtnClick: () =>\n        conferenceCall.participantListClickHangupTrack(),\n      afterOnCancel: () => conferenceCall.removeParticipantClickCancelTrack(),\n    };\n  }\n}\n\nexport { ConferenceParticipantUI };\n"],"file":"ConferenceParticipantUI.js"}