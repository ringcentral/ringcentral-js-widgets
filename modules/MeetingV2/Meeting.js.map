{"version":3,"sources":["modules/MeetingV2/Meeting.ts"],"names":["Meeting","name","deps","dep","optional","extensionName","currentLocale","that","userSettings","scheduleMeeting","telephony","enablePersonalMeeting","enableServiceWebSettings","scheduleUserSettings","usePmiForScheduledMeetings","extensionInfo","info","id","lockedSettings","scheduleLockedSettings","personalMeeting","_deps","locale","isScheduling","analytics","target","getTrackTarget","trackEvents","clickMeetingSchedulePage","router","enableCache","storageKey","_fetchDelegatorsTimeout","_fetchPersonMeetingTimeout","_createMeetingPromise","savedSetting","showSaveAsDefault","savedDefaultMeetingSetting","lastMeetingSetting","initialMeetingSetting","meetingType","MeetingType","SCHEDULED","enforcePassword","settingLock","defaultLockedSettings","commonUserSettings","personalMeetingSettings","commonPersonalMeetingSettings","meetingName","enableScheduleOnBehalf","meeting","delegators","startTime","hostId","setting","DEFAULT_LOCK_SETTINGS","_pmiPassword","preferences","isPreferencesChanged","updatingStatus","_init","videoConfiguration","isRCM","ready","clearTimeout","getDelegators","records","length","updateDelegators","loginUser","console","error","warn","setTimeout","_initScheduleFor","extensionId","Promise","all","_initPersonalMeeting","_updateServiceWebSettings","_initMeeting","onInit","_initMeetingSettings","update","defaultMeetingSetting","host","updatePreferences","_updatePreferences","_updateIsPreferencesChanged","_meeting","combineWithSettings","finalMeeting","isMeetingPasswordValid","validatePasswordSettings","password","_requireMeetingPassword","updateMeetingState","_comparePreferences","updateIsPreferencesChanged","isSecret","RCM_PASSWORD_REGEX","test","_combineWithSWSettings","usePersonalMeetingId","processedMeeting","allowJoinBeforeHost","requirePasswordForPmiMeetings","lockedRequirePasswordForPmiMeetings","PMIRequirePassword","JBH_ONLY","_lockRequireMeetingPassword","fetchPersonalMeeting","meetingInfoResponse","formatPersonalMeeting","updatePersonalMeeting","resetPersonalMeeting","getUserSettings","getLockedSettings","updateUserSettings","updateLockedSettings","pmiDefaultSettings","getGeneralDefaultSettings","formattedMeeting","_format","updateSavedDefaultMeetingSetting","_saved","notShowAgain","isAlertSuccess","updateIsScheduling","_validate","saveAsDefault","saveAsDefaultSetting","postMeeting","getMeetingServiceInfo","resp","serviceInfo","getMeetingInvitation","invitationInfo","updateLastMeetingSetting","_createDialingNumberTpl","result","enableReloadAfterSchedule","externalUserInfo","personalMeetingId","alert","success","message","meetingStatus","scheduledSuccess","_errorHandle","scheduleDirectly","meetingId","_isUpdating","updateMeeting","_promise","addUpdatingStatus","putMeeting","updatedSuccess","removeUpdatingStatus","userExtensionId","user","item","_updateDelegators","_updateUserSettings","_updateLockedSettings","_updatePersonalMeeting","_updateMeetingState","_updateUpdatingStatus","finalStatus","obj","LAST_MEETING_SETTINGS","_updateLastMeetingSetting","savedDefaulteSetting","SAVED_DEFAULT_MEETING_SETTINGS","_updateSavedDefaultMeetingSetting","_updateIsScheduling","getMeeting","Error","client","account","extension","get","post","put","isAlertError","settings","response","clone","json","errorCode","log","isMeetingDeleted","indexOf","danger","meetingIsDeleted","service","platform","res","send","method","url","apiResponse","recording","startParticipantsVideo","startParticipantVideo","restScheduleOptions","processedScheduleMeeting","DEFAULT_LOCALE","enableInvitationApi","brand","code","language","normalizeLocale","invitation","meetingInfo","shortId","MeetingErrors","invalidMeetingInfo","topic","schedule","errors","push","emptyTopic","noPassword","durationInMinutes","durationIncorrect","startHostVideo","audioOptions","recurrence","formatted","RECURRING","_schedule","timeZone","enableCustomTimezone","UTC_TIMEZONE_ID","moment","utc","format","until","PMI","mobileDialingNumberTpl","dialInNumbers","phoneDialingNumberTpl","warning","permissionName","insufficientPermissions","payload","availabilityMonitor","checkIfHAError","internalError","requirePwdForPMI","requirePwdIsLockedForPMI","pmiRequiresPwd","NONE","ALL","pmiRequiresPwdLocked","usePmi","requirePasswordForSchedulingNewMeetings","requirePwdForNonPMI","requirePwdIsLockedForNonPMI","telephonyUserSettings","enforcePmiPassword","ASSISTED_USERS_MYSELF","isLoginUser","COMMON_SETTINGS","initialSetting","usePmiDefaultFromSW","getInitialMeetingSetting","meetingOptions","RcModuleV2","state","storage","action","background","proxify"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;AAQA;;AACA;;AACA;;AAEA;;AAaA;;AACA;;AACA;;AACA;;AASA;;AAyBA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAgBaA,O,WAdZ,gBAAO;AACNC,EAAAA,IAAI,EAAE,SADA;AAENC,EAAAA,IAAI,EAAE,CACJ,OADI,EAEJ,OAFI,EAGJ,QAHI,EAIJ,eAJI,EAKJ,SALI,EAMJ,oBANI,EAOJ,QAPI,EAQJ;AAAEC,IAAAA,GAAG,EAAE,qBAAP;AAA8BC,IAAAA,QAAQ,EAAE;AAAxC,GARI,EASJ;AAAED,IAAAA,GAAG,EAAE,gBAAP;AAAyBC,IAAAA,QAAQ,EAAE;AAAnC,GATI;AAFA,CAAP,C,UAgEE,oBAAS;AAAA,MAAGC,aAAH,QAAGA,aAAH;AAAA,MAAkBC,aAAlB,QAAkBA,aAAlB;AAAA,SAA+C,CACvDD,aADuD,EAEvDC,aAFuD,CAA/C;AAAA,CAAT,C,UAQA,oBAAS,UAACC,IAAD;AAAA;;AAAA,SAAmB,uBAACA,IAAI,CAACC,YAAN,uDAAC,mBAAmBC,eAApB,CAAnB;AAAA,CAAT,C,UAKA,oBAAS,UAACF,IAAD;AAAA;;AAAA,SAAmB,wBAACA,IAAI,CAACC,YAAN,wDAAC,oBAAmBE,SAApB,CAAnB;AAAA,CAAT,C,UAKA,oBAAS,UAACH,IAAD;AAAA,SAAmB,CAC3BA,IAAI,CAACI,qBADsB,EAE3BJ,IAAI,CAACK,wBAFsB,EAG3BL,IAAI,CAACM,oBAAL,CAA0BC,0BAHC,CAAnB;AAAA,CAAT,C,UAaA,oBAAS,UAACP,IAAD;AAAA,SAAmB,CAACA,IAAI,CAACQ,aAAL,CAAmBC,IAAnB,CAAwBC,EAAzB,CAAnB;AAAA,CAAT,C,UASA,oBAAS,UAACV,IAAD;AAAA;;AAAA,SAAmB,yBAACA,IAAI,CAACW,cAAN,yDAAC,qBAAqBT,eAAtB,CAAnB;AAAA,CAAT,C,UAKA,oBAAS,UAACF,IAAD;AAAA,SAAmB,CAC3BA,IAAI,CAACK,wBADsB,EAE3BL,IAAI,CAACY,sBAFsB,CAAnB;AAAA,CAAT,C,UAWA,oBAAS,UAACZ,IAAD;AAAA,SAAmB,CAC3BA,IAAI,CAACK,wBADsB,EAE3BL,IAAI,CAACM,oBAFsB,CAAnB;AAAA,CAAT,C,WAWA,oBAAS,UAACN,IAAD;AAAA,SAAmB,CAC3BA,IAAI,CAACI,qBADsB,EAE3BJ,IAAI,CAACa,eAFsB,CAAnB;AAAA,CAAT,C,WAWA,oBAAS,UAACb,IAAD;AAAA,SAAmB,CAACA,IAAI,CAACc,KAAL,CAAWC,MAAX,CAAkBhB,aAAnB,CAAnB;AAAA,CAAT,C,WA8LA,iBAAM,UAACC,IAAD,EAAgBgB,YAAhB,EAA0C;AAC/C,MAAI,CAACA,YAAL,EAAmB;AACnB,SAAO,UAACC,SAAD,EAA0B;AAC/B,QAAMC,MAAM,GAAGD,SAAS,CAACE,cAAV,EAAf;;AACA,QAAID,MAAJ,EAAY;AACV,aAAO,CACLE,uBAAYC,wBADP,EAEL;AAAEC,QAAAA,MAAM,EAAEJ,MAAM,CAACI,MAAjB;AAAyB,wBAAgB;AAAzC,OAFK,CAAP;AAID;AACF,GARD;AASD,CAXA,C;;;;;AAzTD,mBAAY3B,IAAZ,EAAwB;AAAA;;AAAA;;AACtB,8BAAM;AAAEA,MAAAA,IAAI,EAAJA,IAAF;AAAQ4B,MAAAA,WAAW,EAAE,IAArB;AAA2BC,MAAAA,UAAU,EAAE;AAAvC,KAAN;AADsB,UAJdC,uBAIc,GAJ4B,IAI5B;AAAA,UAHhBC,0BAGgB,GAH6B,IAG7B;AAAA,UAFhBC,qBAEgB;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAEvB;;;;gDAgJ4C;AAC3C,UAAI,CAAC,KAAKtB,wBAAV,EAAoC;AAClC,YAAMuB,YAAY,GAAG,KAAKC,iBAAL,GACjB,KAAKC,0BADY,GAEjB,KAAKC,kBAFT;AAGA,6DACK,KAAKC,qBADV,GAEKJ,YAFL;AAGEK,UAAAA,WAAW,EAAEC,2BAAYC;AAH3B;AAKD;;AAED,aAAO,KAAKC,eAAL,iCAEA,KAAKJ,qBAFL;AAGHK,QAAAA,WAAW,EAAE,KAAKC;AAHf,UAKL;AACErC,QAAAA,YAAY,EAAE,KAAKsC,kBADrB;AAEEC,QAAAA,uBAAuB,EAAE,KAAKC;AAFhC,OALK,EASL,KATK,CAAP;AAWD;;;+CA2B0B;AACzB,UAAMC,WAAW,GAAG,8BAAiB;AACnClC,QAAAA,aAAa,EAAE,KAAKA,aADe;AAEnCmC,QAAAA,sBAAsB,EAAE,KAAKA,sBAFM;AAGnCC,QAAAA,OAAO,EAAE,KAAKA,OAHqB;AAInCC,QAAAA,UAAU,EAAE,KAAKA;AAJkB,OAAjB,CAApB;AAMA,UAAMC,SAAS,GAAG,6CAAlB;AACA,UAAMC,MAAM,GAAG,uBAAU;AACvBJ,QAAAA,sBAAsB,EAAE,KAAKA,sBADN;AAEvBC,QAAAA,OAAO,EAAE,KAAKA,OAFS;AAGvBpC,QAAAA,aAAa,EAAE,KAAKA;AAHG,OAAV,CAAf;AAKA,UAAMwC,OAAO,GAAG,8CACdN,WADc,EAEd,KAAK3C,aAFS,EAGd+C,SAHc,EAIdC,MAJc,CAAhB;;AAMA,UAAI,CAAC,KAAK1C,wBAAV,EAAoC;AAClC,eAAO2C,OAAP;AACD;;AACD,2DACKA,OADL,GAEKC,gCAFL;AAGEC,QAAAA,YAAY,EAAE;AAHhB;AAKD;;;sCAuC2BL,U,EAAgC;AAC1D,WAAKA,UAAL,GAAkBA,UAAlB;AACD;;;wCAG6B5C,Y,EAA4B;AACxD,WAAKA,YAAL,GAAoBA,YAApB;AACD;;;0CAG+BU,c,EAAgC;AAC9D,WAAKA,cAAL,GAAsBA,cAAtB;AACD;;;2CAGgCE,e,EAAkC;AACjE,WAAKA,eAAL,GAAuBA,eAAvB;AACD;;;uCAG4BsC,W,EAA0B;AACrD,WAAKA,WAAL,GAAmBA,WAAnB;AACD;;;gDAGqCC,oB,EAA+B;AACnE,WAAKA,oBAAL,GAA4BA,oBAA5B;AACD;;;wCAG6BR,O,EAA0B;AACtD,WAAKA,OAAL,GAAeA,OAAf;AACD;;;0CAG+BS,c,EAAgC;AAC9D,WAAKA,cAAL,GAAsBA,cAAtB;AACD;;;8CAGmCtB,kB,EAAwC;AAC1E,WAAKA,kBAAL,GAA0BA,kBAA1B;AACD;;;sDAICD,0B,EACA;AACA,WAAKA,0BAAL,GAAkCA,0BAAlC;AACD;;;wCAe6Bd,Y,EAAuB;AACnD,WAAKA,YAAL,GAAoBA,YAApB;AACD;;;;;;;;;;uBAGO,KAAKsC,KAAL,E;;;;;;;;;;;;;;;;;;kCAGM;AACZ,aAAO,4EAAuB,KAAKxC,KAAL,CAAWyC,kBAAX,CAA8BC,KAA5D;AACD;;;mCAEc;AACb,aACE,6EACC,KAAKC,KAAL,IAAc,CAAC,KAAK3C,KAAL,CAAWyC,kBAAX,CAA8BC,KAFhD;AAID;;;;;;;;;;;;;oBAGM,KAAKb,sB;;;;;;;;AAGV,oBAAI,KAAKlB,uBAAT,EAAkC;AAChCiC,kBAAAA,YAAY,CAAC,KAAKjC,uBAAN,CAAZ;AACD;;;;uBAE2B,KAAKkC,aAAL,E;;;;AAAlBC,gBAAAA,O,yBAAAA,O;;sBACJ,CAACA,OAAD,IAAYA,OAAO,CAACC,MAAR,KAAmB,C;;;;;AACjC,qBAAKC,gBAAL,CAAsB,EAAtB;;;;AAGF,qBAAKA,gBAAL,EAAuB,KAAKC,SAA5B,4BAA0CH,OAA1C;;;;;;;AAEAI,gBAAAA,OAAO,CAACC,KAAR,CAAc,yBAAd;AACAD,gBAAAA,OAAO,CAACE,IAAR,CAAa,iBAAb;AACA,qBAAKzC,uBAAL,GAA+B0C,UAAU,CAAC,YAAM;AAC9C,kBAAA,MAAI,CAACC,gBAAL;AACD,iBAFwC,EAEtC,KAFsC,CAAzC;;;;;;;;;;;;;;;;;;;4GAMiCC,W;;;;;;uBAC7BC,OAAO,CAACC,GAAR,CAAY,CAChB,KAAKC,oBAAL,CAA0BH,WAA1B,CADgB,EAEhB,KAAKI,yBAAL,CAA+BJ,WAA/B,CAFgB,CAAZ,C;;;;uBAKA,KAAKK,YAAL,CAAkBL,WAAlB,C;;;;;;;;;;;;;;;;AAGR;AACF;AACA;AACA;;;;;;;;;;;uBAGU,KAAKM,MAAL,E;;;;;;;;;;;;;;;;;;;;;;;;;uBAKA,KAAKA,MAAL,E;;;;;;;;;;;;;;;;;;;;;;;;;uBAKAL,OAAO,CAACC,GAAR,CAAY,CAAC,KAAKK,oBAAL,EAAD,EAA8B,KAAKR,gBAAL,EAA9B,CAAZ,C;;;;;;;;;;;;;;;;;;;oGAIqBC,W;;;;;AAC3B,qBAAKQ,MAAL,iCACK,KAAKC,qBADV;AAEEC,kBAAAA,IAAI,EAAE;AACJrE,oBAAAA,EAAE,EAAE2D,WAAW,IAAI,KAAKN,SAAL,CAAerD;AAD9B;AAFR;AAOA,qBAAKsE,iBAAL,CAAuB,2CAAuB,KAAKpC,OAA5B,CAAvB;;;;;;;;;;;;;;;;;;;0GAIsBO,W;;;;;AACtB,qBAAK8B,kBAAL,CAAwB9B,WAAxB;;;;;;;;;;;;;;;;;;;mHAI+BC,oB;;;;;AAC/B,qBAAK8B,2BAAL,CAAiC9B,oBAAjC;;;;;;;;;;;;;;;;;;;+FAIW+B,Q;;;;;;AACPvC,gBAAAA,O,GAAUuC,Q;;AACd,oBAAI,KAAK9E,wBAAT,EAAmC;AACjCuC,kBAAAA,OAAO,GAAG,KAAKwC,mBAAL,CAAyBD,QAAzB,CAAV;AACD;;AACKE,gBAAAA,Y,mCACDzC,O;AACH0C,kBAAAA,sBAAsB,EAAE,KAAKC,wBAAL,CACtBJ,QAAQ,CAACK,QADa,EAEtBL,QAAQ,CAACM,uBAFa;;AAK1B,qBAAKC,kBAAL,CAAwBL,YAAxB;;AACA,qBAAKM,mBAAL,CAAyBN,YAAzB;;;;;;;;;;;;;;;;;;wCAG0BzC,O,EAA0B;AACpD,WAAKgD,0BAAL,CACE,uCAAmB,KAAKzC,WAAxB,EAAqCP,OAArC,CADF;AAGD;;;6CAEwB4C,Q,EAAkBK,Q,EAA4B;AACrE,UAAI,CAACA,QAAL,EAAe;AACb,eAAO,IAAP;AACD;;AACD,UAAIL,QAAQ,IAAIM,8BAAmBC,IAAnB,CAAwBP,QAAxB,CAAhB,EAAmD;AACjD,eAAO,IAAP;AACD;;AACD,aAAO,KAAP;AACD;;;wCAEmBL,Q,EAA2B;AAC7C,aAAO,KAAKa,sBAAL,CAA4Bb,QAA5B,CAAP;AACD;;;2CAEsBvC,O,EAA2C;AAChE,UAAI,CAACA,OAAO,CAACqD,oBAAb,EAAmC;AACjC,eAAOrD,OAAP;AACD;;AAED,UAAMsD,gBAAgB,qBAAQtD,OAAR,CAAtB;;AALgE,UAMxDuD,mBANwD,GAMhCD,gBANgC,CAMxDC,mBANwD;AAAA,UAOxDC,6BAPwD,GAOtB,KAAK9F,oBAPiB,CAOxD8F,6BAPwD;AAAA,UAS/BC,mCAT+B,GAU5D,KAAKzF,sBAVuD,CAS9DwF,6BAT8D;;AAYhE,UACEC,mCAAmC,IACnCD,6BAA6B,KAAKE,8BAAmBC,QAFvD,EAGE;AACA,YAAIJ,mBAAmB,IAAI,CAACD,gBAAgB,CAACT,uBAA7C,EAAsE;AACpES,UAAAA,gBAAgB,CAACT,uBAAjB,GAA2C,IAA3C;AACAS,UAAAA,gBAAgB,CAACV,QAAjB,GACEU,gBAAgB,CAAChD,YAAjB,IAAiC,4CADnC;AAED;;AACDgD,QAAAA,gBAAgB,CAACM,2BAAjB,GAA+CL,mBAA/C;AACD;;AACD,aAAOD,gBAAP;AACD;;;;6GAG0B7B,W;;;;;;;;oBACpB,KAAKjE,qB;;;;;;;;AAGV,oBAAI,KAAKsB,0BAAT,EAAqC;AACnCgC,kBAAAA,YAAY,CAAC,KAAKhC,0BAAN,CAAZ;AACD;;;;uBAEmC,KAAK+E,oBAAL,CAA0BpC,WAA1B,C;;;AAA5BqC,gBAAAA,mB;AACA9D,gBAAAA,O,GAAU,KAAK+D,qBAAL,CAA2BD,mBAA3B,C;AAChB,qBAAKE,qBAAL,CAA2BhE,OAA3B;;;;;;;AAEAoB,gBAAAA,OAAO,CAACC,KAAR,CAAc,+BAAd;AACA,qBAAK4C,oBAAL;AACA7C,gBAAAA,OAAO,CAACE,IAAR,CAAa,iBAAb;AACA,qBAAKxC,0BAAL,GAAkCyC,UAAU,CAAC,YAAM;AACjD,kBAAA,MAAI,CAACK,oBAAL,CAA0BH,WAA1B;AACD,iBAF2C,EAEzC,KAFyC,CAA5C;;;;;;;;;;;;;;;;;;;kHAO4BA,W;;;;;;;oBACzB,KAAKhE,wB;;;;;;;;;;uBAIqCiE,OAAO,CAACC,GAAR,CAAY,CACvD,KAAKuC,eAAL,CAAqBzC,WAArB,CADuD,EAEvD,KAAK0C,iBAAL,EAFuD,CAAZ,C;;;;;AAAtC9G,gBAAAA,Y;AAAcU,gBAAAA,c;AAIrB,qBAAKqG,kBAAL,CAAwB/G,YAAxB;AACA,qBAAKgH,oBAAL,CAA0BtG,cAA1B;;;;;;;AAEAqD,gBAAAA,OAAO,CAACC,KAAR,CAAc,QAAd;;;;;;;;;;;;;;;;;;;mHAK6BgC,oB;;;;;AAC/B,qBAAKpB,MAAL,CACEoB,oBAAoB,GAChB,KAAKiB,kBADW,GAEhB,KAAKC,yBAAL,EAHN;;;;;;;;;;;;;;;;;;;6GAQyBvE,O;;;;;;AACnBwE,gBAAAA,gB,GAAmB,KAAKC,OAAL,CAAazE,OAAb,C;AACzB,qBAAK0E,gCAAL,iCACKF,gBADL;AAEEG,kBAAAA,MAAM,EAAE3E,OAAO,CAAC4E,YAFlB;AAGE/B,kBAAAA,uBAAuB,EAAE7C,OAAO,CAAC6C;AAHnC;;;;;;;;;;;;;;;;;;;yGASA7C,O;;;;;;;;;;;;;;;;;;;;sFAC0D,E,+BAAxD6E,c,EAAAA,c,qCAAiB,I;;AAGjB7E,gBAAAA,OAAO,GAAGA,OAAO,IAAI,KAAKA,OAA1B;AACA,qBAAK8E,kBAAL,CAAwB,IAAxB,E,CACA;;AACA,qBAAKC,SAAL,CAAe/E,OAAf;;AACMwE,gBAAAA,gB,GAAmB,KAAKC,OAAL,CAAazE,OAAb,C;;AAEzB,oBAAI,KAAKf,iBAAL,IAA0Be,OAAO,CAACgF,aAAtC,EAAqD;AACnD,uBAAKC,oBAAL,CAA0BjF,OAA1B;AACD;;;uBAEiC0B,OAAO,CAACC,GAAR,CAAY,CAC5C,KAAKuD,WAAL,CAAiBV,gBAAjB,CAD4C,EAE5C,KAAKW,qBAAL,kBAA2BnF,OAAO,CAACmC,IAAnC,kDAA2B,cAAcrE,EAAzC,CAF4C,CAAZ,C;;;;;AAA3BsH,gBAAAA,I;AAAMC,gBAAAA,W;;uBAKgB,KAAKC,oBAAL,CAC3BF,IAAI,CAACtH,EADsB,EAE3B,KAAKX,aAFsB,C;;;AAAvBoI,gBAAAA,c;AAIN,qBAAKC,wBAAL,iCACKhB,gBADL;AAEEG,kBAAAA,MAAM,EAAE3E,OAAO,CAAC2E;AAFlB;;uBAKqB,KAAKc,uBAAL,CACnBJ,WADmB,EAEnBD,IAFmB,EAGnBG,cAHmB,C;;;AAAfG,gBAAAA,M;;AAMN;AACA,oBAAI,KAAKC,yBAAT,EAAoC;AAClC,uBAAK7D,YAAL;AACD,iB,CAED;;;AACA,oBAAI,KAAKtE,qBAAL,IAA8B4H,IAAI,CAAC/B,oBAAvC,EAA6D;AAC3D,uBAAKW,qBAAL,CACE,KAAKD,qBAAL,CACEqB,IADF,EAEEC,WAAW,CAACO,gBAAZ,CAA6BC,iBAF/B,CADF;;AAMA,sBAAI,KAAKpI,wBAAT,EAAmC;AACjC,yBAAKwE,MAAL,iCACK,KAAKjC,OADV;AAEEM,sBAAAA,YAAY,EAAE8E,IAAI,CAACxC;AAFrB;AAID;AACF,iB,CAED;;;AACA,oBAAIiC,cAAJ,EAAoB;AAClBtD,kBAAAA,UAAU,CAAC,YAAM;AACf,oBAAA,MAAI,CAACrD,KAAL,CAAW4H,KAAX,CAAiBC,OAAjB,CAAyB;AACvBC,sBAAAA,OAAO,EAAEC,6BAAcC;AADA,qBAAzB;AAGD,mBAJS,EAIP,EAJO,CAAV;AAKD;;mDACMR,M;;;;;;uBAED,KAAKS,YAAL,e;;;mDACC,I;;;;AAEP,qBAAKrB,kBAAL,CAAwB,KAAxB;;;;;;;;;;;;;;;;;;;;kGAMF9E,O;;;;;;;;;;;sFAC0D,E,+BAAxD6E,c,EAAAA,c,qCAAiB,I;;qBAEf,KAAKzG,Y;;;;;mDAAqB,KAAKW,qB;;;AAEnC,qBAAKA,qBAAL,GAA6B,KAAKqH,gBAAL,CAAsBpG,OAAtB,EAA+B;AAC1D6E,kBAAAA,cAAc,EAAdA;AAD0D,iBAA/B,CAA7B;;uBAIqB,KAAK9F,qB;;;AAApB2G,gBAAAA,M;AACN,qBAAK3G,qBAAL,GAA6B,IAA7B;mDACO2G,M;;;;;;;;;;;;;;;;;;;sGAKPW,S,EACArG,O;;;;;;;;;;;;;;;;;;;;sFAC2D,E,+BAAzD6E,c,EAAAA,c,qCAAiB,K;;qBAEf,KAAKyB,WAAL,CAAiBD,SAAjB,C;;;;;mDACM,KAAKE,aAAN,CAA4BC,Q;;;AAErCxG,gBAAAA,OAAO,GAAGA,OAAO,IAAI,KAAKA,OAA1B;;AAEE,qBAAKyG,iBAAL,CAAuBJ,SAAvB,E,CACA;;AACA,qBAAKtB,SAAL,CAAe/E,OAAf;;AACMwE,gBAAAA,gB,GAAmB,KAAKC,OAAL,CAAazE,OAAb,C;;AACzB,oBAAI,KAAKf,iBAAL,IAA0Be,OAAO,CAACgF,aAAtC,EAAqD;AACnD,uBAAKC,oBAAL,CAA0BjF,OAA1B;AACD;;AAEA,qBAAKuG,aAAN,CAA4BC,QAA5B,GAAuC9E,OAAO,CAACC,GAAR,CAAY,CACjD,KAAK+E,UAAL,CAAgBL,SAAhB,EAA2B7B,gBAA3B,CADiD,EAEjD,KAAKW,qBAAL,mBAA2BnF,OAAO,CAACmC,IAAnC,mDAA2B,eAAcrE,EAAzC,CAFiD,CAAZ,CAAvC;;uBAKmC,KAAKyI,aAAN,CAA4BC,Q;;;;;AAAvDpB,gBAAAA,I;AAAMC,gBAAAA,W;;uBAEgB,KAAKC,oBAAL,CAC3Be,SAD2B,EAE3B,KAAKlJ,aAFsB,C;;;AAAvBoI,gBAAAA,c;;uBAKe,KAAKE,uBAAL,CACnBJ,WADmB,EAEnBD,IAFmB,EAGnBG,cAHmB,C;;;AAAfG,gBAAAA,M;;AAMN;AACA,oBAAI,KAAKC,yBAAT,EAAoC;AAClC,uBAAK7D,YAAL;AACD,iB,CAED;;;AACA,oBAAI,KAAKtE,qBAAL,IAA8B4H,IAAI,CAAC/B,oBAAvC,EAA6D;AAC3D,uBAAKW,qBAAL,CACE,KAAKD,qBAAL,CACEqB,IADF,EAEEC,WAAW,CAACO,gBAAZ,CAA6BC,iBAF/B,CADF;;AAMA,sBAAI,KAAKpI,wBAAT,EAAmC;AACjC,yBAAKwE,MAAL,iCACK,KAAKjC,OADV;AAEEM,sBAAAA,YAAY,EAAE8E,IAAI,CAACxC;AAFrB;AAID;AACF,iB,CAED;;;AACA,oBAAIiC,cAAJ,EAAoB;AAClBtD,kBAAAA,UAAU,CAAC,YAAM;AACf,oBAAA,MAAI,CAACrD,KAAL,CAAW4H,KAAX,CAAiBC,OAAjB,CAAyB;AACvBC,sBAAAA,OAAO,EAAEC,6BAAcU;AADA,qBAAzB;AAGD,mBAJS,EAIP,EAJO,CAAV;AAKD;;mDACMjB,M;;;;;;uBAED,KAAKS,YAAL,e;;;mDACC,I;;;;AAEP,uBAAQ,KAAKI,aAAN,CAA4BC,QAAnC;AACA,qBAAKI,oBAAL,CAA0BP,SAA1B;;;;;;;;;;;;;;;;;;;;0GAKoBQ,e;;;;;;sBAClB,CAACA,eAAD,IAAoB,CAAC,KAAK5G,UAA1B,IAAwC,KAAKA,UAAL,CAAgBgB,MAAhB,KAA2B,C;;;;;;;;AAGjEd,gBAAAA,M,aAAY0G,e;AACZC,gBAAAA,I,GAAO,iBAAK,UAACC,IAAD;AAAA,yBAAUA,IAAI,CAACjJ,EAAL,KAAYqC,MAAtB;AAAA,iBAAL,EAAmC,KAAKF,UAAxC,C;;qBAET6G,I;;;;;;uBACI,KAAK9E,oBAAL,CAA0B7B,MAA1B,C;;;;;;;;;;;;;;;;;;;0GAKaF,U;;;;;AACrB,qBAAK+G,iBAAL,CAAuB/G,UAAvB;;;;;;;;;;;;;;;;;;;4GAIuB5C,Y;;;;;AACvB,qBAAK4J,mBAAL,CAAyB5J,YAAzB;;;;;;;;;;;;;;;;;;;8GAIyBU,c;;;;;AACzB,qBAAKmJ,qBAAL,CAA2BnJ,cAA3B;;;;;;;;;;;;;;;;;;;+GAI0BiC,O;;;;;AAC1B,qBAAKmH,sBAAL,CAA4BnH,OAA5B;;;;;;;;;;;;;;;;;;;;;;;;AAKA,qBAAKmH,sBAAL,CAA4B,IAA5B;;;;;;;;;;;;;;;;;;;4GAIuBnH,O;;;;;AACvB,qBAAKoH,mBAAL,CAAyBpH,OAAzB;;;;;;;;;;;;;;;;;;;0GAIsBqG,S;;;;;AACtB,qBAAKgB,qBAAL,8BAA+B,KAAK5G,cAApC,IAAoD;AAAE4F,kBAAAA,SAAS,EAATA;AAAF,iBAApD;;;;;;;;;;;;;;;;;;;6GAIyBA,S;;;;;;AACnBiB,gBAAAA,W,GAAc,mBAClB,UAACC,GAAD;AAAA,yBAASA,GAAG,CAAClB,SAAJ,KAAkBA,SAA3B;AAAA,iBADkB,EAElB,KAAK5F,cAFa,C;;AAIpB,qBAAK4G,qBAAL,CAA2BC,WAA3B;;;;;;;;;;;;;;;;;;;kHAI6BtH,O;;;;;;AACvBb,gBAAAA,kB,GAAqB,iBAAKqI,gCAAL,EAA4BxH,OAAO,IAAI,EAAvC,C;;AAC3B,qBAAKyH,yBAAL,CAA+BtI,kBAA/B;;;;;;;;;;;;;;;;;;;0HAIqCa,O;;;;;;AAC/B0H,gBAAAA,oB,GAAuB,iBAC3BC,yCAD2B,EAE3B3H,OAAO,IAAI,EAFgB,C;;AAI7B,qBAAK4H,iCAAL,CAAuCF,oBAAvC;;;;;;;;;;;;;;;;;;;4GAIuBtJ,Y;;;;;AACvB,qBAAKyJ,mBAAL,CAAyBzJ,YAAzB;;;;;;;;;;;;;;;;;;;6GAIiCqD,W;;;;;;;uBACP,KAAK0D,qBAAL,CAA2B1D,WAA3B,C;;;AAApB4D,gBAAAA,W;AACAQ,gBAAAA,iB,GAAoBR,WAAW,CAACO,gBAAZ,CAA6BC,iB;;uBACrB,KAAKiC,UAAL,CAAgBjC,iBAAhB,C;;;AAA5B/B,gBAAAA,mB;;oBACDA,mB;;;;;sBACG,IAAIiE,KAAJ,0CAC8BlC,iBAD9B,W;;;mDAID/B,mB;;;;;;;;;;;;;;;;;;;8GAImBrC,W;;;;;mDACnB,KAAKvD,KAAL,CAAW8J,MAAX,CACJC,OADI,GAEJC,SAFI,CAEMzG,WAFN,EAGJzB,OAHI,GAIJqF,WAJI,GAKJ8C,GALI,E;;;;;;;;;;;;;;;;;;;oGASS3D,gB;;;;;mDACT,KAAKtG,KAAL,CAAW8J,MAAX,CACJC,OADI,GAEJC,SAFI,GAGJlI,OAHI,GAIJoI,IAJI,CAIC5D,gBAJD,C;;;;;;;;;;;;;;;;;;;mGAQQ6B,S,EAAmB7B,gB;;;;;mDAC3B,KAAKtG,KAAL,CAAW8J,MAAX,CACJC,OADI,GAEJC,SAFI,GAGJlI,OAHI,CAGIqG,SAHJ,EAIJgC,GAJI,CAIA7D,gBAJA,C;;;;;;;;;;;;;;;;;;;mGAQQ6B,S;;;;;;;;;;;;;;;;;sFAA6C,E,6BAAxBiC,Y,EAAAA,Y,mCAAe,I;;;uBAE1B,KAAKpK,KAAL,CAAW8J,MAAX,CACpBC,OADoB,GAEpBC,SAFoB,GAGpBlI,OAHoB,CAGZqG,SAHY,EAIpB8B,GAJoB,E;;;AAAjBI,gBAAAA,Q;mFAMDA,Q;AACH;AACA1F,kBAAAA,uBAAuB,EAAE,CAAC,CAAC0F,QAAQ,CAAC3F;;;;;;;uBAGD,cAAE4F,QAAF,CAAWC,KAAX,GAAmBC,IAAnB,E;;;;AAA7BC,gBAAAA,S,yBAAAA,S;AAAW3C,gBAAAA,O,yBAAAA,O;AACnB5E,gBAAAA,OAAO,CAACwH,GAAR,uCACiCvC,SADjC,eAC+CsC,SAD/C,eAC6D3C,OAD7D;AAGM6C,gBAAAA,gB,GACJF,SAAS,KAAK,SAAd,IACA3C,OAAO,CAAC8C,OAAR,CAAgB,0BAAhB,IAA8C,CAAC,C;;AACjD,oBAAIR,YAAY,IAAIO,gBAApB,EAAsC;AACpCtH,kBAAAA,UAAU,CAAC,YAAM;AACf,oBAAA,MAAI,CAACrD,KAAL,CAAW4H,KAAX,CAAiBiD,MAAjB,CAAwB;AACtB/C,sBAAAA,OAAO,EAAEC,6BAAc+C;AADD,qBAAxB;AAGD,mBAJS,EAIP,EAJO,CAAV;AAKD;;;;;;;;;;;;;;;;;;;;;;;;;;;;uBAOe,KAAK9K,KAAL,CAAW8J,MAAX,CAAkBiB,OAAlB,CACfC,QADe,GAEff,GAFe,CAGd,qEAHc,C;;;AAAZgB,gBAAAA,G;mDAKCA,GAAG,CAACT,IAAJ,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIajH,gBAAAA,W,iEAAc,G;;AAE1ByH,gBAAAA,Q,GAAW,KAAKhL,KAAL,CAAW8J,MAAX,CAAkBiB,OAAlB,CAA0BC,QAA1B,E;;uBACSA,QAAQ,CAACE,IAAT,CAAc;AACtCC,kBAAAA,MAAM,EAAE,KAD8B;AAEtCC,kBAAAA,GAAG,8CAAuC7H,WAAvC;AAFmC,iBAAd,C;;;AAApB8H,gBAAAA,W;mDAICA,WAAW,CAACb,IAAZ,E;;;;;AAEPtH,gBAAAA,OAAO,CAACE,IAAR,CAAa,4BAAb;mDACO,I;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOD4H,gBAAAA,Q,GAAW,KAAKhL,KAAL,CAAW8J,MAAX,CAAkBiB,OAAlB,CAA0BC,QAA1B,E;;uBACSA,QAAQ,CAACE,IAAT,CAAc;AACtCC,kBAAAA,MAAM,EAAE,KAD8B;AAEtCC,kBAAAA,GAAG,EAAE;AAFiC,iBAAd,C;;;AAApBC,gBAAAA,W;;uBAIiDA,WAAW,CAACb,IAAZ,E;;;;+DAA/Cc,S;AAAAA,gBAAAA,S,uCAAY,E;+DAAIlM,e;AAAAA,gBAAAA,e,uCAAkB,E;AAExCmM,gBAAAA,sB,GAGEnM,e,CAHFmM,sB,EACAC,qB,GAEEpM,e,CAFFoM,qB,EACGC,mB,4BACDrM,e;AACEsM,gBAAAA,wB,mCACDD,mB;AACH;AACAF,kBAAAA,sBAAsB,EACpBA,sBAAsB,IAAIC,qBAA1B,IAAmD;;mDAEhD;AACLF,kBAAAA,SAAS,EAATA,SADK;AAELlM,kBAAAA,eAAe,EAAEsM;AAFZ,iB;;;;;AAKPxI,gBAAAA,OAAO,CAACE,IAAR,CAAa,6BAAb;mDACO,I;;;;;;;;;;;;;;;;;;;6GAMT+E,S;;;;;;;;;;;AACAlI,gBAAAA,M,iEAAS0L,oB;;oBAEJ,KAAKC,mB;;;;;mDACD,I;;;sBAGL,KAAK5L,KAAL,CAAW6L,KAAX,CAAiBC,IAAjB,KAA0B,I;;;;;mDACrB,I;;;;;uBAGmB,KAAK9L,KAAL,CAAW8J,MAAX,CAAkBiB,OAAlB,CACvBC,QADuB,GAEvBf,GAFuB,uDAGyB9B,SAHzB,kBAItB;AACE4D,kBAAAA,QAAQ,EAAE,KAAK/L,KAAL,CAAWC,MAAX,CAAkB+L,eAAlB,CAAkC/L,MAAlC;AADZ,iBAJsB,C;;;AAApBoL,gBAAAA,W;;uBAQuBA,WAAW,CAACb,IAAZ,E;;;;AAArByB,gBAAAA,U,0BAAAA,U;mDACD;AACLA,kBAAAA,UAAU,EAAVA;AADK,iB;;;;;AAIP/I,gBAAAA,OAAO,CAACE,IAAR,CAAa,0BAAb;mDACO,I;;;;;;;;;;;;;;;;;;0CAKT8I,W,EACAC,O,CAAkB;MACD;AACjB,UAAM9B,QAAQ,iDACT,KAAKnJ,qBADI,GAETgL,WAFS;AAGZC,QAAAA,OAAO,EAAEA,OAAO,IAAID,WAAW,CAACtM,EAHpB;AAIZuF,QAAAA,oBAAoB,EAAE;AAJV,QAAd;;AAMA,6CACKkF,QADL;AAEE1F,QAAAA,uBAAuB,EAAE,CAAC,CAAC0F,QAAQ,CAAC3F;AAFtC;AAID;AAED;AACF;AACA;AACA;AACA;;;;8BACY5C,O,EAA0B;AAClC,UAAI,CAACA,OAAL,EAAc;AACZ,cAAM,IAAIsK,4BAAJ,CAAkBrE,6BAAcsE,kBAAhC,CAAN;AACD;;AAHiC,UAI1BC,KAJ0B,GAI6BxK,OAJ7B,CAI1BwK,KAJ0B;AAAA,UAInB5H,QAJmB,GAI6B5C,OAJ7B,CAInB4C,QAJmB;AAAA,UAIT6H,QAJS,GAI6BzK,OAJ7B,CAITyK,QAJS;AAAA,UAIC5H,uBAJD,GAI6B7C,OAJ7B,CAIC6C,uBAJD;AAKlC,UAAM6H,MAAM,GAAG,IAAIJ,4BAAJ,EAAf;;AACA,UAAIE,KAAK,CAACvJ,MAAN,IAAgB,CAApB,EAAuB;AACrByJ,QAAAA,MAAM,CAACC,IAAP,CAAY1E,6BAAc2E,UAA1B;AACD;;AACD,UAAI/H,uBAAuB,KAAK,CAACD,QAAD,IAAaA,QAAQ,CAAC3B,MAAT,IAAmB,CAArC,CAA3B,EAAoE;AAClEyJ,QAAAA,MAAM,CAACC,IAAP,CAAY1E,6BAAc4E,UAA1B;AACD;;AACD,UAAIJ,QAAJ,EAAc;AACZ,YAAIA,QAAQ,CAACK,iBAAT,GAA6B,CAAjC,EAAoC;AAClCJ,UAAAA,MAAM,CAACC,IAAP,CAAY1E,6BAAc8E,iBAA1B;AACD;AACF;;AACD,UAAIL,MAAM,CAACzJ,MAAP,GAAgB,CAApB,EAAuB;AACrB,cAAMyJ,MAAN;AACD;AACF;AAED;AACF;AACA;AACA;;;;4BACU1K,O,EAA2C;AAAA,UAE/CwK,KAF+C,GAc7CxK,OAd6C,CAE/CwK,KAF+C;AAAA,UAG/CnL,WAH+C,GAc7CW,OAd6C,CAG/CX,WAH+C;AAAA,UAI/CkE,mBAJ+C,GAc7CvD,OAd6C,CAI/CuD,mBAJ+C;AAAA,UAK/CyH,cAL+C,GAc7ChL,OAd6C,CAK/CgL,cAL+C;AAAA,UAM/CvB,sBAN+C,GAc7CzJ,OAd6C,CAM/CyJ,sBAN+C;AAAA,UAO/CwB,YAP+C,GAc7CjL,OAd6C,CAO/CiL,YAP+C;AAAA,UAQ/CrI,QAR+C,GAc7C5C,OAd6C,CAQ/C4C,QAR+C;AAAA,UAS/C6H,QAT+C,GAc7CzK,OAd6C,CAS/CyK,QAT+C;AAAA,UAU/CS,UAV+C,GAc7ClL,OAd6C,CAU/CkL,UAV+C;AAAA,UAW/C7H,oBAX+C,GAc7CrD,OAd6C,CAW/CqD,oBAX+C;AAAA,UAY/CR,uBAZ+C,GAc7C7C,OAd6C,CAY/C6C,uBAZ+C;AAAA,UAa/CV,IAb+C,GAc7CnC,OAd6C,CAa/CmC,IAb+C;AAejD,UAAMgJ,SAAS,GAAG;AAChBhJ,QAAAA,IAAI,EAAJA,IADgB;AAEhBqI,QAAAA,KAAK,EAALA,KAFgB;AAGhBnL,QAAAA,WAAW,EAAXA,WAHgB;AAIhBkE,QAAAA,mBAAmB,EAAnBA,mBAJgB;AAKhByH,QAAAA,cAAc,EAAdA,cALgB;AAMhBvB,QAAAA,sBAAsB,EAAtBA,sBANgB;AAOhBwB,QAAAA,YAAY,EAAZA,YAPgB;AAQhBrI,QAAAA,QAAQ,EAAEC,uBAAuB,GAAGD,QAAH,GAAc,EAR/B;AAShBsI,QAAAA,UAAU,EAAVA,UATgB;AAUhB7H,QAAAA,oBAAoB,EAApBA;AAVgB,OAAlB,CAfiD,CA2BjD;;AACA,UAAIhE,WAAW,KAAKC,2BAAY8L,SAAhC,EAA2C;AACzC,YAAMC,SAAkC,GAAG;AACzCP,UAAAA,iBAAiB,EAAEL,QAAQ,CAACK,iBADa;AAEzCQ,UAAAA,QAAQ,EAAE;AACRxN,YAAAA,EAAE,EAAE,KAAKyN,oBAAL,GACAd,QAAQ,CAACa,QAAT,CAAkBxN,EADlB,GAEA0N;AAHI;AAF+B,SAA3C;;AAQA,YAAIf,QAAQ,CAACvK,SAAb,EAAwB;AACtB;AACA;AACAmL,UAAAA,SAAS,CAACnL,SAAV,GAAsB,KAAKqL,oBAAL,GAClBd,QAAQ,CAACvK,SADS,GAElBuL,mBAAOC,GAAP,CAAWjB,QAAQ,CAACvK,SAApB,EAA+ByL,MAA/B,EAFJ;AAGD;;AACDR,QAAAA,SAAS,CAACV,QAAV,GAAqBY,SAArB;;AAEA,YAAIH,UAAU,IAAIA,UAAU,CAACU,KAA7B,EAAoC;AAClCT,UAAAA,SAAS,CAACD,UAAV,CAAqBU,KAArB,GAA6BH,mBAAOC,GAAP,CAAWR,UAAU,CAACU,KAAtB,EAA6BD,MAA7B,EAA7B;AACD;AACF,OAjDgD,CAmDjD;;;AACAR,MAAAA,SAAS,CAAC9L,WAAV,GACE8L,SAAS,CAAC9L,WAAV,KAA0BC,2BAAYuM,GAAtC,GACIvM,2BAAYC,SADhB,GAEI4L,SAAS,CAAC9L,WAHhB;AAIA,aAAO8L,SAAP;AACD;;;;gHAGC9F,W,EACAD,I,EACAG,c;;;;;;AAEMG,gBAAAA,M,GAAS;AACb1F,kBAAAA,OAAO,EAAEoF,IADI;AAEbC,kBAAAA,WAAW,kCACNA,WADM;AAETyG,oBAAAA,sBAAsB,EAAE,8CACtBzG,WAAW,CAAC0G,aADU,EAEtB3G,IAAI,CAACtH,EAFiB,CAFf;AAMTkO,oBAAAA,qBAAqB,EAAE,6CACrB3G,WAAW,CAAC0G,aADS;AANd,oBAFE;AAYbnO,kBAAAA,aAAa,EAAE,KAAKA,aAAL,CAAmBC,IAZrB;AAab0H,kBAAAA,cAAc,EAAdA;AAba,iB;mDAeRG,M;;;;;;;;;;;;;;;;;;;qGAGUgF,M;;;;;;;sBACbA,MAAM,YAAYJ,4B;;;;;uDACAI,MAAM,CAAC/I,G;;;AAA3B,sEAAgC;AAArBN,oBAAAA,KAAqB;;AAC9B,yBAAKnD,KAAL,CAAW4H,KAAX,CAAiBmG,OAAjB,CAAyB5K,KAAzB;AACD;;;;;;;;;;;sBACQqJ,MAAM,IAAIA,MAAM,CAAClC,Q;;;;;;uBAKhBkC,MAAM,CAAClC,QAAP,CAAgBC,KAAhB,GAAwBC,IAAxB,E;;;;AAHR1C,gBAAAA,O,yBAAAA,O;AACA2C,gBAAAA,S,yBAAAA,S;AACAuD,gBAAAA,c,yBAAAA,c;;sBAEEvD,SAAS,KAAK,yBAAd,IAA2CuD,c;;;;;AAC7C,qBAAKhO,KAAL,CAAW4H,KAAX,CAAiBiD,MAAjB,CAAwB;AACtB/C,kBAAAA,OAAO,EAAEC,6BAAckG,uBADD;AAEtBC,kBAAAA,OAAO,EAAE;AACPF,oBAAAA,cAAc,EAAdA;AADO;AAFa,iBAAxB;;;;;;sBAOAvD,SAAS,KAAK,SAAd,IACA3C,OAAO,CAAC8C,OAAR,CAAgB,0BAAhB,IAA8C,CAAC,C;;;;;AAE/C,qBAAK5K,KAAL,CAAW4H,KAAX,CAAiBiD,MAAjB,CAAwB;AACtB/C,kBAAAA,OAAO,EAAEC,6BAAc+C;AADD,iBAAxB;;;;;;gCAIA,CAAC,KAAK9K,KAAL,CAAWmO,mB;;;;;;;;uBACJ,KAAKnO,KAAL,CAAWmO,mBAAX,CAA+BC,cAA/B,CAA8C5B,MAA9C,C;;;;;;;;;;;AAER,qBAAKxM,KAAL,CAAW4H,KAAX,CAAiBiD,MAAjB,CAAwB;AAAE/C,kBAAAA,OAAO,EAAEC,6BAAcsG;AAAzB,iBAAxB;;;;;;;AAGFnL,gBAAAA,OAAO,CAACwH,GAAR,CAAY,SAAZ,EAAuB8B,MAAvB;;AACA,qBAAKxM,KAAL,CAAW4H,KAAX,CAAiBiD,MAAjB,CAAwB;AAAE/C,kBAAAA,OAAO,EAAEC,6BAAcsG;AAAzB,iBAAxB;;;;;;;;;;;;;;;;;;uCAKFjJ,gB,EACAkJ,gB,EACAC,wB,EACA;AAAA,UACQlJ,mBADR,GAC+CD,gBAD/C,CACQC,mBADR;AAAA,kCAC+CD,gBAD/C,CAC6BV,QAD7B;AAAA,UAC6BA,QAD7B,sCACwC,EADxC;;AAEA,UAAIA,QAAQ,KAAK,EAAjB,EAAqB;AACnB;AACAU,QAAAA,gBAAgB,CAAChD,YAAjB,GAAgCsC,QAAhC;AACD;;AAED,UAAI8J,cAAJ;;AACA,cAAQF,gBAAR;AACE,aAAK9I,8BAAmBiJ,IAAxB;AACED,UAAAA,cAAc,GAAG9J,QAAQ,KAAK,EAA9B;AACA;;AACF,aAAKc,8BAAmBkJ,GAAxB;AACEF,UAAAA,cAAc,GAAG,IAAjB;AACA;;AACF,aAAKhJ,8BAAmBC,QAAxB;AACE+I,UAAAA,cAAc,GAAGnJ,mBAAmB,IAAIX,QAAQ,KAAK,EAArD;AACA;;AACF;AACE8J,UAAAA,cAAc,GAAGpJ,gBAAgB,CAACT,uBAAlC;AAXJ;;AAcA,UAAMgK,oBAAoB,GACxBL,gBAAgB,KAAK9I,8BAAmBC,QAAxC,GACI8I,wBAAwB,IAAIlJ,mBADhC,GAEIkJ,wBAHN;AAKAnJ,MAAAA,gBAAgB,CAACT,uBAAjB,GAA2C6J,cAA3C;AACApJ,MAAAA,gBAAgB,CAACM,2BAAjB,GAA+CiJ,oBAA/C;AACD;;;oCAGC7M,O,SAEA8M,M,EACiB;AAAA,UAFfzP,YAEe,SAFfA,YAEe;AAAA,UAFDuC,uBAEC,SAFDA,uBAEC;;AACjB,UAAI,CAAC,KAAKnC,wBAAV,EAAoC;AAClC,eAAOuC,OAAP;AACD;;AAHgB,kCAOb,KAAKtC,oBAPQ;AAAA,yDAKfqP,uCALe;AAAA,UAK0BC,mBAL1B,uCAKgD,KALhD;AAAA,UAMgBR,gBANhB,yBAMfhJ,6BANe;AAAA,kCAWb,KAAKxF,sBAXQ;AAAA,UAS0BiP,2BAT1B,yBASfF,uCATe;AAAA,UAUgBN,wBAVhB,yBAUfjJ,6BAVe;;AAajB,UAAMF,gBAAgB,iDACjBtD,OADiB,GAEhB8M,MAAM,GAAGlN,uBAAH,GAA6BvC,YAFnB;AAGpBgG,QAAAA,oBAAoB,EAAEyJ,MAHF;AAIpBI,QAAAA,qBAAqB,EAAE,KAAKA;AAJR,QAAtB,CAbiB,CAoBjB;;;AACA,UAAIJ,MAAJ,EAAY;AACV,aAAKK,kBAAL,CACE7J,gBADF,EAEEkJ,gBAFF,EAGEC,wBAHF;AAKD,OAND,MAMO;AACL;AACA,YAAIO,mBAAJ,EAAyB;AACvB1J,UAAAA,gBAAgB,CAACT,uBAAjB,GAA2C,IAA3C;AACD;;AACD,YAAIoK,2BAAJ,EAAiC;AAC/B3J,UAAAA,gBAAgB,CAACM,2BAAjB,GAA+C,IAA/C;AACD;AACF;;AACD,6CACKN,gBADL;AAEEV,QAAAA,QAAQ,EACNU,gBAAgB,CAACT,uBAAjB,IAA4C,CAACS,gBAAgB,CAACV,QAA9D,GACI,4CADJ,GAEIU,gBAAgB,CAACV;AALzB;AAOD,K,CAED;;;;gCACYyD,S,EAAmB;AAC7B,aACE,KAAK5F,cAAL,IACA,iBAAK,UAAC8G,GAAD;AAAA,eAAcA,GAAG,CAAClB,SAAJ,KAAkBA,SAAhC;AAAA,OAAL,EAAgD,KAAK5F,cAArD,CAFF;AAID;;;wBApoC2B;AAAA;;AAC1B,sCAAO,KAAKvC,KAAL,CAAWN,aAAX,CAAyBC,IAAhC,0DAAO,sBAA+Bf,IAAtC;AACD;;;wBAM0B;AACzB,aAAO,oCAAgB,KAAKI,aAArB,EAAoC,KAAKC,aAAzC,CAAP;AACD;;;wBAGuE;AAAA;;AACtE,aAAO,4BAAKE,YAAL,0EAAmBC,eAAnB,KAAsC,EAA7C;AACD;;;wBAGkE;AAAA;;AACjE,aAAO,6BAAKD,YAAL,4EAAmBE,SAAnB,KAAgC,EAAvC;AACD;;;wBAOkC;AACjC,aACE,KAAKC,qBAAL,IACA,KAAKC,wBADL,IAEA,KAAKC,oBAAL,CAA0BC,0BAH5B;AAKD;;;wBAGiC;AAChC,aAAO;AACLG,QAAAA,EAAE,YAAK,KAAKF,aAAL,CAAmBC,IAAnB,CAAwBC,EAA7B,CADG;AAELhB,QAAAA,IAAI,EAAEsQ,gCAFD;AAGLC,QAAAA,WAAW,EAAE;AAHR,OAAP;AAKD;;;wBAGoE;AAAA;;AACnE,aAAO,8BAAKtP,cAAL,8EAAqBT,eAArB,KAAwC,EAA/C;AACD;;;wBAM0D;AACzD,UAAI,CAAC,KAAKG,wBAAN,IAAkC,CAAC,KAAKO,sBAA5C,EAAoE;AAClE,eAAO,EAAP;AACD;;AACD,aAAO,iBAAKsP,0BAAL,EAAsB,KAAKtP,sBAA3B,CAAP;AACD;;;wBAMuD;AACtD,UAAI,CAAC,KAAKP,wBAAV,EAAoC;AAClC,eAAO,EAAP;AACD;;AACD,aAAO,iBAAK6P,0BAAL,EAAsB,KAAK5P,oBAA3B,CAAP;AACD;;;wBAMkE;AACjE,UAAI,CAAC,KAAKF,qBAAV,EAAiC;AAC/B,eAAO,EAAP;AACD;;AACD,aAAO,8CAAS8P,0BAAT,IAA0B,UAA1B,IAAuC,KAAKrP,eAA5C,CAAP;AACD;;;wBAGmB;AAClB,aAAO,KAAKC,KAAL,CAAWC,MAAX,CAAkBhB,aAAlB,IAAmC0M,oBAA1C;AACD;;;wBAEyC;AACxC,UAAI,CAAC,KAAKpM,wBAAV,EAAoC;AAClC,eAAO,KAAKQ,eAAZ;AACD;;AAED,aAAO,KAAKuB,eAAL,iCAEA,KAAKJ,qBAFL;AAGHK,QAAAA,WAAW,EAAE,KAAKC;AAHf,UAKL;AACErC,QAAAA,YAAY,EAAE,KAAKsC,kBADrB;AAEEC,QAAAA,uBAAuB,EAAE,KAAKC;AAFhC,OALK,EASL,IATK,CAAP;AAWD;;;wBA2B4C;AAC3C,UAAM0N,cAAc,GAAG,KAAKnO,qBAA5B;AACA,UAAM0N,MAAM,GAAG,KAAKU,mBAApB;AACA,UAAMnQ,YAAY,GAAG,KAAKA,YAA1B;AACA,UAAM2B,YAAY,GAAG,KAAKC,iBAAL,GACjB,KAAKC,0BADY,GAEjB,KAAKC,kBAFT;;AAIA,UAAI,KAAK1B,wBAAT,EAAmC;AACjC,YAAI,CAAC,oBAAQJ,YAAR,CAAL,EAA4B;AAC1B,iBAAOyP,MAAM,GACT,KAAKxI,kBADI,GAET,KAAKC,yBAAL,EAFJ;AAGD;;AACD,eAAOgJ,cAAP;AACD;;AAED,UAAMvN,OAAO,iDACRuN,cADQ,GAERvO,YAFQ;AAGXK,QAAAA,WAAW,EAAEC,2BAAYC;AAHd,QAAb;;AAKA,aAAOS,OAAP;AACD;;;wBA+B4C;AAC3C,aAAO,KAAKyN,wBAAL,EAAP;AACD;;;wBAEmB;AAClB,aAAO,KAAKvP,KAAL,CAAWN,aAAlB;AACD;;;wBAEuB;AAAA;;AACtB,gEAAO,KAAKM,KAAL,CAAWwP,cAAlB,2DAAO,uBAA2BzO,iBAAlC,yEAAuD,KAAvD;AACD;;;wBAEyB;AAAA;;AACxB,iEAAO,KAAKf,KAAL,CAAWwP,cAAlB,2DAAO,uBAA2B5D,mBAAlC,2EAAyD,KAAzD;AACD;;;wBAE2B;AAAA;;AAC1B,iEAAO,KAAK5L,KAAL,CAAWwP,cAAlB,2DAAO,uBAA2BlQ,qBAAlC,2EAA2D,KAA3D;AACD;;;wBAE+B;AAAA;;AAC9B,iEAAO,KAAKU,KAAL,CAAWwP,cAAlB,2DAAO,uBAA2B/H,yBAAlC,2EAA+D,IAA/D;AACD;;;wBAE8B;AAAA;;AAC7B,kEAAO,KAAKzH,KAAL,CAAWwP,cAAlB,4DAAO,wBAA2BjQ,wBAAlC,2EAA8D,KAA9D;AACD;;;wBAE4B;AAAA;;AAC3B,mEAAO,KAAKS,KAAL,CAAWwP,cAAlB,4DAAO,wBAA2B3N,sBAAlC,6EAA4D,KAA5D;AACD;;;wBAE0B;AAAA;;AACzB,mEAAO,KAAK7B,KAAL,CAAWwP,cAAlB,4DAAO,wBAA2BnC,oBAAlC,6EAA0D,KAA1D;AACD;;;;EAxQ0BoC,gB,2EAS1BC,W;;;;;WAC0B,I;;iFAE1BA,W;;;;;WACuB,K;;mFAEvBA,W;;;;;WAEgC,E;;oFAEhCC,a,EACAD,W;;;;;WACkC,I;;+FAElCC,a,EACAD,W;;;;;WACwD,E;;uFAExDC,a,EACAD,W;;;;;WACwC,E;;+EAExCA,W;;;;;WACgC,E;;iFAEhCA,W;;;;;WACqC,E;;mFAErCA,W;;;;;WACyC,E;;iFAEzCA,W;;;;;WACmC,E;;0FAEnCA,W;;;;;WAC+B,K;;qvDA8N/BE,Y,qKAKAA,Y,yKAKAA,Y,4KAKAA,Y,yKAKAA,Y,8KAKAA,Y,+KAKAA,Y,yKAKAA,Y,+KAKAA,Y,2LAKAA,Y,6LAmBAA,Y,wJAwDAC,sB,2IAKAC,gB,4IAKAA,gB,kJAKAA,gB,8JAYAA,gB,4KAKAA,gB,iKAKAA,gB,2JA+DAA,gB,8KAsBAA,gB,oLAiBAA,gB,+KASAA,gB,qKAUAA,gB,yJA0EAA,gB,sJAgBAA,gB,+JA4EAA,gB,kKAaAA,gB,mKAKAA,gB,uKAKAA,gB,0KAKAA,gB,0KAKAA,gB,uKAKAA,gB,oKAKAA,gB,sKAKAA,gB,6KASAA,gB,yLAMAA,gB,mLASAA,gB,uKAKAA,gB,0KAaAA,gB,iKAUAA,gB,sJASAA,gB,qJASAA,gB,wJAgCAA,gB,6JAUAA,gB,iKAeAA,gB,sKA8BAA,gB","sourcesContent":["import { MeetingServiceInfoResource } from '@rc-ex/core/definitions';\nimport {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n  storage,\n  track,\n} from '@ringcentral-integration/core';\nimport moment from 'moment';\nimport { filter, find, isEmpty, pick } from 'ramda';\nimport { DEFAULT_LOCALE } from '@ringcentral-integration/i18n';\nimport { Analytics } from '../AnalyticsV2';\nimport {\n  comparePreferences,\n  generateRandomPassword,\n  getDefaultMeetingSettings,\n  getDefaultTopic,\n  getInitializedStartTime,\n  getMobileDialingNumberTpl,\n  getPhoneDialingNumberTpl,\n  MeetingType,\n  prunePreferencesObject,\n  UTC_TIMEZONE_ID,\n} from '../../helpers/meetingHelper';\nimport { IMeeting } from '../../interfaces/Meeting.interface';\nimport background from '../../lib/background';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport {\n  ASSISTED_USERS_MYSELF,\n  COMMON_SETTINGS,\n  DEFAULT_LOCK_SETTINGS,\n  LAST_MEETING_SETTINGS,\n  PMIRequirePassword,\n  RCM_PASSWORD_REGEX,\n  SAVED_DEFAULT_MEETING_SETTINGS,\n} from './constants';\nimport { getExtensionName, getHostId } from './helper';\nimport {\n  CommonPersonalMeetingSettings,\n  DefaultScheduleLockedSettings,\n  Deps,\n  EffectiveScheduleUserSettings,\n  LastMeetingSetting,\n  LockedSettings,\n  MeetingDelegator,\n  MeetingDelegatorsResponse,\n  MeetingInfoResponse,\n  MeetingInitialExtraData,\n  MeetingScheduleResource,\n  Preferences,\n  RcmInvitationInfo,\n  RcMMeetingModel,\n  RequirePwdTypeForPMI,\n  SavedDefaultMeetingSetting,\n  ScheduleMeetingLockedSettings,\n  ScheduleMeetingResponse,\n  UpdatingStatus,\n  UserScheduleMeetingSettingResponse,\n  UserTelephonySettingResponse,\n  UserSettings,\n} from './Meeting.interface';\nimport { MeetingErrors } from './meetingErrors';\nimport { meetingStatus } from './meetingStatus';\nimport { trackEvents } from '../Analytics';\n\n@Module({\n  name: 'Meeting',\n  deps: [\n    'Brand',\n    'Alert',\n    'Client',\n    'ExtensionInfo',\n    'Storage',\n    'VideoConfiguration',\n    'Locale',\n    { dep: 'AvailabilityMonitor', optional: true },\n    { dep: 'MeetingOptions', optional: true },\n  ],\n})\nexport class Meeting extends RcModuleV2<Deps> implements IMeeting {\n  protected _fetchDelegatorsTimeout: NodeJS.Timeout = null;\n  private _fetchPersonMeetingTimeout: NodeJS.Timeout = null;\n  private _createMeetingPromise: Promise<ScheduleMeetingResponse>;\n\n  constructor(deps: Deps) {\n    super({ deps, enableCache: true, storageKey: 'Meeting' });\n  }\n\n  @state\n  meeting: RcMMeetingModel = null;\n\n  @state\n  isScheduling: boolean = false;\n\n  @state\n  // including meetingId whose are in updating status\n  updatingStatus: UpdatingStatus = [];\n\n  @storage\n  @state\n  personalMeeting: RcMMeetingModel = null;\n\n  @storage\n  @state\n  savedDefaultMeetingSetting: SavedDefaultMeetingSetting = {};\n\n  @storage\n  @state\n  lastMeetingSetting: LastMeetingSetting = {};\n\n  @state\n  delegators: MeetingDelegator[] = [];\n\n  @state\n  userSettings: Partial<UserSettings> = {};\n\n  @state\n  lockedSettings: Partial<LockedSettings> = {};\n\n  @state\n  preferences: Partial<Preferences> = {};\n\n  @state\n  isPreferencesChanged: boolean = false;\n\n  get extensionName(): string {\n    return this._deps.extensionInfo.info?.name;\n  }\n\n  @computed(({ extensionName, currentLocale }: Meeting) => [\n    extensionName,\n    currentLocale,\n  ])\n  get defaultTopic(): string {\n    return getDefaultTopic(this.extensionName, this.currentLocale);\n  }\n\n  @computed((that: Meeting) => [that.userSettings?.scheduleMeeting])\n  get scheduleUserSettings(): Partial<UserScheduleMeetingSettingResponse> {\n    return this.userSettings?.scheduleMeeting || {};\n  }\n\n  @computed((that: Meeting) => [that.userSettings?.telephony])\n  get telephonyUserSettings(): Partial<UserTelephonySettingResponse> {\n    return this.userSettings?.telephony || {};\n  }\n\n  @computed((that: Meeting) => [\n    that.enablePersonalMeeting,\n    that.enableServiceWebSettings,\n    that.scheduleUserSettings.usePmiForScheduledMeetings,\n  ])\n  get usePmiDefaultFromSW(): boolean {\n    return (\n      this.enablePersonalMeeting &&\n      this.enableServiceWebSettings &&\n      this.scheduleUserSettings.usePmiForScheduledMeetings\n    );\n  }\n\n  @computed((that: Meeting) => [that.extensionInfo.info.id])\n  get loginUser(): MeetingDelegator {\n    return {\n      id: `${this.extensionInfo.info.id}`,\n      name: ASSISTED_USERS_MYSELF,\n      isLoginUser: true,\n    };\n  }\n\n  @computed((that: Meeting) => [that.lockedSettings?.scheduleMeeting])\n  get scheduleLockedSettings(): Partial<ScheduleMeetingLockedSettings> {\n    return this.lockedSettings?.scheduleMeeting || {};\n  }\n\n  @computed((that: Meeting) => [\n    that.enableServiceWebSettings,\n    that.scheduleLockedSettings,\n  ])\n  get defaultLockedSettings(): DefaultScheduleLockedSettings {\n    if (!this.enableServiceWebSettings || !this.scheduleLockedSettings) {\n      return {};\n    }\n    return pick(COMMON_SETTINGS, this.scheduleLockedSettings);\n  }\n\n  @computed((that: Meeting) => [\n    that.enableServiceWebSettings,\n    that.scheduleUserSettings,\n  ])\n  get commonUserSettings(): EffectiveScheduleUserSettings {\n    if (!this.enableServiceWebSettings) {\n      return {};\n    }\n    return pick(COMMON_SETTINGS, this.scheduleUserSettings);\n  }\n\n  @computed((that: Meeting) => [\n    that.enablePersonalMeeting,\n    that.personalMeeting,\n  ])\n  get commonPersonalMeetingSettings(): CommonPersonalMeetingSettings {\n    if (!this.enablePersonalMeeting) {\n      return {};\n    }\n    return pick([...COMMON_SETTINGS, 'password'], this.personalMeeting);\n  }\n\n  @computed((that: Meeting) => [that._deps.locale.currentLocale])\n  get currentLocale() {\n    return this._deps.locale.currentLocale || DEFAULT_LOCALE;\n  }\n\n  get pmiDefaultSettings(): RcMMeetingModel {\n    if (!this.enableServiceWebSettings) {\n      return this.personalMeeting;\n    }\n\n    return this.enforcePassword(\n      {\n        ...this.initialMeetingSetting,\n        settingLock: this.defaultLockedSettings,\n      },\n      {\n        userSettings: this.commonUserSettings,\n        personalMeetingSettings: this.commonPersonalMeetingSettings,\n      },\n      true,\n    );\n  }\n\n  getGeneralDefaultSettings(): RcMMeetingModel {\n    if (!this.enableServiceWebSettings) {\n      const savedSetting = this.showSaveAsDefault\n        ? this.savedDefaultMeetingSetting\n        : this.lastMeetingSetting;\n      return {\n        ...this.initialMeetingSetting,\n        ...savedSetting,\n        meetingType: MeetingType.SCHEDULED,\n      };\n    }\n\n    return this.enforcePassword(\n      {\n        ...this.initialMeetingSetting,\n        settingLock: this.defaultLockedSettings,\n      },\n      {\n        userSettings: this.commonUserSettings,\n        personalMeetingSettings: this.commonPersonalMeetingSettings,\n      },\n      false,\n    );\n  }\n\n  get defaultMeetingSetting(): RcMMeetingModel {\n    const initialSetting = this.initialMeetingSetting;\n    const usePmi = this.usePmiDefaultFromSW;\n    const userSettings = this.userSettings;\n    const savedSetting = this.showSaveAsDefault\n      ? this.savedDefaultMeetingSetting\n      : this.lastMeetingSetting;\n\n    if (this.enableServiceWebSettings) {\n      if (!isEmpty(userSettings)) {\n        return usePmi\n          ? this.pmiDefaultSettings\n          : this.getGeneralDefaultSettings();\n      }\n      return initialSetting;\n    }\n\n    const meeting = {\n      ...initialSetting,\n      ...savedSetting,\n      meetingType: MeetingType.SCHEDULED,\n    };\n    return meeting;\n  }\n\n  getInitialMeetingSetting() {\n    const meetingName = getExtensionName({\n      extensionInfo: this.extensionInfo,\n      enableScheduleOnBehalf: this.enableScheduleOnBehalf,\n      meeting: this.meeting,\n      delegators: this.delegators,\n    });\n    const startTime = getInitializedStartTime();\n    const hostId = getHostId({\n      enableScheduleOnBehalf: this.enableScheduleOnBehalf,\n      meeting: this.meeting,\n      extensionInfo: this.extensionInfo,\n    });\n    const setting = getDefaultMeetingSettings(\n      meetingName,\n      this.currentLocale,\n      startTime,\n      hostId,\n    );\n    if (!this.enableServiceWebSettings) {\n      return setting;\n    }\n    return {\n      ...setting,\n      ...DEFAULT_LOCK_SETTINGS,\n      _pmiPassword: '',\n    };\n  }\n\n  get initialMeetingSetting(): RcMMeetingModel {\n    return this.getInitialMeetingSetting();\n  }\n\n  get extensionInfo() {\n    return this._deps.extensionInfo;\n  }\n\n  get showSaveAsDefault() {\n    return this._deps.meetingOptions?.showSaveAsDefault ?? false;\n  }\n\n  get enableInvitationApi() {\n    return this._deps.meetingOptions?.enableInvitationApi ?? false;\n  }\n\n  get enablePersonalMeeting() {\n    return this._deps.meetingOptions?.enablePersonalMeeting ?? false;\n  }\n\n  get enableReloadAfterSchedule() {\n    return this._deps.meetingOptions?.enableReloadAfterSchedule ?? true;\n  }\n\n  get enableServiceWebSettings() {\n    return this._deps.meetingOptions?.enableServiceWebSettings ?? false;\n  }\n\n  get enableScheduleOnBehalf() {\n    return this._deps.meetingOptions?.enableScheduleOnBehalf ?? false;\n  }\n\n  get enableCustomTimezone() {\n    return this._deps.meetingOptions?.enableCustomTimezone ?? false;\n  }\n\n  @action\n  protected _updateDelegators(delegators: MeetingDelegator[]) {\n    this.delegators = delegators;\n  }\n\n  @action\n  protected _updateUserSettings(userSettings: UserSettings) {\n    this.userSettings = userSettings;\n  }\n\n  @action\n  protected _updateLockedSettings(lockedSettings: LockedSettings) {\n    this.lockedSettings = lockedSettings;\n  }\n\n  @action\n  protected _updatePersonalMeeting(personalMeeting: RcMMeetingModel) {\n    this.personalMeeting = personalMeeting;\n  }\n\n  @action\n  protected _updatePreferences(preferences: Preferences) {\n    this.preferences = preferences;\n  }\n\n  @action\n  protected _updateIsPreferencesChanged(isPreferencesChanged: boolean) {\n    this.isPreferencesChanged = isPreferencesChanged;\n  }\n\n  @action\n  protected _updateMeetingState(meeting: RcMMeetingModel) {\n    this.meeting = meeting;\n  }\n\n  @action\n  protected _updateUpdatingStatus(updatingStatus: UpdatingStatus) {\n    this.updatingStatus = updatingStatus;\n  }\n\n  @action\n  protected _updateLastMeetingSetting(lastMeetingSetting: LastMeetingSetting) {\n    this.lastMeetingSetting = lastMeetingSetting;\n  }\n\n  @action\n  protected _updateSavedDefaultMeetingSetting(\n    savedDefaultMeetingSetting: SavedDefaultMeetingSetting,\n  ) {\n    this.savedDefaultMeetingSetting = savedDefaultMeetingSetting;\n  }\n\n  @track((that: Meeting, isScheduling: boolean) => {\n    if (!isScheduling) return;\n    return (analytics: Analytics) => {\n      const target = analytics.getTrackTarget();\n      if (target) {\n        return [\n          trackEvents.clickMeetingSchedulePage,\n          { router: target.router, 'Meeting Type': 'RCM' },\n        ];\n      }\n    };\n  })\n  @action\n  protected _updateIsScheduling(isScheduling: boolean) {\n    this.isScheduling = isScheduling;\n  }\n\n  protected async onInit() {\n    await this._init();\n  }\n\n  _shouldInit() {\n    return super._shouldInit() && this._deps.videoConfiguration.isRCM;\n  }\n\n  _shouldReset() {\n    return (\n      super._shouldReset() ||\n      (this.ready && !this._deps.videoConfiguration.isRCM)\n    );\n  }\n\n  protected async _initScheduleFor() {\n    if (!this.enableScheduleOnBehalf) {\n      return;\n    }\n    if (this._fetchDelegatorsTimeout) {\n      clearTimeout(this._fetchDelegatorsTimeout);\n    }\n    try {\n      const { records } = await this.getDelegators();\n      if (!records || records.length === 0) {\n        this.updateDelegators([]);\n        return;\n      }\n      this.updateDelegators([this.loginUser, ...records]);\n    } catch (e) {\n      console.error('fetch delegators error:', e);\n      console.warn('retry after 10s');\n      this._fetchDelegatorsTimeout = setTimeout(() => {\n        this._initScheduleFor();\n      }, 10000);\n    }\n  }\n\n  protected async _initMeetingSettings(extensionId?: string) {\n    await Promise.all([\n      this._initPersonalMeeting(extensionId),\n      this._updateServiceWebSettings(extensionId),\n    ]);\n\n    await this._initMeeting(extensionId);\n  }\n\n  /**\n   * Init basic meeting information\n   * also load meeting setting from previous one.\n   */\n  @background\n  async init() {\n    await this.onInit();\n  }\n\n  @proxify\n  async reload() {\n    await this.onInit();\n  }\n\n  @proxify\n  async _init() {\n    await Promise.all([this._initMeetingSettings(), this._initScheduleFor()]);\n  }\n\n  @proxify\n  protected async _initMeeting(extensionId?: string) {\n    this.update({\n      ...this.defaultMeetingSetting,\n      host: {\n        id: extensionId || this.loginUser.id,\n      },\n    });\n\n    this.updatePreferences(prunePreferencesObject(this.meeting));\n  }\n\n  @proxify\n  async updatePreferences(preferences: Preferences) {\n    this._updatePreferences(preferences);\n  }\n\n  @proxify\n  async updateIsPreferencesChanged(isPreferencesChanged: boolean) {\n    this._updateIsPreferencesChanged(isPreferencesChanged);\n  }\n\n  @proxify\n  async update(_meeting: RcMMeetingModel) {\n    let meeting = _meeting;\n    if (this.enableServiceWebSettings) {\n      meeting = this.combineWithSettings(_meeting);\n    }\n    const finalMeeting = {\n      ...meeting,\n      isMeetingPasswordValid: this.validatePasswordSettings(\n        _meeting.password,\n        _meeting._requireMeetingPassword,\n      ),\n    };\n    this.updateMeetingState(finalMeeting);\n    this._comparePreferences(finalMeeting);\n  }\n\n  private _comparePreferences(meeting: RcMMeetingModel) {\n    this.updateIsPreferencesChanged(\n      comparePreferences(this.preferences, meeting),\n    );\n  }\n\n  validatePasswordSettings(password: string, isSecret: boolean): boolean {\n    if (!isSecret) {\n      return true;\n    }\n    if (password && RCM_PASSWORD_REGEX.test(password)) {\n      return true;\n    }\n    return false;\n  }\n\n  combineWithSettings(_meeting: RcMMeetingModel) {\n    return this._combineWithSWSettings(_meeting);\n  }\n\n  _combineWithSWSettings(meeting: RcMMeetingModel): RcMMeetingModel {\n    if (!meeting.usePersonalMeetingId) {\n      return meeting;\n    }\n\n    const processedMeeting = { ...meeting };\n    const { allowJoinBeforeHost } = processedMeeting;\n    const { requirePasswordForPmiMeetings } = this.scheduleUserSettings;\n    const {\n      requirePasswordForPmiMeetings: lockedRequirePasswordForPmiMeetings,\n    } = this.scheduleLockedSettings;\n\n    if (\n      lockedRequirePasswordForPmiMeetings &&\n      requirePasswordForPmiMeetings === PMIRequirePassword.JBH_ONLY\n    ) {\n      if (allowJoinBeforeHost && !processedMeeting._requireMeetingPassword) {\n        processedMeeting._requireMeetingPassword = true;\n        processedMeeting.password =\n          processedMeeting._pmiPassword || generateRandomPassword();\n      }\n      processedMeeting._lockRequireMeetingPassword = allowJoinBeforeHost;\n    }\n    return processedMeeting;\n  }\n\n  @proxify\n  async _initPersonalMeeting(extensionId?: string) {\n    if (!this.enablePersonalMeeting) {\n      return;\n    }\n    if (this._fetchPersonMeetingTimeout) {\n      clearTimeout(this._fetchPersonMeetingTimeout);\n    }\n    try {\n      const meetingInfoResponse = await this.fetchPersonalMeeting(extensionId);\n      const meeting = this.formatPersonalMeeting(meetingInfoResponse);\n      this.updatePersonalMeeting(meeting);\n    } catch (e) {\n      console.error('fetch personal meeting error:', e);\n      this.resetPersonalMeeting();\n      console.warn('retry after 10s');\n      this._fetchPersonMeetingTimeout = setTimeout(() => {\n        this._initPersonalMeeting(extensionId);\n      }, 10000);\n    }\n  }\n\n  @proxify\n  async _updateServiceWebSettings(extensionId?: string) {\n    if (!this.enableServiceWebSettings) {\n      return;\n    }\n    try {\n      const [userSettings, lockedSettings] = await Promise.all([\n        this.getUserSettings(extensionId),\n        this.getLockedSettings(),\n      ]);\n      this.updateUserSettings(userSettings);\n      this.updateLockedSettings(lockedSettings);\n    } catch (e) {\n      console.error('error:', e);\n    }\n  }\n\n  @proxify\n  async switchUsePersonalMeetingId(usePersonalMeetingId: boolean) {\n    this.update(\n      usePersonalMeetingId\n        ? this.pmiDefaultSettings\n        : this.getGeneralDefaultSettings(),\n    );\n  }\n\n  @proxify\n  async saveAsDefaultSetting(meeting: RcMMeetingModel) {\n    const formattedMeeting = this._format(meeting);\n    this.updateSavedDefaultMeetingSetting({\n      ...formattedMeeting,\n      _saved: meeting.notShowAgain,\n      _requireMeetingPassword: meeting._requireMeetingPassword,\n    });\n  }\n\n  @proxify\n  async scheduleDirectly(\n    meeting: RcMMeetingModel,\n    { isAlertSuccess = true }: { isAlertSuccess?: boolean } = {},\n  ): Promise<ScheduleMeetingResponse> {\n    try {\n      meeting = meeting || this.meeting;\n      this.updateIsScheduling(true);\n      // Validate meeting\n      this._validate(meeting);\n      const formattedMeeting = this._format(meeting);\n\n      if (this.showSaveAsDefault && meeting.saveAsDefault) {\n        this.saveAsDefaultSetting(meeting);\n      }\n\n      const [resp, serviceInfo] = await Promise.all([\n        this.postMeeting(formattedMeeting),\n        this.getMeetingServiceInfo(meeting.host?.id),\n      ]);\n\n      const invitationInfo = await this.getMeetingInvitation(\n        resp.id,\n        this.currentLocale,\n      );\n      this.updateLastMeetingSetting({\n        ...formattedMeeting,\n        _saved: meeting._saved,\n      });\n\n      const result = await this._createDialingNumberTpl(\n        serviceInfo,\n        resp,\n        invitationInfo,\n      );\n\n      // Reload meeting info\n      if (this.enableReloadAfterSchedule) {\n        this._initMeeting();\n      }\n\n      // Update personal meeting setting\n      if (this.enablePersonalMeeting && resp.usePersonalMeetingId) {\n        this.updatePersonalMeeting(\n          this.formatPersonalMeeting(\n            resp,\n            serviceInfo.externalUserInfo.personalMeetingId,\n          ),\n        );\n        if (this.enableServiceWebSettings) {\n          this.update({\n            ...this.meeting,\n            _pmiPassword: resp.password,\n          });\n        }\n      }\n\n      // Notify user the meeting has been scheduled\n      if (isAlertSuccess) {\n        setTimeout(() => {\n          this._deps.alert.success({\n            message: meetingStatus.scheduledSuccess,\n          });\n        }, 50);\n      }\n      return result;\n    } catch (errors) {\n      await this._errorHandle(errors);\n      return null;\n    } finally {\n      this.updateIsScheduling(false);\n    }\n  }\n\n  @proxify\n  async schedule(\n    meeting: RcMMeetingModel,\n    { isAlertSuccess = true }: { isAlertSuccess?: boolean } = {},\n  ): Promise<ScheduleMeetingResponse> {\n    if (this.isScheduling) return this._createMeetingPromise;\n\n    this._createMeetingPromise = this.scheduleDirectly(meeting, {\n      isAlertSuccess,\n    });\n\n    const result = await this._createMeetingPromise;\n    this._createMeetingPromise = null;\n    return result;\n  }\n\n  @proxify\n  async updateMeeting(\n    meetingId: string,\n    meeting: RcMMeetingModel,\n    { isAlertSuccess = false }: { isAlertSuccess?: boolean } = {},\n  ) {\n    if (this._isUpdating(meetingId)) {\n      return (this.updateMeeting as any)._promise;\n    }\n    meeting = meeting || this.meeting;\n    try {\n      this.addUpdatingStatus(meetingId);\n      // Validate meeting\n      this._validate(meeting);\n      const formattedMeeting = this._format(meeting);\n      if (this.showSaveAsDefault && meeting.saveAsDefault) {\n        this.saveAsDefaultSetting(meeting);\n      }\n\n      (this.updateMeeting as any)._promise = Promise.all([\n        this.putMeeting(meetingId, formattedMeeting),\n        this.getMeetingServiceInfo(meeting.host?.id),\n      ]);\n\n      const [resp, serviceInfo] = await (this.updateMeeting as any)._promise;\n\n      const invitationInfo = await this.getMeetingInvitation(\n        meetingId,\n        this.currentLocale,\n      );\n\n      const result = await this._createDialingNumberTpl(\n        serviceInfo,\n        resp,\n        invitationInfo,\n      );\n\n      // Reload meeting info\n      if (this.enableReloadAfterSchedule) {\n        this._initMeeting();\n      }\n\n      // Update personal meeting setting\n      if (this.enablePersonalMeeting && resp.usePersonalMeetingId) {\n        this.updatePersonalMeeting(\n          this.formatPersonalMeeting(\n            resp,\n            serviceInfo.externalUserInfo.personalMeetingId,\n          ),\n        );\n        if (this.enableServiceWebSettings) {\n          this.update({\n            ...this.meeting,\n            _pmiPassword: resp.password,\n          });\n        }\n      }\n\n      // Notify user the meeting has been updated\n      if (isAlertSuccess) {\n        setTimeout(() => {\n          this._deps.alert.success({\n            message: meetingStatus.updatedSuccess,\n          });\n        }, 50);\n      }\n      return result;\n    } catch (errors) {\n      await this._errorHandle(errors);\n      return null;\n    } finally {\n      delete (this.updateMeeting as any)._promise;\n      this.removeUpdatingStatus(meetingId);\n    }\n  }\n\n  @proxify\n  async updateScheduleFor(userExtensionId: string | number) {\n    if (!userExtensionId || !this.delegators || this.delegators.length === 0) {\n      return;\n    }\n    const hostId = `${userExtensionId}`;\n    const user = find((item) => item.id === hostId, this.delegators);\n\n    if (user) {\n      await this._initMeetingSettings(hostId);\n    }\n  }\n\n  @proxify\n  async updateDelegators(delegators: MeetingDelegator[]) {\n    this._updateDelegators(delegators);\n  }\n\n  @proxify\n  async updateUserSettings(userSettings: UserSettings) {\n    this._updateUserSettings(userSettings);\n  }\n\n  @proxify\n  async updateLockedSettings(lockedSettings: LockedSettings) {\n    this._updateLockedSettings(lockedSettings);\n  }\n\n  @proxify\n  async updatePersonalMeeting(meeting: RcMMeetingModel) {\n    this._updatePersonalMeeting(meeting);\n  }\n\n  @proxify\n  async resetPersonalMeeting() {\n    this._updatePersonalMeeting(null);\n  }\n\n  @proxify\n  async updateMeetingState(meeting: RcMMeetingModel) {\n    this._updateMeetingState(meeting);\n  }\n\n  @proxify\n  async addUpdatingStatus(meetingId: string) {\n    this._updateUpdatingStatus([...this.updatingStatus, { meetingId }]);\n  }\n\n  @proxify\n  async removeUpdatingStatus(meetingId: string) {\n    const finalStatus = filter(\n      (obj) => obj.meetingId !== meetingId,\n      this.updatingStatus,\n    );\n    this._updateUpdatingStatus(finalStatus);\n  }\n\n  @proxify\n  async updateLastMeetingSetting(meeting: RcMMeetingModel) {\n    const lastMeetingSetting = pick(LAST_MEETING_SETTINGS, meeting || {});\n    this._updateLastMeetingSetting(lastMeetingSetting);\n  }\n\n  @proxify\n  async updateSavedDefaultMeetingSetting(meeting: RcMMeetingModel) {\n    const savedDefaulteSetting = pick(\n      SAVED_DEFAULT_MEETING_SETTINGS,\n      meeting || {},\n    );\n    this._updateSavedDefaultMeetingSetting(savedDefaulteSetting);\n  }\n\n  @proxify\n  async updateIsScheduling(isScheduling: boolean) {\n    this._updateIsScheduling(isScheduling);\n  }\n\n  @proxify\n  private async fetchPersonalMeeting(extensionId?: string) {\n    const serviceInfo = await this.getMeetingServiceInfo(extensionId);\n    const personalMeetingId = serviceInfo.externalUserInfo.personalMeetingId;\n    const meetingInfoResponse = await this.getMeeting(personalMeetingId);\n    if (!meetingInfoResponse) {\n      throw new Error(\n        `failed to get personal meeting ${personalMeetingId} info`,\n      );\n    }\n    return meetingInfoResponse;\n  }\n\n  @proxify\n  async getMeetingServiceInfo(extensionId?: string) {\n    return this._deps.client\n      .account()\n      .extension(extensionId)\n      .meeting()\n      .serviceInfo()\n      .get();\n  }\n\n  @proxify\n  async postMeeting(formattedMeeting: RcMMeetingModel) {\n    return this._deps.client\n      .account()\n      .extension()\n      .meeting()\n      .post(formattedMeeting);\n  }\n\n  @proxify\n  async putMeeting(meetingId: string, formattedMeeting: RcMMeetingModel) {\n    return this._deps.client\n      .account()\n      .extension()\n      .meeting(meetingId)\n      .put(formattedMeeting);\n  }\n\n  @proxify\n  async getMeeting(meetingId: string, { isAlertError = true } = {}) {\n    try {\n      const settings = await this._deps.client\n        .account()\n        .extension()\n        .meeting(meetingId)\n        .get();\n      return {\n        ...settings,\n        // TODO: can we remove this?\n        _requireMeetingPassword: !!settings.password,\n      };\n    } catch (e) {\n      const { errorCode, message } = await e.response.clone().json();\n      console.log(\n        `failed to get meeting info: ${meetingId}, ${errorCode}, ${message}`,\n      );\n      const isMeetingDeleted =\n        errorCode === 'CMN-102' &&\n        message.indexOf('[meetingId] is not found') > -1;\n      if (isAlertError && isMeetingDeleted) {\n        setTimeout(() => {\n          this._deps.alert.danger({\n            message: meetingStatus.meetingIsDeleted,\n          });\n        }, 50);\n      }\n      throw e;\n    }\n  }\n\n  @proxify\n  async getDelegators(): Promise<MeetingDelegatorsResponse> {\n    const res = await this._deps.client.service\n      .platform()\n      .get(\n        '/restapi/v1.0/account/~/extension/~/meetings-configuration/assisted',\n      );\n    return res.json();\n  }\n\n  @proxify\n  async getUserSettings(extensionId = '~'): Promise<UserSettings> {\n    try {\n      const platform = this._deps.client.service.platform();\n      const apiResponse = await platform.send({\n        method: 'GET',\n        url: `/restapi/v1.0/account/~/extension/${extensionId}/meeting/user-settings`,\n      });\n      return apiResponse.json();\n    } catch (e) {\n      console.warn('failed to get user setting', e);\n      return null;\n    }\n  }\n\n  @proxify\n  async getLockedSettings() {\n    try {\n      const platform = this._deps.client.service.platform();\n      const apiResponse = await platform.send({\n        method: 'GET',\n        url: '/restapi/v1.0/account/~/meeting/locked-settings',\n      });\n      const { recording = {}, scheduleMeeting = {} } = await apiResponse.json();\n      const {\n        startParticipantsVideo,\n        startParticipantVideo,\n        ...restScheduleOptions\n      } = scheduleMeeting;\n      const processedScheduleMeeting = {\n        ...restScheduleOptions,\n        // TODO: update this when api is stable\n        startParticipantsVideo:\n          startParticipantsVideo || startParticipantVideo || false,\n      };\n      return {\n        recording,\n        scheduleMeeting: processedScheduleMeeting,\n      };\n    } catch (e) {\n      console.warn('failed to get lock settings', e);\n      return null;\n    }\n  }\n\n  @proxify\n  async getMeetingInvitation(\n    meetingId: string,\n    locale = DEFAULT_LOCALE,\n  ): Promise<RcmInvitationInfo> {\n    if (!this.enableInvitationApi) {\n      return null;\n    }\n    // only rc brand is supported for now\n    if (this._deps.brand.code !== 'rc') {\n      return null;\n    }\n    try {\n      const apiResponse = await this._deps.client.service\n        .platform()\n        .get(\n          `/restapi/v1.0/account/~/extension/~/meeting/${meetingId}/invitation`,\n          {\n            language: this._deps.locale.normalizeLocale(locale),\n          },\n        );\n      const { invitation } = await apiResponse.json();\n      return {\n        invitation,\n      };\n    } catch (ex) {\n      console.warn('failed to get invitation', ex);\n      return null;\n    }\n  }\n\n  protected formatPersonalMeeting(\n    meetingInfo: MeetingInfoResponse,\n    shortId?: string, // TODO: do we need this param `shortId`?\n  ): RcMMeetingModel {\n    const settings = {\n      ...this.initialMeetingSetting,\n      ...meetingInfo,\n      shortId: shortId || meetingInfo.id,\n      usePersonalMeetingId: true,\n    };\n    return {\n      ...settings,\n      _requireMeetingPassword: !!settings.password,\n    };\n  }\n\n  /**\n   * Validate meeting information format.\n   * @param {Object} meeting\n   * @throws\n   */\n  _validate(meeting: RcMMeetingModel) {\n    if (!meeting) {\n      throw new MeetingErrors(meetingStatus.invalidMeetingInfo);\n    }\n    const { topic, password, schedule, _requireMeetingPassword } = meeting;\n    const errors = new MeetingErrors();\n    if (topic.length <= 0) {\n      errors.push(meetingStatus.emptyTopic);\n    }\n    if (_requireMeetingPassword && (!password || password.length <= 0)) {\n      errors.push(meetingStatus.noPassword);\n    }\n    if (schedule) {\n      if (schedule.durationInMinutes < 0) {\n        errors.push(meetingStatus.durationIncorrect);\n      }\n    }\n    if (errors.length > 0) {\n      throw errors;\n    }\n  }\n\n  /**\n   * Format meeting information.\n   * @param {Object} meeting\n   */\n  _format(meeting: RcMMeetingModel): RcMMeetingModel {\n    const {\n      topic,\n      meetingType,\n      allowJoinBeforeHost,\n      startHostVideo,\n      startParticipantsVideo,\n      audioOptions,\n      password,\n      schedule,\n      recurrence,\n      usePersonalMeetingId,\n      _requireMeetingPassword,\n      host,\n    } = meeting;\n    const formatted = {\n      host,\n      topic,\n      meetingType,\n      allowJoinBeforeHost,\n      startHostVideo,\n      startParticipantsVideo,\n      audioOptions,\n      password: _requireMeetingPassword ? password : '',\n      recurrence,\n      usePersonalMeetingId,\n    } as RcMMeetingModel;\n    // Recurring meetings do not have schedule info\n    if (meetingType !== MeetingType.RECURRING) {\n      const _schedule: MeetingScheduleResource = {\n        durationInMinutes: schedule.durationInMinutes,\n        timeZone: {\n          id: this.enableCustomTimezone\n            ? schedule.timeZone.id\n            : UTC_TIMEZONE_ID,\n        },\n      };\n      if (schedule.startTime) {\n        // Format selected startTime to utc standard time\n        // Timezone information is not included here\n        _schedule.startTime = this.enableCustomTimezone\n          ? schedule.startTime\n          : moment.utc(schedule.startTime).format();\n      }\n      formatted.schedule = _schedule;\n\n      if (recurrence && recurrence.until) {\n        formatted.recurrence.until = moment.utc(recurrence.until).format();\n      }\n    }\n\n    // For PMI\n    formatted.meetingType =\n      formatted.meetingType === MeetingType.PMI\n        ? MeetingType.SCHEDULED\n        : formatted.meetingType;\n    return formatted;\n  }\n\n  async _createDialingNumberTpl(\n    serviceInfo: MeetingServiceInfoResource,\n    resp: any,\n    invitationInfo: RcmInvitationInfo,\n  ) {\n    const result = {\n      meeting: resp,\n      serviceInfo: {\n        ...serviceInfo,\n        mobileDialingNumberTpl: getMobileDialingNumberTpl(\n          serviceInfo.dialInNumbers,\n          resp.id,\n        ),\n        phoneDialingNumberTpl: getPhoneDialingNumberTpl(\n          serviceInfo.dialInNumbers,\n        ),\n      },\n      extensionInfo: this.extensionInfo.info,\n      invitationInfo,\n    };\n    return result;\n  }\n\n  async _errorHandle(errors: any) {\n    if (errors instanceof MeetingErrors) {\n      for (const error of errors.all) {\n        this._deps.alert.warning(error);\n      }\n    } else if (errors && errors.response) {\n      const {\n        message,\n        errorCode,\n        permissionName,\n      } = await errors.response.clone().json();\n      if (errorCode === 'InsufficientPermissions' && permissionName) {\n        this._deps.alert.danger({\n          message: meetingStatus.insufficientPermissions,\n          payload: {\n            permissionName,\n          },\n        });\n      } else if (\n        errorCode === 'CMN-102' &&\n        message.indexOf('[meetingId] is not found') > -1\n      ) {\n        this._deps.alert.danger({\n          message: meetingStatus.meetingIsDeleted,\n        });\n      } else if (\n        !this._deps.availabilityMonitor ||\n        !(await this._deps.availabilityMonitor.checkIfHAError(errors))\n      ) {\n        this._deps.alert.danger({ message: meetingStatus.internalError });\n      }\n    } else {\n      console.log('errors:', errors);\n      this._deps.alert.danger({ message: meetingStatus.internalError });\n    }\n  }\n\n  enforcePmiPassword(\n    processedMeeting: RcMMeetingModel,\n    requirePwdForPMI: RequirePwdTypeForPMI,\n    requirePwdIsLockedForPMI: boolean,\n  ) {\n    const { allowJoinBeforeHost, password = '' } = processedMeeting;\n    if (password !== '') {\n      // save this for design\n      processedMeeting._pmiPassword = password;\n    }\n\n    let pmiRequiresPwd;\n    switch (requirePwdForPMI) {\n      case PMIRequirePassword.NONE:\n        pmiRequiresPwd = password !== '';\n        break;\n      case PMIRequirePassword.ALL:\n        pmiRequiresPwd = true;\n        break;\n      case PMIRequirePassword.JBH_ONLY:\n        pmiRequiresPwd = allowJoinBeforeHost || password !== '';\n        break;\n      default:\n        pmiRequiresPwd = processedMeeting._requireMeetingPassword;\n    }\n\n    const pmiRequiresPwdLocked =\n      requirePwdForPMI === PMIRequirePassword.JBH_ONLY\n        ? requirePwdIsLockedForPMI && allowJoinBeforeHost\n        : requirePwdIsLockedForPMI;\n\n    processedMeeting._requireMeetingPassword = pmiRequiresPwd;\n    processedMeeting._lockRequireMeetingPassword = pmiRequiresPwdLocked;\n  }\n\n  enforcePassword(\n    meeting: RcMMeetingModel,\n    { userSettings, personalMeetingSettings }: MeetingInitialExtraData,\n    usePmi: boolean,\n  ): RcMMeetingModel {\n    if (!this.enableServiceWebSettings) {\n      return meeting;\n    }\n    const {\n      requirePasswordForSchedulingNewMeetings: requirePwdForNonPMI = false,\n      requirePasswordForPmiMeetings: requirePwdForPMI,\n    } = this.scheduleUserSettings;\n    const {\n      requirePasswordForSchedulingNewMeetings: requirePwdIsLockedForNonPMI,\n      requirePasswordForPmiMeetings: requirePwdIsLockedForPMI,\n    } = this.scheduleLockedSettings;\n\n    const processedMeeting = {\n      ...meeting,\n      ...(usePmi ? personalMeetingSettings : userSettings),\n      usePersonalMeetingId: usePmi,\n      telephonyUserSettings: this.telephonyUserSettings,\n    } as RcMMeetingModel;\n\n    // For PMI meetings\n    if (usePmi) {\n      this.enforcePmiPassword(\n        processedMeeting,\n        requirePwdForPMI,\n        requirePwdIsLockedForPMI,\n      );\n    } else {\n      // For non-PMI meetings\n      if (requirePwdForNonPMI) {\n        processedMeeting._requireMeetingPassword = true;\n      }\n      if (requirePwdIsLockedForNonPMI) {\n        processedMeeting._lockRequireMeetingPassword = true;\n      }\n    }\n    return {\n      ...processedMeeting,\n      password:\n        processedMeeting._requireMeetingPassword && !processedMeeting.password\n          ? generateRandomPassword()\n          : processedMeeting.password,\n    } as RcMMeetingModel;\n  }\n\n  // use to check meeting is in updating status or not\n  _isUpdating(meetingId: string) {\n    return (\n      this.updatingStatus &&\n      find((obj: any) => obj.meetingId === meetingId, this.updatingStatus)\n    );\n  }\n}\n"],"file":"Meeting.js"}