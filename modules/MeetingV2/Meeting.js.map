{"version":3,"sources":["modules/MeetingV2/Meeting.ts"],"names":["Meeting","name","deps","dep","optional","extensionName","currentLocale","that","userSettings","scheduleMeeting","telephony","enablePersonalMeeting","enableServiceWebSettings","scheduleUserSettings","usePmiForScheduledMeetings","extensionInfo","info","id","lockedSettings","scheduleLockedSettings","personalMeeting","_deps","locale","isScheduling","analytics","target","getTrackTarget","trackEvents","clickMeetingSchedulePage","router","brand","brandConfig","meetingUriReg","rcm","rcvBaseWebUri","rcv","enableCache","storageKey","_fetchDelegatorsTimeout","_fetchPersonMeetingTimeout","_createMeetingPromise","savedSetting","showSaveAsDefault","savedDefaultMeetingSetting","lastMeetingSetting","initialMeetingSetting","meetingType","MeetingType","SCHEDULED","enforcePassword","settingLock","defaultLockedSettings","commonUserSettings","personalMeetingSettings","commonPersonalMeetingSettings","meetingName","enableScheduleOnBehalf","meeting","delegators","startTime","hostId","setting","DEFAULT_LOCK_SETTINGS","_pmiPassword","preferences","isPreferencesChanged","updatingStatus","_init","videoConfiguration","isRCM","ready","count","clearTimeout","getDelegators","records","length","updateDelegators","loginUser","console","error","warn","setTimeout","initScheduleFor","extensionId","Promise","all","_initPersonalMeeting","_updateServiceWebSettings","_initMeeting","_initMeetingSettings","update","defaultMeetingSetting","host","updatePreferences","_updatePreferences","_updateIsPreferencesChanged","_meeting","combineWithSettings","finalMeeting","isMeetingPasswordValid","validatePasswordSettings","password","_requireMeetingPassword","updateMeetingState","_comparePreferences","updateIsPreferencesChanged","isSecret","RCM_PASSWORD_REGEX","test","_combineWithSWSettings","usePersonalMeetingId","processedMeeting","allowJoinBeforeHost","requirePasswordForPmiMeetings","lockedRequirePasswordForPmiMeetings","PMIRequirePassword","JBH_ONLY","_lockRequireMeetingPassword","fetchPersonalMeeting","meetingInfoResponse","formatPersonalMeeting","updatePersonalMeeting","resetPersonalMeeting","getUserSettings","getLockedSettings","updateUserSettings","updateLockedSettings","pmiDefaultSettings","getGeneralDefaultSettings","formattedMeeting","_format","updateSavedDefaultMeetingSetting","_saved","notShowAgain","isAlertSuccess","updateIsScheduling","_validate","saveAsDefault","saveAsDefaultSetting","postMeeting","getMeetingServiceInfo","resp","serviceInfo","getMeetingInvitation","invitationInfo","updateLastMeetingSetting","_createDialingNumberTpl","result","enableReloadAfterSchedule","externalUserInfo","personalMeetingId","alert","success","message","meetingStatus","scheduledSuccess","_errorHandle","scheduleDirectly","meetingId","_isUpdating","updateMeeting","_promise","addUpdatingStatus","putMeeting","updatedSuccess","removeUpdatingStatus","client","account","extension","userExtensionId","user","item","_updateDelegators","_updateUserSettings","_updateLockedSettings","_updatePersonalMeeting","_updateMeetingState","_updateUpdatingStatus","finalStatus","obj","LAST_MEETING_SETTINGS","_updateLastMeetingSetting","savedDefaulteSetting","SAVED_DEFAULT_MEETING_SETTINGS","_updateSavedDefaultMeetingSetting","_updateIsScheduling","getMeeting","Error","get","post","put","isAlertError","settings","response","clone","json","errorCode","log","isMeetingDeleted","indexOf","danger","meetingIsDeleted","service","platform","res","send","method","url","apiResponse","recording","startParticipantsVideo","startParticipantVideo","restScheduleOptions","processedScheduleMeeting","DEFAULT_LOCALE","enableInvitationApi","allowMeetingInvitation","language","normalizeLocale","invitation","meetingInfo","shortId","MeetingErrors","invalidMeetingInfo","topic","schedule","errors","push","emptyTopic","noPassword","durationInMinutes","durationIncorrect","startHostVideo","audioOptions","recurrence","formatted","RECURRING","_schedule","timeZone","enableCustomTimezone","UTC_TIMEZONE_ID","moment","utc","format","until","PMI","mobileDialingNumberTpl","dialInNumbers","phoneDialingNumberTpl","warning","permissionName","insufficientPermissions","payload","availabilityMonitor","checkIfHAError","internalError","requirePwdForPMI","requirePwdIsLockedForPMI","pmiRequiresPwd","NONE","ALL","pmiRequiresPwdLocked","usePmi","requirePasswordForSchedulingNewMeetings","requirePwdForNonPMI","requirePwdIsLockedForNonPMI","telephonyUserSettings","enforcePmiPassword","discovery","externalData","data","baseWebUri","enableDiscoveryApi","fetchDiscoveryConfig","rcvUriRegExp","rcmUriRegExp","ASSISTED_USERS_MYSELF","isLoginUser","COMMON_SETTINGS","initialSetting","usePmiDefaultFromSW","getInitialMeetingSetting","meetingOptions","enableRcmScheduleOnBehalf","regExpText","replace","RcModuleV2","state","storage","action","background","proxify"],"mappings":"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","sourcesContent":["import moment from 'moment';\nimport { filter, find, isEmpty, pick } from 'ramda';\n\nimport { MeetingServiceInfoResource } from '@rc-ex/core/definitions';\nimport {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n  storage,\n  track,\n} from '@ringcentral-integration/core';\nimport { DEFAULT_LOCALE } from '@ringcentral-integration/i18n';\n\nimport {\n  comparePreferences,\n  generateRandomPassword,\n  getDefaultMeetingSettings,\n  getDefaultTopic,\n  getInitializedStartTime,\n  getMobileDialingNumberTpl,\n  getPhoneDialingNumberTpl,\n  MeetingType,\n  prunePreferencesObject,\n  UTC_TIMEZONE_ID,\n} from '../../helpers/meetingHelper';\nimport { IMeeting } from '../../interfaces/Meeting.interface';\nimport background from '../../lib/background';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport { trackEvents } from '../Analytics';\nimport { Analytics } from '../AnalyticsV2';\nimport {\n  ASSISTED_USERS_MYSELF,\n  COMMON_SETTINGS,\n  DEFAULT_LOCK_SETTINGS,\n  LAST_MEETING_SETTINGS,\n  PMIRequirePassword,\n  RCM_PASSWORD_REGEX,\n  SAVED_DEFAULT_MEETING_SETTINGS,\n} from './constants';\nimport {\n  getExtensionName,\n  getHostId,\n  getRcmUriRegExp,\n  getRcvUriRegExp,\n} from './helper';\nimport {\n  CommonPersonalMeetingSettings,\n  DefaultScheduleLockedSettings,\n  Deps,\n  EffectiveScheduleUserSettings,\n  LastMeetingSetting,\n  LockedSettings,\n  MeetingDelegator,\n  MeetingDelegatorsResponse,\n  MeetingInfoResponse,\n  MeetingInitialExtraData,\n  MeetingScheduleResource,\n  Preferences,\n  RcmInvitationInfo,\n  RcMMeetingModel,\n  RequirePwdTypeForPMI,\n  SavedDefaultMeetingSetting,\n  ScheduleMeetingLockedSettings,\n  ScheduleMeetingResponse,\n  UpdatingStatus,\n  UserScheduleMeetingSettingResponse,\n  UserSettings,\n  UserTelephonySettingResponse,\n} from './Meeting.interface';\nimport { MeetingErrors } from './meetingErrors';\nimport { meetingStatus } from './meetingStatus';\n\n@Module({\n  name: 'Meeting',\n  deps: [\n    'Brand',\n    'Alert',\n    'Client',\n    'ExtensionInfo',\n    'Storage',\n    'VideoConfiguration',\n    'Locale',\n    { dep: 'AvailabilityMonitor', optional: true },\n    { dep: 'MeetingOptions', optional: true },\n  ],\n})\nexport class Meeting extends RcModuleV2<Deps> implements IMeeting {\n  protected _fetchDelegatorsTimeout: NodeJS.Timeout = null;\n  private _fetchPersonMeetingTimeout: NodeJS.Timeout = null;\n  private _createMeetingPromise: Promise<ScheduleMeetingResponse>;\n\n  constructor(deps: Deps) {\n    super({ deps, enableCache: true, storageKey: 'Meeting' });\n  }\n\n  @state\n  meeting: RcMMeetingModel = null;\n\n  @state\n  isScheduling: boolean = false;\n\n  @state\n  // including meetingId whose are in updating status\n  updatingStatus: UpdatingStatus = [];\n\n  @storage\n  @state\n  personalMeeting: RcMMeetingModel = null;\n\n  @storage\n  @state\n  savedDefaultMeetingSetting: SavedDefaultMeetingSetting = {};\n\n  @storage\n  @state\n  lastMeetingSetting: LastMeetingSetting = {};\n\n  @state\n  delegators: MeetingDelegator[] = [];\n\n  @state\n  userSettings: Partial<UserSettings> = {};\n\n  @state\n  lockedSettings: Partial<LockedSettings> = {};\n\n  @state\n  preferences: Partial<Preferences> = {};\n\n  @state\n  isPreferencesChanged: boolean = false;\n\n  get extensionName(): string {\n    return this._deps.extensionInfo.info?.name;\n  }\n\n  @computed(({ extensionName, currentLocale }: Meeting) => [\n    extensionName,\n    currentLocale,\n  ])\n  get defaultTopic(): string {\n    return getDefaultTopic(this.extensionName, this.currentLocale);\n  }\n\n  @computed((that: Meeting) => [that.userSettings?.scheduleMeeting])\n  get scheduleUserSettings(): Partial<UserScheduleMeetingSettingResponse> {\n    return this.userSettings?.scheduleMeeting || {};\n  }\n\n  @computed((that: Meeting) => [that.userSettings?.telephony])\n  get telephonyUserSettings(): Partial<UserTelephonySettingResponse> {\n    return this.userSettings?.telephony || {};\n  }\n\n  @computed((that: Meeting) => [\n    that.enablePersonalMeeting,\n    that.enableServiceWebSettings,\n    that.scheduleUserSettings.usePmiForScheduledMeetings,\n  ])\n  get usePmiDefaultFromSW(): boolean {\n    return (\n      this.enablePersonalMeeting &&\n      this.enableServiceWebSettings &&\n      this.scheduleUserSettings.usePmiForScheduledMeetings\n    );\n  }\n\n  @computed((that: Meeting) => [that.extensionInfo.info.id])\n  get loginUser(): MeetingDelegator {\n    return {\n      id: `${this.extensionInfo.info.id}`,\n      name: ASSISTED_USERS_MYSELF,\n      isLoginUser: true,\n    };\n  }\n\n  @computed((that: Meeting) => [that.lockedSettings?.scheduleMeeting])\n  get scheduleLockedSettings(): Partial<ScheduleMeetingLockedSettings> {\n    return this.lockedSettings?.scheduleMeeting || {};\n  }\n\n  @computed((that: Meeting) => [\n    that.enableServiceWebSettings,\n    that.scheduleLockedSettings,\n  ])\n  get defaultLockedSettings(): DefaultScheduleLockedSettings {\n    if (!this.enableServiceWebSettings || !this.scheduleLockedSettings) {\n      return {};\n    }\n    return pick(COMMON_SETTINGS, this.scheduleLockedSettings);\n  }\n\n  @computed((that: Meeting) => [\n    that.enableServiceWebSettings,\n    that.scheduleUserSettings,\n  ])\n  get commonUserSettings(): EffectiveScheduleUserSettings {\n    if (!this.enableServiceWebSettings) {\n      return {};\n    }\n    return pick(COMMON_SETTINGS, this.scheduleUserSettings);\n  }\n\n  @computed((that: Meeting) => [\n    that.enablePersonalMeeting,\n    that.personalMeeting,\n  ])\n  get commonPersonalMeetingSettings(): CommonPersonalMeetingSettings {\n    if (!this.enablePersonalMeeting) {\n      return {};\n    }\n    return pick([...COMMON_SETTINGS, 'password'], this.personalMeeting || {});\n  }\n\n  @computed((that: Meeting) => [that._deps.locale.currentLocale])\n  get currentLocale() {\n    return this._deps.locale.currentLocale || DEFAULT_LOCALE;\n  }\n\n  get pmiDefaultSettings(): RcMMeetingModel {\n    if (!this.enableServiceWebSettings) {\n      return this.personalMeeting;\n    }\n\n    return this.enforcePassword(\n      {\n        ...this.initialMeetingSetting,\n        settingLock: this.defaultLockedSettings,\n      },\n      {\n        userSettings: this.commonUserSettings,\n        personalMeetingSettings: this.commonPersonalMeetingSettings,\n      },\n      true,\n    );\n  }\n\n  getGeneralDefaultSettings(): RcMMeetingModel {\n    if (!this.enableServiceWebSettings) {\n      const savedSetting = this.showSaveAsDefault\n        ? this.savedDefaultMeetingSetting\n        : this.lastMeetingSetting;\n      return {\n        ...this.initialMeetingSetting,\n        ...savedSetting,\n        meetingType: MeetingType.SCHEDULED,\n      };\n    }\n\n    return this.enforcePassword(\n      {\n        ...this.initialMeetingSetting,\n        settingLock: this.defaultLockedSettings,\n      },\n      {\n        userSettings: this.commonUserSettings,\n        personalMeetingSettings: this.commonPersonalMeetingSettings,\n      },\n      false,\n    );\n  }\n\n  get defaultMeetingSetting(): RcMMeetingModel {\n    const initialSetting = this.initialMeetingSetting;\n    const usePmi = this.usePmiDefaultFromSW;\n    const userSettings = this.userSettings;\n    const savedSetting = this.showSaveAsDefault\n      ? this.savedDefaultMeetingSetting\n      : this.lastMeetingSetting;\n\n    if (this.enableServiceWebSettings) {\n      if (!isEmpty(userSettings)) {\n        return usePmi\n          ? this.pmiDefaultSettings\n          : this.getGeneralDefaultSettings();\n      }\n      return initialSetting;\n    }\n\n    const meeting = {\n      ...initialSetting,\n      ...savedSetting,\n      meetingType: MeetingType.SCHEDULED,\n    };\n    return meeting;\n  }\n\n  getInitialMeetingSetting() {\n    const meetingName = getExtensionName({\n      extensionInfo: this.extensionInfo,\n      enableScheduleOnBehalf: this.enableScheduleOnBehalf,\n      meeting: this.meeting,\n      delegators: this.delegators,\n    });\n    const startTime = getInitializedStartTime();\n    const hostId = getHostId({\n      enableScheduleOnBehalf: this.enableScheduleOnBehalf,\n      meeting: this.meeting,\n      extensionInfo: this.extensionInfo,\n    });\n    const setting = getDefaultMeetingSettings(\n      meetingName,\n      this.currentLocale,\n      startTime,\n      hostId,\n    );\n    if (!this.enableServiceWebSettings) {\n      return setting;\n    }\n    return {\n      ...setting,\n      ...DEFAULT_LOCK_SETTINGS,\n      _pmiPassword: '',\n    };\n  }\n\n  get initialMeetingSetting(): RcMMeetingModel {\n    return this.getInitialMeetingSetting();\n  }\n\n  get extensionInfo() {\n    return this._deps.extensionInfo;\n  }\n\n  get showSaveAsDefault() {\n    return this._deps.meetingOptions?.showSaveAsDefault ?? false;\n  }\n\n  get enableInvitationApi() {\n    return this._deps.meetingOptions?.enableInvitationApi ?? false;\n  }\n\n  get enablePersonalMeeting() {\n    return this._deps.meetingOptions?.enablePersonalMeeting ?? false;\n  }\n\n  get enableReloadAfterSchedule() {\n    return this._deps.meetingOptions?.enableReloadAfterSchedule ?? true;\n  }\n\n  get enableServiceWebSettings() {\n    return this._deps.meetingOptions?.enableServiceWebSettings ?? false;\n  }\n\n  // will follow dynamic brand config\n  get enableScheduleOnBehalf() {\n    return (\n      this._deps.brand.brandConfig?.enableRcmScheduleOnBehalf ??\n      this._deps.meetingOptions?.enableScheduleOnBehalf\n    );\n  }\n\n  get enableCustomTimezone() {\n    return this._deps.meetingOptions?.enableCustomTimezone ?? false;\n  }\n\n  @action\n  protected _updateDelegators(delegators: MeetingDelegator[]) {\n    this.delegators = delegators;\n  }\n\n  @action\n  protected _updateUserSettings(userSettings: UserSettings) {\n    this.userSettings = userSettings;\n  }\n\n  @action\n  protected _updateLockedSettings(lockedSettings: LockedSettings) {\n    this.lockedSettings = lockedSettings;\n  }\n\n  @action\n  protected _updatePersonalMeeting(personalMeeting: RcMMeetingModel) {\n    this.personalMeeting = personalMeeting;\n  }\n\n  @action\n  protected _updatePreferences(preferences: Preferences) {\n    this.preferences = preferences;\n  }\n\n  @action\n  protected _updateIsPreferencesChanged(isPreferencesChanged: boolean) {\n    this.isPreferencesChanged = isPreferencesChanged;\n  }\n\n  @action\n  protected _updateMeetingState(meeting: RcMMeetingModel) {\n    this.meeting = meeting;\n  }\n\n  @action\n  protected _updateUpdatingStatus(updatingStatus: UpdatingStatus) {\n    this.updatingStatus = updatingStatus;\n  }\n\n  @action\n  protected _updateLastMeetingSetting(lastMeetingSetting: LastMeetingSetting) {\n    this.lastMeetingSetting = lastMeetingSetting;\n  }\n\n  @action\n  protected _updateSavedDefaultMeetingSetting(\n    savedDefaultMeetingSetting: SavedDefaultMeetingSetting,\n  ) {\n    this.savedDefaultMeetingSetting = savedDefaultMeetingSetting;\n  }\n\n  @track((that: Meeting, isScheduling: boolean) => {\n    if (!isScheduling) return;\n    return (analytics: Analytics) => {\n      const target = analytics.getTrackTarget();\n      if (target) {\n        return [\n          trackEvents.clickMeetingSchedulePage,\n          { router: target.router, 'Meeting Type': 'RCM' },\n        ];\n      }\n    };\n  })\n  @action\n  protected _updateIsScheduling(isScheduling: boolean) {\n    this.isScheduling = isScheduling;\n  }\n\n  protected async onInit() {\n    await this._init();\n  }\n\n  _shouldInit() {\n    return super._shouldInit() && this._deps.videoConfiguration.isRCM;\n  }\n\n  _shouldReset() {\n    return (\n      super._shouldReset() ||\n      (this.ready && !this._deps.videoConfiguration.isRCM)\n    );\n  }\n\n  async initScheduleFor(count = 0) {\n    if (!this.enableScheduleOnBehalf) {\n      return;\n    }\n    if (this._fetchDelegatorsTimeout) {\n      clearTimeout(this._fetchDelegatorsTimeout);\n    }\n    try {\n      const { records } = await this.getDelegators();\n      if (!records || records.length === 0) {\n        this.updateDelegators([]);\n        return;\n      }\n      this.updateDelegators([this.loginUser, ...records]);\n    } catch (e) {\n      console.error('fetch delegators error:', e);\n      if (count >= 5) {\n        console.warn('retry after 10s');\n        this._fetchDelegatorsTimeout = setTimeout(() => {\n          this.initScheduleFor(count + 1);\n        }, 10000);\n        return;\n      }\n      this.updateDelegators([]);\n    }\n  }\n\n  async _initMeetingSettings(extensionId?: string) {\n    await Promise.all([\n      this._initPersonalMeeting(extensionId),\n      this._updateServiceWebSettings(extensionId),\n    ]);\n\n    await this._initMeeting(extensionId);\n  }\n\n  /**\n   * Init basic meeting information\n   * also load meeting setting from previous one.\n   */\n  @background\n  async init() {\n    await this._init();\n  }\n\n  @proxify\n  async reload() {\n    await this._init();\n  }\n\n  @proxify\n  async _init() {\n    await Promise.all([this._initMeetingSettings(), this.initScheduleFor()]);\n  }\n\n  @proxify\n  protected async _initMeeting(extensionId?: string) {\n    this.update({\n      ...this.defaultMeetingSetting,\n      host: {\n        id: extensionId || this.loginUser.id,\n      },\n    });\n\n    this.updatePreferences(prunePreferencesObject(this.meeting));\n  }\n\n  @proxify\n  async updatePreferences(preferences: Preferences) {\n    this._updatePreferences(preferences);\n  }\n\n  @proxify\n  async updateIsPreferencesChanged(isPreferencesChanged: boolean) {\n    this._updateIsPreferencesChanged(isPreferencesChanged);\n  }\n\n  @proxify\n  async update(_meeting: RcMMeetingModel) {\n    let meeting = _meeting;\n    if (this.enableServiceWebSettings) {\n      meeting = this.combineWithSettings(_meeting);\n    }\n    const finalMeeting = {\n      ...meeting,\n      isMeetingPasswordValid: this.validatePasswordSettings(\n        _meeting.password,\n        _meeting._requireMeetingPassword,\n      ),\n    };\n    this.updateMeetingState(finalMeeting);\n    this._comparePreferences(finalMeeting);\n  }\n\n  private _comparePreferences(meeting: RcMMeetingModel) {\n    this.updateIsPreferencesChanged(\n      comparePreferences(this.preferences, meeting),\n    );\n  }\n\n  validatePasswordSettings(password: string, isSecret: boolean): boolean {\n    if (!isSecret) {\n      return true;\n    }\n    if (password && RCM_PASSWORD_REGEX.test(password)) {\n      return true;\n    }\n    return false;\n  }\n\n  combineWithSettings(_meeting: RcMMeetingModel) {\n    return this._combineWithSWSettings(_meeting);\n  }\n\n  _combineWithSWSettings(meeting: RcMMeetingModel): RcMMeetingModel {\n    if (!meeting.usePersonalMeetingId) {\n      return meeting;\n    }\n\n    const processedMeeting = { ...meeting };\n    const { allowJoinBeforeHost } = processedMeeting;\n    const { requirePasswordForPmiMeetings } = this.scheduleUserSettings;\n    const {\n      requirePasswordForPmiMeetings: lockedRequirePasswordForPmiMeetings,\n    } = this.scheduleLockedSettings;\n\n    if (\n      lockedRequirePasswordForPmiMeetings &&\n      requirePasswordForPmiMeetings === PMIRequirePassword.JBH_ONLY\n    ) {\n      if (allowJoinBeforeHost && !processedMeeting._requireMeetingPassword) {\n        processedMeeting._requireMeetingPassword = true;\n        processedMeeting.password =\n          processedMeeting._pmiPassword || generateRandomPassword();\n      }\n      processedMeeting._lockRequireMeetingPassword = allowJoinBeforeHost;\n    }\n    return processedMeeting;\n  }\n\n  @proxify\n  async _initPersonalMeeting(extensionId?: string, count = 0) {\n    if (!this.enablePersonalMeeting) {\n      return;\n    }\n    if (this._fetchPersonMeetingTimeout) {\n      clearTimeout(this._fetchPersonMeetingTimeout);\n    }\n    try {\n      const meetingInfoResponse = await this.fetchPersonalMeeting(extensionId);\n      const meeting = this.formatPersonalMeeting(meetingInfoResponse);\n      this.updatePersonalMeeting(meeting);\n    } catch (e) {\n      console.error('fetch personal meeting error:', e);\n      this.resetPersonalMeeting();\n      if (count < 5) {\n        console.warn('retry after 10s');\n        this._fetchPersonMeetingTimeout = setTimeout(() => {\n          this._initPersonalMeeting(extensionId, count + 1);\n        }, 10000);\n      }\n    }\n  }\n\n  @proxify\n  async _updateServiceWebSettings(extensionId?: string) {\n    if (!this.enableServiceWebSettings) {\n      return;\n    }\n    try {\n      const [userSettings, lockedSettings] = await Promise.all([\n        this.getUserSettings(extensionId),\n        this.getLockedSettings(),\n      ]);\n      this.updateUserSettings(userSettings);\n      this.updateLockedSettings(lockedSettings);\n    } catch (e) {\n      console.error('error:', e);\n    }\n  }\n\n  @proxify\n  async switchUsePersonalMeetingId(usePersonalMeetingId: boolean) {\n    this.update(\n      usePersonalMeetingId\n        ? this.pmiDefaultSettings\n        : this.getGeneralDefaultSettings(),\n    );\n  }\n\n  @proxify\n  async saveAsDefaultSetting(meeting: RcMMeetingModel) {\n    const formattedMeeting = this._format(meeting);\n    this.updateSavedDefaultMeetingSetting({\n      ...formattedMeeting,\n      _saved: meeting.notShowAgain,\n      _requireMeetingPassword: meeting._requireMeetingPassword,\n    });\n  }\n\n  @proxify\n  async scheduleDirectly(\n    meeting?: RcMMeetingModel,\n    { isAlertSuccess = true }: { isAlertSuccess?: boolean } = {},\n  ): Promise<ScheduleMeetingResponse> {\n    try {\n      meeting = meeting || this.meeting;\n      this.updateIsScheduling(true);\n      // Validate meeting\n      this._validate(meeting);\n      const formattedMeeting = this._format(meeting);\n\n      if (this.showSaveAsDefault && meeting.saveAsDefault) {\n        this.saveAsDefaultSetting(meeting);\n      }\n\n      const [resp, serviceInfo] = await Promise.all([\n        this.postMeeting(formattedMeeting),\n        this.getMeetingServiceInfo(meeting.host?.id),\n      ]);\n\n      const invitationInfo = await this.getMeetingInvitation(\n        resp.id,\n        this.currentLocale,\n      );\n      this.updateLastMeetingSetting({\n        ...formattedMeeting,\n        _saved: meeting._saved,\n      });\n\n      const result = await this._createDialingNumberTpl(\n        serviceInfo,\n        resp,\n        invitationInfo,\n      );\n\n      // Reload meeting info\n      if (this.enableReloadAfterSchedule) {\n        this._initMeeting();\n      }\n\n      // Update personal meeting setting\n      if (this.enablePersonalMeeting && resp.usePersonalMeetingId) {\n        this.updatePersonalMeeting(\n          this.formatPersonalMeeting(\n            resp,\n            serviceInfo.externalUserInfo.personalMeetingId,\n          ),\n        );\n        if (this.enableServiceWebSettings) {\n          this.update({\n            ...this.meeting,\n            _pmiPassword: resp.password,\n          });\n        }\n      }\n\n      // Notify user the meeting has been scheduled\n      if (isAlertSuccess) {\n        setTimeout(() => {\n          this._deps.alert.success({\n            message: meetingStatus.scheduledSuccess,\n          });\n        }, 50);\n      }\n      return result;\n    } catch (errors) {\n      await this._errorHandle(errors);\n      return null;\n    } finally {\n      this.updateIsScheduling(false);\n    }\n  }\n\n  @proxify\n  async schedule(\n    meeting?: RcMMeetingModel,\n    { isAlertSuccess = true }: { isAlertSuccess?: boolean } = {},\n  ): Promise<ScheduleMeetingResponse> {\n    if (this.isScheduling) return this._createMeetingPromise;\n\n    this._createMeetingPromise = this.scheduleDirectly(meeting, {\n      isAlertSuccess,\n    });\n\n    const result = await this._createMeetingPromise;\n    this._createMeetingPromise = null;\n    return result;\n  }\n\n  @proxify\n  async updateMeeting(\n    meetingId: string,\n    meeting: RcMMeetingModel,\n    { isAlertSuccess = false }: { isAlertSuccess?: boolean } = {},\n  ) {\n    if (this._isUpdating(meetingId)) {\n      return (this.updateMeeting as any)._promise;\n    }\n    meeting = meeting || this.meeting;\n    try {\n      this.addUpdatingStatus(meetingId);\n      // Validate meeting\n      this._validate(meeting);\n      const formattedMeeting = this._format(meeting);\n      if (this.showSaveAsDefault && meeting.saveAsDefault) {\n        this.saveAsDefaultSetting(meeting);\n      }\n\n      (this.updateMeeting as any)._promise = Promise.all([\n        this.putMeeting(meetingId, formattedMeeting),\n        this.getMeetingServiceInfo(meeting.host?.id),\n      ]);\n\n      const [resp, serviceInfo] = await (this.updateMeeting as any)._promise;\n\n      const invitationInfo = await this.getMeetingInvitation(\n        meetingId,\n        this.currentLocale,\n      );\n\n      const result = await this._createDialingNumberTpl(\n        serviceInfo,\n        resp,\n        invitationInfo,\n      );\n\n      // Reload meeting info\n      if (this.enableReloadAfterSchedule) {\n        this._initMeeting();\n      }\n\n      // Update personal meeting setting\n      if (this.enablePersonalMeeting && resp.usePersonalMeetingId) {\n        this.updatePersonalMeeting(\n          this.formatPersonalMeeting(\n            resp,\n            serviceInfo.externalUserInfo.personalMeetingId,\n          ),\n        );\n        if (this.enableServiceWebSettings) {\n          this.update({\n            ...this.meeting,\n            _pmiPassword: resp.password,\n          });\n        }\n      }\n\n      // Notify user the meeting has been updated\n      if (isAlertSuccess) {\n        setTimeout(() => {\n          this._deps.alert.success({\n            message: meetingStatus.updatedSuccess,\n          });\n        }, 50);\n      }\n      return result;\n    } catch (errors) {\n      await this._errorHandle(errors);\n      return null;\n    } finally {\n      delete (this.updateMeeting as any)._promise;\n      this.removeUpdatingStatus(meetingId);\n    }\n  }\n\n  @proxify\n  async deleteMeeting(meetingId: string) {\n    try {\n      await this._deps.client.account().extension().meeting(meetingId).delete();\n      return true;\n    } catch (errors) {\n      await this._errorHandle(errors);\n      return false;\n    }\n  }\n\n  @proxify\n  async updateScheduleFor(\n    userExtensionId: string | number = `${this.extensionId}`,\n  ) {\n    if (!this.delegators || this.delegators.length === 0) {\n      return;\n    }\n    const hostId = `${userExtensionId}`;\n    const user = find((item) => item.id === hostId, this.delegators);\n\n    if (user) {\n      await this._initMeetingSettings(hostId);\n    }\n  }\n\n  @proxify\n  async updateDelegators(delegators: MeetingDelegator[]) {\n    this._updateDelegators(delegators);\n  }\n\n  @proxify\n  async updateUserSettings(userSettings: UserSettings) {\n    this._updateUserSettings(userSettings);\n  }\n\n  @proxify\n  async updateLockedSettings(lockedSettings: LockedSettings) {\n    this._updateLockedSettings(lockedSettings);\n  }\n\n  @proxify\n  async updatePersonalMeeting(meeting: RcMMeetingModel) {\n    this._updatePersonalMeeting(meeting);\n  }\n\n  @proxify\n  async resetPersonalMeeting() {\n    this._updatePersonalMeeting(null);\n  }\n\n  @proxify\n  async updateMeetingState(meeting: RcMMeetingModel) {\n    this._updateMeetingState(meeting);\n  }\n\n  @proxify\n  async addUpdatingStatus(meetingId: string) {\n    this._updateUpdatingStatus([...this.updatingStatus, { meetingId }]);\n  }\n\n  @proxify\n  async removeUpdatingStatus(meetingId: string) {\n    const finalStatus = filter(\n      (obj) => obj.meetingId !== meetingId,\n      this.updatingStatus,\n    );\n    this._updateUpdatingStatus(finalStatus);\n  }\n\n  @proxify\n  async updateLastMeetingSetting(meeting: RcMMeetingModel) {\n    const lastMeetingSetting = pick(LAST_MEETING_SETTINGS, meeting || {});\n    this._updateLastMeetingSetting(lastMeetingSetting);\n  }\n\n  @proxify\n  async updateSavedDefaultMeetingSetting(meeting: RcMMeetingModel) {\n    const savedDefaulteSetting = pick(\n      SAVED_DEFAULT_MEETING_SETTINGS,\n      meeting || {},\n    );\n    this._updateSavedDefaultMeetingSetting(savedDefaulteSetting);\n  }\n\n  @proxify\n  async updateIsScheduling(isScheduling: boolean) {\n    this._updateIsScheduling(isScheduling);\n  }\n\n  @proxify\n  private async fetchPersonalMeeting(extensionId?: string) {\n    const serviceInfo = await this.getMeetingServiceInfo(extensionId);\n    const personalMeetingId = serviceInfo.externalUserInfo.personalMeetingId;\n    const meetingInfoResponse = await this.getMeeting(personalMeetingId);\n    if (!meetingInfoResponse) {\n      throw new Error(\n        `failed to get personal meeting ${personalMeetingId} info`,\n      );\n    }\n    return meetingInfoResponse;\n  }\n\n  @proxify\n  async getMeetingServiceInfo(extensionId?: string) {\n    return this._deps.client\n      .account()\n      .extension(extensionId)\n      .meeting()\n      .serviceInfo()\n      .get();\n  }\n\n  @proxify\n  async postMeeting(formattedMeeting: RcMMeetingModel) {\n    return this._deps.client\n      .account()\n      .extension()\n      .meeting()\n      .post(formattedMeeting);\n  }\n\n  @proxify\n  async putMeeting(meetingId: string, formattedMeeting: RcMMeetingModel) {\n    return this._deps.client\n      .account()\n      .extension()\n      .meeting(meetingId)\n      .put(formattedMeeting);\n  }\n\n  @proxify\n  async getMeeting(meetingId: string, { isAlertError = true } = {}) {\n    try {\n      const settings = await this._deps.client\n        .account()\n        .extension()\n        .meeting(meetingId)\n        .get();\n      return {\n        ...settings,\n        // TODO: can we remove this?\n        _requireMeetingPassword: !!settings.password,\n      };\n    } catch (e) {\n      const { errorCode, message } = await e.response.clone().json();\n      console.log(\n        `failed to get meeting info: ${meetingId}, ${errorCode}, ${message}`,\n      );\n      const isMeetingDeleted =\n        errorCode === 'CMN-102' &&\n        message.indexOf('[meetingId] is not found') > -1;\n      if (isAlertError && isMeetingDeleted) {\n        setTimeout(() => {\n          this._deps.alert.danger({\n            message: meetingStatus.meetingIsDeleted,\n          });\n        }, 50);\n      }\n      throw e;\n    }\n  }\n\n  @proxify\n  async getDelegators(): Promise<MeetingDelegatorsResponse> {\n    const res = await this._deps.client.service\n      .platform()\n      .get(\n        '/restapi/v1.0/account/~/extension/~/meetings-configuration/assisted',\n      );\n    return res.json();\n  }\n\n  @proxify\n  async getUserSettings(extensionId = '~'): Promise<UserSettings> {\n    try {\n      const platform = this._deps.client.service.platform();\n      const apiResponse = await platform.send({\n        method: 'GET',\n        url: `/restapi/v1.0/account/~/extension/${extensionId}/meeting/user-settings`,\n      });\n      return apiResponse.json();\n    } catch (e) {\n      console.warn('failed to get user setting', e);\n      return null;\n    }\n  }\n\n  @proxify\n  async getLockedSettings() {\n    try {\n      const platform = this._deps.client.service.platform();\n      const apiResponse = await platform.send({\n        method: 'GET',\n        url: '/restapi/v1.0/account/~/meeting/locked-settings',\n      });\n      const { recording = {}, scheduleMeeting = {} } = await apiResponse.json();\n      const {\n        startParticipantsVideo,\n        startParticipantVideo,\n        ...restScheduleOptions\n      } = scheduleMeeting;\n      const processedScheduleMeeting = {\n        ...restScheduleOptions,\n        // TODO: update this when api is stable\n        startParticipantsVideo:\n          startParticipantsVideo || startParticipantVideo || false,\n      };\n      return {\n        recording,\n        scheduleMeeting: processedScheduleMeeting,\n      };\n    } catch (e) {\n      console.warn('failed to get lock settings', e);\n      return null;\n    }\n  }\n\n  @proxify\n  async getMeetingInvitation(\n    meetingId: string,\n    locale = DEFAULT_LOCALE,\n  ): Promise<RcmInvitationInfo> {\n    if (!this.enableInvitationApi) {\n      return null;\n    }\n    // only rc brand is supported for now\n    if (!this._deps.brand.brandConfig.allowMeetingInvitation) {\n      return null;\n    }\n    try {\n      const apiResponse = await this._deps.client.service\n        .platform()\n        .get(\n          `/restapi/v1.0/account/~/extension/~/meeting/${meetingId}/invitation`,\n          {\n            language: this._deps.locale.normalizeLocale(locale),\n          },\n        );\n      const { invitation } = await apiResponse.json();\n      return {\n        invitation,\n      };\n    } catch (ex) {\n      console.warn('failed to get invitation', ex);\n      return null;\n    }\n  }\n\n  protected formatPersonalMeeting(\n    meetingInfo: MeetingInfoResponse,\n    shortId?: string, // TODO: do we need this param `shortId`?\n  ): RcMMeetingModel {\n    const settings = {\n      ...this.initialMeetingSetting,\n      ...meetingInfo,\n      shortId: shortId || meetingInfo.id,\n      usePersonalMeetingId: true,\n    };\n    return {\n      ...settings,\n      _requireMeetingPassword: !!settings.password,\n    };\n  }\n\n  /**\n   * Validate meeting information format.\n   * @param {Object} meeting\n   * @throws\n   */\n  _validate(meeting: RcMMeetingModel) {\n    if (!meeting) {\n      throw new MeetingErrors(meetingStatus.invalidMeetingInfo);\n    }\n    const { topic, password, schedule, _requireMeetingPassword } = meeting;\n    const errors = new MeetingErrors();\n    if (topic.length <= 0) {\n      errors.push(meetingStatus.emptyTopic);\n    }\n    if (_requireMeetingPassword && (!password || password.length <= 0)) {\n      errors.push(meetingStatus.noPassword);\n    }\n    if (schedule) {\n      if (schedule.durationInMinutes < 0) {\n        errors.push(meetingStatus.durationIncorrect);\n      }\n    }\n    if (errors.length > 0) {\n      throw errors;\n    }\n  }\n\n  /**\n   * Format meeting information.\n   * @param {Object} meeting\n   */\n  _format(meeting: RcMMeetingModel): RcMMeetingModel {\n    const {\n      topic,\n      meetingType,\n      allowJoinBeforeHost,\n      startHostVideo,\n      startParticipantsVideo,\n      audioOptions,\n      password,\n      schedule,\n      recurrence,\n      usePersonalMeetingId,\n      _requireMeetingPassword,\n      host,\n    } = meeting;\n    const formatted = {\n      host,\n      topic,\n      meetingType,\n      allowJoinBeforeHost,\n      startHostVideo,\n      startParticipantsVideo,\n      audioOptions,\n      password: _requireMeetingPassword ? password : '',\n      recurrence,\n      usePersonalMeetingId,\n    } as RcMMeetingModel;\n    // Recurring meetings do not have schedule info\n    if (meetingType !== MeetingType.RECURRING) {\n      const _schedule: MeetingScheduleResource = {\n        durationInMinutes: schedule.durationInMinutes,\n        timeZone: {\n          id: this.enableCustomTimezone\n            ? schedule.timeZone.id\n            : UTC_TIMEZONE_ID,\n        },\n      };\n      if (schedule.startTime) {\n        // Format selected startTime to utc standard time\n        // Timezone information is not included here\n        _schedule.startTime = this.enableCustomTimezone\n          ? schedule.startTime\n          : moment.utc(schedule.startTime).format();\n      }\n      formatted.schedule = _schedule;\n\n      if (recurrence && recurrence.until) {\n        formatted.recurrence.until = moment.utc(recurrence.until).format();\n      }\n    }\n\n    // For PMI\n    formatted.meetingType =\n      formatted.meetingType === MeetingType.PMI\n        ? MeetingType.SCHEDULED\n        : formatted.meetingType;\n    return formatted;\n  }\n\n  async _createDialingNumberTpl(\n    serviceInfo: MeetingServiceInfoResource,\n    resp: any,\n    invitationInfo: RcmInvitationInfo,\n  ) {\n    const result = {\n      meeting: resp,\n      serviceInfo: {\n        ...serviceInfo,\n        mobileDialingNumberTpl: getMobileDialingNumberTpl(\n          serviceInfo.dialInNumbers,\n          resp.id,\n        ),\n        phoneDialingNumberTpl: getPhoneDialingNumberTpl(\n          serviceInfo.dialInNumbers,\n        ),\n      },\n      extensionInfo: this.extensionInfo.info,\n      invitationInfo,\n    };\n    return result;\n  }\n\n  async _errorHandle(errors: any) {\n    if (errors instanceof MeetingErrors) {\n      for (const error of errors.all) {\n        this._deps.alert.warning(error);\n      }\n    } else if (errors && errors.response) {\n      const { message, errorCode, permissionName } = await errors.response\n        .clone()\n        .json();\n      if (errorCode === 'InsufficientPermissions' && permissionName) {\n        this._deps.alert.danger({\n          message: meetingStatus.insufficientPermissions,\n          payload: {\n            permissionName,\n          },\n        });\n      } else if (\n        errorCode === 'CMN-102' &&\n        message.indexOf('[meetingId] is not found') > -1\n      ) {\n        this._deps.alert.danger({\n          message: meetingStatus.meetingIsDeleted,\n        });\n      } else if (\n        !this._deps.availabilityMonitor ||\n        !(await this._deps.availabilityMonitor.checkIfHAError(errors))\n      ) {\n        this._deps.alert.danger({ message: meetingStatus.internalError });\n      }\n    } else {\n      console.log('errors:', errors);\n      this._deps.alert.danger({ message: meetingStatus.internalError });\n    }\n  }\n\n  enforcePmiPassword(\n    processedMeeting: RcMMeetingModel,\n    requirePwdForPMI: RequirePwdTypeForPMI,\n    requirePwdIsLockedForPMI: boolean,\n  ) {\n    const { allowJoinBeforeHost, password = '' } = processedMeeting;\n    if (password !== '') {\n      // save this for design\n      processedMeeting._pmiPassword = password;\n    }\n\n    let pmiRequiresPwd;\n    switch (requirePwdForPMI) {\n      case PMIRequirePassword.NONE:\n        pmiRequiresPwd = password !== '';\n        break;\n      case PMIRequirePassword.ALL:\n        pmiRequiresPwd = true;\n        break;\n      case PMIRequirePassword.JBH_ONLY:\n        pmiRequiresPwd = allowJoinBeforeHost || password !== '';\n        break;\n      default:\n        pmiRequiresPwd = processedMeeting._requireMeetingPassword;\n    }\n\n    const pmiRequiresPwdLocked =\n      requirePwdForPMI === PMIRequirePassword.JBH_ONLY\n        ? requirePwdIsLockedForPMI && allowJoinBeforeHost\n        : requirePwdIsLockedForPMI;\n\n    processedMeeting._requireMeetingPassword = pmiRequiresPwd;\n    processedMeeting._lockRequireMeetingPassword = pmiRequiresPwdLocked;\n  }\n\n  enforcePassword(\n    meeting: RcMMeetingModel,\n    { userSettings, personalMeetingSettings }: MeetingInitialExtraData,\n    usePmi: boolean,\n  ): RcMMeetingModel {\n    if (!this.enableServiceWebSettings) {\n      return meeting;\n    }\n    const {\n      requirePasswordForSchedulingNewMeetings: requirePwdForNonPMI = false,\n      requirePasswordForPmiMeetings: requirePwdForPMI,\n    } = this.scheduleUserSettings;\n    const {\n      requirePasswordForSchedulingNewMeetings: requirePwdIsLockedForNonPMI,\n      requirePasswordForPmiMeetings: requirePwdIsLockedForPMI,\n    } = this.scheduleLockedSettings;\n\n    const processedMeeting = {\n      ...meeting,\n      ...(usePmi ? personalMeetingSettings : userSettings),\n      usePersonalMeetingId: usePmi,\n      telephonyUserSettings: this.telephonyUserSettings,\n    } as RcMMeetingModel;\n\n    // For PMI meetings\n    if (usePmi) {\n      this.enforcePmiPassword(\n        processedMeeting,\n        requirePwdForPMI,\n        requirePwdIsLockedForPMI,\n      );\n    } else {\n      // For non-PMI meetings\n      if (requirePwdForNonPMI) {\n        processedMeeting._requireMeetingPassword = true;\n      }\n      if (requirePwdIsLockedForNonPMI) {\n        processedMeeting._lockRequireMeetingPassword = true;\n      }\n    }\n    return {\n      ...processedMeeting,\n      password:\n        processedMeeting._requireMeetingPassword && !processedMeeting.password\n          ? generateRandomPassword()\n          : processedMeeting.password,\n    } as RcMMeetingModel;\n  }\n\n  // use to check meeting is in updating status or not\n  _isUpdating(meetingId: string) {\n    return (\n      this.updatingStatus &&\n      find((obj: any) => obj.meetingId === meetingId, this.updatingStatus)\n    );\n  }\n\n  get extensionId(): number {\n    return this._deps.extensionInfo.info.id;\n  }\n\n  get enableDiscoveryApi() {\n    return !!this._deps.client.service.platform().discovery();\n  }\n\n  rcvBaseWebUri: string = null;\n\n  async fetchDiscoveryConfig() {\n    const data = await this._deps.client.service\n      .platform()\n      .discovery()\n      ?.externalData();\n    if (data) {\n      this.rcvBaseWebUri = data.rcv.baseWebUri;\n    } else {\n      // handle discovery api  error in sdk\n    }\n  }\n\n  onReset() {\n    this.rcvBaseWebUri = null;\n  }\n\n  async getMeetingUriRegExp() {\n    if (this.enableDiscoveryApi && !this.rcvBaseWebUri) {\n      await this.fetchDiscoveryConfig();\n    }\n    return {\n      rcvUriRegExp: this.rcvUriRegExp,\n      rcmUriRegExp: this.rcmUriRegExp,\n    };\n  }\n\n  @computed(({ _deps }: Meeting) => [_deps.brand.brandConfig.meetingUriReg.rcm])\n  get rcmUriRegExp() {\n    return getRcmUriRegExp(this._deps.brand.brandConfig.meetingUriReg.rcm);\n  }\n\n  @computed(({ _deps, rcvBaseWebUri }: Meeting) => [\n    _deps.brand.brandConfig.meetingUriReg.rcv,\n    rcvBaseWebUri,\n  ])\n  get rcvUriRegExp() {\n    const regExpText =\n      this.enableDiscoveryApi && this.rcvBaseWebUri\n        ? `(${this.rcvBaseWebUri\n            ?.replace(/^https?:\\/\\//, '')\n            .replace(/\\./g, '\\\\.')}|${\n            this._deps.brand.brandConfig.meetingUriReg.rcv\n          })`\n        : this._deps.brand.brandConfig.meetingUriReg.rcv;\n    return getRcvUriRegExp(regExpText);\n  }\n}\n"],"file":"Meeting.js"}