{"version":3,"file":"QuickAccess.js","names":["_core","require","_di","_proxify","_dec","_class","_class2","_descriptor","asyncGeneratorStep","n","t","e","r","o","a","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","l","Object","defineProperty","enumerable","configurable","writable","initializer","call","_classCallCheck","TypeError","_defineProperties","length","_toPropertyKey","key","_createClass","prototype","_toPrimitive","_typeof","Symbol","toPrimitive","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","__proto__","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","keys","forEach","slice","reverse","reduce","_initializerWarningHelper","Error","QuickAccess","Module","name","deps","dep","optional","_RcModuleV","_super","_this","onInitOnce","_this2","watch","_deps","webphone","ringSession","ready","entered","exit","_shouldInit","auth","pending","_shouldReset","updatePageStatus","_ref","undefined","_ref$entered","_enter","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","enter","_exit","_callee2","_callee2$","_context2","RcModuleV2","state","action","getOwnPropertyDescriptor","proxify","exports"],"sources":["modules/QuickAccess/QuickAccess.ts"],"sourcesContent":["import {\n  action,\n  RcModuleV2,\n  state,\n  watch,\n} from '@ringcentral-integration/core';\n\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\n\nimport type { Deps } from './QuickAccess.interface';\n\n@Module({\n  name: 'QuickAccess',\n  deps: ['Auth', 'Webphone', { dep: 'QuickAccessOptions', optional: true }],\n})\nexport class QuickAccess extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n  }\n\n  @state\n  entered = false;\n\n  override onInitOnce() {\n    // When there is an incoming call,\n    // the page should be dismissed\n    watch(\n      this,\n      () => this._deps.webphone.ringSession,\n      (ringSession) => {\n        if (ringSession && this._deps.webphone.ready && !this.entered) {\n          this.exit();\n        }\n      },\n    );\n  }\n\n  override _shouldInit() {\n    return this._deps.auth.ready && this.pending;\n  }\n\n  override _shouldReset() {\n    return !this._deps.auth.ready && this.ready;\n  }\n\n  @action\n  updatePageStatus({ entered = this.entered }: { entered?: boolean } = {}) {\n    this.entered = entered;\n  }\n\n  @proxify\n  async enter() {\n    this.updatePageStatus({\n      entered: true,\n    });\n  }\n\n  @proxify\n  async exit() {\n    this.updatePageStatus({\n      entered: false,\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]}