{"version":3,"file":"QuickAccess.js","names":["_core","require","_di","_proxify","_dec","_class","_class2","_descriptor","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","initializer","call","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","i","length","_toPropertyKey","_createClass","protoProps","staticProps","prototype","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","decorators","desc","keys","forEach","slice","reverse","reduce","decorator","_initializerWarningHelper","Error","QuickAccess","Module","name","deps","dep","optional","_RcModuleV","_super","_this","onInitOnce","_this2","watch","_deps","webphone","ringSession","ready","entered","exit","_shouldInit","auth","pending","_shouldReset","updatePageStatus","_ref","_ref$entered","_enter","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","enter","_exit","_callee2","_callee2$","_context2","RcModuleV2","state","action","getOwnPropertyDescriptor","proxify","exports"],"sources":["modules/QuickAccess/QuickAccess.ts"],"sourcesContent":["import {\n  action,\n  RcModuleV2,\n  state,\n  watch,\n} from '@ringcentral-integration/core';\n\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport type { Deps } from './QuickAccess.interface';\n\n@Module({\n  name: 'QuickAccess',\n  deps: ['Auth', 'Webphone', { dep: 'QuickAccessOptions', optional: true }],\n})\nexport class QuickAccess extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n  }\n\n  @state\n  entered = false;\n\n  override onInitOnce() {\n    // When there is an incoming call,\n    // the page should be dismissed\n    watch(\n      this,\n      () => this._deps.webphone.ringSession,\n      (ringSession) => {\n        if (ringSession && this._deps.webphone.ready && !this.entered) {\n          this.exit();\n        }\n      },\n    );\n  }\n\n  override _shouldInit() {\n    return this._deps.auth.ready && this.pending;\n  }\n\n  override _shouldReset() {\n    return !this._deps.auth.ready && this.ready;\n  }\n\n  @action\n  updatePageStatus({ entered = this.entered }: { entered?: boolean } = {}) {\n    this.entered = entered;\n  }\n\n  @proxify\n  async enter() {\n    this.updatePageStatus({\n      entered: true,\n    });\n  }\n\n  @proxify\n  async exit() {\n    this.updatePageStatus({\n      entered: false,\n    });\n  }\n}\n"],"mappings":"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"}