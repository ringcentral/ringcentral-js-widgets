{"version":3,"file":"ContactSearchHelper.js","names":["MaximizeDisplayLength","getPresenceStatus","exports","presence","dndStatus","presenceStatus","userStatus","toLowerCase","getRcFilteredContacts","_ref","lowCaseString","contacts","len","length","result","resultCount","_loop","i","_contacts$i","id","name","phoneNumbers","type","profileImageUrl","isNameInclude","includes","isPrimary","forEach","_ref2","phoneType","phoneNumber","push","contact"],"sources":["modules/ContactSearchUI/ContactSearchHelper.ts"],"sourcesContent":["import type {\n  Contact,\n  Presence,\n} from '@ringcentral-integration/commons/modules/AccountContacts';\nimport type { RcPresenceType } from '@ringcentral/juno';\n\nimport type { IContactSearchItem } from './ContactSearchUI.interface';\n\nconst MaximizeDisplayLength = 100;\n\nexport const getPresenceStatus = (\n  presence: Presence['presence'],\n): RcPresenceType | undefined => {\n  if (!presence) {\n    return;\n  }\n  const { dndStatus, presenceStatus, userStatus } = presence;\n  if (dndStatus === 'DoNotAcceptAnyCalls') {\n    return 'DND';\n  }\n\n  return (presenceStatus || userStatus || '').toLowerCase() as RcPresenceType;\n};\n\nexport const getRcFilteredContacts = ({\n  lowCaseString,\n  contacts,\n}: {\n  lowCaseString: string;\n  contacts: Array<Contact>;\n}): IContactSearchItem[] => {\n  const len = contacts.length;\n  const result: IContactSearchItem[] = [];\n  let resultCount = 0;\n  for (let i = 0; i < len; i++) {\n    const { id, name, phoneNumbers, type, profileImageUrl, presence } =\n      contacts[i];\n    const isNameInclude = name?.toLowerCase().includes(lowCaseString);\n    let isPrimary = true;\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    // eslint-disable-next-line no-loop-func\n    phoneNumbers.forEach(({ phoneType, phoneNumber }) => {\n      // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n      if (isNameInclude || phoneNumber.includes(lowCaseString)) {\n        result.push({\n          id,\n          // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n          name,\n          type,\n          // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n          phoneType,\n          // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n          phoneNumber,\n          isPrimary,\n          profileImageUrl,\n          // @ts-expect-error TS(2345): Argument of type 'Pick<PresenceInfoResponse, \"dndS... Remove this comment to see the full error message\n          presenceStatus: getPresenceStatus(presence),\n          contact: contacts[i],\n        });\n        if (isPrimary) {\n          isPrimary = false;\n          resultCount += 1;\n        }\n      }\n    });\n    if (resultCount === MaximizeDisplayLength) break;\n  }\n  return result;\n};\n"],"mappings":";;;;;;;;;;;;;AAQA,IAAMA,qBAAqB,GAAG,GAAG;AAE1B,IAAMC,iBAAiB,GAAAC,OAAA,CAAAD,iBAAA,GAAG,SAApBA,iBAAiBA,CAC5BE,QAA8B,EACC;EAC/B,IAAI,CAACA,QAAQ,EAAE;IACb;EACF;EACA,IAAQC,SAAS,GAAiCD,QAAQ,CAAlDC,SAAS;IAAEC,cAAc,GAAiBF,QAAQ,CAAvCE,cAAc;IAAEC,UAAU,GAAKH,QAAQ,CAAvBG,UAAU;EAC7C,IAAIF,SAAS,KAAK,qBAAqB,EAAE;IACvC,OAAO,KAAK;EACd;EAEA,OAAO,CAACC,cAAc,IAAIC,UAAU,IAAI,EAAE,EAAEC,WAAW,CAAC,CAAC;AAC3D,CAAC;AAEM,IAAMC,qBAAqB,GAAAN,OAAA,CAAAM,qBAAA,GAAG,SAAxBA,qBAAqBA,CAAAC,IAAA,EAMN;EAAA,IAL1BC,aAAa,GAAAD,IAAA,CAAbC,aAAa;IACbC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;EAKR,IAAMC,GAAG,GAAGD,QAAQ,CAACE,MAAM;EAC3B,IAAMC,MAA4B,GAAG,EAAE;EACvC,IAAIC,WAAW,GAAG,CAAC;EAAC,IAAAC,KAAA,YAAAA,MAAAC,CAAA,EACU;IAC5B,IAAAC,WAAA,GACEP,QAAQ,CAACM,CAAC,CAAC;MADLE,EAAE,GAAAD,WAAA,CAAFC,EAAE;MAAEC,IAAI,GAAAF,WAAA,CAAJE,IAAI;MAAEC,YAAY,GAAAH,WAAA,CAAZG,YAAY;MAAEC,IAAI,GAAAJ,WAAA,CAAJI,IAAI;MAAEC,eAAe,GAAAL,WAAA,CAAfK,eAAe;MAAEpB,QAAQ,GAAAe,WAAA,CAARf,QAAQ;IAE/D,IAAMqB,aAAa,GAAGJ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEb,WAAW,CAAC,CAAC,CAACkB,QAAQ,CAACf,aAAa,CAAC;IACjE,IAAIgB,SAAS,GAAG,IAAI;IACpB;IACA;IACAL,YAAY,CAACM,OAAO,CAAC,UAAAC,KAAA,EAAgC;MAAA,IAA7BC,SAAS,GAAAD,KAAA,CAATC,SAAS;QAAEC,WAAW,GAAAF,KAAA,CAAXE,WAAW;MAC5C;MACA,IAAIN,aAAa,IAAIM,WAAW,CAACL,QAAQ,CAACf,aAAa,CAAC,EAAE;QACxDI,MAAM,CAACiB,IAAI,CAAC;UACVZ,EAAE,EAAFA,EAAE;UACF;UACAC,IAAI,EAAJA,IAAI;UACJE,IAAI,EAAJA,IAAI;UACJ;UACAO,SAAS,EAATA,SAAS;UACT;UACAC,WAAW,EAAXA,WAAW;UACXJ,SAAS,EAATA,SAAS;UACTH,eAAe,EAAfA,eAAe;UACf;UACAlB,cAAc,EAAEJ,iBAAiB,CAACE,QAAQ,CAAC;UAC3C6B,OAAO,EAAErB,QAAQ,CAACM,CAAC;QACrB,CAAC,CAAC;QACF,IAAIS,SAAS,EAAE;UACbA,SAAS,GAAG,KAAK;UACjBX,WAAW,IAAI,CAAC;QAClB;MACF;IACF,CAAC,CAAC;IACF,IAAIA,WAAW,KAAKf,qBAAqB;EAC3C,CAAC;EAhCD,KAAK,IAAIiB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,GAAG,EAAEK,CAAC,EAAE;IAAA,IAAAD,KAAA,CAAAC,CAAA,GA+BiB;EAAM;EAEnD,OAAOH,MAAM;AACf,CAAC","ignoreList":[]}