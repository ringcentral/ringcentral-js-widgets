{"version":3,"file":"ContactSearchUI.js","names":["_trackEvents","require","_debounceThrottle","_di","_formatNumber","_proxify","_core","_ContactSearchHelper","_dec","_dec2","_dec3","_dec4","_dec5","_class","_class2","_descriptor","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","initializer","call","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","i","length","_toPropertyKey","_createClass","protoProps","staticProps","prototype","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","decorators","desc","keys","forEach","slice","reverse","reduce","decorator","_initializerWarningHelper","Error","ContactSearchUI","Module","name","deps","dep","optional","computed","that","filterString","_deps","accountContacts","contacts","addressBook","_that$_deps$contactSe","contactSearch","searchResult","track","tab","routerInteraction","currentPath","trackEvents","changeDailerDirectoryTab","changeSMSDirectoryTab","_RcUIModuleV","_super","_this$_deps","_this$_deps$contactSe","_this","_companyContactsCache","_personalContactsCache","_minimumSearchLength","_companyContacts","_debouncedSetFilterString","debounce","_setFilterString","threshold","_debouncedGetCompanyExtraInfoByIds","getCompanyExtraInfoByIds","formatPhone","phoneNumber","formatNumber","areaCode","regionSettings","countryCode","maxExtensionLength","accountInfo","maxExtensionNumberLength","minimalSearchLength","getFilteredCompanyContacts","searchFilter","lowCaseString","toLowerCase","getRcFilteredContacts","getFilteredPersonalContacts","changeTabTrack","onInitOnce","_this2","watch","ids","contact","rcCompanyMapping","getProfileImage","_getPresence","regeneratorRuntime","mark","_callee","useCache","presence","_args","wrap","_callee$","_context","prev","next","getPresence","sent","abrupt","stop","_x","getUIProps","_ref","_this$_deps$contactSe2","_this$_deps$contactSe3","_this$_deps$contactSe4","userInput","inputRef","directlyProceedText","currentLocale","locale","companyContacts","personalContacts","centered","contactSearchUIOptions","minimumSearchLength","thirdPartyContacts","searchContactList","isThirdPartySearching","isIdle","getUIFunctions","_ref2","_this3","optionClickHandler","searchHandler","_searchHandler","_callee2","searchString","_this3$_deps$contactS","_callee2$","_context2","debouncedSearch","_x2","setFilterString","_this3$_deps$contactS2","_this3$_deps$contactS3","setPrepareSearch","v","get","_this$_deps$contactSe5","RcUIModuleV2","state","action","getOwnPropertyDescriptor","proxify","exports"],"sources":["modules/ContactSearchUI/ContactSearchUI.ts"],"sourcesContent":["import { trackEvents } from '@ringcentral-integration/commons/enums/trackEvents';\nimport type {\n  ContactPresence,\n  IContact,\n} from '@ringcentral-integration/commons/interfaces/Contact.model';\nimport { debounce } from '@ringcentral-integration/commons/lib/debounce-throttle';\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport { formatNumber } from '@ringcentral-integration/commons/lib/formatNumber';\nimport { proxify } from '@ringcentral-integration/commons/lib/proxy/proxify';\nimport type { UIFunctions, UIProps } from '@ringcentral-integration/core';\nimport {\n  action,\n  computed,\n  RcUIModuleV2,\n  state,\n  track,\n  watch,\n} from '@ringcentral-integration/core';\n\nimport { getRcFilteredContacts } from './ContactSearchHelper';\nimport type {\n  ContactSearchPanelProps,\n  Deps,\n  IContactSearchItem,\n  PageProps,\n} from './ContactSearchUI.interface';\n\n@Module({\n  name: 'ContactSearchUI',\n  deps: [\n    'Locale',\n    'AccountContacts',\n    'AddressBook',\n    'RegionSettings',\n    'AccountInfo',\n    'RouterInteraction',\n    'Contacts',\n    { dep: 'ContactSearch', optional: true },\n    { dep: 'ContactSearchUIOptions', optional: true },\n  ],\n})\nexport class ContactSearchUI<T extends Deps = Deps> extends RcUIModuleV2<T> {\n  private _companyContactsCache: Record<string, IContactSearchItem[]> = {};\n  private _personalContactsCache: Record<string, IContactSearchItem[]> = {};\n  private _minimumSearchLength?: number;\n  private _companyContacts;\n\n  constructor(deps: T) {\n    super({\n      deps,\n    });\n    this._minimumSearchLength = this._deps?.contactSearch?.minimalSearchLength;\n    this._companyContacts = this._deps.accountContacts.contacts;\n  }\n\n  @state\n  filterString = '';\n\n  private _debouncedSetFilterString = debounce({\n    fn: this._setFilterString,\n    threshold: 800,\n  });\n\n  private _debouncedGetCompanyExtraInfoByIds = debounce({\n    fn: this.getCompanyExtraInfoByIds,\n    threshold: 500,\n  });\n\n  @action\n  _setFilterString(filterString: string) {\n    this.filterString = filterString;\n  }\n\n  getFilteredCompanyContacts(searchFilter = '') {\n    const lowCaseString = searchFilter.toLowerCase();\n    if (this._companyContacts !== this._deps.accountContacts.contacts) {\n      this._companyContacts = this._deps.accountContacts.contacts;\n    } else if (this._companyContactsCache[lowCaseString]) {\n      return this._companyContactsCache[lowCaseString];\n    }\n\n    const result = getRcFilteredContacts({\n      lowCaseString,\n      contacts: this._deps.accountContacts.contacts,\n    });\n\n    this._companyContactsCache[lowCaseString] = result;\n    return result;\n  }\n\n  getFilteredPersonalContacts(searchFilter = '') {\n    const lowCaseString = searchFilter.toLowerCase();\n    if (this._personalContactsCache[lowCaseString]) {\n      return this._personalContactsCache[lowCaseString];\n    }\n\n    const result = getRcFilteredContacts({\n      lowCaseString,\n      contacts: this._deps.addressBook.contacts,\n    });\n\n    this._personalContactsCache[lowCaseString] = result;\n    return result;\n  }\n\n  @computed((that: ContactSearchUI) => [\n    that.filterString,\n    that._deps.accountContacts.contacts,\n  ])\n  get companyContacts() {\n    return this.getFilteredCompanyContacts(this.filterString);\n  }\n\n  @computed((that: ContactSearchUI) => [\n    that.filterString,\n    that._deps.addressBook.contacts,\n  ])\n  get personalContacts() {\n    return this.getFilteredPersonalContacts(this.filterString);\n  }\n\n  @computed((that: ContactSearchUI) => [that._deps.contactSearch?.searchResult])\n  get searchContactList() {\n    return this._deps.contactSearch?.searchResult.slice(0, 500);\n  }\n\n  @track((that: ContactSearchUI, tab) => [\n    that._deps.routerInteraction.currentPath === '/dialer'\n      ? trackEvents.changeDailerDirectoryTab\n      : trackEvents.changeSMSDirectoryTab,\n    { tab },\n  ])\n  changeTabTrack(tab: string) {}\n\n  override onInitOnce() {\n    watch(\n      this,\n      () => this._deps.addressBook.contacts,\n      () => {\n        this._personalContactsCache = {};\n      },\n    );\n\n    watch(\n      this,\n      () => this._deps.accountContacts.contacts,\n      () => {\n        this._companyContactsCache = {};\n      },\n    );\n  }\n\n  formatPhone = (phoneNumber: string) => {\n    return formatNumber({\n      phoneNumber,\n      areaCode: this._deps.regionSettings.areaCode,\n      countryCode: this._deps.regionSettings.countryCode,\n      maxExtensionLength: this._deps.accountInfo.maxExtensionNumberLength,\n    });\n  };\n\n  getCompanyExtraInfoByIds(ids: string[]) {\n    for (let i = 0; i < ids.length; i++) {\n      const contact = this._deps.accountContacts.rcCompanyMapping[ids[i]];\n      if (contact) {\n        this._deps.accountContacts.getProfileImage(contact);\n      }\n    }\n  }\n\n  @proxify\n  async getPresence(\n    contact: IContact,\n    useCache = true,\n  ): Promise<ContactPresence | null> {\n    const presence = await this._deps.contacts.getPresence(contact, useCache);\n    return presence;\n  }\n\n  getUIProps({\n    userInput,\n    inputRef,\n    directlyProceedText,\n  }: PageProps): UIProps<ContactSearchPanelProps> {\n    // @ts-expect-error TS(2741): Property 'thirdPartySourceName' is missing in type... Remove this comment to see the full error message\n    return {\n      currentLocale: this._deps.locale.currentLocale,\n      companyContacts: this.companyContacts,\n      personalContacts: this.personalContacts,\n      userInput,\n      inputRef,\n      centered: this._deps.contactSearchUIOptions?.centered ?? false,\n      minimumSearchLength: this._minimumSearchLength,\n      thirdPartyContacts: this.searchContactList as IContactSearchItem[],\n      isThirdPartySearching: !this._deps.contactSearch?.isIdle,\n      directlyProceedText,\n    };\n  }\n\n  getUIFunctions({\n    optionClickHandler,\n  }: PageProps): UIFunctions<ContactSearchPanelProps> {\n    return {\n      optionClickHandler,\n      searchHandler: async (searchString) => {\n        await this._deps.contactSearch?.debouncedSearch({ searchString });\n      },\n      setFilterString: (filterString: string) => {\n        this._debouncedSetFilterString(filterString);\n        if (\n          this._minimumSearchLength !== undefined &&\n          filterString.length >= this._minimumSearchLength\n        ) {\n          this._deps.contactSearch?.setPrepareSearch();\n          this._deps.contactSearch?.debouncedSearch({\n            searchString: filterString,\n          });\n        }\n      },\n      // @ts-expect-error TS(2322): Type '(phoneNumber: string) => string | null | und... Remove this comment to see the full error message\n      formatPhone: this.formatPhone,\n      changeTabTrack: (v) => {\n        this.changeTabTrack(v);\n      },\n      getCompanyExtraInfoByIds: (ids: string[]) =>\n        this._debouncedGetCompanyExtraInfoByIds(ids),\n      getPresence: (contact, useCache) => {\n        return this.getPresence(contact, useCache);\n      },\n    };\n  }\n}\n"],"mappings":"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"}