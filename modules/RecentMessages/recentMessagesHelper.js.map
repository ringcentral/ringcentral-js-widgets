{"version":3,"file":"recentMessagesHelper.js","names":["filterPhoneNumber","exports","message","_ref","phoneNumber","from","to","find","extensionNumber","flattenToMessageRecords","allMessages","reduce","acc","_ref2","records","concat","sortMessages","recentMessages","sort","a","b","Date","creationTime","getTime","markAsRemoteMessage","messages","map","_objectSpread","fromRemote","dedup","hash","cur","id"],"sources":["modules/RecentMessages/recentMessagesHelper.ts"],"sourcesContent":["import type GetMessageInfoResponse from '@rc-ex/core/lib/definitions/GetMessageInfoResponse';\nimport type GetMessageList from '@rc-ex/core/lib/definitions/GetMessageList';\n\nimport type { Entity } from '../../interfaces/Entity.interface';\nimport type { Message } from '../../interfaces/MessageStore.model';\nimport type { MessageStoreItem } from '../MessageStore';\n\nimport type { RecentMessage } from './RecentMessages.interface';\n\nexport const filterPhoneNumber = (message: MessageStoreItem) => {\n  // @ts-expect-error TS(2537): Type 'EntityPhoneNumberItem[] | undefined' has no ... Remove this comment to see the full error message\n  return ({ phoneNumber }: Entity['phoneNumbers'][number]) =>\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    phoneNumber === message.from.phoneNumber ||\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    !!message.to.find((to) => to.phoneNumber === phoneNumber) ||\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    phoneNumber === message.from.extensionNumber ||\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    !!message.to.find((to) => to.extensionNumber === phoneNumber);\n};\n\nexport const flattenToMessageRecords = (allMessages: GetMessageList[]) => {\n  return allMessages.reduce(\n    // @ts-expect-error TS(2769): No overload matches this call.\n    (acc, { records }) => acc.concat(records),\n    [] as GetMessageInfoResponse[],\n  );\n};\n\nexport const sortMessages = (recentMessages: RecentMessage[]) => {\n  // Sort by time in descending order\n  return recentMessages.sort(\n    (a, b) =>\n      // @ts-expect-error TS(2769): No overload matches this call.\n      new Date(b.creationTime).getTime() - new Date(a.creationTime).getTime(),\n  );\n};\n\nexport const markAsRemoteMessage = (messages: GetMessageInfoResponse[]) => {\n  return messages.map((message) => {\n    return {\n      ...message,\n      fromRemote: true,\n    } as RecentMessage;\n  });\n};\n\nexport const dedup = (messages: (Message | RecentMessage)[]) => {\n  const hash: Record<string, boolean> = {};\n  return messages.reduce((acc, cur) => {\n    // @ts-expect-error TS(2538): Type 'undefined' cannot be used as an index type.\n    if (hash[cur.id]) return acc;\n    // @ts-expect-error TS(2538): Type 'undefined' cannot be used as an index type.\n    hash[cur.id] = true;\n    // @ts-expect-error TS(2769): No overload matches this call.\n    return acc.concat(cur);\n  }, []);\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASO,IAAMA,iBAAiB,GAAAC,OAAA,CAAAD,iBAAA,GAAG,SAApBA,iBAAiBA,CAAIE,OAAyB,EAAK;EAC9D;EACA,OAAO,UAAAC,IAAA;IAAA,IAAGC,WAAW,GAAAD,IAAA,CAAXC,WAAW;IAAA;MACnB;MACAA,WAAW,KAAKF,OAAO,CAACG,IAAI,CAACD,WAAW;MACxC;MACA,CAAC,CAACF,OAAO,CAACI,EAAE,CAACC,IAAI,CAAC,UAACD,EAAE;QAAA,OAAKA,EAAE,CAACF,WAAW,KAAKA,WAAW;MAAA,EAAC;MACzD;MACAA,WAAW,KAAKF,OAAO,CAACG,IAAI,CAACG,eAAe;MAC5C;MACA,CAAC,CAACN,OAAO,CAACI,EAAE,CAACC,IAAI,CAAC,UAACD,EAAE;QAAA,OAAKA,EAAE,CAACE,eAAe,KAAKJ,WAAW;MAAA;IAAC;EAAA;AACjE,CAAC;AAEM,IAAMK,uBAAuB,GAAAR,OAAA,CAAAQ,uBAAA,GAAG,SAA1BA,uBAAuBA,CAAIC,WAA6B,EAAK;EACxE,OAAOA,WAAW,CAACC,MAAM;EACvB;EACA,UAACC,GAAG,EAAAC,KAAA;IAAA,IAAIC,OAAO,GAAAD,KAAA,CAAPC,OAAO;IAAA,OAAOF,GAAG,CAACG,MAAM,CAACD,OAAO,CAAC;EAAA,GACzC,EACF,CAAC;AACH,CAAC;AAEM,IAAME,YAAY,GAAAf,OAAA,CAAAe,YAAA,GAAG,SAAfA,YAAYA,CAAIC,cAA+B,EAAK;EAC/D;EACA,OAAOA,cAAc,CAACC,IAAI,CACxB,UAACC,CAAC,EAAEC,CAAC;IAAA;MACH;MACA,IAAIC,IAAI,CAACD,CAAC,CAACE,YAAY,CAAC,CAACC,OAAO,CAAC,CAAC,GAAG,IAAIF,IAAI,CAACF,CAAC,CAACG,YAAY,CAAC,CAACC,OAAO,CAAC;IAAC;EAAA,CAC3E,CAAC;AACH,CAAC;AAEM,IAAMC,mBAAmB,GAAAvB,OAAA,CAAAuB,mBAAA,GAAG,SAAtBA,mBAAmBA,CAAIC,QAAkC,EAAK;EACzE,OAAOA,QAAQ,CAACC,GAAG,CAAC,UAACxB,OAAO,EAAK;IAC/B,OAAAyB,aAAA,CAAAA,aAAA,KACKzB,OAAO;MACV0B,UAAU,EAAE;IAAI;EAEpB,CAAC,CAAC;AACJ,CAAC;AAEM,IAAMC,KAAK,GAAA5B,OAAA,CAAA4B,KAAA,GAAG,SAARA,KAAKA,CAAIJ,QAAqC,EAAK;EAC9D,IAAMK,IAA6B,GAAG,CAAC,CAAC;EACxC,OAAOL,QAAQ,CAACd,MAAM,CAAC,UAACC,GAAG,EAAEmB,GAAG,EAAK;IACnC;IACA,IAAID,IAAI,CAACC,GAAG,CAACC,EAAE,CAAC,EAAE,OAAOpB,GAAG;IAC5B;IACAkB,IAAI,CAACC,GAAG,CAACC,EAAE,CAAC,GAAG,IAAI;IACnB;IACA,OAAOpB,GAAG,CAACG,MAAM,CAACgB,GAAG,CAAC;EACxB,CAAC,EAAE,EAAE,CAAC;AACR,CAAC","ignoreList":[]}