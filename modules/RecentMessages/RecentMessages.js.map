{"version":3,"file":"RecentMessages.js","names":["_core","require","_concurrentExecute","_interopRequireDefault","_di","_getDateFrom","_messageHelper","_proxify","_messageStatus","_recentMessagesHelper","_dec","_dec2","_class","_class2","_descriptor","_descriptor2","_descriptor3","e","__esModule","ownKeys","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_regenerator","Symbol","n","iterator","toStringTag","i","c","prototype","Generator","u","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","_regeneratorDefine","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","slice","reverse","reduce","_initializerWarningHelper","Error","RecentMessages","exports","Module","name","deps","computed","that","messages","_RcModuleV","_this","onInitOnce","_this2","watch","_deps","messageStore","timestamp","ready","_i","_Object$keys","contacts","getMessages","currentContact","sessionId","indexOf","split","fromLocal","forceUpdate","initLoad","messageStatus","MessageStatus","loading","loadSuccess","_ref","contact","loaded","contactId","id","concat","loadReset","_ref2","get","_this3","unreadCounts","acc","cur","readStatus","_getMessages","_callee","_ref3","_ref3$sessionId","_ref3$fromLocal","_ref3$forceUpdate","_context","_getRecentMessages","textConversations","_x","cleanUpMessages","_ref4","_ref4$sessionId","_getRecentMessages2","_callee2","conversations","daySpan","dateFrom","recentMessages","dateTo","_args2","_t","_t2","_context2","undefined","getDateFrom","_getLocalRecentMessages","Date","creationTime","_fetchRemoteRecentMessages","toISOString","console","error","dedup","_x2","_ref5","phoneNumbers","matches","conversation","messageList","conversationStore","conversationId","find","filterPhoneNumber","sort","sortByDate","_fetchRemoteRecentMessages2","_callee3","_ref6","_this4","params","recentMessagesPromise","allMessages","messageRecords","remoteMessage","_args3","_context3","messageType","perPage","_ref7","phoneNumber","promise","_fetchMessageList","concurrentExecute","delay","flattenToMessageRecords","markAsRemoteMessage","sortMessages","_x3","_x4","_this5","client","account","extension","list","RcModuleV2","state","action","proxify"],"sources":["modules/RecentMessages/RecentMessages.ts"],"sourcesContent":["import type GetMessageList from '@rc-ex/core/lib/definitions/GetMessageList';\nimport {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n  watch,\n} from '@ringcentral-integration/core';\n\nimport type { Entity } from '../../interfaces/Entity.interface';\nimport type { Message, Messages } from '../../interfaces/MessageStore.model';\nimport concurrentExecute from '../../lib/concurrentExecute';\nimport { Module } from '../../lib/di';\nimport getDateFrom from '../../lib/getDateFrom';\nimport { sortByDate } from '../../lib/messageHelper';\nimport { proxify } from '../../lib/proxy/proxify';\nimport type { MessageStoreConversations } from '../MessageStore';\n\nimport type {\n  CleanUpMessagesOptions,\n  Deps,\n  FetchMessageListOptions,\n  GetMessagesOptions,\n  LoadResetOptions,\n  LoadSuccessOptions,\n  RecentMessage,\n} from './RecentMessages.interface';\nimport { MessageStatus } from './messageStatus';\nimport {\n  dedup,\n  filterPhoneNumber,\n  flattenToMessageRecords,\n  markAsRemoteMessage,\n  sortMessages,\n} from './recentMessagesHelper';\n\n/**\n * Retrieve all recent messages related to a specified contact.\n */\n@Module({\n  name: 'RecentMessages',\n  deps: ['Client', 'MessageStore'],\n})\nexport class RecentMessages extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n  }\n\n  override onInitOnce() {\n    watch(\n      this,\n      () => this._deps.messageStore.timestamp,\n      () => {\n        if (this.ready && Object.keys(this.messages).length > 0) {\n          for (const key of Object.keys(this.contacts)) {\n            this.getMessages({\n              currentContact: this.contacts[key],\n              // @ts-expect-error TS(2322): Type 'string | null' is not assignable to type 'st... Remove this comment to see the full error message\n              sessionId: key.indexOf('-') > -1 ? key.split('-')[1] : null,\n              fromLocal: false,\n              forceUpdate: true,\n            });\n          }\n        }\n      },\n    );\n  }\n\n  @state\n  contacts: Record<string, Entity> = {};\n\n  @state\n  messages: Record<string, (Message | RecentMessage)[]> = {};\n\n  @state\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'MessageStat... Remove this comment to see the full error message\n  messageStatus: MessageStatus = null;\n\n  @action\n  initLoad() {\n    this.messageStatus = MessageStatus.loading;\n  }\n\n  @action\n  loadSuccess({ contact, messages, sessionId }: LoadSuccessOptions) {\n    this.messageStatus = MessageStatus.loaded;\n    const contactId = String(contact && contact.id);\n    const id = sessionId ? `${contactId}-${sessionId}` : contactId;\n    this.contacts[id] = contact;\n    this.messages[id] = messages;\n  }\n\n  @action\n  loadReset({ contact, sessionId }: LoadResetOptions) {\n    const contactId = String(contact && contact.id);\n    const id = sessionId ? `${contactId}-${sessionId}` : contactId;\n    delete this.contacts[id];\n    delete this.messages[id];\n  }\n\n  @computed((that: RecentMessages) => [that.messages])\n  get unreadMessageCounts() {\n    return Object.keys(this.messages).reduce((unreadCounts, contactId) => {\n      unreadCounts[contactId] = this.messages[contactId].reduce(\n        (acc, cur) => acc + (cur.readStatus !== 'Read' ? 1 : 0),\n        0,\n      );\n      return unreadCounts;\n    }, {} as Record<string, number>);\n  }\n\n  get isMessagesLoaded() {\n    return this.messageStatus === MessageStatus.loaded;\n  }\n\n  @proxify\n  async getMessages({\n    currentContact,\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'string'.\n    sessionId = null,\n    fromLocal = false,\n    forceUpdate = false,\n  }: GetMessagesOptions) {\n    // No need to calculate recent messages of the same contact repeatly\n    if (!currentContact) {\n      return;\n    }\n    const contactId = currentContact.id;\n    if (\n      !forceUpdate &&\n      !!this.messages[sessionId ? `${contactId}-${sessionId}` : contactId]\n    ) {\n      return;\n    }\n    this.initLoad();\n    const messages = await this._getRecentMessages(\n      currentContact,\n      this._deps.messageStore.textConversations,\n      fromLocal,\n    );\n    this.loadSuccess({\n      messages,\n      contact: currentContact,\n      sessionId,\n    });\n  }\n\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'string'.\n  cleanUpMessages({ contact, sessionId = null }: CleanUpMessagesOptions) {\n    this.loadReset({\n      contact,\n      sessionId,\n    });\n  }\n\n  /**\n   * Searching for recent messages of specific contact.\n   * @param currentContact - Current contact\n   * @param messages - Messages in messageStore\n   * @param fromLocal - Only get recent messages locally\n   * @param daySpan - Find messages within certain days\n   * @param length - Maximum length of recent messages\n   * @return\n   * @private\n   */\n  async _getRecentMessages(\n    currentContact: Entity,\n    conversations: MessageStoreConversations = [],\n    fromLocal: boolean,\n    daySpan = 60,\n    length = 5,\n  ) {\n    const dateFrom = getDateFrom(daySpan);\n    let recentMessages: (Message | RecentMessage)[] =\n      this._getLocalRecentMessages(\n        currentContact,\n        conversations,\n        dateFrom,\n        length,\n      );\n\n    // If we could not find enough recent messages,\n    // we need to search for messages on server.\n    if (!fromLocal && recentMessages.length < length) {\n      const dateTo =\n        recentMessages.length > 0\n          ? // @ts-expect-error TS(2769): No overload matches this call.\n            new Date(recentMessages[recentMessages.length - 1].creationTime)\n          : undefined;\n\n      try {\n        // This will always be sorted\n        recentMessages = recentMessages.concat(\n          await this._fetchRemoteRecentMessages(\n            currentContact,\n            dateFrom.toISOString(),\n            dateTo && dateTo.toISOString(),\n            length,\n          ),\n        );\n      } catch (error: any /** TODO: confirm with instanceof */) {\n        console.error(error);\n      }\n    }\n\n    recentMessages = dedup(recentMessages);\n    return recentMessages.length > length\n      ? recentMessages.slice(0, length)\n      : recentMessages;\n  }\n\n  /**\n   * Get recent messages from messageStore.\n   */\n  _getLocalRecentMessages(\n    { phoneNumbers }: Entity,\n    conversations: MessageStoreConversations,\n    dateFrom: Date,\n    length: number,\n  ) {\n    // Get all messages related to this contact\n    let recentMessages: Messages = [];\n    let matches;\n    for (let i = conversations.length - 1; i >= 0; i -= 1) {\n      const conversation = conversations[i];\n      const messageList =\n        this._deps.messageStore.conversationStore[\n          // @ts-expect-error TS(2538): Type 'undefined' cannot be used as an index type.\n          conversation.conversationId\n        ] || [];\n      // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n      matches = phoneNumbers.find(filterPhoneNumber(conversation));\n      // Check if message is within certain days\n      // @ts-expect-error TS(2769): No overload matches this call.\n      if (!!matches && new Date(conversation.creationTime) > dateFrom) {\n        recentMessages = recentMessages.concat(messageList);\n      }\n      if (recentMessages.length >= length) break;\n    }\n    return recentMessages.sort(sortByDate).slice(0, length);\n  }\n\n  /**\n   * Fetch recent messages from server by given current contact.\n   */\n  async _fetchRemoteRecentMessages(\n    { phoneNumbers }: Entity,\n    dateFrom: string,\n    dateTo = new Date().toISOString(),\n    length: number,\n  ) {\n    const params = {\n      dateTo,\n      dateFrom,\n      messageType: ['SMS', 'Text', 'Pager'],\n      perPage: length,\n    };\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    const recentMessagesPromise = phoneNumbers.reduce(\n      (acc, { phoneNumber }) => {\n        if (phoneNumber) {\n          const promise = this._fetchMessageList({\n            ...params,\n            phoneNumber,\n          });\n          return acc.concat(promise);\n        }\n        return acc;\n      },\n      [] as (() => Promise<GetMessageList>)[],\n    );\n\n    // TODO: Because we need to navigate to the message page,\n    // So we may need to push new messages to messageStore\n    const allMessages = await concurrentExecute(recentMessagesPromise, 5, {\n      delay: 500,\n    });\n    const messageRecords = flattenToMessageRecords(allMessages);\n    const remoteMessage = markAsRemoteMessage(messageRecords);\n    return sortMessages(remoteMessage);\n  }\n\n  _fetchMessageList(params: FetchMessageListOptions) {\n    return () =>\n      this._deps.client\n        .account()\n        .extension()\n        .messageStore()\n        .list(params) as Promise<GetMessageList>;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,IAAAA,KAAA,GAAAC,OAAA;AAUA,IAAAC,kBAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,GAAA,GAAAH,OAAA;AACA,IAAAI,YAAA,GAAAF,sBAAA,CAAAF,OAAA;AACA,IAAAK,cAAA,GAAAL,OAAA;AACA,IAAAM,QAAA,GAAAN,OAAA;AAYA,IAAAO,cAAA,GAAAP,OAAA;AACA,IAAAQ,qBAAA,GAAAR,OAAA;AAMgC,IAAAS,IAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,OAAA,EAAAC,WAAA,EAAAC,YAAA,EAAAC,YAAA;AAAA,SAAAb,uBAAAc,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAAA,SAAAE,QAAAF,CAAA,EAAAG,CAAA,QAAAC,CAAA,GAAAC,MAAA,CAAAC,IAAA,CAAAN,CAAA,OAAAK,MAAA,CAAAE,qBAAA,QAAAC,CAAA,GAAAH,MAAA,CAAAE,qBAAA,CAAAP,CAAA,GAAAG,CAAA,KAAAK,CAAA,GAAAA,CAAA,CAAAC,MAAA,WAAAN,CAAA,WAAAE,MAAA,CAAAK,wBAAA,CAAAV,CAAA,EAAAG,CAAA,EAAAQ,UAAA,OAAAP,CAAA,CAAAQ,IAAA,CAAAC,KAAA,CAAAT,CAAA,EAAAI,CAAA,YAAAJ,CAAA;AAAA,SAAAU,cAAAd,CAAA,aAAAG,CAAA,MAAAA,CAAA,GAAAY,SAAA,CAAAC,MAAA,EAAAb,CAAA,UAAAC,CAAA,WAAAW,SAAA,CAAAZ,CAAA,IAAAY,SAAA,CAAAZ,CAAA,QAAAA,CAAA,OAAAD,OAAA,CAAAG,MAAA,CAAAD,CAAA,OAAAa,OAAA,WAAAd,CAAA,IAAAe,eAAA,CAAAlB,CAAA,EAAAG,CAAA,EAAAC,CAAA,CAAAD,CAAA,SAAAE,MAAA,CAAAc,yBAAA,GAAAd,MAAA,CAAAe,gBAAA,CAAApB,CAAA,EAAAK,MAAA,CAAAc,yBAAA,CAAAf,CAAA,KAAAF,OAAA,CAAAG,MAAA,CAAAD,CAAA,GAAAa,OAAA,WAAAd,CAAA,IAAAE,MAAA,CAAAgB,cAAA,CAAArB,CAAA,EAAAG,CAAA,EAAAE,MAAA,CAAAK,wBAAA,CAAAN,CAAA,EAAAD,CAAA,iBAAAH,CAAA;AAAA,SAAAkB,gBAAAlB,CAAA,EAAAG,CAAA,EAAAC,CAAA,YAAAD,CAAA,GAAAmB,cAAA,CAAAnB,CAAA,MAAAH,CAAA,GAAAK,MAAA,CAAAgB,cAAA,CAAArB,CAAA,EAAAG,CAAA,IAAAoB,KAAA,EAAAnB,CAAA,EAAAO,UAAA,MAAAa,YAAA,MAAAC,QAAA,UAAAzB,CAAA,CAAAG,CAAA,IAAAC,CAAA,EAAAJ,CAAA;AAAA,SAAA0B,aAAA,IAjChC,uKAAA1B,CAAA,EAAAI,CAAA,EAAAD,CAAA,wBAAAwB,MAAA,GAAAA,MAAA,OAAAC,CAAA,GAAAzB,CAAA,CAAA0B,QAAA,kBAAArB,CAAA,GAAAL,CAAA,CAAA2B,WAAA,8BAAAC,EAAA5B,CAAA,EAAAyB,CAAA,EAAApB,CAAA,EAAAuB,CAAA,QAAAC,CAAA,GAAAJ,CAAA,IAAAA,CAAA,CAAAK,SAAA,YAAAC,SAAA,GAAAN,CAAA,GAAAM,SAAA,EAAAC,CAAA,GAAA9B,MAAA,CAAA+B,MAAA,CAAAJ,CAAA,CAAAC,SAAA,UAAAI,mBAAA,CAAAF,CAAA,uBAAAhC,CAAA,EAAAyB,CAAA,EAAApB,CAAA,QAAAuB,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAG,CAAA,MAAAC,CAAA,GAAA/B,CAAA,QAAAgC,CAAA,OAAAC,CAAA,KAAAF,CAAA,KAAAX,CAAA,KAAAc,CAAA,EAAA1C,CAAA,EAAA2C,CAAA,EAAAC,CAAA,EAAAN,CAAA,EAAAM,CAAA,CAAAC,IAAA,CAAA7C,CAAA,MAAA4C,CAAA,WAAAA,EAAAxC,CAAA,EAAAD,CAAA,WAAA4B,CAAA,GAAA3B,CAAA,EAAA4B,CAAA,MAAAG,CAAA,GAAAnC,CAAA,EAAAyC,CAAA,CAAAb,CAAA,GAAAzB,CAAA,EAAAwC,CAAA,gBAAAC,EAAAzC,CAAA,EAAAyB,CAAA,SAAAI,CAAA,GAAA7B,CAAA,EAAAgC,CAAA,GAAAP,CAAA,EAAAxB,CAAA,OAAAoC,CAAA,IAAAF,CAAA,KAAA9B,CAAA,IAAAJ,CAAA,GAAAmC,CAAA,CAAAvB,MAAA,EAAAZ,CAAA,UAAAI,CAAA,EAAAuB,CAAA,GAAAQ,CAAA,CAAAnC,CAAA,GAAAwC,CAAA,GAAAH,CAAA,CAAAF,CAAA,EAAAO,CAAA,GAAAf,CAAA,KAAA5B,CAAA,QAAAK,CAAA,GAAAsC,CAAA,KAAAlB,CAAA,MAAAO,CAAA,GAAAJ,CAAA,EAAAC,CAAA,GAAAD,CAAA,YAAAC,CAAA,WAAAD,CAAA,MAAAA,CAAA,MAAA/B,CAAA,IAAA+B,CAAA,OAAAa,CAAA,MAAApC,CAAA,GAAAL,CAAA,QAAAyC,CAAA,GAAAb,CAAA,QAAAC,CAAA,MAAAS,CAAA,CAAAC,CAAA,GAAAd,CAAA,EAAAa,CAAA,CAAAb,CAAA,GAAAG,CAAA,OAAAa,CAAA,GAAAE,CAAA,KAAAtC,CAAA,GAAAL,CAAA,QAAA4B,CAAA,MAAAH,CAAA,IAAAA,CAAA,GAAAkB,CAAA,MAAAf,CAAA,MAAA5B,CAAA,EAAA4B,CAAA,MAAAH,CAAA,EAAAa,CAAA,CAAAb,CAAA,GAAAkB,CAAA,EAAAd,CAAA,cAAAxB,CAAA,IAAAL,CAAA,aAAAwC,CAAA,QAAAH,CAAA,OAAAZ,CAAA,qBAAApB,CAAA,EAAA+B,CAAA,EAAAO,CAAA,QAAAR,CAAA,YAAAS,SAAA,uCAAAP,CAAA,UAAAD,CAAA,IAAAK,CAAA,CAAAL,CAAA,EAAAO,CAAA,GAAAd,CAAA,GAAAO,CAAA,EAAAJ,CAAA,GAAAW,CAAA,GAAA1C,CAAA,GAAA4B,CAAA,OAAAhC,CAAA,GAAAmC,CAAA,MAAAK,CAAA,KAAAT,CAAA,KAAAC,CAAA,GAAAA,CAAA,QAAAA,CAAA,SAAAS,CAAA,CAAAb,CAAA,QAAAgB,CAAA,CAAAZ,CAAA,EAAAG,CAAA,KAAAM,CAAA,CAAAb,CAAA,GAAAO,CAAA,GAAAM,CAAA,CAAAC,CAAA,GAAAP,CAAA,aAAAG,CAAA,MAAAP,CAAA,QAAAC,CAAA,KAAAxB,CAAA,YAAAJ,CAAA,GAAA2B,CAAA,CAAAvB,CAAA,WAAAJ,CAAA,GAAAA,CAAA,CAAA4C,IAAA,CAAAjB,CAAA,EAAAI,CAAA,UAAAY,SAAA,2CAAA3C,CAAA,CAAA6C,IAAA,SAAA7C,CAAA,EAAA+B,CAAA,GAAA/B,CAAA,CAAAmB,KAAA,EAAAS,CAAA,SAAAA,CAAA,oBAAAA,CAAA,KAAA5B,CAAA,GAAA2B,CAAA,eAAA3B,CAAA,CAAA4C,IAAA,CAAAjB,CAAA,GAAAC,CAAA,SAAAG,CAAA,GAAAY,SAAA,uCAAAvC,CAAA,gBAAAwB,CAAA,OAAAD,CAAA,GAAA/B,CAAA,cAAAI,CAAA,IAAAoC,CAAA,GAAAC,CAAA,CAAAb,CAAA,QAAAO,CAAA,GAAAhC,CAAA,CAAA6C,IAAA,CAAApB,CAAA,EAAAa,CAAA,OAAAE,CAAA,kBAAAvC,CAAA,IAAA2B,CAAA,GAAA/B,CAAA,EAAAgC,CAAA,MAAAG,CAAA,GAAA/B,CAAA,cAAAkC,CAAA,mBAAAf,KAAA,EAAAnB,CAAA,EAAA6C,IAAA,EAAAT,CAAA,SAAArC,CAAA,EAAAK,CAAA,EAAAuB,CAAA,QAAAI,CAAA,QAAAQ,CAAA,gBAAAT,UAAA,cAAAgB,kBAAA,cAAAC,2BAAA,KAAA/C,CAAA,GAAAC,MAAA,CAAA+C,cAAA,MAAApB,CAAA,MAAAJ,CAAA,IAAAxB,CAAA,CAAAA,CAAA,IAAAwB,CAAA,SAAAS,mBAAA,CAAAjC,CAAA,OAAAwB,CAAA,iCAAAxB,CAAA,GAAA+B,CAAA,GAAAgB,0BAAA,CAAAlB,SAAA,GAAAC,SAAA,CAAAD,SAAA,GAAA5B,MAAA,CAAA+B,MAAA,CAAAJ,CAAA,YAAAM,EAAAtC,CAAA,WAAAK,MAAA,CAAAgD,cAAA,GAAAhD,MAAA,CAAAgD,cAAA,CAAArD,CAAA,EAAAmD,0BAAA,KAAAnD,CAAA,CAAAsD,SAAA,GAAAH,0BAAA,EAAAd,mBAAA,CAAArC,CAAA,EAAAQ,CAAA,yBAAAR,CAAA,CAAAiC,SAAA,GAAA5B,MAAA,CAAA+B,MAAA,CAAAD,CAAA,GAAAnC,CAAA,WAAAkD,iBAAA,CAAAjB,SAAA,GAAAkB,0BAAA,EAAAd,mBAAA,CAAAF,CAAA,iBAAAgB,0BAAA,GAAAd,mBAAA,CAAAc,0BAAA,iBAAAD,iBAAA,GAAAA,iBAAA,CAAAK,WAAA,wBAAAlB,mBAAA,CAAAc,0BAAA,EAAA3C,CAAA,wBAAA6B,mBAAA,CAAAF,CAAA,GAAAE,mBAAA,CAAAF,CAAA,EAAA3B,CAAA,gBAAA6B,mBAAA,CAAAF,CAAA,EAAAP,CAAA,iCAAAS,mBAAA,CAAAF,CAAA,8DAAAT,YAAA,YAAAA,aAAA,aAAA8B,CAAA,EAAAzB,CAAA,EAAA0B,CAAA,EAAAnB,CAAA;AAAA,SAAAD,oBAAArC,CAAA,EAAAG,CAAA,EAAAyB,CAAA,EAAAxB,CAAA,QAAA2B,CAAA,GAAA1B,MAAA,CAAAgB,cAAA,QAAAU,CAAA,uBAAA/B,CAAA,IAAA+B,CAAA,QAAAM,mBAAA,YAAAqB,mBAAA1D,CAAA,EAAAG,CAAA,EAAAyB,CAAA,EAAAxB,CAAA,aAAAI,EAAAL,CAAA,EAAAyB,CAAA,IAAAS,mBAAA,CAAArC,CAAA,EAAAG,CAAA,YAAAH,CAAA,gBAAA2D,OAAA,CAAAxD,CAAA,EAAAyB,CAAA,EAAA5B,CAAA,SAAAG,CAAA,GAAA4B,CAAA,GAAAA,CAAA,CAAA/B,CAAA,EAAAG,CAAA,IAAAoB,KAAA,EAAAK,CAAA,EAAAjB,UAAA,GAAAP,CAAA,EAAAoB,YAAA,GAAApB,CAAA,EAAAqB,QAAA,GAAArB,CAAA,MAAAJ,CAAA,CAAAG,CAAA,IAAAyB,CAAA,IAAApB,CAAA,aAAAA,CAAA,cAAAA,CAAA,mBAAA6B,mBAAA,CAAArC,CAAA,EAAAG,CAAA,EAAAyB,CAAA,EAAAxB,CAAA;AAAA,SAAAwD,mBAAAhC,CAAA,EAAAxB,CAAA,EAAAJ,CAAA,EAAAG,CAAA,EAAAK,CAAA,EAAAmC,CAAA,EAAAX,CAAA,cAAAD,CAAA,GAAAH,CAAA,CAAAe,CAAA,EAAAX,CAAA,GAAAG,CAAA,GAAAJ,CAAA,CAAAR,KAAA,WAAAK,CAAA,gBAAA5B,CAAA,CAAA4B,CAAA,KAAAG,CAAA,CAAAkB,IAAA,GAAA7C,CAAA,CAAA+B,CAAA,IAAA0B,OAAA,CAAAC,OAAA,CAAA3B,CAAA,EAAA4B,IAAA,CAAA5D,CAAA,EAAAK,CAAA;AAAA,SAAAwD,kBAAApC,CAAA,6BAAAxB,CAAA,SAAAJ,CAAA,GAAAe,SAAA,aAAA8C,OAAA,WAAA1D,CAAA,EAAAK,CAAA,QAAAmC,CAAA,GAAAf,CAAA,CAAAf,KAAA,CAAAT,CAAA,EAAAJ,CAAA,YAAAiE,MAAArC,CAAA,IAAAgC,kBAAA,CAAAjB,CAAA,EAAAxC,CAAA,EAAAK,CAAA,EAAAyD,KAAA,EAAAC,MAAA,UAAAtC,CAAA,cAAAsC,OAAAtC,CAAA,IAAAgC,kBAAA,CAAAjB,CAAA,EAAAxC,CAAA,EAAAK,CAAA,EAAAyD,KAAA,EAAAC,MAAA,WAAAtC,CAAA,KAAAqC,KAAA;AAAA,SAAAE,2BAAAnE,CAAA,EAAA+B,CAAA,EAAA5B,CAAA,EAAA2C,CAAA,IAAA3C,CAAA,IAAAE,MAAA,CAAAgB,cAAA,CAAArB,CAAA,EAAA+B,CAAA,IAAApB,UAAA,EAAAR,CAAA,CAAAQ,UAAA,EAAAa,YAAA,EAAArB,CAAA,CAAAqB,YAAA,EAAAC,QAAA,EAAAtB,CAAA,CAAAsB,QAAA,EAAAF,KAAA,EAAApB,CAAA,CAAAiE,WAAA,GAAAjE,CAAA,CAAAiE,WAAA,CAAApB,IAAA,CAAAF,CAAA;AAAA,SAAAuB,gBAAA1B,CAAA,EAAAf,CAAA,UAAAe,CAAA,YAAAf,CAAA,aAAAmB,SAAA;AAAA,SAAAuB,kBAAAtE,CAAA,EAAAG,CAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAD,CAAA,CAAAa,MAAA,EAAAZ,CAAA,UAAAI,CAAA,GAAAL,CAAA,CAAAC,CAAA,GAAAI,CAAA,CAAAG,UAAA,GAAAH,CAAA,CAAAG,UAAA,QAAAH,CAAA,CAAAgB,YAAA,kBAAAhB,CAAA,KAAAA,CAAA,CAAAiB,QAAA,QAAApB,MAAA,CAAAgB,cAAA,CAAArB,CAAA,EAAAsB,cAAA,CAAAd,CAAA,CAAA+D,GAAA,GAAA/D,CAAA;AAAA,SAAAgE,aAAAxE,CAAA,EAAAG,CAAA,EAAAC,CAAA,WAAAD,CAAA,IAAAmE,iBAAA,CAAAtE,CAAA,CAAAiC,SAAA,EAAA9B,CAAA,GAAAC,CAAA,IAAAkE,iBAAA,CAAAtE,CAAA,EAAAI,CAAA,GAAAC,MAAA,CAAAgB,cAAA,CAAArB,CAAA,iBAAAyB,QAAA,SAAAzB,CAAA;AAAA,SAAAsB,eAAAlB,CAAA,QAAA2B,CAAA,GAAA0C,YAAA,CAAArE,CAAA,gCAAAsE,OAAA,CAAA3C,CAAA,IAAAA,CAAA,GAAAA,CAAA;AAAA,SAAA0C,aAAArE,CAAA,EAAAD,CAAA,oBAAAuE,OAAA,CAAAtE,CAAA,MAAAA,CAAA,SAAAA,CAAA,MAAAJ,CAAA,GAAAI,CAAA,CAAAuB,MAAA,CAAAgD,WAAA,kBAAA3E,CAAA,QAAA+B,CAAA,GAAA/B,CAAA,CAAAgD,IAAA,CAAA5C,CAAA,EAAAD,CAAA,gCAAAuE,OAAA,CAAA3C,CAAA,UAAAA,CAAA,YAAAgB,SAAA,yEAAA5C,CAAA,GAAAyE,MAAA,GAAAC,MAAA,EAAAzE,CAAA;AAAA,SAAA0E,WAAA1E,CAAA,EAAAI,CAAA,EAAAR,CAAA,WAAAQ,CAAA,GAAAuE,eAAA,CAAAvE,CAAA,GAAAwE,0BAAA,CAAA5E,CAAA,EAAA6E,yBAAA,KAAAC,OAAA,CAAAC,SAAA,CAAA3E,CAAA,EAAAR,CAAA,QAAA+E,eAAA,CAAA3E,CAAA,EAAAgF,WAAA,IAAA5E,CAAA,CAAAK,KAAA,CAAAT,CAAA,EAAAJ,CAAA;AAAA,SAAAgF,2BAAA5E,CAAA,EAAAJ,CAAA,QAAAA,CAAA,iBAAA0E,OAAA,CAAA1E,CAAA,0BAAAA,CAAA,UAAAA,CAAA,iBAAAA,CAAA,YAAA+C,SAAA,qEAAAsC,sBAAA,CAAAjF,CAAA;AAAA,SAAAiF,uBAAArF,CAAA,mBAAAA,CAAA,YAAAsF,cAAA,sEAAAtF,CAAA;AAAA,SAAAiF,0BAAA,cAAA7E,CAAA,IAAAmF,OAAA,CAAAtD,SAAA,CAAAuD,OAAA,CAAAxC,IAAA,CAAAkC,OAAA,CAAAC,SAAA,CAAAI,OAAA,iCAAAnF,CAAA,aAAA6E,yBAAA,YAAAA,0BAAA,aAAA7E,CAAA;AAAA,SAAA2E,gBAAA3E,CAAA,WAAA2E,eAAA,GAAA1E,MAAA,CAAAgD,cAAA,GAAAhD,MAAA,CAAA+C,cAAA,CAAAP,IAAA,eAAAzC,CAAA,WAAAA,CAAA,CAAAkD,SAAA,IAAAjD,MAAA,CAAA+C,cAAA,CAAAhD,CAAA,MAAA2E,eAAA,CAAA3E,CAAA;AAAA,SAAAqF,UAAArF,CAAA,EAAAJ,CAAA,6BAAAA,CAAA,aAAAA,CAAA,YAAA+C,SAAA,wDAAA3C,CAAA,CAAA6B,SAAA,GAAA5B,MAAA,CAAA+B,MAAA,CAAApC,CAAA,IAAAA,CAAA,CAAAiC,SAAA,IAAAmD,WAAA,IAAA7D,KAAA,EAAAnB,CAAA,EAAAqB,QAAA,MAAAD,YAAA,WAAAnB,MAAA,CAAAgB,cAAA,CAAAjB,CAAA,iBAAAqB,QAAA,SAAAzB,CAAA,IAAA0F,eAAA,CAAAtF,CAAA,EAAAJ,CAAA;AAAA,SAAA0F,gBAAAtF,CAAA,EAAAJ,CAAA,WAAA0F,eAAA,GAAArF,MAAA,CAAAgD,cAAA,GAAAhD,MAAA,CAAAgD,cAAA,CAAAR,IAAA,eAAAzC,CAAA,EAAAJ,CAAA,WAAAI,CAAA,CAAAkD,SAAA,GAAAtD,CAAA,EAAAI,CAAA,KAAAsF,eAAA,CAAAtF,CAAA,EAAAJ,CAAA;AAAA,SAAA2F,0BAAA5D,CAAA,EAAA/B,CAAA,EAAAG,CAAA,EAAAyB,CAAA,EAAAkB,CAAA,QAAAH,CAAA,cAAAtC,MAAA,CAAAC,IAAA,CAAAsB,CAAA,EAAAX,OAAA,WAAAc,CAAA,IAAAY,CAAA,CAAAZ,CAAA,IAAAH,CAAA,CAAAG,CAAA,OAAAY,CAAA,CAAAhC,UAAA,KAAAgC,CAAA,CAAAhC,UAAA,EAAAgC,CAAA,CAAAnB,YAAA,KAAAmB,CAAA,CAAAnB,YAAA,cAAAmB,CAAA,IAAAA,CAAA,CAAAyB,WAAA,MAAAzB,CAAA,CAAAlB,QAAA,QAAAkB,CAAA,GAAAxC,CAAA,CAAAyF,KAAA,GAAAC,OAAA,GAAAC,MAAA,WAAA3F,CAAA,EAAAyB,CAAA,WAAAA,CAAA,CAAAG,CAAA,EAAA/B,CAAA,EAAAG,CAAA,KAAAA,CAAA,KAAAwC,CAAA,GAAAG,CAAA,eAAAH,CAAA,CAAAyB,WAAA,KAAAzB,CAAA,CAAApB,KAAA,GAAAoB,CAAA,CAAAyB,WAAA,GAAAzB,CAAA,CAAAyB,WAAA,CAAApB,IAAA,CAAAF,CAAA,YAAAH,CAAA,CAAAyB,WAAA,uBAAAzB,CAAA,CAAAyB,WAAA,IAAA/D,MAAA,CAAAgB,cAAA,CAAAU,CAAA,EAAA/B,CAAA,EAAA2C,CAAA,WAAAA,CAAA;AAAA,SAAAoD,0BAAA5F,CAAA,EAAAH,CAAA,UAAAgG,KAAA;AAmCA;AACA;AACA;AAFA,IAOaC,cAAc,GAAAC,OAAA,CAAAD,cAAA,IAAAxG,IAAA,GAJ1B,IAAA0G,UAAM,EAAC;EACNC,IAAI,EAAE,gBAAgB;EACtBC,IAAI,EAAE,CAAC,QAAQ,EAAE,cAAc;AACjC,CAAC,CAAC,EAAA3G,KAAA,GA4DC,IAAA4G,cAAQ,EAAC,UAACC,IAAoB;EAAA,OAAK,CAACA,IAAI,CAACC,QAAQ,CAAC;AAAA,EAAC,EAAA/G,IAAA,CAAAE,MAAA,IAAAC,OAAA,0BAAA6G,UAAA;EA1DpD,SAAAR,eAAYI,IAAU,EAAE;IAAA,IAAAK,KAAA;IAAArC,eAAA,OAAA4B,cAAA;IACtBS,KAAA,GAAA5B,UAAA,OAAAmB,cAAA,GAAM;MACJI,IAAI,EAAJA;IACF,CAAC;IAAElC,0BAAA,CAAAuC,KAAA,cAAA7G,WAAA,EAAA6G,KAAA;IAAAvC,0BAAA,CAAAuC,KAAA,cAAA5G,YAAA,EAAA4G,KAAA;IAAAvC,0BAAA,CAAAuC,KAAA,mBAAA3G,YAAA,EAAA2G,KAAA;IAAA,OAAAA,KAAA;EACL;EAACjB,SAAA,CAAAQ,cAAA,EAAAQ,UAAA;EAAA,OAAAjC,YAAA,CAAAyB,cAAA;IAAA1B,GAAA;IAAAhD,KAAA,EAED,SAASoF,UAAUA,CAAA,EAAG;MAAA,IAAAC,MAAA;MACpB,IAAAC,WAAK,EACH,IAAI,EACJ;QAAA,OAAMD,MAAI,CAACE,KAAK,CAACC,YAAY,CAACC,SAAS;MAAA,GACvC,YAAM;QACJ,IAAIJ,MAAI,CAACK,KAAK,IAAI5G,MAAM,CAACC,IAAI,CAACsG,MAAI,CAACJ,QAAQ,CAAC,CAACxF,MAAM,GAAG,CAAC,EAAE;UACvD,SAAAkG,EAAA,MAAAC,YAAA,GAAkB9G,MAAM,CAACC,IAAI,CAACsG,MAAI,CAACQ,QAAQ,CAAC,EAAAF,EAAA,GAAAC,YAAA,CAAAnG,MAAA,EAAAkG,EAAA,IAAE;YAAzC,IAAM3C,GAAG,GAAA4C,YAAA,CAAAD,EAAA;YACZN,MAAI,CAACS,WAAW,CAAC;cACfC,cAAc,EAAEV,MAAI,CAACQ,QAAQ,CAAC7C,GAAG,CAAC;cAClC;cACAgD,SAAS,EAAEhD,GAAG,CAACiD,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAGjD,GAAG,CAACkD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;cAC3DC,SAAS,EAAE,KAAK;cAChBC,WAAW,EAAE;YACf,CAAC,CAAC;UACJ;QACF;MACF,CACF,CAAC;IACH;EAAC;IAAApD,GAAA;IAAAhD,KAAA,EAYD,SACAqG,QAAQA,CAAA,EAAG;MACT,IAAI,CAACC,aAAa,GAAGC,4BAAa,CAACC,OAAO;IAC5C;EAAC;IAAAxD,GAAA;IAAAhD,KAAA,EAED,SACAyG,WAAWA,CAAAC,IAAA,EAAuD;MAAA,IAApDC,OAAO,GAAAD,IAAA,CAAPC,OAAO;QAAE1B,QAAQ,GAAAyB,IAAA,CAARzB,QAAQ;QAAEe,SAAS,GAAAU,IAAA,CAATV,SAAS;MACxC,IAAI,CAACM,aAAa,GAAGC,4BAAa,CAACK,MAAM;MACzC,IAAMC,SAAS,GAAGxD,MAAM,CAACsD,OAAO,IAAIA,OAAO,CAACG,EAAE,CAAC;MAC/C,IAAMA,EAAE,GAAGd,SAAS,MAAAe,MAAA,CAAMF,SAAS,OAAAE,MAAA,CAAIf,SAAS,IAAKa,SAAS;MAC9D,IAAI,CAAChB,QAAQ,CAACiB,EAAE,CAAC,GAAGH,OAAO;MAC3B,IAAI,CAAC1B,QAAQ,CAAC6B,EAAE,CAAC,GAAG7B,QAAQ;IAC9B;EAAC;IAAAjC,GAAA;IAAAhD,KAAA,EAED,SACAgH,SAASA,CAAAC,KAAA,EAA2C;MAAA,IAAxCN,OAAO,GAAAM,KAAA,CAAPN,OAAO;QAAEX,SAAS,GAAAiB,KAAA,CAATjB,SAAS;MAC5B,IAAMa,SAAS,GAAGxD,MAAM,CAACsD,OAAO,IAAIA,OAAO,CAACG,EAAE,CAAC;MAC/C,IAAMA,EAAE,GAAGd,SAAS,MAAAe,MAAA,CAAMF,SAAS,OAAAE,MAAA,CAAIf,SAAS,IAAKa,SAAS;MAC9D,OAAO,IAAI,CAAChB,QAAQ,CAACiB,EAAE,CAAC;MACxB,OAAO,IAAI,CAAC7B,QAAQ,CAAC6B,EAAE,CAAC;IAC1B;EAAC;IAAA9D,GAAA;IAAAkE,GAAA,EAED,SAAAA,IAAA,EAC0B;MAAA,IAAAC,MAAA;MACxB,OAAOrI,MAAM,CAACC,IAAI,CAAC,IAAI,CAACkG,QAAQ,CAAC,CAACV,MAAM,CAAC,UAAC6C,YAAY,EAAEP,SAAS,EAAK;QACpEO,YAAY,CAACP,SAAS,CAAC,GAAGM,MAAI,CAAClC,QAAQ,CAAC4B,SAAS,CAAC,CAACtC,MAAM,CACvD,UAAC8C,GAAG,EAAEC,GAAG;UAAA,OAAKD,GAAG,IAAIC,GAAG,CAACC,UAAU,KAAK,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;QAAA,GACvD,CACF,CAAC;QACD,OAAOH,YAAY;MACrB,CAAC,EAAE,CAAC,CAA2B,CAAC;IAClC;EAAC;IAAApE,GAAA;IAAAkE,GAAA,EAED,SAAAA,IAAA,EAAuB;MACrB,OAAO,IAAI,CAACZ,aAAa,KAAKC,4BAAa,CAACK,MAAM;IACpD;EAAC;IAAA5D,GAAA;IAAAhD,KAAA;MAAA,IAAAwH,YAAA,GAAA/E,iBAAA,cAAAtC,YAAA,GAAA+B,CAAA,CAED,SAAAuF,QAAAC,KAAA;QAAA,IAAA3B,cAAA,EAAA4B,eAAA,EAAA3B,SAAA,EAAA4B,eAAA,EAAAzB,SAAA,EAAA0B,iBAAA,EAAAzB,WAAA,EAAAS,SAAA,EAAA5B,QAAA;QAAA,OAAA9E,YAAA,GAAA8B,CAAA,WAAA6F,QAAA;UAAA,kBAAAA,QAAA,CAAAzH,CAAA;YAAA;cAEE0F,cAAc,GAAA2B,KAAA,CAAd3B,cAAc,EAAA4B,eAAA,GAAAD,KAAA,CAEd1B,SAAS,EAATA,SAAS,GAAA2B,eAAA,cAAG,IAAI,GAAAA,eAAA,EAAAC,eAAA,GAAAF,KAAA,CAChBvB,SAAS,EAATA,SAAS,GAAAyB,eAAA,cAAG,KAAK,GAAAA,eAAA,EAAAC,iBAAA,GAAAH,KAAA,CACjBtB,WAAW,EAAXA,WAAW,GAAAyB,iBAAA,cAAG,KAAK,GAAAA,iBAAA;cAAA,IAGd9B,cAAc;gBAAA+B,QAAA,CAAAzH,CAAA;gBAAA;cAAA;cAAA,OAAAyH,QAAA,CAAA1G,CAAA;YAAA;cAGbyF,SAAS,GAAGd,cAAc,CAACe,EAAE;cAAA,MAEjC,CAACV,WAAW,IACZ,CAAC,CAAC,IAAI,CAACnB,QAAQ,CAACe,SAAS,MAAAe,MAAA,CAAMF,SAAS,OAAAE,MAAA,CAAIf,SAAS,IAAKa,SAAS,CAAC;gBAAAiB,QAAA,CAAAzH,CAAA;gBAAA;cAAA;cAAA,OAAAyH,QAAA,CAAA1G,CAAA;YAAA;cAItE,IAAI,CAACiF,QAAQ,CAAC,CAAC;cAACyB,QAAA,CAAAzH,CAAA;cAAA,OACO,IAAI,CAAC0H,kBAAkB,CAC5ChC,cAAc,EACd,IAAI,CAACR,KAAK,CAACC,YAAY,CAACwC,iBAAiB,EACzC7B,SACF,CAAC;YAAA;cAJKlB,QAAQ,GAAA6C,QAAA,CAAA3G,CAAA;cAKd,IAAI,CAACsF,WAAW,CAAC;gBACfxB,QAAQ,EAARA,QAAQ;gBACR0B,OAAO,EAAEZ,cAAc;gBACvBC,SAAS,EAATA;cACF,CAAC,CAAC;YAAC;cAAA,OAAA8B,QAAA,CAAA1G,CAAA;UAAA;QAAA,GAAAqG,OAAA;MAAA,CACJ;MAAA,SA7BK3B,WAAWA,CAAAmC,EAAA;QAAA,OAAAT,YAAA,CAAAlI,KAAA,OAAAE,SAAA;MAAA;MAAA,OAAXsG,WAAW;IAAA,IA+BjB;EAAA;IAAA9C,GAAA;IAAAhD,KAAA,EACA,SAAAkI,eAAeA,CAAAC,KAAA,EAAwD;MAAA,IAArDxB,OAAO,GAAAwB,KAAA,CAAPxB,OAAO;QAAAyB,eAAA,GAAAD,KAAA,CAAEnC,SAAS;QAATA,SAAS,GAAAoC,eAAA,cAAG,IAAI,GAAAA,eAAA;MACzC,IAAI,CAACpB,SAAS,CAAC;QACbL,OAAO,EAAPA,OAAO;QACPX,SAAS,EAATA;MACF,CAAC,CAAC;IACJ;;IAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EATE;IAAAhD,GAAA;IAAAhD,KAAA;MAAA,IAAAqI,mBAAA,GAAA5F,iBAAA,cAAAtC,YAAA,GAAA+B,CAAA,CAUA,SAAAoG,SACEvC,cAAsB;QAAA,IAAAwC,aAAA;UAAApC,SAAA;UAAAqC,OAAA;UAAA/I,MAAA;UAAAgJ,QAAA;UAAAC,cAAA;UAAAC,MAAA;UAAAC,MAAA,GAAApJ,SAAA;UAAAqJ,EAAA;UAAAC,GAAA;QAAA,OAAA3I,YAAA,GAAA8B,CAAA,WAAA8G,SAAA;UAAA,kBAAAA,SAAA,CAAA/H,CAAA,GAAA+H,SAAA,CAAA1I,CAAA;YAAA;cACtBkI,aAAwC,GAAAK,MAAA,CAAAnJ,MAAA,QAAAmJ,MAAA,QAAAI,SAAA,GAAAJ,MAAA,MAAG,EAAE;cAC7CzC,SAAkB,GAAAyC,MAAA,CAAAnJ,MAAA,OAAAmJ,MAAA,MAAAI,SAAA;cAClBR,OAAO,GAAAI,MAAA,CAAAnJ,MAAA,QAAAmJ,MAAA,QAAAI,SAAA,GAAAJ,MAAA,MAAG,EAAE;cACZnJ,MAAM,GAAAmJ,MAAA,CAAAnJ,MAAA,QAAAmJ,MAAA,QAAAI,SAAA,GAAAJ,MAAA,MAAG,CAAC;cAEJH,QAAQ,GAAG,IAAAQ,uBAAW,EAACT,OAAO,CAAC;cACjCE,cAA2C,GAC7C,IAAI,CAACQ,uBAAuB,CAC1BnD,cAAc,EACdwC,aAAa,EACbE,QAAQ,EACRhJ,MACF,CAAC,EAEH;cACA;cAAA,MACI,CAAC0G,SAAS,IAAIuC,cAAc,CAACjJ,MAAM,GAAGA,MAAM;gBAAAsJ,SAAA,CAAA1I,CAAA;gBAAA;cAAA;cACxCsI,MAAM,GACVD,cAAc,CAACjJ,MAAM,GAAG,CAAC;cACrB;cACA,IAAI0J,IAAI,CAACT,cAAc,CAACA,cAAc,CAACjJ,MAAM,GAAG,CAAC,CAAC,CAAC2J,YAAY,CAAC,GAChEJ,SAAS;cAAAD,SAAA,CAAA/H,CAAA;cAAA6H,EAAA,GAIIH,cAAc;cAAAK,SAAA,CAAA1I,CAAA;cAAA,OACvB,IAAI,CAACgJ,0BAA0B,CACnCtD,cAAc,EACd0C,QAAQ,CAACa,WAAW,CAAC,CAAC,EACtBX,MAAM,IAAIA,MAAM,CAACW,WAAW,CAAC,CAAC,EAC9B7J,MACF,CAAC;YAAA;cANHiJ,cAAc,GAAAG,EAAA,CAAkB9B,MAAM,CAAAtF,IAAA,CAAAoH,EAAA,EAAAE,SAAA,CAAA5H,CAAA;cAAA4H,SAAA,CAAA1I,CAAA;cAAA;YAAA;cAAA0I,SAAA,CAAA/H,CAAA;cAAA8H,GAAA,GAAAC,SAAA,CAAA5H,CAAA;cAStCoI,OAAO,CAACC,KAAK,CAAAV,GAAM,CAAC;YAAC;cAIzBJ,cAAc,GAAG,IAAAe,2BAAK,EAACf,cAAc,CAAC;cAAC,OAAAK,SAAA,CAAA3H,CAAA,IAChCsH,cAAc,CAACjJ,MAAM,GAAGA,MAAM,GACjCiJ,cAAc,CAACrE,KAAK,CAAC,CAAC,EAAE5E,MAAM,CAAC,GAC/BiJ,cAAc;UAAA;QAAA,GAAAJ,QAAA;MAAA,CACnB;MAAA,SA5CKP,kBAAkBA,CAAA2B,GAAA;QAAA,OAAArB,mBAAA,CAAA/I,KAAA,OAAAE,SAAA;MAAA;MAAA,OAAlBuI,kBAAkB;IAAA;IA8CxB;AACF;AACA;IAFE;EAAA;IAAA/E,GAAA;IAAAhD,KAAA,EAGA,SAAAkJ,uBAAuBA,CAAAS,KAAA,EAErBpB,aAAwC,EACxCE,QAAc,EACdhJ,MAAc,EACd;MAAA,IAJEmK,YAAY,GAAAD,KAAA,CAAZC,YAAY;MAKd;MACA,IAAIlB,cAAwB,GAAG,EAAE;MACjC,IAAImB,OAAO;MACX,KAAK,IAAIrJ,CAAC,GAAG+H,aAAa,CAAC9I,MAAM,GAAG,CAAC,EAAEe,CAAC,IAAI,CAAC,EAAEA,CAAC,IAAI,CAAC,EAAE;QACrD,IAAMsJ,YAAY,GAAGvB,aAAa,CAAC/H,CAAC,CAAC;QACrC,IAAMuJ,WAAW,GACf,IAAI,CAACxE,KAAK,CAACC,YAAY,CAACwE,iBAAiB;QACvC;QACAF,YAAY,CAACG,cAAc,CAC5B,IAAI,EAAE;QACT;QACAJ,OAAO,GAAGD,YAAY,CAACM,IAAI,CAAC,IAAAC,uCAAiB,EAACL,YAAY,CAAC,CAAC;QAC5D;QACA;QACA,IAAI,CAAC,CAACD,OAAO,IAAI,IAAIV,IAAI,CAACW,YAAY,CAACV,YAAY,CAAC,GAAGX,QAAQ,EAAE;UAC/DC,cAAc,GAAGA,cAAc,CAAC3B,MAAM,CAACgD,WAAW,CAAC;QACrD;QACA,IAAIrB,cAAc,CAACjJ,MAAM,IAAIA,MAAM,EAAE;MACvC;MACA,OAAOiJ,cAAc,CAAC0B,IAAI,CAACC,yBAAU,CAAC,CAAChG,KAAK,CAAC,CAAC,EAAE5E,MAAM,CAAC;IACzD;;IAEA;AACF;AACA;EAFE;IAAAuD,GAAA;IAAAhD,KAAA;MAAA,IAAAsK,2BAAA,GAAA7H,iBAAA,cAAAtC,YAAA,GAAA+B,CAAA,CAGA,SAAAqI,SAAAC,KAAA,EAEE/B,QAAgB;QAAA,IAAAgC,MAAA;QAAA,IAAAb,YAAA;UAAAjB,MAAA;UAAAlJ,MAAA;UAAAiL,MAAA;UAAAC,qBAAA;UAAAC,WAAA;UAAAC,cAAA;UAAAC,aAAA;UAAAC,MAAA,GAAAvL,SAAA;QAAA,OAAAW,YAAA,GAAA8B,CAAA,WAAA+I,SAAA;UAAA,kBAAAA,SAAA,CAAA3K,CAAA;YAAA;cADduJ,YAAY,GAAAY,KAAA,CAAZZ,YAAY;cAEdjB,MAAM,GAAAoC,MAAA,CAAAtL,MAAA,QAAAsL,MAAA,QAAA/B,SAAA,GAAA+B,MAAA,MAAG,IAAI5B,IAAI,CAAC,CAAC,CAACG,WAAW,CAAC,CAAC;cACjC7J,MAAc,GAAAsL,MAAA,CAAAtL,MAAA,OAAAsL,MAAA,MAAA/B,SAAA;cAER0B,MAAM,GAAG;gBACb/B,MAAM,EAANA,MAAM;gBACNF,QAAQ,EAARA,QAAQ;gBACRwC,WAAW,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC;gBACrCC,OAAO,EAAEzL;cACX,CAAC,EACD;cACMkL,qBAAqB,GAAGf,YAAY,CAACrF,MAAM,CAC/C,UAAC8C,GAAG,EAAA8D,KAAA,EAAsB;gBAAA,IAAlBC,WAAW,GAAAD,KAAA,CAAXC,WAAW;gBACjB,IAAIA,WAAW,EAAE;kBACf,IAAMC,OAAO,GAAGZ,MAAI,CAACa,iBAAiB,CAAA/L,aAAA,CAAAA,aAAA,KACjCmL,MAAM;oBACTU,WAAW,EAAXA;kBAAW,EACZ,CAAC;kBACF,OAAO/D,GAAG,CAACN,MAAM,CAACsE,OAAO,CAAC;gBAC5B;gBACA,OAAOhE,GAAG;cACZ,CAAC,EACD,EACF,CAAC,EAED;cACA;cAAA2D,SAAA,CAAA3K,CAAA;cAAA,OAC0B,IAAAkL,6BAAiB,EAACZ,qBAAqB,EAAE,CAAC,EAAE;gBACpEa,KAAK,EAAE;cACT,CAAC,CAAC;YAAA;cAFIZ,WAAW,GAAAI,SAAA,CAAA7J,CAAA;cAGX0J,cAAc,GAAG,IAAAY,6CAAuB,EAACb,WAAW,CAAC;cACrDE,aAAa,GAAG,IAAAY,yCAAmB,EAACb,cAAc,CAAC;cAAA,OAAAG,SAAA,CAAA5J,CAAA,IAClD,IAAAuK,kCAAY,EAACb,aAAa,CAAC;UAAA;QAAA,GAAAP,QAAA;MAAA,CACnC;MAAA,SAnCKlB,0BAA0BA,CAAAuC,GAAA,EAAAC,GAAA;QAAA,OAAAvB,2BAAA,CAAAhL,KAAA,OAAAE,SAAA;MAAA;MAAA,OAA1B6J,0BAA0B;IAAA;EAAA;IAAArG,GAAA;IAAAhD,KAAA,EAqChC,SAAAsL,iBAAiBA,CAACZ,MAA+B,EAAE;MAAA,IAAAoB,MAAA;MACjD,OAAO;QAAA,OACLA,MAAI,CAACvG,KAAK,CAACwG,MAAM,CACdC,OAAO,CAAC,CAAC,CACTC,SAAS,CAAC,CAAC,CACXzG,YAAY,CAAC,CAAC,CACd0G,IAAI,CAACxB,MAAM,CAAC;MAAA,CAA2B;IAC9C;EAAC;AAAA,EAxPiCyB,gBAAU,GAAA7N,WAAA,GAAA8F,yBAAA,CAAA/F,OAAA,CAAAqC,SAAA,eA2B3C0L,WAAK;EAAAnM,YAAA;EAAAb,UAAA;EAAAc,QAAA;EAAA2C,WAAA,WAAAA,YAAA;IAAA,OAC6B,CAAC,CAAC;EAAA;AAAA,IAAAtE,YAAA,GAAA6F,yBAAA,CAAA/F,OAAA,CAAAqC,SAAA,eAEpC0L,WAAK;EAAAnM,YAAA;EAAAb,UAAA;EAAAc,QAAA;EAAA2C,WAAA,WAAAA,YAAA;IAAA,OACkD,CAAC,CAAC;EAAA;AAAA,IAAArE,YAAA,GAAA4F,yBAAA,CAAA/F,OAAA,CAAAqC,SAAA,oBAEzD0L,WAAK;EAAAnM,YAAA;EAAAb,UAAA;EAAAc,QAAA;EAAA2C,WAAA,WAAAA,YAAA;IAAA,OAEyB,IAAI;EAAA;AAAA,IAAAuB,yBAAA,CAAA/F,OAAA,CAAAqC,SAAA,eAElC2L,YAAM,GAAAvN,MAAA,CAAAK,wBAAA,CAAAd,OAAA,CAAAqC,SAAA,eAAArC,OAAA,CAAAqC,SAAA,GAAA0D,yBAAA,CAAA/F,OAAA,CAAAqC,SAAA,kBAKN2L,YAAM,GAAAvN,MAAA,CAAAK,wBAAA,CAAAd,OAAA,CAAAqC,SAAA,kBAAArC,OAAA,CAAAqC,SAAA,GAAA0D,yBAAA,CAAA/F,OAAA,CAAAqC,SAAA,gBASN2L,YAAM,GAAAvN,MAAA,CAAAK,wBAAA,CAAAd,OAAA,CAAAqC,SAAA,gBAAArC,OAAA,CAAAqC,SAAA,GAAA0D,yBAAA,CAAA/F,OAAA,CAAAqC,SAAA,0BAAAvC,KAAA,GAAAW,MAAA,CAAAK,wBAAA,CAAAd,OAAA,CAAAqC,SAAA,0BAAArC,OAAA,CAAAqC,SAAA,GAAA0D,yBAAA,CAAA/F,OAAA,CAAAqC,SAAA,kBAuBN4L,gBAAO,GAAAxN,MAAA,CAAAK,wBAAA,CAAAd,OAAA,CAAAqC,SAAA,kBAAArC,OAAA,CAAAqC,SAAA,GAAArC,OAAA,MAAAD,MAAA","ignoreList":[]}