{"version":3,"sources":["modules/HeaderViewUI/HeaderViewUI.ts"],"names":["HeaderViewUI","name","deps","_deps","auth","callMonitor","routerInteraction","locale","webphone","presence","userStatus","loggedIn","undefined","dndStatus","ringingCalls","activeRingCalls","onHoldCalls","activeOnHoldCalls","currentCalls","activeCurrentCalls","currentPath","currentLocale","activeSessionId","incomingCallPageMinimized","ringSession","minimized","presenceReady","ready","userGuide","quickAccess","onCurrentCallBtnClick","push","dismiss","exit","toggleMinimized","id","onViewCallBtnClick","setAvailable","setBusy","setDoNotDisturb","setInvisible","RcUIModuleV2"],"mappings":"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","sourcesContent":["import {\n  RcUIModuleV2,\n  UIFunctions,\n  UIProps,\n} from '@ringcentral-integration/core';\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport { Deps } from './HeaderViewUI.interface';\nimport { HeaderViewProps } from '../../containers/HeaderView/HeaderView.interface';\n\n@Module({\n  name: 'HeaderViewUI',\n  deps: [\n    'Auth',\n    'CallMonitor',\n    'RouterInteraction',\n    'Locale',\n    'Webphone',\n    'Presence',\n    'UserGuide',\n    'QuickAccess',\n  ],\n})\nexport class HeaderViewUI extends RcUIModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({ deps });\n  }\n\n  getUIProps(): UIProps<HeaderViewProps> {\n    const {\n      auth,\n      callMonitor,\n      routerInteraction,\n      locale,\n      webphone,\n      presence,\n    } = this._deps;\n\n    return {\n      userStatus: (auth.loggedIn && presence.userStatus) || undefined,\n      dndStatus: (auth.loggedIn && presence.dndStatus) || undefined,\n      ringingCalls: callMonitor.activeRingCalls || [],\n      onHoldCalls: callMonitor.activeOnHoldCalls || [],\n      currentCalls: callMonitor.activeCurrentCalls || [],\n      currentPath: routerInteraction.currentPath,\n      currentLocale: locale.currentLocale,\n      activeSessionId: webphone.activeSessionId || '',\n      incomingCallPageMinimized:\n        !webphone.ringSession || webphone.ringSession.minimized,\n      presenceReady: presence.ready,\n    };\n  }\n\n  getUIFunctions(): UIFunctions<HeaderViewProps> {\n    const {\n      routerInteraction,\n      userGuide,\n      quickAccess,\n      webphone,\n      presence,\n    } = this._deps;\n\n    return {\n      onCurrentCallBtnClick() {\n        if (routerInteraction.currentPath !== '/calls/active') {\n          routerInteraction.push('/calls/active');\n        }\n        if (userGuide) {\n          userGuide.dismiss();\n        }\n        if (quickAccess) {\n          quickAccess.exit();\n        }\n        // TODO: need to replace webphone with webphoneV2\n        if (\n          webphone &&\n          webphone.ringSession &&\n          !webphone.ringSession.minimized\n        ) {\n          webphone.toggleMinimized(webphone.ringSession.id);\n        }\n      },\n      onViewCallBtnClick() {\n        if (routerInteraction.currentPath !== '/calls') {\n          routerInteraction.push('/calls');\n        }\n        if (userGuide) {\n          userGuide.dismiss();\n        }\n        if (quickAccess) {\n          quickAccess.exit();\n        }\n        if (\n          webphone &&\n          webphone.ringSession &&\n          !webphone.ringSession.minimized\n        ) {\n          webphone.toggleMinimized(webphone.ringSession.id);\n        }\n      },\n      setAvailable: () => presence && presence.setAvailable(),\n      setBusy: () => presence && presence.setBusy(),\n      setDoNotDisturb: () => presence && presence.setDoNotDisturb(),\n      setInvisible: () => presence && presence.setInvisible(),\n    };\n  }\n}\n"],"file":"HeaderViewUI.js"}