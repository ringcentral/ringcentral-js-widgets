{"version":3,"sources":["modules/HeaderViewUI/HeaderViewUI.tsx"],"names":["HeaderViewUI","name","deps","dep","optional","standAlone","_deps","auth","callMonitor","routerInteraction","locale","webphone","presence","userStatus","loggedIn","undefined","dndStatus","ringingCalls","activeRingCalls","onHoldCalls","activeOnHoldCalls","currentCalls","activeCurrentCalls","currentPath","currentLocale","activeSessionId","incomingCallPageMinimized","ringSession","minimized","presenceReady","ready","logo","userGuide","quickAccess","logoUrl","brand","brandConfig","assets","onCurrentCallBtnClick","push","dismiss","exit","toggleMinimized","id","onViewCallBtnClick","setAvailable","setBusy","setDoNotDisturb","setInvisible","RcUIModuleV2"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport {\n  RcUIModuleV2,\n  UIFunctions,\n  UIProps,\n} from '@ringcentral-integration/core';\n\nimport {\n  HeaderViewProps,\n  HeaderContainerProps,\n} from '../../containers/HeaderView';\nimport { Deps } from './HeaderViewUI.interface';\n\n@Module({\n  name: 'HeaderViewUI',\n  deps: [\n    'Auth',\n    'CallMonitor',\n    'RouterInteraction',\n    'Locale',\n    'Webphone',\n    'Presence',\n    { dep: 'UserGuide', optional: true },\n    { dep: 'QuickAccess', optional: true },\n    { dep: 'Brand', optional: true },\n  ],\n})\nexport class HeaderViewUI<T extends Deps = Deps> extends RcUIModuleV2<T> {\n  constructor(deps: T) {\n    super({ deps });\n  }\n\n  getUIProps({ standAlone }: HeaderContainerProps): UIProps<HeaderViewProps> {\n    const { auth, callMonitor, routerInteraction, locale, webphone, presence } =\n      this._deps;\n\n    return {\n      standAlone,\n      userStatus: (auth.loggedIn && presence.userStatus) || undefined,\n      dndStatus: (auth.loggedIn && presence.dndStatus) || undefined,\n      ringingCalls: callMonitor.activeRingCalls || [],\n      onHoldCalls: callMonitor.activeOnHoldCalls || [],\n      currentCalls: callMonitor.activeCurrentCalls || [],\n      currentPath: routerInteraction.currentPath,\n      currentLocale: locale.currentLocale,\n      activeSessionId: webphone.activeSessionId || '',\n      incomingCallPageMinimized:\n        !webphone.ringSession || webphone.ringSession.minimized,\n      presenceReady: presence.ready,\n    };\n  }\n\n  getUIFunctions({ logo }: HeaderContainerProps): UIFunctions<HeaderViewProps> {\n    const { routerInteraction, userGuide, quickAccess, webphone, presence } =\n      this._deps;\n\n    const logoUrl = this._deps.brand?.brandConfig.assets?.logo as string;\n\n    return {\n      logo: (logoUrl ? () => <img src={logoUrl} alt=\"\" /> : undefined) || logo,\n      onCurrentCallBtnClick() {\n        if (routerInteraction.currentPath !== '/calls/active') {\n          routerInteraction.push('/calls/active');\n        }\n        if (userGuide) {\n          userGuide.dismiss();\n        }\n        if (quickAccess) {\n          quickAccess.exit();\n        }\n        // TODO: need to replace webphone with webphoneV2\n        if (\n          webphone &&\n          webphone.ringSession &&\n          !webphone.ringSession.minimized\n        ) {\n          webphone.toggleMinimized(webphone.ringSession.id);\n        }\n      },\n      onViewCallBtnClick() {\n        if (routerInteraction.currentPath !== '/calls') {\n          routerInteraction.push('/calls');\n        }\n        if (userGuide) {\n          userGuide.dismiss();\n        }\n        if (quickAccess) {\n          quickAccess.exit();\n        }\n        if (\n          webphone &&\n          webphone.ringSession &&\n          !webphone.ringSession.minimized\n        ) {\n          webphone.toggleMinimized(webphone.ringSession.id);\n        }\n      },\n      setAvailable: () => presence && presence.setAvailable(),\n      setBusy: () => presence && presence.setBusy(),\n      setDoNotDisturb: () => presence && presence.setDoNotDisturb(),\n      setInvisible: () => presence && presence.setInvisible(),\n    };\n  }\n}\n"],"file":"HeaderViewUI.js"}