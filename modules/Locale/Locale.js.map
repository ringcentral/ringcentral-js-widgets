{"version":3,"file":"Locale.js","names":["_core","require","_i18n","_interopRequireWildcard","_formatLocale","_interopRequireDefault","_detectBrowserLocale","_di","_proxify","_dec","_dec2","_class","_class2","_descriptor","_descriptor2","_descriptor3","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_initializerDefineProperty","target","property","descriptor","context","enumerable","configurable","writable","initializer","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","i","length","_toPropertyKey","_createClass","protoProps","staticProps","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_initializerWarningHelper","Error","_applyDecoratedDescriptor","decorators","keys","forEach","slice","reverse","reduce","decorator","Locale","Module","name","deps","dep","optional","computed","_ref","defaultLocale","_RcModuleV","_super","_this","I18n","setDefaultLocale","_setProxyLocaleSuccess","locale","proxyLocale","_setProxyLocaleSuccess2","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","setProxyLocaleSuccess","_x","_toggleDebugMode","debugMode","setLocale","PSEUDO_LOCALE","_setLocaleSuccess","onInitOnce","_polling","_syncBrowserLocale","_initializeProxy","_callee3","_this2","setLocalePromise","_callee3$","_context3","_setLocale","currentLocale","store","subscribe","_callee2","_callee2$","_context2","initializeProxy","_onInit","_callee4","_callee4$","_context4","_detectBrowser","browserLocale","onInit","_syncBrowserLocale2","_callee5","_this3","_callee5$","_context5","setTimeout","_pollingInterval","_setLocale2","_callee6","_callee6$","_context6","_x2","normalizeLocale","inputLocale","formatLocale","supportedLocales","map","item","find","split","_toggleDebugMode2","_callee7","_callee7$","_context7","toggleDebugMode","_setLocale3","_callee8","_callee8$","_context8","t0","console","log","_x3","_ref3","_this$_deps$localeOpt","_this$_deps$localeOpt2","_this$_deps$brandConf","_deps","localeOptions","brandConfig","DEFAULT_LOCALE","_this$_deps$localeOpt3","_this$_deps$localeOpt4","detectBrowser","_this$_deps$localeOpt5","_this$_deps$localeOpt6","polling","_this$_deps$localeOpt7","_this$_deps$localeOpt8","pollingInterval","_ref4","_this$_deps$localeOpt9","_this$_deps$localeOpt10","_this$_deps$brandConf2","_ref5","_transport","detectBrowserLocale","RcModuleV2","state","action","proxify","exports","_default"],"sources":["modules/Locale/Locale.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n} from '@ringcentral-integration/core';\nimport I18n, {\n  DEFAULT_LOCALE,\n  PSEUDO_LOCALE,\n} from '@ringcentral-integration/i18n';\nimport formatLocale from '@ringcentral-integration/i18n/lib/formatLocale';\n\nimport detectBrowserLocale from '../../lib/detectBrowserLocale';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport type { Deps } from './Locale.interface';\n\n@Module({\n  name: 'Locale',\n  deps: [\n    {\n      dep: 'BrandConfig',\n      optional: true,\n    },\n    {\n      dep: 'LocaleOptions',\n      optional: true,\n    },\n  ],\n})\nexport class Locale extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({ deps });\n    I18n.setDefaultLocale(this.defaultLocale);\n  }\n\n  get defaultLocale() {\n    return (\n      this._deps.localeOptions?.defaultLocale ??\n      this._deps.brandConfig?.defaultLocale ??\n      DEFAULT_LOCALE\n    );\n  }\n\n  protected get _detectBrowser() {\n    return this._deps.localeOptions?.detectBrowser ?? true;\n  }\n\n  protected get _polling() {\n    return this._deps.localeOptions?.polling ?? false;\n  }\n\n  protected get _pollingInterval() {\n    return this._deps.localeOptions?.pollingInterval ?? 2000;\n  }\n\n  @computed(({ defaultLocale }: Locale) => [defaultLocale])\n  get supportedLocales() {\n    return (\n      this._deps.localeOptions?.supportedLocales ??\n      this._deps.brandConfig?.supportedLocales ?? [this.defaultLocale]\n    );\n  }\n\n  @state\n  locale: string | null = null;\n\n  @state\n  proxyLocale: string | null = null;\n\n  @action\n  _setProxyLocaleSuccess(locale: string | null) {\n    this.proxyLocale = locale;\n  }\n\n  @proxify\n  async setProxyLocaleSuccess(locale: string | null) {\n    this._setProxyLocaleSuccess(locale);\n  }\n\n  @state\n  debugMode = false;\n\n  @action\n  _toggleDebugMode() {\n    this.debugMode = !this.debugMode;\n    // TODO: refactor without side effect.\n    if (this.debugMode) {\n      this.setLocale(PSEUDO_LOCALE);\n    }\n  }\n\n  @action\n  _setLocaleSuccess(locale: string) {\n    this.locale = locale;\n  }\n\n  override onInitOnce() {\n    if (this._polling) {\n      this._syncBrowserLocale();\n    }\n  }\n\n  override async initializeProxy() {\n    let setLocalePromise: Promise<void> | null;\n    await this._setLocale(this.currentLocale);\n    this.setProxyLocaleSuccess(this.currentLocale);\n    this.store.subscribe(async () => {\n      if (this.locale !== this.proxyLocale && !setLocalePromise) {\n        setLocalePromise = this._setLocale(this.locale);\n        await setLocalePromise;\n        this.setProxyLocaleSuccess(this.locale);\n        setLocalePromise = null;\n      }\n    });\n  }\n\n  override async onInit() {\n    await this.setLocale(\n      this._detectBrowser ? this.browserLocale : this.defaultLocale,\n    );\n  }\n\n  protected async _syncBrowserLocale() {\n    if (!this.debugMode && this.browserLocale !== this.currentLocale) {\n      await this.setLocale(this.browserLocale);\n    }\n    setTimeout(() => this._syncBrowserLocale(), this._pollingInterval);\n  }\n\n  protected async _setLocale(locale: string | null) {\n    await I18n.setLocale(locale);\n  }\n\n  normalizeLocale(inputLocale: string) {\n    const locale = formatLocale(inputLocale);\n\n    const target = this.supportedLocales\n      .map((item) => formatLocale(item))\n      .find((item) => item === locale || item.split('-')[0] === locale);\n    return target ?? this.defaultLocale;\n  }\n\n  get currentLocale() {\n    return (\n      (this._transport ? this.proxyLocale : this.locale) ?? this.defaultLocale\n    );\n  }\n\n  get browserLocale() {\n    const locale = detectBrowserLocale(this.defaultLocale);\n    return this.normalizeLocale(locale);\n  }\n\n  @proxify\n  async toggleDebugMode() {\n    this._toggleDebugMode();\n  }\n\n  /**\n   * Sets the desired locale as the current locale.\n   */\n  @proxify\n  async setLocale(locale: string) {\n    try {\n      await this._setLocale(locale);\n      this._setLocaleSuccess(locale);\n    } catch (error: any /** TODO: confirm with instanceof */) {\n      console.log(error);\n    }\n  }\n}\n\nexport default Locale;\n"],"mappings":"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"}