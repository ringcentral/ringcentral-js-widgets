{"version":3,"file":"Locale.js","names":["_core","require","_i18n","_interopRequireWildcard","_i18nDayjs","_formatLocale","_interopRequireDefault","_detectBrowserLocale","_di","_proxify","_dec","_dec2","_class","_class2","_descriptor","_descriptor2","_descriptor3","e","__esModule","_getRequireWildcardCache","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","asyncGeneratorStep","o","c","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","l","enumerable","configurable","writable","initializer","_classCallCheck","TypeError","_defineProperties","length","_toPropertyKey","key","_createClass","prototype","_toPrimitive","Symbol","toPrimitive","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_initializerWarningHelper","Error","_applyDecoratedDescriptor","keys","forEach","slice","reverse","reduce","Locale","Module","name","deps","dep","optional","computed","_ref","defaultLocale","_RcModuleV","_super","_this","I18n","setDefaultLocale","_setProxyLocaleSuccess","locale","proxyLocale","_setProxyLocaleSuccess2","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","setProxyLocaleSuccess","_x","_toggleDebugMode","debugMode","setLocale","PSEUDO_LOCALE","_setLocaleSuccess","onInitOnce","_polling","_syncBrowserLocale","_initializeProxy","_callee3","_this2","setLocalePromise","_callee3$","_context3","_setLocale","currentLocale","store","subscribe","_callee2","_callee2$","_context2","initializeProxy","_onInit","_callee4","_callee4$","_context4","_detectBrowser","browserLocale","onInit","_syncBrowserLocale2","_callee5","_this3","_callee5$","_context5","setTimeout","_pollingInterval","_setLocale2","_callee6","toLocale","_callee6$","_context6","setDayjsLocale","_x2","normalizeLocale","inputLocale","formatLocale","target","supportedLocales","map","item","find","split","_toggleDebugMode2","_callee7","_callee7$","_context7","toggleDebugMode","_setLocale3","_callee8","_callee8$","_context8","t0","console","log","_x3","_ref3","_this$_deps$localeOpt","_this$_deps$localeOpt2","_this$_deps$brandConf","_deps","localeOptions","brandConfig","DEFAULT_LOCALE","_this$_deps$localeOpt3","_this$_deps$localeOpt4","detectBrowser","_this$_deps$localeOpt5","_this$_deps$localeOpt6","polling","_this$_deps$localeOpt7","_this$_deps$localeOpt8","pollingInterval","_ref4","_this$_deps$localeOpt9","_this$_deps$localeOpt10","_this$_deps$brandConf2","_ref5","_transport","detectBrowserLocale","RcModuleV2","state","action","proxify","exports","_default"],"sources":["modules/Locale/Locale.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n} from '@ringcentral-integration/core';\nimport I18n, {\n  DEFAULT_LOCALE,\n  PSEUDO_LOCALE,\n} from '@ringcentral-integration/i18n';\nimport { setDayjsLocale } from '@ringcentral-integration/i18n-dayjs';\nimport formatLocale from '@ringcentral-integration/i18n/lib/formatLocale';\n\nimport detectBrowserLocale from '../../lib/detectBrowserLocale';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\n\nimport type { Deps } from './Locale.interface';\n\n@Module({\n  name: 'Locale',\n  deps: [\n    {\n      dep: 'BrandConfig',\n      optional: true,\n    },\n    {\n      dep: 'LocaleOptions',\n      optional: true,\n    },\n  ],\n})\nexport class Locale extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({ deps });\n    I18n.setDefaultLocale(this.defaultLocale);\n  }\n\n  get defaultLocale() {\n    return (\n      this._deps.localeOptions?.defaultLocale ??\n      this._deps.brandConfig?.defaultLocale ??\n      DEFAULT_LOCALE\n    );\n  }\n\n  protected get _detectBrowser() {\n    return this._deps.localeOptions?.detectBrowser ?? true;\n  }\n\n  protected get _polling() {\n    return this._deps.localeOptions?.polling ?? false;\n  }\n\n  protected get _pollingInterval() {\n    return this._deps.localeOptions?.pollingInterval ?? 2000;\n  }\n\n  @computed(({ defaultLocale }: Locale) => [defaultLocale])\n  get supportedLocales() {\n    return (\n      this._deps.localeOptions?.supportedLocales ??\n      this._deps.brandConfig?.supportedLocales ?? [this.defaultLocale]\n    );\n  }\n\n  @state\n  locale: string | null = null;\n\n  @state\n  proxyLocale: string | null = null;\n\n  @action\n  _setProxyLocaleSuccess(locale: string | null) {\n    this.proxyLocale = locale;\n  }\n\n  @proxify\n  async setProxyLocaleSuccess(locale: string | null) {\n    this._setProxyLocaleSuccess(locale);\n  }\n\n  @state\n  debugMode = false;\n\n  @action\n  _toggleDebugMode() {\n    this.debugMode = !this.debugMode;\n    // TODO: refactor without side effect.\n    if (this.debugMode) {\n      this.setLocale(PSEUDO_LOCALE);\n    }\n  }\n\n  @action\n  _setLocaleSuccess(locale: string) {\n    this.locale = locale;\n  }\n\n  override onInitOnce() {\n    if (this._polling) {\n      this._syncBrowserLocale();\n    }\n  }\n\n  override async initializeProxy() {\n    let setLocalePromise: Promise<void> | null;\n    await this._setLocale(this.currentLocale);\n    this.setProxyLocaleSuccess(this.currentLocale);\n    this.store.subscribe(async () => {\n      if (this.locale !== this.proxyLocale && !setLocalePromise) {\n        setLocalePromise = this._setLocale(this.locale);\n        await setLocalePromise;\n        this.setProxyLocaleSuccess(this.locale);\n        setLocalePromise = null;\n      }\n    });\n  }\n\n  override async onInit() {\n    await this.setLocale(\n      this._detectBrowser ? this.browserLocale : this.defaultLocale,\n    );\n  }\n\n  protected async _syncBrowserLocale() {\n    if (!this.debugMode && this.browserLocale !== this.currentLocale) {\n      await this.setLocale(this.browserLocale);\n    }\n    setTimeout(() => this._syncBrowserLocale(), this._pollingInterval);\n  }\n\n  protected async _setLocale(locale: string | null) {\n    const toLocale = locale || this.defaultLocale;\n    await I18n.setLocale(toLocale);\n    setDayjsLocale(toLocale);\n  }\n\n  normalizeLocale(inputLocale: string) {\n    const locale = formatLocale(inputLocale);\n\n    const target = this.supportedLocales\n      .map((item) => formatLocale(item))\n      .find((item) => item === locale || item.split('-')[0] === locale);\n    return target ?? this.defaultLocale;\n  }\n\n  get currentLocale() {\n    return (\n      (this._transport ? this.proxyLocale : this.locale) ?? this.defaultLocale\n    );\n  }\n\n  get browserLocale() {\n    const locale = detectBrowserLocale(this.defaultLocale);\n    return this.normalizeLocale(locale);\n  }\n\n  @proxify\n  async toggleDebugMode() {\n    this._toggleDebugMode();\n  }\n\n  /**\n   * Sets the desired locale as the current locale.\n   */\n  @proxify\n  async setLocale(locale: string) {\n    try {\n      await this._setLocale(locale);\n      this._setLocaleSuccess(locale);\n    } catch (error: any /** TODO: confirm with instanceof */) {\n      console.log(error);\n    }\n  }\n}\n\nexport default Locale;\n"],"mappings":"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","ignoreList":[]}