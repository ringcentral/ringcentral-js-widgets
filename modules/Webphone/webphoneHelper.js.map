{"version":3,"file":"webphoneHelper.js","names":["_callDirections","_interopRequireDefault","require","_utils","_recordStatus","_sessionStatus","obj","__esModule","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","isArray","environment","window","global","isChrome","navigator","browserUa","userAgent","toLowerCase","match","isFirefox","indexOf","isEnableMidLinesInSDP","_navigator$userAgent$","version","parseInt","isWebSocketSupport","WebSocket","isWebRTCSupport","MediaStream","RTCPeerConnection","mediaDevices","getUserMedia","isBrowserSupport","extractHeadersData","session","headers","raw","data","split","map","sub","reduce","accum","_ref","_ref2","key","camelize","keys","__rc_partyData","__rc_callId","getCallQueueName","_ref3","direction","toUserName","fromUserName","callDirections","outbound","queueName","endsWith","normalizeSession","_session$request","_session$request$to","_session$request2","_session$request2$fro","_session$request3","_session$request3$to","_session$request3$to$","_session$request4","_session$request4$fro","_session$request4$fro2","request","to","displayName","id","callId","__rc_direction","callStatus","__rc_callStatus","uri","user","fromNumber","__rc_fromNumber","fromTag","toTag","startTime","Date","getTime","creationTime","__rc_creationTime","isOnHold","localHold","isOnMute","__rc_isOnMute","isOnFlip","__rc_isOnFlip","isOnTransfer","__rc_isOnTransfer","isToVoicemail","__rc_isToVoicemail","isForwarded","__rc_isForwarded","isReplied","__rc_isReplied","recordStatus","__rc_recordStatus","idle","contactMatch","__rc_contactMatch","minimized","__rc_minimized","partyData","lastActiveTime","__rc_lastActiveTime","cached","removed","callQueueName","warmTransferSessionId","__rc_transferSessionId","isRing","inbound","sessionStatus","connecting","sortByCreationTimeDesc","l","r","sortByLastActiveTimeDesc","isConferenceSession","isRecording","pending","recording"],"sources":["modules/Webphone/webphoneHelper.ts"],"sourcesContent":["import callDirections from '../../enums/callDirections';\nimport type {\n  NormalizedSession,\n  PartyData,\n  WebphoneSession,\n} from '../../interfaces/Webphone.interface';\nimport { camelize } from '../../lib/di/utils/utils';\nimport { recordStatus } from './recordStatus';\nimport { sessionStatus } from './sessionStatus';\nimport type { WebphoneSessionRequestHeaders } from './Webphone.interface';\n\nlet environment: Window & typeof globalThis;\nif (typeof window !== 'undefined') {\n  environment = window;\n}\nif (typeof global !== 'undefined') {\n  environment = global.window || global;\n}\n\nexport function isChrome() {\n  if (!environment.navigator) {\n    return false;\n  }\n  const browserUa = environment.navigator.userAgent.toLowerCase();\n  return !!browserUa.match(/chrom(e|ium)/);\n}\n\nexport function isFirefox() {\n  if (!environment.navigator) {\n    return false;\n  }\n  const browserUa = environment.navigator.userAgent.toLowerCase();\n  return browserUa.indexOf('firefox') > -1 && !isChrome();\n}\n\nexport function isEnableMidLinesInSDP() {\n  if (!isFirefox()) {\n    return false;\n  }\n  const version = parseInt(\n    navigator.userAgent.toLowerCase().match(/firefox\\/([0-9]+)/)?.[1]!,\n    10,\n  );\n  return version >= 63;\n}\n\nexport function isWebSocketSupport() {\n  return !!(environment && environment.WebSocket);\n}\n\nexport function isWebRTCSupport() {\n  if (!environment.navigator) {\n    return false;\n  }\n  return !!(\n    environment.MediaStream &&\n    environment.RTCPeerConnection &&\n    environment.navigator.mediaDevices.getUserMedia\n  );\n}\n\nexport function isBrowserSupport() {\n  return isWebSocketSupport() && isWebRTCSupport();\n}\n\nexport function extractHeadersData(\n  session: WebphoneSession,\n  headers: WebphoneSessionRequestHeaders,\n) {\n  if (\n    headers &&\n    headers['P-Rc-Api-Ids'] &&\n    headers['P-Rc-Api-Ids'][0] &&\n    headers['P-Rc-Api-Ids'][0].raw\n  ) {\n    /**\n     * interface PartyData {\n     *  \"partyId\": String,\n     *  \"sessionId\": String\n     * }\n     *\n     * INFO: partyId is ID of the participant in current Session. Mostly it represents User on the call,\n     * it could be active participant (talking right now) or already disconnected User,\n     * e.g. who made a transfer to another person.\n     * To identify the User who owns the party you need to find owner.extensionId within party.\n     */\n    const data = headers['P-Rc-Api-Ids'][0].raw\n      .split(';')\n      .map((sub) => sub.split('='))\n      .reduce((accum, [key, value]) => {\n        accum[camelize(key)] = value;\n        return accum;\n      }, {} as { [key: string]: string });\n\n    if (Object.keys(data).length) {\n      // TODO: fix type\n      session.__rc_partyData = data as any as PartyData;\n    }\n  }\n\n  if (\n    headers &&\n    headers['Call-ID'] &&\n    headers['Call-ID'][0] &&\n    headers['Call-ID'][0].raw\n  ) {\n    session.__rc_callId = headers['Call-ID'][0].raw;\n  }\n}\n\nexport function getCallQueueName({\n  direction,\n  toUserName,\n  fromUserName,\n}: {\n  direction: string;\n  toUserName: string;\n  fromUserName: string;\n}) {\n  if (direction === callDirections.outbound) {\n    return null;\n  }\n  let queueName = null;\n  if (toUserName && fromUserName === toUserName && toUserName.endsWith(' - ')) {\n    queueName = toUserName;\n  }\n  return queueName;\n}\n\nexport function normalizeSession(\n  session?: WebphoneSession,\n): NormalizedSession | undefined {\n  if (!session) {\n    return session;\n  }\n  const toUserName = session.request?.to?.displayName;\n  const fromUserName = session.request?.from?.displayName;\n  return {\n    id: session.id,\n    callId: session.__rc_callId,\n    direction: session.__rc_direction,\n    callStatus: session.__rc_callStatus,\n    // @ts-expect-error\n    to: session.request?.to?.uri?.user,\n    toUserName,\n    // @ts-expect-error\n    from: session.request?.from?.uri?.user,\n    fromNumber: session.__rc_fromNumber,\n    fromUserName,\n    fromTag: session.fromTag,\n    toTag: session.toTag,\n    // @ts-expect-error\n    startTime: session.startTime && new Date(session.startTime).getTime(),\n    creationTime: session.__rc_creationTime,\n    isOnHold: !!session.localHold,\n    isOnMute: !!session.__rc_isOnMute,\n    isOnFlip: !!session.__rc_isOnFlip,\n    isOnTransfer: !!session.__rc_isOnTransfer,\n    isToVoicemail: !!session.__rc_isToVoicemail,\n    isForwarded: !!session.__rc_isForwarded,\n    isReplied: !!session.__rc_isReplied,\n    recordStatus: session.__rc_recordStatus || recordStatus.idle,\n    // @ts-expect-error\n    contactMatch: session.__rc_contactMatch,\n    minimized: !!session.__rc_minimized,\n    // @ts-expect-error\n    partyData: session.__rc_partyData || null,\n    lastActiveTime: session.__rc_lastActiveTime,\n    cached: false,\n    removed: false,\n    // @ts-expect-error\n    callQueueName: getCallQueueName({\n      direction: session.__rc_direction,\n      toUserName,\n      fromUserName,\n    }),\n    warmTransferSessionId: session.__rc_transferSessionId,\n  };\n}\n\nexport function isRing(session: NormalizedSession) {\n  return !!(\n    session &&\n    session.direction === callDirections.inbound &&\n    session.callStatus === sessionStatus.connecting\n  );\n}\n\nexport function isOnHold(session: NormalizedSession) {\n  return !!(session && session.isOnHold);\n}\n\nexport function sortByCreationTimeDesc(\n  l: NormalizedSession,\n  r: NormalizedSession,\n) {\n  return r.startTime - l.startTime;\n}\n\nexport function sortByLastActiveTimeDesc(\n  l: NormalizedSession,\n  r: NormalizedSession,\n) {\n  if (!l || !r) {\n    return 0;\n  }\n  if (r.lastActiveTime !== l.lastActiveTime) {\n    return r.lastActiveTime - l.lastActiveTime;\n  }\n  return sortByCreationTimeDesc(l, r);\n}\n\n/**\n * HACK: this function is not very reliable, only use it before the merging complete.\n */\nexport function isConferenceSession(session: NormalizedSession) {\n  return session && session.to && session.to.indexOf('conf_') === 0;\n}\n\nexport function isRecording(session: NormalizedSession) {\n  return !!(\n    session &&\n    (session.recordStatus === recordStatus.pending ||\n      session.recordStatus === recordStatus.recording)\n  );\n}\n"],"mappings":"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"}