{"version":3,"file":"webphoneHelper.js","names":["_callDirections","_interopRequireDefault","require","_utils","_recordStatus","_sessionStatus","e","__esModule","_slicedToArray","r","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","length","n","l","Symbol","iterator","i","u","f","o","next","Object","done","push","value","isArray","environment","window","global","isChrome","navigator","browserUa","userAgent","toLowerCase","match","isFirefox","indexOf","isEnableMidLinesInSDP","_navigator$userAgent$","version","parseInt","isWebSocketSupport","WebSocket","isWebRTCSupport","MediaStream","RTCPeerConnection","mediaDevices","getUserMedia","isBrowserSupport","extractHeadersData","session","headers","raw","data","split","map","sub","reduce","accum","_ref","_ref2","key","camelize","keys","__rc_partyData","__rc_callId","getCallQueueName","_ref3","direction","callDirections","outbound","normalizeSession","_session$request","_session$request$to","_session$request2","_session$request2$fro","_session$request3","_session$request3$to","_session$request3$to$","_session$request4","_session$request4$fro","_session$request4$fro2","toUserName","request","to","displayName","fromUserName","id","callId","__rc_direction","callStatus","__rc_callStatus","uri","user","fromNumber","__rc_fromNumber","fromTag","toTag","startTime","Date","getTime","creationTime","__rc_creationTime","isOnHold","localHold","isOnMute","__rc_isOnMute","isOnFlip","__rc_isOnFlip","isOnTransfer","__rc_isOnTransfer","isToVoicemail","__rc_isToVoicemail","isForwarded","__rc_isForwarded","isReplied","__rc_isReplied","recordStatus","__rc_recordStatus","idle","contactMatch","__rc_contactMatch","minimized","__rc_minimized","partyData","lastActiveTime","__rc_lastActiveTime","cached","removed","callQueueName","warmTransferSessionId","__rc_transferSessionId","isRing","inbound","sessionStatus","connecting","sortByCreationTimeDesc","sortByLastActiveTimeDesc","isConferenceSession","_session$to","isRecording","pending","recording"],"sources":["modules/Webphone/webphoneHelper.ts"],"sourcesContent":["import callDirections from '../../enums/callDirections';\nimport type {\n  NormalizedSession,\n  PartyData,\n  WebphoneSession,\n} from '../../interfaces/Webphone.interface';\nimport { camelize } from '../../lib/di/utils/utils';\n\nimport type { WebphoneSessionRequestHeaders } from './Webphone.interface';\nimport { recordStatus } from './recordStatus';\nimport { sessionStatus } from './sessionStatus';\n\nlet environment: Window & typeof globalThis;\nif (typeof window !== 'undefined') {\n  environment = window;\n}\nif (typeof global !== 'undefined') {\n  environment = global.window || global;\n}\n\nexport function isChrome() {\n  if (!environment.navigator) {\n    return false;\n  }\n  const browserUa = environment.navigator.userAgent.toLowerCase();\n  return !!browserUa.match(/chrom(e|ium)/);\n}\n\nexport function isFirefox() {\n  if (!environment.navigator) {\n    return false;\n  }\n  const browserUa = environment.navigator.userAgent.toLowerCase();\n  return browserUa.indexOf('firefox') > -1 && !isChrome();\n}\n\nexport function isEnableMidLinesInSDP() {\n  if (!isFirefox()) {\n    return false;\n  }\n  const version = parseInt(\n    navigator.userAgent.toLowerCase().match(/firefox\\/([0-9]+)/)?.[1]!,\n    10,\n  );\n  return version >= 63;\n}\n\nexport function isWebSocketSupport() {\n  return !!(environment && environment.WebSocket);\n}\n\nexport function isWebRTCSupport() {\n  if (!environment.navigator) {\n    return false;\n  }\n  return !!(\n    environment.MediaStream &&\n    environment.RTCPeerConnection &&\n    environment.navigator.mediaDevices.getUserMedia\n  );\n}\n\nexport function isBrowserSupport() {\n  return isWebSocketSupport() && isWebRTCSupport();\n}\n\nexport function extractHeadersData(\n  session: WebphoneSession,\n  headers: WebphoneSessionRequestHeaders,\n) {\n  if (\n    headers &&\n    headers['P-Rc-Api-Ids'] &&\n    headers['P-Rc-Api-Ids'][0] &&\n    headers['P-Rc-Api-Ids'][0].raw\n  ) {\n    /**\n     * interface PartyData {\n     *  \"partyId\": String,\n     *  \"sessionId\": String\n     * }\n     *\n     * INFO: partyId is ID of the participant in current Session. Mostly it represents User on the call,\n     * it could be active participant (talking right now) or already disconnected User,\n     * e.g. who made a transfer to another person.\n     * To identify the User who owns the party you need to find owner.extensionId within party.\n     */\n    const data = headers['P-Rc-Api-Ids'][0].raw\n      .split(';')\n      .map((sub) => sub.split('='))\n      .reduce((accum, [key, value]) => {\n        accum[camelize(key)] = value;\n        return accum;\n      }, {} as { [key: string]: string });\n\n    if (Object.keys(data).length) {\n      // TODO: fix type\n      session.__rc_partyData = data as any as PartyData;\n    }\n  }\n\n  if (\n    headers &&\n    headers['Call-ID'] &&\n    headers['Call-ID'][0] &&\n    headers['Call-ID'][0].raw\n  ) {\n    session.__rc_callId = headers['Call-ID'][0].raw;\n  }\n}\n\nexport function getCallQueueName({\n  direction,\n  headers,\n}: {\n  direction: 'Inbound' | 'Outbound';\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  headers: any;\n}) {\n  if (\n    direction === callDirections.outbound ||\n    !headers ||\n    !headers['P-Rc-Api-Call-Info'] ||\n    !headers['P-Rc-Api-Call-Info'][0] ||\n    !headers['P-Rc-Api-Call-Info'][0].raw ||\n    !headers['P-Asserted-Identity'] ||\n    !headers['P-Asserted-Identity'][0] ||\n    !headers['P-Asserted-Identity'][0].raw\n  ) {\n    return null;\n  }\n  if (headers['P-Rc-Api-Call-Info'][0].raw.indexOf('queue-call') === -1) {\n    return null;\n  }\n  const name = headers['P-Asserted-Identity'][0].raw.split('\"')[1];\n  return name || null;\n}\n\nexport function normalizeSession(\n  session?: WebphoneSession,\n): NormalizedSession | undefined {\n  if (!session) {\n    return session;\n  }\n  const toUserName = session.request?.to?.displayName;\n  const fromUserName = session.request?.from?.displayName;\n  return {\n    id: session.id,\n    callId: session.__rc_callId,\n    direction: session.__rc_direction,\n    callStatus: session.__rc_callStatus,\n    // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n    to: session.request?.to?.uri?.user,\n    toUserName,\n    // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n    from: session.request?.from?.uri?.user,\n    fromNumber: session.__rc_fromNumber,\n    fromUserName,\n    fromTag: session.fromTag,\n    toTag: session.toTag,\n    // @ts-expect-error TS(2322): Type 'number | undefined' is not assignable to typ... Remove this comment to see the full error message\n    startTime: session.startTime && new Date(session.startTime).getTime(),\n    creationTime: session.__rc_creationTime,\n    isOnHold: !!session.localHold,\n    isOnMute: !!session.__rc_isOnMute,\n    isOnFlip: !!session.__rc_isOnFlip,\n    isOnTransfer: !!session.__rc_isOnTransfer,\n    isToVoicemail: !!session.__rc_isToVoicemail,\n    isForwarded: !!session.__rc_isForwarded,\n    isReplied: !!session.__rc_isReplied,\n    recordStatus: session.__rc_recordStatus || recordStatus.idle,\n    // @ts-expect-error TS(2739): Type '{ id: string; }' is missing the following pr... Remove this comment to see the full error message\n    contactMatch: session.__rc_contactMatch,\n    minimized: !!session.__rc_minimized,\n    partyData: session.__rc_partyData || null,\n    lastActiveTime: session.__rc_lastActiveTime,\n    cached: false,\n    removed: false,\n    callQueueName: getCallQueueName({\n      direction: session.__rc_direction,\n      headers: session.request && session.request.headers,\n    }),\n    warmTransferSessionId: session.__rc_transferSessionId || '',\n  };\n}\n\nexport function isRing(session: NormalizedSession) {\n  return !!(\n    session &&\n    session.direction === callDirections.inbound &&\n    session.callStatus === sessionStatus.connecting\n  );\n}\n\nexport function isOnHold(session: NormalizedSession) {\n  return !!(session && session.isOnHold);\n}\n\nexport function sortByCreationTimeDesc(\n  l: NormalizedSession,\n  r: NormalizedSession,\n) {\n  return r.startTime - l.startTime;\n}\n\nexport function sortByLastActiveTimeDesc(\n  l: NormalizedSession,\n  r: NormalizedSession,\n) {\n  if (!l || !r) {\n    return 0;\n  }\n  if (r.lastActiveTime !== l.lastActiveTime) {\n    return r.lastActiveTime - l.lastActiveTime;\n  }\n  return sortByCreationTimeDesc(l, r);\n}\n\n/**\n * HACK: this function is not very reliable, only use it before the merging complete.\n */\nexport function isConferenceSession(session?: NormalizedSession) {\n  return session?.to?.indexOf('conf_') === 0;\n}\n\nexport function isRecording(session: NormalizedSession) {\n  return !!(\n    session &&\n    (session.recordStatus === recordStatus.pending ||\n      session.recordStatus === recordStatus.recording)\n  );\n}\n"],"mappings":"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","ignoreList":[]}