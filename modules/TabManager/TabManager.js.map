{"version":3,"file":"TabManager.js","names":["_redux","require","_core","_di","_proxify","_Tabbie","_dec","_class","_class2","_descriptor","_descriptor2","_descriptor3","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","_toPropertyKey","configurable","writable","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","err","undefined","_initializerDefineProperty","property","descriptor","context","initializer","call","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","_createClass","protoProps","staticProps","prototype","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","decorators","desc","slice","reverse","reduce","decorator","_initializerWarningHelper","Error","TabManager","Module","name","deps","dep","optional","_RcModuleV","_super","_deps$tabManagerOptio","_deps$tabManagerOptio2","_this$_deps$tabManage","_this$_deps$tabManage2","_this","enableGlobalCache","tabManagerOptions","enableCache","tabbie","_eventReducer","state","action","_usm","usmAction","type","identifierKey","hasOwnProperty","_state","event","method","Tabbie","prefix","_deps","autoMainTab","isMainTab","_setId","id","_setActive","active","_setEvent","_onInitOnce","regeneratorRuntime","mark","_callee2","_this2","wrap","_callee2$","_context2","prev","next","enabled","t0","checkIsMain","t1","sent","on","events","mainTabIdChanged","_callee","_callee$","_context","stop","_len","Array","_key","onInitOnce","_send","_callee3","_this$tabbie","_len2","_key2","_args3","_callee3$","_context3","send","concat","_x","_checkIsMain","_callee4","_callee4$","_context4","abrupt","_checkTabAliveById","_callee5","_callee5$","_context5","checkTabAliveById","_x2","get","_reducers","combineReducers","spawnStorageReducersKey","spawnReducersKey","_this$tabbie$hasMulti","_this$tabbie2","hasMultipleTabs","_this$tabbie$tabs","_this$tabbie3","tabs","actualTabIds","_this$tabbie$isFirstT","_this$tabbie4","isFirstTab","_this$tabbie5","RcModuleV2","proxify","exports","_default"],"sources":["modules/TabManager/TabManager.ts"],"sourcesContent":["// @ts-nocheck\nimport { combineReducers } from 'redux';\n\nimport {\n  action,\n  identifierKey,\n  RcModuleV2,\n  spawnReducersKey,\n  spawnStorageReducersKey,\n  state,\n  usmAction,\n} from '@ringcentral-integration/core';\n\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport { Tabbie } from '../../lib/Tabbie';\nimport type { Deps, TabEvent } from './TabManager.interface';\n\n@Module({\n  name: 'TabManager',\n  deps: [{ dep: 'TabManagerOptions', optional: true }, 'Prefix'],\n})\nexport class TabManager<T extends Deps = Deps> extends RcModuleV2<T> {\n  public tabbie: Tabbie;\n  constructor(deps: T) {\n    super({\n      deps,\n      enableGlobalCache: deps.tabManagerOptions?.enableCache ?? false,\n    });\n    this.tabbie = new Tabbie({\n      prefix: this._deps.prefix,\n      autoMainTab: this._deps.tabManagerOptions?.autoMainTab,\n      isMainTab: this._deps.tabManagerOptions?.isMainTab,\n    });\n  }\n\n  @state\n  id: string = null;\n\n  @action\n  protected _setId(id: string) {\n    this.id = id;\n  }\n\n  /**\n   * Default to true. If tabbie cannot be enabled due to env, the runtime\n   * should assume active.\n   */\n  @state\n  active = true;\n\n  @action\n  protected _setActive(active: boolean) {\n    this.active = active;\n  }\n\n  @state\n  event: TabEvent = null;\n\n  @action\n  protected _setEvent(event: string, args: any[]) {\n    this.event = {\n      name: event,\n      args,\n    };\n  }\n\n  _eventReducer = (state: TabEvent = null, action: any) => {\n    if (\n      action._usm === usmAction &&\n      action.type === this[identifierKey] &&\n      Object.hasOwnProperty.call(action._state, 'event')\n    ) {\n      const { event } = action._state;\n      if (\n        event &&\n        // It needs to match the exact modification event about `@action _setEvent()` in this module for Redux state.\n        // And it is a one-time state in Redux store.\n        action.method === '_setEvent' &&\n        action.type === this[identifierKey]\n      )\n        return event;\n    }\n    return null;\n  };\n\n  get reducer() {\n    if (this._reducers)\n      return combineReducers({\n        ...this._reducers,\n        event: this._eventReducer,\n      });\n    this[spawnStorageReducersKey]();\n    this[spawnReducersKey]();\n    return combineReducers({\n      ...this._reducers,\n      event: this._eventReducer,\n    });\n  }\n\n  override async onInitOnce() {\n    this._setId(this.tabbie.id);\n    if (this.tabbie.enabled) {\n      this._setActive(await this.tabbie.checkIsMain());\n      this.tabbie.on(this.tabbie.events.mainTabIdChanged, async () => {\n        this._setActive(await this.tabbie.checkIsMain());\n      });\n      this.tabbie.on(\n        this.tabbie.events.event,\n        (event: string, ...args: any[]) => {\n          this._setEvent(event, args);\n        },\n      );\n    }\n  }\n\n  @proxify\n  async send(event: string, ...args: any[]) {\n    this.tabbie.send(event, ...args);\n  }\n\n  @proxify\n  async checkIsMain() {\n    return this.tabbie.checkIsMain();\n  }\n\n  @proxify\n  async checkTabAliveById(id: string) {\n    return this.tabbie.checkTabAliveById(id);\n  }\n\n  get hasMultipleTabs() {\n    return this.tabbie?.hasMultipleTabs ?? false;\n  }\n\n  get tabs() {\n    return this.tabbie?.tabs ?? [];\n  }\n\n  get actualTabIds() {\n    return this.tabbie.actualTabIds;\n  }\n\n  get isFirstTab() {\n    return this.tabbie?.isFirstTab ?? true;\n  }\n\n  get enable() {\n    return this.tabbie?.enabled;\n  }\n}\n\n// For backward compatibility\nexport default TabManager;\n"],"mappings":"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"}