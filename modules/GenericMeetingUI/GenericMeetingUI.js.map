{"version":3,"sources":["modules/GenericMeetingUI/GenericMeetingUI.ts"],"names":["GenericMeetingUI","name","deps","status","isPmiChangeConfirmed","disabled","showRcvAdminLock","configDisabled","showPmiConfirm","isDelegator","meeting","delegators","user","item","extensionId","isLoginUser","enableWaitingRoom","_deps","genericMeeting","ready","showE2EE","enableE2EE","settingLock","e2ee","isOnlyCoworkersJoin","isPmiConfigDisabled","usePersonalMeetingId","isE2eeRelatedOptionsDisabled","isE2EEDisabled","appFeatures","hasVideoE2EE","key","DISABLE_E2EE_WHEN_RELATED_OPTION_MATCH","Object","keys","authUserTypeValue","AUTH_USER_TYPE","SIGNED_IN_CO_WORKERS","SIGNED_IN_USERS","showWaitingRoom","isPersonalMeetingDisabled","joinBeforeHostLabel","JBH_LABEL","JOIN_AFTER_HOST","JOIN_AFTER_ME","isRequirePasswordDisabled","isMeetingSecret","isJoinBeforeHostDisabled","allowJoinBeforeHost","waitingRoomMode","RCV_WAITING_ROOM_MODE","all","isMuteAudioDisabled","isTurnOffCameraDisabled","isAllowScreenSharingDisabled","allowScreenSharing","isWaitingRoomDisabled","isWaitingRoomTypeDisabled","isWaitingRoomNotCoworkerDisabled","isWaitingRoomGuestDisabled","isOnlyAuthUserJoin","isWaitingRoomAllDisabled","isAuthenticatedCanJoinDisabled","isAuthUserTypeDisabled","isSignedInUsersDisabled","isSignedInCoWorkersDisabled","showRecurringMeeting","props","useRcmV2","showTopic","showWhen","showDuration","openNewWindow","labelPlacement","scheduleButton","datePickerSize","timePickerSize","recurringMeetingPosition","isRCM","isRCV","isAllOptionDisabled","isMeetingPasswordValid","isScheduling","connectivityMonitor","connectivity","rateLimiter","throttling","config","getRcmConfig","getRcvConfig","currentLocale","locale","showScheduleOnBehalf","length","showSaveAsDefault","disableSaveAsDefault","enableServiceWebSettings","enablePersonalMeeting","personalMeetingId","showSpinner","showSpinnerInConfigPanel","isUpdating","hasSettingsChanged","defaultSetting","defaultTopic","schedule","switchUsePersonalMeetingId","setIsPmiChangeConfirmed","updateHasSettingsChanged","updateScheduleFor","userExtensionId","updateMeetingSettings","value","validatePasswordSettings","password","isSecret","meetingInfo","opener","init","e2eeInteractFunc","e2eeValue","turnOnE2ee","onPmiChangeClick","modalUI","confirm","maxWidth","childrenSize","isSmallScreen","title","i18n","getString","content","onConfirm","confirmButtonText","cancelButtonText","document","body","clientWidth","RcUIModuleV2","state","action"],"mappings":"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","sourcesContent":["import { any, find } from 'ramda';\n\nimport { RcVMeetingModel } from '@ringcentral-integration/commons/interfaces/Rcv.model';\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport { RcMMeetingModel } from '@ringcentral-integration/commons/modules/MeetingV2';\nimport {\n  AUTH_USER_TYPE,\n  DISABLE_E2EE_WHEN_RELATED_OPTION_MATCH,\n  DisableE2eeWhenRelatedOptionMatch,\n  JBH_LABEL,\n  RCV_WAITING_ROOM_MODE,\n  RcvDelegator,\n} from '@ringcentral-integration/commons/modules/RcVideoV2';\nimport { RcUIModuleV2, action, state } from '@ringcentral-integration/core';\n\nimport {\n  Deps,\n  GenericMeetingContainerProps,\n} from './GenericMeetingUI.interface';\nimport i18n from './i18n';\n\n@Module({\n  name: 'GenericMeetingUI',\n  deps: [\n    'GenericMeeting',\n    'AppFeatures',\n    'Locale',\n    'ModalUI',\n    'RateLimiter',\n    'ConnectivityMonitor',\n  ],\n})\nexport class GenericMeetingUI<T extends Deps = Deps> extends RcUIModuleV2<T> {\n  constructor(deps: T & Deps) {\n    super({\n      deps,\n    });\n  }\n\n  @state\n  isPmiChangeConfirmed = false;\n\n  @action\n  setIsPmiChangeConfirmed(status: boolean) {\n    this.isPmiChangeConfirmed = status;\n  }\n\n  getRcvConfig({\n    disabled = false,\n    showRcvAdminLock = false,\n    configDisabled = false,\n    showPmiConfirm = false,\n  }) {\n    let isDelegator = false;\n    const meeting = this.meeting as RcVMeetingModel;\n    const delegators = this.delegators as RcvDelegator[];\n    const user = find(\n      (item) => item.extensionId === meeting.extensionId,\n      delegators,\n    );\n    isDelegator = user && !user.isLoginUser;\n\n    const enableWaitingRoom =\n      this._deps.genericMeeting.ready &&\n      this._deps.genericMeeting.enableWaitingRoom;\n\n    const showE2EE =\n      this._deps.genericMeeting.ready && this._deps.genericMeeting.enableE2EE;\n    const { settingLock = {}, e2ee, isOnlyCoworkersJoin } = meeting;\n\n    const isPmiConfigDisabled =\n      configDisabled ||\n      (showPmiConfirm &&\n        this.meeting.usePersonalMeetingId &&\n        !this.isPmiChangeConfirmed);\n\n    // when e2ee is on, waiting room&auth can join&require password&jbh will be disabled and turn on.\n    const isE2eeRelatedOptionsDisabled = showE2EE && e2ee;\n\n    const isE2EEDisabled =\n      showE2EE &&\n      ((this._deps.appFeatures.ready && !this._deps.appFeatures.hasVideoE2EE) ||\n        settingLock.e2ee ||\n        any(\n          (key: DisableE2eeWhenRelatedOptionMatch) =>\n            settingLock[key] &&\n            meeting[key] === DISABLE_E2EE_WHEN_RELATED_OPTION_MATCH[key],\n        )(\n          Object.keys(\n            DISABLE_E2EE_WHEN_RELATED_OPTION_MATCH,\n          ) as DisableE2eeWhenRelatedOptionMatch[],\n        ));\n\n    const authUserTypeValue = isOnlyCoworkersJoin\n      ? AUTH_USER_TYPE.SIGNED_IN_CO_WORKERS\n      : AUTH_USER_TYPE.SIGNED_IN_USERS;\n\n    return {\n      meeting,\n      showE2EE,\n      delegators,\n      isE2EEDisabled,\n      authUserTypeValue,\n      isE2eeRelatedOptionsDisabled,\n      showWaitingRoom: enableWaitingRoom,\n      isPersonalMeetingDisabled: showE2EE && meeting.e2ee,\n      joinBeforeHostLabel: isDelegator\n        ? JBH_LABEL.JOIN_AFTER_HOST\n        : JBH_LABEL.JOIN_AFTER_ME,\n      isRequirePasswordDisabled:\n        isE2eeRelatedOptionsDisabled ||\n        isPmiConfigDisabled ||\n        configDisabled ||\n        (showRcvAdminLock && meeting.settingLock?.isMeetingSecret),\n      isJoinBeforeHostDisabled:\n        configDisabled ||\n        isPmiConfigDisabled ||\n        (showRcvAdminLock && meeting.settingLock?.allowJoinBeforeHost) ||\n        (enableWaitingRoom &&\n          meeting.waitingRoomMode === RCV_WAITING_ROOM_MODE.all),\n      isMuteAudioDisabled: configDisabled || isPmiConfigDisabled,\n      isTurnOffCameraDisabled: configDisabled || isPmiConfigDisabled,\n      isAllowScreenSharingDisabled:\n        configDisabled ||\n        isPmiConfigDisabled ||\n        (showRcvAdminLock && meeting.settingLock?.allowScreenSharing),\n      isWaitingRoomDisabled:\n        isE2eeRelatedOptionsDisabled ||\n        isPmiConfigDisabled ||\n        configDisabled ||\n        (showRcvAdminLock && meeting.settingLock?.waitingRoomMode),\n      isWaitingRoomTypeDisabled:\n        disabled ||\n        configDisabled ||\n        isPmiConfigDisabled ||\n        (showRcvAdminLock && meeting.settingLock?.waitingRoomMode),\n      isWaitingRoomNotCoworkerDisabled: meeting.isOnlyCoworkersJoin,\n      isWaitingRoomGuestDisabled:\n        meeting.isOnlyAuthUserJoin || (showE2EE && meeting.e2ee),\n      isWaitingRoomAllDisabled: false,\n      isAuthenticatedCanJoinDisabled:\n        isE2eeRelatedOptionsDisabled ||\n        configDisabled ||\n        isPmiConfigDisabled ||\n        (showRcvAdminLock && meeting.settingLock?.isOnlyAuthUserJoin),\n      isAuthUserTypeDisabled:\n        disabled ||\n        configDisabled ||\n        isPmiConfigDisabled ||\n        (showRcvAdminLock && meeting.settingLock?.isOnlyCoworkersJoin),\n      isSignedInUsersDisabled: false,\n      isSignedInCoWorkersDisabled: false,\n    };\n  }\n\n  getRcmConfig({ showRecurringMeeting }: { showRecurringMeeting: boolean }) {\n    return {\n      delegators: this.delegators,\n      showRecurringMeeting:\n        !this.meeting?.usePersonalMeetingId && showRecurringMeeting,\n    };\n  }\n\n  getUIProps(props: GenericMeetingContainerProps) {\n    const {\n      useRcmV2,\n      disabled,\n      showTopic,\n      showWhen,\n      showDuration,\n      openNewWindow,\n      labelPlacement,\n      scheduleButton,\n      datePickerSize,\n      timePickerSize,\n      recurringMeetingPosition,\n      showRcvAdminLock = false,\n      showPmiConfirm = false,\n      configDisabled = false,\n    } = props;\n    const isRCM = this._deps.genericMeeting.isRCM;\n    const isRCV = this._deps.genericMeeting.isRCV;\n    const isAllOptionDisabled = !!(\n      disabled ||\n      !this.meeting?.isMeetingPasswordValid ||\n      (this._deps.genericMeeting.ready &&\n        this._deps.genericMeeting.isScheduling) ||\n      (this._deps.connectivityMonitor &&\n        !this._deps.connectivityMonitor.connectivity) ||\n      (this._deps.rateLimiter && this._deps.rateLimiter.throttling)\n    );\n\n    const config = isRCM ? this.getRcmConfig(props) : this.getRcvConfig(props);\n\n    return {\n      isRCV,\n      isRCM,\n      useRcmV2,\n      showWhen,\n      showTopic,\n      showDuration,\n      openNewWindow,\n      scheduleButton,\n      labelPlacement,\n      datePickerSize,\n      timePickerSize,\n      showRcvAdminLock,\n      showPmiConfirm,\n      recurringMeetingPosition,\n      meeting: this.meeting,\n      currentLocale: this._deps.locale.currentLocale,\n      disabled: isAllOptionDisabled,\n      configDisabled,\n      showScheduleOnBehalf: !!(this.delegators && this.delegators.length > 0),\n      showSaveAsDefault:\n        this._deps.genericMeeting.ready &&\n        this._deps.genericMeeting.showSaveAsDefault,\n      // Need to add this back when we back to this ticket\n      // https://jira.ringcentral.com/browse/RCINT-15031\n      // disableSaveAsDefault:\n      //   this._deps.genericMeeting.ready &&\n      //   !this._deps.genericMeeting.isPreferencesChanged,\n      disableSaveAsDefault: false,\n      enableServiceWebSettings:\n        this._deps.genericMeeting.ready &&\n        this._deps.genericMeeting.enableServiceWebSettings,\n      enablePersonalMeeting:\n        this._deps.genericMeeting.ready &&\n        this._deps.genericMeeting.enablePersonalMeeting,\n      personalMeetingId:\n        this._deps.genericMeeting.ready &&\n        this._deps.genericMeeting.personalMeetingId,\n      showSpinner: !!(\n        !this._deps.locale.ready ||\n        !this._deps.genericMeeting.ready ||\n        (!isRCM && !isRCV) ||\n        !this._deps.genericMeeting.meeting ||\n        (this._deps.connectivityMonitor &&\n          !this._deps.connectivityMonitor.ready) ||\n        (this._deps.rateLimiter && !this._deps.rateLimiter.ready)\n      ),\n      showSpinnerInConfigPanel: this._deps.genericMeeting.isUpdating,\n      hasSettingsChanged: this._deps.genericMeeting.hasSettingsChanged,\n      defaultSetting: this._deps.genericMeeting.defaultSetting,\n      defaultTopic: this._deps.genericMeeting.ready\n        ? this._deps.genericMeeting.defaultTopic\n        : '',\n      isPmiChangeConfirmed: this.isPmiChangeConfirmed,\n      ...config,\n    };\n  }\n\n  getUIFunctions({ schedule }: any) {\n    return {\n      switchUsePersonalMeetingId: (usePersonalMeetingId: boolean) => {\n        this._deps.genericMeeting.switchUsePersonalMeetingId(\n          usePersonalMeetingId,\n        );\n        // reset pmi change confirm popup\n        if (usePersonalMeetingId) {\n          this.setIsPmiChangeConfirmed(false);\n        }\n        this._deps.genericMeeting.updateHasSettingsChanged(true);\n      },\n      updateScheduleFor: (userExtensionId: string) =>\n        this._deps.genericMeeting.updateScheduleFor(userExtensionId),\n      // TODO: any is reserved for RcM\n      updateMeetingSettings: (value: RcMMeetingModel | RcVMeetingModel) => {\n        this._deps.genericMeeting.updateHasSettingsChanged(true);\n        this._deps.genericMeeting.updateMeetingSettings(value);\n      },\n      validatePasswordSettings: (\n        password: string,\n        isSecret: boolean,\n      ): boolean => {\n        return this._deps.genericMeeting.validatePasswordSettings(\n          password,\n          isSecret,\n        );\n      },\n      schedule: (\n        meetingInfo: RcMMeetingModel | RcVMeetingModel,\n        opener: Window,\n      ) => {\n        if (schedule) {\n          return schedule(meetingInfo, opener);\n        }\n        return this._deps.genericMeeting.schedule(meetingInfo, {}, opener);\n      },\n      init: () => this._deps.genericMeeting.init(),\n      // TODO: Moving to RcVideo updateMeetingSettings would be better\n      e2eeInteractFunc: (e2eeValue: boolean) => {\n        if (!e2eeValue) {\n          this._deps.genericMeeting.updateMeetingSettings({\n            e2ee: e2eeValue,\n          } as RcVMeetingModel);\n          // when user turn on e2ee option in pmi meeting, should switch to non-pmi meeting\n        } else if (this._deps.genericMeeting.meeting.usePersonalMeetingId) {\n          this._deps.genericMeeting.switchUsePersonalMeetingId(false);\n          this._deps.genericMeeting.turnOnE2ee();\n        } else {\n          this._deps.genericMeeting.turnOnE2ee();\n        }\n        this._deps.genericMeeting.updateHasSettingsChanged(true);\n      },\n      onPmiChangeClick: async () => {\n        const currentLocale = this._deps.locale.currentLocale;\n        this._deps.modalUI.confirm({\n          maxWidth: 'xs',\n          childrenSize: this.isSmallScreen ? 'small' : 'medium',\n          title: i18n.getString('pmiChangeConfirmTitle', currentLocale),\n          content: i18n.getString('pmiChangeConfirmContext', currentLocale),\n          onConfirm: () => {\n            this.setIsPmiChangeConfirmed(true);\n          },\n          confirmButtonText: i18n.getString(\n            'pmiChangeConfirmed',\n            currentLocale,\n          ),\n          cancelButtonText: i18n.getString('pmiChangeCancel', currentLocale),\n        });\n      },\n    };\n  }\n\n  get meeting() {\n    return (\n      (this._deps.genericMeeting.ready && this._deps.genericMeeting.meeting) ||\n      {}\n    );\n  }\n\n  get delegators() {\n    return (\n      (this._deps.genericMeeting.ready &&\n        this._deps.genericMeeting.delegators) ||\n      []\n    );\n  }\n\n  get isSmallScreen() {\n    return document.body.clientWidth < 290;\n  }\n}\n"],"file":"GenericMeetingUI.js"}