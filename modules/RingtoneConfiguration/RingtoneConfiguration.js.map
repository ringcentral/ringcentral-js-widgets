{"version":3,"file":"RingtoneConfiguration.js","names":["_core","require","_trackEvents","_di","_proxify","_AudioSettings","_const","_helper","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_descriptor2","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","Symbol","iterator","isArray","length","e","n","ownKeys","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","asyncGeneratorStep","c","i","u","done","Promise","resolve","then","_asyncToGenerator","_next","_throw","_initializerDefineProperty","l","initializer","_classCallCheck","_defineProperties","key","_createClass","prototype","_toPrimitive","_typeof","toPrimitive","String","Number","_inherits","create","_setPrototypeOf","setPrototypeOf","bind","__proto__","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","reverse","reduce","_initializerWarningHelper","Error","RingtoneConfiguration","Module","deps","track","trackEvents","uploadRingtone","deleteRingtone","computed","that","enableCustomRingtone","customRingtoneList","_RcModuleV","_super","_this","storageKey","enableCache","onInit","updateIncomingRingtone","_setSelectedRingtoneId","id","selectedRingtoneId","_setSelectedRingtoneId2","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","setSelectedRingtoneId","_x","_pushCustomRingtone","ringtone","_removeCustomRingtone","_uploadCustomRingtone","_callee2","_callee2$","_context2","uploadCustomRingtone","_x2","_removeCustomRingtone2","_callee3","hasCustomRingtone","_callee3$","_context3","find","showDangerAlert","audioSettingsErrors","deleteRingtoneFailed","defaultRingtoneList","removeCustomRingtone","_x3","_showDangerAlert","_callee4","message","_callee4$","_context4","_deps","alert","danger","allowDuplicates","_x4","_updateIncomingRingtone","_callee5","selectedRingtoneAudio","_callee5$","_context5","getSelectedRingtoneAudio","dataUrl","webphone","incomingAudio","setIncomingAudio","_this2","fullRingtoneList","url","type","RINGS_TYPE","Off","fileName","getFileNameWithoutExt","get","_this$_deps$ringtoneC","_this$_deps$ringtoneC2","ringtoneConfigurationOptions","DEFAULT_RINGTONE_LIST","map","item","sort","b","nameA","toLowerCase","nameB","concat","customRingtoneSortedList","_this$_deps$ringtoneC3","_this$_deps$ringtoneC4","MAX_CUSTOM_RINGTONE_COUNT","RcModuleV2","storage","state","action","proxify","exports"],"sources":["modules/RingtoneConfiguration/RingtoneConfiguration.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n  storage,\n  track,\n} from '@ringcentral-integration/core';\n\nimport { trackEvents } from '../../enums/trackEvents';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\nimport { audioSettingsErrors } from '../AudioSettings';\n\nimport type {\n  AudioInfo,\n  Deps,\n  RingtoneItem,\n} from './RingtoneConfiguration.interface';\nimport {\n  DEFAULT_RINGTONE_LIST,\n  MAX_CUSTOM_RINGTONE_COUNT,\n  RINGS_TYPE,\n} from './const';\nimport { getFileNameWithoutExt } from './helper';\n\n@Module({\n  name: 'RingtoneConfiguration',\n  deps: ['Storage', 'Webphone', 'Alert'],\n})\nexport class RingtoneConfiguration extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({\n      deps,\n      storageKey: 'RingtoneConfiguration',\n      enableCache: true,\n    });\n  }\n\n  override onInit() {\n    this.updateIncomingRingtone();\n  }\n\n  @storage\n  @state\n  selectedRingtoneId: string = this.defaultRingtoneList[0].id;\n\n  @storage\n  @state\n  customRingtoneList: RingtoneItem[] = [];\n\n  @action\n  private _setSelectedRingtoneId(id: string) {\n    this.selectedRingtoneId = id;\n  }\n\n  @proxify\n  async setSelectedRingtoneId(id: string) {\n    this._setSelectedRingtoneId(id);\n  }\n\n  @action\n  private _pushCustomRingtone(ringtone: RingtoneItem) {\n    this.customRingtoneList.push(ringtone);\n  }\n\n  @action\n  private _removeCustomRingtone(id: string) {\n    this.customRingtoneList = this.customRingtoneList.filter(\n      (ringtone) => ringtone.id !== id,\n    );\n  }\n\n  @track(trackEvents.uploadRingtone)\n  @proxify\n  async uploadCustomRingtone(ringtone: RingtoneItem) {\n    this._pushCustomRingtone(ringtone);\n  }\n\n  @track(trackEvents.deleteRingtone)\n  @proxify\n  async removeCustomRingtone(id: string) {\n    const hasCustomRingtone = this.customRingtoneList.find(\n      (ringtone) => ringtone.id === id,\n    );\n    if (!id || !hasCustomRingtone) {\n      this.showDangerAlert(audioSettingsErrors.deleteRingtoneFailed);\n    }\n    this._removeCustomRingtone(id);\n    // if the remove one the selected ringtone, set the first default ringtone as selected\n    if (id === this.selectedRingtoneId) {\n      this.setSelectedRingtoneId(this.defaultRingtoneList[0].id);\n      this.updateIncomingRingtone();\n    }\n  }\n\n  @proxify\n  async showDangerAlert(message: string) {\n    this._deps.alert.danger({\n      message,\n      allowDuplicates: false,\n    });\n  }\n\n  @proxify\n  async updateIncomingRingtone() {\n    const selectedRingtoneAudio = this.getSelectedRingtoneAudio();\n    if (\n      selectedRingtoneAudio &&\n      selectedRingtoneAudio.dataUrl !== this._deps.webphone.incomingAudio\n    ) {\n      this._deps.webphone.setIncomingAudio(selectedRingtoneAudio);\n    }\n  }\n\n  getSelectedRingtoneAudio(): AudioInfo | null {\n    const ringtone = this.fullRingtoneList.find(\n      (ringtone) => ringtone.id === this.selectedRingtoneId,\n    );\n    if (!ringtone?.url) {\n      if (ringtone?.type === 'default' && ringtone?.id === RINGS_TYPE.Off) {\n        return {\n          fileName: RINGS_TYPE.Off,\n          dataUrl: '',\n        };\n      }\n      return null;\n    }\n    return {\n      fileName: getFileNameWithoutExt(ringtone.name),\n      dataUrl: ringtone.url,\n    };\n  }\n\n  get defaultRingtoneList(): RingtoneItem[] {\n    return (\n      this._deps.ringtoneConfigurationOptions?.defaultRingtoneList ??\n      DEFAULT_RINGTONE_LIST\n    ).map((item) => ({\n      ...item,\n      type: 'default',\n      name: item.id,\n    }));\n  }\n\n  get customRingtoneSortedList() {\n    return this.customRingtoneList.sort((a, b) => {\n      const nameA = a.name!.toLowerCase();\n      const nameB = b.name!.toLowerCase();\n\n      if (nameA < nameB) return -1;\n      if (nameA > nameB) return 1;\n      return 0;\n    });\n  }\n\n  get fullRingtoneList() {\n    return [...this.customRingtoneSortedList, ...this.defaultRingtoneList];\n  }\n\n  get enableCustomRingtone() {\n    return (\n      this._deps.ringtoneConfigurationOptions?.enableCustomRingtone ?? true\n    );\n  }\n\n  @computed((that: RingtoneConfiguration) => [\n    that.enableCustomRingtone,\n    that.customRingtoneList,\n  ])\n  get isUploadRingtoneDisabled() {\n    return (\n      this.enableCustomRingtone &&\n      this.customRingtoneList.length >= MAX_CUSTOM_RINGTONE_COUNT\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}