{"version":3,"file":"helper.js","names":["_callActions","require","_callLogHelpers","_getDateFrom","_interopRequireDefault","obj","__esModule","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","keys","processData","data","_data$syncInfo","records","timestamp","Date","now","syncToken","syncInfo","getISODateFrom","daySpan","d","getDateFrom","toISOString","getISODateTo","dateTo","forEach","startTime","processRecords","arguments","undefined","supplementRecords","ids","output","processCall","id","action","callActions","findMe","uri","removeUriCall","push","normalizeStartTime"],"sources":["modules/CallLog/helper.ts"],"sourcesContent":["import { callActions } from '../../enums/callActions';\nimport { normalizeStartTime } from '../../lib/callLogHelpers';\nimport getDateFrom from '../../lib/getDateFrom';\nimport type {\n  CallLogList,\n  CallLogRecord,\n  CallLogRecords,\n  CallLogSyncData,\n} from './CallLog.interface';\n\nexport function processData(data: CallLogSyncData) {\n  return {\n    records: data.records,\n    timestamp: Date.now(),\n    syncToken: data.syncInfo?.syncToken,\n  };\n}\n\nexport function getISODateFrom(daySpan: number) {\n  const d = getDateFrom(daySpan);\n  return d.toISOString();\n}\n\nexport function getISODateTo(records: CallLogList) {\n  let dateTo: number | undefined;\n  records.forEach((call) => {\n    if (!dateTo || call.startTime < dateTo) dateTo = call.startTime;\n  });\n  return dateTo && new Date(dateTo).toISOString();\n}\n\nexport function processRecords(\n  records: CallLogRecords = [],\n  supplementRecords: CallLogRecords = [],\n) {\n  const ids: Record<string, boolean> = {};\n  const output: CallLogList = [];\n  function processCall(call: CallLogRecord) {\n    if (call.id && !ids[call.id] && call.action !== callActions.findMe) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { uri, ...removeUriCall } = call;\n      output.push(normalizeStartTime(removeUriCall));\n      ids[call.id] = true;\n    }\n  }\n  records.forEach(processCall);\n  supplementRecords.forEach(processCall);\n  return output;\n}\n"],"mappings":"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"}