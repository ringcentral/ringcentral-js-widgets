{"version":3,"file":"helper.js","names":["_callActions","require","_callLogHelpers","_getDateFrom","_interopRequireDefault","e","__esModule","_objectWithoutProperties","t","o","r","i","_objectWithoutPropertiesLoose","Object","getOwnPropertySymbols","n","length","indexOf","propertyIsEnumerable","call","hasOwnProperty","processData","data","_data$syncInfo","records","timestamp","Date","now","syncToken","syncInfo","getISODateFrom","daySpan","d","getDateFrom","toISOString","getISODateTo","dateTo","forEach","startTime","processRecords","arguments","undefined","supplementRecords","ids","output","processCall","id","action","callActions","findMe","uri","removeUriCall","push","normalizeStartTime"],"sources":["modules/CallLog/helper.ts"],"sourcesContent":["import { callActions } from '../../enums/callActions';\nimport { normalizeStartTime } from '../../lib/callLogHelpers';\nimport getDateFrom from '../../lib/getDateFrom';\n\nimport type {\n  CallLogList,\n  CallLogRecord,\n  CallLogRecords,\n  CallLogSyncData,\n} from './CallLog.interface';\n\nexport function processData(data: CallLogSyncData) {\n  return {\n    records: data.records,\n    timestamp: Date.now(),\n    syncToken: data.syncInfo?.syncToken,\n  };\n}\n\nexport function getISODateFrom(daySpan: number) {\n  const d = getDateFrom(daySpan);\n  return d.toISOString();\n}\n\nexport function getISODateTo(records: CallLogList) {\n  let dateTo: number | undefined;\n  records.forEach((call) => {\n    if (!dateTo || call.startTime < dateTo) dateTo = call.startTime;\n  });\n  return dateTo && new Date(dateTo).toISOString();\n}\n\nexport function processRecords(\n  records: CallLogRecords = [],\n  supplementRecords: CallLogRecords = [],\n) {\n  const ids: Record<string, boolean> = {};\n  const output: CallLogList = [];\n  function processCall(call: CallLogRecord) {\n    if (call.id && !ids[call.id] && call.action !== callActions.findMe) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const { uri, ...removeUriCall } = call;\n      output.push(normalizeStartTime(removeUriCall));\n      ids[call.id] = true;\n    }\n  }\n  records.forEach(processCall);\n  supplementRecords.forEach(processCall);\n  return output;\n}\n"],"mappings":"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","ignoreList":[]}