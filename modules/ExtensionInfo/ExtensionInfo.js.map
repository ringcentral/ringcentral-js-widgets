{"version":3,"file":"ExtensionInfo.js","names":["_core","require","_renameTurkey","_permissionsMessages","_subscriptionFilters","_subscriptionHints","_di","_DataFetcherV","_dec","_dec2","_dec3","_class","_class2","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","target","i","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","_toPropertyKey","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","prototype","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","call","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","property","decorators","context","desc","initializer","slice","reverse","reduce","decorator","extensionRegExp","DEFAULT_COUNTRY","id","isoCode","callingCode","ExtensionInfo","Module","name","deps","dep","optional","computed","_ref","data","_ref2","_DataFetcherV2Consume","_super","_this$_deps$extension","_this","_stopWatching","extensionInfoOptions","_deps","_extensionInfoOptions","polling","_source","DataSource","cleanOnReset","fetchFunction","_fetchFunction","regeneratorRuntime","mark","_callee","_error$response","wrap","_callee$","_context","prev","next","client","account","extension","get","sent","abrupt","t0","response","status","auth","logout","alert","danger","message","permissionsMessages","insufficientPrivilege","ttl","stop","readyCheckFunction","loggedIn","dataFetcherV2","register","_handleSubscription","_this$_deps$tabManage","_this$_deps$tabManage2","_message$body","_message$body$hints","_message$body2","_message$body2$hints","_message$body3","_message$body3$hints","_message$body4","_message$body4$hints","_message$body5","_message$body5$hints","ready","disableCache","tabManager","active","test","event","body","hints","includes","subscriptionHints","companyNumbers","limits","features","permissions","videoConfiguration","fetchData","onInit","_this2","subscription","subscribe","subscriptionFilters","extensionInfo","watch","onReset","_this$_stopWatching","_this$data","_this$data$regionalSe","_this$data2","regionalSettings","homeCountry","renameTurkeyCountry","extensionNumber","_this$info$regionalSe","departments","_this$_deps$extension2","_this$_deps$extension3","isMultipleSiteEnabled","_this$_deps$extension4","_this$_deps$extension5","extensionFeatures","SiteCodes","available","site","console","warn","Array","isArray","_this$info$regionalSe2","_this$info$regionalSe3","DataFetcherV2Consumer","exports"],"sources":["modules/ExtensionInfo/ExtensionInfo.ts"],"sourcesContent":["import type { Unsubscribe } from 'redux';\nimport type ExtensionInfoEvent from '@rc-ex/core/lib/definitions/ExtensionInfoEvent';\nimport type GetExtensionInfoResponse from '@rc-ex/core/lib/definitions/GetExtensionInfoResponse';\nimport { computed, watch } from '@ringcentral-integration/core';\nimport { renameTurkeyCountry } from '../../helpers/renameTurkey';\nimport { permissionsMessages } from '../../enums/permissionsMessages';\nimport { subscriptionFilters } from '../../enums/subscriptionFilters';\nimport { subscriptionHints } from '../../enums/subscriptionHints';\nimport { Module } from '../../lib/di';\nimport { DataFetcherV2Consumer, DataSource } from '../DataFetcherV2';\nimport type { Deps } from './ExtensionInfo.interface';\n\nconst extensionRegExp = /.*\\/extension\\/\\d+$/;\nconst DEFAULT_COUNTRY = {\n  id: '1',\n  isoCode: 'US',\n  callingCode: '1',\n};\n\n@Module({\n  name: 'ExtensionInfo',\n  deps: [\n    'Auth',\n    'Client',\n    'DataFetcherV2',\n    'ExtensionFeatures',\n    { dep: 'Subscription', optional: true },\n    'Alert',\n    { dep: 'TabManager', optional: true },\n    { dep: 'ExtensionInfoOptions', optional: true },\n  ],\n})\nexport class ExtensionInfo extends DataFetcherV2Consumer<\n  Deps,\n  GetExtensionInfoResponse\n> {\n  // @ts-expect-error\n  protected _stopWatching: Unsubscribe;\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n    const extensionInfoOptions = this._deps.extensionInfoOptions ?? {};\n    const { polling = true } = extensionInfoOptions;\n    this._source = new DataSource({\n      ...extensionInfoOptions,\n      key: 'extensionInfo',\n      polling,\n      cleanOnReset: true,\n      fetchFunction: async () => {\n        try {\n          const result: GetExtensionInfoResponse = await this._deps.client\n            .account()\n            .extension()\n            .get();\n          return result;\n        } catch (error: any /** TODO: confirm with instanceof */) {\n          if (error.response?.status === 403) {\n            await this._deps.auth.logout();\n            this._deps.alert.danger({\n              message: permissionsMessages.insufficientPrivilege,\n              ttl: 0,\n            });\n            return {} as GetExtensionInfoResponse;\n          }\n          throw error;\n        }\n      },\n      readyCheckFunction: () => this._deps.auth.loggedIn,\n    });\n    this._deps.dataFetcherV2.register(this._source);\n  }\n\n  private _handleSubscription(message: ExtensionInfoEvent) {\n    if (\n      this.ready &&\n      (this._source.disableCache || (this._deps.tabManager?.active ?? true)) &&\n      // @ts-expect-error\n      extensionRegExp.test(message?.event) &&\n      !(\n        message.body?.hints?.includes(subscriptionHints.companyNumbers) ||\n        message.body?.hints?.includes(subscriptionHints.limits) ||\n        message.body?.hints?.includes(subscriptionHints.features) ||\n        message.body?.hints?.includes(subscriptionHints.permissions) ||\n        message.body?.hints?.includes(subscriptionHints.videoConfiguration)\n      )\n    ) {\n      this.fetchData();\n    }\n  }\n\n  override onInit() {\n    if (this._deps.subscription) {\n      this._deps.subscription.subscribe([subscriptionFilters.extensionInfo]);\n      this._stopWatching = watch(\n        this,\n        () => this._deps.subscription!.message,\n        (message) => this._handleSubscription(message),\n      );\n    }\n  }\n\n  override onReset() {\n    this._stopWatching?.();\n    // @ts-expect-error\n    this._stopWatching = null;\n  }\n\n  @computed(({ data }: ExtensionInfo) => [data])\n  get info(): GetExtensionInfoResponse {\n    if (this.data?.regionalSettings?.homeCountry) {\n      renameTurkeyCountry(this.data.regionalSettings.homeCountry);\n    }\n    return this.data ?? {};\n  }\n\n  get id() {\n    return this.info.id!;\n  }\n\n  get extensionNumber() {\n    return this.info.extensionNumber;\n  }\n\n  get country() {\n    return this.info.regionalSettings?.homeCountry || DEFAULT_COUNTRY;\n  }\n\n  get departments() {\n    return this.info.departments;\n  }\n\n  get isMultipleSiteEnabled() {\n    return !!(this._deps.extensionInfoOptions?.isMultipleSiteEnabled ?? false);\n  }\n\n  @computed(({ info }: ExtensionInfo) => [info])\n  get site() {\n    if (!this.isMultipleSiteEnabled) {\n      return null;\n    }\n    if (\n      this._deps.extensionFeatures.features?.SiteCodes?.available &&\n      !this.info.site\n    ) {\n      console.warn('site code enabled, but cannot retrieve site info');\n    }\n    return this.info.site || null;\n  }\n\n  get isCallQueueMember() {\n    return (\n      !!this.departments &&\n      Array.isArray(this.departments) &&\n      this.departments.length > 0\n    );\n  }\n\n  get isoCode() {\n    return this.info.regionalSettings?.homeCountry?.isoCode;\n  }\n}\n"],"mappings":"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"}