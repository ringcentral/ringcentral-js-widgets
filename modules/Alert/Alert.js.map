{"version":3,"file":"Alert.js","names":["_core","require","uuid","_interopRequireWildcard","_di","_proxify","_alertLevels","_dec","_class","_class2","_descriptor","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","asyncGeneratorStep","o","c","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","length","indexOf","propertyIsEnumerable","_initializerDefineProperty","l","enumerable","configurable","writable","initializer","ownKeys","keys","filter","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_classCallCheck","TypeError","_defineProperties","key","_createClass","prototype","_toPrimitive","Symbol","toPrimitive","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","slice","reverse","reduce","_initializerWarningHelper","Error","Alert","Module","name","deps","dep","optional","_RcModuleV","_super","_deps$alertOptions$tt","_deps$alertOptions","_deps$alertOptions$en","_deps$alertOptions2","_this","alertOptions","ttl","enableGlobalCache","enableTabSync","storageKey","_autoDismiss","now","Date","ids","messages","item","timestamp","map","id","dismiss","_alert","_ref","allowDuplicates","find","_ref2","message","level","onInit","_this$_deps$alertOpti","_this2","_deps","_ref3","setTimeout","_alert2","regeneratorRuntime","mark","_callee","_ref4","_this$_deps$alertOpti2","payload","_ref4$level","_ref4$ttl","_ref4$allowDuplicates","_ref4$loading","loading","_ref4$backdrop","backdrop","classes","onBackdropClick","_ref4$action","action","wrap","_callee$","_context","prev","next","alertLevels","info","v4","abrupt","stop","alert","_x","danger","options","warning","success","update","assign","_dismiss2","_callee2","_callee2$","_context2","_dismiss","_x2","_dismissAll2","_callee3","_callee3$","_context3","_dismissAll","dismissAll","dismissAllExpectSpecified","_ref5","_this3","specifiedAlertIds","specifiedAlertId","_ids","concat","RcModuleV2","globalStorage","state","proxify","exports"],"sources":["modules/Alert/Alert.ts"],"sourcesContent":["import {\n  action,\n  globalStorage,\n  RcModuleV2,\n  state,\n} from '@ringcentral-integration/core';\nimport * as uuid from 'uuid';\n\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\n\nimport type {\n  AlertItem,\n  AllowDuplicates,\n  Deps,\n  Options,\n} from './Alert.interface';\nimport type { AlertLevelType } from './alertLevels';\nimport { alertLevels } from './alertLevels';\n\n@Module({\n  name: 'Alert',\n  deps: ['GlobalStorage', { dep: 'AlertOptions', optional: true }],\n})\nexport class Alert extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({\n      deps: {\n        ...deps,\n        alertOptions: {\n          ...deps.alertOptions,\n          ttl: deps.alertOptions?.ttl ?? 5000,\n        },\n      },\n      enableGlobalCache: deps.alertOptions?.enableTabSync ?? false,\n      storageKey: 'alert',\n    });\n  }\n\n  @globalStorage\n  @state\n  messages: AlertItem[] = [];\n\n  @action\n  protected _alert({ allowDuplicates, ...item }: AlertItem & AllowDuplicates) {\n    if (\n      !allowDuplicates &&\n      this.messages.find(\n        ({ message, level }) =>\n          item.message === message && item.level === level,\n      )\n    ) {\n      return;\n    }\n    this.messages.push(item);\n  }\n\n  override onInit() {\n    if (this._deps.alertOptions?.enableTabSync) {\n      this.messages.forEach(({ ttl }) => {\n        setTimeout(this._autoDismiss, ttl + 10);\n      });\n    }\n  }\n\n  /**\n   * Scans the messages for expired ones and dismiss them.\n   */\n  _autoDismiss = () => {\n    const now = Date.now();\n    const ids = this.messages\n      .filter((item) => item.ttl > 0 && now - item.timestamp > item.ttl)\n      .map((item) => item.id);\n    if (ids.length) {\n      this.dismiss(ids);\n    }\n  };\n\n  /**\n   * Add alert message to the state.\n   */\n  @proxify\n  async alert({\n    message,\n    payload,\n    level = alertLevels.info as AlertLevelType,\n    ttl = this._deps.alertOptions!.ttl!,\n    allowDuplicates = true,\n    loading = false,\n    backdrop = false,\n    classes,\n    onBackdropClick,\n    action = this._deps.alertOptions?.action,\n  }: Options) {\n    const id = uuid.v4();\n    this._alert({\n      message,\n      payload,\n      level,\n      // when loading the ttl will be zero, make this never dismiss\n      ttl: loading ? 0 : ttl,\n      allowDuplicates,\n      backdrop,\n      classes,\n      onBackdropClick,\n      id,\n      timestamp: Date.now(),\n      loading,\n      action,\n    });\n    if (ttl > 0) {\n      setTimeout(this._autoDismiss, ttl + 10);\n    }\n    return id;\n  }\n\n  /**\n   * Add alert message of alertLevel \"danger\" to the state.\n   */\n  danger(options: Options) {\n    return this.alert({\n      ...options,\n      level: alertLevels.danger,\n    });\n  }\n\n  /**\n   * Add alert message of alertLevel \"warning\" to the state.\n   */\n  warning(options: Options) {\n    return this.alert({\n      ...options,\n      level: alertLevels.warning,\n    });\n  }\n\n  /**\n   * Add alert message of alertLevel \"info\" to the state.\n   */\n  info(options: Options) {\n    return this.alert({\n      ...options,\n      level: alertLevels.info,\n    });\n  }\n\n  /**\n   * Add alert message of alertLevel \"success\" to the state.\n   */\n  success(options: Options) {\n    return this.alert({\n      ...options,\n      level: alertLevels.success,\n    });\n  }\n\n  /**\n   * Update the message with given id.\n   */\n  @action\n  update(\n    id: string,\n    options: Partial<Pick<AlertItem, 'message' | 'loading' | 'action'>>,\n  ) {\n    const message = this.messages.find((item) => item.id === id);\n    if (message) {\n      Object.assign(message, options);\n    }\n  }\n\n  /**\n   * Dismiss the messages/message\n   */\n  @proxify\n  async dismiss(ids: string | string[]) {\n    this._dismiss(ids);\n  }\n\n  /**\n   * Dismiss all messages.\n   */\n  @proxify\n  async dismissAll() {\n    this._dismissAll();\n  }\n\n  /**\n   * Dismiss all other messages expect some specified message.\n   */\n  @action\n  dismissAllExpectSpecified({\n    specifiedAlertIds,\n  }: {\n    specifiedAlertIds: string[];\n  }) {\n    const messages: AlertItem[] = [];\n    specifiedAlertIds.forEach((specifiedAlertId) => {\n      const message = this.messages.find(\n        (item) => item.id === specifiedAlertId,\n      );\n      if (message) messages.push(message);\n    });\n    this.messages = messages;\n  }\n\n  @action\n  _dismiss(ids: string | string[]) {\n    const _ids = ([] as string[]).concat(ids);\n    this.messages = this.messages.filter(\n      (item) => _ids.indexOf(item.id) === -1,\n    );\n  }\n\n  @action\n  _dismissAll() {\n    this.messages = [];\n  }\n}\n"],"mappings":"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","ignoreList":[]}