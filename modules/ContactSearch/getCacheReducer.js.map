{"version":3,"sources":["modules/ContactSearch/getCacheReducer.ts"],"names":["getContactSearchReducer","types","state","type","entities","sourceName","searchString","ttl","save","data","Object","keys","forEach","key","Date","now","timestamp","initSuccess","cleanUp","getCacheReducer","contactSearch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEO,SAASA,uBAAT,CAAiCC,KAAjC,EAAwC;AAC7C,SAAO,YAAmE;AAAA,QAAlEC,KAAkE,uEAA1D,EAA0D;;AAAA;AAAA,QAApDC,IAAoD,QAApDA,IAAoD;AAAA,QAA9CC,QAA8C,QAA9CA,QAA8C;AAAA,QAApCC,UAAoC,QAApCA,UAAoC;AAAA,QAAxBC,YAAwB,QAAxBA,YAAwB;AAAA,QAAVC,GAAU,QAAVA,GAAU;;AACxE,YAAQJ,IAAR;AACE,WAAKF,KAAK,CAACO,IAAX;AAAiB;AACf,cAAMC,IAAI,GAAG,EAAb;AACAC,UAAAA,MAAM,CAACC,IAAP,CAAYT,KAAZ,EAAmBU,OAAnB,CAA2B,UAACC,GAAD,EAAS;AAClC,gBAAIC,IAAI,CAACC,GAAL,KAAab,KAAK,CAACW,GAAD,CAAL,CAAWG,SAAxB,GAAoCT,GAAxC,EAA6C;AAC3CE,cAAAA,IAAI,CAACI,GAAD,CAAJ,GAAYX,KAAK,CAACW,GAAD,CAAjB;AACD;AACF,WAJD;AAKA,cAAMA,GAAG,aAAMR,UAAN,cAAoBC,YAApB,CAAT;AACAG,UAAAA,IAAI,CAACI,GAAD,CAAJ,GAAY;AACVT,YAAAA,QAAQ,EAARA,QADU;AAEVY,YAAAA,SAAS,EAAEF,IAAI,CAACC,GAAL;AAFD,WAAZ;AAIA,iBAAON,IAAP;AACD;;AACD,WAAKR,KAAK,CAACgB,WAAX;AACA,WAAKhB,KAAK,CAACiB,OAAX;AACE,eAAO,EAAP;;AACF;AACE,eAAOhB,KAAP;AAnBJ;AAqBD,GAtBD;AAuBD;;AAEc,SAASiB,eAAT,CAAyBlB,KAAzB,EAAgC;AAC7C,SAAO,4BAAgB;AACrBmB,IAAAA,aAAa,EAAEpB,uBAAuB,CAACC,KAAD;AADjB,GAAhB,CAAP;AAGD","sourcesContent":["import { combineReducers } from 'redux';\n\nexport function getContactSearchReducer(types) {\n  return (state = {}, { type, entities, sourceName, searchString, ttl }) => {\n    switch (type) {\n      case types.save: {\n        const data = {};\n        Object.keys(state).forEach((key) => {\n          if (Date.now() - state[key].timestamp < ttl) {\n            data[key] = state[key];\n          }\n        });\n        const key = `${sourceName}-${searchString}`;\n        data[key] = {\n          entities,\n          timestamp: Date.now(),\n        };\n        return data;\n      }\n      case types.initSuccess:\n      case types.cleanUp:\n        return {};\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getCacheReducer(types) {\n  return combineReducers({\n    contactSearch: getContactSearchReducer(types),\n  });\n}\n"],"file":"getCacheReducer.js"}