{"version":3,"file":"ContactSearch.js","names":["_core","require","_ramda","_uuid","_debounceThrottle","_di","_proxify","_contactSearchStatus","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","_descriptor3","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","Symbol","iterator","Array","from","isArray","_arrayLikeToArray","_createForOfIteratorHelper","e","t","length","_n","F","s","n","done","value","f","o","a","u","call","next","toString","slice","constructor","name","test","ownKeys","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","configurable","writable","asyncGeneratorStep","c","i","Promise","resolve","then","_asyncToGenerator","_next","_throw","_initializerDefineProperty","l","initializer","_classCallCheck","_defineProperties","key","_createClass","prototype","_toPrimitive","_typeof","toPrimitive","String","Number","_get","Reflect","get","bind","p","_superPropBase","hasOwnProperty","_getPrototypeOf","_inherits","create","_setPrototypeOf","setPrototypeOf","__proto__","_createSuper","_isNativeReflectConstruct","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","reverse","reduce","_initializerWarningHelper","Error","DefaultMinimalSearchLength","exports","DefaultSearchingState","searchOnSources","searchString","result","ContactSearch","Module","deps","dep","optional","computed","_ref","searching","_ref2","_RcModuleV","_super","_deps$contactSearchOp","_deps$contactSearchOp2","_this$_deps$contactSe","_this$_deps$contactSe2","_this$_deps$contactSe3","_this$_deps$contactSe4","_this","storageKey","enableCache","contactSearchOptions","_searchSources","Map","_searchSourcesFormat","_searchSourcesCheck","_searchIds","_ttl","_deps","ttl","_minimalSearchLength","minimalSearchLength","_debouncedSearchFn","debounce","fn","search","threshold","_timeoutId","setSearchStatus","searchStatus","clearAndReset","cleanUp","contactSearchStatus","idle","cancel","setPrepareSearch","prepareSearching","setSearchSuccess","_ref3","_this2","entities","sortBy","identity","join","resultMap","item","id","setContactSearch","_ref4","_this3","sourceName","data","contactSearch","Date","now","timestamp","concat","resetContactSearch","onInitSuccess","onReset","_shouldInit","auth","loggedIn","_readyCheck","_shouldReset","ready","addSearchSource","_ref5","searchFn","readyCheckFn","formatFn","has","set","_debouncedSearch","regeneratorRuntime","mark","_callee","_ref6","wrap","_callee$","_context","prev","stop","debouncedSearch","_x","_search","_callee3","_ref7","_this4","_i","_searchOnSources","_callee3$","_context3","abrupt","_clearTimeout","setTimeout","_callee2","_callee2$","_context2","undefined","_searchSource","_x2","clearTimeout","_searchSource2","_callee4","_ref9","searchId","_callee4$","_context4","v4","_searchFromCache","_loadSearching","sent","_saveSearching","t0","_onSearchError","_x3","_ref10","_iterator","_step","err","_ref11","_ref12","_this$searching$resul","_this$searching","_this$searching$resul2","_this$searching$searc","list","sort","current","currentName","currentPhoneNumber","phoneNumber","nextName","nextPhoneNumber","indexOf","RcModuleV2","storage","state","action","proxify"],"sources":["modules/ContactSearch/ContactSearch.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n  storage,\n} from '@ringcentral-integration/core';\nimport { identity, sortBy } from 'ramda';\nimport { v4 } from 'uuid';\n\nimport { debounce } from '../../lib/debounce-throttle';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\n\nimport type {\n  ContactSearchState,\n  Deps,\n  Entities,\n  SearchFromCacheOptions,\n  Searching,\n  SearchSource,\n  SearchSourceOptions,\n  SearchStringOptions,\n  SetContactSearchOptions,\n  SetSearchSuccessOptions,\n} from './ContactSearch.interface';\nimport { contactSearchStatus } from './contactSearchStatus';\n\nexport const DefaultMinimalSearchLength = 3;\n\nexport const DefaultSearchingState: Searching = {\n  searchOnSources: [],\n  searchString: '',\n  result: [],\n};\n\n@Module({\n  name: 'ContactSearch',\n  deps: [\n    'Auth',\n    { dep: 'Storage', optional: true },\n    { dep: 'ContactSearchOptions', optional: true },\n  ],\n})\nexport class ContactSearch extends RcModuleV2<Deps> {\n  protected _searchSources = new Map<\n    SearchSource['sourceName'],\n    SearchSource['searchFn']\n  >();\n\n  protected _searchSourcesFormat = new Map<\n    SearchSource['sourceName'],\n    SearchSource['formatFn']\n  >();\n\n  protected _searchSourcesCheck = new Map<\n    SearchSource['sourceName'],\n    SearchSource['readyCheckFn']\n  >();\n\n  protected _searchIds: Record<string, string> = {};\n\n  protected _ttl = this._deps.contactSearchOptions?.ttl ?? 5 * 60 * 1000;\n\n  protected _minimalSearchLength =\n    this._deps.contactSearchOptions?.minimalSearchLength ??\n    DefaultMinimalSearchLength;\n\n  protected _debouncedSearchFn = debounce({ fn: this.search, threshold: 800 });\n\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n  protected _timeoutId: NodeJS.Timeout = null;\n\n  constructor(deps: Deps) {\n    super({\n      deps,\n      storageKey: 'ContactSearch',\n      enableCache: deps.contactSearchOptions?.enableCache ?? true,\n    });\n  }\n\n  @storage\n  @state\n  contactSearch: Record<string, ContactSearchState> = {};\n\n  @state\n  searchStatus = contactSearchStatus.idle;\n\n  @state\n  searching: Searching = DefaultSearchingState;\n\n  @action\n  setSearchStatus(searchStatus: string) {\n    this.searchStatus = searchStatus;\n  }\n\n  @action\n  clearAndReset() {\n    this.cleanUp();\n    this.searchStatus = contactSearchStatus.idle;\n    if (this._debouncedSearchFn) {\n      this._debouncedSearchFn.cancel();\n    }\n  }\n\n  @action\n  setPrepareSearch() {\n    this.searchStatus = contactSearchStatus.prepareSearching;\n    this.searching = DefaultSearchingState;\n  }\n\n  @action\n  setSearchSuccess({\n    searchOnSources,\n    searchString,\n    entities,\n  }: SetSearchSuccessOptions) {\n    if (\n      this.searching.searchString === searchString &&\n      sortBy(identity)(this.searching.searchOnSources).join(',') ===\n        sortBy(identity)(searchOnSources).join(',')\n    ) {\n      const resultMap: Record<string, boolean> = {};\n      this.searching.result.forEach((item) => {\n        resultMap[item.id] = true;\n      });\n      entities.forEach((item) => {\n        if (!resultMap[item.id]) {\n          this.searching.result.push(item);\n          resultMap[item.id] = true;\n        }\n      });\n      return;\n    }\n    this.searching = {\n      searchOnSources,\n      searchString,\n      result: entities,\n    };\n  }\n\n  @action\n  setContactSearch({\n    sourceName,\n    searchString,\n    entities,\n    ttl,\n  }: SetContactSearchOptions) {\n    const data: Record<string, ContactSearchState> = {};\n    Object.keys(this.contactSearch).forEach((key) => {\n      if (Date.now() - this.contactSearch[key].timestamp < ttl) {\n        data[key] = this.contactSearch[key];\n      }\n    });\n    const key = `${sourceName}-${searchString}`;\n    data[key] = {\n      entities,\n      timestamp: Date.now(),\n    };\n    this.contactSearch = data;\n  }\n\n  @action\n  cleanUp() {\n    this.contactSearch = {};\n    this.searching = DefaultSearchingState;\n  }\n\n  @action\n  resetContactSearch() {\n    this.contactSearch = {};\n  }\n\n  override onInitSuccess() {\n    this.resetContactSearch();\n  }\n\n  override onReset() {\n    this.cleanUp();\n    if (this._debouncedSearchFn) {\n      this._debouncedSearchFn.cancel();\n    }\n  }\n\n  override _shouldInit() {\n    return !!(\n      super._shouldInit() &&\n      this._deps.auth.loggedIn &&\n      this._readyCheck()\n    );\n  }\n\n  override _shouldReset() {\n    return !!(\n      super._shouldReset() ||\n      (this.ready && !this._deps.auth.loggedIn)\n    );\n  }\n\n  addSearchSource({\n    sourceName,\n    searchFn,\n    readyCheckFn,\n    formatFn,\n  }: SearchSource) {\n    if (!sourceName) {\n      throw new Error(\n        '[ContactSearch > SearchSource > sourceName] is required',\n      );\n    }\n    if (this._searchSources.has(sourceName)) {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > searchFn] already exists`,\n      );\n    }\n    if (this._searchSourcesCheck.has(sourceName)) {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > readyCheckFn] already exists`,\n      );\n    }\n    if (this._searchSourcesFormat.has(sourceName)) {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > formatFn] already exists`,\n      );\n    }\n    if (typeof searchFn !== 'function') {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > searchFn] must be a function`,\n      );\n    }\n    if (typeof readyCheckFn !== 'function') {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > readyCheckFn] must be a function`,\n      );\n    }\n    if (typeof formatFn !== 'function') {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > formatFn] must be a function`,\n      );\n    }\n    this._searchSources.set(sourceName, searchFn);\n    this._searchSourcesFormat.set(sourceName, formatFn);\n    this._searchSourcesCheck.set(sourceName, readyCheckFn);\n  }\n\n  @proxify\n  async debouncedSearch({ searchString }: SearchStringOptions) {\n    this._debouncedSearchFn({ searchString });\n  }\n\n  @proxify\n  async search({ searchString }: SearchStringOptions) {\n    if (\n      !this.ready ||\n      !searchString ||\n      searchString.length < this._minimalSearchLength\n    ) {\n      this.setPrepareSearch();\n      return;\n    }\n    this._clearTimeout();\n    this._timeoutId = setTimeout(async () => {\n      const searching = { ...this.searching };\n      // @ts-expect-error TS(2322): Type 'undefined' is not assignable to type 'string... Remove this comment to see the full error message\n      await this.search({ searchString: undefined });\n      await this.search(searching);\n    }, this._ttl);\n    const searchOnSources = Array.from(this._searchSources.keys());\n    for (const sourceName of searchOnSources) {\n      await this._searchSource({\n        searchOnSources,\n        sourceName,\n        searchString,\n      });\n    }\n    this.setSearchStatus(contactSearchStatus.idle);\n  }\n\n  _clearTimeout() {\n    if (this._timeoutId) {\n      clearTimeout(this._timeoutId);\n    }\n  }\n\n  // TODO: Need to refactor, remove cache, and update data in real time.\n  @proxify\n  async _searchSource({\n    searchOnSources,\n    sourceName,\n    searchString,\n  }: SearchSourceOptions) {\n    const searchId = v4();\n    this._searchIds[sourceName] = searchId;\n    this.setSearchStatus(contactSearchStatus.searching);\n    try {\n      // search cache\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Entities'.\n      let entities: Entities = null;\n      // @ts-expect-error TS(2322): Type 'Entities | null' is not assignable to type '... Remove this comment to see the full error message\n      entities = this._searchFromCache({ sourceName, searchString });\n      if (entities) {\n        this._loadSearching({ searchOnSources, searchString, entities });\n        return;\n      }\n      // search source\n      const searchFn = this._searchSources.get(sourceName);\n      // @ts-expect-error TS(2322): Type 'Entities | null' is not assignable to type '... Remove this comment to see the full error message\n      entities = await searchFn({ searchString });\n      // format result\n      const formatFn = this._searchSourcesFormat.get(sourceName);\n      // @ts-expect-error TS(2722): Cannot invoke an object which is possibly 'undefin... Remove this comment to see the full error message\n      entities = formatFn(entities);\n      // save result\n      this._saveSearching({ sourceName, searchString, entities });\n      if (this._searchIds[sourceName] === searchId) {\n        this._loadSearching({ searchOnSources, searchString, entities });\n      }\n    } catch (error: any /** TODO: confirm with instanceof */) {\n      this._onSearchError();\n    }\n  }\n\n  _searchFromCache({ sourceName, searchString }: SearchFromCacheOptions) {\n    const key = `${sourceName}-${searchString}`;\n    const searching = this.contactSearch[key];\n    const now = Date.now();\n    if (searching && now - searching.timestamp < this._ttl) {\n      return searching.entities;\n    }\n    return null;\n  }\n\n  _readyCheck() {\n    for (const sourceName of this._searchSourcesCheck.keys()) {\n      // @ts-expect-error TS(2722): Cannot invoke an object which is possibly 'undefin... Remove this comment to see the full error message\n      if (!this._searchSourcesCheck.get(sourceName)()) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  _onSearchError() {\n    this.setPrepareSearch();\n  }\n\n  _loadSearching({\n    searchOnSources,\n    searchString,\n    entities,\n  }: SetSearchSuccessOptions) {\n    this.setSearchSuccess({\n      searchOnSources,\n      searchString,\n      entities,\n    });\n  }\n\n  _saveSearching({\n    sourceName,\n    searchString,\n    entities,\n  }: Pick<\n    SetContactSearchOptions,\n    Exclude<keyof SetContactSearchOptions, 'ttl'>\n  >) {\n    this.setContactSearch({\n      sourceName,\n      searchString,\n      entities,\n      ttl: this._ttl,\n    });\n  }\n\n  @computed(({ searching }: ContactSearch) => [searching])\n  get searchResult() {\n    return this.searching.result ?? [];\n  }\n\n  @computed(({ searching }: ContactSearch) => [searching])\n  get sortedResult() {\n    const { result = [], searchString = '' } = this.searching;\n    const list = [...result];\n    if (searchString === '') {\n      return list;\n    }\n    return list.sort((current, next) => {\n      const currentName = current.name || '';\n      const currentPhoneNumber = current.phoneNumber || '';\n      const nextName = next.name || '';\n      const nextPhoneNumber = next.phoneNumber || '';\n      return (\n        nextName.indexOf(searchString) -\n        currentName.indexOf(searchString) +\n        (nextPhoneNumber.indexOf(searchString) -\n          currentPhoneNumber.indexOf(searchString))\n      );\n    });\n  }\n\n  get minimalSearchLength() {\n    return this._minimalSearchLength;\n  }\n\n  get isIdle() {\n    return this.searchStatus === contactSearchStatus.idle;\n  }\n\n  get isSearching() {\n    return this.searchStatus === contactSearchStatus.searching;\n  }\n}\n"],"mappings":"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","ignoreList":[]}