{"version":3,"file":"ContactSearch.js","names":["_core","require","_ramda","uuid","_interopRequireWildcard","_debounceThrottle","_di","_proxify","_contactSearchStatus","_dec","_dec2","_dec3","_class","_class2","_descriptor","_descriptor2","_descriptor3","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","Symbol","iterator","Array","from","isArray","_arrayLikeToArray","_createForOfIteratorHelper","length","_n","F","s","done","value","f","o","next","toString","slice","constructor","name","test","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","configurable","writable","asyncGeneratorStep","c","Promise","resolve","then","_asyncToGenerator","_next","_throw","_initializerDefineProperty","l","initializer","_classCallCheck","_defineProperties","key","_createClass","prototype","_toPrimitive","toPrimitive","String","Number","_get","Reflect","bind","p","_superPropBase","_getPrototypeOf","_inherits","create","_setPrototypeOf","setPrototypeOf","_createSuper","_isNativeReflectConstruct","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","reverse","reduce","_initializerWarningHelper","Error","DefaultMinimalSearchLength","exports","DefaultSearchingState","searchOnSources","searchString","result","ContactSearch","Module","deps","dep","optional","computed","_ref","searching","_ref2","_RcModuleV","_super","_deps$contactSearchOp","_deps$contactSearchOp2","_this$_deps$contactSe","_this$_deps$contactSe2","_this$_deps$contactSe3","_this$_deps$contactSe4","_this","storageKey","enableCache","contactSearchOptions","_searchSources","Map","_searchSourcesFormat","_searchSourcesCheck","_searchIds","_ttl","_deps","ttl","_minimalSearchLength","minimalSearchLength","_debouncedSearchFn","debounce","fn","search","threshold","_timeoutId","setSearchStatus","searchStatus","clearAndReset","cleanUp","contactSearchStatus","idle","cancel","setPrepareSearch","prepareSearching","setSearchSuccess","_ref3","_this2","entities","sortBy","identity","join","resultMap","item","id","setContactSearch","_ref4","_this3","sourceName","data","contactSearch","Date","now","timestamp","concat","resetContactSearch","onInitSuccess","onReset","_shouldInit","auth","loggedIn","_readyCheck","_shouldReset","ready","addSearchSource","_ref5","searchFn","readyCheckFn","formatFn","_debouncedSearch","regeneratorRuntime","mark","_callee","_ref6","wrap","_callee$","_context","prev","stop","debouncedSearch","_x","_search","_callee3","_ref7","_this4","_i","_searchOnSources","_callee3$","_context3","abrupt","_clearTimeout","setTimeout","_callee2","_callee2$","_context2","undefined","_searchSource","_x2","clearTimeout","_searchSource2","_callee4","_ref9","searchId","_callee4$","_context4","v4","_searchFromCache","_loadSearching","sent","_saveSearching","t0","_onSearchError","_x3","_ref10","_iterator","_step","err","_ref11","_ref12","_this$searching$resul","_this$searching","_this$searching$resul2","_this$searching$searc","list","sort","current","currentName","currentPhoneNumber","phoneNumber","nextName","nextPhoneNumber","indexOf","RcModuleV2","storage","state","action","proxify"],"sources":["modules/ContactSearch/ContactSearch.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n  storage,\n} from '@ringcentral-integration/core';\nimport { identity, sortBy } from 'ramda';\nimport * as uuid from 'uuid';\n\nimport { debounce } from '../../lib/debounce-throttle';\nimport { Module } from '../../lib/di';\nimport { proxify } from '../../lib/proxy/proxify';\n\nimport type {\n  ContactSearchState,\n  Deps,\n  Entities,\n  SearchFromCacheOptions,\n  Searching,\n  SearchSource,\n  SearchSourceOptions,\n  SearchStringOptions,\n  SetContactSearchOptions,\n  SetSearchSuccessOptions,\n} from './ContactSearch.interface';\nimport { contactSearchStatus } from './contactSearchStatus';\n\nexport const DefaultMinimalSearchLength = 3;\n\nexport const DefaultSearchingState: Searching = {\n  searchOnSources: [],\n  searchString: '',\n  result: [],\n};\n\n@Module({\n  name: 'ContactSearch',\n  deps: [\n    'Auth',\n    { dep: 'Storage', optional: true },\n    { dep: 'ContactSearchOptions', optional: true },\n  ],\n})\nexport class ContactSearch extends RcModuleV2<Deps> {\n  protected _searchSources = new Map<\n    SearchSource['sourceName'],\n    SearchSource['searchFn']\n  >();\n\n  protected _searchSourcesFormat = new Map<\n    SearchSource['sourceName'],\n    SearchSource['formatFn']\n  >();\n\n  protected _searchSourcesCheck = new Map<\n    SearchSource['sourceName'],\n    SearchSource['readyCheckFn']\n  >();\n\n  protected _searchIds: Record<string, string> = {};\n\n  protected _ttl = this._deps.contactSearchOptions?.ttl ?? 5 * 60 * 1000;\n\n  protected _minimalSearchLength =\n    this._deps.contactSearchOptions?.minimalSearchLength ??\n    DefaultMinimalSearchLength;\n\n  protected _debouncedSearchFn = debounce({ fn: this.search, threshold: 800 });\n\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n  protected _timeoutId: NodeJS.Timeout = null;\n\n  constructor(deps: Deps) {\n    super({\n      deps,\n      storageKey: 'ContactSearch',\n      enableCache: deps.contactSearchOptions?.enableCache ?? true,\n    });\n  }\n\n  @storage\n  @state\n  contactSearch: Record<string, ContactSearchState> = {};\n\n  @state\n  searchStatus = contactSearchStatus.idle;\n\n  @state\n  searching: Searching = DefaultSearchingState;\n\n  @action\n  setSearchStatus(searchStatus: string) {\n    this.searchStatus = searchStatus;\n  }\n\n  @action\n  clearAndReset() {\n    this.cleanUp();\n    this.searchStatus = contactSearchStatus.idle;\n    if (this._debouncedSearchFn) {\n      this._debouncedSearchFn.cancel();\n    }\n  }\n\n  @action\n  setPrepareSearch() {\n    this.searchStatus = contactSearchStatus.prepareSearching;\n    this.searching = DefaultSearchingState;\n  }\n\n  @action\n  setSearchSuccess({\n    searchOnSources,\n    searchString,\n    entities,\n  }: SetSearchSuccessOptions) {\n    if (\n      this.searching.searchString === searchString &&\n      sortBy(identity)(this.searching.searchOnSources).join(',') ===\n        sortBy(identity)(searchOnSources).join(',')\n    ) {\n      const resultMap: Record<string, boolean> = {};\n      this.searching.result.forEach((item) => {\n        resultMap[item.id] = true;\n      });\n      entities.forEach((item) => {\n        if (!resultMap[item.id]) {\n          this.searching.result.push(item);\n          resultMap[item.id] = true;\n        }\n      });\n      return;\n    }\n    this.searching = {\n      searchOnSources,\n      searchString,\n      result: entities,\n    };\n  }\n\n  @action\n  setContactSearch({\n    sourceName,\n    searchString,\n    entities,\n    ttl,\n  }: SetContactSearchOptions) {\n    const data: Record<string, ContactSearchState> = {};\n    Object.keys(this.contactSearch).forEach((key) => {\n      if (Date.now() - this.contactSearch[key].timestamp < ttl) {\n        data[key] = this.contactSearch[key];\n      }\n    });\n    const key = `${sourceName}-${searchString}`;\n    data[key] = {\n      entities,\n      timestamp: Date.now(),\n    };\n    this.contactSearch = data;\n  }\n\n  @action\n  cleanUp() {\n    this.contactSearch = {};\n    this.searching = DefaultSearchingState;\n  }\n\n  @action\n  resetContactSearch() {\n    this.contactSearch = {};\n  }\n\n  override onInitSuccess() {\n    this.resetContactSearch();\n  }\n\n  override onReset() {\n    this.cleanUp();\n    if (this._debouncedSearchFn) {\n      this._debouncedSearchFn.cancel();\n    }\n  }\n\n  override _shouldInit() {\n    return !!(\n      super._shouldInit() &&\n      this._deps.auth.loggedIn &&\n      this._readyCheck()\n    );\n  }\n\n  override _shouldReset() {\n    return !!(\n      super._shouldReset() ||\n      (this.ready && !this._deps.auth.loggedIn)\n    );\n  }\n\n  addSearchSource({\n    sourceName,\n    searchFn,\n    readyCheckFn,\n    formatFn,\n  }: SearchSource) {\n    if (!sourceName) {\n      throw new Error(\n        '[ContactSearch > SearchSource > sourceName] is required',\n      );\n    }\n    if (this._searchSources.has(sourceName)) {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > searchFn] already exists`,\n      );\n    }\n    if (this._searchSourcesCheck.has(sourceName)) {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > readyCheckFn] already exists`,\n      );\n    }\n    if (this._searchSourcesFormat.has(sourceName)) {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > formatFn] already exists`,\n      );\n    }\n    if (typeof searchFn !== 'function') {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > searchFn] must be a function`,\n      );\n    }\n    if (typeof readyCheckFn !== 'function') {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > readyCheckFn] must be a function`,\n      );\n    }\n    if (typeof formatFn !== 'function') {\n      throw new Error(\n        `[ContactSearch > SearchSource(${sourceName}) > formatFn] must be a function`,\n      );\n    }\n    this._searchSources.set(sourceName, searchFn);\n    this._searchSourcesFormat.set(sourceName, formatFn);\n    this._searchSourcesCheck.set(sourceName, readyCheckFn);\n  }\n\n  @proxify\n  async debouncedSearch({ searchString }: SearchStringOptions) {\n    this._debouncedSearchFn({ searchString });\n  }\n\n  @proxify\n  async search({ searchString }: SearchStringOptions) {\n    if (\n      !this.ready ||\n      !searchString ||\n      searchString.length < this._minimalSearchLength\n    ) {\n      this.setPrepareSearch();\n      return;\n    }\n    this._clearTimeout();\n    this._timeoutId = setTimeout(async () => {\n      const searching = { ...this.searching };\n      // @ts-expect-error TS(2322): Type 'undefined' is not assignable to type 'string... Remove this comment to see the full error message\n      await this.search({ searchString: undefined });\n      await this.search(searching);\n    }, this._ttl);\n    const searchOnSources = Array.from(this._searchSources.keys());\n    for (const sourceName of searchOnSources) {\n      await this._searchSource({\n        searchOnSources,\n        sourceName,\n        searchString,\n      });\n    }\n    this.setSearchStatus(contactSearchStatus.idle);\n  }\n\n  _clearTimeout() {\n    if (this._timeoutId) {\n      clearTimeout(this._timeoutId);\n    }\n  }\n\n  // TODO: Need to refactor, remove cache, and update data in real time.\n  @proxify\n  async _searchSource({\n    searchOnSources,\n    sourceName,\n    searchString,\n  }: SearchSourceOptions) {\n    const searchId = uuid.v4();\n    this._searchIds[sourceName] = searchId;\n    this.setSearchStatus(contactSearchStatus.searching);\n    try {\n      // search cache\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Entities'.\n      let entities: Entities = null;\n      // @ts-expect-error TS(2322): Type 'Entities | null' is not assignable to type '... Remove this comment to see the full error message\n      entities = this._searchFromCache({ sourceName, searchString });\n      if (entities) {\n        this._loadSearching({ searchOnSources, searchString, entities });\n        return;\n      }\n      // search source\n      const searchFn = this._searchSources.get(sourceName);\n      // @ts-expect-error TS(2322): Type 'Entities | null' is not assignable to type '... Remove this comment to see the full error message\n      entities = await searchFn({ searchString });\n      // format result\n      const formatFn = this._searchSourcesFormat.get(sourceName);\n      // @ts-expect-error TS(2722): Cannot invoke an object which is possibly 'undefin... Remove this comment to see the full error message\n      entities = formatFn(entities);\n      // save result\n      this._saveSearching({ sourceName, searchString, entities });\n      if (this._searchIds[sourceName] === searchId) {\n        this._loadSearching({ searchOnSources, searchString, entities });\n      }\n    } catch (error: any /** TODO: confirm with instanceof */) {\n      this._onSearchError();\n    }\n  }\n\n  _searchFromCache({ sourceName, searchString }: SearchFromCacheOptions) {\n    const key = `${sourceName}-${searchString}`;\n    const searching = this.contactSearch[key];\n    const now = Date.now();\n    if (searching && now - searching.timestamp < this._ttl) {\n      return searching.entities;\n    }\n    return null;\n  }\n\n  _readyCheck() {\n    for (const sourceName of this._searchSourcesCheck.keys()) {\n      // @ts-expect-error TS(2722): Cannot invoke an object which is possibly 'undefin... Remove this comment to see the full error message\n      if (!this._searchSourcesCheck.get(sourceName)()) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  _onSearchError() {\n    this.setPrepareSearch();\n  }\n\n  _loadSearching({\n    searchOnSources,\n    searchString,\n    entities,\n  }: SetSearchSuccessOptions) {\n    this.setSearchSuccess({\n      searchOnSources,\n      searchString,\n      entities,\n    });\n  }\n\n  _saveSearching({\n    sourceName,\n    searchString,\n    entities,\n  }: Pick<\n    SetContactSearchOptions,\n    Exclude<keyof SetContactSearchOptions, 'ttl'>\n  >) {\n    this.setContactSearch({\n      sourceName,\n      searchString,\n      entities,\n      ttl: this._ttl,\n    });\n  }\n\n  @computed(({ searching }: ContactSearch) => [searching])\n  get searchResult() {\n    return this.searching.result ?? [];\n  }\n\n  @computed(({ searching }: ContactSearch) => [searching])\n  get sortedResult() {\n    const { result = [], searchString = '' } = this.searching;\n    const list = [...result];\n    if (searchString === '') {\n      return list;\n    }\n    return list.sort((current, next) => {\n      const currentName = current.name || '';\n      const currentPhoneNumber = current.phoneNumber || '';\n      const nextName = next.name || '';\n      const nextPhoneNumber = next.phoneNumber || '';\n      return (\n        nextName.indexOf(searchString) -\n        currentName.indexOf(searchString) +\n        (nextPhoneNumber.indexOf(searchString) -\n          currentPhoneNumber.indexOf(searchString))\n      );\n    });\n  }\n\n  get minimalSearchLength() {\n    return this._minimalSearchLength;\n  }\n\n  get isIdle() {\n    return this.searchStatus === contactSearchStatus.idle;\n  }\n\n  get isSearching() {\n    return this.searchStatus === contactSearchStatus.searching;\n  }\n}\n"],"mappings":"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","ignoreList":[]}