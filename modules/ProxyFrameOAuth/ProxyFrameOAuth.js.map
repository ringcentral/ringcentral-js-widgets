{"version":3,"file":"ProxyFrameOAuth.js","names":["_background","_interopRequireDefault","require","_di","_proxify","_core","_uuid","_OAuthBase2","_dec","_class","_class2","_descriptor","e","__esModule","asyncGeneratorStep","n","t","r","o","a","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","l","Object","defineProperty","enumerable","configurable","writable","initializer","call","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","_objectSpread","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_objectWithoutProperties","_objectWithoutPropertiesLoose","indexOf","propertyIsEnumerable","hasOwnProperty","_classCallCheck","TypeError","_defineProperties","key","_createClass","prototype","_toPrimitive","_typeof","Symbol","toPrimitive","String","Number","_get","Reflect","get","bind","p","_superPropBase","_getPrototypeOf","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","__proto__","_createSuper","_isNativeReflectConstruct","s","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","slice","reverse","reduce","_initializerWarningHelper","Error","DEFAULT_PROXY_RETRY","ProxyFrameOAuth","Module","name","deps","dep","optional","_OAuthBase","_super","_ref","_this","_ref$oAuthOptions","oAuthOptions","_ref$oAuthOptions$log","loginPath","_ref$oAuthOptions$red","redirectUri","_ref$oAuthOptions$pro","proxyUri","_ref$oAuthOptions$def","defaultProxyRetry","restOAuthOptions","_retryTimeoutId","_implicitRefreshTimeoutId","v4","_proxyFrame","_implicitRefreshFrame","_loggedIn","_callbackHandler","_ref3","regeneratorRuntime","mark","_callee","_ref2","origin","data","callbackUri","proxyLoaded","wrap","_callee$","_context","prev","next","abrupt","_handleCallbackUri","clearTimeout","setOAuthReady","stop","_x","_createProxyFrame","_this$_deps$oAuthOpti","document","createElement","src","style","display","isEdge","window","navigator","userAgent","isIE","test","setAttribute","join","body","appendChild","addEventListener","setTimeout","_retrySetupProxyFrame","_deps","_implicitRefreshCallBack","_ref4","refreshCallbackUri","auth","loggedIn","_clearImplicitRefreshIframe","onInitOnce","_this2","watch","_this2$_deps$oAuthOpt","ready","routerInteraction","currentPath","oAuthReady","_this2$_deps$oAuthOpt2","atLoginPage","setupOAuth","destroyOAuth","isImplicit","_createImplicitRefreshTimeout","multiple","_handleCallbackUri2","_callee2","refresh","_args2","_callee2$","_context2","undefined","_x2","setProxyRetryCount","val","proxyRetryCount","_destroyProxyFrame","removeChild","removeEventListener","_setupOAuth","_callee3","_callee3$","_context3","_destroyOAuth","_callee4","_callee4$","_context4","_openOAuthPage","_callee5","_callee5$","_context5","client","service","platform","discovery","loginUrlWithDiscovery","contentWindow","postMessage","oAuthUri","openOAuthPage","_createImplicitRefreshIframe","implicitRefreshOAuthUri","_this3","authData","token","refreshTokenExpiresIn","expiresIn","expireTime","refreshTokenTimeoutTime","parseInt","concat","Date","now","_this3$_deps$tabManag","tabManager","active","_this$_deps$oAuthOpti2","prefix","_this$_deps$oAuthOpti3","encodeURIComponent","URL","location","href","hash","btoa","OAuthBase","state","action","background","proxify","exports"],"sources":["modules/ProxyFrameOAuth/ProxyFrameOAuth.ts"],"sourcesContent":["import background from '@ringcentral-integration/commons/lib/background';\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport { proxify } from '@ringcentral-integration/commons/lib/proxy/proxify';\nimport { action, state, watch } from '@ringcentral-integration/core';\nimport { v4 } from 'uuid';\n\nimport { OAuthBase } from '../../lib/OAuthBase';\n\nimport type { Deps } from './ProxyFrameOAuth.interface';\n\nconst DEFAULT_PROXY_RETRY = 5000;\n\ntype CallbackParams = {\n  origin: string;\n  data: any;\n};\n\n@Module({\n  name: 'OAuth',\n  deps: [\n    'Client',\n    'RouterInteraction',\n    { dep: 'OAuthOptions', optional: true },\n  ],\n})\nexport class ProxyFrameOAuth<T extends Deps = Deps> extends OAuthBase<T> {\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n  private _retryTimeoutId: ReturnType<typeof setTimeout> = null;\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n  private _implicitRefreshTimeoutId: ReturnType<typeof setTimeout> = null;\n\n  private _uuid = v4();\n  // @ts-expect-error TS(2564): Property '_proxyFrame' has no initializer and is n... Remove this comment to see the full error message\n  private _proxyFrame: HTMLIFrameElement;\n  // @ts-expect-error TS(2564): Property '_implicitRefreshFrame' has no initialize... Remove this comment to see the full error message\n  private _implicitRefreshFrame: HTMLIFrameElement;\n  protected _loggedIn = false;\n\n  constructor({\n    oAuthOptions: {\n      loginPath = '/',\n      redirectUri = './redirect.html',\n      proxyUri = './proxy.html',\n      defaultProxyRetry = DEFAULT_PROXY_RETRY,\n      ...restOAuthOptions\n    } = {},\n    ...deps\n  }: T) {\n    super({\n      ...deps,\n      oAuthOptions: {\n        loginPath,\n        redirectUri,\n        proxyUri,\n        defaultProxyRetry,\n        ...restOAuthOptions,\n      },\n    } as T);\n  }\n\n  override onInitOnce() {\n    super.onInitOnce && super.onInitOnce();\n\n    watch(\n      this,\n      () => [\n        this.ready,\n        this._deps.auth.loggedIn,\n        this._deps.routerInteraction.currentPath,\n        this._deps.oAuthOptions?.loginPath,\n        this.oAuthReady,\n        this._proxyFrame,\n      ],\n      () => {\n        const atLoginPage =\n          this._deps.routerInteraction.currentPath ===\n          this._deps.oAuthOptions?.loginPath;\n\n        if (\n          this.ready &&\n          !this._deps.auth.loggedIn &&\n          atLoginPage &&\n          !this.oAuthReady &&\n          !this._proxyFrame\n        ) {\n          this.setupOAuth();\n        } else if (\n          this._proxyFrame &&\n          (this._deps.auth.loggedIn || !atLoginPage)\n        ) {\n          this.destroyOAuth();\n        }\n\n        if (this._deps.auth.loggedIn === this._loggedIn) return;\n\n        this._loggedIn = this._deps.auth.loggedIn;\n\n        if (this._deps.auth.isImplicit) {\n          if (this._loggedIn) {\n            this._createImplicitRefreshTimeout();\n          } else if (!this._loggedIn) {\n            this._clearImplicitRefreshIframe();\n\n            if (this._implicitRefreshTimeoutId) {\n              clearTimeout(this._implicitRefreshTimeoutId);\n            }\n          }\n        }\n      },\n      { multiple: true },\n    );\n  }\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  async _handleCallbackUri(callbackUri: string, refresh = false) {\n    await super._handleCallbackUri(callbackUri, refresh);\n\n    if (this._deps.auth.isImplicit && this._deps.auth.loggedIn) {\n      this._createImplicitRefreshTimeout();\n    }\n  }\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  get name() {\n    return 'proxyFrameOAuth';\n  }\n\n  get prefix() {\n    return this._deps.oAuthOptions?.prefix;\n  }\n\n  get proxyUri() {\n    // @ts-expect-error TS(2345): Argument of type 'string | undefined' is not assig... Remove this comment to see the full error message\n    const prefix = encodeURIComponent(this.prefix);\n\n    const proxyUri = new URL(this._deps.oAuthOptions?.proxyUri!, location.href)\n      .href;\n\n    const hash = encodeURIComponent(btoa(this._uuid));\n\n    return `${proxyUri}?hash=${hash}&prefix=${prefix}`;\n  }\n\n  @state\n  proxyRetryCount = 0;\n\n  @action\n  setProxyRetryCount(val: number) {\n    this.proxyRetryCount = val;\n  }\n\n  @action\n  override setOAuthReady(val: boolean) {\n    super.setOAuthReady(val);\n    this.setProxyRetryCount(0);\n  }\n\n  private _callbackHandler = async ({ origin, data }: CallbackParams) => {\n    // TODO: origin check\n    if (!data) return;\n\n    const { callbackUri, proxyLoaded } = data;\n    if (callbackUri) {\n      this._handleCallbackUri(callbackUri);\n    } else if (proxyLoaded) {\n      clearTimeout(this._retryTimeoutId);\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n      this._retryTimeoutId = null;\n\n      this.setOAuthReady(true);\n    }\n  };\n\n  private _createProxyFrame = () => {\n    this._proxyFrame = document.createElement('iframe');\n    this._proxyFrame.src = this.proxyUri;\n    this._proxyFrame.style.display = 'none';\n    const isEdge =\n      window &&\n      window.navigator &&\n      window.navigator.userAgent.indexOf('Edge') > -1;\n    const isIE =\n      window &&\n      window.navigator &&\n      /MSIE|Trident/i.test(window.navigator.userAgent);\n    if (!isEdge && !isIE) {\n      this._proxyFrame.setAttribute(\n        'sandbox',\n        [\n          'allow-scripts',\n          'allow-popups',\n          'allow-same-origin',\n          'allow-forms',\n        ].join(' '),\n      );\n    }\n    document.body.appendChild(this._proxyFrame);\n\n    window.addEventListener('message', this._callbackHandler);\n\n    this._retryTimeoutId = setTimeout(() => {\n      this._retrySetupProxyFrame();\n    }, this._deps.oAuthOptions?.defaultProxyRetry);\n  };\n\n  private _retrySetupProxyFrame() {\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n    this._retryTimeoutId = null;\n    if (this.oAuthReady) return;\n\n    this.setProxyRetryCount(this.proxyRetryCount + 1);\n    this._destroyProxyFrame();\n    this._createProxyFrame();\n  }\n\n  private _destroyProxyFrame() {\n    document.body.removeChild(this._proxyFrame);\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'HTMLIFrameE... Remove this comment to see the full error message\n    this._proxyFrame = null;\n    window.removeEventListener('message', this._callbackHandler);\n  }\n\n  @background\n  async setupOAuth() {\n    if (this._proxyFrame) return;\n\n    this._createProxyFrame();\n    this.setProxyRetryCount(0);\n  }\n\n  @background\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  async destroyOAuth() {\n    if (!this._proxyFrame) return;\n\n    if (this._retryTimeoutId) {\n      clearTimeout(this._retryTimeoutId);\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n      this._retryTimeoutId = null;\n    }\n\n    this._destroyProxyFrame();\n    this.setOAuthReady(false);\n  }\n\n  @proxify\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  async openOAuthPage() {\n    if (!this.oAuthReady) return;\n\n    if (this._deps.client.service.platform().discovery()) {\n      await this._deps.client.service.platform().loginUrlWithDiscovery();\n    }\n\n    // @ts-expect-error TS(2531): Object is possibly 'null'.\n    this._proxyFrame.contentWindow.postMessage(\n      {\n        oAuthUri: this.oAuthUri,\n      },\n      '*',\n    );\n  }\n\n  private _implicitRefreshCallBack = ({ data }: CallbackParams) => {\n    const { refreshCallbackUri } = data;\n    if (refreshCallbackUri && this._deps.auth.loggedIn) {\n      this._handleCallbackUri(refreshCallbackUri, true);\n      this._clearImplicitRefreshIframe();\n    }\n  };\n\n  private _createImplicitRefreshIframe() {\n    this._clearImplicitRefreshIframe();\n    this._implicitRefreshFrame = document.createElement('iframe');\n    this._implicitRefreshFrame.src = this.implicitRefreshOAuthUri;\n    this._implicitRefreshFrame.style.display = 'none';\n    document.body.appendChild(this._implicitRefreshFrame);\n    // eslint-disable-next-line\n\n    window.addEventListener('message', this._implicitRefreshCallBack);\n  }\n\n  private _clearImplicitRefreshIframe() {\n    if (!this._implicitRefreshFrame) return;\n\n    document.body.removeChild(this._implicitRefreshFrame);\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'HTMLIFrameE... Remove this comment to see the full error message\n    this._implicitRefreshFrame = null;\n    window.removeEventListener('message', this._implicitRefreshCallBack);\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type '({ origin, ... Remove this comment to see the full error message\n    this._callbackHandler = null;\n  }\n\n  // create a time out to refresh implicit flow token\n  private _createImplicitRefreshTimeout() {\n    if (this._implicitRefreshTimeoutId) {\n      clearTimeout(this._implicitRefreshTimeoutId);\n    }\n    const authData = this._deps.auth.token;\n    const refreshTokenExpiresIn = authData.expiresIn;\n    const { expireTime } = authData;\n\n    if (!refreshTokenExpiresIn || !expireTime) return;\n\n    // * set refresh time to (token expose time) / 3\n    let refreshTokenTimeoutTime =\n      (parseInt(`${refreshTokenExpiresIn}`, 10) * 1000) / 3;\n\n    if (refreshTokenTimeoutTime + Date.now() > expireTime) {\n      refreshTokenTimeoutTime = expireTime - Date.now() - 5000;\n      if (refreshTokenTimeoutTime < 0) return;\n    }\n\n    this._implicitRefreshTimeoutId = setTimeout(() => {\n      if (!this._deps.auth.loggedIn) return;\n\n      if (!this._deps.tabManager?.active) {\n        this._createImplicitRefreshTimeout();\n        return;\n      }\n\n      this._createImplicitRefreshIframe();\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n      this._implicitRefreshTimeoutId = null;\n    }, refreshTokenTimeoutTime);\n  }\n}\n"],"mappings":"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","ignoreList":[]}