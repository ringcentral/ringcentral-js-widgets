{"version":3,"file":"ProxyFrameOAuth.js","names":["_url","_interopRequireDefault","require","uuid","_interopRequireWildcard","_background","_di","_proxify","_core","_OAuthBase2","_dec","_class","_class2","_descriptor","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_initializerDefineProperty","target","property","descriptor","context","enumerable","configurable","writable","initializer","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","push","_objectSpread","i","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","_createClass","protoProps","staticProps","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","res","Number","_get","Reflect","bind","receiver","base","_superPropBase","_getPrototypeOf","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","decorators","slice","reverse","reduce","decorator","_initializerWarningHelper","Error","DEFAULT_PROXY_RETRY","ProxyFrameOAuth","Module","name","deps","dep","optional","_OAuthBase","_super","_ref","_this","_ref$oAuthOptions","oAuthOptions","_ref$oAuthOptions$log","loginPath","_ref$oAuthOptions$red","redirectUri","_ref$oAuthOptions$pro","proxyUri","_ref$oAuthOptions$def","defaultProxyRetry","restOAuthOptions","_retryTimeoutId","_implicitRefreshTimeoutId","_uuid","v4","_proxyFrame","_implicitRefreshFrame","_loggedIn","_callbackHandler","_ref3","regeneratorRuntime","mark","_callee","_ref2","origin","data","callbackUri","proxyLoaded","wrap","_callee$","_context","prev","next","abrupt","_handleCallbackUri","clearTimeout","setOAuthReady","stop","_x","_createProxyFrame","_this$_deps$oAuthOpti","document","createElement","src","style","display","isEdge","window","navigator","userAgent","isIE","test","setAttribute","join","body","appendChild","addEventListener","setTimeout","_retrySetupProxyFrame","_deps","_implicitRefreshCallBack","_ref4","refreshCallbackUri","auth","loggedIn","_clearImplicitRefreshIframe","onInitOnce","_this2","watch","_this2$_deps$oAuthOpt","ready","routerInteraction","currentPath","oAuthReady","_this2$_deps$oAuthOpt2","atLoginPage","setupOAuth","destroyOAuth","isImplicit","_createImplicitRefreshTimeout","multiple","_handleCallbackUri2","_callee2","refresh","_args2","_callee2$","_context2","_x2","setProxyRetryCount","val","proxyRetryCount","_destroyProxyFrame","removeChild","removeEventListener","_setupOAuth","_callee3","_callee3$","_context3","_destroyOAuth","_callee4","_callee4$","_context4","_openOAuthPage","_callee5","_callee5$","_context5","client","service","platform","discovery","loginUrlWithDiscovery","contentWindow","postMessage","oAuthUri","openOAuthPage","_createImplicitRefreshIframe","implicitRefreshOAuthUri","_this3","authData","token","refreshTokenExpiresIn","expiresIn","expireTime","refreshTokenTimeoutTime","parseInt","concat","Date","now","_this3$_deps$tabManag","tabManager","active","_this$_deps$oAuthOpti2","prefix","_this$_deps$oAuthOpti3","encodeURIComponent","url","location","href","hash","btoa","OAuthBase","state","action","background","proxify","exports"],"sources":["modules/ProxyFrameOAuth/ProxyFrameOAuth.ts"],"sourcesContent":["import url from 'url';\nimport * as uuid from 'uuid';\n\nimport background from '@ringcentral-integration/commons/lib/background';\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport { proxify } from '@ringcentral-integration/commons/lib/proxy/proxify';\nimport { action, state, watch } from '@ringcentral-integration/core';\n\nimport { OAuthBase } from '../../lib/OAuthBase';\nimport type { Deps } from './ProxyFrameOAuth.interface';\n\nconst DEFAULT_PROXY_RETRY = 5000;\n\ntype CallbackParams = {\n  origin: string;\n  data: any;\n};\n\n@Module({\n  name: 'OAuth',\n  deps: [\n    'Client',\n    'RouterInteraction',\n    { dep: 'OAuthOptions', optional: true },\n  ],\n})\nexport class ProxyFrameOAuth<T extends Deps = Deps> extends OAuthBase<T> {\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n  private _retryTimeoutId: ReturnType<typeof setTimeout> = null;\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n  private _implicitRefreshTimeoutId: ReturnType<typeof setTimeout> = null;\n\n  private _uuid = uuid.v4();\n  // @ts-expect-error TS(2564): Property '_proxyFrame' has no initializer and is n... Remove this comment to see the full error message\n  private _proxyFrame: HTMLIFrameElement;\n  // @ts-expect-error TS(2564): Property '_implicitRefreshFrame' has no initialize... Remove this comment to see the full error message\n  private _implicitRefreshFrame: HTMLIFrameElement;\n  protected _loggedIn = false;\n\n  constructor({\n    oAuthOptions: {\n      loginPath = '/',\n      redirectUri = './redirect.html',\n      proxyUri = './proxy.html',\n      defaultProxyRetry = DEFAULT_PROXY_RETRY,\n      ...restOAuthOptions\n    } = {},\n    ...deps\n  }: T) {\n    super({\n      ...deps,\n      oAuthOptions: {\n        loginPath,\n        redirectUri,\n        proxyUri,\n        defaultProxyRetry,\n        ...restOAuthOptions,\n      },\n    } as T);\n  }\n\n  override onInitOnce() {\n    super.onInitOnce && super.onInitOnce();\n\n    watch(\n      this,\n      () => [\n        this.ready,\n        this._deps.auth.loggedIn,\n        this._deps.routerInteraction.currentPath,\n        this._deps.oAuthOptions?.loginPath,\n        this.oAuthReady,\n        this._proxyFrame,\n      ],\n      () => {\n        const atLoginPage =\n          this._deps.routerInteraction.currentPath ===\n          this._deps.oAuthOptions?.loginPath;\n\n        if (\n          this.ready &&\n          !this._deps.auth.loggedIn &&\n          atLoginPage &&\n          !this.oAuthReady &&\n          !this._proxyFrame\n        ) {\n          this.setupOAuth();\n        } else if (\n          this._proxyFrame &&\n          (this._deps.auth.loggedIn || !atLoginPage)\n        ) {\n          this.destroyOAuth();\n        }\n\n        if (this._deps.auth.loggedIn === this._loggedIn) return;\n\n        this._loggedIn = this._deps.auth.loggedIn;\n\n        if (this._deps.auth.isImplicit) {\n          if (this._loggedIn) {\n            this._createImplicitRefreshTimeout();\n          } else if (!this._loggedIn) {\n            this._clearImplicitRefreshIframe();\n\n            if (this._implicitRefreshTimeoutId) {\n              clearTimeout(this._implicitRefreshTimeoutId);\n            }\n          }\n        }\n      },\n      { multiple: true },\n    );\n  }\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  async _handleCallbackUri(callbackUri: string, refresh = false) {\n    await super._handleCallbackUri(callbackUri, refresh);\n\n    if (this._deps.auth.isImplicit && this._deps.auth.loggedIn) {\n      this._createImplicitRefreshTimeout();\n    }\n  }\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  get name() {\n    return 'proxyFrameOAuth';\n  }\n\n  get prefix() {\n    return this._deps.oAuthOptions?.prefix;\n  }\n\n  get proxyUri() {\n    // @ts-expect-error TS(2345): Argument of type 'string | undefined' is not assig... Remove this comment to see the full error message\n    const prefix = encodeURIComponent(this.prefix);\n\n    const proxyUri = url.resolve(\n      window.location.href,\n      // @ts-expect-error TS(2345): Argument of type 'string | undefined' is not assig... Remove this comment to see the full error message\n      this._deps.oAuthOptions?.proxyUri,\n    );\n\n    const hash = encodeURIComponent(btoa(this._uuid));\n\n    return `${proxyUri}?hash=${hash}&prefix=${prefix}`;\n  }\n\n  @state\n  proxyRetryCount = 0;\n\n  @action\n  setProxyRetryCount(val: number) {\n    this.proxyRetryCount = val;\n  }\n\n  @action\n  override setOAuthReady(val: boolean) {\n    super.setOAuthReady(val);\n    this.setProxyRetryCount(0);\n  }\n\n  private _callbackHandler = async ({ origin, data }: CallbackParams) => {\n    // TODO: origin check\n    if (!data) return;\n\n    const { callbackUri, proxyLoaded } = data;\n    if (callbackUri) {\n      this._handleCallbackUri(callbackUri);\n    } else if (proxyLoaded) {\n      clearTimeout(this._retryTimeoutId);\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n      this._retryTimeoutId = null;\n\n      this.setOAuthReady(true);\n    }\n  };\n\n  private _createProxyFrame = () => {\n    this._proxyFrame = document.createElement('iframe');\n    this._proxyFrame.src = this.proxyUri;\n    this._proxyFrame.style.display = 'none';\n    const isEdge =\n      window &&\n      window.navigator &&\n      window.navigator.userAgent.indexOf('Edge') > -1;\n    const isIE =\n      window &&\n      window.navigator &&\n      /MSIE|Trident/i.test(window.navigator.userAgent);\n    if (!isEdge && !isIE) {\n      this._proxyFrame.setAttribute(\n        'sandbox',\n        [\n          'allow-scripts',\n          'allow-popups',\n          'allow-same-origin',\n          'allow-forms',\n        ].join(' '),\n      );\n    }\n    document.body.appendChild(this._proxyFrame);\n\n    window.addEventListener('message', this._callbackHandler);\n\n    this._retryTimeoutId = setTimeout(() => {\n      this._retrySetupProxyFrame();\n    }, this._deps.oAuthOptions?.defaultProxyRetry);\n  };\n\n  private _retrySetupProxyFrame() {\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n    this._retryTimeoutId = null;\n    if (this.oAuthReady) return;\n\n    this.setProxyRetryCount(this.proxyRetryCount + 1);\n    this._destroyProxyFrame();\n    this._createProxyFrame();\n  }\n\n  private _destroyProxyFrame() {\n    document.body.removeChild(this._proxyFrame);\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'HTMLIFrameE... Remove this comment to see the full error message\n    this._proxyFrame = null;\n    window.removeEventListener('message', this._callbackHandler);\n  }\n\n  @background\n  async setupOAuth() {\n    if (this._proxyFrame) return;\n\n    this._createProxyFrame();\n    this.setProxyRetryCount(0);\n  }\n\n  @background\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  async destroyOAuth() {\n    if (!this._proxyFrame) return;\n\n    if (this._retryTimeoutId) {\n      clearTimeout(this._retryTimeoutId);\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n      this._retryTimeoutId = null;\n    }\n\n    this._destroyProxyFrame();\n    this.setOAuthReady(false);\n  }\n\n  @proxify\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  async openOAuthPage() {\n    if (!this.oAuthReady) return;\n\n    if (this._deps.client.service.platform().discovery()) {\n      await this._deps.client.service.platform().loginUrlWithDiscovery();\n    }\n\n    // @ts-expect-error TS(2531): Object is possibly 'null'.\n    this._proxyFrame.contentWindow.postMessage(\n      {\n        oAuthUri: this.oAuthUri,\n      },\n      '*',\n    );\n  }\n\n  private _implicitRefreshCallBack = ({ data }: CallbackParams) => {\n    const { refreshCallbackUri } = data;\n    if (refreshCallbackUri && this._deps.auth.loggedIn) {\n      this._handleCallbackUri(refreshCallbackUri, true);\n      this._clearImplicitRefreshIframe();\n    }\n  };\n\n  private _createImplicitRefreshIframe() {\n    this._clearImplicitRefreshIframe();\n    this._implicitRefreshFrame = document.createElement('iframe');\n    this._implicitRefreshFrame.src = this.implicitRefreshOAuthUri;\n    this._implicitRefreshFrame.style.display = 'none';\n    document.body.appendChild(this._implicitRefreshFrame);\n    // eslint-disable-next-line\n\n    window.addEventListener('message', this._implicitRefreshCallBack);\n  }\n\n  private _clearImplicitRefreshIframe() {\n    if (!this._implicitRefreshFrame) return;\n\n    document.body.removeChild(this._implicitRefreshFrame);\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'HTMLIFrameE... Remove this comment to see the full error message\n    this._implicitRefreshFrame = null;\n    window.removeEventListener('message', this._implicitRefreshCallBack);\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type '({ origin, ... Remove this comment to see the full error message\n    this._callbackHandler = null;\n  }\n\n  // create a time out to refresh implicit flow token\n  private _createImplicitRefreshTimeout() {\n    if (this._implicitRefreshTimeoutId) {\n      clearTimeout(this._implicitRefreshTimeoutId);\n    }\n    const authData = this._deps.auth.token;\n    const refreshTokenExpiresIn = authData.expiresIn;\n    const { expireTime } = authData;\n\n    if (!refreshTokenExpiresIn || !expireTime) return;\n\n    // * set refresh time to (token expose time) / 3\n    let refreshTokenTimeoutTime =\n      (parseInt(`${refreshTokenExpiresIn}`, 10) * 1000) / 3;\n\n    if (refreshTokenTimeoutTime + Date.now() > expireTime) {\n      refreshTokenTimeoutTime = expireTime - Date.now() - 5000;\n      if (refreshTokenTimeoutTime < 0) return;\n    }\n\n    this._implicitRefreshTimeoutId = setTimeout(() => {\n      if (!this._deps.auth.loggedIn) return;\n\n      if (!this._deps.tabManager?.active) {\n        this._createImplicitRefreshTimeout();\n        return;\n      }\n\n      this._createImplicitRefreshIframe();\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'Timeout'.\n      this._implicitRefreshTimeoutId = null;\n    }, refreshTokenTimeoutTime);\n  }\n}\n"],"mappings":"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"}