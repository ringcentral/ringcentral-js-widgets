{"version":3,"sources":["modules/QuickAccessV2/QuickAccess.ts"],"names":["QuickAccess","name","deps","dep","optional","_deps","webphone","ringSession","ready","exit","auth","pending","entered","updatePageStatus","RcModuleV2","state","action","proxify"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAOA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAOaA,W,WAJZ,gBAAO;AACNC,EAAAA,IAAI,EAAE,aADA;AAENC,EAAAA,IAAI,EAAE,CAAC,MAAD,EAAS,UAAT,EAAqB;AAAEC,IAAAA,GAAG,EAAE,oBAAP;AAA6BC,IAAAA,QAAQ,EAAE;AAAvC,GAArB;AAFA,CAAP,C;;;;;AAKC,uBAAYF,IAAZ,EAAwB;AAAA;;AAAA;;AACtB,8BAAM;AACJA,MAAAA,IAAI,EAAJA;AADI,KAAN;;AADsB;;AAAA;AAIvB;;;;iCAKY;AAAA;;AACX;AACA;AACA,uBACE,IADF,EAEE;AAAA,eAAM,MAAI,CAACG,KAAL,CAAWC,QAAX,CAAoBC,WAA1B;AAAA,OAFF,EAGE,YAAM;AACJ,YAAI,MAAI,CAACF,KAAL,CAAWC,QAAX,CAAoBE,KAAxB,EAA+B;AAC7B,UAAA,MAAI,CAACC,IAAL;AACD;AACF,OAPH;AASD;;;kCAEa;AACZ,aAAO,KAAKJ,KAAL,CAAWK,IAAX,CAAgBF,KAAhB,IAAyB,KAAKG,OAArC;AACD;;;mCAEc;AACb,aAAO,CAAC,KAAKN,KAAL,CAAWK,IAAX,CAAgBF,KAAjB,IAA0B,KAAKA,KAAtC;AACD;;;uCAGwE;AAAA,qFAAJ,EAAI;AAAA,8BAAtDI,OAAsD;AAAA,UAAtDA,OAAsD,6BAA5C,KAAKA,OAAuC;;AACvE,WAAKA,OAAL,GAAeA,OAAf;AACD;;;;;;;;;AAIC,qBAAKC,gBAAL,CAAsB;AACpBD,kBAAAA,OAAO,EAAE;AADW,iBAAtB;;;;;;;;;;;;;;;;;;;;;;;;AAOA,qBAAKC,gBAAL,CAAsB;AACpBD,kBAAAA,OAAO,EAAE;AADW,iBAAtB;;;;;;;;;;;;;;;;;;;EA9C6BE,gB,2EAO9BC,W;;;;;WACS,K;;sEAwBTC,Y,sJAKAC,mB,0IAOAA,mB","sourcesContent":["import {\n  action,\n  RcModuleV2,\n  state,\n  watch,\n} from '@ringcentral-integration/core';\n\nimport { Module } from '../../lib/di';\nimport proxify from '../../lib/proxy/proxify';\nimport { Deps } from './QuickAccess.interface';\n\n@Module({\n  name: 'QuickAccess',\n  deps: ['Auth', 'Webphone', { dep: 'QuickAccessOptions', optional: true }],\n})\nexport class QuickAccess extends RcModuleV2<Deps> {\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n  }\n\n  @state\n  entered = false;\n\n  onInitOnce() {\n    // When there is an incoming call,\n    // the page should be dismissed\n    watch(\n      this,\n      () => this._deps.webphone.ringSession,\n      () => {\n        if (this._deps.webphone.ready) {\n          this.exit();\n        }\n      },\n    );\n  }\n\n  _shouldInit() {\n    return this._deps.auth.ready && this.pending;\n  }\n\n  _shouldReset() {\n    return !this._deps.auth.ready && this.ready;\n  }\n\n  @action\n  updatePageStatus({ entered = this.entered }: { entered?: boolean } = {}) {\n    this.entered = entered;\n  }\n\n  @proxify\n  async enter() {\n    this.updatePageStatus({\n      entered: true,\n    });\n  }\n\n  @proxify\n  async exit() {\n    this.updatePageStatus({\n      entered: false,\n    });\n  }\n}\n"],"file":"QuickAccess.js"}