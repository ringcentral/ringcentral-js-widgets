{"version":3,"file":"CallerId.js","names":["_ramda","require","_core","_di","_DataFetcherV","_dec","_dec2","_dec3","_dec4","_class","_class2","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","target","i","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","_toPropertyKey","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","prototype","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","call","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","property","decorators","context","desc","initializer","slice","reverse","reduce","decorator","CallerId","Module","name","deps","dep","optional","computed","_ref","data","_ref2","_ref3","byFeature","_DataFetcherV2Consume","_super","_this","_source","DataSource","callerIdOptions","cleanOnReset","fetchFunction","_fetchFunction","regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","_deps","client","service","platform","get","sent","abrupt","json","stop","dataFetcherV2","register","_this$data$byDevice","_this$data","byDevice","_this$data$byFeature","_this$data2","_find","find","item","feature","callerId","DataFetcherV2Consumer","exports"],"sources":["modules/CallerId/CallerId.ts"],"sourcesContent":["import { find } from 'ramda';\nimport type ExtensionCallerIdInfo from '@rc-ex/core/lib/definitions/ExtensionCallerIdInfo';\nimport { computed } from '@ringcentral-integration/core';\n\nimport { Module } from '../../lib/di';\nimport { DataFetcherV2Consumer, DataSource } from '../DataFetcherV2';\nimport type { Deps } from './CallerId.interface';\n\n@Module({\n  name: 'CallerId',\n  deps: ['Client', 'DataFetcherV2', { dep: 'CallerIdOptions', optional: true }],\n})\nexport class CallerId extends DataFetcherV2Consumer<\n  Deps,\n  ExtensionCallerIdInfo\n> {\n  constructor(deps: Deps) {\n    super({\n      deps,\n    });\n    this._source = new DataSource({\n      ...deps.callerIdOptions,\n      key: 'callerId',\n      cleanOnReset: true,\n      fetchFunction: async (): Promise<ExtensionCallerIdInfo> => {\n        const response = await this._deps.client.service\n          .platform()\n          .get('/restapi/v1.0/account/~/extension/~/caller-id');\n        return response.json();\n      },\n    });\n    this._deps.dataFetcherV2.register(this._source);\n  }\n\n  @computed(({ data }: CallerId) => [data])\n  get byDevice() {\n    return this.data?.byDevice ?? [];\n  }\n\n  @computed(({ data }: CallerId) => [data])\n  get byFeature() {\n    return this.data?.byFeature ?? [];\n  }\n\n  @computed(({ byFeature }: CallerId) => [byFeature])\n  get ringOut() {\n    return find((item) => item.feature === 'RingOut', this.byFeature)?.callerId;\n  }\n}\n"],"mappings":"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"}