{"version":3,"file":"ContactListUI.js","names":["_contactHelper","require","_debounceThrottle","_di","_proxify","_core","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","call","next","Object","done","push","value","length","err","Array","isArray","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","undefined","_createForOfIteratorHelper","o","allowArrayLike","it","F","s","n","e","_e2","f","normalCompletion","didErr","step","_e3","_initializerDefineProperty","target","property","descriptor","context","defineProperty","enumerable","configurable","writable","initializer","_classCallCheck","instance","Constructor","_defineProperties","props","_toPropertyKey","_createClass","protoProps","staticProps","prototype","_toPrimitive","_typeof","String","input","hint","prim","toPrimitive","res","Number","_get","Reflect","get","bind","receiver","base","_superPropBase","desc","getOwnPropertyDescriptor","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","decorators","keys","forEach","slice","reverse","reduce","decorator","_initializerWarningHelper","Error","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","minLen","_arrayLikeToArray","toString","name","from","test","iter","len","arr2","FILTER_THRESHOLD","exports","ContactListUI","Module","deps","dep","optional","computed","that","filteredContactsList","concat","values","contactSources","map","source","contacts","checkSourcesUpdated","filteredContacts","_RcUIModuleV","_super","_this","_sourcesLastStatus","Map","_sourcesUpdatedAt","_currentFilterCriteria","_nextFilterCriteria","_debouncedFilterContactSources","debounce","_filterContactSources","threshold","_shouldInit","_deps","auth","loggedIn","allSourcesReady","_shouldReset","ready","notLoggedIn","onInitOnce","_this2","watch","applyFilters","onInitSuccess","onReset","_resetFilters","_clearFilteredContacts","cancel","_iterator","_step","updated","size","clear","_iterator2","_step2","lastStatus","sourceName","sourceReady","rawContacts","set","Date","now","_updateFilters","_ref","sourceFilter","searchFilter","filterStamp","Math","random","AllContactSourceName","isFiltering","_setIsFiltering","_appendFilteredContacts","_this3","contact","id","_filterContactSources2","regeneratorRuntime","mark","_callee","criteria","_this4","sources","wrap","_callee$","_context","prev","abrupt","filter","filterContacts","all","promise","items","console","stop","_applyFilters","_callee2","_ref2","_ref2$sourceFilter","_ref2$searchFilter","_args2","_callee2$","_context2","_getPresence","_callee3","useCache","presence","_args3","_callee3$","_context3","getPresence","sent","_x2","getUIProps","_ref3","_this$_deps$extension","_this$_deps$extension2","_this$_deps$extension3","_this$_deps$extension4","_this$_deps$extension5","bottomNotice","bottomNoticeHeight","currentLocale","locale","contactSourceNames","sourceNames","contactGroups","searchSource","searchString","isSearching","showSpinner","currentSiteCode","extensionInfo","site","code","isMultipleSiteEnabled","getUIFunctions","_ref4","_this5","onVisitPage","onRefresh","onItemSelect","getAvatarUrl","_ref6","_callee4","_ref5","type","_callee4$","_context4","contactDetailsUI","showContactDetails","_x3","onSearchContact","_ref7","contactsMap","_ref8","_ref9","names","_iterator3","_step3","_groupByFirstLetterOf","groupByFirstLetterOfName","sortContactItemsByName","uniqueContactItems","RcUIModuleV2","state","action","proxify"],"sources":["modules/ContactListUI/ContactListUI.ts"],"sourcesContent":["import type {\n  ContactPresence,\n  IContact,\n} from '@ringcentral-integration/commons/interfaces/Contact.model';\nimport {\n  AllContactSourceName,\n  groupByFirstLetterOfName,\n  sortContactItemsByName,\n  uniqueContactItems,\n} from '@ringcentral-integration/commons/lib/contactHelper';\nimport { debounce } from '@ringcentral-integration/commons/lib/debounce-throttle';\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport { proxify } from '@ringcentral-integration/commons/lib/proxy/proxify';\nimport {\n  action,\n  computed,\n  RcUIModuleV2,\n  state,\n  watch,\n} from '@ringcentral-integration/core';\n\nimport type { RouteParams } from '../ContactDetailsUI';\nimport type {\n  ContactSourceLastStatus,\n  Deps,\n  FilterCriteria,\n  GetUIFunctions,\n  GetUIProps,\n  StampedFilterCriteria,\n} from './ContactListUI.interface';\n\nexport const FILTER_THRESHOLD = 500;\n\n@Module({\n  name: 'ContactListUI',\n  deps: [\n    'Auth',\n    'Locale',\n    'ExtensionInfo',\n    'Contacts',\n    { dep: 'ContactDetailsUI', optional: true },\n  ],\n})\nexport class ContactListUI extends RcUIModuleV2<Deps> {\n  private _sourcesLastStatus: Map<string, ContactSourceLastStatus> = new Map();\n  private _sourcesUpdatedAt = 0;\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'StampedFilt... Remove this comment to see the full error message\n  private _currentFilterCriteria: StampedFilterCriteria = null;\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'StampedFilt... Remove this comment to see the full error message\n  private _nextFilterCriteria: StampedFilterCriteria = null;\n\n  constructor(deps: Deps) {\n    super({ deps });\n  }\n\n  override _shouldInit() {\n    return (\n      super._shouldInit() && this._deps.auth.loggedIn && this.allSourcesReady()\n    );\n  }\n\n  override _shouldReset() {\n    return (\n      super._shouldReset() ||\n      (this.ready && (this._deps.auth.notLoggedIn || !this.allSourcesReady()))\n    );\n  }\n\n  override onInitOnce() {\n    this.checkSourcesUpdated();\n    watch(\n      this,\n      () => this.checkSourcesUpdated(),\n      () => {\n        if (this.ready) {\n          this.applyFilters();\n        }\n      },\n    );\n  }\n\n  override onInitSuccess() {\n    this.applyFilters();\n  }\n\n  override onReset() {\n    this._resetFilters();\n    this._clearFilteredContacts();\n    if (this._debouncedFilterContactSources) {\n      this._debouncedFilterContactSources.cancel();\n    }\n  }\n\n  get contactSources() {\n    return Array.from(this._deps.contacts.contactSources.values());\n  }\n\n  allSourcesReady() {\n    let ready = true;\n    for (const source of this.contactSources) {\n      if (!source.ready) {\n        ready = false;\n        break;\n      }\n    }\n    return ready;\n  }\n\n  checkSourcesUpdated() {\n    let updated = false;\n    if (this._sourcesLastStatus.size !== this.contactSources.length) {\n      updated = true;\n      this._sourcesLastStatus.clear();\n    }\n    for (const source of this.contactSources) {\n      const lastStatus = this._sourcesLastStatus.get(source.sourceName);\n      if (\n        !lastStatus ||\n        lastStatus.sourceReady !== source.sourceReady ||\n        lastStatus.rawContacts !== source.rawContacts\n      ) {\n        updated = true;\n        this._sourcesLastStatus.set(source.sourceName, {\n          sourceReady: source.sourceReady,\n          contacts: source.contacts,\n          rawContacts: source.rawContacts,\n        });\n      }\n    }\n    if (updated) {\n      this._sourcesUpdatedAt = Date.now();\n    }\n    return this._sourcesUpdatedAt;\n  }\n\n  @state\n  sourceFilter: string = AllContactSourceName;\n\n  @state\n  searchFilter = '';\n\n  @state\n  filterStamp = 0;\n\n  @state\n  isFiltering = false;\n\n  @state\n  filteredContactsList: [string, string][] = [];\n\n  @action\n  private _updateFilters({ sourceFilter, searchFilter }: FilterCriteria) {\n    // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n    this.sourceFilter = sourceFilter;\n    // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n    this.searchFilter = searchFilter;\n    this.filterStamp = Math.random();\n  }\n\n  @action\n  private _resetFilters() {\n    this.sourceFilter = AllContactSourceName;\n    this.searchFilter = '';\n    this.filterStamp = 0;\n    this.isFiltering = false;\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'StampedFilt... Remove this comment to see the full error message\n    this._currentFilterCriteria = null;\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'StampedFilt... Remove this comment to see the full error message\n    this._nextFilterCriteria = null;\n  }\n\n  @action\n  private _setIsFiltering(isFiltering: boolean) {\n    this.isFiltering = isFiltering;\n  }\n\n  @action\n  private _clearFilteredContacts() {\n    this.filteredContactsList = [];\n  }\n\n  @action\n  private _appendFilteredContacts(contacts: IContact[], sourceName: string) {\n    if (contacts.length > 0) {\n      contacts.forEach((contact) => {\n        this.filteredContactsList.push([sourceName, contact.id]);\n      });\n    }\n  }\n\n  @computed((that: ContactListUI) => [\n    that.filteredContactsList,\n    ...Object.values(that.contactSources).map((source) => source.contacts),\n  ])\n  get filteredContacts() {\n    const contactsMap: Record<string, Record<string, IContact>> = {};\n    this.contactSources.forEach((source) => {\n      contactsMap[source.sourceName] = {};\n      source.contacts.forEach((contact) => {\n        contactsMap[source.sourceName][contact.id] = contact;\n      });\n    });\n    const filteredContacts: IContact[] = [];\n    this.filteredContactsList.forEach(([sourceName, id]) => {\n      const contact = contactsMap[sourceName][id];\n      if (contact) {\n        filteredContacts.push(contact);\n      }\n    });\n    return filteredContacts;\n  }\n\n  private _debouncedFilterContactSources = debounce({\n    fn: this._filterContactSources,\n    threshold: FILTER_THRESHOLD,\n  });\n\n  private async _filterContactSources(criteria: StampedFilterCriteria) {\n    if (this._currentFilterCriteria) {\n      this._nextFilterCriteria = criteria;\n      return;\n    }\n    this._setIsFiltering(true);\n    this._clearFilteredContacts();\n    this._currentFilterCriteria = criteria;\n    const sources = this.contactSources.filter(\n      (source) =>\n        source.sourceReady &&\n        typeof source.filterContacts === 'function' &&\n        (source.sourceName === criteria.sourceFilter ||\n          AllContactSourceName === criteria.sourceFilter),\n    );\n    await Promise.all(\n      sources.map((source) => {\n        const promise = Promise.resolve(\n          // @ts-expect-error TS(2722): Cannot invoke an object which is possibly 'undefin... Remove this comment to see the full error message\n          source.filterContacts(criteria.searchFilter),\n        );\n        return promise\n          .then((items) => {\n            if (\n              !criteria.filterStamp ||\n              criteria.filterStamp === this.filterStamp\n            ) {\n              this._appendFilteredContacts(items, source.sourceName);\n            }\n          })\n          .catch((error) => {\n            console.error(\n              `[ContactListUI > ContactSource(${source.sourceName}) > filterContacts] ${error}`,\n            );\n          });\n      }),\n    );\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'StampedFilt... Remove this comment to see the full error message\n    this._currentFilterCriteria = null;\n    this._setIsFiltering(false);\n    if (this._nextFilterCriteria) {\n      const next = this._nextFilterCriteria;\n      // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'StampedFilt... Remove this comment to see the full error message\n      this._nextFilterCriteria = null;\n      this._filterContactSources(next);\n    }\n  }\n\n  @proxify\n  async applyFilters({\n    sourceFilter = this.sourceFilter,\n    searchFilter = this.searchFilter,\n  }: FilterCriteria = {}) {\n    this._updateFilters({\n      sourceFilter,\n      searchFilter,\n    });\n    this._debouncedFilterContactSources({\n      sourceFilter,\n      searchFilter,\n      filterStamp: this.filterStamp,\n    });\n  }\n\n  @proxify\n  async getPresence(\n    contact: IContact,\n    useCache = true,\n  ): Promise<ContactPresence | null> {\n    const presence = await this._deps.contacts.getPresence(contact, useCache);\n    return presence;\n  }\n\n  @computed((that: ContactListUI) => [that.checkSourcesUpdated()])\n  get sourceNames() {\n    const names = [AllContactSourceName];\n    for (const source of this.contactSources) {\n      if (source.sourceReady) {\n        names.push(source.sourceName);\n      }\n    }\n    return names;\n  }\n\n  @computed((that: ContactListUI) => [that.filteredContacts])\n  get contactGroups() {\n    return (\n      groupByFirstLetterOfName(\n        sortContactItemsByName(uniqueContactItems(this.filteredContacts)),\n      ) ?? []\n    );\n  }\n\n  getUIProps({ bottomNotice, bottomNoticeHeight }: GetUIProps) {\n    return {\n      currentLocale: this._deps.locale.currentLocale,\n      contactSourceNames: this.sourceNames,\n      contactGroups: this.contactGroups,\n      searchSource: this.sourceFilter,\n      searchString: this.searchFilter,\n      isSearching: this.isFiltering,\n      showSpinner: !(this._deps.locale.ready && this.ready),\n      currentSiteCode: this._deps.extensionInfo?.site?.code ?? '',\n      isMultipleSiteEnabled:\n        this._deps.extensionInfo?.isMultipleSiteEnabled ?? false,\n      bottomNotice,\n      bottomNoticeHeight,\n    };\n  }\n\n  getUIFunctions({ onVisitPage, onRefresh, onItemSelect }: GetUIFunctions) {\n    return {\n      getAvatarUrl(): string {\n        // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'string'.\n        return null;\n      },\n      getPresence: (contact: IContact): Promise<any> => {\n        return this.getPresence(contact);\n      },\n      onItemSelect:\n        onItemSelect ||\n        (async ({ type, id }: RouteParams) => {\n          if (this._deps.contactDetailsUI) {\n            this._deps.contactDetailsUI.showContactDetails({ type, id });\n          }\n        }),\n      onSearchContact: ({\n        searchSource,\n        searchString,\n      }: {\n        searchSource: string;\n        searchString: string;\n      }) => {\n        this.applyFilters({\n          sourceFilter: searchSource,\n          searchFilter: searchString,\n        });\n      },\n      onVisitPage: () => {\n        if (typeof onVisitPage === 'function') {\n          onVisitPage();\n        }\n        // fire filtering contacts if not yet\n        if (!this.filterStamp) {\n          this.applyFilters();\n        }\n      },\n      onRefresh,\n    };\n  }\n}\n"],"mappings":"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"}