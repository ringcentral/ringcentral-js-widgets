{"version":3,"file":"GlobalStorage.js","names":["_StorageBase2","require","_di","_dec","_class","_regeneratorKeys","e","n","Object","r","t","unshift","length","pop","value","done","_regenerator","Symbol","iterator","o","toStringTag","i","c","prototype","Generator","u","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","_next","_throw","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","GlobalStorage","exports","Module","name","deps","dep","optional","_StorageBase","_deps$globalStorageOp","_this","StorageProvider","globalStorageOptions","_storage","_storageHandler","storedData","onStateChange","ready","currentData","data","setItem","_onInit","_callee","_this$_deps$globalSto","storageKey","_key","_t","_t2","_context","concat","prefix","_StorageProvider","getData","_deps","disableClearUnused","_storageReducers","removeItem","setData","hasOwnProperty","onInit","onInitSuccess","_this2","_ref","syncData","on","StorageBase"],"sources":["modules/GlobalStorage/GlobalStorage.ts"],"sourcesContent":["// @ts-nocheck\nimport type { IStorage } from '../../lib/StorageBase';\nimport { StorageBase } from '../../lib/StorageBase';\nimport { Module } from '../../lib/di';\n\nimport type { Deps } from './GlobalStorage.interface';\n\n@Module({\n  name: 'GlobalStorage',\n  deps: [{ dep: 'GlobalStorageOptions', optional: true }],\n})\nexport class GlobalStorage extends StorageBase<Deps> {\n  protected _storage: IStorage;\n  protected _storageHandler: ({\n    key,\n    value,\n  }: {\n    key: string;\n    value: unknown;\n  }) => void = null;\n\n  constructor(deps: Deps) {\n    super(deps, {\n      name: 'globalStorage',\n      StorageProvider: deps.globalStorageOptions?.StorageProvider,\n    });\n  }\n\n  storedData: Record<string, any> = {};\n\n  override onStateChange() {\n    if (this.ready) {\n      const currentData = this.data;\n      // save new data to storage when changed\n      for (const key in currentData) {\n        if (this.storedData[key] !== currentData[key]) {\n          this._storage.setItem(key, currentData[key]);\n          this.storedData[key] = currentData[key];\n        }\n      }\n    }\n  }\n\n  override async onInit() {\n    const storageKey = `${this.prefix ? `${this.prefix}-` : ''}GlobalStorage`;\n    this._storage = new this._StorageProvider({\n      storageKey,\n    });\n    this.storedData = await this._storage.getData();\n    if (!this._deps.globalStorageOptions?.disableClearUnused) {\n      for (const key in this.storedData) {\n        if (!this._storageReducers[key]) {\n          delete this.storedData[key];\n          await this._storage.removeItem(key);\n        }\n      }\n    }\n    this.setData({\n      ...this.data,\n      ...this.storedData,\n    });\n    const currentData = this.data;\n    for (const key in currentData) {\n      if (!Object.prototype.hasOwnProperty.call(this.storedData, key)) {\n        this._storage.setItem(key, currentData[key]);\n      }\n    }\n  }\n\n  override onInitSuccess() {\n    this._storageHandler = ({ key, value }) => {\n      if (this.ready) {\n        this.storedData[key] = value;\n        this.syncData(key, value);\n      }\n    };\n    this._storage.on('storage', this._storageHandler);\n  }\n}\n"],"mappings":"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","ignoreList":[]}