{"version":3,"file":"CompanyContacts.js","names":["_ramda","require","_core","_extensionStatusTypes","_extensionTypes","_phoneTypes","_subscriptionFilters","_di","_fetchList","_interopRequireDefault","_DataFetcherV","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","configurable","writable","_initializerDefineProperty","property","descriptor","context","initializer","_classCallCheck","instance","Constructor","_defineProperties","props","_createClass","protoProps","staticProps","_toPrimitive","_typeof","String","input","hint","prim","toPrimitive","res","Number","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","decorators","desc","reverse","reduce","decorator","_initializerWarningHelper","Error","contactsRegExp","DEFAULT_TTL","DEFAULT_SHOW_DISABLED","DEFAULT_SHOW_NOT_ACTIVATED","DEFAULT_ALLOW_SETTINGS","DEFAULT_SELECTED_TYPES","extensionTypes","digitalUser","user","department","CompanyContacts","Module","deps","dep","optional","computed","_ref","selectedTypes","showDisabled","showNotActivated","_ref2","data","_extensionFilter","_ref3","_DataFetcherV2Consume","_super","_deps$companyContacts","_deps$companyContacts2","_deps$companyContacts3","_this","enableCache","companyContactsOptions","disableCache","storageKey","_stopWatching","_ref4","_ref4$ttl","ttl","_ref4$polling","polling","_source","DataSource","cleanOnReset","fetchFunction","_fetchFunction","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","fetchDataCore","abrupt","stop","readyCheckFunction","_deps","extensionFeatures","ready","permissionCheckFunction","_this$_deps$extension","_this$_deps$extension2","_this$_deps$extension3","features","ReadExtensions","available","dataFetcherV2","register","_fetchContacts","_callee2","params","response","item","_callee2$","_context2","enableCompanyPublicApi","client","service","platform","get","sent","json","account","directory","contacts","list","fetchContacts","_x","_fetchDataCore","_callee3","_this2","_callee3$","_context3","fetchList","setCompanyContactsData","_handleSubscription","message","_this$_deps$tabManage","_this$_deps$tabManage2","_message$body","tabManager","active","event","body","_this$data","_ref5","eventType","oldEtag","newEtag","contact","concat","id","updateData","Date","now","onInit","_this3","getData","subscription","subscribe","subscriptionFilters","companyContacts","watch","onReset","_this$_stopWatching","companyContactsData","setShowDisabled","_showDisabled","setShowNotActivated","_showNotActivated","isAvailableExtension","extensionNumber","find","filteredContacts","ivrContacts","_this$_deps$companyCo","_this$_deps$companyCo2","allowSettings","_this$_deps$companyCo3","_ref6","_this$_showDisabled","_this$_deps$companyCo4","_this$_deps$companyCo5","_ref7","_this$_showNotActivat","_this$_deps$companyCo6","_this$_deps$companyCo7","_ref8","_this$_selectedTypes","_this$_deps$companyCo8","_this$_deps$companyCo9","_selectedTypes","_this4","typeFilter","acc","type","status","extensionStatusTypes","disabled","notActivated","_this$data2","_this$data3","ivrMenu","map","_item$phoneNumbers","phoneNumbers","phonetype","phoneTypes","extension","phoneNumber","DataFetcherV2Consumer","storage","state","action","exports"],"sources":["modules/CompanyContacts/CompanyContacts.ts"],"sourcesContent":["import { filter, find, forEach, map, reduce, reject } from 'ramda';\nimport type { Unsubscribe } from 'redux';\nimport type ContactResource from '@rc-ex/core/lib/definitions/ContactResource';\nimport {\n  action,\n  computed,\n  state,\n  storage,\n  watch,\n} from '@ringcentral-integration/core';\nimport type { ObjectMapValue } from '@ringcentral-integration/core/lib/ObjectMap';\n\nimport { extensionStatusTypes } from '../../enums/extensionStatusTypes';\nimport { extensionTypes } from '../../enums/extensionTypes';\nimport { phoneTypes } from '../../enums/phoneTypes';\nimport { subscriptionFilters } from '../../enums/subscriptionFilters';\nimport { Module } from '../../lib/di';\nimport fetchList from '../../lib/fetchList';\nimport { DataFetcherV2Consumer, DataSource } from '../DataFetcherV2';\nimport type { Deps } from './CompanyContacts.interface';\n\n/**\n * TODO:\n * 1. Consider moving the filters to some UI module for display contact list\n * 2. Find out whether there are other types should be searchable/matchable, but hidden in contact lists\n * 3. Find out whether isAvailableExtension can be better defined in our business logic layer\n * 4. Standardize and remove the IVR contacts special treatments\n */\n\nconst contactsRegExp = /.*\\/directory\\/contacts$/;\n\nconst DEFAULT_TTL = 24 * 60 * 60 * 1000;\nconst DEFAULT_SHOW_DISABLED = false;\nconst DEFAULT_SHOW_NOT_ACTIVATED = false;\nconst DEFAULT_ALLOW_SETTINGS = false;\n\nconst DEFAULT_SELECTED_TYPES: ObjectMapValue<typeof extensionTypes>[] = [\n  extensionTypes.digitalUser,\n  extensionTypes.user,\n  extensionTypes.department,\n  // extensionTypes.limited,\n  // extensionTypes.announcement,\n  // extensionTypes.applicationExtension,\n  // extensionTypes.bot,\n  // extensionTypes.faxUser,\n  // extensionTypes.ivrMenu,\n  // extensionTypes.pagingOnly,\n  // extensionTypes.parkLocation,\n  // extensionTypes.sharedLinesGroup,\n];\n\n@Module({\n  name: 'CompanyContacts',\n  deps: [\n    'Client',\n    'ExtensionFeatures',\n    'DataFetcherV2',\n    'Subscription',\n    'Storage',\n    { dep: 'TabManager', optional: true },\n    { dep: 'CompanyContactsOptions', optional: true },\n  ],\n})\nexport class CompanyContacts extends DataFetcherV2Consumer<\n  Deps,\n  ContactResource[]\n> {\n  // @ts-expect-error\n  protected _stopWatching: Unsubscribe = null;\n\n  constructor(deps: Deps) {\n    super({\n      deps,\n      enableCache: !(deps.companyContactsOptions?.disableCache ?? false),\n      storageKey: 'CompanyContacts',\n    });\n    const { ttl = DEFAULT_TTL, polling = true } =\n      deps.companyContactsOptions ?? {};\n    this._source = new DataSource({\n      ...deps.companyContactsOptions,\n      key: 'companyContacts',\n      polling,\n      ttl,\n      cleanOnReset: true,\n      fetchFunction: async () => {\n        await this.fetchDataCore();\n        return [];\n      },\n      readyCheckFunction: () => this._deps.extensionFeatures.ready,\n      permissionCheckFunction: () =>\n        this._deps.extensionFeatures.features?.ReadExtensions?.available ??\n        false,\n    });\n    this._deps.dataFetcherV2.register(this._source);\n  }\n\n  protected async fetchContacts(params: any) {\n    if (this.enableCompanyPublicApi) {\n      const response = await this._deps.client.service\n        .platform()\n        .get('/restapi/v1.0/account/~/directory/entries', params);\n\n      return response.json();\n    }\n    const item = this._deps.client\n      .account()\n      .directory()\n      .contacts()\n      .list(params);\n    return item;\n  }\n\n  protected async fetchDataCore() {\n    const data = await fetchList((params) => this.fetchContacts(params));\n    // @ts-expect-error\n    this.setCompanyContactsData(data);\n  }\n\n  // company directory events is missing in official swagger spec\n  protected _handleSubscription(message: any) {\n    if (\n      this.ready &&\n      (this._source.disableCache || (this._deps.tabManager?.active ?? true)) &&\n      contactsRegExp.test(message?.event) &&\n      message?.body?.contacts\n    ) {\n      let data = this.data ?? [];\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      forEach(({ eventType, oldEtag, newEtag, ...contact }) => {\n        if (eventType === 'Create' || eventType === 'Update') {\n          data = [...reject((item) => item.id === contact.id, data), contact];\n        } else if (eventType === 'Delete') {\n          data = [...reject((item) => item.id === contact.id, data)];\n        }\n      }, message.body.contacts);\n      this._deps.dataFetcherV2.updateData(this._source, data, Date.now());\n    }\n  }\n\n  override onInit() {\n    // for compatibility with old version cache\n    const data = this._deps.dataFetcherV2.getData(this._source);\n    if (data?.length > 0) {\n      this._deps.dataFetcherV2.updateData(this._source, [], Date.now());\n      this.setCompanyContactsData(data);\n    }\n    this._deps.subscription.subscribe([subscriptionFilters.companyContacts]);\n    this._stopWatching = watch(\n      this,\n      () => this._deps.subscription.message,\n      (message) => this._handleSubscription(message),\n    );\n  }\n\n  override onReset() {\n    this._stopWatching?.();\n    // @ts-expect-error\n    this._stopWatching = null;\n  }\n\n  get allowSettings() {\n    return (\n      this._deps.companyContactsOptions?.allowSettings ?? DEFAULT_ALLOW_SETTINGS\n    );\n  }\n\n  get enableCompanyPublicApi() {\n    return !!this._deps.companyContactsOptions?.enableCompanyPublicApi;\n  }\n\n  @storage\n  @state\n  // @ts-expect-error\n  _showDisabled: boolean = null;\n\n  @storage\n  @state\n  // @ts-expect-error\n  _showNotActivated: boolean = null;\n\n  @storage\n  @state\n  companyContactsData: ContactResource[] = [];\n\n  @action\n  setCompanyContactsData(data: ContactResource[]) {\n    this.companyContactsData = data;\n  }\n\n  // just a workaround for the update performance issue\n  // TODO: refactor with type\n  override get data() {\n    return this.companyContactsData;\n  }\n\n  get extensionTypes() {\n    return extensionTypes;\n  }\n\n  @storage\n  @state\n  // @ts-expect-error\n  _selectedTypes: ObjectMapValue<typeof extensionTypes>[] = null;\n\n  @action\n  setShowDisabled(showDisabled: boolean) {\n    this._showDisabled = showDisabled;\n  }\n\n  @action\n  setShowNotActivated(showNotActivated: boolean) {\n    this._showNotActivated = showNotActivated;\n  }\n\n  get showDisabled() {\n    return (\n      (this.allowSettings\n        ? this._showDisabled ?? this._deps.companyContactsOptions?.showDisabled\n        : this._deps.companyContactsOptions?.showDisabled) ??\n      DEFAULT_SHOW_DISABLED\n    );\n  }\n\n  get showNotActivated() {\n    return (\n      (this.allowSettings\n        ? this._showNotActivated ??\n          this._deps.companyContactsOptions?.showNotActivated\n        : this._deps.companyContactsOptions?.showNotActivated) ??\n      DEFAULT_SHOW_NOT_ACTIVATED\n    );\n  }\n\n  get selectedTypes() {\n    return (\n      (this.allowSettings\n        ? this._selectedTypes ??\n          this._deps.companyContactsOptions?.selectedTypes\n        : this._deps.companyContactsOptions?.selectedTypes) ??\n      DEFAULT_SELECTED_TYPES\n    );\n  }\n\n  @computed(\n    ({ selectedTypes, showDisabled, showNotActivated }: CompanyContacts) => [\n      selectedTypes,\n      showDisabled,\n      showNotActivated,\n    ],\n  )\n  get _extensionFilter() {\n    const typeFilter = reduce(\n      (acc, type) => {\n        acc[type] = true;\n        return acc;\n      },\n      {} as Record<string, boolean>,\n      this.selectedTypes,\n    );\n    return filter<ContactResource>(\n      (item) =>\n        !(\n          (!this.showDisabled &&\n            item.status === extensionStatusTypes.disabled) ||\n          (!this.showNotActivated &&\n            item.status === extensionStatusTypes.notActivated) ||\n          // @ts-expect-error\n          !typeFilter[item.type]\n        ),\n    );\n  }\n\n  @computed(({ data, _extensionFilter }: CompanyContacts) => [\n    data,\n    _extensionFilter,\n  ])\n  get filteredContacts() {\n    return this._extensionFilter(this.data ?? []);\n  }\n\n  @computed(({ data }: CompanyContacts) => [data])\n  get ivrContacts() {\n    const ivrContacts = filter(\n      (item) => item.type === extensionTypes.ivrMenu,\n      this.data ?? [],\n    );\n    return map((item) => {\n      return {\n        ...item,\n        phoneNumbers: [\n          ...(item.phoneNumbers ?? []),\n          {\n            phonetype: phoneTypes.extension,\n            phoneNumber: item.extensionNumber,\n          },\n        ],\n      };\n    }, ivrContacts);\n  }\n\n  isAvailableExtension(extensionNumber: string) {\n    return !!find(\n      (item) => item.extensionNumber === extensionNumber,\n      this.filteredContacts.concat(this.ivrContacts),\n    );\n  }\n}\n"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAGA,IAAAC,KAAA,GAAAD,OAAA;AASA,IAAAE,qBAAA,GAAAF,OAAA;AACA,IAAAG,eAAA,GAAAH,OAAA;AACA,IAAAI,WAAA,GAAAJ,OAAA;AACA,IAAAK,oBAAA,GAAAL,OAAA;AACA,IAAAM,GAAA,GAAAN,OAAA;AACA,IAAAO,UAAA,GAAAC,sBAAA,CAAAR,OAAA;AACA,IAAAS,aAAA,GAAAT,OAAA;AAAqE,IAAAU,IAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,OAAA,EAAAC,WAAA,EAAAC,YAAA,EAAAC,YAAA,EAAAC,YAAA;AAAA,SAAAX,uBAAAY,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,gBAAAA,GAAA;AAAA,SAAAE,mBAAAC,GAAA,WAAAC,kBAAA,CAAAD,GAAA,KAAAE,gBAAA,CAAAF,GAAA,KAAAG,2BAAA,CAAAH,GAAA,KAAAI,kBAAA;AAAA,SAAAA,mBAAA,cAAAC,SAAA;AAAA,SAAAF,4BAAAG,CAAA,EAAAC,MAAA,SAAAD,CAAA,qBAAAA,CAAA,sBAAAE,iBAAA,CAAAF,CAAA,EAAAC,MAAA,OAAAE,CAAA,GAAAC,MAAA,CAAAC,SAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAP,CAAA,EAAAQ,KAAA,aAAAL,CAAA,iBAAAH,CAAA,CAAAS,WAAA,EAAAN,CAAA,GAAAH,CAAA,CAAAS,WAAA,CAAAC,IAAA,MAAAP,CAAA,cAAAA,CAAA,mBAAAQ,KAAA,CAAAC,IAAA,CAAAZ,CAAA,OAAAG,CAAA,+DAAAU,IAAA,CAAAV,CAAA,UAAAD,iBAAA,CAAAF,CAAA,EAAAC,MAAA;AAAA,SAAAL,iBAAAkB,IAAA,eAAAC,MAAA,oBAAAD,IAAA,CAAAC,MAAA,CAAAC,QAAA,aAAAF,IAAA,+BAAAH,KAAA,CAAAC,IAAA,CAAAE,IAAA;AAAA,SAAAnB,mBAAAD,GAAA,QAAAiB,KAAA,CAAAM,OAAA,CAAAvB,GAAA,UAAAQ,iBAAA,CAAAR,GAAA;AAAA,SAAAQ,kBAAAR,GAAA,EAAAwB,GAAA,QAAAA,GAAA,YAAAA,GAAA,GAAAxB,GAAA,CAAAyB,MAAA,EAAAD,GAAA,GAAAxB,GAAA,CAAAyB,MAAA,WAAAC,CAAA,MAAAC,IAAA,OAAAV,KAAA,CAAAO,GAAA,GAAAE,CAAA,GAAAF,GAAA,EAAAE,CAAA,MAAAC,IAAA,CAAAD,CAAA,IAAA1B,GAAA,CAAA0B,CAAA,YAAAC,IAAA;AAAA,SAAAC,yBAAAC,MAAA,EAAAC,QAAA,QAAAD,MAAA,yBAAAE,MAAA,GAAAC,6BAAA,CAAAH,MAAA,EAAAC,QAAA,OAAAG,GAAA,EAAAP,CAAA,MAAAhB,MAAA,CAAAwB,qBAAA,QAAAC,gBAAA,GAAAzB,MAAA,CAAAwB,qBAAA,CAAAL,MAAA,QAAAH,CAAA,MAAAA,CAAA,GAAAS,gBAAA,CAAAV,MAAA,EAAAC,CAAA,MAAAO,GAAA,GAAAE,gBAAA,CAAAT,CAAA,OAAAI,QAAA,CAAAM,OAAA,CAAAH,GAAA,uBAAAvB,MAAA,CAAAC,SAAA,CAAA0B,oBAAA,CAAAxB,IAAA,CAAAgB,MAAA,EAAAI,GAAA,aAAAF,MAAA,CAAAE,GAAA,IAAAJ,MAAA,CAAAI,GAAA,cAAAF,MAAA;AAAA,SAAAC,8BAAAH,MAAA,EAAAC,QAAA,QAAAD,MAAA,yBAAAE,MAAA,WAAAO,UAAA,GAAA5B,MAAA,CAAA6B,IAAA,CAAAV,MAAA,OAAAI,GAAA,EAAAP,CAAA,OAAAA,CAAA,MAAAA,CAAA,GAAAY,UAAA,CAAAb,MAAA,EAAAC,CAAA,MAAAO,GAAA,GAAAK,UAAA,CAAAZ,CAAA,OAAAI,QAAA,CAAAM,OAAA,CAAAH,GAAA,kBAAAF,MAAA,CAAAE,GAAA,IAAAJ,MAAA,CAAAI,GAAA,YAAAF,MAAA;AAAA,SAAAS,mBAAAC,GAAA,EAAAC,OAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAZ,GAAA,EAAAa,GAAA,cAAAC,IAAA,GAAAN,GAAA,CAAAR,GAAA,EAAAa,GAAA,OAAAE,KAAA,GAAAD,IAAA,CAAAC,KAAA,WAAAC,KAAA,IAAAN,MAAA,CAAAM,KAAA,iBAAAF,IAAA,CAAAG,IAAA,IAAAR,OAAA,CAAAM,KAAA,YAAAG,OAAA,CAAAT,OAAA,CAAAM,KAAA,EAAAI,IAAA,CAAAR,KAAA,EAAAC,MAAA;AAAA,SAAAQ,kBAAAC,EAAA,6BAAAC,IAAA,SAAAC,IAAA,GAAAC,SAAA,aAAAN,OAAA,WAAAT,OAAA,EAAAC,MAAA,QAAAF,GAAA,GAAAa,EAAA,CAAAI,KAAA,CAAAH,IAAA,EAAAC,IAAA,YAAAZ,MAAAI,KAAA,IAAAR,kBAAA,CAAAC,GAAA,EAAAC,OAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,MAAA,UAAAG,KAAA,cAAAH,OAAAc,GAAA,IAAAnB,kBAAA,CAAAC,GAAA,EAAAC,OAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,MAAA,WAAAc,GAAA,KAAAf,KAAA,CAAAgB,SAAA;AAAA,SAAAC,QAAAC,MAAA,EAAAC,cAAA,QAAAxB,IAAA,GAAA7B,MAAA,CAAA6B,IAAA,CAAAuB,MAAA,OAAApD,MAAA,CAAAwB,qBAAA,QAAA8B,OAAA,GAAAtD,MAAA,CAAAwB,qBAAA,CAAA4B,MAAA,GAAAC,cAAA,KAAAC,OAAA,GAAAA,OAAA,CAAAC,MAAA,WAAAC,GAAA,WAAAxD,MAAA,CAAAyD,wBAAA,CAAAL,MAAA,EAAAI,GAAA,EAAAE,UAAA,OAAA7B,IAAA,CAAA8B,IAAA,CAAAX,KAAA,CAAAnB,IAAA,EAAAyB,OAAA,YAAAzB,IAAA;AAAA,SAAA+B,cAAAvC,MAAA,aAAAL,CAAA,MAAAA,CAAA,GAAA+B,SAAA,CAAAhC,MAAA,EAAAC,CAAA,UAAAG,MAAA,WAAA4B,SAAA,CAAA/B,CAAA,IAAA+B,SAAA,CAAA/B,CAAA,QAAAA,CAAA,OAAAmC,OAAA,CAAAnD,MAAA,CAAAmB,MAAA,OAAA0C,OAAA,WAAAtC,GAAA,IAAAuC,eAAA,CAAAzC,MAAA,EAAAE,GAAA,EAAAJ,MAAA,CAAAI,GAAA,SAAAvB,MAAA,CAAA+D,yBAAA,GAAA/D,MAAA,CAAAgE,gBAAA,CAAA3C,MAAA,EAAArB,MAAA,CAAA+D,yBAAA,CAAA5C,MAAA,KAAAgC,OAAA,CAAAnD,MAAA,CAAAmB,MAAA,GAAA0C,OAAA,WAAAtC,GAAA,IAAAvB,MAAA,CAAAiE,cAAA,CAAA5C,MAAA,EAAAE,GAAA,EAAAvB,MAAA,CAAAyD,wBAAA,CAAAtC,MAAA,EAAAI,GAAA,iBAAAF,MAAA;AAAA,SAAAyC,gBAAA3E,GAAA,EAAAoC,GAAA,EAAAe,KAAA,IAAAf,GAAA,GAAA2C,cAAA,CAAA3C,GAAA,OAAAA,GAAA,IAAApC,GAAA,IAAAa,MAAA,CAAAiE,cAAA,CAAA9E,GAAA,EAAAoC,GAAA,IAAAe,KAAA,EAAAA,KAAA,EAAAoB,UAAA,QAAAS,YAAA,QAAAC,QAAA,oBAAAjF,GAAA,CAAAoC,GAAA,IAAAe,KAAA,WAAAnD,GAAA;AAAA,SAAAkF,2BAAAhD,MAAA,EAAAiD,QAAA,EAAAC,UAAA,EAAAC,OAAA,SAAAD,UAAA,UAAAvE,MAAA,CAAAiE,cAAA,CAAA5C,MAAA,EAAAiD,QAAA,IAAAZ,UAAA,EAAAa,UAAA,CAAAb,UAAA,EAAAS,YAAA,EAAAI,UAAA,CAAAJ,YAAA,EAAAC,QAAA,EAAAG,UAAA,CAAAH,QAAA,EAAA9B,KAAA,EAAAiC,UAAA,CAAAE,WAAA,GAAAF,UAAA,CAAAE,WAAA,CAAAtE,IAAA,CAAAqE,OAAA;AAAA,SAAAE,gBAAAC,QAAA,EAAAC,WAAA,UAAAD,QAAA,YAAAC,WAAA,eAAAjF,SAAA;AAAA,SAAAkF,kBAAAxD,MAAA,EAAAyD,KAAA,aAAA9D,CAAA,MAAAA,CAAA,GAAA8D,KAAA,CAAA/D,MAAA,EAAAC,CAAA,UAAAuD,UAAA,GAAAO,KAAA,CAAA9D,CAAA,GAAAuD,UAAA,CAAAb,UAAA,GAAAa,UAAA,CAAAb,UAAA,WAAAa,UAAA,CAAAJ,YAAA,wBAAAI,UAAA,EAAAA,UAAA,CAAAH,QAAA,SAAApE,MAAA,CAAAiE,cAAA,CAAA5C,MAAA,EAAA6C,cAAA,CAAAK,UAAA,CAAAhD,GAAA,GAAAgD,UAAA;AAAA,SAAAQ,aAAAH,WAAA,EAAAI,UAAA,EAAAC,WAAA,QAAAD,UAAA,EAAAH,iBAAA,CAAAD,WAAA,CAAA3E,SAAA,EAAA+E,UAAA,OAAAC,WAAA,EAAAJ,iBAAA,CAAAD,WAAA,EAAAK,WAAA,GAAAjF,MAAA,CAAAiE,cAAA,CAAAW,WAAA,iBAAAR,QAAA,mBAAAQ,WAAA;AAAA,SAAAV,eAAA9B,GAAA,QAAAb,GAAA,GAAA2D,YAAA,CAAA9C,GAAA,oBAAA+C,OAAA,CAAA5D,GAAA,iBAAAA,GAAA,GAAA6D,MAAA,CAAA7D,GAAA;AAAA,SAAA2D,aAAAG,KAAA,EAAAC,IAAA,QAAAH,OAAA,CAAAE,KAAA,kBAAAA,KAAA,kBAAAA,KAAA,MAAAE,IAAA,GAAAF,KAAA,CAAA1E,MAAA,CAAA6E,WAAA,OAAAD,IAAA,KAAArC,SAAA,QAAAuC,GAAA,GAAAF,IAAA,CAAApF,IAAA,CAAAkF,KAAA,EAAAC,IAAA,oBAAAH,OAAA,CAAAM,GAAA,uBAAAA,GAAA,YAAA9F,SAAA,4DAAA2F,IAAA,gBAAAF,MAAA,GAAAM,MAAA,EAAAL,KAAA;AAAA,SAAAM,UAAAC,QAAA,EAAAC,UAAA,eAAAA,UAAA,mBAAAA,UAAA,uBAAAlG,SAAA,0DAAAiG,QAAA,CAAA3F,SAAA,GAAAD,MAAA,CAAA8F,MAAA,CAAAD,UAAA,IAAAA,UAAA,CAAA5F,SAAA,IAAAI,WAAA,IAAAiC,KAAA,EAAAsD,QAAA,EAAAxB,QAAA,QAAAD,YAAA,aAAAnE,MAAA,CAAAiE,cAAA,CAAA2B,QAAA,iBAAAxB,QAAA,gBAAAyB,UAAA,EAAAE,eAAA,CAAAH,QAAA,EAAAC,UAAA;AAAA,SAAAE,gBAAAnG,CAAA,EAAAoG,CAAA,IAAAD,eAAA,GAAA/F,MAAA,CAAAiG,cAAA,GAAAjG,MAAA,CAAAiG,cAAA,CAAAC,IAAA,cAAAH,gBAAAnG,CAAA,EAAAoG,CAAA,IAAApG,CAAA,CAAAuG,SAAA,GAAAH,CAAA,SAAApG,CAAA,YAAAmG,eAAA,CAAAnG,CAAA,EAAAoG,CAAA;AAAA,SAAAI,aAAAC,OAAA,QAAAC,yBAAA,GAAAC,yBAAA,oBAAAC,qBAAA,QAAAC,KAAA,GAAAC,eAAA,CAAAL,OAAA,GAAAM,MAAA,MAAAL,yBAAA,QAAAM,SAAA,GAAAF,eAAA,OAAArG,WAAA,EAAAsG,MAAA,GAAAE,OAAA,CAAAC,SAAA,CAAAL,KAAA,EAAA1D,SAAA,EAAA6D,SAAA,YAAAD,MAAA,GAAAF,KAAA,CAAAzD,KAAA,OAAAD,SAAA,YAAAgE,0BAAA,OAAAJ,MAAA;AAAA,SAAAI,2BAAAlE,IAAA,EAAA1C,IAAA,QAAAA,IAAA,KAAAgF,OAAA,CAAAhF,IAAA,yBAAAA,IAAA,2BAAAA,IAAA,aAAAA,IAAA,yBAAAR,SAAA,uEAAAqH,sBAAA,CAAAnE,IAAA;AAAA,SAAAmE,uBAAAnE,IAAA,QAAAA,IAAA,yBAAAoE,cAAA,wEAAApE,IAAA;AAAA,SAAA0D,0BAAA,eAAAM,OAAA,qBAAAA,OAAA,CAAAC,SAAA,oBAAAD,OAAA,CAAAC,SAAA,CAAAI,IAAA,2BAAAC,KAAA,oCAAAC,OAAA,CAAAnH,SAAA,CAAAoH,OAAA,CAAAlH,IAAA,CAAA0G,OAAA,CAAAC,SAAA,CAAAM,OAAA,8CAAAE,CAAA;AAAA,SAAAZ,gBAAA9G,CAAA,IAAA8G,eAAA,GAAA1G,MAAA,CAAAiG,cAAA,GAAAjG,MAAA,CAAAuH,cAAA,CAAArB,IAAA,cAAAQ,gBAAA9G,CAAA,WAAAA,CAAA,CAAAuG,SAAA,IAAAnG,MAAA,CAAAuH,cAAA,CAAA3H,CAAA,aAAA8G,eAAA,CAAA9G,CAAA;AAAA,SAAA4H,0BAAAnG,MAAA,EAAAiD,QAAA,EAAAmD,UAAA,EAAAlD,UAAA,EAAAC,OAAA,QAAAkD,IAAA,OAAA1H,MAAA,CAAA6B,IAAA,CAAA0C,UAAA,EAAAV,OAAA,WAAAtC,GAAA,IAAAmG,IAAA,CAAAnG,GAAA,IAAAgD,UAAA,CAAAhD,GAAA,OAAAmG,IAAA,CAAAhE,UAAA,KAAAgE,IAAA,CAAAhE,UAAA,EAAAgE,IAAA,CAAAvD,YAAA,KAAAuD,IAAA,CAAAvD,YAAA,iBAAAuD,IAAA,IAAAA,IAAA,CAAAjD,WAAA,IAAAiD,IAAA,CAAAtD,QAAA,WAAAsD,IAAA,GAAAD,UAAA,CAAArH,KAAA,GAAAuH,OAAA,GAAAC,MAAA,WAAAF,IAAA,EAAAG,SAAA,WAAAA,SAAA,CAAAxG,MAAA,EAAAiD,QAAA,EAAAoD,IAAA,KAAAA,IAAA,KAAAA,IAAA,OAAAlD,OAAA,IAAAkD,IAAA,CAAAjD,WAAA,eAAAiD,IAAA,CAAApF,KAAA,GAAAoF,IAAA,CAAAjD,WAAA,GAAAiD,IAAA,CAAAjD,WAAA,CAAAtE,IAAA,CAAAqE,OAAA,YAAAkD,IAAA,CAAAjD,WAAA,GAAAvB,SAAA,QAAAwE,IAAA,CAAAjD,WAAA,eAAAzE,MAAA,CAAAiE,cAAA,CAAA5C,MAAA,EAAAiD,QAAA,EAAAoD,IAAA,GAAAA,IAAA,kBAAAA,IAAA;AAAA,SAAAI,0BAAAvD,UAAA,EAAAC,OAAA,cAAAuD,KAAA;AAGrE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMC,cAAc,GAAG,0BAA0B;AAEjD,IAAMC,WAAW,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;AACvC,IAAMC,qBAAqB,GAAG,KAAK;AACnC,IAAMC,0BAA0B,GAAG,KAAK;AACxC,IAAMC,sBAAsB,GAAG,KAAK;AAEpC,IAAMC,sBAA+D,GAAG,CACtEC,8BAAc,CAACC,WAAW,EAC1BD,8BAAc,CAACE,IAAI,EACnBF,8BAAc,CAACG;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,CACD;AAAC,IAcWC,eAAe,IAAAjK,IAAA,GAZ3B,IAAAkK,UAAM,EAAC;EACNrI,IAAI,EAAE,iBAAiB;EACvBsI,IAAI,EAAE,CACJ,QAAQ,EACR,mBAAmB,EACnB,eAAe,EACf,cAAc,EACd,SAAS,EACT;IAAEC,GAAG,EAAE,YAAY;IAAEC,QAAQ,EAAE;EAAK,CAAC,EACrC;IAAED,GAAG,EAAE,wBAAwB;IAAEC,QAAQ,EAAE;EAAK,CAAC;AAErD,CAAC,CAAC,EAAApK,KAAA,GAqLC,IAAAqK,cAAQ,EACP,UAAAC,IAAA;EAAA,IAAGC,aAAa,GAAAD,IAAA,CAAbC,aAAa;IAAEC,YAAY,GAAAF,IAAA,CAAZE,YAAY;IAAEC,gBAAgB,GAAAH,IAAA,CAAhBG,gBAAgB;EAAA,OAAwB,CACtEF,aAAa,EACbC,YAAY,EACZC,gBAAgB,CACjB;AAAA,CACH,CAAC,EAAAxK,KAAA,GAuBA,IAAAoK,cAAQ,EAAC,UAAAK,KAAA;EAAA,IAAGC,IAAI,GAAAD,KAAA,CAAJC,IAAI;IAAEC,gBAAgB,GAAAF,KAAA,CAAhBE,gBAAgB;EAAA,OAAwB,CACzDD,IAAI,EACJC,gBAAgB,CACjB;AAAA,EAAC,EAAA1K,KAAA,GAKD,IAAAmK,cAAQ,EAAC,UAAAQ,KAAA;EAAA,IAAGF,IAAI,GAAAE,KAAA,CAAJF,IAAI;EAAA,OAAwB,CAACA,IAAI,CAAC;AAAA,EAAC,EAAA5K,IAAA,CAAAI,MAAA,IAAAC,OAAA,0BAAA0K,qBAAA;EAAA7D,SAAA,CAAA+C,eAAA,EAAAc,qBAAA;EAAA,IAAAC,MAAA,GAAArD,YAAA,CAAAsC,eAAA;EAlNhD,SAAAA,gBAAYE,IAAU,EAAE;IAAA,IAAAc,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;IAAA,IAAAC,KAAA;IAAAnF,eAAA,OAAAgE,eAAA;IACtBmB,KAAA,GAAAJ,MAAA,CAAAtJ,IAAA,OAAM;MACJyI,IAAI,EAAJA,IAAI;MACJkB,WAAW,EAAE,GAAAJ,qBAAA,IAAAC,sBAAA,GAAEf,IAAI,CAACmB,sBAAsB,cAAAJ,sBAAA,uBAA3BA,sBAAA,CAA6BK,YAAY,cAAAN,qBAAA,cAAAA,qBAAA,GAAI,KAAK,CAAC;MAClEO,UAAU,EAAE;IACd,CAAC;IARH;IAAAJ,KAAA,CACUK,aAAa,GAAgB,IAAI;IAAA7F,0BAAA,CAAAwF,KAAA,mBAAA9K,WAAA,EAAAiI,sBAAA,CAAA6C,KAAA;IAAAxF,0BAAA,CAAAwF,KAAA,uBAAA7K,YAAA,EAAAgI,sBAAA,CAAA6C,KAAA;IAAAxF,0BAAA,CAAAwF,KAAA,yBAAA5K,YAAA,EAAA+H,sBAAA,CAAA6C,KAAA;IAAAxF,0BAAA,CAAAwF,KAAA,oBAAA3K,YAAA,EAAA8H,sBAAA,CAAA6C,KAAA;IAAA,IAAAM,KAAA,IAAAP,sBAAA,GASvChB,IAAI,CAACmB,sBAAsB,cAAAH,sBAAA,cAAAA,sBAAA,GAAI,CAAC,CAAC;MAAAQ,SAAA,GAAAD,KAAA,CAD3BE,GAAG;MAAHA,GAAG,GAAAD,SAAA,cAAGnC,WAAW,GAAAmC,SAAA;MAAAE,aAAA,GAAAH,KAAA,CAAEI,OAAO;MAAPA,OAAO,GAAAD,aAAA,cAAG,IAAI,GAAAA,aAAA;IAEzCT,KAAA,CAAKW,OAAO,GAAG,IAAIC,wBAAU,CAAA7G,aAAA,CAAAA,aAAA,KACxBgF,IAAI,CAACmB,sBAAsB;MAC9BxI,GAAG,EAAE,iBAAiB;MACtBgJ,OAAO,EAAPA,OAAO;MACPF,GAAG,EAAHA,GAAG;MACHK,YAAY,EAAE,IAAI;MAClBC,aAAa;QAAA,IAAAC,cAAA,GAAAjI,iBAAA,eAAAkI,kBAAA,CAAAC,IAAA,CAAE,SAAAC,QAAA;UAAA,OAAAF,kBAAA,CAAAG,IAAA,UAAAC,SAAAC,QAAA;YAAA;cAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;gBAAA;kBAAAF,QAAA,CAAAE,IAAA;kBAAA,OACPvB,KAAA,CAAKwB,aAAa,CAAC,CAAC;gBAAA;kBAAA,OAAAH,QAAA,CAAAI,MAAA,WACnB,EAAE;gBAAA;gBAAA;kBAAA,OAAAJ,QAAA,CAAAK,IAAA;cAAA;YAAA;UAAA,GAAAR,OAAA;QAAA,CACV;QAAA,SAAAJ,cAAA;UAAA,OAAAC,cAAA,CAAA5H,KAAA,OAAAD,SAAA;QAAA;QAAA,OAAA4H,aAAA;MAAA;MACDa,kBAAkB,EAAE,SAAAA,mBAAA;QAAA,OAAM3B,KAAA,CAAK4B,KAAK,CAACC,iBAAiB,CAACC,KAAK;MAAA;MAC5DC,uBAAuB,EAAE,SAAAA,wBAAA;QAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;QAAA,QAAAF,qBAAA,IAAAC,sBAAA,GACvBjC,KAAA,CAAK4B,KAAK,CAACC,iBAAiB,CAACM,QAAQ,cAAAF,sBAAA,wBAAAC,sBAAA,GAArCD,sBAAA,CAAuCG,cAAc,cAAAF,sBAAA,uBAArDA,sBAAA,CAAuDG,SAAS,cAAAL,qBAAA,cAAAA,qBAAA,GAChE,KAAK;MAAA;IAAA,EACR,CAAC;IACFhC,KAAA,CAAK4B,KAAK,CAACU,aAAa,CAACC,QAAQ,CAACvC,KAAA,CAAKW,OAAO,CAAC;IAAC,OAAAX,KAAA;EAClD;EAAC9E,YAAA,CAAA2D,eAAA;IAAAnH,GAAA;IAAAe,KAAA;MAAA,IAAA+J,cAAA,GAAA1J,iBAAA,eAAAkI,kBAAA,CAAAC,IAAA,UAAAwB,SAE6BC,MAAW;QAAA,IAAAC,QAAA,EAAAC,IAAA;QAAA,OAAA5B,kBAAA,CAAAG,IAAA,UAAA0B,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAAxB,IAAA,GAAAwB,SAAA,CAAAvB,IAAA;cAAA;gBAAA,KACnC,IAAI,CAACwB,sBAAsB;kBAAAD,SAAA,CAAAvB,IAAA;kBAAA;gBAAA;gBAAAuB,SAAA,CAAAvB,IAAA;gBAAA,OACN,IAAI,CAACK,KAAK,CAACoB,MAAM,CAACC,OAAO,CAC7CC,QAAQ,CAAC,CAAC,CACVC,GAAG,CAAC,2CAA2C,EAAET,MAAM,CAAC;cAAA;gBAFrDC,QAAQ,GAAAG,SAAA,CAAAM,IAAA;gBAAA,OAAAN,SAAA,CAAArB,MAAA,WAIPkB,QAAQ,CAACU,IAAI,CAAC,CAAC;cAAA;gBAElBT,IAAI,GAAG,IAAI,CAAChB,KAAK,CAACoB,MAAM,CAC3BM,OAAO,CAAC,CAAC,CACTC,SAAS,CAAC,CAAC,CACXC,QAAQ,CAAC,CAAC,CACVC,IAAI,CAACf,MAAM,CAAC;gBAAA,OAAAI,SAAA,CAAArB,MAAA,WACRmB,IAAI;cAAA;cAAA;gBAAA,OAAAE,SAAA,CAAApB,IAAA;YAAA;UAAA;QAAA,GAAAe,QAAA;MAAA;MAAA,SAAAiB,cAAAC,EAAA;QAAA,OAAAnB,cAAA,CAAArJ,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAwK,aAAA;IAAA;EAAA;IAAAhM,GAAA;IAAAe,KAAA;MAAA,IAAAmL,cAAA,GAAA9K,iBAAA,eAAAkI,kBAAA,CAAAC,IAAA,UAAA4C,SAAA;QAAA,IAAAC,MAAA;QAAA,IAAAtE,IAAA;QAAA,OAAAwB,kBAAA,CAAAG,IAAA,UAAA4C,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAA1C,IAAA,GAAA0C,SAAA,CAAAzC,IAAA;cAAA;gBAAAyC,SAAA,CAAAzC,IAAA;gBAAA,OAIQ,IAAA0C,qBAAS,EAAC,UAACvB,MAAM;kBAAA,OAAKoB,MAAI,CAACJ,aAAa,CAAChB,MAAM,CAAC;gBAAA,EAAC;cAAA;gBAA9DlD,IAAI,GAAAwE,SAAA,CAAAZ,IAAA;gBACV;gBACA,IAAI,CAACc,sBAAsB,CAAC1E,IAAI,CAAC;cAAC;cAAA;gBAAA,OAAAwE,SAAA,CAAAtC,IAAA;YAAA;UAAA;QAAA,GAAAmC,QAAA;MAAA;MAAA,SAAArC,cAAA;QAAA,OAAAoC,cAAA,CAAAzK,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAsI,aAAA;IAAA,IAGpC;EAAA;IAAA9J,GAAA;IAAAe,KAAA,WAAA0L,oBAC8BC,OAAY,EAAE;MAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,aAAA;MAC1C,IACE,IAAI,CAACzC,KAAK,KACT,IAAI,CAACnB,OAAO,CAACR,YAAY,MAAAkE,qBAAA,IAAAC,sBAAA,GAAK,IAAI,CAAC1C,KAAK,CAAC4C,UAAU,cAAAF,sBAAA,uBAArBA,sBAAA,CAAuBG,MAAM,cAAAJ,qBAAA,cAAAA,qBAAA,GAAI,IAAI,CAAC,CAAC,IACtElG,cAAc,CAACvH,IAAI,CAACwN,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEM,KAAK,CAAC,KACnCN,OAAO,aAAPA,OAAO,wBAAAG,aAAA,GAAPH,OAAO,CAAEO,IAAI,cAAAJ,aAAA,uBAAbA,aAAA,CAAef,QAAQ,GACvB;QAAA,IAAAoB,UAAA;QACA,IAAIpF,IAAI,IAAAoF,UAAA,GAAG,IAAI,CAACpF,IAAI,cAAAoF,UAAA,cAAAA,UAAA,GAAI,EAAE;QAC1B;QACA,IAAA5K,cAAO,EAAC,UAAA6K,KAAA,EAAiD;UAAA,IAA9CC,SAAS,GAAAD,KAAA,CAATC,SAAS;YAAEC,OAAO,GAAAF,KAAA,CAAPE,OAAO;YAAEC,OAAO,GAAAH,KAAA,CAAPG,OAAO;YAAKC,OAAO,GAAA5N,wBAAA,CAAAwN,KAAA;UAChD,IAAIC,SAAS,KAAK,QAAQ,IAAIA,SAAS,KAAK,QAAQ,EAAE;YACpDtF,IAAI,MAAA0F,MAAA,CAAA1P,kBAAA,CAAO,IAAA4C,aAAM,EAAC,UAACwK,IAAI;cAAA,OAAKA,IAAI,CAACuC,EAAE,KAAKF,OAAO,CAACE,EAAE;YAAA,GAAE3F,IAAI,CAAC,IAAEyF,OAAO,EAAC;UACrE,CAAC,MAAM,IAAIH,SAAS,KAAK,QAAQ,EAAE;YACjCtF,IAAI,GAAAhK,kBAAA,CAAO,IAAA4C,aAAM,EAAC,UAACwK,IAAI;cAAA,OAAKA,IAAI,CAACuC,EAAE,KAAKF,OAAO,CAACE,EAAE;YAAA,GAAE3F,IAAI,CAAC,CAAC;UAC5D;QACF,CAAC,EAAE4E,OAAO,CAACO,IAAI,CAACnB,QAAQ,CAAC;QACzB,IAAI,CAAC5B,KAAK,CAACU,aAAa,CAAC8C,UAAU,CAAC,IAAI,CAACzE,OAAO,EAAEnB,IAAI,EAAE6F,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;MACrE;IACF;EAAC;IAAA5N,GAAA;IAAAe,KAAA,WAAA8M,OAAA,EAEiB;MAAA,IAAAC,MAAA;MAChB;MACA,IAAMhG,IAAI,GAAG,IAAI,CAACoC,KAAK,CAACU,aAAa,CAACmD,OAAO,CAAC,IAAI,CAAC9E,OAAO,CAAC;MAC3D,IAAI,CAAAnB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEtI,MAAM,IAAG,CAAC,EAAE;QACpB,IAAI,CAAC0K,KAAK,CAACU,aAAa,CAAC8C,UAAU,CAAC,IAAI,CAACzE,OAAO,EAAE,EAAE,EAAE0E,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;QACjE,IAAI,CAACpB,sBAAsB,CAAC1E,IAAI,CAAC;MACnC;MACA,IAAI,CAACoC,KAAK,CAAC8D,YAAY,CAACC,SAAS,CAAC,CAACC,wCAAmB,CAACC,eAAe,CAAC,CAAC;MACxE,IAAI,CAACxF,aAAa,GAAG,IAAAyF,WAAK,EACxB,IAAI,EACJ;QAAA,OAAMN,MAAI,CAAC5D,KAAK,CAAC8D,YAAY,CAACtB,OAAO;MAAA,GACrC,UAACA,OAAO;QAAA,OAAKoB,MAAI,CAACrB,mBAAmB,CAACC,OAAO,CAAC;MAAA,CAChD,CAAC;IACH;EAAC;IAAA1M,GAAA;IAAAe,KAAA,WAAAsN,QAAA,EAEkB;MAAA,IAAAC,mBAAA;MACjB,CAAAA,mBAAA,OAAI,CAAC3F,aAAa,cAAA2F,mBAAA,uBAAlBA,mBAAA,CAAA1P,IAAA,KAAqB,CAAC;MACtB;MACA,IAAI,CAAC+J,aAAa,GAAG,IAAI;IAC3B;EAAC;IAAA3I,GAAA;IAAAe,KAAA,WAAAyL,uBA2BsB1E,IAAuB,EAAE;MAC9C,IAAI,CAACyG,mBAAmB,GAAGzG,IAAI;IACjC,CAAC,CAED;IACA;EAAA;IAAA9H,GAAA;IAAAe,KAAA,WAAAyN,gBAegB7G,YAAqB,EAAE;MACrC,IAAI,CAAC8G,aAAa,GAAG9G,YAAY;IACnC;EAAC;IAAA3H,GAAA;IAAAe,KAAA,WAAA2N,oBAGmB9G,gBAAyB,EAAE;MAC7C,IAAI,CAAC+G,iBAAiB,GAAG/G,gBAAgB;IAC3C;EAAC;IAAA5H,GAAA;IAAAe,KAAA,WAAA6N,qBAwFoBC,eAAuB,EAAE;MAC5C,OAAO,CAAC,CAAC,IAAAC,WAAI,EACX,UAAC5D,IAAI;QAAA,OAAKA,IAAI,CAAC2D,eAAe,KAAKA,eAAe;MAAA,GAClD,IAAI,CAACE,gBAAgB,CAACvB,MAAM,CAAC,IAAI,CAACwB,WAAW,CAC/C,CAAC;IACH;EAAC;IAAAhP,GAAA;IAAAyL,GAAA,WAAAA,IAAA,EAjJmB;MAAA,IAAAwD,qBAAA,EAAAC,sBAAA;MAClB,QAAAD,qBAAA,IAAAC,sBAAA,GACE,IAAI,CAAChF,KAAK,CAAC1B,sBAAsB,cAAA0G,sBAAA,uBAAjCA,sBAAA,CAAmCC,aAAa,cAAAF,qBAAA,cAAAA,qBAAA,GAAIpI,sBAAsB;IAE9E;EAAC;IAAA7G,GAAA;IAAAyL,GAAA,WAAAA,IAAA,EAE4B;MAAA,IAAA2D,sBAAA;MAC3B,OAAO,CAAC,GAAAA,sBAAA,GAAC,IAAI,CAAClF,KAAK,CAAC1B,sBAAsB,cAAA4G,sBAAA,uBAAjCA,sBAAA,CAAmC/D,sBAAsB;IACpE;EAAC;IAAArL,GAAA;IAAAyL,GAAA,WAAAA,IAAA,EAuBmB;MAClB,OAAO,IAAI,CAAC8C,mBAAmB;IACjC;EAAC;IAAAvO,GAAA;IAAAyL,GAAA,WAAAA,IAAA,EAEoB;MACnB,OAAO1E,8BAAc;IACvB;EAAC;IAAA/G,GAAA;IAAAyL,GAAA,WAAAA,IAAA,EAiBkB;MAAA,IAAA4D,KAAA,EAAAC,mBAAA,EAAAC,sBAAA,EAAAC,sBAAA;MACjB,QAAAH,KAAA,GACG,IAAI,CAACF,aAAa,IAAAG,mBAAA,GACf,IAAI,CAACb,aAAa,cAAAa,mBAAA,cAAAA,mBAAA,IAAAC,sBAAA,GAAI,IAAI,CAACrF,KAAK,CAAC1B,sBAAsB,cAAA+G,sBAAA,uBAAjCA,sBAAA,CAAmC5H,YAAY,IAAA6H,sBAAA,GACrE,IAAI,CAACtF,KAAK,CAAC1B,sBAAsB,cAAAgH,sBAAA,uBAAjCA,sBAAA,CAAmC7H,YAAY,cAAA0H,KAAA,cAAAA,KAAA,GACnD1I,qBAAqB;IAEzB;EAAC;IAAA3G,GAAA;IAAAyL,GAAA,WAAAA,IAAA,EAEsB;MAAA,IAAAgE,KAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;MACrB,QAAAH,KAAA,GACG,IAAI,CAACN,aAAa,IAAAO,qBAAA,GACf,IAAI,CAACf,iBAAiB,cAAAe,qBAAA,cAAAA,qBAAA,IAAAC,sBAAA,GACtB,IAAI,CAACzF,KAAK,CAAC1B,sBAAsB,cAAAmH,sBAAA,uBAAjCA,sBAAA,CAAmC/H,gBAAgB,IAAAgI,sBAAA,GACnD,IAAI,CAAC1F,KAAK,CAAC1B,sBAAsB,cAAAoH,sBAAA,uBAAjCA,sBAAA,CAAmChI,gBAAgB,cAAA6H,KAAA,cAAAA,KAAA,GACvD7I,0BAA0B;IAE9B;EAAC;IAAA5G,GAAA;IAAAyL,GAAA,WAAAA,IAAA,EAEmB;MAAA,IAAAoE,KAAA,EAAAC,oBAAA,EAAAC,sBAAA,EAAAC,sBAAA;MAClB,QAAAH,KAAA,GACG,IAAI,CAACV,aAAa,IAAAW,oBAAA,GACf,IAAI,CAACG,cAAc,cAAAH,oBAAA,cAAAA,oBAAA,IAAAC,sBAAA,GACnB,IAAI,CAAC7F,KAAK,CAAC1B,sBAAsB,cAAAuH,sBAAA,uBAAjCA,sBAAA,CAAmCrI,aAAa,IAAAsI,sBAAA,GAChD,IAAI,CAAC9F,KAAK,CAAC1B,sBAAsB,cAAAwH,sBAAA,uBAAjCA,sBAAA,CAAmCtI,aAAa,cAAAmI,KAAA,cAAAA,KAAA,GACpD/I,sBAAsB;IAE1B;EAAC;IAAA9G,GAAA;IAAAyL,GAAA,WAAAA,IAAA,EASsB;MAAA,IAAAyE,MAAA;MACrB,IAAMC,UAAU,GAAG,IAAA9J,aAAM,EACvB,UAAC+J,GAAG,EAAEC,IAAI,EAAK;QACbD,GAAG,CAACC,IAAI,CAAC,GAAG,IAAI;QAChB,OAAOD,GAAG;MACZ,CAAC,EACD,CAAC,CAAC,EACF,IAAI,CAAC1I,aACP,CAAC;MACD,OAAO,IAAA1F,aAAM,EACX,UAACkJ,IAAI;QAAA,OACH,EACG,CAACgF,MAAI,CAACvI,YAAY,IACjBuD,IAAI,CAACoF,MAAM,KAAKC,0CAAoB,CAACC,QAAQ,IAC9C,CAACN,MAAI,CAACtI,gBAAgB,IACrBsD,IAAI,CAACoF,MAAM,KAAKC,0CAAoB,CAACE,YAAa;QACpD;QACA,CAACN,UAAU,CAACjF,IAAI,CAACmF,IAAI,CAAC,CACvB;MAAA,CACL,CAAC;IACH;EAAC;IAAArQ,GAAA;IAAAyL,GAAA,WAAAA,IAAA,EAMsB;MAAA,IAAAiF,WAAA;MACrB,OAAO,IAAI,CAAC3I,gBAAgB,EAAA2I,WAAA,GAAC,IAAI,CAAC5I,IAAI,cAAA4I,WAAA,cAAAA,WAAA,GAAI,EAAE,CAAC;IAC/C;EAAC;IAAA1Q,GAAA;IAAAyL,GAAA,WAAAA,IAAA,EAGiB;MAAA,IAAAkF,WAAA;MAChB,IAAM3B,WAAW,GAAG,IAAAhN,aAAM,EACxB,UAACkJ,IAAI;QAAA,OAAKA,IAAI,CAACmF,IAAI,KAAKtJ,8BAAc,CAAC6J,OAAO;MAAA,IAAAD,WAAA,GAC9C,IAAI,CAAC7I,IAAI,cAAA6I,WAAA,cAAAA,WAAA,GAAI,EACf,CAAC;MACD,OAAO,IAAAE,UAAG,EAAC,UAAC3F,IAAI,EAAK;QAAA,IAAA4F,kBAAA;QACnB,OAAAzO,aAAA,CAAAA,aAAA,KACK6I,IAAI;UACP6F,YAAY,KAAAvD,MAAA,CAAA1P,kBAAA,EAAAgT,kBAAA,GACN5F,IAAI,CAAC6F,YAAY,cAAAD,kBAAA,cAAAA,kBAAA,GAAI,EAAE,IAC3B;YACEE,SAAS,EAAEC,sBAAU,CAACC,SAAS;YAC/BC,WAAW,EAAEjG,IAAI,CAAC2D;UACpB,CAAC;QACF;MAEL,CAAC,EAAEG,WAAW,CAAC;IACjB;EAAC;EAAA,OAAA7H,eAAA;AAAA,EA3OkCiK,mCAAqB,IAAA5T,WAAA,GAAAyI,yBAAA,CAAA1I,OAAA,CAAAmB,SAAA,oBA2GvD2S,aAAO,EACPC,WAAK;EAAA1O,YAAA;EAAAT,UAAA;EAAAU,QAAA;EAAAK,WAAA,WAAAA,YAAA;IAAA,OAEmB,IAAI;EAAA;AAAA,IAAAzF,YAAA,GAAAwI,yBAAA,CAAA1I,OAAA,CAAAmB,SAAA,wBAE5B2S,aAAO,EACPC,WAAK;EAAA1O,YAAA;EAAAT,UAAA;EAAAU,QAAA;EAAAK,WAAA,WAAAA,YAAA;IAAA,OAEuB,IAAI;EAAA;AAAA,IAAAxF,YAAA,GAAAuI,yBAAA,CAAA1I,OAAA,CAAAmB,SAAA,0BAEhC2S,aAAO,EACPC,WAAK;EAAA1O,YAAA;EAAAT,UAAA;EAAAU,QAAA;EAAAK,WAAA,WAAAA,YAAA;IAAA,OACmC,EAAE;EAAA;AAAA,IAAA+C,yBAAA,CAAA1I,OAAA,CAAAmB,SAAA,6BAE1C6S,YAAM,GAAA9S,MAAA,CAAAyD,wBAAA,CAAA3E,OAAA,CAAAmB,SAAA,6BAAAnB,OAAA,CAAAmB,SAAA,GAAAf,YAAA,GAAAsI,yBAAA,CAAA1I,OAAA,CAAAmB,SAAA,qBAeN2S,aAAO,EACPC,WAAK;EAAA1O,YAAA;EAAAT,UAAA;EAAAU,QAAA;EAAAK,WAAA,WAAAA,YAAA;IAAA,OAEoD,IAAI;EAAA;AAAA,IAAA+C,yBAAA,CAAA1I,OAAA,CAAAmB,SAAA,sBAE7D6S,YAAM,GAAA9S,MAAA,CAAAyD,wBAAA,CAAA3E,OAAA,CAAAmB,SAAA,sBAAAnB,OAAA,CAAAmB,SAAA,GAAAuH,yBAAA,CAAA1I,OAAA,CAAAmB,SAAA,0BAKN6S,YAAM,GAAA9S,MAAA,CAAAyD,wBAAA,CAAA3E,OAAA,CAAAmB,SAAA,0BAAAnB,OAAA,CAAAmB,SAAA,GAAAuH,yBAAA,CAAA1I,OAAA,CAAAmB,SAAA,uBAAAvB,KAAA,GAAAsB,MAAA,CAAAyD,wBAAA,CAAA3E,OAAA,CAAAmB,SAAA,uBAAAnB,OAAA,CAAAmB,SAAA,GAAAuH,yBAAA,CAAA1I,OAAA,CAAAmB,SAAA,uBAAAtB,KAAA,GAAAqB,MAAA,CAAAyD,wBAAA,CAAA3E,OAAA,CAAAmB,SAAA,uBAAAnB,OAAA,CAAAmB,SAAA,GAAAuH,yBAAA,CAAA1I,OAAA,CAAAmB,SAAA,kBAAArB,KAAA,GAAAoB,MAAA,CAAAyD,wBAAA,CAAA3E,OAAA,CAAAmB,SAAA,kBAAAnB,OAAA,CAAAmB,SAAA,IAAAnB,OAAA,MAAAD,MAAA;AAAAkU,OAAA,CAAArK,eAAA,GAAAA,eAAA"}