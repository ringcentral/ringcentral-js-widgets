{"version":3,"file":"stream.js","names":["stopTrack","exports","track","notify","arguments","length","undefined","stop","event","Event","onended","dispatchEvent","stopStream","stream","getTracks","forEach"],"sources":["modules/VolumeInspector/utils/stream.ts"],"sourcesContent":["/**\n * Stops single track on the stream.\n * If notify === true, also invokes track.onended handler\n */\nexport const stopTrack = (track: MediaStreamTrack, notify = false): void => {\n  track.stop();\n  if (notify) {\n    const event = new Event('ended');\n    try {\n      if (typeof track.onended === 'function') {\n        track.onended(event);\n        track.onended = null;\n      }\n    } finally {\n      track.dispatchEvent(event);\n    }\n  }\n};\n\n/**\n * Stops all tracks on the stream.\n * If notify === true, also invokes track.onended handler for each track\n */\nexport const stopStream = (stream: MediaStream, notify = false): void => {\n  stream.getTracks().forEach((track) => stopTrack(track, notify));\n};\n"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACO,IAAMA,SAAS,GAAAC,OAAA,CAAAD,SAAA,GAAG,SAAZA,SAASA,CAAIE,KAAuB,EAA2B;EAAA,IAAzBC,MAAM,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EAC/DF,KAAK,CAACK,IAAI,CAAC,CAAC;EACZ,IAAIJ,MAAM,EAAE;IACV,IAAMK,KAAK,GAAG,IAAIC,KAAK,CAAC,OAAO,CAAC;IAChC,IAAI;MACF,IAAI,OAAOP,KAAK,CAACQ,OAAO,KAAK,UAAU,EAAE;QACvCR,KAAK,CAACQ,OAAO,CAACF,KAAK,CAAC;QACpBN,KAAK,CAACQ,OAAO,GAAG,IAAI;MACtB;IACF,CAAC,SAAS;MACRR,KAAK,CAACS,aAAa,CAACH,KAAK,CAAC;IAC5B;EACF;AACF,CAAC;;AAED;AACA;AACA;AACA;AACO,IAAMI,UAAU,GAAAX,OAAA,CAAAW,UAAA,GAAG,SAAbA,UAAUA,CAAIC,MAAmB,EAA2B;EAAA,IAAzBV,MAAM,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EAC5DS,MAAM,CAACC,SAAS,CAAC,CAAC,CAACC,OAAO,CAAC,UAACb,KAAK;IAAA,OAAKF,SAAS,CAACE,KAAK,EAAEC,MAAM,CAAC;EAAA,EAAC;AACjE,CAAC","ignoreList":[]}