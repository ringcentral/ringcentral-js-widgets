{"version":3,"file":"DetectorListener.js","names":["DetectorListener","_startCallback","arguments","length","undefined","intervalId","_listenHandle","_disposeCallback","_classCallCheck","_interval","_intervalId","_createClass","key","value","start","_this","window","setInterval","clearInterval","interval","exports"],"sources":["modules/VolumeInspector/DetectorListener.ts"],"sourcesContent":["export class DetectorListener {\n  // unit: ms\n  private _interval: number = 100;\n  private _intervalId?: number;\n\n  constructor(\n    // manage the new intervalId for listener\n    private readonly _startCallback = (intervalId: number) => {},\n    // to get detector volume\n    private readonly _listenHandle = () => {},\n    // clear the intervalId of listener\n    private readonly _disposeCallback = (intervalId: number) => {},\n  ) {}\n\n  /**\n   * Listener start to handle detector volume by interval\n   * @return ListenDisposer: Function\n   */\n  start() {\n    if (!this._intervalId) {\n      const intervalId = window.setInterval(() => {\n        this._listenHandle();\n      }, this._interval);\n      this._startCallback(intervalId);\n      this._intervalId = intervalId;\n    }\n\n    return () => {\n      if (this._intervalId) {\n        clearInterval(this._intervalId);\n        this._disposeCallback(this._intervalId);\n        delete this._intervalId;\n      }\n    };\n  }\n\n  /**\n   * set interval for listener\n   * @param interval: number, default 100 ms\n   */\n  public setInterval(interval: number): DetectorListener {\n    this._interval = interval;\n    return this;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;IAAaA,gBAAgB;EAK3B,SAAAA,iBAAA,EAOE;IAAA,IALiBC,cAAc,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,UAACG,UAAkB,EAAK,CAAC,CAAC;IAAA,IAE3CC,aAAa,GAAAJ,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,YAAM,CAAC,CAAC;IAAA,IAExBK,gBAAgB,GAAAL,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,UAACG,UAAkB,EAAK,CAAC,CAAC;IAAAG,eAAA,OAAAR,gBAAA;IAAA,KAJ7CC,cAAc,GAAdA,cAAc;IAAA,KAEdK,aAAa,GAAbA,aAAa;IAAA,KAEbC,gBAAgB,GAAhBA,gBAAgB;IAVnC;IAAA,KACQE,SAAS,GAAW,GAAG;IAAA,KACvBC,WAAW;EAShB;;EAEH;AACF;AACA;AACA;EAHEC,YAAA,CAAAX,gBAAA;IAAAY,GAAA;IAAAC,KAAA,WAAAC,MAAA,EAIQ;MAAA,IAAAC,KAAA;MACN,IAAI,CAAC,IAAI,CAACL,WAAW,EAAE;QACrB,IAAML,UAAU,GAAGW,MAAM,CAACC,WAAW,CAAC,YAAM;UAC1CF,KAAI,CAACT,aAAa,CAAC,CAAC;QACtB,CAAC,EAAE,IAAI,CAACG,SAAS,CAAC;QAClB,IAAI,CAACR,cAAc,CAACI,UAAU,CAAC;QAC/B,IAAI,CAACK,WAAW,GAAGL,UAAU;MAC/B;MAEA,OAAO,YAAM;QACX,IAAIU,KAAI,CAACL,WAAW,EAAE;UACpBQ,aAAa,CAACH,KAAI,CAACL,WAAW,CAAC;UAC/BK,KAAI,CAACR,gBAAgB,CAACQ,KAAI,CAACL,WAAW,CAAC;UACvC,OAAOK,KAAI,CAACL,WAAW;QACzB;MACF,CAAC;IACH;IAEA;AACF;AACA;AACA;EAHE;IAAAE,GAAA;IAAAC,KAAA,WAAAI,YAImBE,QAAgB,EAAoB;MACrD,IAAI,CAACV,SAAS,GAAGU,QAAQ;MACzB,OAAO,IAAI;IACb;EAAC;EAAA,OAAAnB,gBAAA;AAAA;AAAAoB,OAAA,CAAApB,gBAAA,GAAAA,gBAAA","ignoreList":[]}