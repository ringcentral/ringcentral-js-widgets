{"version":3,"file":"AppView.js","names":["_react","_interopRequireDefault","require","_reactRedux","_EnvironmentPanel","_withPhone","_styles","obj","__esModule","AppViewPanel","_ref","_phone$evAuth","_phone$evAuth$agent","_phone$evAuth$agent$a","children","server","enabled","onSetData","redirectUri","phone","couldNotAccess","auth","loggedIn","evAuth","agent","agentConfig","agentPermissions","currentPath","routerInteraction","allowLoginUpdates","goBack","createElement","className","styles","root","EnvironmentPanel","recordingHost","defaultProps","mapToFunctions","_","_ref2","_ref2$phone","oAuth","environment","mapToProps","_ref3","options","setData","AppView","withPhone","connect","exports"],"sources":["containers/AppView/AppView.tsx"],"sourcesContent":["import type { FunctionComponent } from 'react';\nimport React from 'react';\n\nimport { connect } from 'react-redux';\n\nimport { EnvironmentPanel } from '@ringcentral-integration/widgets/components/EnvironmentPanel';\nimport withPhone from '@ringcentral-integration/widgets/lib/withPhone';\n\nimport type { EvPhone } from '../../interfaces';\nimport styles from './styles.scss';\n\ninterface AppViewProps {\n  server: string;\n  redirectUri: string;\n  enabled: boolean;\n  clientId?: string;\n  clientSecret?: string;\n  onSetData: (options: any) => any;\n  phone: EvPhone;\n}\n\nconst AppViewPanel: FunctionComponent<AppViewProps> = ({\n  children,\n  server,\n  enabled,\n  onSetData,\n  redirectUri,\n  phone,\n}) => {\n  let couldNotAccess;\n  if (\n    phone.auth.loggedIn &&\n    phone.evAuth?.agent?.agentConfig?.agentPermissions\n  ) {\n    const currentPath = phone.routerInteraction.currentPath;\n    switch (currentPath) {\n      case '/sessionUpdate':\n        couldNotAccess =\n          !phone.evAuth.agent.agentConfig.agentPermissions.allowLoginUpdates;\n        break;\n      default:\n        break;\n    }\n  }\n  if (couldNotAccess) {\n    phone.routerInteraction.goBack();\n  }\n  return (\n    <div className={styles.root}>\n      {children}\n      <EnvironmentPanel\n        server={server}\n        enabled={enabled}\n        onSetData={onSetData}\n        redirectUri={redirectUri}\n        recordingHost=\"\"\n      />\n    </div>\n  );\n};\n\nAppViewPanel.defaultProps = {\n  enabled: false,\n};\n\nfunction mapToFunctions(_, { phone: { oAuth, environment } }) {\n  return {\n    server: environment.server,\n    enabled: environment.enabled,\n    redirectUri: oAuth.redirectUri,\n  };\n}\n\nfunction mapToProps(_, { phone: { environment } }) {\n  return {\n    onSetData: (options: any) => {\n      environment.setData(options);\n    },\n  };\n}\n\nexport const AppView = withPhone(\n  connect(mapToFunctions, mapToProps)(AppViewPanel),\n);\n"],"mappings":";;;;;;AACA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,WAAA,GAAAD,OAAA;AAEA,IAAAE,iBAAA,GAAAF,OAAA;AACA,IAAAG,UAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAGA,IAAAI,OAAA,GAAAL,sBAAA,CAAAC,OAAA;AAAmC,SAAAD,uBAAAM,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,gBAAAA,GAAA;AAYnC,IAAME,YAA6C,GAAG,SAAhDA,YAA6CA,CAAAC,IAAA,EAO7C;EAAA,IAAAC,aAAA,EAAAC,mBAAA,EAAAC,qBAAA;EAAA,IANJC,QAAQ,GAAAJ,IAAA,CAARI,QAAQ;IACRC,MAAM,GAAAL,IAAA,CAANK,MAAM;IACNC,OAAO,GAAAN,IAAA,CAAPM,OAAO;IACPC,SAAS,GAAAP,IAAA,CAATO,SAAS;IACTC,WAAW,GAAAR,IAAA,CAAXQ,WAAW;IACXC,KAAK,GAAAT,IAAA,CAALS,KAAK;EAEL,IAAIC,cAAc;EAClB,IACED,KAAK,CAACE,IAAI,CAACC,QAAQ,MAAAX,aAAA,GACnBQ,KAAK,CAACI,MAAM,cAAAZ,aAAA,wBAAAC,mBAAA,GAAZD,aAAA,CAAca,KAAK,cAAAZ,mBAAA,wBAAAC,qBAAA,GAAnBD,mBAAA,CAAqBa,WAAW,cAAAZ,qBAAA,uBAAhCA,qBAAA,CAAkCa,gBAAgB,GAClD;IACA,IAAMC,WAAW,GAAGR,KAAK,CAACS,iBAAiB,CAACD,WAAW;IACvD,QAAQA,WAAW;MACjB,KAAK,gBAAgB;QACnBP,cAAc,GACZ,CAACD,KAAK,CAACI,MAAM,CAACC,KAAK,CAACC,WAAW,CAACC,gBAAgB,CAACG,iBAAiB;QACpE;MACF;QACE;IACJ;EACF;EACA,IAAIT,cAAc,EAAE;IAClBD,KAAK,CAACS,iBAAiB,CAACE,MAAM,CAAC,CAAC;EAClC;EACA,oBACE9B,MAAA,YAAA+B,aAAA;IAAKC,SAAS,EAAEC,kBAAM,CAACC;EAAK,GACzBpB,QAAQ,eACTd,MAAA,YAAA+B,aAAA,CAAC3B,iBAAA,CAAA+B,gBAAgB;IACfpB,MAAM,EAAEA,MAAO;IACfC,OAAO,EAAEA,OAAQ;IACjBC,SAAS,EAAEA,SAAU;IACrBC,WAAW,EAAEA,WAAY;IACzBkB,aAAa,EAAC;EAAE,CACjB,CACE,CAAC;AAEV,CAAC;AAED3B,YAAY,CAAC4B,YAAY,GAAG;EAC1BrB,OAAO,EAAE;AACX,CAAC;AAED,SAASsB,cAAcA,CAACC,CAAC,EAAAC,KAAA,EAAqC;EAAA,IAAAC,WAAA,GAAAD,KAAA,CAAjCrB,KAAK;IAAIuB,KAAK,GAAAD,WAAA,CAALC,KAAK;IAAEC,WAAW,GAAAF,WAAA,CAAXE,WAAW;EACtD,OAAO;IACL5B,MAAM,EAAE4B,WAAW,CAAC5B,MAAM;IAC1BC,OAAO,EAAE2B,WAAW,CAAC3B,OAAO;IAC5BE,WAAW,EAAEwB,KAAK,CAACxB;EACrB,CAAC;AACH;AAEA,SAAS0B,UAAUA,CAACL,CAAC,EAAAM,KAAA,EAA8B;EAAA,IAAjBF,WAAW,GAAAE,KAAA,CAApB1B,KAAK,CAAIwB,WAAW;EAC3C,OAAO;IACL1B,SAAS,EAAE,SAAAA,UAAC6B,OAAY,EAAK;MAC3BH,WAAW,CAACI,OAAO,CAACD,OAAO,CAAC;IAC9B;EACF,CAAC;AACH;AAEO,IAAME,OAAO,GAAG,IAAAC,qBAAS,EAC9B,IAAAC,mBAAO,EAACZ,cAAc,EAAEM,UAAU,CAAC,CAACnC,YAAY,CAClD,CAAC;AAAC0C,OAAA,CAAAH,OAAA,GAAAA,OAAA"}