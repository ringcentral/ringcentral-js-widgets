{"version":3,"file":"RecipientsInputV2.js","names":["_react","_interopRequireWildcard","require","_classnames","_interopRequireDefault","_i18n","_DropdownList","_PhoneNumberInput","_SelectedRecipients","_styles","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","arr2","_i","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","err","isArray","isSplitterKey","e","keyCode","RecipientsInputV2","forwardRef","_ref","ref","className","enableTitle","recipients","multiple","useRCUI","removeFromRecipients","recipientsClassName","placeholder","currentLocale","onInputChange","onInputClear","_ref$label","label","concat","i18n","getString","searchContactList","formatContactPhone","phoneTypeRenderer","phoneSourceNameRenderer","contactInfoRenderer","contactPhoneRenderer","addToRecipients","isLastInputFromDialpad","thisEl","useRef","listEl","inputEl","_useState","useState","_useState2","stateValue","setStateValue","_useState3","_useState4","selectedIndex","setSelectedIndex","_useState5","_useState6","isInputFocused","setIsInputFocused","lastInputTimestamp","useImperativeHandle","focus","current","blur","useEffect","handler","_ref2","contains","window","addEventListener","removeEventListener","Date","now","toNumberInput","createElement","PhoneNumberInput","onChange","newValue","setScrollPosition","onClear","onFocus","classnames","styles","container","rcuiStyle","onKeyDown","prevIndex","scrollUp","scrollDown","preventDefault","trimmedValue","trim","selectedContact","replace","phoneNumber","rightPanel","SelectedRecipients","onRemove","DropdownList","contact","recipientOptions","visibility","recipientInfoRenderer","recipientPhoneRenderer","exports","defaultProps"],"sources":["components/RecipientsInputV2/RecipientsInputV2.tsx"],"sourcesContent":["/* eslint-disable react/no-multi-comp */\nimport type { KeyboardEvent } from 'react';\nimport React, {\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react';\n\nimport classnames from 'classnames';\n\nimport i18n from '../RecipientsInput/i18n';\nimport { DropdownList } from './DropdownList';\nimport { PhoneNumberInput } from './PhoneNumberInput';\nimport type {\n  RecipientsInputV2Handles,\n  RecipientsInputV2Props,\n} from './RecipientsInputV2.interface';\nimport { SelectedRecipients } from './SelectedRecipients';\nimport styles from './styles.scss';\n\n/**\n * Specs:\n * 1. When dialer buttons are pressed, the cursor should be moved to the end of the string,\n *    and the focus set to the input field. RCINT-7706\n * 2. Simplify recipient/recipients property\n */\n\nfunction isSplitterKey(e: KeyboardEvent): boolean {\n  if (\n    e.key === ',' ||\n    e.key === ';' ||\n    e.key === 'Enter' ||\n    (e.key === 'Unidentified' && // for Safari (FF cannot rely on keyCode...)\n      (e.keyCode === 186 || // semicolon\n        e.keyCode === 188 || // comma\n        e.keyCode === 13)) // enter\n  ) {\n    return true;\n  }\n  return false;\n}\nexport const RecipientsInputV2 = forwardRef<\n  RecipientsInputV2Handles,\n  RecipientsInputV2Props\n>(\n  (\n    {\n      className,\n      enableTitle,\n      recipients,\n      multiple,\n      useRCUI,\n      value,\n      removeFromRecipients,\n      recipientsClassName,\n      placeholder,\n      currentLocale,\n      onInputChange,\n      onInputClear,\n      label = `${i18n.getString('to', currentLocale)}:`,\n      searchContactList,\n      formatContactPhone,\n      phoneTypeRenderer,\n      phoneSourceNameRenderer,\n      contactInfoRenderer,\n      contactPhoneRenderer,\n      addToRecipients,\n      isLastInputFromDialpad,\n    },\n    ref,\n  ) => {\n    const thisEl = useRef(null);\n    const listEl = useRef(null);\n    const inputEl = useRef(null);\n    const [stateValue, setStateValue] = useState(value);\n    const [selectedIndex, setSelectedIndex] = useState(0);\n    const [isInputFocused, setIsInputFocused] = useState(false);\n    const lastInputTimestamp = useRef(0);\n    useImperativeHandle(ref, () => ({\n      focus() {\n        setIsInputFocused(true);\n        if (inputEl.current) {\n          // @ts-expect-error TS(2339): Property 'focus' does not exist on type 'never'.\n          inputEl.current.focus();\n        }\n      },\n      blur() {\n        setIsInputFocused(false);\n        if (inputEl.current) {\n          // @ts-expect-error TS(2339): Property 'blur' does not exist on type 'never'.\n          inputEl.current.blur();\n        }\n      },\n    }));\n    useEffect(() => {\n      const handler = ({ target }: MouseEvent) => {\n        // @ts-expect-error TS(2339): Property 'contains' does not exist on type 'never'... Remove this comment to see the full error message\n        if (thisEl.current && !thisEl.current.contains(target)) {\n          if (inputEl.current) {\n            // @ts-expect-error TS(2339): Property 'blur' does not exist on type 'never'.\n            inputEl.current.blur();\n          }\n          setIsInputFocused(false);\n        }\n      };\n      window.addEventListener('click', handler);\n      return () => {\n        window.removeEventListener('click', handler);\n      };\n    }, []); // pass [] so this only runs on mount and unmount\n\n    useEffect(() => {\n      if (\n        value !== stateValue &&\n        Date.now() - lastInputTimestamp.current > 300\n      ) {\n        setStateValue(value);\n      }\n    }, [value, stateValue]);\n\n    const toNumberInput =\n      !multiple && recipients.length ? null : (\n        <PhoneNumberInput\n          ref={inputEl}\n          placeholder={placeholder}\n          value={stateValue}\n          currentLocale={currentLocale}\n          onChange={(newValue) => {\n            lastInputTimestamp.current = Date.now();\n            setStateValue(newValue);\n            setSelectedIndex(0);\n            onInputChange(newValue);\n            if (listEl.current) {\n              // @ts-expect-error TS(2339): Property 'setScrollPosition' does not exist on typ... Remove this comment to see the full error message\n              listEl.current.setScrollPosition(0);\n            }\n          }}\n          onClear={() => {\n            setStateValue('');\n            onInputClear();\n          }}\n          onFocus={() => {\n            setIsInputFocused(true);\n          }}\n        />\n      );\n    return (\n      <div\n        className={classnames(\n          styles.container,\n          useRCUI ? styles.rcuiStyle : null,\n          className,\n        )}\n        ref={thisEl}\n        onKeyDown={(e) => {\n          if (isInputFocused && stateValue.length >= 3) {\n            if (e.key === 'ArrowUp') {\n              if (selectedIndex > 0) {\n                setSelectedIndex((prevIndex) => prevIndex - 1);\n                if (selectedIndex - 1 < searchContactList.length - 4) {\n                  // @ts-expect-error TS(2531): Object is possibly 'null'.\n                  listEl.current.scrollUp();\n                }\n              }\n            } else if (e.key === 'ArrowDown') {\n              if (selectedIndex < searchContactList.length - 1) {\n                setSelectedIndex((prevIndex) => prevIndex + 1);\n                if (selectedIndex + 1 > 4) {\n                  // @ts-expect-error TS(2531): Object is possibly 'null'.\n                  listEl.current.scrollDown();\n                }\n              }\n            }\n          }\n\n          if (isSplitterKey(e)) {\n            e.preventDefault();\n            const trimmedValue = stateValue.trim();\n            const selectedContact = searchContactList[selectedIndex];\n            if (trimmedValue.length === 0 && !selectedContact) {\n              return;\n            }\n            if (selectedContact && e.key === 'Enter') {\n              addToRecipients({\n                ...selectedContact,\n              });\n            } else {\n              addToRecipients({\n                name: trimmedValue.replace(',', ''),\n                phoneNumber: trimmedValue.replace(',', ''),\n              });\n            }\n          }\n        }}\n      >\n        <span className={styles.label}>{label}</span>\n        <div\n          className={classnames(useRCUI && styles.rcuiStyle, styles.rightPanel)}\n        >\n          <SelectedRecipients\n            recipients={recipients}\n            onRemove={removeFromRecipients}\n            className={recipientsClassName}\n          />\n          {toNumberInput}\n        </div>\n        <DropdownList\n          currentLocale={currentLocale}\n          ref={listEl}\n          selectedIndex={selectedIndex}\n          setSelectedIndex={setSelectedIndex}\n          addToRecipients={(contact) => {\n            setStateValue('');\n            onInputChange('');\n            addToRecipients(contact);\n          }}\n          recipientOptions={searchContactList}\n          formatContactPhone={formatContactPhone}\n          visibility={isInputFocused && !isLastInputFromDialpad}\n          enableTitle={enableTitle}\n          phoneTypeRenderer={phoneTypeRenderer}\n          phoneSourceNameRenderer={phoneSourceNameRenderer}\n          recipientInfoRenderer={contactInfoRenderer}\n          recipientPhoneRenderer={contactPhoneRenderer}\n        />\n      </div>\n    );\n  },\n);\n\nRecipientsInputV2.defaultProps = {\n  enableTitle: false,\n  multiple: false,\n  useRCUI: false,\n  isLastInputFromDialpad: false,\n};\n"],"mappings":";;;;;;;;;;;;;AAEA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AAQA,IAAAC,WAAA,GAAAC,sBAAA,CAAAF,OAAA;AAEA,IAAAG,KAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,aAAA,GAAAJ,OAAA;AACA,IAAAK,iBAAA,GAAAL,OAAA;AAKA,IAAAM,mBAAA,GAAAN,OAAA;AACA,IAAAO,OAAA,GAAAL,sBAAA,CAAAF,OAAA;AAAmC,SAAAE,uBAAAM,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,gBAAAA,GAAA;AAAA,SAAAE,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAZ,wBAAAS,GAAA,EAAAG,WAAA,SAAAA,WAAA,IAAAH,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,aAAAO,OAAA,CAAAP,GAAA,yBAAAA,GAAA,uCAAAA,GAAA,UAAAQ,KAAA,GAAAN,wBAAA,CAAAC,WAAA,OAAAK,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAT,GAAA,YAAAQ,KAAA,CAAAE,GAAA,CAAAV,GAAA,SAAAW,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAhB,GAAA,QAAAgB,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAnB,GAAA,EAAAgB,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAf,GAAA,EAAAgB,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAhB,GAAA,CAAAgB,GAAA,SAAAL,MAAA,cAAAX,GAAA,MAAAQ,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAArB,GAAA,EAAAW,MAAA,YAAAA,MAAA;AAAA,SAAAW,QAAAC,MAAA,EAAAC,cAAA,QAAAC,IAAA,GAAAZ,MAAA,CAAAY,IAAA,CAAAF,MAAA,OAAAV,MAAA,CAAAa,qBAAA,QAAAC,OAAA,GAAAd,MAAA,CAAAa,qBAAA,CAAAH,MAAA,GAAAC,cAAA,KAAAG,OAAA,GAAAA,OAAA,CAAAC,MAAA,WAAAC,GAAA,WAAAhB,MAAA,CAAAE,wBAAA,CAAAQ,MAAA,EAAAM,GAAA,EAAAC,UAAA,OAAAL,IAAA,CAAAM,IAAA,CAAAC,KAAA,CAAAP,IAAA,EAAAE,OAAA,YAAAF,IAAA;AAAA,SAAAQ,cAAAC,MAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAF,CAAA,UAAAG,MAAA,WAAAF,SAAA,CAAAD,CAAA,IAAAC,SAAA,CAAAD,CAAA,QAAAA,CAAA,OAAAb,OAAA,CAAAT,MAAA,CAAAyB,MAAA,OAAAC,OAAA,WAAAvB,GAAA,IAAAwB,eAAA,CAAAN,MAAA,EAAAlB,GAAA,EAAAsB,MAAA,CAAAtB,GAAA,SAAAH,MAAA,CAAA4B,yBAAA,GAAA5B,MAAA,CAAA6B,gBAAA,CAAAR,MAAA,EAAArB,MAAA,CAAA4B,yBAAA,CAAAH,MAAA,KAAAhB,OAAA,CAAAT,MAAA,CAAAyB,MAAA,GAAAC,OAAA,WAAAvB,GAAA,IAAAH,MAAA,CAAAC,cAAA,CAAAoB,MAAA,EAAAlB,GAAA,EAAAH,MAAA,CAAAE,wBAAA,CAAAuB,MAAA,EAAAtB,GAAA,iBAAAkB,MAAA;AAAA,SAAAM,gBAAAxC,GAAA,EAAAgB,GAAA,EAAA2B,KAAA,IAAA3B,GAAA,GAAA4B,cAAA,CAAA5B,GAAA,OAAAA,GAAA,IAAAhB,GAAA,IAAAa,MAAA,CAAAC,cAAA,CAAAd,GAAA,EAAAgB,GAAA,IAAA2B,KAAA,EAAAA,KAAA,EAAAb,UAAA,QAAAe,YAAA,QAAAC,QAAA,oBAAA9C,GAAA,CAAAgB,GAAA,IAAA2B,KAAA,WAAA3C,GAAA;AAAA,SAAA4C,eAAAG,GAAA,QAAA/B,GAAA,GAAAgC,YAAA,CAAAD,GAAA,oBAAAxC,OAAA,CAAAS,GAAA,iBAAAA,GAAA,GAAAiC,MAAA,CAAAjC,GAAA;AAAA,SAAAgC,aAAAE,KAAA,EAAAC,IAAA,QAAA5C,OAAA,CAAA2C,KAAA,kBAAAA,KAAA,kBAAAA,KAAA,MAAAE,IAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,WAAA,OAAAF,IAAA,KAAAG,SAAA,QAAAC,GAAA,GAAAJ,IAAA,CAAAjC,IAAA,CAAA+B,KAAA,EAAAC,IAAA,oBAAA5C,OAAA,CAAAiD,GAAA,uBAAAA,GAAA,YAAAC,SAAA,4DAAAN,IAAA,gBAAAF,MAAA,GAAAS,MAAA,EAAAR,KAAA;AAAA,SAAAS,eAAAC,GAAA,EAAAzB,CAAA,WAAA0B,eAAA,CAAAD,GAAA,KAAAE,qBAAA,CAAAF,GAAA,EAAAzB,CAAA,KAAA4B,2BAAA,CAAAH,GAAA,EAAAzB,CAAA,KAAA6B,gBAAA;AAAA,SAAAA,iBAAA,cAAAP,SAAA;AAAA,SAAAM,4BAAAE,CAAA,EAAAC,MAAA,SAAAD,CAAA,qBAAAA,CAAA,sBAAAE,iBAAA,CAAAF,CAAA,EAAAC,MAAA,OAAAE,CAAA,GAAAvD,MAAA,CAAAI,SAAA,CAAAoD,QAAA,CAAAlD,IAAA,CAAA8C,CAAA,EAAAK,KAAA,aAAAF,CAAA,iBAAAH,CAAA,CAAAM,WAAA,EAAAH,CAAA,GAAAH,CAAA,CAAAM,WAAA,CAAAC,IAAA,MAAAJ,CAAA,cAAAA,CAAA,mBAAAK,KAAA,CAAAC,IAAA,CAAAT,CAAA,OAAAG,CAAA,+DAAAO,IAAA,CAAAP,CAAA,UAAAD,iBAAA,CAAAF,CAAA,EAAAC,MAAA;AAAA,SAAAC,kBAAAP,GAAA,EAAAgB,GAAA,QAAAA,GAAA,YAAAA,GAAA,GAAAhB,GAAA,CAAAvB,MAAA,EAAAuC,GAAA,GAAAhB,GAAA,CAAAvB,MAAA,WAAAF,CAAA,MAAA0C,IAAA,OAAAJ,KAAA,CAAAG,GAAA,GAAAzC,CAAA,GAAAyC,GAAA,EAAAzC,CAAA,MAAA0C,IAAA,CAAA1C,CAAA,IAAAyB,GAAA,CAAAzB,CAAA,YAAA0C,IAAA;AAAA,SAAAf,sBAAAF,GAAA,EAAAzB,CAAA,QAAA2C,EAAA,WAAAlB,GAAA,gCAAAP,MAAA,IAAAO,GAAA,CAAAP,MAAA,CAAA0B,QAAA,KAAAnB,GAAA,4BAAAkB,EAAA,QAAAE,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,IAAA,OAAAC,EAAA,OAAAC,EAAA,iBAAAJ,EAAA,IAAAJ,EAAA,GAAAA,EAAA,CAAA3D,IAAA,CAAAyC,GAAA,GAAA2B,IAAA,QAAApD,CAAA,QAAAtB,MAAA,CAAAiE,EAAA,MAAAA,EAAA,UAAAO,EAAA,uBAAAA,EAAA,IAAAL,EAAA,GAAAE,EAAA,CAAA/D,IAAA,CAAA2D,EAAA,GAAAU,IAAA,MAAAJ,IAAA,CAAArD,IAAA,CAAAiD,EAAA,CAAArC,KAAA,GAAAyC,IAAA,CAAA/C,MAAA,KAAAF,CAAA,GAAAkD,EAAA,sBAAAI,GAAA,IAAAH,EAAA,OAAAL,EAAA,GAAAQ,GAAA,yBAAAJ,EAAA,YAAAP,EAAA,eAAAK,EAAA,GAAAL,EAAA,cAAAjE,MAAA,CAAAsE,EAAA,MAAAA,EAAA,2BAAAG,EAAA,QAAAL,EAAA,aAAAG,IAAA;AAAA,SAAAvB,gBAAAD,GAAA,QAAAa,KAAA,CAAAiB,OAAA,CAAA9B,GAAA,UAAAA,GAAA,IApBnC;AAsBA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS+B,aAAaA,CAACC,CAAgB,EAAW;EAChD,IACEA,CAAC,CAAC5E,GAAG,KAAK,GAAG,IACb4E,CAAC,CAAC5E,GAAG,KAAK,GAAG,IACb4E,CAAC,CAAC5E,GAAG,KAAK,OAAO,IAChB4E,CAAC,CAAC5E,GAAG,KAAK,cAAc;EAAI;EAC1B4E,CAAC,CAACC,OAAO,KAAK,GAAG;EAAI;EACpBD,CAAC,CAACC,OAAO,KAAK,GAAG;EAAI;EACrBD,CAAC,CAACC,OAAO,KAAK,EAAE,CAAE,CAAC;EAAA,EACvB;IACA,OAAO,IAAI;EACb;EACA,OAAO,KAAK;AACd;AACO,IAAMC,iBAAiB,gBAAG,IAAAC,iBAAU,EAIzC,UAAAC,IAAA,EAwBEC,GAAG,EACA;EAAA,IAvBDC,SAAS,GAAAF,IAAA,CAATE,SAAS;IACTC,WAAW,GAAAH,IAAA,CAAXG,WAAW;IACXC,UAAU,GAAAJ,IAAA,CAAVI,UAAU;IACVC,QAAQ,GAAAL,IAAA,CAARK,QAAQ;IACRC,OAAO,GAAAN,IAAA,CAAPM,OAAO;IACP3D,KAAK,GAAAqD,IAAA,CAALrD,KAAK;IACL4D,oBAAoB,GAAAP,IAAA,CAApBO,oBAAoB;IACpBC,mBAAmB,GAAAR,IAAA,CAAnBQ,mBAAmB;IACnBC,WAAW,GAAAT,IAAA,CAAXS,WAAW;IACXC,aAAa,GAAAV,IAAA,CAAbU,aAAa;IACbC,aAAa,GAAAX,IAAA,CAAbW,aAAa;IACbC,YAAY,GAAAZ,IAAA,CAAZY,YAAY;IAAAC,UAAA,GAAAb,IAAA,CACZc,KAAK;IAALA,KAAK,GAAAD,UAAA,iBAAAE,MAAA,CAAMC,gBAAI,CAACC,SAAS,CAAC,IAAI,EAAEP,aAAa,CAAC,SAAAG,UAAA;IAC9CK,iBAAiB,GAAAlB,IAAA,CAAjBkB,iBAAiB;IACjBC,kBAAkB,GAAAnB,IAAA,CAAlBmB,kBAAkB;IAClBC,iBAAiB,GAAApB,IAAA,CAAjBoB,iBAAiB;IACjBC,uBAAuB,GAAArB,IAAA,CAAvBqB,uBAAuB;IACvBC,mBAAmB,GAAAtB,IAAA,CAAnBsB,mBAAmB;IACnBC,oBAAoB,GAAAvB,IAAA,CAApBuB,oBAAoB;IACpBC,gBAAe,GAAAxB,IAAA,CAAfwB,eAAe;IACfC,sBAAsB,GAAAzB,IAAA,CAAtByB,sBAAsB;EAIxB,IAAMC,MAAM,GAAG,IAAAC,aAAM,EAAC,IAAI,CAAC;EAC3B,IAAMC,MAAM,GAAG,IAAAD,aAAM,EAAC,IAAI,CAAC;EAC3B,IAAME,OAAO,GAAG,IAAAF,aAAM,EAAC,IAAI,CAAC;EAAC,IAAAG,SAAA,GACO,IAAAC,eAAQ,EAACpF,KAAK,CAAC;IAAAqF,UAAA,GAAArE,cAAA,CAAAmE,SAAA;IAA5CG,UAAU,GAAAD,UAAA;IAAEE,aAAa,GAAAF,UAAA;EAAA,IAAAG,UAAA,GACU,IAAAJ,eAAQ,EAAC,CAAC,CAAC;IAAAK,UAAA,GAAAzE,cAAA,CAAAwE,UAAA;IAA9CE,aAAa,GAAAD,UAAA;IAAEE,gBAAgB,GAAAF,UAAA;EAAA,IAAAG,UAAA,GACM,IAAAR,eAAQ,EAAC,KAAK,CAAC;IAAAS,UAAA,GAAA7E,cAAA,CAAA4E,UAAA;IAApDE,cAAc,GAAAD,UAAA;IAAEE,iBAAiB,GAAAF,UAAA;EACxC,IAAMG,kBAAkB,GAAG,IAAAhB,aAAM,EAAC,CAAC,CAAC;EACpC,IAAAiB,0BAAmB,EAAC3C,GAAG,EAAE;IAAA,OAAO;MAC9B4C,KAAK,WAAAA,MAAA,EAAG;QACNH,iBAAiB,CAAC,IAAI,CAAC;QACvB,IAAIb,OAAO,CAACiB,OAAO,EAAE;UACnB;UACAjB,OAAO,CAACiB,OAAO,CAACD,KAAK,CAAC,CAAC;QACzB;MACF,CAAC;MACDE,IAAI,WAAAA,KAAA,EAAG;QACLL,iBAAiB,CAAC,KAAK,CAAC;QACxB,IAAIb,OAAO,CAACiB,OAAO,EAAE;UACnB;UACAjB,OAAO,CAACiB,OAAO,CAACC,IAAI,CAAC,CAAC;QACxB;MACF;IACF,CAAC;EAAA,CAAC,CAAC;EACH,IAAAC,gBAAS,EAAC,YAAM;IACd,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAAC,KAAA,EAA+B;MAAA,IAAzBhH,MAAM,GAAAgH,KAAA,CAANhH,MAAM;MACvB;MACA,IAAIwF,MAAM,CAACoB,OAAO,IAAI,CAACpB,MAAM,CAACoB,OAAO,CAACK,QAAQ,CAACjH,MAAM,CAAC,EAAE;QACtD,IAAI2F,OAAO,CAACiB,OAAO,EAAE;UACnB;UACAjB,OAAO,CAACiB,OAAO,CAACC,IAAI,CAAC,CAAC;QACxB;QACAL,iBAAiB,CAAC,KAAK,CAAC;MAC1B;IACF,CAAC;IACDU,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAEJ,OAAO,CAAC;IACzC,OAAO,YAAM;MACXG,MAAM,CAACE,mBAAmB,CAAC,OAAO,EAAEL,OAAO,CAAC;IAC9C,CAAC;EACH,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;;EAER,IAAAD,gBAAS,EAAC,YAAM;IACd,IACErG,KAAK,KAAKsF,UAAU,IACpBsB,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGb,kBAAkB,CAACG,OAAO,GAAG,GAAG,EAC7C;MACAZ,aAAa,CAACvF,KAAK,CAAC;IACtB;EACF,CAAC,EAAE,CAACA,KAAK,EAAEsF,UAAU,CAAC,CAAC;EAEvB,IAAMwB,aAAa,GACjB,CAACpD,QAAQ,IAAID,UAAU,CAAC/D,MAAM,GAAG,IAAI,gBACnC/C,MAAA,YAAAoK,aAAA,CAAC7J,iBAAA,CAAA8J,gBAAgB;IACf1D,GAAG,EAAE4B,OAAQ;IACbpB,WAAW,EAAEA,WAAY;IACzB9D,KAAK,EAAEsF,UAAW;IAClBvB,aAAa,EAAEA,aAAc;IAC7BkD,QAAQ,EAAE,SAAAA,SAACC,QAAQ,EAAK;MACtBlB,kBAAkB,CAACG,OAAO,GAAGS,IAAI,CAACC,GAAG,CAAC,CAAC;MACvCtB,aAAa,CAAC2B,QAAQ,CAAC;MACvBvB,gBAAgB,CAAC,CAAC,CAAC;MACnB3B,aAAa,CAACkD,QAAQ,CAAC;MACvB,IAAIjC,MAAM,CAACkB,OAAO,EAAE;QAClB;QACAlB,MAAM,CAACkB,OAAO,CAACgB,iBAAiB,CAAC,CAAC,CAAC;MACrC;IACF,CAAE;IACFC,OAAO,EAAE,SAAAA,QAAA,EAAM;MACb7B,aAAa,CAAC,EAAE,CAAC;MACjBtB,YAAY,CAAC,CAAC;IAChB,CAAE;IACFoD,OAAO,EAAE,SAAAA,QAAA,EAAM;MACbtB,iBAAiB,CAAC,IAAI,CAAC;IACzB;EAAE,CACH,CACF;EACH,oBACEpJ,MAAA,YAAAoK,aAAA;IACExD,SAAS,EAAE,IAAA+D,sBAAU,EACnBC,kBAAM,CAACC,SAAS,EAChB7D,OAAO,GAAG4D,kBAAM,CAACE,SAAS,GAAG,IAAI,EACjClE,SACF,CAAE;IACFD,GAAG,EAAEyB,MAAO;IACZ2C,SAAS,EAAE,SAAAA,UAACzE,CAAC,EAAK;MAChB,IAAI6C,cAAc,IAAIR,UAAU,CAAC5F,MAAM,IAAI,CAAC,EAAE;QAC5C,IAAIuD,CAAC,CAAC5E,GAAG,KAAK,SAAS,EAAE;UACvB,IAAIqH,aAAa,GAAG,CAAC,EAAE;YACrBC,gBAAgB,CAAC,UAACgC,SAAS;cAAA,OAAKA,SAAS,GAAG,CAAC;YAAA,EAAC;YAC9C,IAAIjC,aAAa,GAAG,CAAC,GAAGnB,iBAAiB,CAAC7E,MAAM,GAAG,CAAC,EAAE;cACpD;cACAuF,MAAM,CAACkB,OAAO,CAACyB,QAAQ,CAAC,CAAC;YAC3B;UACF;QACF,CAAC,MAAM,IAAI3E,CAAC,CAAC5E,GAAG,KAAK,WAAW,EAAE;UAChC,IAAIqH,aAAa,GAAGnB,iBAAiB,CAAC7E,MAAM,GAAG,CAAC,EAAE;YAChDiG,gBAAgB,CAAC,UAACgC,SAAS;cAAA,OAAKA,SAAS,GAAG,CAAC;YAAA,EAAC;YAC9C,IAAIjC,aAAa,GAAG,CAAC,GAAG,CAAC,EAAE;cACzB;cACAT,MAAM,CAACkB,OAAO,CAAC0B,UAAU,CAAC,CAAC;YAC7B;UACF;QACF;MACF;MAEA,IAAI7E,aAAa,CAACC,CAAC,CAAC,EAAE;QACpBA,CAAC,CAAC6E,cAAc,CAAC,CAAC;QAClB,IAAMC,YAAY,GAAGzC,UAAU,CAAC0C,IAAI,CAAC,CAAC;QACtC,IAAMC,eAAe,GAAG1D,iBAAiB,CAACmB,aAAa,CAAC;QACxD,IAAIqC,YAAY,CAACrI,MAAM,KAAK,CAAC,IAAI,CAACuI,eAAe,EAAE;UACjD;QACF;QACA,IAAIA,eAAe,IAAIhF,CAAC,CAAC5E,GAAG,KAAK,OAAO,EAAE;UACxCwG,gBAAe,CAAAvF,aAAA,KACV2I,eAAe,CACnB,CAAC;QACJ,CAAC,MAAM;UACLpD,gBAAe,CAAC;YACdhD,IAAI,EAAEkG,YAAY,CAACG,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;YACnCC,WAAW,EAAEJ,YAAY,CAACG,OAAO,CAAC,GAAG,EAAE,EAAE;UAC3C,CAAC,CAAC;QACJ;MACF;IACF;EAAE,gBAEFvL,MAAA,YAAAoK,aAAA;IAAMxD,SAAS,EAAEgE,kBAAM,CAACpD;EAAM,GAAEA,KAAY,CAAC,eAC7CxH,MAAA,YAAAoK,aAAA;IACExD,SAAS,EAAE,IAAA+D,sBAAU,EAAC3D,OAAO,IAAI4D,kBAAM,CAACE,SAAS,EAAEF,kBAAM,CAACa,UAAU;EAAE,gBAEtEzL,MAAA,YAAAoK,aAAA,CAAC5J,mBAAA,CAAAkL,kBAAkB;IACjB5E,UAAU,EAAEA,UAAW;IACvB6E,QAAQ,EAAE1E,oBAAqB;IAC/BL,SAAS,EAAEM;EAAoB,CAChC,CAAC,EACDiD,aACE,CAAC,eACNnK,MAAA,YAAAoK,aAAA,CAAC9J,aAAA,CAAAsL,YAAY;IACXxE,aAAa,EAAEA,aAAc;IAC7BT,GAAG,EAAE2B,MAAO;IACZS,aAAa,EAAEA,aAAc;IAC7BC,gBAAgB,EAAEA,gBAAiB;IACnCd,eAAe,EAAE,SAAAA,gBAAC2D,OAAO,EAAK;MAC5BjD,aAAa,CAAC,EAAE,CAAC;MACjBvB,aAAa,CAAC,EAAE,CAAC;MACjBa,gBAAe,CAAC2D,OAAO,CAAC;IAC1B,CAAE;IACFC,gBAAgB,EAAElE,iBAAkB;IACpCC,kBAAkB,EAAEA,kBAAmB;IACvCkE,UAAU,EAAE5C,cAAc,IAAI,CAAChB,sBAAuB;IACtDtB,WAAW,EAAEA,WAAY;IACzBiB,iBAAiB,EAAEA,iBAAkB;IACrCC,uBAAuB,EAAEA,uBAAwB;IACjDiE,qBAAqB,EAAEhE,mBAAoB;IAC3CiE,sBAAsB,EAAEhE;EAAqB,CAC9C,CACE,CAAC;AAEV,CACF,CAAC;AAACiE,OAAA,CAAA1F,iBAAA,GAAAA,iBAAA;AAEFA,iBAAiB,CAAC2F,YAAY,GAAG;EAC/BtF,WAAW,EAAE,KAAK;EAClBE,QAAQ,EAAE,KAAK;EACfC,OAAO,EAAE,KAAK;EACdmB,sBAAsB,EAAE;AAC1B,CAAC"}