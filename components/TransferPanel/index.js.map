{"version":3,"sources":["components/TransferPanel/index.js"],"names":["TransferPanel","props","onButtonOutput","key","setState","isLastInputFromDialpad","state","recipient","preState","value","toNumber","onTransfer","_getTransferNumber","sessionId","onWarmTransfer","onToNumberChange","clearToNumber","setRecipient","clearRecipient","load","nextProps","session","onCallEnd","setActiveSessionId","phoneNumber","controlBusy","onBack","currentLocale","searchContact","searchContactList","formatPhone","phoneTypeRenderer","phoneSourceNameRenderer","recipientsContactInfoRenderer","recipientsContactPhoneRenderer","autoFocus","enableWarmTransfer","isOnTransfer","transferButton","warmTransferButton","styles","button","buttonGroupItem","disabled","undefined","TransferIcon","i18n","getString","Askfirst","root","dialInput","padContainer","dialPad","buttonRow","PureComponent","propTypes","PropTypes","func","isRequired","string","array","bool","object","defaultProps"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nimport { Askfirst } from '@ringcentral/juno/icon';\n\nimport DialPad from '../DialPad';\nimport RecipientsInput from '../RecipientsInput';\nimport BackHeader from '../BackHeader';\nimport CircleButton from '../CircleButton';\nimport ActiveCallButton from '../ActiveCallButton';\nimport TransferIcon from '../../assets/images/Transfer.svg';\nimport styles from './styles.scss';\nimport i18n from './i18n';\n\nexport default class TransferPanel extends PureComponent {\n  static propTypes = {\n    setActiveSessionId: PropTypes.func,\n    onTransfer: PropTypes.func.isRequired,\n    currentLocale: PropTypes.string.isRequired,\n    onBack: PropTypes.func.isRequired,\n    onCallEnd: PropTypes.func.isRequired,\n    searchContactList: PropTypes.array,\n    searchContact: PropTypes.func.isRequired,\n    formatPhone: PropTypes.func.isRequired,\n    phoneTypeRenderer: PropTypes.func,\n    phoneSourceNameRenderer: PropTypes.func,\n    recipientsContactInfoRenderer: PropTypes.func,\n    recipientsContactPhoneRenderer: PropTypes.func,\n    autoFocus: PropTypes.bool,\n    sessionId: PropTypes.string.isRequired,\n    session: PropTypes.object,\n    controlBusy: PropTypes.bool,\n    enableWarmTransfer: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    setActiveSessionId: null,\n    phoneTypeRenderer: undefined,\n    phoneSourceNameRenderer: undefined,\n    recipientsContactInfoRenderer: undefined,\n    recipientsContactPhoneRenderer: undefined,\n    autoFocus: true,\n    session: null,\n    searchContactList: [],\n    controlBusy: false,\n    enableWarmTransfer: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      toNumber: '',\n      recipient: null,\n      isLastInputFromDialpad: false,\n    };\n  }\n\n  componentDidMount() {\n    this.load();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (this.props.session && !nextProps.session) {\n      this.props.onCallEnd();\n    }\n  }\n\n  load() {\n    this.props.setActiveSessionId(this.props.sessionId);\n  }\n\n  _getTransferNumber() {\n    return (\n      (this.state.recipient && this.state.recipient.phoneNumber) ||\n      this.state.toNumber\n    );\n  }\n\n  onButtonOutput = (key) => {\n    this.setState({\n      isLastInputFromDialpad: true,\n    });\n    if (this.state.recipient) {\n      return;\n    }\n    this.setState((preState) => {\n      const value = preState.toNumber + key;\n      return { toNumber: value };\n    });\n  };\n\n  onTransfer = () => {\n    this.props.onTransfer(this._getTransferNumber(), this.props.sessionId);\n  };\n\n  onWarmTransfer = () => {\n    this.props.onWarmTransfer(this._getTransferNumber(), this.props.sessionId);\n  };\n\n  onToNumberChange = (toNumber) => {\n    this.setState({\n      isLastInputFromDialpad: false,\n      toNumber,\n    });\n  };\n\n  clearToNumber = () => {\n    this.setState({\n      toNumber: '',\n    });\n  };\n\n  setRecipient = (recipient) => {\n    this.setState({\n      recipient,\n      toNumber: '',\n    });\n  };\n\n  clearRecipient = () => {\n    this.setState({ recipient: null });\n  };\n\n  render() {\n    const {\n      controlBusy,\n      session,\n      onBack,\n      currentLocale,\n      searchContact,\n      searchContactList,\n      formatPhone,\n      phoneTypeRenderer,\n      phoneSourceNameRenderer,\n      recipientsContactInfoRenderer,\n      recipientsContactPhoneRenderer,\n      autoFocus,\n      enableWarmTransfer,\n    } = this.props;\n    if (!session) {\n      return null;\n    }\n    const isOnTransfer = !!session.isOnTransfer;\n    let transferButton;\n    let warmTransferButton;\n    if (enableWarmTransfer) {\n      transferButton = (\n        <div className={classnames(styles.button, styles.buttonGroupItem)}>\n          <ActiveCallButton\n            dataSign=\"transferBtn\"\n            className={isOnTransfer ? styles.disabled : undefined}\n            onClick={this.onTransfer}\n            icon={TransferIcon}\n            disabled={isOnTransfer || controlBusy}\n            title={i18n.getString('blindTransfer', currentLocale)}\n          />\n        </div>\n      );\n      warmTransferButton = (\n        <div className={classnames(styles.button, styles.buttonGroupItem)}>\n          <ActiveCallButton\n            dataSign=\"warnTransferBtn\"\n            className={isOnTransfer ? styles.disabled : undefined}\n            onClick={this.onWarmTransfer}\n            icon={Askfirst}\n            disabled={isOnTransfer || controlBusy}\n            title={i18n.getString('warmTransfer', currentLocale)}\n          />\n        </div>\n      );\n    } else {\n      transferButton = (\n        <div className={styles.button}>\n          <CircleButton\n            dataSign=\"transferBtn\"\n            className={isOnTransfer ? styles.disabled : undefined}\n            onClick={this.onTransfer}\n            icon={TransferIcon}\n            disabled={isOnTransfer || controlBusy}\n          />\n        </div>\n      );\n    }\n    return (\n      <div className={styles.root}>\n        <BackHeader onBackClick={onBack}>\n          {i18n.getString('transferTo', currentLocale)}\n        </BackHeader>\n        <RecipientsInput\n          className={styles.dialInput}\n          value={this.state.toNumber}\n          onChange={this.onToNumberChange}\n          onClean={this.clearToNumber}\n          recipient={this.state.recipient}\n          addToRecipients={this.setRecipient}\n          removeFromRecipients={this.clearRecipient}\n          searchContact={searchContact}\n          searchContactList={searchContactList}\n          formatContactPhone={formatPhone}\n          currentLocale={currentLocale}\n          phoneTypeRenderer={phoneTypeRenderer}\n          phoneSourceNameRenderer={phoneSourceNameRenderer}\n          contactInfoRenderer={recipientsContactInfoRenderer}\n          contactPhoneRenderer={recipientsContactPhoneRenderer}\n          isLastInputFromDialpad={this.state.isLastInputFromDialpad}\n          titleEnabled\n          autoFocus={autoFocus}\n        />\n        <div className={styles.padContainer}>\n          <DialPad\n            dataSign=\"transfer\"\n            className={styles.dialPad}\n            onButtonOutput={this.onButtonOutput}\n          />\n          <div className={styles.buttonRow}>\n            {warmTransferButton}\n            {transferButton}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"],"file":"index.js"}