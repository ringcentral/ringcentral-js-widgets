{"version":3,"file":"AudioDeviceSelect.js","names":["_juno","require","_react","_interopRequireDefault","_i18n","_styles","e","__esModule","_extends","Object","assign","bind","n","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutProperties","o","i","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","SelectDevice","_ref","children","label","props","createElement","className","styles","selectContainer","RcTypography","variant","color","RcSelect","fullWidth","exports","getFallbackLabel","device","fallbackLabel","deviceId","concat","slice","getDeviceOptionRenderer","AudioDeviceSelect","_ref2","_ref2$availableDevice","availableDevices","onChange","isDisabled","dataSign","allDevicesAreEmpty","every","item","value","disabled","RcMenuItem","RcListItemText","primary","target","map","key","RcTooltip","title"],"sources":["components/AudioSettingsPanelV2/components/AudioDeviceSelect.tsx"],"sourcesContent":["import { type OmitFunctions } from '@ringcentral-integration/utils/src/typeFunctions/OmitFunctions';\nimport {\n  RcSelect,\n  RcMenuItem,\n  RcListItemText,\n  type RcSelectProps,\n  RcTypography,\n  RcTooltip,\n} from '@ringcentral/juno';\nimport React from 'react';\nimport type { FC } from 'react';\n\nimport { t } from '../i18n';\nimport styles from '../styles.scss';\n\nexport const SelectDevice = ({ children, label, ...props }: RcSelectProps) => (\n  <div className={styles.selectContainer}>\n    <RcTypography variant=\"body2\" color=\"neutral.f06\">\n      {label}\n    </RcTypography>\n    <RcSelect variant=\"box\" fullWidth {...props}>\n      {children}\n    </RcSelect>\n  </div>\n);\n\nexport const getFallbackLabel = (device: OmitFunctions<MediaDeviceInfo>) => {\n  const fallbackLabel = t('noLabel');\n  const deviceId = device.deviceId ? `(${device.deviceId.slice(-4)})` : '';\n  return `${fallbackLabel}${deviceId}`;\n};\n\nexport const getDeviceOptionRenderer = (\n  device: OmitFunctions<MediaDeviceInfo>,\n) => {\n  if (device && device.label) {\n    return device.label;\n  }\n  if (device && device.deviceId === 'off') {\n    return t('off');\n  }\n  return getFallbackLabel(device);\n};\n\nexport const AudioDeviceSelect: FC<{\n  availableDevices: OmitFunctions<MediaDeviceInfo>[];\n  isDisabled?: boolean;\n  deviceId: string;\n  onChange: (deviceId: string) => void;\n  label: string;\n  dataSign: string;\n}> = ({\n  availableDevices = [],\n  onChange,\n  isDisabled,\n  deviceId,\n  label,\n  dataSign,\n}) => {\n  const allDevicesAreEmpty = availableDevices.every(\n    (item) =>\n      (item.label === '' && item.deviceId === '') ||\n      (item.label === '' && item.deviceId === 'off'),\n  );\n  if (!availableDevices.length || allDevicesAreEmpty) {\n    return (\n      <SelectDevice label={label} value=\"default\" disabled data-sign={dataSign}>\n        <RcMenuItem value=\"default\">\n          <RcListItemText primary={t('noDevices')} />\n        </RcMenuItem>\n      </SelectDevice>\n    );\n  }\n  return (\n    <SelectDevice\n      data-sign={dataSign}\n      value={deviceId}\n      onChange={(e) => {\n        const deviceId = e.target.value;\n        onChange(deviceId as string);\n      }}\n      disabled={isDisabled}\n      label={label}\n    >\n      {availableDevices.map((device) => (\n        <RcMenuItem key={device.deviceId} value={device.deviceId}>\n          <RcTooltip title={getDeviceOptionRenderer(device)}>\n            <RcListItemText primary={getDeviceOptionRenderer(device)} />\n          </RcTooltip>\n        </RcMenuItem>\n      ))}\n    </SelectDevice>\n  );\n};\n"],"mappings":"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","ignoreList":[]}