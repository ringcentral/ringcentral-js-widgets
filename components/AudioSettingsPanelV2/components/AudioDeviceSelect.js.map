{"version":3,"file":"AudioDeviceSelect.js","names":["_juno","require","_react","_interopRequireDefault","_i18n","_styles","e","__esModule","_extends","Object","assign","bind","n","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutProperties","o","i","_objectWithoutPropertiesLoose","getOwnPropertySymbols","s","includes","propertyIsEnumerable","SelectDevice","_ref","children","label","props","createElement","RcSelect","className","styles","select","variant","fullWidth","RcTypography","color","exports","getFallbackLabel","device","fallbackLabel","deviceId","concat","slice","getDeviceOptionRenderer","AudioDeviceSelect","_ref2","_ref2$availableDevice","availableDevices","onChange","isDisabled","dataSign","allDevicesAreEmpty","every","item","value","disabled","RcMenuItem","RcListItemText","primary","target","map","key","RcTooltip","title"],"sources":["components/AudioSettingsPanelV2/components/AudioDeviceSelect.tsx"],"sourcesContent":["import { type OmitFunctions } from '@ringcentral-integration/utils/src/typeFunctions/OmitFunctions';\nimport {\n  RcSelect,\n  RcMenuItem,\n  RcListItemText,\n  type RcSelectProps,\n  RcTypography,\n  RcTooltip,\n} from '@ringcentral/juno';\nimport React from 'react';\nimport type { FC } from 'react';\n\nimport { t } from '../i18n';\nimport styles from '../styles.scss';\n\nexport const SelectDevice = ({ children, label, ...props }: RcSelectProps) => (\n  <RcSelect\n    className={styles.select}\n    variant=\"box\"\n    fullWidth\n    label={\n      <RcTypography variant=\"body2\" color=\"neutral.f06\">\n        {label}\n      </RcTypography>\n    }\n    {...props}\n  >\n    {children}\n  </RcSelect>\n);\n\nexport const getFallbackLabel = (device: OmitFunctions<MediaDeviceInfo>) => {\n  const fallbackLabel = t('noLabel');\n  const deviceId = device.deviceId ? `(${device.deviceId.slice(-4)})` : '';\n  return `${fallbackLabel}${deviceId}`;\n};\n\nexport const getDeviceOptionRenderer = (\n  device: OmitFunctions<MediaDeviceInfo>,\n) => {\n  if (device && device.label) {\n    return device.label;\n  }\n  if (device && device.deviceId === 'off') {\n    return t('off');\n  }\n  return getFallbackLabel(device);\n};\n\nexport const AudioDeviceSelect: FC<{\n  availableDevices: OmitFunctions<MediaDeviceInfo>[];\n  isDisabled?: boolean;\n  deviceId: string;\n  onChange: (deviceId: string) => void;\n  label: string;\n  dataSign: string;\n}> = ({\n  availableDevices = [],\n  onChange,\n  isDisabled,\n  deviceId,\n  label,\n  dataSign,\n}) => {\n  const allDevicesAreEmpty = availableDevices.every(\n    (item) =>\n      (item.label === '' && item.deviceId === '') ||\n      (item.label === '' && item.deviceId === 'off'),\n  );\n  if (!availableDevices.length || allDevicesAreEmpty) {\n    return (\n      <SelectDevice label={label} value=\"default\" disabled data-sign={dataSign}>\n        <RcMenuItem value=\"default\">\n          <RcListItemText primary={t('noDevices')} />\n        </RcMenuItem>\n      </SelectDevice>\n    );\n  }\n  return (\n    <SelectDevice\n      data-sign={dataSign}\n      value={deviceId}\n      onChange={(e) => {\n        const deviceId = e.target.value;\n        onChange(deviceId as string);\n      }}\n      disabled={isDisabled}\n      label={label}\n    >\n      {availableDevices.map((device) => (\n        <RcMenuItem key={device.deviceId} value={device.deviceId}>\n          <RcTooltip title={getDeviceOptionRenderer(device)}>\n            <RcListItemText primary={getDeviceOptionRenderer(device)} />\n          </RcTooltip>\n        </RcMenuItem>\n      ))}\n    </SelectDevice>\n  );\n};\n"],"mappings":"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","ignoreList":[]}