{"version":3,"file":"AudioSettingsPanel.js","names":["_VolumeInspector","require","_webphoneHelper","_utils","_juno","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_PageHeader","_RingtoneSelection","_components","_i18n","_styles","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","AudioSettingsPanel","exports","_ref","availableInputDevices","availableOutputDevices","availableRingtoneDevices","callVolume","showDangerAlert","_ref$className","className","_ref$inputDeviceDisab","inputDeviceDisabled","inputDeviceId","onBackButtonClick","onSave","_ref$outputDeviceDisa","outputDeviceDisabled","_ref$ringtoneSelectDi","ringtoneSelectDisabled","outputDeviceId","ringtoneVolume","isAGCEnabled","showAGCEnabled","hasUserMedia","ringtoneDeviceId","handleTestMicroClick","handleTestSpeakerClick","checkAudioAvailable","volumeTestData","fullRingtoneList","selectedRingtoneId","isUploadRingtoneDisabled","enableCustomRingtone","uploadCustomRingtone","updateCurrentRingtone","removeCustomRingtone","useEffect","enableTestVolumeAndSource","isSafari","isFirefox","createElement","clsx","styles","root","PageHeader","PageHeaderBack","onClick","PageHeaderTitle","PageHeaderRemain","content","Section","show","label","dataSign","AudioDeviceSelect","availableDevices","isDisabled","deviceId","onChange","VolumeTester","disabled","audioType","TEST_TYPE","microphone","handleButtonClick","testState","RcSwitch","formControlLabelProps","labelPlacement","style","alignItems","marginLeft","RcTypography","variant","checked","_","speaker","VolumeSlider","volume","RingtoneSelection","ringtoneList","showAlert"],"sources":["components/AudioSettingsPanelV2/AudioSettingsPanel.tsx"],"sourcesContent":["import { TEST_TYPE } from '@ringcentral-integration/commons/modules/VolumeInspector';\nimport { isFirefox } from '@ringcentral-integration/commons/modules/Webphone/webphoneHelper';\nimport { isSafari } from '@ringcentral-integration/utils';\nimport { RcSwitch, RcTypography } from '@ringcentral/juno';\nimport clsx from 'clsx';\nimport React, { useEffect } from 'react';\nimport type { FC } from 'react';\n\nimport {\n  PageHeader,\n  PageHeaderBack,\n  PageHeaderRemain,\n  PageHeaderTitle,\n} from '../BackHeader/PageHeader';\nimport { RingtoneSelection } from '../RingtoneSelection';\n\nimport type { AudioSettingsPanelProps } from './AudioSettingsPanel.interface';\nimport {\n  VolumeTester,\n  AudioDeviceSelect,\n  Section,\n  VolumeSlider,\n} from './components';\nimport { t } from './i18n';\nimport styles from './styles.scss';\n\nexport const AudioSettingsPanel: FC<AudioSettingsPanelProps> = ({\n  availableInputDevices,\n  availableOutputDevices,\n  availableRingtoneDevices,\n  callVolume,\n  showDangerAlert,\n  className = null,\n  inputDeviceDisabled = false,\n  inputDeviceId,\n  onBackButtonClick,\n  onSave,\n  outputDeviceDisabled = false,\n  ringtoneSelectDisabled = false,\n  outputDeviceId,\n  ringtoneVolume,\n  isAGCEnabled,\n  showAGCEnabled,\n  hasUserMedia,\n  ringtoneDeviceId,\n  handleTestMicroClick,\n  handleTestSpeakerClick,\n  checkAudioAvailable,\n  volumeTestData,\n  fullRingtoneList,\n  selectedRingtoneId,\n  isUploadRingtoneDisabled,\n  enableCustomRingtone,\n  uploadCustomRingtone,\n  updateCurrentRingtone,\n  removeCustomRingtone,\n}) => {\n  useEffect(() => {\n    checkAudioAvailable();\n  }, []);\n\n  const enableTestVolumeAndSource = !(isSafari() || isFirefox());\n\n  return (\n    <div className={clsx(styles.root, className)}>\n      <PageHeader>\n        <PageHeaderBack onClick={onBackButtonClick} />\n        <PageHeaderTitle>{t('title')}</PageHeaderTitle>\n        <PageHeaderRemain />\n      </PageHeader>\n      <div className={styles.content}>\n        <Section\n          show={enableTestVolumeAndSource}\n          label={t('input')}\n          dataSign=\"inputDeviceSection\"\n        >\n          <AudioDeviceSelect\n            dataSign=\"microphoneDeviceSelect\"\n            label={t('microphone')}\n            availableDevices={availableInputDevices}\n            isDisabled={inputDeviceDisabled}\n            deviceId={inputDeviceId}\n            onChange={(deviceId) => {\n              onSave({\n                inputDeviceId: deviceId,\n              });\n            }}\n          />\n          <VolumeTester\n            {...volumeTestData}\n            disabled={inputDeviceDisabled}\n            audioType={TEST_TYPE.microphone}\n            handleButtonClick={() => {\n              handleTestMicroClick(volumeTestData.testState);\n            }}\n          />\n          {showAGCEnabled && (\n            <RcSwitch\n              formControlLabelProps={{\n                labelPlacement: 'start',\n                style: {\n                  alignItems: 'start',\n                  marginLeft: 0,\n                },\n              }}\n              data-sign=\"autoAdjustMicLevel\"\n              disabled={!hasUserMedia}\n              className={styles.switch}\n              label={\n                <RcTypography variant=\"body2\">\n                  {t('autoAdjustMicLevel')}\n                </RcTypography>\n              }\n              checked={isAGCEnabled}\n              onChange={(_, checked) => {\n                onSave({\n                  isAGCEnabled: checked,\n                });\n              }}\n            />\n          )}\n        </Section>\n        <Section label={t('output')} dataSign=\"outputDeviceSection\">\n          {enableTestVolumeAndSource && (\n            <AudioDeviceSelect\n              dataSign=\"speakerDeviceSelect\"\n              availableDevices={availableOutputDevices}\n              isDisabled={outputDeviceDisabled}\n              deviceId={outputDeviceId}\n              onChange={(deviceId) => {\n                onSave({\n                  outputDeviceId: deviceId,\n                });\n              }}\n              label={t('speakerSource')}\n            />\n          )}\n          {enableTestVolumeAndSource && (\n            <VolumeTester\n              {...volumeTestData}\n              audioType={TEST_TYPE.speaker}\n              disabled={outputDeviceDisabled}\n              handleButtonClick={() => {\n                handleTestSpeakerClick(volumeTestData.testState);\n              }}\n            />\n          )}\n          <VolumeSlider\n            volume={callVolume}\n            dataSign=\"speakerVolume\"\n            label={t('speakerVolume')}\n            onChange={(volume) => {\n              onSave({\n                callVolume: volume,\n              });\n            }}\n          />\n          {enableTestVolumeAndSource && (\n            <AudioDeviceSelect\n              dataSign=\"ringtoneDeviceSelect\"\n              isDisabled={ringtoneSelectDisabled}\n              availableDevices={availableRingtoneDevices}\n              deviceId={ringtoneDeviceId}\n              onChange={(deviceId) => {\n                onSave({\n                  ringtoneDeviceId: deviceId,\n                });\n              }}\n              label={t('ringtoneSource')}\n            />\n          )}\n          <RingtoneSelection\n            label={t('ringtones')}\n            ringtoneDeviceId={ringtoneDeviceId}\n            ringtoneList={fullRingtoneList}\n            isDisabled={ringtoneSelectDisabled}\n            selectedRingtoneId={selectedRingtoneId}\n            volume={ringtoneVolume}\n            isUploadRingtoneDisabled={isUploadRingtoneDisabled}\n            enableCustomRingtone={enableCustomRingtone}\n            updateCurrentRingtone={updateCurrentRingtone}\n            uploadCustomRingtone={uploadCustomRingtone}\n            removeCustomRingtone={removeCustomRingtone}\n            showAlert={showDangerAlert}\n          />\n          <VolumeSlider\n            volume={ringtoneVolume}\n            dataSign=\"ringtoneVolume\"\n            label={t('ringtoneVolume')}\n            onChange={(volume) => {\n              onSave({\n                ringtoneVolume: volume,\n              });\n            }}\n          />\n        </Section>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}