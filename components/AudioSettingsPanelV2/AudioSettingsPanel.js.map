{"version":3,"file":"AudioSettingsPanel.js","names":["_VolumeInspector","require","_webphoneHelper","_utils","_juno","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_PageHeader","_RingtoneSelection","_components","_i18n","_styles","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_extends","assign","bind","arguments","length","apply","AudioSettingsPanel","_ref","availableInputDevices","availableOutputDevices","availableRingtoneDevices","callVolume","showDangerAlert","_ref$className","className","_ref$inputDeviceDisab","inputDeviceDisabled","inputDeviceId","onBackButtonClick","onSave","_ref$outputDeviceDisa","outputDeviceDisabled","_ref$ringtoneSelectDi","ringtoneSelectDisabled","outputDeviceId","ringtoneVolume","isAGCEnabled","showAGCEnabled","hasUserMedia","ringtoneDeviceId","handleTestMicroClick","handleTestSpeakerClick","checkAudioAvailable","volumeTestData","fullRingtoneList","selectedRingtoneId","isUploadRingtoneDisabled","enableCustomRingtone","uploadCustomRingtone","updateCurrentRingtone","removeCustomRingtone","useEffect","enableTestVolumeAndSource","isSafari","isFirefox","createElement","clsx","styles","root","PageHeader","PageHeaderBack","onClick","PageHeaderTitle","PageHeaderRemain","content","Section","show","label","dataSign","AudioDeviceSelect","availableDevices","isDisabled","deviceId","onChange","VolumeTester","disabled","audioType","TEST_TYPE","microphone","handleButtonClick","testState","RcSwitch","formControlLabelProps","labelPlacement","style","alignItems","marginLeft","RcTypography","variant","checked","_","speaker","VolumeSlider","volume","RingtoneSelection","ringtoneList","showAlert","exports"],"sources":["components/AudioSettingsPanelV2/AudioSettingsPanel.tsx"],"sourcesContent":["import { TEST_TYPE } from '@ringcentral-integration/commons/modules/VolumeInspector';\nimport { isFirefox } from '@ringcentral-integration/commons/modules/Webphone/webphoneHelper';\nimport { isSafari } from '@ringcentral-integration/utils';\nimport { RcSwitch, RcTypography } from '@ringcentral/juno';\nimport clsx from 'clsx';\nimport React, { useEffect } from 'react';\nimport type { FC } from 'react';\n\nimport {\n  PageHeader,\n  PageHeaderBack,\n  PageHeaderRemain,\n  PageHeaderTitle,\n} from '../BackHeader/PageHeader';\nimport { RingtoneSelection } from '../RingtoneSelection';\n\nimport type { AudioSettingsPanelProps } from './AudioSettingsPanel.interface';\nimport {\n  VolumeTester,\n  AudioDeviceSelect,\n  Section,\n  VolumeSlider,\n} from './components';\nimport { t } from './i18n';\nimport styles from './styles.scss';\n\nexport const AudioSettingsPanel: FC<AudioSettingsPanelProps> = ({\n  availableInputDevices,\n  availableOutputDevices,\n  availableRingtoneDevices,\n  callVolume,\n  showDangerAlert,\n  className = null,\n  inputDeviceDisabled = false,\n  inputDeviceId,\n  onBackButtonClick,\n  onSave,\n  outputDeviceDisabled = false,\n  ringtoneSelectDisabled = false,\n  outputDeviceId,\n  ringtoneVolume,\n  isAGCEnabled,\n  showAGCEnabled,\n  hasUserMedia,\n  ringtoneDeviceId,\n  handleTestMicroClick,\n  handleTestSpeakerClick,\n  checkAudioAvailable,\n  volumeTestData,\n  fullRingtoneList,\n  selectedRingtoneId,\n  isUploadRingtoneDisabled,\n  enableCustomRingtone,\n  uploadCustomRingtone,\n  updateCurrentRingtone,\n  removeCustomRingtone,\n}) => {\n  useEffect(() => {\n    checkAudioAvailable();\n  }, []);\n\n  const enableTestVolumeAndSource = !(isSafari() || isFirefox());\n\n  return (\n    <div className={clsx(styles.root, className)}>\n      <PageHeader>\n        <PageHeaderBack onClick={onBackButtonClick} />\n        <PageHeaderTitle>{t('title')}</PageHeaderTitle>\n        <PageHeaderRemain />\n      </PageHeader>\n      <div className={styles.content}>\n        <Section\n          show={enableTestVolumeAndSource}\n          label={t('input')}\n          dataSign=\"inputDeviceSection\"\n        >\n          <AudioDeviceSelect\n            dataSign=\"microphoneDeviceSelect\"\n            label={t('microphone')}\n            availableDevices={availableInputDevices}\n            isDisabled={inputDeviceDisabled}\n            deviceId={inputDeviceId}\n            onChange={(deviceId) => {\n              onSave({\n                inputDeviceId: deviceId,\n              });\n            }}\n          />\n          <VolumeTester\n            {...volumeTestData}\n            disabled={inputDeviceDisabled}\n            audioType={TEST_TYPE.microphone}\n            handleButtonClick={() => {\n              handleTestMicroClick(volumeTestData.testState);\n            }}\n          />\n          {showAGCEnabled && (\n            <RcSwitch\n              formControlLabelProps={{\n                labelPlacement: 'start',\n                style: {\n                  alignItems: 'start',\n                  marginLeft: 0,\n                },\n              }}\n              data-sign=\"autoAdjustMicLevel\"\n              disabled={!hasUserMedia}\n              className={styles.switch}\n              label={\n                <RcTypography variant=\"body2\">\n                  {t('autoAdjustMicLevel')}\n                </RcTypography>\n              }\n              checked={isAGCEnabled}\n              onChange={(_, checked) => {\n                onSave({\n                  isAGCEnabled: checked,\n                });\n              }}\n            />\n          )}\n        </Section>\n        <Section label={t('output')} dataSign=\"outputDeviceSection\">\n          {enableTestVolumeAndSource && (\n            <AudioDeviceSelect\n              dataSign=\"speakerDeviceSelect\"\n              availableDevices={availableOutputDevices}\n              isDisabled={outputDeviceDisabled}\n              deviceId={outputDeviceId}\n              onChange={(deviceId) => {\n                onSave({\n                  outputDeviceId: deviceId,\n                });\n              }}\n              label={t('speakerSource')}\n            />\n          )}\n          {enableTestVolumeAndSource && (\n            <VolumeTester\n              {...volumeTestData}\n              audioType={TEST_TYPE.speaker}\n              disabled={outputDeviceDisabled}\n              handleButtonClick={() => {\n                handleTestSpeakerClick(volumeTestData.testState);\n              }}\n            />\n          )}\n          <VolumeSlider\n            volume={callVolume}\n            dataSign=\"speakerVolume\"\n            label={t('speakerVolume')}\n            onChange={(volume) => {\n              onSave({\n                callVolume: volume,\n              });\n            }}\n          />\n          {enableTestVolumeAndSource && (\n            <AudioDeviceSelect\n              dataSign=\"ringtoneDeviceSelect\"\n              isDisabled={ringtoneSelectDisabled}\n              availableDevices={availableRingtoneDevices}\n              deviceId={ringtoneDeviceId}\n              onChange={(deviceId) => {\n                onSave({\n                  ringtoneDeviceId: deviceId,\n                });\n              }}\n              label={t('ringtoneSource')}\n            />\n          )}\n          <RingtoneSelection\n            label={t('ringtones')}\n            ringtoneDeviceId={ringtoneDeviceId}\n            ringtoneList={fullRingtoneList}\n            isDisabled={ringtoneSelectDisabled}\n            selectedRingtoneId={selectedRingtoneId}\n            volume={ringtoneVolume}\n            isUploadRingtoneDisabled={isUploadRingtoneDisabled}\n            enableCustomRingtone={enableCustomRingtone}\n            updateCurrentRingtone={updateCurrentRingtone}\n            uploadCustomRingtone={uploadCustomRingtone}\n            removeCustomRingtone={removeCustomRingtone}\n            showAlert={showDangerAlert}\n          />\n          <VolumeSlider\n            volume={ringtoneVolume}\n            dataSign=\"ringtoneVolume\"\n            label={t('ringtoneVolume')}\n            onChange={(volume) => {\n              onSave({\n                ringtoneVolume: volume,\n              });\n            }}\n          />\n        </Section>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}