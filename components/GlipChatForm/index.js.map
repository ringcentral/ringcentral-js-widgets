{"version":3,"file":"index.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_classnames","_rcTooltip","_rcEditorMention","_EmojiSelect","_emoji","_upload","_styles","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_toPropertyKey","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","Number","_inherits","subClass","superClass","create","constructor","value","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","isOnMobileDevice","navigator","userAgent","match","GlipChatForm","_Component","_super","_this","state","defaultValue","toEditorState","textValue","suggestions","_onInputChange","editorState","setState","onTextChange","mentions","getMentions","map","mention","email","replace","member","members","find","m","matcherId","id","toString","_onSearchChange","filter","search","toLowerCase","name","concat","firstName","lastName","indexOf","_getSuggestions","_onSubmit","onSubmit","preventDefault","_onTextAreaKeyDown","shiftKey","ctrlKey","altKey","_onSelectEmoji","emoji","newText","setTimeout","_metionInput","reset","_onSelectFile","file","files","reader","FileReader","onloadend","evt","readyState","DONE","onUploadFile","readAsArrayBuffer","componentDidMount","_autoFocus","componentWillReceiveProps","nextProps","groupId","componentDidUpdate","prevProps","suggestion","createElement","Nav","style","height","_editor","focusEditor","render","_this2","_this$props","className","placeholder","noFoundString","classnames","styles","root","tools","placement","trigger","arrowContent","overlayClassName","emojisTooltip","overlay","width","onSelect","alt","src","emojiIcon","uploadIcon","type","onChange","lineHeight","mentionInput","ref","onSearchChange","prefix","notFoundContent","multiLines","mode","onKeyDown","submit","Component","exports","propTypes","PropTypes","string","func","isRequired","array","number","defaultProps"],"sources":["components/GlipChatForm/index.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Tooltip from 'rc-tooltip';\nimport 'rc-tooltip/assets/bootstrap_white.css';\nimport 'rc-editor-mention/assets/index.css';\nimport Mention, {\n  Nav,\n  toString,\n  toEditorState,\n  getMentions,\n} from 'rc-editor-mention';\n\nimport EmojiSelect from '../EmojiSelect';\n\nimport emojiIcon from '../../assets/images/emoji.png';\nimport uploadIcon from '../../assets/images/upload.png';\nimport styles from './styles.scss';\n\nfunction isOnMobileDevice() {\n  if (typeof navigator !== 'undefined') {\n    return (\n      navigator.userAgent.match(/Android/i) ||\n      navigator.userAgent.match(/iPhone/i) ||\n      navigator.userAgent.match(/iPad/i)\n    );\n  }\n  return false;\n}\n\nexport default class GlipChatForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      defaultValue: toEditorState(props.textValue),\n      suggestions: [],\n    };\n    this._onInputChange = (editorState) => {\n      this.setState({\n        defaultValue: editorState,\n      });\n      if (typeof this.props.onTextChange === 'function') {\n        const mentions = getMentions(editorState).map((mention) => {\n          const email = mention.replace('@[', '').replace(']', '');\n          const member = this.props.members.find((m) => m.email === email);\n          return {\n            mention,\n            matcherId: member && member.id,\n          };\n        });\n        this.props.onTextChange(toString(editorState), mentions);\n      }\n    };\n\n    this._onSearchChange = (value) => {\n      const members = this.props.members.filter((m) => {\n        const search = value && value.toLowerCase();\n        if (!search) {\n          return true;\n        }\n        const name = `${m.firstName} ${m.lastName}`.toLowerCase();\n        if (name.indexOf(search) > -1) {\n          return true;\n        }\n        if (m.email && m.email.indexOf(search) > -1) {\n          return true;\n        }\n        return false;\n      });\n      const suggestions = this._getSuggestions(members);\n      this.setState({\n        suggestions,\n      });\n    };\n\n    this._onSubmit = (e) => {\n      this.props.onSubmit();\n      e.preventDefault();\n    };\n\n    this._onTextAreaKeyDown = (e) => {\n      if (e.key === 'Enter' && !e.shiftKey && !e.ctrlKey && !e.altKey) {\n        this.props.onSubmit();\n        e.preventDefault();\n      }\n    };\n\n    this._onSelectEmoji = (emoji) => {\n      const newText = this.props.textValue\n        ? `${this.props.textValue} ${emoji} `\n        : `${emoji} `;\n      if (typeof this.props.onTextChange === 'function') {\n        this.props.onTextChange(newText);\n      }\n      this.setState({\n        defaultValue: toEditorState(newText),\n      });\n      setTimeout(() => {\n        if (this._metionInput) {\n          this._metionInput.reset();\n        }\n      }, 10);\n    };\n\n    this._onSelectFile = (e) => {\n      const file = e.target.files[0];\n      if (!file) {\n        return;\n      }\n      const reader = new FileReader();\n      reader.onloadend = (evt) => {\n        if (evt.target.readyState === FileReader.DONE) {\n          this.props.onUploadFile(file.name, evt.target.result);\n        }\n      };\n      reader.readAsArrayBuffer(file);\n    };\n  }\n\n  componentDidMount() {\n    this._autoFocus();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.members !== nextProps.members) {\n      const suggestions = this._getSuggestions(nextProps.members);\n      this.setState({\n        suggestions,\n      });\n    }\n    if (nextProps.groupId !== this.props.groupId) {\n      const suggestions = this._getSuggestions(nextProps.members);\n      this.setState({\n        suggestions,\n        defaultValue: toEditorState(nextProps.textValue),\n      });\n    }\n    if (this.props.textValue !== nextProps.textValue) {\n      this.setState({\n        defaultValue: toEditorState(nextProps.textValue),\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.groupId !== this.props.groupId) {\n      this._autoFocus();\n      if (this._metionInput) {\n        this._metionInput.reset();\n      }\n    }\n    if (this.props.textValue.length === 0 && prevProps.textValue.length > 0) {\n      if (this._metionInput) {\n        this._metionInput.reset();\n      }\n    }\n  }\n\n  _getSuggestions(suggestions) {\n    return suggestions.map((suggestion) => (\n      <Nav\n        style={{ height: 34 }}\n        value={`[${suggestion.email}]`}\n        key={suggestion.id}\n      >\n        <span>\n          {suggestion.firstName} {suggestion.lastName}\n        </span>\n      </Nav>\n    ));\n  }\n\n  _autoFocus() {\n    if (isOnMobileDevice()) {\n      return;\n    }\n    if (this._metionInput) {\n      this._metionInput._editor.focusEditor();\n    }\n  }\n\n  render() {\n    const { className, placeholder, height } = this.props;\n    const noFoundString = 'No found.'; // TODO: i18n after string confirmed\n    return (\n      <div className={classnames(styles.root, className)} style={{ height }}>\n        <div className={styles.tools}>\n          <Tooltip\n            placement=\"top\"\n            trigger=\"click\"\n            arrowContent={<div className=\"rc-tooltip-arrow-inner\" />}\n            overlayClassName={styles.emojisTooltip}\n            overlay={\n              <div style={{ width: 250, height: 200 }}>\n                <EmojiSelect onSelect={this._onSelectEmoji} />\n              </div>\n            }\n          >\n            <img alt=\"emoji\" src={emojiIcon} className={styles.emoji} />\n          </Tooltip>\n          <label className={styles.file}>\n            <img alt=\"emoji\" src={uploadIcon} />\n            <input type=\"file\" onChange={this._onSelectFile} />\n          </label>\n        </div>\n        <form onSubmit={this._onSubmit}>\n          <Mention\n            style={{ width: '100%', height: height - 35, lineHeight: '18px' }}\n            className={styles.mentionInput}\n            ref={(input) => {\n              this._metionInput = input;\n            }}\n            placeholder={placeholder}\n            placement=\"bottom\"\n            defaultValue={this.state.defaultValue}\n            onChange={this._onInputChange}\n            onSearchChange={this._onSearchChange}\n            suggestions={this.state.suggestions}\n            prefix=\"@\"\n            notFoundContent={noFoundString}\n            multiLines\n            mode=\"immutable\"\n            onKeyDown={this._onTextAreaKeyDown}\n          />\n          <input type=\"submit\" className={styles.submit} />\n        </form>\n      </div>\n    );\n  }\n}\n\nGlipChatForm.propTypes = {\n  textValue: PropTypes.string,\n  className: PropTypes.string,\n  onTextChange: PropTypes.func,\n  onSubmit: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  placeholder: PropTypes.string,\n  groupId: PropTypes.string,\n  members: PropTypes.array,\n  height: PropTypes.number,\n};\n\nGlipChatForm.defaultProps = {\n  className: undefined,\n  textValue: '',\n  onTextChange: undefined,\n  placeholder: undefined,\n  groupId: undefined,\n  members: [],\n  height: 120,\n};\n"],"mappings":"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"}