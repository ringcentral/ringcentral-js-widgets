{"version":3,"file":"MessageInput.js","names":["_hooks","require","_springIcon","_springUi","_react","_interopRequireWildcard","_EmojiMenu","_FileAttacher","_i18n","_interopRequireDefault","_utils","_excluded","e","__esModule","t","WeakMap","r","n","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","SMS_ACCEPT_TYPES","SUPPORTED_MMS_MIME_TYPES_IN_LOWERCASE","join","MessageInput","exports","_ref","inputText","_ref$acceptFileTypes","acceptFileTypes","_ref$supportAttachmen","supportAttachment","toolbar","inputAttachmentList","attachments","inputRefProp","inputRef","sendDisabled","_ref$sendButton","sendButton","onAddAttachment","onRemoveAttachment","onChange","onSend","className","_ref$maxLength","maxLength","endAdornment","rest","_useLocale","useLocale","i18n","attachmentListLength","innerRef","useRef","scrollRef","useForkRef","emojiActionRef","latestPosRef","prevAttachmentListLength","usePrevious","onSendSms","_emojiActionRef$curre","current","close","useLayoutEffect","addNewAttachment","scrollElm","scrollTop","scrollHeight","useEventListener","detail","createElement","AttachButton","multiple","acceptTypes","TooltipProps","title","onUpload","files","_emojiActionRef$curre2","EmojiMenu","action","getInputElement","onSelect","data","position","textarea","emoji","result","getTextFieldInsertResult","input","insertValue","sourcePosition","nextPositionInfo","start","requestAnimationFrame","setSelectionPosition","end","setNativeValue","value","focus","Textarea","maxRows","size","placeholder","classes","formFieldContent","variant","target","onPaste","Array","from","clipboardData","inputProps","onKeyPress","key","shiftKey","preventDefault","undefined","onKeyDown","_emojiActionRef$curre3","onBlur","getSelectionPosition","currentTarget","dataset","latestPos","JSON","stringify","clearBtn","Fragment","IconButton","disabled","color","onMouseDown","symbol","SendMd","onClick","ref","AttachmentList"],"sources":["components/MessageInput/MessageInput.tsx"],"sourcesContent":["import { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport { SendMd } from '@ringcentral/spring-icon';\nimport {\n  IconButton,\n  Textarea,\n  getSelectionPosition,\n  setSelectionPosition,\n  useEventListener,\n  useForkRef,\n  usePrevious,\n} from '@ringcentral/spring-ui';\nimport React, { FunctionComponent, useLayoutEffect, useRef } from 'react';\n\nimport { EmojiMenu, EmojiMenuAction } from './EmojiMenu';\nimport {\n  AttachButton,\n  AttachmentList,\n  FileItem,\n  SUPPORTED_MMS_MIME_TYPES_IN_LOWERCASE,\n} from './FileAttacher';\nimport i18n from './i18n';\nimport { getTextFieldInsertResult, setNativeValue } from './utils';\n\nexport type MessageInputProps = {\n  inputText: string;\n  onChange: (text: string) => void;\n  acceptFileTypes?: string;\n  /**\n   * is that can add attachment\n   *\n   * @default true\n   * */\n  supportAttachment?: boolean;\n  /**\n   * the additional toolbar react node\n   */\n  toolbar?: React.ReactNode;\n  attachments: FileItem[];\n  inputRef?: React.RefObject<HTMLTextAreaElement>;\n  sendDisabled: boolean;\n  /**\n   * is that listen keyboard send event with `enter` and also show send button\n   *\n   * @default true\n   */\n  sendButton?: boolean;\n  onAddAttachment: (files: File[], sendDirectly?: boolean) => void;\n  onRemoveAttachment: (file: FileItem) => void;\n  onSend?: (value: string, attachments: FileItem[]) => void;\n  className?: string;\n  /**\n   * the max length of the input text\n   *\n   * @default 1000\n   */\n  maxLength?: number;\n  /**\n   * additional end adornment element\n   */\n  endAdornment?: React.ReactNode;\n};\nconst SMS_ACCEPT_TYPES = SUPPORTED_MMS_MIME_TYPES_IN_LOWERCASE.join();\n\nexport const MessageInput: FunctionComponent<MessageInputProps> = ({\n  inputText,\n  acceptFileTypes = SMS_ACCEPT_TYPES,\n  supportAttachment = true,\n  toolbar,\n  attachments: inputAttachmentList,\n  inputRef: inputRefProp,\n  sendDisabled,\n  sendButton = true,\n  onAddAttachment,\n  onRemoveAttachment,\n  onChange,\n  onSend,\n  className,\n  maxLength = 1000,\n  endAdornment,\n  ...rest\n}) => {\n  const { t } = useLocale(i18n);\n  const attachmentListLength = inputAttachmentList.length;\n  const innerRef = useRef<HTMLTextAreaElement>(null);\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const inputRef = useForkRef(innerRef, inputRefProp!);\n  const emojiActionRef = useRef<EmojiMenuAction>(null);\n\n  const latestPosRef = useRef<ReturnType<typeof getSelectionPosition> | null>(\n    null,\n  );\n\n  const prevAttachmentListLength = usePrevious(\n    () => attachmentListLength,\n    true,\n  );\n\n  const onSendSms = () => {\n    if (sendDisabled) return;\n\n    // after send message auto close emoji dialog\n    emojiActionRef.current?.close();\n    onSend?.(inputText, inputAttachmentList);\n  };\n\n  // when have new attachment, scroll to bottom of attachment list\n  useLayoutEffect(() => {\n    const addNewAttachment = attachmentListLength > prevAttachmentListLength;\n    if (!addNewAttachment) return;\n\n    const scrollElm = scrollRef.current;\n    if (scrollElm) {\n      scrollElm.scrollTop = scrollElm.scrollHeight;\n    }\n  });\n\n  useEventListener(innerRef, 'change-programmatically', (e: CustomEvent) => {\n    onChange(e.detail);\n  });\n\n  return (\n    <div data-sign=\"message-editor\" className={className} {...rest}>\n      {/* Action Bar */}\n      <div className=\"h-10 flex items-center justify-between px-3\">\n        <div className=\"flex items-center\">\n          {supportAttachment && (\n            <AttachButton\n              multiple\n              acceptTypes={acceptFileTypes}\n              TooltipProps={{\n                title: t('attachFiles'),\n              }}\n              onUpload={(files: File[]) => {\n                // when upload be trigger also close popup\n                emojiActionRef.current?.close();\n                onAddAttachment(files);\n              }}\n            />\n          )}\n          <EmojiMenu\n            action={emojiActionRef}\n            getInputElement={() => innerRef.current!}\n            onSelect={(data: any, position: any) => {\n              const textarea = innerRef.current;\n              if (!textarea) return;\n\n              const emoji = data.native;\n\n              const result = getTextFieldInsertResult({\n                input: textarea,\n                insertValue: emoji,\n                sourcePosition: position,\n              });\n\n              const nextPositionInfo = result.start;\n\n              if (nextPositionInfo) {\n                requestAnimationFrame(() => {\n                  setSelectionPosition(textarea, {\n                    start: nextPositionInfo,\n                    end: nextPositionInfo,\n                  });\n                });\n              }\n\n              setNativeValue(textarea, result.value);\n              textarea.focus();\n            }}\n          />\n          {toolbar}\n        </div>\n        {inputText && (\n          <span\n            title={t('smsNewLineHint')}\n            className=\"typography-descriptor text-neutral-b2 truncate\"\n          >\n            {t('smsNewLineHint')}\n          </span>\n        )}\n      </div>\n\n      {/* Text Field */}\n      <div className=\"relative px-3 pb-2\">\n        <Textarea\n          maxRows={17}\n          size=\"medium\"\n          placeholder={t('smsEditHint')}\n          classes={{\n            formFieldContent: 'flex-col items-start',\n          }}\n          variant=\"outlined\"\n          value={inputText}\n          inputRef={inputRef}\n          onChange={(e) => {\n            onChange(e.target.value);\n          }}\n          onPaste={(e) => {\n            if (!supportAttachment) return;\n\n            const files = Array.from(e.clipboardData.files);\n            if (files.length > 0) {\n              onAddAttachment(files);\n            }\n          }}\n          className=\"w-full\"\n          inputProps={{\n            'data-sign': 'messageInput',\n            onKeyPress: sendButton\n              ? (e) => {\n                  if (e.key === 'Enter' && !e.shiftKey) {\n                    e.preventDefault();\n\n                    return onSendSms();\n                  }\n                }\n              : undefined,\n            onKeyDown: (e) => {\n              if (e.key === 'Escape') {\n                emojiActionRef.current?.close();\n              }\n            },\n            onBlur: (e) => {\n              // save the latest position when the textarea is blurred for we can insert the template at the right position\n              latestPosRef.current = getSelectionPosition(e.currentTarget);\n\n              e.currentTarget.dataset.latestPos = JSON.stringify(\n                latestPosRef.current,\n              );\n            },\n            maxLength,\n          }}\n          clearBtn={false}\n          endAdornment={\n            sendButton ? (\n              <>\n                {endAdornment}\n                <div className=\"absolute right-1 bottom-1\">\n                  <IconButton\n                    TooltipProps={{\n                      title: sendDisabled ? undefined : t('smsSendTooltip'),\n                    }}\n                    disabled={sendDisabled}\n                    color=\"primary\"\n                    size=\"small\"\n                    data-sign=\"messageButton\"\n                    variant=\"icon\"\n                    onMouseDown={(e) => e.preventDefault()}\n                    symbol={SendMd}\n                    onClick={onSendSms}\n                  />\n                </div>\n                <div className=\"w-6\" />\n              </>\n            ) : (\n              endAdornment\n            )\n          }\n        />\n      </div>\n\n      {/* Attachment List */}\n      {inputAttachmentList.length > 0 && (\n        <section\n          ref={scrollRef}\n          className=\"max-h-[125px] overflow-y-auto px-3 pb-3\"\n        >\n          <div className=\"flex flex-1 flex-wrap gap-2\">\n            <AttachmentList\n              files={inputAttachmentList}\n              onRemoveAttachment={onRemoveAttachment}\n              data-sign=\"textAttachmentsList\"\n            />\n          </div>\n        </section>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}