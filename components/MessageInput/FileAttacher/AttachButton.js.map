{"version":3,"file":"AttachButton.js","names":["_springIcon","require","_springUi","_react","_interopRequireDefault","_useFileUpload3","_excluded","e","__esModule","_extends","Object","assign","bind","n","arguments","length","t","r","hasOwnProperty","call","apply","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","l","Symbol","iterator","i","u","f","o","next","done","push","value","isArray","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","handlePreventLeaveFocus","preventDefault","AttachButton","exports","_ref","accept","acceptTypes","_ref$multiple","multiple","_ref$type","type","label","onUpload","rest","_useFileUpload","useFileUpload","_useFileUpload2","selectFile","BaseComponent","props","createElement","IconButton","color","className","variant","symbol","LinkMd","title","Tooltip","Button","size","onMouseDown","onClick","result","files","map","it","file"],"sources":["components/MessageInput/FileAttacher/AttachButton.tsx"],"sourcesContent":["import { LinkMd } from '@ringcentral/spring-icon';\nimport {\n  Button,\n  type ButtonProps,\n  IconButton,\n  type IconButtonProps,\n  Tooltip,\n} from '@ringcentral/spring-ui';\nimport React, { FC } from 'react';\nimport { useFileUpload } from 'use-file-upload';\n\ntype AttachmentMenuViewProps = IconButtonProps &\n  ButtonProps & {\n    acceptTypes: string;\n    multiple?: boolean;\n    type?: 'icon' | 'button';\n    label?: string;\n    onUpload?: (files: File[]) => void;\n  };\n\nconst handlePreventLeaveFocus = (\n  e: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n): void => e.preventDefault();\n\nexport const AttachButton: FC<AttachmentMenuViewProps> = ({\n  acceptTypes: accept,\n  multiple = false,\n  type = 'icon',\n  label,\n  onUpload,\n  ...rest\n}) => {\n  const [, selectFile] = useFileUpload();\n  const BaseComponent = (props: any) => {\n    return type === 'icon' ? (\n      <IconButton\n        color=\"secondary\"\n        className=\"text-neutral-b2\"\n        variant=\"icon\"\n        symbol={LinkMd}\n        {...props}\n      />\n    ) : props.title ? (\n      <Tooltip title={props.title}>\n        <Button variant=\"outlined\" {...props} />\n      </Tooltip>\n    ) : (\n      <Button variant=\"outlined\" {...props} />\n    );\n  };\n  return (\n    <BaseComponent\n      data-sign=\"attachButton\"\n      size=\"large\"\n      {...rest}\n      onMouseDown={handlePreventLeaveFocus}\n      onClick={() =>\n        selectFile({ accept, multiple }, (result) => {\n          const files = multiple\n            ? (result as unknown as { file: File }[])\n            : [result as unknown as { file: File }];\n          onUpload?.(files.map((it) => it.file));\n        })\n      }\n    >\n      {label}\n    </BaseComponent>\n  );\n};\n"],"mappings":"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","ignoreList":[]}