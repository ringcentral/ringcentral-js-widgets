{"version":3,"file":"index.js","names":["_debounce","require","_juno","_junoIcon","_clsx","_interopRequireDefault","_propTypes","_react","_interopRequireWildcard","_i18n","_styles","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_classCallCheck","TypeError","_defineProperties","length","o","enumerable","configurable","writable","_toPropertyKey","key","_createClass","prototype","_toPrimitive","Symbol","toPrimitive","String","Number","_inherits","create","constructor","value","_setPrototypeOf","setPrototypeOf","bind","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","arguments","apply","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","UIHeightOffset","MessageInput","_Component","_super","props","context","_this","_fileInputRef","_lastValueChange","textArea","onChange","_this$updateMessageTe","_this2","Date","now","currentTarget","newHeight","calculateNewHeight","state","height","onHeightChange","setState","updateMessageText","debounce","fn","onKeyDown","shiftKey","preventDefault","sendButtonDisabled","onSend","_this$updateMessageTe2","flush","disabled","attachments","onAttachmentIconClick","current","click","onSelectAttachment","_ref","files","addAttachment","file","name","endsWith","type","File","size","minHeight","React","createRef","UNSAFE_componentWillReceiveProps","nextProps","_this3","componentDidMount","inputExpandable","style","scrollHeight","concat","_this$props","maxHeight","render","_this4","_this$props2","currentLocale","maxLength","supportAttachment","removeAttachment","_this$state","inputHeight","createElement","className","clsx","styles","root","attachmentIcon","RcIconButton","variant","symbol","attachmentSvg","onClick","accept","display","ref","textField","target","placeholder","i18n","getString","onKeyPressCapture","submitField","sendButton","map","attachment","attachmentItem","title","attachmentRemoveIcon","removeSvg","Component","propTypes","PropTypes","string","isRequired","bool","number","func","array","defaultProps","undefined","_default","exports"],"sources":["components/MessageInput/index.tsx"],"sourcesContent":["import { debounce } from '@ringcentral-integration/commons/lib/debounce-throttle/debounce';\nimport { RcIconButton } from '@ringcentral/juno';\nimport {\n  Attachment as attachmentSvg,\n  Close as removeSvg,\n} from '@ringcentral/juno-icon';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nconst UIHeightOffset = 23;\n// the extra height of the entire field with paddings and borders\n\nclass MessageInput extends Component {\n  static propTypes = {\n    value: PropTypes.string.isRequired,\n    currentLocale: PropTypes.string.isRequired,\n    disabled: PropTypes.bool,\n    sendButtonDisabled: PropTypes.bool,\n    minHeight: PropTypes.number,\n    maxHeight: PropTypes.number,\n    maxLength: PropTypes.number,\n    onSend: PropTypes.func,\n    onChange: PropTypes.func,\n    onHeightChange: PropTypes.func,\n    inputExpandable: PropTypes.bool,\n    supportAttachment: PropTypes.bool,\n    attachments: PropTypes.array,\n    addAttachment: PropTypes.func,\n    removeAttachment: PropTypes.func,\n  };\n\n  static defaultProps = {\n    disabled: false,\n    sendButtonDisabled: false,\n    onSend: undefined,\n    onChange: undefined,\n    onHeightChange: undefined,\n    minHeight: 63,\n    maxHeight: 300,\n    maxLength: 1000,\n    inputExpandable: true,\n    supportAttachment: false,\n    attachments: [],\n    addAttachment: undefined,\n    removeAttachment: undefined,\n  };\n\n  _fileInputRef: any;\n  _lastValueChange: any;\n  textArea: any;\n\n  constructor(props: any, context: any) {\n    super(props, context);\n    this.state = {\n      value: props.value,\n      height: props.minHeight,\n    };\n    this._lastValueChange = 0;\n    this._fileInputRef = React.createRef();\n  }\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  UNSAFE_componentWillReceiveProps(nextProps: any) {\n    if (\n      // @ts-expect-error TS(2339): Property 'value' does not exist on type 'Readonly<... Remove this comment to see the full error message\n      nextProps.value !== this.state.value &&\n      // ignore value changes from props for 300ms after typing\n      // this is to prevent unnecessary value changes when used in chrome extension\n      // where value pushed back to background and back takes longer\n      Date.now() - this._lastValueChange > 300\n    ) {\n      // use setState(updater, callback) to recaculate height after value has been update to DOM\n      this.setState(\n        () => ({\n          value: nextProps.value,\n        }),\n        () => {\n          const newHeight = this.calculateNewHeight();\n          // @ts-expect-error TS(2339): Property 'height' does not exist on type 'Readonly... Remove this comment to see the full error message\n          if (newHeight !== this.state.height) {\n            // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n            if (typeof this.props.onHeightChange === 'function') {\n              // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n              this.props.onHeightChange(newHeight);\n            }\n            this.setState({\n              height: newHeight,\n            });\n          }\n        },\n      );\n    }\n  }\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  componentDidMount() {\n    // do a initial size check in case the component is mounted with multi line value\n    const newHeight = this.calculateNewHeight();\n    // @ts-expect-error TS(2339): Property 'height' does not exist on type 'Readonly... Remove this comment to see the full error message\n    if (newHeight !== this.state.height) {\n      // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n      if (typeof this.props.onHeightChange === 'function') {\n        // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n        this.props.onHeightChange(newHeight);\n      }\n      this.setState({\n        height: newHeight,\n      });\n    }\n  }\n\n  calculateNewHeight() {\n    // @ts-expect-error TS(2339): Property 'inputExpandable' does not exist on type ... Remove this comment to see the full error message\n    if (!this.props.inputExpandable) {\n      // @ts-expect-error TS(2339): Property 'minHeight' does not exist on type 'Reado... Remove this comment to see the full error message\n      return this.props.minHeight;\n    }\n    // temperarily set height to 0 to check scrollHeight\n    this.textArea.style.height = 0;\n    const newHeight = this.textArea.scrollHeight + 10 + UIHeightOffset;\n    // set height back to original to avoid messing with react\n    // @ts-expect-error TS(2339): Property 'height' does not exist on type 'Readonly... Remove this comment to see the full error message\n    this.textArea.style.height = `${this.state.height - UIHeightOffset}px`;\n    // @ts-expect-error TS(2339): Property 'minHeight' does not exist on type 'Reado... Remove this comment to see the full error message\n    const { minHeight, maxHeight } = this.props;\n    if (newHeight < minHeight) {\n      return minHeight;\n    }\n    if (newHeight > maxHeight) {\n      return maxHeight;\n    }\n    return newHeight;\n  }\n\n  onChange = (e: any) => {\n    this._lastValueChange = Date.now();\n    const {\n      currentTarget: { value },\n    } = e;\n    const newHeight = this.calculateNewHeight();\n    if (\n      // @ts-expect-error TS(2339): Property 'height' does not exist on type 'Readonly... Remove this comment to see the full error message\n      newHeight !== this.state.height &&\n      // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n      typeof this.props.onHeightChange === 'function'\n    ) {\n      // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n      this.props.onHeightChange(newHeight);\n    }\n    this.setState({\n      value,\n      height: newHeight,\n    });\n    // ues debounce for avoiding frequent updates compose text module state\n    this.updateMessageText?.();\n  };\n\n  updateMessageText =\n    // @ts-expect-error TS(2339): Property 'onChange' does not exist on type 'Readon... Remove this comment to see the full error message\n    typeof this.props.onChange === 'function'\n      ? debounce({\n          // @ts-expect-error TS(2339): Property 'onChange' does not exist on type 'Readon... Remove this comment to see the full error message\n          fn: () => this.props.onChange(this.state.value),\n        })\n      : null;\n\n  onKeyDown = (e: any) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n\n      // TODO: this component should be refactored whole UX logic\n      // @ts-expect-error TS(2339): Property 'sendButtonDisabled' does not exist on ty... Remove this comment to see the full error message\n      if (this.props.sendButtonDisabled) return;\n\n      this.onSend();\n    }\n  };\n\n  onSend = () => {\n    this.updateMessageText?.flush();\n    // @ts-expect-error TS(2339): Property 'disabled' does not exist on type 'Readon... Remove this comment to see the full error message\n    if (!this.props.disabled && typeof this.props.onSend === 'function') {\n      // @ts-expect-error TS(2339): Property 'onSend' does not exist on type 'Readonly... Remove this comment to see the full error message\n      this.props.onSend(this.state.value, this.props.attachments);\n    }\n  };\n\n  onAttachmentIconClick = () => {\n    this._fileInputRef.current.click();\n  };\n\n  onSelectAttachment = ({ currentTarget }: any) => {\n    if (currentTarget.files.length === 0) {\n      return;\n    }\n    // @ts-expect-error TS(2339): Property 'addAttachment' does not exist on type 'R... Remove this comment to see the full error message\n    const { addAttachment } = this.props;\n    let file = currentTarget.files[0];\n    if (\n      (file.name.endsWith('.vcard') || file.name.endsWith('.vcf')) &&\n      file.type !== 'text/vcard'\n    ) {\n      file = new File([file], file.name, { type: 'text/vcard' });\n    }\n    addAttachment({\n      name: file.name,\n      size: file.size,\n      file,\n    });\n  };\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  render() {\n    const {\n      // @ts-expect-error TS(2339): Property 'currentLocale' does not exist on type 'R... Remove this comment to see the full error message\n      currentLocale,\n      // @ts-expect-error TS(2339): Property 'disabled' does not exist on type 'Readon... Remove this comment to see the full error message\n      disabled,\n      // @ts-expect-error TS(2339): Property 'sendButtonDisabled' does not exist on ty... Remove this comment to see the full error message\n      sendButtonDisabled,\n      // @ts-expect-error TS(2339): Property 'maxLength' does not exist on type 'Reado... Remove this comment to see the full error message\n      maxLength,\n      // @ts-expect-error TS(2339): Property 'supportAttachment' does not exist on typ... Remove this comment to see the full error message\n      supportAttachment,\n      // @ts-expect-error TS(2339): Property 'attachments' does not exist on type 'Rea... Remove this comment to see the full error message\n      attachments,\n      // @ts-expect-error TS(2339): Property 'removeAttachment' does not exist on type... Remove this comment to see the full error message\n      removeAttachment,\n    } = this.props;\n    // @ts-expect-error TS(2339): Property 'value' does not exist on type 'Readonly<... Remove this comment to see the full error message\n    const { value, height } = this.state;\n    const inputHeight = height - UIHeightOffset;\n    return (\n      <div\n        className={clsx(\n          styles.root,\n          supportAttachment && styles.supportAttachment,\n        )}\n      >\n        <div className={styles.attachmentIcon}>\n          <RcIconButton\n            variant=\"round\"\n            size=\"small\"\n            symbol={attachmentSvg}\n            onClick={this.onAttachmentIconClick}\n            disabled={disabled}\n          />\n          <input\n            type=\"file\"\n            accept=\"image/tiff,image/gif,image/jpeg,image/bmp,image/png,image/svg+xml,text/vcard,application/rtf,video/mpeg,audio/mpeg,video/mp4,application/zip\"\n            style={{ display: 'none' }}\n            ref={this._fileInputRef}\n            onChange={this.onSelectAttachment}\n            disabled={disabled}\n          />\n        </div>\n        <div className={styles.textField}>\n          <textarea\n            data-sign=\"messageInput\"\n            ref={(target) => {\n              this.textArea = target;\n            }}\n            placeholder={i18n.getString('typeMessage', currentLocale)}\n            value={value}\n            maxLength={maxLength}\n            onChange={this.onChange}\n            onKeyPressCapture={this.onKeyDown}\n            style={{\n              height: inputHeight,\n            }}\n            disabled={disabled}\n          />\n        </div>\n        <div className={styles.submitField}>\n          <input\n            data-sign=\"messageButton\"\n            type=\"button\"\n            value={i18n.getString('send', currentLocale)}\n            onClick={this.onSend}\n            className={styles.sendButton}\n            disabled={disabled || sendButtonDisabled}\n          />\n        </div>\n        <div className={styles.attachments}>\n          {attachments.map((attachment: any) => {\n            return (\n              <div\n                className={styles.attachmentItem}\n                key={attachment.name}\n                title={attachment.name}\n              >\n                {attachment.name}\n                <div className={styles.attachmentRemoveIcon}>\n                  <RcIconButton\n                    size=\"small\"\n                    symbol={removeSvg}\n                    disabled={disabled}\n                    onClick={() => {\n                      removeAttachment(attachment);\n                    }}\n                  />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MessageInput;\n"],"mappings":"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","ignoreList":[]}