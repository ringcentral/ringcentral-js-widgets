{"version":3,"file":"index.js","names":["_react","_interopRequireWildcard","require","_classnames","_interopRequireDefault","_propTypes","_debounce","_juno","_junoIcon","_i18n","_styles","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_toPropertyKey","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","Number","_inherits","subClass","superClass","create","constructor","value","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","UIHeightOffset","MessageInput","_Component","_super","context","_this","_fileInputRef","_lastValueChange","textArea","onChange","_this$updateMessageTe","_this2","Date","now","currentTarget","newHeight","calculateNewHeight","state","height","onHeightChange","setState","updateMessageText","debounce","fn","onKeyDown","shiftKey","preventDefault","sendButtonDisabled","onSend","_this$updateMessageTe2","flush","disabled","attachments","onAttachmentIconClick","current","click","onSelectAttachment","_ref","files","addAttachment","file","name","endsWith","type","File","size","minHeight","React","createRef","UNSAFE_componentWillReceiveProps","nextProps","_this3","componentDidMount","inputExpandable","style","scrollHeight","concat","_this$props","maxHeight","render","_this4","_this$props2","currentLocale","maxLength","supportAttachment","removeAttachment","_this$state","inputHeight","createElement","className","classnames","styles","root","attachmentIcon","RcIconButton","variant","symbol","attachmentSvg","onClick","accept","display","ref","textField","placeholder","i18n","getString","onKeyPressCapture","submitField","sendButton","map","attachment","attachmentItem","title","attachmentRemoveIcon","removeSvg","Component","propTypes","PropTypes","string","isRequired","bool","number","func","array","defaultProps","_default","exports"],"sources":["components/MessageInput/index.tsx"],"sourcesContent":["import React, { Component } from 'react';\n\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport { debounce } from '@ringcentral-integration/commons/lib/debounce-throttle/debounce';\nimport { RcIconButton } from '@ringcentral/juno';\nimport {\n  Attachment as attachmentSvg,\n  Close as removeSvg,\n} from '@ringcentral/juno-icon';\n\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nconst UIHeightOffset = 23;\n// the extra height of the entire field with paddings and borders\n\nclass MessageInput extends Component {\n  static propTypes = {\n    value: PropTypes.string.isRequired,\n    currentLocale: PropTypes.string.isRequired,\n    disabled: PropTypes.bool,\n    sendButtonDisabled: PropTypes.bool,\n    minHeight: PropTypes.number,\n    maxHeight: PropTypes.number,\n    maxLength: PropTypes.number,\n    onSend: PropTypes.func,\n    onChange: PropTypes.func,\n    onHeightChange: PropTypes.func,\n    inputExpandable: PropTypes.bool,\n    supportAttachment: PropTypes.bool,\n    attachments: PropTypes.array,\n    addAttachment: PropTypes.func,\n    removeAttachment: PropTypes.func,\n  };\n\n  static defaultProps = {\n    disabled: false,\n    sendButtonDisabled: false,\n    onSend: undefined,\n    onChange: undefined,\n    onHeightChange: undefined,\n    minHeight: 63,\n    maxHeight: 300,\n    maxLength: 1000,\n    inputExpandable: true,\n    supportAttachment: false,\n    attachments: [],\n    addAttachment: undefined,\n    removeAttachment: undefined,\n  };\n\n  _fileInputRef: any;\n  _lastValueChange: any;\n  textArea: any;\n\n  constructor(props: any, context: any) {\n    super(props, context);\n    this.state = {\n      value: props.value,\n      height: props.minHeight,\n    };\n    this._lastValueChange = 0;\n    this._fileInputRef = React.createRef();\n  }\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  UNSAFE_componentWillReceiveProps(nextProps: any) {\n    if (\n      // @ts-expect-error TS(2339): Property 'value' does not exist on type 'Readonly<... Remove this comment to see the full error message\n      nextProps.value !== this.state.value &&\n      // ignore value changes from props for 300ms after typing\n      // this is to prevent unnecessary value changes when used in chrome extension\n      // where value pushed back to background and back takes longer\n      Date.now() - this._lastValueChange > 300\n    ) {\n      // use setState(updater, callback) to recaculate height after value has been update to DOM\n      this.setState(\n        () => ({\n          value: nextProps.value,\n        }),\n        () => {\n          const newHeight = this.calculateNewHeight();\n          // @ts-expect-error TS(2339): Property 'height' does not exist on type 'Readonly... Remove this comment to see the full error message\n          if (newHeight !== this.state.height) {\n            // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n            if (typeof this.props.onHeightChange === 'function') {\n              // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n              this.props.onHeightChange(newHeight);\n            }\n            this.setState({\n              height: newHeight,\n            });\n          }\n        },\n      );\n    }\n  }\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  componentDidMount() {\n    // do a initial size check in case the component is mounted with multi line value\n    const newHeight = this.calculateNewHeight();\n    // @ts-expect-error TS(2339): Property 'height' does not exist on type 'Readonly... Remove this comment to see the full error message\n    if (newHeight !== this.state.height) {\n      // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n      if (typeof this.props.onHeightChange === 'function') {\n        // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n        this.props.onHeightChange(newHeight);\n      }\n      this.setState({\n        height: newHeight,\n      });\n    }\n  }\n\n  calculateNewHeight() {\n    // @ts-expect-error TS(2339): Property 'inputExpandable' does not exist on type ... Remove this comment to see the full error message\n    if (!this.props.inputExpandable) {\n      // @ts-expect-error TS(2339): Property 'minHeight' does not exist on type 'Reado... Remove this comment to see the full error message\n      return this.props.minHeight;\n    }\n    // temperarily set height to 0 to check scrollHeight\n    this.textArea.style.height = 0;\n    const newHeight = this.textArea.scrollHeight + 10 + UIHeightOffset;\n    // set height back to original to avoid messing with react\n    // @ts-expect-error TS(2339): Property 'height' does not exist on type 'Readonly... Remove this comment to see the full error message\n    this.textArea.style.height = `${this.state.height - UIHeightOffset}px`;\n    // @ts-expect-error TS(2339): Property 'minHeight' does not exist on type 'Reado... Remove this comment to see the full error message\n    const { minHeight, maxHeight } = this.props;\n    if (newHeight < minHeight) {\n      return minHeight;\n    }\n    if (newHeight > maxHeight) {\n      return maxHeight;\n    }\n    return newHeight;\n  }\n\n  onChange = (e: any) => {\n    this._lastValueChange = Date.now();\n    const {\n      currentTarget: { value },\n    } = e;\n    const newHeight = this.calculateNewHeight();\n    if (\n      // @ts-expect-error TS(2339): Property 'height' does not exist on type 'Readonly... Remove this comment to see the full error message\n      newHeight !== this.state.height &&\n      // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n      typeof this.props.onHeightChange === 'function'\n    ) {\n      // @ts-expect-error TS(2339): Property 'onHeightChange' does not exist on type '... Remove this comment to see the full error message\n      this.props.onHeightChange(newHeight);\n    }\n    this.setState({\n      value,\n      height: newHeight,\n    });\n    // ues debounce for avoiding frequent updates compose text module state\n    this.updateMessageText?.();\n  };\n\n  updateMessageText =\n    // @ts-expect-error TS(2339): Property 'onChange' does not exist on type 'Readon... Remove this comment to see the full error message\n    typeof this.props.onChange === 'function'\n      ? debounce({\n          // @ts-expect-error TS(2339): Property 'onChange' does not exist on type 'Readon... Remove this comment to see the full error message\n          fn: () => this.props.onChange(this.state.value),\n        })\n      : null;\n\n  onKeyDown = (e: any) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n\n      // TODO: this component should be refactored whole UX logic\n      // @ts-expect-error TS(2339): Property 'sendButtonDisabled' does not exist on ty... Remove this comment to see the full error message\n      if (this.props.sendButtonDisabled) return;\n\n      this.onSend();\n    }\n  };\n\n  onSend = () => {\n    this.updateMessageText?.flush();\n    // @ts-expect-error TS(2339): Property 'disabled' does not exist on type 'Readon... Remove this comment to see the full error message\n    if (!this.props.disabled && typeof this.props.onSend === 'function') {\n      // @ts-expect-error TS(2339): Property 'onSend' does not exist on type 'Readonly... Remove this comment to see the full error message\n      this.props.onSend(this.state.value, this.props.attachments);\n    }\n  };\n\n  onAttachmentIconClick = () => {\n    this._fileInputRef.current.click();\n  };\n\n  onSelectAttachment = ({ currentTarget }: any) => {\n    if (currentTarget.files.length === 0) {\n      return;\n    }\n    // @ts-expect-error TS(2339): Property 'addAttachment' does not exist on type 'R... Remove this comment to see the full error message\n    const { addAttachment } = this.props;\n    let file = currentTarget.files[0];\n    if (\n      (file.name.endsWith('.vcard') || file.name.endsWith('.vcf')) &&\n      file.type !== 'text/vcard'\n    ) {\n      file = new File([file], file.name, { type: 'text/vcard' });\n    }\n    addAttachment({\n      name: file.name,\n      size: file.size,\n      file,\n    });\n  };\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  render() {\n    const {\n      // @ts-expect-error TS(2339): Property 'currentLocale' does not exist on type 'R... Remove this comment to see the full error message\n      currentLocale,\n      // @ts-expect-error TS(2339): Property 'disabled' does not exist on type 'Readon... Remove this comment to see the full error message\n      disabled,\n      // @ts-expect-error TS(2339): Property 'sendButtonDisabled' does not exist on ty... Remove this comment to see the full error message\n      sendButtonDisabled,\n      // @ts-expect-error TS(2339): Property 'maxLength' does not exist on type 'Reado... Remove this comment to see the full error message\n      maxLength,\n      // @ts-expect-error TS(2339): Property 'supportAttachment' does not exist on typ... Remove this comment to see the full error message\n      supportAttachment,\n      // @ts-expect-error TS(2339): Property 'attachments' does not exist on type 'Rea... Remove this comment to see the full error message\n      attachments,\n      // @ts-expect-error TS(2339): Property 'removeAttachment' does not exist on type... Remove this comment to see the full error message\n      removeAttachment,\n    } = this.props;\n    // @ts-expect-error TS(2339): Property 'value' does not exist on type 'Readonly<... Remove this comment to see the full error message\n    const { value, height } = this.state;\n    const inputHeight = height - UIHeightOffset;\n    return (\n      <div\n        className={classnames(\n          styles.root,\n          supportAttachment && styles.supportAttachment,\n        )}\n      >\n        <div className={styles.attachmentIcon}>\n          <RcIconButton\n            variant=\"round\"\n            size=\"small\"\n            symbol={attachmentSvg}\n            onClick={this.onAttachmentIconClick}\n            disabled={disabled}\n          />\n          <input\n            type=\"file\"\n            accept=\"image/tiff,image/gif,image/jpeg,image/bmp,image/png,image/svg+xml,text/vcard,application/rtf,video/mpeg,audio/mpeg,video/mp4,application/zip\"\n            style={{ display: 'none' }}\n            ref={this._fileInputRef}\n            onChange={this.onSelectAttachment}\n            disabled={disabled}\n          />\n        </div>\n        <div className={styles.textField}>\n          <textarea\n            data-sign=\"messageInput\"\n            ref={(target) => {\n              this.textArea = target;\n            }}\n            placeholder={i18n.getString('typeMessage', currentLocale)}\n            value={value}\n            maxLength={maxLength}\n            onChange={this.onChange}\n            onKeyPressCapture={this.onKeyDown}\n            style={{\n              height: inputHeight,\n            }}\n            disabled={disabled}\n          />\n        </div>\n        <div className={styles.submitField}>\n          <input\n            data-sign=\"messageButton\"\n            type=\"button\"\n            value={i18n.getString('send', currentLocale)}\n            onClick={this.onSend}\n            className={styles.sendButton}\n            disabled={disabled || sendButtonDisabled}\n          />\n        </div>\n        <div className={styles.attachments}>\n          {attachments.map((attachment: any) => {\n            return (\n              <div\n                className={styles.attachmentItem}\n                key={attachment.name}\n                title={attachment.name}\n              >\n                {attachment.name}\n                <div className={styles.attachmentRemoveIcon}>\n                  <RcIconButton\n                    size=\"small\"\n                    symbol={removeSvg}\n                    disabled={disabled}\n                    onClick={() => {\n                      removeAttachment(attachment);\n                    }}\n                  />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MessageInput;\n"],"mappings":"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"}