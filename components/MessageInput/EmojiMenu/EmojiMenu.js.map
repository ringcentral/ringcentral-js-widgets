{"version":3,"file":"EmojiMenu.js","names":["_juno","require","_junoIcon","_react","_interopRequireWildcard","_i18n","_interopRequireDefault","_styles","_useEmojiI18n","e","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","_templateObject","data","_taggedTemplateLiteral","t","slice","Object","freeze","defineProperties","raw","value","_extends","assign","bind","n","arguments","length","r","hasOwnProperty","call","apply","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","name","Array","from","test","l","i","u","f","next","done","push","isArray","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","_getRequireWildcardCache","WeakMap","has","get","__proto__","defineProperty","getOwnPropertyDescriptor","set","Picker","lazy","Promise","resolve","then","_EmojiMenu","forwardRef","props","ref","_props$closeWhenFocus","closeWhenFocusOnInput","_props$autoClose","autoClose","action","currentLocale","onSelect","onOpen","onClose","getInputElement","rest","theme","useTheme","popperRef","useRef","positionRef","innerRef","_React$useState","React","useState","_React$useState2","anchorEl","setAnchorEl","emojiI18n","useEmojiI18n","isOpen","Boolean","id","undefined","anchorElRef","useForkRef","close","open","current","toggle","handleClickAway","input","document","activeElement","handleSelectEmoji","preventFocus","_e$nativeEvent$compos","hostElm","nativeEvent","composedPath","tagName","toLocaleLowerCase","textField","getSelectionPosition","preventDefault","useLayoutEffect","requestAnimationFrame","_popperRef$current","update","useEventListener","useImperativeHandle","createElement","Fragment","RcIconButton","title","i18n","getString","symbol","Emoji","onMouseDown","onClick","RcPopper","placement","className","styles","emojiPopper","modifiers","flip","enabled","arrow","element","preventOverflow","boundariesElement","padding","hide","ClickAwayListener","onClickAway","onKeyDown","key","stopPropagation","Suspense","fallback","perLine","maxFrequentRows","previewPosition","onEmojiSelect","palette","type","EmojiMenu","styled","exports"],"sources":["components/MessageInput/EmojiMenu/EmojiMenu.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport {\n  ClickAwayListener,\n  getSelectionPosition,\n  RcIconButton,\n  RcPopper,\n  styled,\n  useEventListener,\n  useForkRef,\n  useTheme,\n} from '@ringcentral/juno';\nimport { Emoji } from '@ringcentral/juno-icon';\nimport React, {\n  ComponentProps,\n  forwardRef,\n  HTMLAttributes,\n  lazy,\n  PropsWithChildren,\n  Ref,\n  Suspense,\n  useImperativeHandle,\n  useLayoutEffect,\n  useRef,\n} from 'react';\n\nimport i18n from '../i18n';\nimport styles from '../styles.scss';\n\nimport { Emoji as IEmoji } from './Emoji.interface';\nimport { useEmojiI18n } from './useEmojiI18n';\n\n// Compatible with running in shared worker\n// @ts-ignore\nconst Picker = lazy(() => import('@emoji-mart/react'));\n\ntype PositionType = ReturnType<typeof getSelectionPosition> | null;\n\nexport type EmojiMenuAction = {\n  toggle: () => void;\n  close: () => void;\n  open: () => void;\n};\n\nexport type EmojiMenuProps = PropsWithChildren<{\n  currentLocale: string;\n  onSelect: (emoji: IEmoji, position: PositionType) => void;\n  /**\n   * will close popup after select emoji\n   */\n  autoClose?: boolean;\n  /**\n   * will close popup when focus on input\n   */\n  closeWhenFocusOnInput?: boolean;\n  onOpen?: () => void;\n  onClose?: () => void;\n  /**\n   * target host to send emoji inputRef\n   */\n  getInputElement?: () => HTMLInputElement | HTMLTextAreaElement;\n  action?: Ref<EmojiMenuAction>;\n}> &\n  Omit<HTMLAttributes<HTMLButtonElement>, 'onSelect'>;\n\ntype PopperRef = ComponentProps<typeof RcPopper>['popperRef'];\n\nconst _EmojiMenu = forwardRef<HTMLButtonElement, EmojiMenuProps>(\n  (props, ref) => {\n    const {\n      closeWhenFocusOnInput = true,\n      autoClose = true,\n      action,\n      currentLocale,\n      onSelect,\n      onOpen,\n      onClose,\n      getInputElement,\n      ...rest\n    } = props;\n\n    const theme = useTheme();\n    const popperRef: PopperRef = useRef(null);\n    const positionRef = useRef<PositionType>(null);\n    const innerRef = useRef<HTMLButtonElement>(null);\n    const [anchorEl, setAnchorEl] = React.useState<HTMLButtonElement | null>(\n      null,\n    );\n    const emojiI18n = useEmojiI18n(currentLocale);\n    const isOpen = Boolean(anchorEl);\n    const id = isOpen ? 'emoji-menu' : undefined;\n    const anchorElRef = useForkRef(ref, innerRef);\n\n    const close = () => {\n      if (isOpen) {\n        onClose?.();\n        setAnchorEl(null);\n      }\n    };\n\n    const open = () => {\n      if (!isOpen) {\n        onOpen?.();\n        setAnchorEl(innerRef.current);\n      }\n    };\n\n    const toggle = () => {\n      if (isOpen) {\n        close();\n      } else {\n        open();\n      }\n    };\n\n    const handleClickAway = (): void => {\n      const input = getInputElement?.();\n      // when text input be focus, not close that popper\n      if (\n        input &&\n        !closeWhenFocusOnInput &&\n        document.activeElement === getInputElement?.()\n      ) {\n        return;\n      }\n\n      close();\n    };\n\n    const handleSelectEmoji = (data: IEmoji) => {\n      onSelect(data, positionRef.current);\n      positionRef.current = null;\n      if (autoClose) {\n        close();\n      }\n    };\n\n    const preventFocus = (\n      e: React.MouseEvent<HTMLElement, MouseEvent>,\n    ): void => {\n      const hostElm = e.nativeEvent.composedPath()?.[0] as HTMLElement;\n\n      // when focus on search input not prevent default, and remember current focus position\n      if (hostElm && hostElm.tagName.toLocaleLowerCase() === 'input') {\n        const textField = getInputElement?.();\n\n        if (textField) {\n          positionRef.current = getSelectionPosition(textField);\n        }\n\n        return;\n      }\n\n      e.preventDefault();\n    };\n\n    // update popper position after view ready\n    useLayoutEffect(() => {\n      if (!isOpen) return;\n\n      requestAnimationFrame(() => {\n        popperRef.current?.update();\n      });\n    });\n\n    useEventListener(getInputElement?.()!, 'focus', () => {\n      positionRef.current = null;\n    });\n\n    useImperativeHandle(action, () => ({\n      close,\n      open,\n      toggle,\n    }));\n\n    return (\n      <>\n        <RcIconButton\n          aria-describedby={id}\n          ref={anchorElRef}\n          title={i18n.getString('emoji', currentLocale)}\n          symbol={Emoji}\n          onMouseDown={(e) => {\n            e.preventDefault();\n          }}\n          onClick={toggle}\n          {...rest}\n        />\n        <RcPopper\n          placement=\"top\"\n          popperRef={popperRef}\n          className={styles.emojiPopper}\n          id={id}\n          open={isOpen}\n          anchorEl={anchorEl}\n          modifiers={{\n            flip: { enabled: false },\n            arrow: { element: null, enabled: false },\n            preventOverflow: {\n              boundariesElement: 'viewport',\n              enabled: true,\n              padding: 10,\n            },\n            hide: {\n              enabled: false,\n            },\n          }}\n        >\n          <ClickAwayListener onClickAway={handleClickAway}>\n            <div\n              onMouseDown={preventFocus}\n              onKeyDown={(e) => {\n                if (e.key !== 'Escape') {\n                  return;\n                }\n\n                e.stopPropagation();\n                onClose?.();\n                close();\n              }}\n            >\n              <Suspense fallback={null}>\n                <Picker\n                  // https://github.com/missive/emoji-mart#custom-emojis\n                  perLine={7}\n                  maxFrequentRows={2}\n                  previewPosition=\"none\"\n                  i18n={emojiI18n}\n                  onEmojiSelect={handleSelectEmoji}\n                  theme={theme.palette.type}\n                />\n              </Suspense>\n            </div>\n          </ClickAwayListener>\n        </RcPopper>\n      </>\n    );\n  },\n);\n\nexport const EmojiMenu = styled(_EmojiMenu)``;\n"],"mappings":"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","ignoreList":[]}