{"version":3,"file":"EmojiMenu.js","names":["_juno","require","_junoIcon","_react","_interopRequireWildcard","_i18n","_interopRequireDefault","_styles","_useEmojiI18n","_templateObject","_excluded","e","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","_taggedTemplateLiteral","t","slice","Object","freeze","defineProperties","raw","value","_extends","assign","bind","n","arguments","length","r","hasOwnProperty","call","apply","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","name","Array","from","test","l","i","u","f","next","done","push","isArray","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","WeakMap","__proto__","has","get","set","_t","defineProperty","getOwnPropertyDescriptor","Picker","lazy","Promise","resolve","then","_EmojiMenu","forwardRef","props","ref","_props$closeWhenFocus","closeWhenFocusOnInput","_props$autoClose","autoClose","action","currentLocale","onSelect","onOpen","onClose","getInputElement","rest","theme","useTheme","popperRef","useRef","positionRef","innerRef","_React$useState","React","useState","_React$useState2","anchorEl","setAnchorEl","emojiI18n","useEmojiI18n","isOpen","Boolean","id","undefined","anchorElRef","useForkRef","close","open","current","toggle","handleClickAway","input","document","activeElement","handleSelectEmoji","data","preventFocus","_e$nativeEvent$compos","hostElm","nativeEvent","composedPath","tagName","toLocaleLowerCase","textField","getSelectionPosition","preventDefault","useLayoutEffect","requestAnimationFrame","_popperRef$current","update","useEventListener","useImperativeHandle","createElement","Fragment","RcIconButton","title","i18n","getString","symbol","Emoji","onMouseDown","onClick","RcPopper","placement","className","styles","emojiPopper","modifiers","flip","enabled","arrow","element","preventOverflow","boundariesElement","padding","hide","ClickAwayListener","onClickAway","onKeyDown","key","stopPropagation","Suspense","fallback","perLine","maxFrequentRows","previewPosition","onEmojiSelect","palette","type","EmojiMenu","exports","styled"],"sources":["components/MessageInput/EmojiMenu/EmojiMenu.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport {\n  ClickAwayListener,\n  getSelectionPosition,\n  RcIconButton,\n  RcPopper,\n  styled,\n  useEventListener,\n  useForkRef,\n  useTheme,\n} from '@ringcentral/juno';\nimport { Emoji } from '@ringcentral/juno-icon';\nimport React, {\n  ComponentProps,\n  forwardRef,\n  HTMLAttributes,\n  lazy,\n  PropsWithChildren,\n  Ref,\n  Suspense,\n  useImperativeHandle,\n  useLayoutEffect,\n  useRef,\n} from 'react';\n\nimport i18n from '../i18n';\nimport styles from '../styles.scss';\n\nimport { Emoji as IEmoji } from './Emoji.interface';\nimport { useEmojiI18n } from './useEmojiI18n';\n\n// Compatible with running in shared worker\n// @ts-ignore\nconst Picker = lazy(() => import('@emoji-mart/react'));\n\ntype PositionType = ReturnType<typeof getSelectionPosition> | null;\n\nexport type EmojiMenuAction = {\n  toggle: () => void;\n  close: () => void;\n  open: () => void;\n};\n\nexport type EmojiMenuProps = PropsWithChildren<{\n  currentLocale: string;\n  onSelect: (emoji: IEmoji, position: PositionType) => void;\n  /**\n   * will close popup after select emoji\n   */\n  autoClose?: boolean;\n  /**\n   * will close popup when focus on input\n   */\n  closeWhenFocusOnInput?: boolean;\n  onOpen?: () => void;\n  onClose?: () => void;\n  /**\n   * target host to send emoji inputRef\n   */\n  getInputElement?: () => HTMLInputElement | HTMLTextAreaElement;\n  action?: Ref<EmojiMenuAction>;\n}> &\n  Omit<HTMLAttributes<HTMLButtonElement>, 'onSelect'>;\n\ntype PopperRef = ComponentProps<typeof RcPopper>['popperRef'];\n\nconst _EmojiMenu = forwardRef<HTMLButtonElement, EmojiMenuProps>(\n  (props, ref) => {\n    const {\n      closeWhenFocusOnInput = true,\n      autoClose = true,\n      action,\n      currentLocale,\n      onSelect,\n      onOpen,\n      onClose,\n      getInputElement,\n      ...rest\n    } = props;\n\n    const theme = useTheme();\n    const popperRef: PopperRef = useRef(null);\n    const positionRef = useRef<PositionType>(null);\n    const innerRef = useRef<HTMLButtonElement>(null);\n    const [anchorEl, setAnchorEl] = React.useState<HTMLButtonElement | null>(\n      null,\n    );\n    const emojiI18n = useEmojiI18n(currentLocale);\n    const isOpen = Boolean(anchorEl);\n    const id = isOpen ? 'emoji-menu' : undefined;\n    const anchorElRef = useForkRef(ref, innerRef);\n\n    const close = () => {\n      if (isOpen) {\n        onClose?.();\n        setAnchorEl(null);\n      }\n    };\n\n    const open = () => {\n      if (!isOpen) {\n        onOpen?.();\n        setAnchorEl(innerRef.current);\n      }\n    };\n\n    const toggle = () => {\n      if (isOpen) {\n        close();\n      } else {\n        open();\n      }\n    };\n\n    const handleClickAway = (): void => {\n      const input = getInputElement?.();\n      // when text input be focus, not close that popper\n      if (\n        input &&\n        !closeWhenFocusOnInput &&\n        document.activeElement === getInputElement?.()\n      ) {\n        return;\n      }\n\n      close();\n    };\n\n    const handleSelectEmoji = (data: IEmoji) => {\n      onSelect(data, positionRef.current);\n      positionRef.current = null;\n      if (autoClose) {\n        close();\n      }\n    };\n\n    const preventFocus = (\n      e: React.MouseEvent<HTMLElement, MouseEvent>,\n    ): void => {\n      const hostElm = e.nativeEvent.composedPath()?.[0] as HTMLElement;\n\n      // when focus on search input not prevent default, and remember current focus position\n      if (hostElm && hostElm.tagName.toLocaleLowerCase() === 'input') {\n        const textField = getInputElement?.();\n\n        if (textField) {\n          positionRef.current = getSelectionPosition(textField);\n        }\n\n        return;\n      }\n\n      e.preventDefault();\n    };\n\n    // update popper position after view ready\n    useLayoutEffect(() => {\n      if (!isOpen) return;\n\n      requestAnimationFrame(() => {\n        popperRef.current?.update();\n      });\n    });\n\n    useEventListener(getInputElement?.()!, 'focus', () => {\n      positionRef.current = null;\n    });\n\n    useImperativeHandle(action, () => ({\n      close,\n      open,\n      toggle,\n    }));\n\n    return (\n      <>\n        <RcIconButton\n          aria-describedby={id}\n          ref={anchorElRef}\n          title={i18n.getString('emoji', currentLocale)}\n          symbol={Emoji}\n          onMouseDown={(e) => {\n            e.preventDefault();\n          }}\n          onClick={toggle}\n          {...rest}\n        />\n        <RcPopper\n          placement=\"top\"\n          popperRef={popperRef}\n          className={styles.emojiPopper}\n          id={id}\n          open={isOpen}\n          anchorEl={anchorEl}\n          modifiers={{\n            flip: { enabled: false },\n            arrow: { element: null, enabled: false },\n            preventOverflow: {\n              boundariesElement: 'viewport',\n              enabled: true,\n              padding: 10,\n            },\n            hide: {\n              enabled: false,\n            },\n          }}\n        >\n          <ClickAwayListener onClickAway={handleClickAway}>\n            <div\n              onMouseDown={preventFocus}\n              onKeyDown={(e) => {\n                if (e.key !== 'Escape') {\n                  return;\n                }\n\n                e.stopPropagation();\n                onClose?.();\n                close();\n              }}\n            >\n              <Suspense fallback={null}>\n                <Picker\n                  // https://github.com/missive/emoji-mart#custom-emojis\n                  perLine={7}\n                  maxFrequentRows={2}\n                  previewPosition=\"none\"\n                  i18n={emojiI18n}\n                  onEmojiSelect={handleSelectEmoji}\n                  theme={theme.palette.type}\n                />\n              </Suspense>\n            </div>\n          </ClickAwayListener>\n        </RcPopper>\n      </>\n    );\n  },\n);\n\nexport const EmojiMenu = styled(_EmojiMenu)``;\n"],"mappings":"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","ignoreList":[]}