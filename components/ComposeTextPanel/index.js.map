{"version":3,"sources":["components/ComposeTextPanel/index.js"],"names":["ComposeTextPanel","props","state","messageText","onSenderChange","value","updateSenderNumber","cleanReceiverValue","cleanTypingToNumber","addToRecipients","receiver","shouldClean","addToNumber","isAdded","removeFromRecipients","phoneNumber","removeToNumber","nextProps","setState","senderNumbers","length","toNumbers","some","x","type","hasSenderNumbers","outboundSMS","hasPersonalRecipient","styles","root","className","showSpinner","currentLocale","showAlert","brand","typingToNumber","recipients","updateTypingToNumber","searchContact","searchContactList","formatContactPhone","detectPhoneNumbers","phoneTypeRenderer","phoneSourceNameRenderer","recipientsContactInfoRenderer","recipientsContactPhoneRenderer","autoFocus","senderField","senderNumber","formatPhone","updateMessageText","sendButtonDisabled","send","inputExpandable","attachments","supportAttachment","addAttachment","removeAttachment","Component","propTypes","PropTypes","string","func","isRequired","arrayOf","shape","bool","name","entityType","phoneType","size","number","defaultProps","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport styles from './styles.scss';\nimport RecipientsInput from '../RecipientsInput';\nimport { SpinnerOverlay } from '../SpinnerOverlay';\nimport NoSenderAlert from './NoSenderAlert';\nimport FromField from '../FromField';\nimport MessageInput from '../MessageInput';\n\nclass ComposeTextPanel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      messageText: props.messageText,\n    };\n\n    this.onSenderChange = (value) => {\n      this.props.updateSenderNumber(value);\n    };\n\n    this.cleanReceiverValue = () => {\n      this.props.cleanTypingToNumber();\n    };\n\n    this.addToRecipients = async (receiver, shouldClean = true) => {\n      const isAdded = await this.props.addToNumber(receiver);\n      if (isAdded && shouldClean) {\n        this.props.cleanTypingToNumber();\n      }\n    };\n\n    this.removeFromRecipients = (phoneNumber) => {\n      this.props.removeToNumber({ phoneNumber });\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.messageText !== this.state.messageText) {\n      this.setState({\n        messageText: nextProps.messageText,\n      });\n    }\n  }\n\n  hasSenderNumbers() {\n    return this.props.senderNumbers.length > 0;\n  }\n\n  hasPersonalRecipient() {\n    return this.props.toNumbers.some((x) => x && x.type !== 'company');\n  }\n\n  showAlert() {\n    return (\n      !this.hasSenderNumbers() &&\n      this.props.outboundSMS &&\n      this.hasPersonalRecipient()\n    );\n  }\n\n  render() {\n    return (\n      <div className={classnames(styles.root, this.props.className)}>\n        {this.props.showSpinner ? <SpinnerOverlay /> : null}\n        <NoSenderAlert\n          currentLocale={this.props.currentLocale}\n          showAlert={this.showAlert()}\n          brand={this.props.brand}\n        />\n        <RecipientsInput\n          value={this.props.typingToNumber}\n          recipientsClassName={styles.recipients}\n          onChange={this.props.updateTypingToNumber}\n          onClean={this.cleanReceiverValue}\n          recipients={this.props.toNumbers}\n          addToRecipients={this.addToRecipients}\n          removeFromRecipients={this.removeFromRecipients}\n          searchContact={this.props.searchContact}\n          searchContactList={this.props.searchContactList}\n          formatContactPhone={this.props.formatContactPhone}\n          detectPhoneNumbers={this.props.detectPhoneNumbers}\n          currentLocale={this.props.currentLocale}\n          phoneTypeRenderer={this.props.phoneTypeRenderer}\n          phoneSourceNameRenderer={this.props.phoneSourceNameRenderer}\n          contactInfoRenderer={this.props.recipientsContactInfoRenderer}\n          contactPhoneRenderer={this.props.recipientsContactPhoneRenderer}\n          titleEnabled\n          autoFocus={this.props.autoFocus}\n          multiple\n        />\n        <div className={styles.senderField}>\n          <FromField\n            currentLocale={this.props.currentLocale}\n            fromNumber={this.props.senderNumber}\n            fromNumbers={this.props.senderNumbers}\n            formatPhone={this.props.formatPhone}\n            onChange={this.onSenderChange}\n            hidden={!this.hasSenderNumbers()}\n            showAnonymous={false}\n          />\n        </div>\n        <MessageInput\n          value={this.props.messageText}\n          onChange={this.props.updateMessageText}\n          sendButtonDisabled={this.props.sendButtonDisabled}\n          currentLocale={this.props.currentLocale}\n          onSend={this.props.send}\n          inputExpandable={this.props.inputExpandable}\n          attachments={this.props.attachments}\n          supportAttachment={this.props.supportAttachment}\n          addAttachment={this.props.addAttachment}\n          removeAttachment={this.props.removeAttachment}\n        />\n      </div>\n    );\n  }\n}\n\nComposeTextPanel.propTypes = {\n  brand: PropTypes.string,\n  className: PropTypes.string,\n  send: PropTypes.func.isRequired,\n  senderNumbers: PropTypes.arrayOf(\n    PropTypes.shape({\n      phoneNumber: PropTypes.string.isRequired,\n    }),\n  ).isRequired,\n  sendButtonDisabled: PropTypes.bool.isRequired,\n  formatPhone: PropTypes.func.isRequired,\n  formatContactPhone: PropTypes.func.isRequired,\n  detectPhoneNumbers: PropTypes.func.isRequired,\n  searchContact: PropTypes.func.isRequired,\n  searchContactList: PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      entityType: PropTypes.string.isRequired,\n      phoneType: PropTypes.string.isRequired,\n      phoneNumber: PropTypes.string.isRequired,\n    }),\n  ).isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  updateSenderNumber: PropTypes.func.isRequired,\n  updateTypingToNumber: PropTypes.func.isRequired,\n  cleanTypingToNumber: PropTypes.func.isRequired,\n  addToNumber: PropTypes.func.isRequired,\n  removeToNumber: PropTypes.func.isRequired,\n  updateMessageText: PropTypes.func.isRequired,\n  messageText: PropTypes.string,\n  typingToNumber: PropTypes.string,\n  senderNumber: PropTypes.string,\n  toNumbers: PropTypes.arrayOf(\n    PropTypes.shape({\n      phoneNumber: PropTypes.string.isRequired,\n      name: PropTypes.string,\n    }),\n  ).isRequired,\n  outboundSMS: PropTypes.bool,\n  showSpinner: PropTypes.bool,\n  phoneTypeRenderer: PropTypes.func,\n  phoneSourceNameRenderer: PropTypes.func,\n  recipientsContactInfoRenderer: PropTypes.func,\n  recipientsContactPhoneRenderer: PropTypes.func,\n  autoFocus: PropTypes.bool,\n  inputExpandable: PropTypes.bool,\n  supportAttachment: PropTypes.bool,\n  attachments: PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      size: PropTypes.number.isRequired,\n    }),\n  ),\n  addAttachment: PropTypes.func,\n  removeAttachment: PropTypes.func,\n};\n\nComposeTextPanel.defaultProps = {\n  brand: 'RingCentral',\n  className: null,\n  messageText: '',\n  typingToNumber: '',\n  senderNumber: '',\n  outboundSMS: false,\n  showSpinner: false,\n  phoneTypeRenderer: undefined,\n  phoneSourceNameRenderer: undefined,\n  recipientsContactInfoRenderer: undefined,\n  recipientsContactPhoneRenderer: undefined,\n  autoFocus: false,\n  inputExpandable: undefined,\n  supportAttachment: false,\n  attachments: undefined,\n  addAttachment: undefined,\n  removeAttachment: undefined,\n};\n\nexport default ComposeTextPanel;\n"],"file":"index.js"}