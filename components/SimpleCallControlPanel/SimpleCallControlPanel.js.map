{"version":3,"file":"SimpleCallControlPanel.js","names":["_formatNumber","require","_react","_interopRequireWildcard","_callCtrlLayouts","_interopRequireDefault","_ActiveCallPad","_CallCtrlPanel","_i18n","e","__esModule","_getRequireWildcardCache","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","f","o","next","done","push","value","isArray","SimpleCallControlPanel","_ref","activeSession","areaCode","countryCode","nameMatches","sessionId","currentLocale","fallBackName","phoneNumber","actions","showContactDisplayPlaceholder","controlBusy","brandName","onBackButtonClick","setActiveSessionId","onMute","onUnmute","onHold","onUnhold","onHangup","onTransfer","_ref$maxExtensionNumb","maxExtensionNumberLength","_useState","useState","_useState2","selectedMatcherIndex","setSelectedMatcherIndex","formatPhone","useCallback","formatNumber","maxExtensionLength","onSelectMatcherName","option","findIndex","match","id","renderTime","useRef","useEffect","current","createElement","showBackButton","backButtonLabel","i18n","getString","layout","callCtrlLayouts","normalCtrl","startTime","isOnMute","isOnHold","brand","exports","defaultProps","ACTIONS_CTRL_MAP","muteCtrl","transferCtrl","holdCtrl"],"sources":["components/SimpleCallControlPanel/SimpleCallControlPanel.tsx"],"sourcesContent":["import { formatNumber } from '@ringcentral-integration/commons/lib/formatNumber';\nimport type { FunctionComponent } from 'react';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport callCtrlLayouts from '../../enums/callCtrlLayouts';\nimport { ACTIONS_CTRL_MAP } from '../ActiveCallPad';\nimport CallCtrlPanel from '../CallCtrlPanel';\n\nimport type { SimpleCallControlPanelProps } from './SimpleCallControlPanel.interface';\nimport i18n from './i18n';\n\nconst SimpleCallControlPanel: FunctionComponent<\n  SimpleCallControlPanelProps\n> = ({\n  activeSession,\n  areaCode,\n  countryCode,\n  nameMatches,\n  sessionId,\n  currentLocale,\n  fallBackName,\n  phoneNumber,\n  actions,\n  showContactDisplayPlaceholder,\n  controlBusy,\n  brandName,\n  onBackButtonClick,\n  setActiveSessionId,\n  onMute,\n  onUnmute,\n  onHold,\n  onUnhold,\n  onHangup,\n  onTransfer,\n  maxExtensionNumberLength = 6,\n}) => {\n  const [selectedMatcherIndex, setSelectedMatcherIndex] = useState(0);\n  const formatPhone = useCallback(\n    (phoneNumber) =>\n      formatNumber({\n        phoneNumber,\n        areaCode,\n        countryCode,\n        maxExtensionLength: maxExtensionNumberLength,\n      }),\n    [areaCode, countryCode],\n  );\n  const onSelectMatcherName = useCallback(\n    (option) => {\n      let selectedMatcherIndex = (nameMatches ?? []).findIndex(\n        (match) => match.id === option.id,\n      );\n      if (selectedMatcherIndex < 0) {\n        selectedMatcherIndex = 0;\n      }\n      setSelectedMatcherIndex(selectedMatcherIndex);\n    },\n    [nameMatches],\n  );\n  const renderTime = useRef(0);\n  useEffect(() => {\n    if (renderTime.current > 0 && !activeSession) {\n      onBackButtonClick();\n    }\n    renderTime.current += 1;\n  });\n  useEffect(() => {\n    setActiveSessionId?.(sessionId);\n  }, []);\n  if (!activeSession) {\n    // or using skeleton screen here\n    return null;\n  }\n  return (\n    <CallCtrlPanel\n      sessionId={sessionId}\n      currentLocale={currentLocale}\n      fallBackName={fallBackName}\n      phoneNumber={phoneNumber}\n      onMute={onMute}\n      onUnmute={onUnmute}\n      onHold={onHold}\n      onUnhold={onUnhold}\n      onHangup={onHangup}\n      onTransfer={onTransfer}\n      showBackButton\n      backButtonLabel={i18n.getString('allCalls', currentLocale)}\n      onBackButtonClick={onBackButtonClick}\n      formatPhone={formatPhone}\n      areaCode={areaCode}\n      countryCode={countryCode}\n      selectedMatcherIndex={selectedMatcherIndex}\n      layout={callCtrlLayouts.normalCtrl}\n      startTime={activeSession.startTime}\n      actions={actions}\n      isOnMute={activeSession.isOnMute}\n      isOnHold={activeSession.isOnHold}\n      nameMatches={nameMatches}\n      onSelectMatcherName={onSelectMatcherName}\n      brand={brandName}\n      showContactDisplayPlaceholder={showContactDisplayPlaceholder}\n      controlBusy={controlBusy}\n    />\n  );\n};\n\nSimpleCallControlPanel.defaultProps = {\n  setActiveSessionId() {},\n  currentLocale: 'en-US',\n  activeSession: null,\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'string | un... Remove this comment to see the full error message\n  sessionId: null,\n  nameMatches: [],\n  fallBackName: '',\n  phoneNumber: '',\n  showContactDisplayPlaceholder: false,\n  controlBusy: false,\n  actions: [\n    ACTIONS_CTRL_MAP.muteCtrl,\n    ACTIONS_CTRL_MAP.transferCtrl,\n    ACTIONS_CTRL_MAP.holdCtrl,\n  ],\n};\n\nexport { SimpleCallControlPanel };\n"],"mappings":"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","ignoreList":[]}