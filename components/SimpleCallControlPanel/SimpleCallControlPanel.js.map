{"version":3,"file":"SimpleCallControlPanel.js","names":["_react","_interopRequireWildcard","require","_formatNumber","_callCtrlLayouts","_interopRequireDefault","_ActiveCallPad","_CallCtrlPanel","_i18n","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","isArray","SimpleCallControlPanel","_ref","activeSession","areaCode","countryCode","nameMatches","sessionId","currentLocale","fallBackName","phoneNumber","actions","showContactDisplayPlaceholder","controlBusy","brandName","onBackButtonClick","setActiveSessionId","onMute","onUnmute","onHold","onUnhold","onHangup","onTransfer","_ref$maxExtensionNumb","maxExtensionNumberLength","_useState","useState","_useState2","selectedMatcherIndex","setSelectedMatcherIndex","formatPhone","useCallback","formatNumber","maxExtensionLength","onSelectMatcherName","option","findIndex","match","id","renderTime","useRef","useEffect","current","createElement","showBackButton","backButtonLabel","i18n","getString","layout","callCtrlLayouts","normalCtrl","startTime","isOnMute","isOnHold","brand","exports","defaultProps","ACTIONS_CTRL_MAP","muteCtrl","transferCtrl","holdCtrl"],"sources":["components/SimpleCallControlPanel/SimpleCallControlPanel.tsx"],"sourcesContent":["import type { FunctionComponent } from 'react';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { formatNumber } from '@ringcentral-integration/commons/lib/formatNumber';\n\nimport callCtrlLayouts from '../../enums/callCtrlLayouts';\nimport { ACTIONS_CTRL_MAP } from '../ActiveCallPad';\nimport CallCtrlPanel from '../CallCtrlPanel';\nimport i18n from './i18n';\nimport type { SimpleCallControlPanelProps } from './SimpleCallControlPanel.interface';\n\nconst SimpleCallControlPanel: FunctionComponent<SimpleCallControlPanelProps> =\n  ({\n    activeSession,\n    areaCode,\n    countryCode,\n    nameMatches,\n    sessionId,\n    currentLocale,\n    fallBackName,\n    phoneNumber,\n    actions,\n    showContactDisplayPlaceholder,\n    controlBusy,\n    brandName,\n    onBackButtonClick,\n    setActiveSessionId,\n    onMute,\n    onUnmute,\n    onHold,\n    onUnhold,\n    onHangup,\n    onTransfer,\n    maxExtensionNumberLength = 6,\n  }) => {\n    const [selectedMatcherIndex, setSelectedMatcherIndex] = useState(0);\n    const formatPhone = useCallback(\n      (phoneNumber) =>\n        formatNumber({\n          phoneNumber,\n          areaCode,\n          countryCode,\n          maxExtensionLength: maxExtensionNumberLength,\n        }),\n      [areaCode, countryCode],\n    );\n    const onSelectMatcherName = useCallback(\n      (option) => {\n        let selectedMatcherIndex = (nameMatches ?? []).findIndex(\n          (match) => match.id === option.id,\n        );\n        if (selectedMatcherIndex < 0) {\n          selectedMatcherIndex = 0;\n        }\n        setSelectedMatcherIndex(selectedMatcherIndex);\n      },\n      [nameMatches],\n    );\n    const renderTime = useRef(0);\n    useEffect(() => {\n      if (renderTime.current > 0 && !activeSession) {\n        onBackButtonClick();\n      }\n      renderTime.current += 1;\n    });\n    useEffect(() => {\n      setActiveSessionId(sessionId);\n    }, []);\n    if (!activeSession) {\n      // or using skeleton screen here\n      return null;\n    }\n    return (\n      <CallCtrlPanel\n        sessionId={sessionId}\n        currentLocale={currentLocale}\n        fallBackName={fallBackName}\n        phoneNumber={phoneNumber}\n        onMute={onMute}\n        onUnmute={onUnmute}\n        onHold={onHold}\n        onUnhold={onUnhold}\n        onHangup={onHangup}\n        onTransfer={onTransfer}\n        showBackButton\n        backButtonLabel={i18n.getString('allCalls', currentLocale)}\n        onBackButtonClick={onBackButtonClick}\n        formatPhone={formatPhone}\n        areaCode={areaCode}\n        countryCode={countryCode}\n        selectedMatcherIndex={selectedMatcherIndex}\n        layout={callCtrlLayouts.normalCtrl}\n        startTime={activeSession.startTime}\n        actions={actions}\n        isOnMute={activeSession.isOnMute}\n        isOnHold={activeSession.isOnHold}\n        nameMatches={nameMatches}\n        onSelectMatcherName={onSelectMatcherName}\n        brand={brandName}\n        showContactDisplayPlaceholder={showContactDisplayPlaceholder}\n        controlBusy={controlBusy}\n      />\n    );\n  };\n\nSimpleCallControlPanel.defaultProps = {\n  setActiveSessionId() {},\n  currentLocale: 'en-US',\n  activeSession: null,\n  // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'string | un... Remove this comment to see the full error message\n  sessionId: null,\n  nameMatches: [],\n  fallBackName: '',\n  phoneNumber: '',\n  showContactDisplayPlaceholder: false,\n  controlBusy: false,\n  actions: [\n    ACTIONS_CTRL_MAP.muteCtrl,\n    ACTIONS_CTRL_MAP.transferCtrl,\n    ACTIONS_CTRL_MAP.holdCtrl,\n  ],\n};\n\nexport { SimpleCallControlPanel };\n"],"mappings":"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"}