{"version":3,"sources":["components/ComposeTextPanelV2/ComposeTextPanel.tsx"],"names":["Root","styled","div","fullSizeStyle","ComposeTextPanel","showSpinner","currentLocale","brand","outboundSMS","messageText","updateMessageText","sendButtonDisabled","send","inputExpandable","attachments","supportAttachment","removeAttachment","addAttachment","typingToNumber","updateTypingToNumber","addToNumber","autoFocus","toNumbers","senderNumber","senderNumbers","formatPhone","updateSenderNumber","cleanTypingToNumber","removeToNumber","detectPhoneNumbers","hasSenderNumbers","length","hasPersonalRecipient","some","x","type","showAlert","addToRecipients","receiver","isAdded"],"mappings":"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","sourcesContent":["import React, { FunctionComponent } from 'react';\nimport { styled, palette2 } from '@ringcentral/juno';\nimport MessageInput from '../MessageInput';\nimport { SpinnerOverlay } from '../SpinnerOverlay';\n// todo: Re implement this component by function component\nimport NoSenderAlert from '../ComposeTextPanel/NoSenderAlert';\nimport { fullSizeStyle } from '../../lib/commonStyles';\nimport { CommunicationSetupPanel } from '../CommunicationSetupPanel';\n\nconst Root = styled.div`\n  ${fullSizeStyle};\n  box-sizing: border-box;\n  background: ${palette2('neutral', 'b01')};\n`;\n\nexport interface ComposeTextPanelProps {\n  brand: string;\n  send: (...args: any[]) => any;\n  senderNumbers: {\n    phoneNumber: string;\n  }[];\n  sendButtonDisabled: boolean;\n  formatPhone: (...args: any[]) => any;\n  detectPhoneNumbers: (...args: any[]) => any;\n  currentLocale: string;\n  updateSenderNumber: (...args: any[]) => any;\n  updateTypingToNumber: (...args: any[]) => any;\n  cleanTypingToNumber: (...args: any[]) => any;\n  addToNumber: (...args: any[]) => any;\n  removeToNumber: (...args: any[]) => any;\n  updateMessageText: (...args: any[]) => any;\n  messageText?: string;\n  typingToNumber?: string;\n  senderNumber?: string;\n  toNumbers: {\n    phoneNumber: string;\n    name?: string;\n    type?: string;\n  }[];\n  outboundSMS?: boolean;\n  showSpinner?: boolean;\n  autoFocus?: boolean;\n  inputExpandable?: boolean;\n  supportAttachment?: boolean;\n  attachments?: {\n    name: string;\n    size: number;\n  }[];\n  addAttachment?: (...args: any[]) => any;\n  removeAttachment?: (...args: any[]) => any;\n}\n\nexport const ComposeTextPanel: FunctionComponent<ComposeTextPanelProps> = ({\n  showSpinner,\n  currentLocale,\n  brand,\n  outboundSMS,\n\n  messageText,\n  updateMessageText,\n  sendButtonDisabled,\n  send,\n  inputExpandable,\n  attachments,\n  supportAttachment,\n  removeAttachment,\n  addAttachment,\n\n  typingToNumber,\n  updateTypingToNumber,\n  addToNumber,\n  autoFocus,\n  toNumbers,\n  senderNumber,\n  senderNumbers,\n  formatPhone,\n  updateSenderNumber,\n  cleanTypingToNumber,\n  removeToNumber,\n  detectPhoneNumbers,\n}) => {\n  const hasSenderNumbers = senderNumbers.length > 0;\n  const hasPersonalRecipient = toNumbers.some((x) => x && x.type !== 'company');\n  // todo, double check the logic here.\n  const showAlert = !hasSenderNumbers && outboundSMS && hasPersonalRecipient;\n\n  const addToRecipients = async (receiver: any) => {\n    const isAdded = await addToNumber(receiver);\n    if (isAdded) {\n      cleanTypingToNumber();\n    }\n  };\n\n  return (\n    <Root>\n      {showSpinner && <SpinnerOverlay />}\n      <CommunicationSetupPanel\n        toNumber={typingToNumber}\n        onToNumberChange={updateTypingToNumber}\n        multiple\n        autoFocus={autoFocus}\n        recipients={toNumbers}\n        setRecipient={addToRecipients}\n        clearRecipient={removeToNumber}\n        currentLocale={currentLocale}\n        detectPhoneNumbers={detectPhoneNumbers}\n        // from field\n        showAnonymous={false}\n        fromNumber={senderNumber}\n        fromNumbers={senderNumbers}\n        formatPhone={formatPhone}\n        changeFromNumber={updateSenderNumber}\n        showFromField={hasSenderNumbers}\n      >\n        <NoSenderAlert\n          currentLocale={currentLocale}\n          showAlert={showAlert}\n          brand={brand}\n        />\n        <MessageInput\n          value={messageText}\n          onChange={updateMessageText}\n          sendButtonDisabled={sendButtonDisabled}\n          currentLocale={currentLocale}\n          onSend={send}\n          inputExpandable={inputExpandable}\n          attachments={attachments}\n          supportAttachment={supportAttachment}\n          addAttachment={addAttachment}\n          removeAttachment={removeAttachment}\n        />\n      </CommunicationSetupPanel>\n    </Root>\n  );\n};\n"],"file":"ComposeTextPanel.js"}