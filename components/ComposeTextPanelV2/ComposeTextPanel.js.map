{"version":3,"file":"ComposeTextPanel.js","names":["_react","_interopRequireDefault","require","_CommunicationSetupPanel","_NoSenderAlert","_MessageInput","_SpinnerOverlay","_styles","obj","__esModule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","ComposeTextPanel","_ref","showSpinner","currentLocale","brand","outboundSMS","messageText","updateMessageText","sendButtonDisabled","send","inputExpandable","attachments","supportAttachment","removeAttachment","addAttachment","typingToNumber","updateTypingToNumber","addToNumber","autoFocus","toNumbers","senderNumber","senderNumbers","hintInfo","formatPhone","updateSenderNumber","cleanTypingToNumber","removeToNumber","detectPhoneNumbers","hasSenderNumbers","length","hasPersonalRecipient","some","x","type","showAlert","addToRecipients","_ref2","regeneratorRuntime","mark","_callee","receiver","isAdded","wrap","_callee$","_context","prev","next","sent","stop","_x","createElement","Root","SpinnerOverlay","CommunicationSetupPanel","toNumber","onToNumberChange","directlyProceedType","multiple","recipients","setRecipient","clearRecipient","showAnonymous","fromNumber","fromNumbers","changeFromNumber","showFromField","inputFullWidth","onChange","onSend","exports"],"sources":["components/ComposeTextPanelV2/ComposeTextPanel.tsx"],"sourcesContent":["import type { FunctionComponent } from 'react';\nimport React from 'react';\n\nimport { CommunicationSetupPanel } from '../CommunicationSetupPanel';\n// TODO: Re implement this component by function component\nimport NoSenderAlert from '../ComposeTextPanel/NoSenderAlert';\nimport MessageInput from '../MessageInput';\nimport { SpinnerOverlay } from '../SpinnerOverlay';\nimport { Root } from './styles';\n\nexport interface ComposeTextPanelProps {\n  brand: string;\n  send: (...args: any[]) => any;\n  senderNumbers: {\n    phoneNumber: string;\n  }[];\n  sendButtonDisabled: boolean;\n  formatPhone: (...args: any[]) => any;\n  detectPhoneNumbers: (...args: any[]) => any;\n  currentLocale: string;\n  updateSenderNumber: (...args: any[]) => any;\n  updateTypingToNumber: (...args: any[]) => any;\n  cleanTypingToNumber: (...args: any[]) => any;\n  addToNumber: (...args: any[]) => any;\n  removeToNumber: (...args: any[]) => any;\n  updateMessageText: (...args: any[]) => any;\n  messageText?: string;\n  typingToNumber?: string;\n  senderNumber?: string;\n  toNumbers: {\n    phoneNumber: string;\n    name?: string;\n    type?: string;\n  }[];\n  outboundSMS?: boolean;\n  showSpinner?: boolean;\n  autoFocus?: boolean;\n  inputExpandable?: boolean;\n  supportAttachment?: boolean;\n  attachments?: {\n    name: string;\n    size: number;\n  }[];\n  addAttachment?: (...args: any[]) => any;\n  removeAttachment?: (...args: any[]) => any;\n  hintInfo?: JSX.Element;\n}\n\nexport const ComposeTextPanel: FunctionComponent<ComposeTextPanelProps> = ({\n  showSpinner,\n  currentLocale,\n  brand,\n  outboundSMS,\n\n  messageText,\n  updateMessageText,\n  sendButtonDisabled,\n  send,\n  inputExpandable,\n  attachments,\n  supportAttachment,\n  removeAttachment,\n  addAttachment,\n\n  typingToNumber,\n  updateTypingToNumber,\n  addToNumber,\n  autoFocus,\n  toNumbers,\n  senderNumber,\n  senderNumbers,\n  hintInfo,\n  formatPhone,\n  updateSenderNumber,\n  cleanTypingToNumber,\n  removeToNumber,\n  detectPhoneNumbers,\n}) => {\n  const hasSenderNumbers = senderNumbers.length > 0;\n  const hasPersonalRecipient = toNumbers.some((x) => x && x.type !== 'company');\n  // TODO:, double check the logic here.\n  const showAlert = !!(\n    !hasSenderNumbers &&\n    outboundSMS &&\n    hasPersonalRecipient\n  );\n\n  const addToRecipients = async (receiver: any) => {\n    const isAdded = await addToNumber(receiver);\n    if (isAdded) {\n      cleanTypingToNumber();\n    }\n  };\n\n  return (\n    <Root>\n      {showSpinner && <SpinnerOverlay />}\n      <CommunicationSetupPanel\n        // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n        toNumber={typingToNumber}\n        onToNumberChange={updateTypingToNumber}\n        directlyProceedType=\"message\"\n        multiple\n        autoFocus={autoFocus}\n        recipients={toNumbers}\n        setRecipient={addToRecipients}\n        clearRecipient={removeToNumber}\n        currentLocale={currentLocale}\n        detectPhoneNumbers={detectPhoneNumbers}\n        // from field\n        showAnonymous={false}\n        fromNumber={senderNumber}\n        fromNumbers={senderNumbers}\n        formatPhone={formatPhone}\n        changeFromNumber={updateSenderNumber}\n        showFromField={hasSenderNumbers}\n        inputFullWidth={!!hintInfo}\n      >\n        <NoSenderAlert\n          currentLocale={currentLocale}\n          showAlert={showAlert}\n          brand={brand}\n        />\n        {hintInfo}\n        <MessageInput\n          // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n          value={messageText}\n          onChange={updateMessageText}\n          sendButtonDisabled={sendButtonDisabled}\n          currentLocale={currentLocale}\n          onSend={send}\n          inputExpandable={inputExpandable}\n          attachments={attachments}\n          supportAttachment={supportAttachment}\n          addAttachment={addAttachment}\n          removeAttachment={removeAttachment}\n        />\n      </CommunicationSetupPanel>\n    </Root>\n  );\n};\n"],"mappings":"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"}