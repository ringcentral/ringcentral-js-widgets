{"version":3,"file":"RingtoneSelection.js","names":["_RingtoneConfiguration","require","_juno","_junoIcon","_react","_interopRequireWildcard","_RemoveRingtoneDialog","_RingtoneUploadButton","_i18n","_styles","_interopRequireDefault","e","__esModule","t","WeakMap","r","n","o","i","f","__proto__","_typeof","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_regenerator","Symbol","iterator","toStringTag","c","prototype","Generator","u","create","_regeneratorDefine2","p","y","G","v","a","d","bind","length","l","TypeError","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","displayName","w","m","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","next","push","isArray","RingtoneSelection","exports","_ref","label","volume","isDisabled","ringtoneList","ringtoneDeviceId","selectedRingtoneId","enableCustomRingtone","isUploadRingtoneDisabled","updateCurrentRingtone","uploadCustomRingtone","removeCustomRingtone","showAlert","_useState","useState","_useState2","playing","setPlaying","_useState3","_useState4","playingId","setPlayingId","_useState5","_useState6","open","setOpen","_useState7","_useState8","audioUrl","setAudioUrl","_useState9","id","_useState0","ringtonePlanToRemoved","setRingtonePlanToRemoved","audio","useAudio","resetPlaying","onplay","onpause","onended","onerror","undefined","src","_audio$setSinkId","setSinkId","turnOffAudio","useCallback","pause","currentTime","customRingtoneNameList","useMemo","customRingtoneList","filter","ringtone","type","map","useEffect","_audio$setSinkId2","createElement","className","styles","ringtoneContainer","RemoveRingtoneDialog","getFileNameWithoutExt","onCancel","onConfirm","RcTypography","variant","color","RcSelect","displayEmpty","fullWidth","disabled","MenuProps","PopoverClasses","paper","ringtonePopover","onOpen","onClose","RingtoneUploadButton","isButtonDisabled","message","onUploadRingtone","info","onClickAddButton","url","isDefaultRingtone","RcMenuItem","key","ringtoneItem","onClick","stopPropagation","RcText","actionWrapper","RcTooltip","title","RcIcon","symbol","Delete","size","deleteIcon","PlayCircleBorder","_ref2","_callee","_t","_context","play","console","log","_x"],"sources":["components/RingtoneSelection/RingtoneSelection.tsx"],"sourcesContent":["import {\n  getFileNameWithoutExt,\n  type RINGS_TYPE,\n  type RingtoneItem,\n} from '@ringcentral-integration/commons/modules/RingtoneConfiguration';\nimport {\n  RcIcon,\n  RcMenuItem,\n  RcSelect,\n  RcText,\n  RcTooltip,\n  RcTypography,\n  useAudio,\n} from '@ringcentral/juno';\nimport { PlayCircleBorder, Delete } from '@ringcentral/juno-icon';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { RemoveRingtoneDialog } from './components/RemoveRingtoneDialog';\nimport { RingtoneUploadButton } from './components/RingtoneUploadButton';\nimport { t } from './i18n';\nimport styles from './styles.scss';\n\nexport interface RingtoneSelectionProps {\n  ringtoneList: RingtoneItem[];\n  selectedRingtoneId: string;\n  ringtoneDeviceId?: string;\n  enableCustomRingtone?: boolean;\n  volume?: number;\n  label?: string;\n  isDisabled?: boolean;\n  isUploadRingtoneDisabled?: boolean;\n  updateCurrentRingtone: (id: string) => void;\n  removeCustomRingtone: (id: string) => void;\n  uploadCustomRingtone: (props: any) => void;\n  showAlert: (message: string) => void;\n}\n\nexport const RingtoneSelection = ({\n  label,\n  volume,\n  isDisabled,\n  ringtoneList,\n  ringtoneDeviceId,\n  selectedRingtoneId,\n  enableCustomRingtone,\n  isUploadRingtoneDisabled,\n  updateCurrentRingtone,\n  uploadCustomRingtone,\n  removeCustomRingtone,\n  showAlert,\n}: RingtoneSelectionProps) => {\n  const [playing, setPlaying] = useState(false);\n  const [playingId, setPlayingId] = useState('');\n  const [open, setOpen] = useState(false);\n  const [audioUrl, setAudioUrl] = useState('');\n  const [ringtonePlanToRemoved, setRingtonePlanToRemoved] = useState<{\n    id: string;\n    name: string;\n  }>({\n    id: '',\n    name: '',\n  });\n\n  const audio = useAudio((audio) => {\n    const resetPlaying = () => {\n      setPlaying(false);\n      setPlayingId('');\n    };\n    audio.onplay = () => setPlaying(true);\n    audio.onpause = resetPlaying;\n    audio.onended = resetPlaying;\n    audio.onerror = resetPlaying;\n    if (volume !== undefined) {\n      audio.volume = volume;\n    }\n\n    if (audioUrl) {\n      audio.src = audioUrl;\n    }\n    if (ringtoneDeviceId) {\n      audio.setSinkId?.(ringtoneDeviceId);\n    }\n  });\n\n  const turnOffAudio = useCallback(() => {\n    if (playing) {\n      audio.pause();\n      audio.currentTime = 0;\n    }\n  }, [audio, playing]);\n\n  const customRingtoneNameList = useMemo(() => {\n    const customRingtoneList = ringtoneList.filter(\n      (ringtone) => ringtone.type === 'custom',\n    );\n    return customRingtoneList.map((ringtone) => ringtone.name!);\n  }, [ringtoneList]);\n\n  useEffect(() => {\n    if (volume !== undefined) {\n      audio.volume = volume;\n    }\n    if (ringtoneDeviceId) {\n      audio.setSinkId?.(ringtoneDeviceId);\n    }\n  }, [audio, volume, ringtoneDeviceId]);\n\n  return (\n    <div\n      className={styles.ringtoneContainer}\n      data-sign=\"ringtoneSelectionContainer\"\n    >\n      {enableCustomRingtone && (\n        <RemoveRingtoneDialog\n          name={getFileNameWithoutExt(ringtonePlanToRemoved.name)}\n          open={!!(ringtonePlanToRemoved.id && ringtonePlanToRemoved.name)}\n          onCancel={() => setRingtonePlanToRemoved({ id: '', name: '' })}\n          onConfirm={() => {\n            setRingtonePlanToRemoved({ id: '', name: '' });\n            removeCustomRingtone(ringtonePlanToRemoved.id);\n          }}\n        />\n      )}\n      {label ? (\n        <RcTypography\n          data-sign=\"ringtoneSelectionLabel\"\n          variant=\"body2\"\n          color=\"neutral.f06\"\n        >\n          {label}\n        </RcTypography>\n      ) : null}\n      <RcSelect\n        displayEmpty\n        fullWidth\n        disabled={isDisabled}\n        MenuProps={{\n          PopoverClasses: {\n            paper: styles.ringtonePopover,\n          },\n        }}\n        open={open}\n        variant=\"box\"\n        data-sign=\"ringtoneSelection\"\n        value={selectedRingtoneId}\n        onOpen={() => setOpen(true)}\n        onClose={() => {\n          turnOffAudio();\n          setOpen(false);\n        }}\n      >\n        {enableCustomRingtone && (\n          <RingtoneUploadButton\n            isButtonDisabled={isUploadRingtoneDisabled}\n            customRingtoneNameList={customRingtoneNameList}\n            showAlert={(message) => {\n              showAlert(message);\n              setOpen(false);\n            }}\n            onUploadRingtone={(info) => {\n              uploadCustomRingtone(info);\n              setOpen(false);\n            }}\n            onClickAddButton={turnOffAudio}\n          />\n        )}\n        {ringtoneList.map((ringtone) => {\n          const { id, type, name, url } = ringtone;\n          const isDefaultRingtone = type === 'default';\n          return (\n            <RcMenuItem\n              key={id}\n              className={styles.ringtoneItem}\n              value={id}\n              onClick={(e) => {\n                e.stopPropagation();\n                if (selectedRingtoneId !== id) {\n                  updateCurrentRingtone(id);\n                }\n                setOpen(false);\n              }}\n            >\n              <RcText>\n                {isDefaultRingtone\n                  ? t(id as RINGS_TYPE)\n                  : getFileNameWithoutExt(name!)}\n              </RcText>\n              {url && (\n                <div className={styles.actionWrapper}>\n                  {!isDefaultRingtone && (\n                    <RcTooltip title={t('delete')}>\n                      <RcIcon\n                        symbol={Delete}\n                        size=\"small\"\n                        className={styles.deleteIcon}\n                        color=\"action.grayDark\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          turnOffAudio();\n                          setOpen(false);\n                          setRingtonePlanToRemoved({ id, name: name! });\n                        }}\n                      />\n                    </RcTooltip>\n                  )}\n                  <RcTooltip title={t('play')}>\n                    <RcIcon\n                      symbol={PlayCircleBorder}\n                      size=\"small\"\n                      color={\n                        playing && id === playingId\n                          ? 'action.primary'\n                          : 'action.grayDark'\n                      }\n                      onClick={async (e) => {\n                        e.stopPropagation();\n                        try {\n                          turnOffAudio();\n                          if (ringtoneDeviceId === 'off' || !ringtoneDeviceId) {\n                            return;\n                          }\n                          setPlayingId(id);\n                          audio.src = url;\n                          setAudioUrl(url);\n                          audio.play();\n                        } catch (err) {\n                          console.log(err);\n                        }\n                      }}\n                    />\n                  </RcTooltip>\n                </div>\n              )}\n            </RcMenuItem>\n          );\n        })}\n      </RcSelect>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}