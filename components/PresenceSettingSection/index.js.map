{"version":3,"file":"index.js","names":["_react","_interopRequireWildcard","require","_classnames","_interopRequireDefault","_Presence","_juno","_DynamicsFont","_getPresenceStatusName","_IconLine","_usePresenceItems2","_Switch","_i18n","_styles","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","isArray","_templateObject2","data","_taggedTemplateLiteral","_templateObject","strings","raw","freeze","defineProperties","StyledList","styled","RcList","palette2","RcListItem","spacing","StyledPresenceWrap","div","flexCenterStyle","RcPresence","PresenceSettingSection","_ref","_ref$showPresenceSett","showPresenceSettings","toggleAcceptCallQueueCalls","isCallQueueMember","dndStatusProp","dndStatus","userStatus","currentLocale","setAvailable","setBusy","setDoNotDisturb","setInvisible","_useState","useState","_useState2","showSelects","setShowSelects","toggleShow","prev","onCallQueueChange","sectionClass","classnames","styles","section","showDropdown","acceptQueueCalls","createElement","dataSign","icon","disable","doNotAcceptAnyCalls","checked","takeAllCalls","onChange","i18n","getString","currentStatus","getPresenceStatusName","_usePresenceItems","usePresenceItems","type","presenceElements","elements","selectedItem","className","dropdownIcon","dynamicsFont","arrow","onClick","iconLine","RcBox","flex","size","presenceList","exports"],"sources":["components/PresenceSettingSection/index.tsx"],"sourcesContent":["import type { FunctionComponent } from 'react';\nimport React, { useState } from 'react';\n\nimport classnames from 'classnames';\n\nimport type { DNDStatusValueType } from '@ringcentral-integration/commons/modules/Presence';\nimport { dndStatus } from '@ringcentral-integration/commons/modules/Presence';\nimport {\n  flexCenterStyle,\n  palette2,\n  RcBox,\n  RcList,\n  RcListItem,\n  RcPresence,\n  spacing,\n  styled,\n} from '@ringcentral/juno';\n\nimport dynamicsFont from '../../assets/DynamicsFont/DynamicsFont.scss';\nimport { getPresenceStatusName } from '../../lib/getPresenceStatusName';\nimport IconLine from '../IconLine';\nimport { usePresenceItems } from '../PresenceDropdown/usePresenceItems';\nimport Switch from '../Switch';\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nconst StyledList = styled(RcList)`\n  background-color: ${palette2('neutral', 'elevation')};\n\n  ${RcListItem} {\n    padding-left: ${spacing(5)};\n  }\n`;\n\n// TODO: when full page refactor, remove this\nconst StyledPresenceWrap = styled.div`\n  ${flexCenterStyle};\n  color: ${palette2('neutral', 'f05')};\n\n  ${RcPresence} {\n    margin-right: ${spacing(2)};\n  }\n`;\n\ntype PresenceSettingSectionProps = {\n  currentLocale: string;\n  dndStatus: DNDStatusValueType;\n  userStatus: string;\n  isCallQueueMember: boolean;\n  setAvailable: (...args: any[]) => any;\n  setBusy: (...args: any[]) => any;\n  setDoNotDisturb: (...args: any[]) => any;\n  setInvisible: (...args: any[]) => any;\n  toggleAcceptCallQueueCalls: (...args: any[]) => any;\n  showPresenceSettings: boolean;\n};\n\nexport const PresenceSettingSection: FunctionComponent<\n  PresenceSettingSectionProps\n> = ({\n  showPresenceSettings = false,\n  toggleAcceptCallQueueCalls,\n  isCallQueueMember,\n  dndStatus: dndStatusProp,\n  userStatus,\n  currentLocale,\n  setAvailable,\n  setBusy,\n  setDoNotDisturb,\n  setInvisible,\n}) => {\n  const [showSelects, setShowSelects] = useState(showPresenceSettings);\n\n  const toggleShow = () => {\n    setShowSelects((prev) => !prev);\n  };\n\n  const onCallQueueChange = () => {\n    toggleAcceptCallQueueCalls();\n  };\n\n  const sectionClass = classnames(\n    styles.section,\n    showSelects ? styles.showDropdown : null,\n  );\n  const acceptQueueCalls = isCallQueueMember ? (\n    <IconLine\n      dataSign=\"acceptQueueSwitch\"\n      icon={\n        <Switch\n          disable={dndStatusProp === dndStatus.doNotAcceptAnyCalls}\n          checked={dndStatusProp === dndStatus.takeAllCalls}\n          onChange={onCallQueueChange}\n        />\n      }\n    >\n      {i18n.getString('acceptQueueCalls', currentLocale)}\n    </IconLine>\n  ) : null;\n  const currentStatus = getPresenceStatusName(\n    userStatus as any,\n    dndStatusProp as any,\n    currentLocale,\n  );\n\n  const { elements: presenceElements, selectedItem } = usePresenceItems({\n    currentLocale,\n    userStatus,\n    dndStatus: dndStatusProp,\n    onChange: (type) => {\n      switch (type) {\n        case 'available':\n          setAvailable();\n          break;\n        case 'busy':\n          setBusy();\n          break;\n        case 'DND':\n          setDoNotDisturb();\n          break;\n        case 'offline':\n          setInvisible();\n          break;\n        default:\n          break;\n      }\n    },\n  });\n\n  return (\n    <section className={sectionClass}>\n      <IconLine\n        dataSign=\"statusToggleShow\"\n        icon={\n          <span className={styles.dropdownIcon}>\n            <i className={dynamicsFont.arrow} />\n          </span>\n        }\n        onClick={toggleShow}\n        className={styles.iconLine}\n      >\n        <StyledPresenceWrap>\n          <div data-sign=\"status\">\n            {i18n.getString('status', currentLocale)}\n          </div>\n          <RcBox flex=\"1 1 auto\" />\n          <RcPresence size=\"medium\" type={selectedItem?.type} />\n          <span>{currentStatus}</span>\n        </StyledPresenceWrap>\n      </IconLine>\n      <StyledList className={styles.presenceList}>\n        {presenceElements}\n      </StyledList>\n      {acceptQueueCalls}\n    </section>\n  );\n};\n\n// export default class PresenceSettingSection extends Component<\n//   PresenceSettingSectionProps,\n//   PresenceSettingSectionState\n// > {\n//   constructor(props) {\n//     super(props);\n//   }\n// }\n"],"mappings":"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"}