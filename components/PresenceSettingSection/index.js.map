{"version":3,"file":"index.js","names":["_Presence","require","_juno","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_DynamicsFont","_getPresenceStatusName","_IconLine","_LinkLine","_usePresenceItems2","_SwitchLineItem","_i18n","_styles","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","f","o","next","done","push","value","isArray","_templateObject2","data","_taggedTemplateLiteral","_templateObject","freeze","defineProperties","raw","StyledList","styled","RcList","palette2","RcListItem","spacing","StyledPresenceWrap","div","flexCenterStyle","RcPresence","PresenceSettingSection","_ref","_ref$showPresenceSett","showPresenceSettings","toggleAcceptCallQueueCalls","isCallQueueMember","dndStatusProp","dndStatus","userStatus","currentLocale","setAvailable","setBusy","setDoNotDisturb","setInvisible","_ref$enableAcceptQueu","enableAcceptQueueCallsControl","onCallQueueManagementClick","_useState","useState","_useState2","showSelects","setShowSelects","toggleShow","prev","onCallQueueChange","sectionClass","clsx","styles","section","showDropdown","acceptQueueCalls","createElement","SwitchLineItem","dataSign","tooltip","i18n","getString","undefined","customTitle","show","checked","takeAllCalls","onChange","disabled","doNotAcceptAnyCalls","showCallQueueManagement","doNotAcceptDepartmentCalls","callQueueManagement","LinkLine","onClick","currentStatus","getPresenceStatusName","_usePresenceItems","usePresenceItems","type","presenceElements","elements","selectedItem","className","icon","dropdownIcon","dynamicsFont","arrow","iconLine","RcBox","flex","size","presenceList","exports"],"sources":["components/PresenceSettingSection/index.tsx"],"sourcesContent":["import type { DNDStatusValueType } from '@ringcentral-integration/commons/modules/Presence';\nimport { dndStatus } from '@ringcentral-integration/commons/modules/Presence';\nimport {\n  flexCenterStyle,\n  palette2,\n  RcBox,\n  RcList,\n  RcListItem,\n  RcPresence,\n  spacing,\n  styled,\n} from '@ringcentral/juno';\nimport clsx from 'clsx';\nimport type { FunctionComponent } from 'react';\nimport React, { useState } from 'react';\n\nimport dynamicsFont from '../../assets/DynamicsFont/DynamicsFont.scss';\nimport { getPresenceStatusName } from '../../lib/getPresenceStatusName';\nimport IconLine from '../IconLine';\nimport { LinkLine } from '../LinkLine';\nimport { usePresenceItems } from '../PresenceDropdown/usePresenceItems';\nimport { SwitchLineItem } from '../SettingsPanel/SwitchLineItem';\n\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nconst StyledList = styled(RcList)`\n  background-color: ${palette2('neutral', 'elevation')};\n\n  ${RcListItem} {\n    padding-left: ${spacing(5)};\n  }\n`;\n\n// TODO: when full page refactor, remove this\nconst StyledPresenceWrap = styled.div`\n  ${flexCenterStyle};\n  color: ${palette2('neutral', 'f05')};\n\n  ${RcPresence} {\n    margin-right: ${spacing(2)};\n  }\n`;\n\ntype PresenceSettingSectionProps = {\n  currentLocale: string;\n  dndStatus: DNDStatusValueType;\n  userStatus: string;\n  isCallQueueMember: boolean;\n  setAvailable: (...args: any[]) => any;\n  setBusy: (...args: any[]) => any;\n  setDoNotDisturb: (...args: any[]) => any;\n  setInvisible: (...args: any[]) => any;\n  toggleAcceptCallQueueCalls: (...args: any[]) => any;\n  showPresenceSettings: boolean;\n  enableAcceptQueueCallsControl?: boolean;\n  showCallQueueManagement?: boolean;\n  onCallQueueManagementClick?: () => void;\n};\n\nexport const PresenceSettingSection: FunctionComponent<\n  PresenceSettingSectionProps\n> = ({\n  showPresenceSettings = false,\n  toggleAcceptCallQueueCalls,\n  isCallQueueMember,\n  dndStatus: dndStatusProp,\n  userStatus,\n  currentLocale,\n  setAvailable,\n  setBusy,\n  setDoNotDisturb,\n  setInvisible,\n  enableAcceptQueueCallsControl = true,\n  onCallQueueManagementClick,\n}) => {\n  const [showSelects, setShowSelects] = useState(showPresenceSettings);\n\n  const toggleShow = () => {\n    setShowSelects((prev) => !prev);\n  };\n\n  const onCallQueueChange = () => {\n    toggleAcceptCallQueueCalls();\n  };\n\n  const sectionClass = clsx(\n    styles.section,\n    showSelects ? styles.showDropdown : null,\n  );\n  const acceptQueueCalls = isCallQueueMember ? (\n    <SwitchLineItem\n      dataSign=\"acceptQueueSwitch\"\n      tooltip={\n        !enableAcceptQueueCallsControl\n          ? i18n.getString('callQueueDisabledReason', currentLocale)\n          : undefined\n      }\n      customTitle={i18n.getString('acceptQueueCalls', currentLocale)}\n      show\n      checked={dndStatusProp === dndStatus.takeAllCalls}\n      onChange={onCallQueueChange}\n      disabled={\n        dndStatusProp === dndStatus.doNotAcceptAnyCalls ||\n        !enableAcceptQueueCallsControl\n      }\n    />\n  ) : null;\n\n  const showCallQueueManagement =\n    enableAcceptQueueCallsControl &&\n    onCallQueueManagementClick &&\n    dndStatusProp !== dndStatus.doNotAcceptAnyCalls &&\n    dndStatusProp !== dndStatus.doNotAcceptDepartmentCalls;\n\n  const callQueueManagement = showCallQueueManagement ? (\n    <LinkLine\n      dataSign=\"callQueueManagementSwitch\"\n      onClick={onCallQueueManagementClick}\n    >\n      {i18n.getString('callQueueManagement', currentLocale)}\n    </LinkLine>\n  ) : null;\n\n  const currentStatus = getPresenceStatusName(\n    userStatus as any,\n    dndStatusProp as any,\n    currentLocale,\n  );\n\n  const { elements: presenceElements, selectedItem } = usePresenceItems({\n    currentLocale,\n    userStatus,\n    dndStatus: dndStatusProp,\n    onChange: (type) => {\n      switch (type) {\n        case 'available':\n          setAvailable();\n          break;\n        case 'busy':\n          setBusy();\n          break;\n        case 'DND':\n          setDoNotDisturb();\n          break;\n        case 'offline':\n          setInvisible();\n          break;\n        default:\n          break;\n      }\n    },\n  });\n  return (\n    <section className={sectionClass}>\n      <IconLine\n        dataSign=\"statusToggleShow\"\n        icon={\n          <span className={styles.dropdownIcon}>\n            <i className={dynamicsFont.arrow} />\n          </span>\n        }\n        onClick={toggleShow}\n        className={styles.iconLine}\n      >\n        <StyledPresenceWrap>\n          <div data-sign=\"status\">\n            {i18n.getString('status', currentLocale)}\n          </div>\n          <RcBox flex=\"1 1 auto\" />\n          <RcPresence size=\"medium\" type={selectedItem?.type} />\n          <span>{currentStatus}</span>\n        </StyledPresenceWrap>\n      </IconLine>\n      <StyledList className={styles.presenceList}>\n        {presenceElements}\n      </StyledList>\n      {acceptQueueCalls}\n      {callQueueManagement}\n    </section>\n  );\n};\n\n// export default class PresenceSettingSection extends Component<\n//   PresenceSettingSectionProps,\n//   PresenceSettingSectionState\n// > {\n//   constructor(props) {\n//     super(props);\n//   }\n// }\n"],"mappings":"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","ignoreList":[]}