{"version":3,"file":"index.js","names":["_Presence","require","_juno","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_DynamicsFont","_getPresenceStatusName","_IconLine","_LinkLine","_usePresenceItems2","_SwitchLineItem","_i18n","_styles","_templateObject","_templateObject2","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","_taggedTemplateLiteral","freeze","defineProperties","raw","StyledList","styled","RcList","palette2","RcListItem","spacing","StyledPresenceWrap","div","flexCenterStyle","RcPresence","PresenceSettingSection","exports","_ref","_ref$showPresenceSett","showPresenceSettings","toggleAcceptCallQueueCalls","isCallQueueMember","dndStatusProp","dndStatus","userStatus","currentLocale","setAvailable","setBusy","setDoNotDisturb","setInvisible","_ref$enableAcceptQueu","enableAcceptQueueCallsControl","onCallQueueManagementClick","_useState","useState","_useState2","showSelects","setShowSelects","toggleShow","prev","onCallQueueChange","sectionClass","clsx","styles","section","showDropdown","acceptQueueCalls","createElement","SwitchLineItem","dataSign","tooltip","i18n","getString","undefined","customTitle","show","checked","takeAllCalls","onChange","disabled","doNotAcceptAnyCalls","showCallQueueManagement","doNotAcceptDepartmentCalls","callQueueManagement","LinkLine","onClick","currentStatus","getPresenceStatusName","_usePresenceItems","usePresenceItems","type","presenceElements","elements","selectedItem","className","icon","dropdownIcon","dynamicsFont","arrow","iconLine","RcBox","flex","size","presenceList"],"sources":["components/PresenceSettingSection/index.tsx"],"sourcesContent":["import type { DNDStatusValueType } from '@ringcentral-integration/commons/modules/Presence';\nimport { dndStatus } from '@ringcentral-integration/commons/modules/Presence';\nimport {\n  flexCenterStyle,\n  palette2,\n  RcBox,\n  RcList,\n  RcListItem,\n  RcPresence,\n  spacing,\n  styled,\n} from '@ringcentral/juno';\nimport clsx from 'clsx';\nimport type { FunctionComponent } from 'react';\nimport React, { useState } from 'react';\n\nimport dynamicsFont from '../../assets/DynamicsFont/DynamicsFont.scss';\nimport { getPresenceStatusName } from '../../lib/getPresenceStatusName';\nimport IconLine from '../IconLine';\nimport { LinkLine } from '../LinkLine';\nimport { usePresenceItems } from '../PresenceDropdown/usePresenceItems';\nimport { SwitchLineItem } from '../SettingsPanel/SwitchLineItem';\n\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nconst StyledList = styled(RcList)`\n  background-color: ${palette2('neutral', 'elevation')};\n\n  ${RcListItem} {\n    padding-left: ${spacing(5)};\n  }\n`;\n\n// TODO: when full page refactor, remove this\nconst StyledPresenceWrap = styled.div`\n  ${flexCenterStyle};\n  color: ${palette2('neutral', 'f05')};\n\n  ${RcPresence} {\n    margin-right: ${spacing(2)};\n  }\n`;\n\ntype PresenceSettingSectionProps = {\n  currentLocale: string;\n  dndStatus: DNDStatusValueType;\n  userStatus: string;\n  isCallQueueMember: boolean;\n  setAvailable: (...args: any[]) => any;\n  setBusy: (...args: any[]) => any;\n  setDoNotDisturb: (...args: any[]) => any;\n  setInvisible: (...args: any[]) => any;\n  toggleAcceptCallQueueCalls: (...args: any[]) => any;\n  showPresenceSettings: boolean;\n  enableAcceptQueueCallsControl?: boolean;\n  showCallQueueManagement?: boolean;\n  onCallQueueManagementClick?: () => void;\n};\n\nexport const PresenceSettingSection: FunctionComponent<\n  PresenceSettingSectionProps\n> = ({\n  showPresenceSettings = false,\n  toggleAcceptCallQueueCalls,\n  isCallQueueMember,\n  dndStatus: dndStatusProp,\n  userStatus,\n  currentLocale,\n  setAvailable,\n  setBusy,\n  setDoNotDisturb,\n  setInvisible,\n  enableAcceptQueueCallsControl = true,\n  onCallQueueManagementClick,\n}) => {\n  const [showSelects, setShowSelects] = useState(showPresenceSettings);\n\n  const toggleShow = () => {\n    setShowSelects((prev) => !prev);\n  };\n\n  const onCallQueueChange = () => {\n    toggleAcceptCallQueueCalls();\n  };\n\n  const sectionClass = clsx(\n    styles.section,\n    showSelects ? styles.showDropdown : null,\n  );\n  const acceptQueueCalls = isCallQueueMember ? (\n    <SwitchLineItem\n      dataSign=\"acceptQueueSwitch\"\n      tooltip={\n        !enableAcceptQueueCallsControl\n          ? i18n.getString('callQueueDisabledReason', currentLocale)\n          : undefined\n      }\n      customTitle={i18n.getString('acceptQueueCalls', currentLocale)}\n      show\n      checked={dndStatusProp === dndStatus.takeAllCalls}\n      onChange={onCallQueueChange}\n      disabled={\n        dndStatusProp === dndStatus.doNotAcceptAnyCalls ||\n        !enableAcceptQueueCallsControl\n      }\n    />\n  ) : null;\n\n  const showCallQueueManagement =\n    enableAcceptQueueCallsControl &&\n    onCallQueueManagementClick &&\n    dndStatusProp !== dndStatus.doNotAcceptAnyCalls &&\n    dndStatusProp !== dndStatus.doNotAcceptDepartmentCalls;\n\n  const callQueueManagement = showCallQueueManagement ? (\n    <LinkLine\n      dataSign=\"callQueueManagementSwitch\"\n      onClick={onCallQueueManagementClick}\n    >\n      {i18n.getString('callQueueManagement', currentLocale)}\n    </LinkLine>\n  ) : null;\n\n  const currentStatus = getPresenceStatusName(\n    userStatus as any,\n    dndStatusProp as any,\n    currentLocale,\n  );\n\n  const { elements: presenceElements, selectedItem } = usePresenceItems({\n    currentLocale,\n    userStatus,\n    dndStatus: dndStatusProp,\n    onChange: (type) => {\n      switch (type) {\n        case 'available':\n          setAvailable();\n          break;\n        case 'busy':\n          setBusy();\n          break;\n        case 'DND':\n          setDoNotDisturb();\n          break;\n        case 'offline':\n          setInvisible();\n          break;\n        default:\n          break;\n      }\n    },\n  });\n  return (\n    <section className={sectionClass}>\n      <IconLine\n        dataSign=\"statusToggleShow\"\n        icon={\n          <span className={styles.dropdownIcon}>\n            <i className={dynamicsFont.arrow} />\n          </span>\n        }\n        onClick={toggleShow}\n        className={styles.iconLine}\n      >\n        <StyledPresenceWrap>\n          <div data-sign=\"status\">\n            {i18n.getString('status', currentLocale)}\n          </div>\n          <RcBox flex=\"1 1 auto\" />\n          <RcPresence size=\"medium\" type={selectedItem?.type} />\n          <span>{currentStatus}</span>\n        </StyledPresenceWrap>\n      </IconLine>\n      <StyledList className={styles.presenceList}>\n        {presenceElements}\n      </StyledList>\n      {acceptQueueCalls}\n      {callQueueManagement}\n    </section>\n  );\n};\n\n// export default class PresenceSettingSection extends Component<\n//   PresenceSettingSectionProps,\n//   PresenceSettingSectionState\n// > {\n//   constructor(props) {\n//     super(props);\n//   }\n// }\n"],"mappings":"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","ignoreList":[]}