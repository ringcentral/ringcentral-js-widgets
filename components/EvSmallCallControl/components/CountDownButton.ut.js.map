{"version":3,"file":"CountDownButton.ut.js","names":["_react","_interopRequireDefault","require","_juno","_react2","_","obj","__esModule","setup","_ref","_ref$currentLocale","currentLocale","_ref$onRestartTimer","onRestartTimer","_ref$onResumeRecord","onResumeRecord","_ref$recordPauseCount","recordPauseCount","_ref$timeStamp","timeStamp","Date","now","_ref$dataSign","dataSign","render","createElement","RcThemeProvider","CountDownButton","CheckCountDownButtonTooltip","_setup","container","node","querySelector","expect","toBeTruthy","title","toBe","exports","CheckCountDownShows","_ref2","secondsToPause","_render","CountDown","data","textContent","toEqual","CheckCountDownTimer","jest","useFakeTimers","_setup2","setInterval","toHaveBeenCalledTimes","useRealTimers","WaitCountDownOver","_ref3","advanceTimersByTime"],"sources":["components/EvSmallCallControl/components/CountDownButton.ut.tsx"],"sourcesContent":["import React from 'react';\n\nimport type { StepFunction } from '@ringcentral-integration/test-utils';\nimport { RcThemeProvider } from '@ringcentral/juno';\nimport { render } from '@testing-library/react';\n\nimport type { CountDownButtonProps } from '.';\nimport { CountDown, CountDownButton } from '.';\n\nfunction setup({\n  currentLocale = 'en-US',\n  onRestartTimer = () => {},\n  onResumeRecord = () => {},\n  recordPauseCount = 10,\n  timeStamp = Date.now(),\n  dataSign = 'CountDown',\n}: Partial<CountDownButtonProps>) {\n  return render(\n    <RcThemeProvider>\n      <CountDownButton\n        currentLocale={currentLocale}\n        onRestartTimer={onRestartTimer}\n        onResumeRecord={onResumeRecord}\n        recordPauseCount={recordPauseCount}\n        timeStamp={timeStamp}\n        dataSign={dataSign}\n      />\n    </RcThemeProvider>,\n  );\n}\n\nexport const CheckCountDownButtonTooltip: StepFunction<any> = () => {\n  const { container } = setup({});\n  const node = container.querySelector<HTMLButtonElement>(\n    '[data-sign=\"CountDown\"]',\n  );\n  expect(node).toBeTruthy;\n  expect(node.title).toBe('Restart timer');\n};\n\nexport const CheckCountDownShows: StepFunction<any> = ({ secondsToPause }) => {\n  const { container } = render(\n    <RcThemeProvider>\n      <CountDown data={secondsToPause} />\n    </RcThemeProvider>,\n  );\n  const node = container.querySelector('[data-sign=\"CountDownText\"]');\n  expect(node.textContent).toEqual(\n    secondsToPause > 99 ? '99+' : secondsToPause,\n  );\n};\n\nexport const CheckCountDownTimer: StepFunction<any> = () => {\n  jest.useFakeTimers('legacy');\n  const { container } = setup({ recordPauseCount: 3 });\n  const node = container.querySelector('[data-sign=\"CountDown\"]');\n  expect(node.textContent).toEqual('3');\n  expect(setInterval).toHaveBeenCalledTimes(1);\n  jest.useRealTimers();\n};\n\nexport const WaitCountDownOver: StepFunction<any> = ({ secondsToPause }) => {\n  jest.useFakeTimers();\n  jest.advanceTimersByTime(secondsToPause * 1000);\n  jest.useRealTimers();\n};\n"],"mappings":"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"}