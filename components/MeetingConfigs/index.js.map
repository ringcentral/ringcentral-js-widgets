{"version":3,"sources":["components/MeetingConfigs/index.tsx"],"names":["MeetingConfig","args","hours","minutes","topic","handlePmiConfirmed","isChangePmiConfirmed","setState","props","init","currentLocale","state","Moment","locale","meeting","showWhen","setTimeout","displayFormat","schedule","startTime","useTimePicker","isAMPM","value","format","nextProps","selectionStart","selectionEnd","setSelectionRange","update","recipientsSection","showTopic","showDuration","showRecurringMeeting","meetingOptionToggle","passwordPlaceholderEnable","audioOptionToggle","enablePersonalMeeting","personalMeetingId","switchUsePersonalMeetingId","isOptionDisabled","usePersonalMeetingId","Object","keys","length","onToggle","type","isToggle","_values","open","inner","close","focus","toggle","isRecurring","meetingType","telephonyOnly","i18n","getString","voIPOnly","both","AUDIO_OPTIONS","key","text","minTime","Date","min","styles","scroll","Component","defaultProps","undefined"],"mappings":"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","sourcesContent":["import 'react-widgets/dist/css/react-widgets.css';\n\nimport React, { Component } from 'react';\n\nimport Moment from 'moment';\nimport momentLocalizer from 'react-widgets-moment';\n\nimport { isRecurringMeeting } from '@ringcentral-integration/commons/modules/Meeting';\nimport { RcMMeetingModel } from '@ringcentral-integration/commons/modules/MeetingV2';\n\nimport i18n from './i18n';\nimport { MeetingDate } from './MeetingDate';\nimport { MeetingDuration as Duration } from './MeetingDuration';\nimport { MeetingIdSection } from './MeetingIdSection';\nimport { MeetingOptions } from './MeetingOptions';\nimport { Topic } from './MeetingTopic';\nimport { RecurringOptions as RecurringMeeting } from './RecurringOptions';\nimport styles from './styles.scss';\nimport { AudioOptions, Video } from './VideoAudioOptions';\n\ninterface MeetingConfigsProps {\n  disabled: boolean;\n  enablePersonalMeeting: boolean;\n  personalMeetingId: string;\n  switchUsePersonalMeetingId: (usePersonalMeetingId: boolean) => any;\n  update: (...args: any[]) => any;\n  init: (...args: any[]) => any;\n  meeting: RcMMeetingModel;\n  currentLocale: string;\n  recipientsSection?: React.ReactNode;\n  showTopic?: boolean;\n  showWhen?: boolean;\n  showDuration?: boolean;\n  showRecurringMeeting?: boolean;\n  meetingOptionToggle?: boolean;\n  passwordPlaceholderEnable?: boolean;\n  audioOptionToggle?: boolean;\n  useTimePicker?: boolean;\n}\n\ninterface MeetingConfigsState {\n  isChangePmiConfirmed: boolean;\n}\n\nclass MeetingConfig extends Component<\n  MeetingConfigsProps,\n  MeetingConfigsState\n> {\n  static defaultProps = {\n    recipientsSection: undefined,\n    showTopic: true,\n    showWhen: true,\n    showDuration: true,\n    showRecurringMeeting: true,\n    meetingOptionToggle: false,\n    passwordPlaceholderEnable: false,\n    audioOptionToggle: false,\n    useTimePicker: false,\n  };\n\n  hours: any;\n  minutes: any;\n  topic: any;\n\n  constructor(args: MeetingConfigsProps) {\n    super(args);\n    const { init, currentLocale } = this.props;\n    init();\n    this.state = {\n      isChangePmiConfirmed: false,\n    };\n    Moment.locale(currentLocale);\n    momentLocalizer();\n  }\n\n  componentDidMount() {\n    const { meeting, showWhen } = this.props;\n    setTimeout(() => {\n      if (showWhen) {\n        this.displayFormat(meeting.schedule.startTime);\n      }\n    });\n  }\n\n  displayFormat(startTime: Date) {\n    const { useTimePicker } = this.props;\n    const isAMPM = useTimePicker ? 'hh' : 'HH';\n    if (this.hours) {\n      this.hours.value = Moment(startTime).format(isAMPM);\n    }\n    if (this.minutes) {\n      this.minutes.value = Moment(startTime).format('mm');\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: MeetingConfigsProps) {\n    const { meeting } = this.props;\n    if (meeting.topic !== nextProps.meeting.topic) {\n      setTimeout(() => {\n        if (!this.topic) return;\n        const selectionStart = this.topic.selectionStart;\n        const selectionEnd = this.topic.selectionEnd;\n        this.topic.value = nextProps.meeting.topic;\n        this.topic.setSelectionRange(selectionStart, selectionEnd);\n      });\n    }\n    if (\n      meeting.schedule &&\n      nextProps.meeting.schedule &&\n      meeting.schedule.startTime !== nextProps.meeting.schedule.startTime\n    ) {\n      this.displayFormat(nextProps.meeting.schedule.startTime);\n    }\n  }\n\n  handlePmiConfirmed = (isChangePmiConfirmed: boolean) => {\n    this.setState({ isChangePmiConfirmed });\n  };\n\n  render() {\n    const { isChangePmiConfirmed } = this.state;\n    const {\n      update,\n      meeting,\n      currentLocale,\n      recipientsSection,\n      showTopic,\n      showWhen,\n      showDuration,\n      showRecurringMeeting,\n      meetingOptionToggle,\n      passwordPlaceholderEnable,\n      audioOptionToggle,\n      useTimePicker,\n      enablePersonalMeeting,\n      personalMeetingId,\n      switchUsePersonalMeetingId,\n    } = this.props;\n\n    const isOptionDisabled =\n      meeting.usePersonalMeetingId && !isChangePmiConfirmed;\n\n    if (!Object.keys(meeting).length) {\n      return null;\n    }\n\n    const onToggle = (type) => {\n      const isToggle = !this[`${type}Blur`];\n      if (isToggle) {\n        if (this[type]._values.open) {\n          this[type].inner.close();\n        } else {\n          this[type].focus();\n          this[type].inner.toggle();\n        }\n      }\n    };\n    const isRecurring = isRecurringMeeting(meeting.meetingType);\n    const telephonyOnly = i18n.getString('telephonyOnly', currentLocale);\n    const voIPOnly = i18n.getString('voIPOnly', currentLocale);\n    const both = i18n.getString('both', currentLocale);\n    const AUDIO_OPTIONS = [\n      {\n        key: 'Phone',\n        text: telephonyOnly,\n      },\n      {\n        key: 'ComputerAudio',\n        text: voIPOnly,\n      },\n      {\n        key: 'Phone_ComputerAudio',\n        text: both,\n      },\n    ];\n    let minTime = {};\n    if (\n      meeting.schedule &&\n      meeting.schedule.startTime &&\n      +new Date(meeting.schedule.startTime) < +new Date()\n    ) {\n      minTime = { min: new Date() };\n    }\n\n    return (\n      <div className={styles.scroll} data-sign=\"meetingConfigsPanel\">\n        {showTopic ? (\n          <Topic\n            that={this}\n            meeting={meeting}\n            update={update}\n            currentLocale={currentLocale}\n          />\n        ) : null}\n        {enablePersonalMeeting && (\n          <MeetingIdSection\n            personalMeetingId={personalMeetingId}\n            currentLocale={currentLocale}\n            meeting={meeting}\n            switchUsePersonalMeetingId={switchUsePersonalMeetingId}\n            handlePmiConfirmed={this.handlePmiConfirmed}\n            isChangePmiConfirmed={isChangePmiConfirmed}\n          />\n        )}\n        {recipientsSection}\n        {showWhen ? (\n          <MeetingDate\n            isRecurring={isRecurring}\n            currentLocale={currentLocale}\n            meeting={meeting}\n            update={update}\n            that={this}\n            onToggle={onToggle}\n            minTime={minTime}\n            useTimePicker={useTimePicker}\n          />\n        ) : null}\n        {showDuration ? (\n          <Duration\n            isRecurring={isRecurring}\n            currentLocale={currentLocale}\n            meeting={meeting}\n            update={update}\n          />\n        ) : null}\n        {showRecurringMeeting ? (\n          <RecurringMeeting\n            isRecurring={isRecurring}\n            currentLocale={currentLocale}\n            meeting={meeting}\n            update={update}\n          />\n        ) : null}\n        <Video\n          currentLocale={currentLocale}\n          meeting={meeting}\n          update={update}\n          disabled={isOptionDisabled}\n        />\n        <AudioOptions\n          data={AUDIO_OPTIONS}\n          currentLocale={currentLocale}\n          meeting={meeting}\n          update={update}\n          audioOptionToggle={audioOptionToggle}\n          disabled={isOptionDisabled}\n        />\n        <MeetingOptions\n          currentLocale={currentLocale}\n          meeting={meeting}\n          that={this}\n          update={update}\n          meetingOptionToggle={meetingOptionToggle}\n          passwordPlaceholderEnable={passwordPlaceholderEnable}\n          disabled={isOptionDisabled}\n        />\n      </div>\n    );\n  }\n}\n\nexport default MeetingConfig;\n"],"file":"index.js"}