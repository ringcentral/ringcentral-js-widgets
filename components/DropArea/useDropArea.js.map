{"version":3,"file":"useDropArea.js","names":["_react","require","_slicedToArray","r","e","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","length","n","l","Symbol","iterator","i","u","f","o","next","Object","done","push","value","isArray","useDropArea","exports","ref","onDrop","options","arguments","undefined","disabled","_useState","useState","_useState2","dragging","setDragging","draggingCountRef","useRef","useEventListener","ev","preventDefault","stopPropagation","current","dataTransfer","items","eventFiles","files"],"sources":["components/DropArea/useDropArea.tsx"],"sourcesContent":["import { RefOrElementOrCallback, useEventListener } from '@ringcentral/juno';\nimport { DragEventHandler, useRef, useState } from 'react';\n\n/**\n * provide you a easy way to support drop files to area\n * that have bug in `react-use`, so we implement that by ourself\n *\n * ref: https://github.com/streamich/react-use/blob/master/src/useDropArea.ts\n * @see https://github.com/streamich/react-use/issues/2368\n */\nexport const useDropArea = (\n  ref: RefOrElementOrCallback,\n  onDrop: (files: FileList) => void,\n  options: { disabled: boolean } = { disabled: false },\n) => {\n  const { disabled } = options;\n  const [dragging, setDragging] = useState(false);\n  const draggingCountRef = useRef(0);\n\n  useEventListener(ref, 'dragenter', ((ev) => {\n    if (disabled) return;\n\n    ev.preventDefault();\n    ev.stopPropagation();\n    draggingCountRef.current++;\n    if (ev.dataTransfer.items && ev.dataTransfer.items.length !== 0) {\n      setDragging(true);\n    }\n  }) as DragEventHandler);\n\n  useEventListener(ref, 'dragleave', ((ev) => {\n    if (disabled) return;\n\n    ev.preventDefault();\n    ev.stopPropagation();\n    draggingCountRef.current--;\n    if (draggingCountRef.current > 0) return;\n    setDragging(false);\n  }) as DragEventHandler);\n\n  useEventListener(ref, 'dragover', ((ev) => {\n    if (disabled) return;\n\n    ev.preventDefault();\n    ev.stopPropagation();\n  }) as DragEventHandler);\n\n  useEventListener(ref, 'drop', ((ev) => {\n    if (disabled) return;\n\n    ev.preventDefault();\n    ev.stopPropagation();\n    setDragging(false);\n    draggingCountRef.current = 0;\n\n    const eventFiles = ev.dataTransfer.files;\n    if (eventFiles && eventFiles.length > 0) {\n      onDrop(eventFiles);\n    }\n  }) as DragEventHandler);\n\n  return dragging;\n};\n"],"mappings":"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","ignoreList":[]}