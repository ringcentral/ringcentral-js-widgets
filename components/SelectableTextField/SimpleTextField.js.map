{"version":3,"file":"SimpleTextField.js","names":["_springUi","require","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","preventFocusChange","exports","preventDefault","useFocusTargetProps","toFocusTarget","useMemo","onClick","_toFocusTarget$curren","current","focus","onMouseDown","getSimpleTextFieldFocusRingStyles","disabled","clsx","SimpleTextField","forwardRef","_ref","ref","label","className","_ref$size","size","startAdornment","endAdornment","inputRefProp","inputRef","action","classes","RootProps","rest","id","useId","useRef","fakeFocusRef","forkedInputRef","useForkRef","focusInputProps","useEventListener","key","_fakeFocusRef$current","blur","isAlphanumericKey","test","startsWith","_inputRef$current","elm","tabIndex","classList","remove","useImperativeHandle","fakeFocus","add","createElement","htmlFor","undefined","autoComplete","displayName"],"sources":["components/SelectableTextField/SimpleTextField.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport {\n  HTMLDataAttribute,\n  useEventListener,\n  useForkRef,\n  useId,\n} from '@ringcentral/spring-ui';\nimport clsx from 'clsx';\nimport React, {\n  forwardRef,\n  Ref,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n} from 'react';\n\nexport type SimpleTextFieldAction = {\n  /**\n   * keep focus inside the text field but not have real input focus for keep focus position and focus ring\n   */\n  fakeFocus: () => void;\n};\n\nexport type SimpleTextFieldProps = Omit<\n  React.InputHTMLAttributes<HTMLInputElement>,\n  'size'\n> & {\n  label?: string;\n  className?: string;\n  size?: 'large' | 'xlarge';\n  disabled?: boolean;\n  startAdornment?: React.ReactNode;\n  endAdornment?: React.ReactNode;\n  inputRef?: React.Ref<any>;\n  action?: Ref<SimpleTextFieldAction>;\n  RootProps?: React.HTMLAttributes<HTMLDivElement> & HTMLDataAttribute;\n  classes?: {\n    label?: string;\n  };\n};\n\nexport const preventFocusChange = (e: any) => {\n  e.preventDefault();\n};\n\nconst useFocusTargetProps = (toFocusTarget: React.RefObject<any>) => {\n  return useMemo(\n    () => ({\n      onClick: () => {\n        toFocusTarget.current?.focus();\n      },\n      onMouseDown: preventFocusChange,\n    }),\n    [toFocusTarget],\n  );\n};\n\nexport const getSimpleTextFieldFocusRingStyles = (disabled?: boolean) =>\n  clsx(\n    'relative overflow-hidden rounded-sui-sm',\n    'focus-ring-inset flex [--sui-focus-ring-color:--sui-color]  sui-color-neutral-b0/20 [--sui-focus-ring-inset-width:1px]',\n    disabled\n      ? 'bg-neutral-b5'\n      : 'hover:bg-neutral-b5 transition-neutral-01-fast hover:sui-color-neutral-b2 [&:has(.focus-visible)]:sui-color-primary-f [&:has(.focus-visible)]:[--sui-focus-ring-inset-width:2px]',\n  );\n\nexport const SimpleTextField = forwardRef<HTMLDivElement, SimpleTextFieldProps>(\n  (\n    {\n      label,\n      className,\n      size = 'xlarge',\n      disabled,\n      startAdornment,\n      endAdornment,\n      inputRef: inputRefProp,\n      action,\n      classes,\n      RootProps,\n      ...rest\n    },\n    ref,\n  ) => {\n    const id = useId();\n\n    const inputRef = useRef<HTMLInputElement>(null);\n    const fakeFocusRef = useRef<HTMLDivElement>(null);\n\n    const forkedInputRef = useForkRef(inputRef, inputRefProp);\n    const focusInputProps = useFocusTargetProps(inputRef);\n\n    useEventListener<KeyboardEvent>(fakeFocusRef, 'keydown', (e) => {\n      if (e.key === 'Escape') {\n        fakeFocusRef.current?.blur();\n        return;\n      }\n\n      const isAlphanumericKey = /^[a-zA-Z0-9]$/.test(e.key);\n      // Check for arrow keys, alphanumeric keys, and enter, space\n      if (\n        e.key.startsWith('Arrow') ||\n        e.key === 'Enter' ||\n        // when be tab, also focus to input that below with not prevent default to move to next element\n        e.key === 'Tab' ||\n        e.key === ' ' ||\n        isAlphanumericKey\n      ) {\n        inputRef.current?.focus();\n      }\n\n      // Prevent the default behavior for all keys except alphanumeric keys\n      if (!isAlphanumericKey && e.key !== 'Tab') {\n        e.preventDefault();\n      }\n    });\n\n    // once blur, make that not able to focus manually\n    useEventListener(fakeFocusRef, 'blur', () => {\n      const elm = fakeFocusRef.current;\n      if (elm) {\n        elm.tabIndex = -1;\n        elm.classList.remove('focus-visible'); // for focus ring\n      }\n    });\n\n    useImperativeHandle(\n      action,\n      () => ({\n        fakeFocus: () => {\n          const elm = fakeFocusRef.current;\n          if (elm) {\n            elm.tabIndex = 0;\n            elm.classList.add('focus-visible'); // for focus ring\n            elm.focus();\n          }\n        },\n      }),\n      [],\n    );\n\n    return (\n      <div\n        ref={ref}\n        className={clsx(\n          'sui-form-field sui-form-field-root sui-form-field-outlined sui-text-field sui-text-field-root grow sui-text-field-outlined outline-none',\n          disabled && 'sui-disabled pointer-events-none',\n          className,\n        )}\n        aria-disabled={disabled}\n        {...RootProps}\n      >\n        <label\n          htmlFor={id}\n          className={clsx(\n            'sui-form-field-label sui-form-field-outlined-label inline-block max-w-fit',\n            classes?.label,\n          )}\n        >\n          {label}\n        </label>\n        <div\n          className={clsx(\n            size === 'large' && 'h-9',\n            size === 'xlarge' && 'h-12',\n            'flex items-center',\n            getSimpleTextFieldFocusRingStyles(disabled),\n          )}\n        >\n          <i className=\"sr-only\" tabIndex={-1} ref={fakeFocusRef} />\n          {startAdornment && (\n            <div className=\"flex items-center pl-3\" {...focusInputProps}>\n              {startAdornment}\n            </div>\n          )}\n          <input\n            tabIndex={disabled ? -1 : undefined}\n            ref={forkedInputRef}\n            disabled={disabled}\n            autoComplete=\"off\"\n            id={id}\n            className={clsx(\n              'sui-text-field-input pl-3 h-full w-full pr-3',\n              disabled && 'text-neutral-b3',\n            )}\n            {...rest}\n          />\n          {endAdornment && (\n            <div className=\"flex items-center pr-3\" {...focusInputProps}>\n              {endAdornment}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  },\n);\n\nSimpleTextField.displayName = 'SimpleTextField';\n"],"mappings":"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","ignoreList":[]}