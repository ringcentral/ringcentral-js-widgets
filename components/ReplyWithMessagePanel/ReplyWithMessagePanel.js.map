{"version":3,"file":"ReplyWithMessagePanel.js","names":["_juno","require","_junoIcon","_react","_interopRequireWildcard","_BackHeaderV","_interopRequireDefault","_i18n","_style","e","__esModule","_getRequireWildcardCache","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","f","o","next","done","push","value","isArray","ReplyWithMessagePanel","_ref","onBackClick","displayCustomMessage","reply","currentLocale","children","options","_useState","useState","_useState2","anchorEl","setAnchorEl","_useState3","_useState4","selectedIndex","setSelectedIndex","_useState5","_useState6","popKey","setPopKey","handleClose","renderMenu","_ref2","index","pattern","createElement","RcMenu","key","concat","open","onClose","anchorOrigin","horizontal","vertical","PaperProps","style","minWidth","map","item","subIndex","TimeOptionItem","onClick","replyWithPattern","time","timeValue","timeUnit","timeUnits","RcListItemText","primary","text","RcListItemSecondaryAction","TimeSendIcon","color","size","symbol","Send","ReplyWithMessagePage","title","i18n","getString","ReplyOptionsList","ReplyOptionItem","selected","event","currentTarget","onMouseOver","SendIcon","StyledCustomMessage","fullWidth","label","placeholder","onKeyDown","_event$target","reg","preventDefault","target","replyWithText","exports"],"sources":["components/ReplyWithMessagePanel/ReplyWithMessagePanel.tsx"],"sourcesContent":["import {\n  RcListItemSecondaryAction,\n  RcListItemText,\n  RcMenu,\n} from '@ringcentral/juno';\nimport { Send } from '@ringcentral/juno-icon';\nimport type { FunctionComponent } from 'react';\nimport React, { useState, MouseEvent } from 'react';\n\nimport type { ReplyWithPattern } from '../../modules/ReplyWithMessageUI';\nimport BackHeader from '../BackHeaderV2';\n\nimport type {\n  OptionsItem,\n  ReplyWithMessageProps,\n} from './ReplyWithMessagePanel.interface';\nimport i18n from './i18n';\nimport {\n  ReplyWithMessagePage,\n  ReplyOptionsList,\n  ReplyOptionItem,\n  SendIcon,\n  StyledCustomMessage,\n  TimeOptionItem,\n  TimeSendIcon,\n} from './style';\n\nexport const ReplyWithMessagePanel: FunctionComponent<\n  ReplyWithMessageProps\n> = ({\n  onBackClick,\n  displayCustomMessage,\n  reply,\n  currentLocale,\n  children,\n  options,\n}) => {\n  const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null);\n  const [selectedIndex, setSelectedIndex] = useState<number | null>(null);\n  const [popKey, setPopKey] = useState<string | null>(null);\n  const handleClose = () => {\n    setAnchorEl(null);\n    setPopKey(null);\n  };\n  const renderMenu = (\n    { options, pattern }: { options: OptionsItem[]; pattern: ReplyWithPattern },\n    index: number,\n  ) => {\n    return (\n      <RcMenu\n        key={`pop-${index}`}\n        open={`pop-${index}` === popKey}\n        onClose={handleClose}\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          horizontal: 'right',\n          vertical: 'top',\n        }}\n        PaperProps={{\n          style: {\n            minWidth: 128,\n          },\n        }}\n      >\n        {options.map((item: any, subIndex: number) => {\n          return (\n            <TimeOptionItem\n              onClick={() => {\n                reply({\n                  replyWithPattern: {\n                    pattern,\n                    time: item.timeValue,\n                    timeUnit: item.timeUnits,\n                  },\n                });\n                onBackClick();\n              }}\n              key={`time-${item.timeValue}-${index}`}\n            >\n              <RcListItemText primary={item.text} />\n              <RcListItemSecondaryAction>\n                <TimeSendIcon\n                  color=\"action.grayLight\"\n                  size=\"small\"\n                  symbol={Send}\n                />\n              </RcListItemSecondaryAction>\n            </TimeOptionItem>\n          );\n        })}\n      </RcMenu>\n    );\n  };\n  return (\n    <ReplyWithMessagePage data-sign=\"replyWithMessagePage\">\n      <BackHeader\n        onBackClick={onBackClick}\n        title={i18n.getString('title', currentLocale)}\n      />\n      <ReplyOptionsList>\n        {options.map((item, index) => {\n          return item.options ? (\n            <div key={item.pattern}>\n              <ReplyOptionItem\n                selected={index === selectedIndex}\n                onClick={(event: React.MouseEvent<HTMLDivElement>) => {\n                  setAnchorEl(event.currentTarget);\n                  setPopKey(`pop-${index}`);\n                }}\n                onMouseOver={() => {\n                  setSelectedIndex(index);\n                }}\n              >\n                <RcListItemText primary={item.text} data-sign={item.text} />\n              </ReplyOptionItem>\n              {renderMenu(item, index)}\n            </div>\n          ) : (\n            <ReplyOptionItem\n              onMouseOver={() => {\n                setSelectedIndex(index);\n              }}\n              key={item.pattern}\n              selected={index === selectedIndex}\n              onClick={() => {\n                reply({\n                  replyWithPattern: {\n                    pattern: item.pattern,\n                  },\n                });\n                onBackClick();\n              }}\n            >\n              <RcListItemText primary={item.text} data-sign={item.text} />\n              <RcListItemSecondaryAction>\n                <SendIcon color=\"action.grayLight\" size=\"small\" symbol={Send} />\n              </RcListItemSecondaryAction>\n            </ReplyOptionItem>\n          );\n        })}\n      </ReplyOptionsList>\n      {displayCustomMessage && (\n        <StyledCustomMessage\n          data-sign=\"customMessage\"\n          fullWidth\n          label={i18n.getString('customMessage', currentLocale)}\n          placeholder={i18n.getString(\n            'customMessagePlaceholder',\n            currentLocale,\n          )}\n          onKeyDown={(event: any) => {\n            const reg = /([^\\s])/g;\n            if (event.key === 'Enter') {\n              event.preventDefault();\n            }\n            if (event.key === 'Enter' && reg.test(event.target?.value)) {\n              reply({ replyWithText: event.target.value });\n              onBackClick();\n            }\n          }}\n        />\n      )}\n      {children}\n    </ReplyWithMessagePage>\n  );\n};\n"],"mappings":"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","ignoreList":[]}