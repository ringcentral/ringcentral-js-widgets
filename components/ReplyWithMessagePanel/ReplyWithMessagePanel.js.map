{"version":3,"file":"ReplyWithMessagePanel.js","names":["_juno","require","_junoIcon","_react","_interopRequireWildcard","_BackHeaderV","_interopRequireDefault","_i18n","_style","e","__esModule","t","WeakMap","r","n","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","ReplyWithMessagePanel","exports","_ref","onBackClick","displayCustomMessage","reply","currentLocale","children","options","_useState","useState","_useState2","anchorEl","setAnchorEl","_useState3","_useState4","selectedIndex","setSelectedIndex","_useState5","_useState6","popKey","setPopKey","handleClose","renderMenu","_ref2","index","pattern","createElement","RcMenu","key","concat","open","onClose","anchorOrigin","horizontal","vertical","PaperProps","style","minWidth","map","item","subIndex","TimeOptionItem","onClick","replyWithPattern","time","timeValue","timeUnit","timeUnits","RcListItemText","primary","text","RcListItemSecondaryAction","TimeSendIcon","color","size","symbol","Send","ReplyWithMessagePage","title","i18n","getString","ReplyOptionsList","ReplyOptionItem","selected","event","currentTarget","onMouseOver","SendIcon","StyledCustomMessage","fullWidth","label","placeholder","onKeyDown","_event$target","reg","preventDefault","target","replyWithText"],"sources":["components/ReplyWithMessagePanel/ReplyWithMessagePanel.tsx"],"sourcesContent":["import {\n  RcListItemSecondaryAction,\n  RcListItemText,\n  RcMenu,\n} from '@ringcentral/juno';\nimport { Send } from '@ringcentral/juno-icon';\nimport type { FunctionComponent } from 'react';\nimport React, { useState, MouseEvent } from 'react';\n\nimport type { ReplyWithPattern } from '../../modules/ReplyWithMessageUI';\nimport BackHeader from '../BackHeaderV2';\n\nimport type {\n  OptionsItem,\n  ReplyWithMessageProps,\n} from './ReplyWithMessagePanel.interface';\nimport i18n from './i18n';\nimport {\n  ReplyWithMessagePage,\n  ReplyOptionsList,\n  ReplyOptionItem,\n  SendIcon,\n  StyledCustomMessage,\n  TimeOptionItem,\n  TimeSendIcon,\n} from './style';\n\nexport const ReplyWithMessagePanel: FunctionComponent<\n  ReplyWithMessageProps\n> = ({\n  onBackClick,\n  displayCustomMessage,\n  reply,\n  currentLocale,\n  children,\n  options,\n}) => {\n  const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null);\n  const [selectedIndex, setSelectedIndex] = useState<number | null>(null);\n  const [popKey, setPopKey] = useState<string | null>(null);\n  const handleClose = () => {\n    setAnchorEl(null);\n    setPopKey(null);\n  };\n  const renderMenu = (\n    { options, pattern }: { options: OptionsItem[]; pattern: ReplyWithPattern },\n    index: number,\n  ) => {\n    return (\n      <RcMenu\n        key={`pop-${index}`}\n        open={`pop-${index}` === popKey}\n        onClose={handleClose}\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          horizontal: 'right',\n          vertical: 'top',\n        }}\n        PaperProps={{\n          style: {\n            minWidth: 128,\n          },\n        }}\n      >\n        {options.map((item: any, subIndex: number) => {\n          return (\n            <TimeOptionItem\n              onClick={() => {\n                reply({\n                  replyWithPattern: {\n                    pattern,\n                    time: item.timeValue,\n                    timeUnit: item.timeUnits,\n                  },\n                });\n                onBackClick();\n              }}\n              key={`time-${item.timeValue}-${index}`}\n            >\n              <RcListItemText primary={item.text} />\n              <RcListItemSecondaryAction>\n                <TimeSendIcon\n                  color=\"action.grayLight\"\n                  size=\"small\"\n                  symbol={Send}\n                />\n              </RcListItemSecondaryAction>\n            </TimeOptionItem>\n          );\n        })}\n      </RcMenu>\n    );\n  };\n  return (\n    <ReplyWithMessagePage data-sign=\"replyWithMessagePage\">\n      <BackHeader\n        onBackClick={onBackClick}\n        title={i18n.getString('title', currentLocale)}\n      />\n      <ReplyOptionsList>\n        {options.map((item, index) => {\n          return item.options ? (\n            <div key={item.pattern}>\n              <ReplyOptionItem\n                selected={index === selectedIndex}\n                onClick={(event: React.MouseEvent<HTMLDivElement>) => {\n                  setAnchorEl(event.currentTarget);\n                  setPopKey(`pop-${index}`);\n                }}\n                onMouseOver={() => {\n                  setSelectedIndex(index);\n                }}\n              >\n                <RcListItemText primary={item.text} data-sign={item.text} />\n              </ReplyOptionItem>\n              {renderMenu(item, index)}\n            </div>\n          ) : (\n            <ReplyOptionItem\n              onMouseOver={() => {\n                setSelectedIndex(index);\n              }}\n              key={item.pattern}\n              selected={index === selectedIndex}\n              onClick={() => {\n                reply({\n                  replyWithPattern: {\n                    pattern: item.pattern,\n                  },\n                });\n                onBackClick();\n              }}\n            >\n              <RcListItemText primary={item.text} data-sign={item.text} />\n              <RcListItemSecondaryAction>\n                <SendIcon color=\"action.grayLight\" size=\"small\" symbol={Send} />\n              </RcListItemSecondaryAction>\n            </ReplyOptionItem>\n          );\n        })}\n      </ReplyOptionsList>\n      {displayCustomMessage && (\n        <StyledCustomMessage\n          data-sign=\"customMessage\"\n          fullWidth\n          label={i18n.getString('customMessage', currentLocale)}\n          placeholder={i18n.getString(\n            'customMessagePlaceholder',\n            currentLocale,\n          )}\n          onKeyDown={(event: any) => {\n            const reg = /([^\\s])/g;\n            if (event.key === 'Enter') {\n              event.preventDefault();\n            }\n            if (event.key === 'Enter' && reg.test(event.target?.value)) {\n              reply({ replyWithText: event.target.value });\n              onBackClick();\n            }\n          }}\n        />\n      )}\n      {children}\n    </ReplyWithMessagePage>\n  );\n};\n"],"mappings":"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","ignoreList":[]}