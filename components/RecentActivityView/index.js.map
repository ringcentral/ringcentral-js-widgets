{"version":3,"sources":["components/RecentActivityView/index.js"],"names":["RecentActivityView","props","onTabChanged","tabName","defaultTab","currentTab","getCurrentTab","getData","setState","state","prevProps","currentContact","id","tabs","tab","cleanUp","currentTabPath","view","find","path","showSpinner","currentPath","goTo","recentActivityView","navigationBar","listView","getCurrentTabPanel","propTypes","bool","isRequired","object","array","string"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;IAEqBA,kB;;;AACnB,8BAAYC,KAAZ,EAAmB;AAAA;;AAAA,8JACXA,KADW;;AAAA,UAwBnBC,YAxBmB,GAwBJ,YAAqC;AAAA,UAApCC,OAAoC,uEAA1B,MAAKF,KAAL,CAAWG,UAAe;;AAClD,UAAMC,aAAa,MAAKC,aAAL,CAAmBH,OAAnB,CAAnB;AACA,UAAIE,UAAJ,EAAgBA,WAAWE,OAAX;AAChB,YAAKC,QAAL,CAAc;AACZH,oBAAYF;AADA,OAAd;AAGD,KA9BkB;;AAEjB,UAAKM,KAAL,GAAa;AACXJ,kBAAYJ,MAAMG;AADP,KAAb;AAFiB;AAKlB;;;;wCAEmB;AAClB;AACA,WAAKF,YAAL;AACD;;;uCAEkBQ,S,EAAW;AAC5B,UAAIA,UAAUC,cAAV,CAAyBC,EAAzB,KAAgC,KAAKX,KAAL,CAAWU,cAAX,CAA0BC,EAA9D,EAAkE;AAChE,aAAKV,YAAL,CAAkB,KAAKO,KAAL,CAAWJ,UAA7B;AACD;AACF;;;2CAEsB;AAAA;AAAA;AAAA;;AAAA;AACrB,wDAAkB,KAAKJ,KAAL,CAAWY,IAA7B,4GAAmC;AAAA,cAAxBC,GAAwB;;AACjCA,cAAIC,OAAJ;AACD;AAHoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAItB;;;yCAUoB;AACnB,UAAMC,iBAAiB,KAAKP,KAAL,CAAWJ,UAAlC;AACA,UAAMA,aAAa,KAAKC,aAAL,CAAmBU,cAAnB,CAAnB;AACA,aAAOX,aAAaA,WAAWY,IAAxB,GAA+B,IAAtC;AACD;;;kCAEaD,c,EAAgB;AAC5B,UAAMH,OAAO,KAAKZ,KAAL,CAAWY,IAAxB;AACA,aAAOA,KAAKK,IAAL,CAAU;AAAA,eAAOJ,IAAIK,IAAJ,KAAaH,cAApB;AAAA,OAAV,CAAP;AACD;;;6BAEQ;AAAA,UACCI,WADD,GACiB,KAAKnB,KADtB,CACCmB,WADD;;AAEP,UAAIA,WAAJ,EAAiB,OAAO,6DAAP;AACjB,UAAMnB,QAAQ;AACZoB,qBAAa,KAAKZ,KAAL,CAAWJ,UADZ;AAEZiB,cAAM,KAAKpB,YAFC;AAGZW,cAAM,KAAKZ,KAAL,CAAWY;AAHL,OAAd;AAKA,aACE;AAAA;AAAA,UAAK,WAAW,iBAAOU,kBAAvB;AACE;AACE,0DADF;AAEE,qBAAW,iBAAOC;AAFpB,WAGMvB,KAHN,EADF;AAME;AAAA;AAAA,YAAK,WAAW,iBAAOwB,QAAvB;AACG,eAAKC,kBAAL;AADH;AANF,OADF;AAYD;;;;;kBAhEkB1B,kB;;;AAmErBA,mBAAmB2B,SAAnB,GAA+B;AAC7BP,eAAa,oBAAUQ,IAAV,CAAeC,UADC;AAE7BlB,kBAAgB,oBAAUmB,MAAV,CAAiBD,UAFJ;AAG7BhB,QAAM,oBAAUkB,KAAV,CAAgBF,UAHO;AAI7BzB,cAAY,oBAAU4B,MAAV,CAAiBH;AAJA,CAA/B","file":"index.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './styles.scss';\nimport NavigationBar from '../NavigationBar';\nimport SpinnerOverlay from '../SpinnerOverlay';\nimport RecentActivityNavigationButton from '../RecentActivityNavigationButton';\n\nexport default class RecentActivityView extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTab: props.defaultTab\n    };\n  }\n\n  componentDidMount() {\n    // Switch to default tab and load all data\n    this.onTabChanged();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.currentContact.id !== this.props.currentContact.id) {\n      this.onTabChanged(this.state.currentTab);\n    }\n  }\n\n  componentWillUnmount() {\n    for (const tab of this.props.tabs) {\n      tab.cleanUp();\n    }\n  }\n\n  onTabChanged = (tabName = this.props.defaultTab) => {\n    const currentTab = this.getCurrentTab(tabName);\n    if (currentTab) currentTab.getData();\n    this.setState({\n      currentTab: tabName\n    });\n  }\n\n  getCurrentTabPanel() {\n    const currentTabPath = this.state.currentTab;\n    const currentTab = this.getCurrentTab(currentTabPath);\n    return currentTab ? currentTab.view : null;\n  }\n\n  getCurrentTab(currentTabPath) {\n    const tabs = this.props.tabs;\n    return tabs.find(tab => tab.path === currentTabPath);\n  }\n\n  render() {\n    const { showSpinner } = this.props;\n    if (showSpinner) return <SpinnerOverlay />;\n    const props = {\n      currentPath: this.state.currentTab,\n      goTo: this.onTabChanged,\n      tabs: this.props.tabs\n    };\n    return (\n      <div className={styles.recentActivityView}>\n        <NavigationBar\n          button={RecentActivityNavigationButton}\n          className={styles.navigationBar}\n          {...props}\n        />\n        <div className={styles.listView}>\n          {this.getCurrentTabPanel()}\n        </div>\n      </div>\n    );\n  }\n}\n\nRecentActivityView.propTypes = {\n  showSpinner: PropTypes.bool.isRequired,\n  currentContact: PropTypes.object.isRequired,\n  tabs: PropTypes.array.isRequired,\n  defaultTab: PropTypes.string.isRequired\n};\n"]}