{"version":3,"sources":["components/InputSelect/InputSelect.tsx"],"names":["InputSelect","props","checkPropsUpdate","debounce","timeout","wrapper","_renderPickList","subjectPicklist","expand","state","styles","select","map","option","i","onSelectChange","primary","listText","subject","onSelectOption","onSave","onChange","setState","then","toggleDropDownList","window","addEventListener","_handleDocumentClick","removeEventListener","e","contains","target","nextProps","required","label","hasError","trim","root","ref","maxLength","endAdornment","length","arrowDownSvg","updateValue","value","time","Component","defaultProps","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport {\n  RcList,\n  RcListItem,\n  RcListItemText,\n  RcTextField,\n} from '@ringcentral/juno';\nimport { ArrowDown2 as arrowDownSvg } from '@ringcentral/juno/icon';\n\nimport { bindDebounce } from '../../lib/bindDebounce';\nimport { bindNextPropsUpdate } from '../../lib/bindNextPropsUpdate';\nimport { CustomArrowButton } from '../Rcui/CustomArrowButton';\nimport styles from './styles.scss';\n\ntype InputSelectProps = {\n  required?: boolean;\n  subjectPicklist?: any[];\n  subject?: string;\n  onChange?: (...args: any[]) => any;\n  onSave?: (...args: any[]) => any;\n  timeout?: number;\n  onSelectOption?: (...args: any[]) => any;\n  label?: string;\n};\ntype InputSelectState = {\n  subject: any;\n  expand: boolean;\n};\nexport default class InputSelect extends Component<\n  InputSelectProps,\n  InputSelectState\n> {\n  static defaultProps: Partial<InputSelectProps> = {\n    required: false,\n    subjectPicklist: [],\n    subject: null,\n    onChange: undefined,\n    onSave: undefined,\n    timeout: 500,\n    onSelectOption: undefined,\n  };\n\n  checkPropsUpdate = bindNextPropsUpdate(this);\n  debounce = bindDebounce(this, this.props.timeout);\n\n  wrapper: HTMLDivElement;\n  constructor(props) {\n    super(props);\n    const { subject } = this.props;\n    this.state = {\n      subject,\n      expand: false,\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.checkPropsUpdate(nextProps, 'subject');\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', this._handleDocumentClick, false);\n  }\n\n  _renderPickList = () => {\n    const { subjectPicklist } = this.props;\n    const { expand } = this.state;\n    if (!expand) {\n      return null;\n    }\n    return (\n      <div className={styles.select}>\n        <RcList>\n          {subjectPicklist.map((option, i) => (\n            <RcListItem\n              key={i}\n              button\n              singleLine\n              onClick={() => this.onSelectChange(option)}\n              data-sign={`match${i}`}\n            >\n              <RcListItemText\n                primary={option}\n                classes={{\n                  primary: styles.listText,\n                }}\n              />\n            </RcListItem>\n          ))}\n        </RcList>\n      </div>\n    );\n  };\n\n  render() {\n    const { subjectPicklist, required, label } = this.props;\n    const { subject = '' } = this.state;\n    const hasError = required && subject.trim() === '';\n    return (\n      <div\n        className={styles.root}\n        ref={(ref) => {\n          this.wrapper = ref;\n        }}\n      >\n        <RcTextField\n          label={label || 'Subject'}\n          data-sign=\"subject\"\n          gutterBottom\n          title={subject}\n          fullWidth\n          clearBtn={false}\n          required={required}\n          value={subject}\n          error={hasError}\n          inputProps={{\n            maxLength: 255,\n          }}\n          InputProps={{\n            endAdornment: subjectPicklist.length > 0 && (\n              <CustomArrowButton\n                symbol={arrowDownSvg}\n                onClick={this.toggleDropDownList}\n                size=\"large\"\n              />\n            ),\n          }}\n          onChange={(e) => this.updateValue(e.target.value, 500)}\n        />\n        {this._renderPickList()}\n      </div>\n    );\n  }\n\n  updateValue(subject, time) {\n    const { onChange, onSave, timeout } = this.props;\n    this.setState({ subject }, () => {\n      this.debounce(() => {\n        const { subject } = this.state;\n        onChange(subject).then(() => {\n          this.debounce(() => onSave(), timeout - time);\n        });\n      }, time);\n    });\n  }\n\n  onSelectChange = (subject) => {\n    const { onSelectOption, onSave, onChange } = this.props;\n    this.setState({ subject }, () => {\n      this.debounce(() => {\n        if (onSelectOption) {\n          onSelectOption();\n        }\n        const { subject } = this.state;\n        onChange(subject).then(() => onSave());\n      }, 0);\n    });\n    this.toggleDropDownList();\n  };\n\n  toggleDropDownList = () => {\n    const { expand } = this.state;\n    if (!expand) {\n      window.addEventListener('click', this._handleDocumentClick, false);\n    } else {\n      window.removeEventListener('click', this._handleDocumentClick, false);\n    }\n    this.setState({ expand: !expand });\n  };\n\n  _handleDocumentClick = (e) => {\n    if (this.wrapper && this.wrapper.contains(e.target)) {\n      return;\n    }\n    this.toggleDropDownList();\n  };\n}\n"],"file":"InputSelect.js"}