{"version":3,"sources":["components/SelectList/ListView/ListViewItem/ListViewItem.tsx"],"names":["ListViewItem","renderFunction","secondaryRenderFunction","startAdornment","filter","valueFunction","value","option","onChange","index","onSelect","selectElm","currentValue","thisValue","isSelected","type","current","getFilterResult","text","i","toLowerCase","indexOf","substring","background","length","styles","listItem","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;;;;;AAqBO,IAAMA,YAAkD,GAAG,SAArDA,YAAqD,OAW5D;AAAA,MAVJC,cAUI,QAVJA,cAUI;AAAA,MATJC,uBASI,QATJA,uBASI;AAAA,MARJC,cAQI,QARJA,cAQI;AAAA,MAPJC,MAOI,QAPJA,MAOI;AAAA,MANJC,aAMI,QANJA,aAMI;AAAA,MALJC,KAKI,QALJA,KAKI;AAAA,MAJJC,MAII,QAJJA,MAII;AAAA,MAHJC,QAGI,QAHJA,QAGI;AAAA,MAFJC,KAEI,QAFJA,KAEI;AAAA,MADJC,QACI,QADJA,QACI;AACJ,MAAMC,SAAS,GAAG,oBAAlB;AACA,MAAMC,YAAY,GAAGP,aAAa,CAACC,KAAD,CAAlC;AACA,MAAMO,SAAS,GAAGR,aAAa,CAACE,MAAD,CAA/B;AACA,MAAMO,UAAU,GAAGD,SAAS,KAAKD,YAAjC;AAJI,MAKIG,IALJ,GAKaR,MALb,CAKIQ,IALJ;AAMJ,wBAAU,YAAM;AACd,QAAID,UAAJ,EAAgB;AACdJ,MAAAA,QAAQ,CAACC,SAAS,CAACK,OAAX,CAAR;AACD;AACF,GAJD,EAIG,CAACF,UAAD,EAAaJ,QAAb,CAJH;;AAKA,MAAMO,eAAe,GAAG,SAAlBA,eAAkB,CAACV,MAAD,EAAY;AAClC,QAAMW,IAAI,GAAGjB,cAAc,CAACM,MAAD,CAA3B;;AACA,QAAIH,MAAM,IAAI,OAAOc,IAAP,KAAgB,QAA9B,EAAwC;AACtC,UAAMC,CAAC,GAAGD,IAAI,CAACE,WAAL,GAAmBC,OAAnB,CAA2BjB,MAAM,CAACgB,WAAP,EAA3B,CAAV;AACA,0BACE,+EACE,8CAAOF,IAAI,CAACI,SAAL,CAAe,CAAf,EAAkBH,CAAlB,CAAP,CADF,eAEE;AAAM,QAAA,KAAK,EAAE;AAAEI,UAAAA,UAAU,EAAE;AAAd;AAAb,SACGL,IAAI,CAACI,SAAL,CAAeH,CAAf,EAAkBA,CAAC,GAAGf,MAAM,CAACoB,MAA7B,CADH,CAFF,eAKE,8CAAON,IAAI,CAACI,SAAL,CAAeH,CAAC,GAAGf,MAAM,CAACoB,MAA1B,CAAP,CALF,CADF;AASD;;AACD,WAAON,IAAP;AACD,GAfD;;AAgBA,sBACE;AAAK,IAAA,GAAG,EAAEP;AAAV,kBACE,gCAAC,gBAAD;AACE,IAAA,MAAM,MADR;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,UAAU,MAHZ;AAIE,IAAA,OAAO,EAAE;AAAA,aAAMH,QAAQ,CAACM,UAAU,GAAG,EAAH,GAAQP,MAAnB,CAAd;AAAA,KAJX;AAKE,gCAAmBE,KAAnB,CALF;AAME,IAAA,SAAS,EAAE,4BAAWgB,mBAAOC,QAAlB,CANb;AAOE,IAAA,QAAQ,EAAEZ;AAPZ,KASGX,cAAc,IAAIA,cAAc,CAACY,IAAD,CATnC,eAUE,gCAAC,oBAAD;AACE,IAAA,OAAO,EAAEE,eAAe,CAACV,MAAD,CAD1B;AAEE,IAAA,SAAS,EAAEL,uBAAuB,CAACK,MAAD;AAFpC,IAVF,CADF,CADF;AAmBD,CAzDM;;;AA0DPP,YAAY,CAAC2B,YAAb,GAA4B;AAC1BpB,EAAAA,MAAM,EAAE,EADkB;AAE1BH,EAAAA,MAAM,EAAE,IAFkB;AAG1BI,EAAAA,QAH0B,sBAGf,CAAE,CAHa;AAI1BL,EAAAA,cAJ0B,4BAIT,CAAE,CAJO;AAK1BD,EAAAA,uBAL0B,qCAKA,CAAE;AALF,CAA5B","sourcesContent":["import { RcListItem, RcListItemText } from '@ringcentral/juno';\nimport classnames from 'classnames';\nimport React, { FunctionComponent, useEffect, useRef } from 'react';\n\nimport styles from './styles.scss';\n\ntype OptionData = {\n  type?: string;\n  [key: string]: any;\n};\n\nexport interface ListViewItemProps {\n  option?: OptionData;\n  value: any;\n  index: number;\n  /** the filter string with select list */\n  filter?: string;\n  onChange?: (option: OptionData) => any;\n  valueFunction: (value: any) => any;\n  startAdornment?: (type: string) => any;\n  renderFunction: (option: OptionData) => React.ReactNode;\n  secondaryRenderFunction?: (option: OptionData) => any;\n  onSelect: (elm?: HTMLDivElement) => any;\n}\n\nexport const ListViewItem: FunctionComponent<ListViewItemProps> = ({\n  renderFunction,\n  secondaryRenderFunction,\n  startAdornment,\n  filter,\n  valueFunction,\n  value,\n  option,\n  onChange,\n  index,\n  onSelect,\n}) => {\n  const selectElm = useRef<HTMLDivElement>();\n  const currentValue = valueFunction(value);\n  const thisValue = valueFunction(option);\n  const isSelected = thisValue === currentValue;\n  const { type } = option;\n  useEffect(() => {\n    if (isSelected) {\n      onSelect(selectElm.current);\n    }\n  }, [isSelected, onSelect]);\n  const getFilterResult = (option) => {\n    const text = renderFunction(option);\n    if (filter && typeof text === 'string') {\n      const i = text.toLowerCase().indexOf(filter.toLowerCase());\n      return (\n        <>\n          <span>{text.substring(0, i)}</span>\n          <span style={{ background: '#ffdfb1' }}>\n            {text.substring(i, i + filter.length)}\n          </span>\n          <span>{text.substring(i + filter.length)}</span>\n        </>\n      );\n    }\n    return text;\n  };\n  return (\n    <div ref={selectElm}>\n      <RcListItem\n        button\n        size=\"small\"\n        singleLine\n        onClick={() => onChange(isSelected ? {} : option)}\n        data-sign={`match${index}`}\n        className={classnames(styles.listItem)}\n        selected={isSelected}\n      >\n        {startAdornment && startAdornment(type)}\n        <RcListItemText\n          primary={getFilterResult(option)}\n          secondary={secondaryRenderFunction(option)}\n        />\n      </RcListItem>\n    </div>\n  );\n};\nListViewItem.defaultProps = {\n  option: {},\n  filter: null,\n  onChange() {},\n  startAdornment() {},\n  secondaryRenderFunction() {},\n};\n"],"file":"ListViewItem.js"}