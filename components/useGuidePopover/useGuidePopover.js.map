{"version":3,"file":"useGuidePopover.js","names":["_springUi","require","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","_extends","assign","bind","arguments","apply","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","defaultActiveClasses","rightTopHintClasses","GuidePopover","exports","_ref","children","anchorRef","popoverOpen","createElement","Fragment","Portal","Backdrop","className","Popper","anchorEl","current","arrowHeight","padding","offset","_ref2","arrowRef","arrowStyle","PopperPaper","GuideAnchor","forwardRef","_ref3","ref","showHint","_ref3$activeClassName","activeClassName","_ref3$hintClassName","hintClassName","_ref3$animateHint","animateHint","closePopover","rest","useEffect","clsx","useGuidePopover","options","_options$scrollIntoVi","scrollIntoView","_options$scrollIntoVi2","scrollIntoViewOptions","behavior","block","inline","useRef","_useState","useState","_useState2","setPopoverOpen","openPopover","useCallback","elm","isInsideViewport","isElementInsideViewport","open","close","useGuidePopoverManager","popovers","undefined","_options$autoStart","autoStart","_options$initialStep","initialStep","_useState3","_useState4","currentStep","setCurrentStep","totalSteps","isFirst","isLast","isActive","goToStep","step","forEach","popover","previous","start","finish","reset","rect","getBoundingClientRect","windowHeight","window","innerHeight","document","documentElement","clientHeight","windowWidth","innerWidth","clientWidth","isVisible","top","left","bottom","right"],"sources":["components/useGuidePopover/useGuidePopover.tsx"],"sourcesContent":["import { Backdrop, Popper, PopperPaper, Portal } from '@ringcentral/spring-ui';\nimport clsx from 'clsx';\nimport React, {\n  forwardRef,\n  FunctionComponent,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\n\nexport interface UseGuidePopoverOptions {\n  /**\n   * Whether to scroll the anchor element into view if it's not inside the viewport.\n   * @default 'visible'\n   *\n   * - 'visible': Scroll the anchor element into view if it's not inside the viewport.\n   * - 'auto': Scroll the anchor element into view.\n   * - 'false': Do not scroll the anchor element into view.\n   */\n  scrollIntoView?: 'visible' | boolean;\n  /**\n   * Options for the scrollIntoView method.\n   */\n  scrollIntoViewOptions?: ScrollIntoViewOptions;\n}\n\nexport type GuidePopoverInstance = ReturnType<typeof useGuidePopover>;\n\nconst defaultActiveClasses =\n  'h-full rounded bg-neutral-base z-tooltip pointer-events-none';\n\nconst rightTopHintClasses =\n  'absolute right-1.5 top-1.5 size-2 rounded-full bg-primary-f pointer-events-none';\n\ntype GuidePopoverProps = React.PropsWithChildren<{\n  anchorRef: React.RefObject<HTMLDivElement>;\n  popoverOpen: boolean;\n}>;\n\n/**\n * Component that renders the popover content.\n * Only renders when popover is open.\n */\nexport const GuidePopover: FunctionComponent<GuidePopoverProps> = ({\n  children,\n  anchorRef,\n  popoverOpen,\n}) => {\n  if (!popoverOpen) return null;\n\n  return (\n    <>\n      <Portal>\n        <Backdrop className=\"z-0\" />\n      </Portal>\n      <Popper\n        anchorEl={() => anchorRef.current}\n        data-sign=\"guidePopover\"\n        className=\"z-modal max-w-[calc(100%-32px)]\"\n        arrowHeight={8}\n        padding={16}\n        offset={8}\n      >\n        {({ arrowRef, arrowStyle }) => (\n          <PopperPaper\n            arrowRef={arrowRef}\n            arrowStyle={arrowStyle}\n            className=\"rounded-md bg-neutral-base p-3 max-w-[280px]\"\n          >\n            {children}\n          </PopperPaper>\n        )}\n      </Popper>\n    </>\n  );\n};\n\ntype GuideAnchorProps = React.PropsWithChildren<{\n  popoverOpen: boolean;\n  /**\n   * Whether to show the hint indicator (ringing animation) on the anchor element.\n   * Set to `true` when the user hasn't seen the popover yet to guide them.\n   * @default false\n   */\n  showHint?: boolean;\n  /**\n   * Whether to animate the hint indicator (ringing animation).\n   * @default true\n   */\n  animateHint?: boolean;\n  className?: string;\n  activeClassName?: string;\n  hintClassName?: string;\n  closePopover: () => void;\n}>;\n\n/**\n * Component that wraps the anchor element.\n * Shows a ringing animation indicator in the top-right corner when `showHint` is true.\n * Applies active styles when popover is open.\n */\nexport const GuideAnchor = forwardRef<HTMLDivElement, GuideAnchorProps>(\n  (\n    {\n      children,\n      showHint,\n      popoverOpen,\n      className,\n      activeClassName = defaultActiveClasses,\n      hintClassName = rightTopHintClasses,\n      animateHint = true,\n      closePopover,\n      ...rest\n    },\n    ref,\n  ) => {\n    useEffect(() => {\n      return () => {\n        closePopover();\n      };\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n      <div\n        ref={ref}\n        {...rest}\n        className={clsx(\n          className,\n          clsx(showHint && 'relative', popoverOpen && activeClassName),\n        )}\n      >\n        {children}\n        {showHint && (\n          <>\n            <div className={hintClassName} />\n            {animateHint && (\n              <div className={clsx(hintClassName, 'animate-ping')} />\n            )}\n          </>\n        )}\n      </div>\n    );\n  },\n);\n\n/**\n * Hook for creating a guide popover with ringing animation indicator.\n *\n * This hook is designed to guide users through new features or actions.\n * It provides:\n * - A popover component that displays instructional content\n * - An anchor wrapper component that shows a ringing animation hint when the user hasn't seen the popover\n * - State management for opening/closing the popover\n *\n * @param options - Configuration options for the guide popover\n *\n * @returns An object containing:\n * - `anchorRef`: Ref for the anchor element (used internally)\n * - `popoverOpen`: Boolean indicating if popover is open\n * - `open`: Function to open the popover\n * - `close`: Function to close the popover\n *\n * @example\n * ```tsx\n * import { GuideAnchor, GuidePopover, useGuidePopover } from '@ringcentral-integration/next-widgets/components';\n *\n * const { anchorRef, popoverOpen, open, close } = useGuidePopover({});\n *\n * const handleClick = () => {\n *   if (!hasSeenPopover) {\n *     open();\n *     markAsSeen();\n *   } else {\n *     // Perform actual action\n *   }\n * };\n *\n * return (\n *   <>\n *     <GuideAnchor\n *       ref={anchorRef}\n *       popoverOpen={popoverOpen}\n *       closePopover={close}\n *       showHint={!hasSeenPopover}\n *     >\n *       <IconButton onClick={handleClick} />\n *     </GuideAnchor>\n *     <GuidePopover anchorRef={anchorRef} popoverOpen={popoverOpen}>\n *       <div>\n *         <h3>Guide Title</h3>\n *         <p>Guide description</p>\n *       </div>\n *       <Button onClick={close}>Got it</Button>\n *     </GuidePopover>\n *   </>\n * );\n * ```\n */\nexport const useGuidePopover = (options: UseGuidePopoverOptions) => {\n  const {\n    scrollIntoView = 'visible',\n    scrollIntoViewOptions = {\n      behavior: 'smooth',\n      block: 'center',\n      inline: 'nearest',\n    },\n  } = options;\n  const anchorRef = useRef<HTMLDivElement>(null);\n  const [popoverOpen, setPopoverOpen] = useState(false);\n\n  const openPopover = useCallback(() => {\n    const elm = anchorRef.current;\n\n    if (scrollIntoView && elm) {\n      if (scrollIntoView === true) {\n        elm.scrollIntoView(scrollIntoViewOptions);\n      } else {\n        const isInsideViewport = isElementInsideViewport(elm);\n\n        if (!isInsideViewport) {\n          elm.scrollIntoView(scrollIntoViewOptions);\n        }\n      }\n    }\n\n    setPopoverOpen(true);\n  }, [scrollIntoView, scrollIntoViewOptions]);\n\n  const closePopover = useCallback(() => {\n    setPopoverOpen(false);\n  }, []);\n\n  return {\n    anchorRef,\n    popoverOpen,\n    open: openPopover,\n    close: closePopover,\n  };\n};\n\nexport interface UseGuidePopoverManagerOptions {\n  /**\n   * Whether to automatically start the guide sequence.\n   * @default false\n   */\n  autoStart?: boolean;\n  /**\n   * Initial step index to start from.\n   * @default 0\n   */\n  initialStep?: number;\n}\n\n/**\n * Hook for managing multiple guide popovers in a step-by-step sequence.\n *\n * This hook coordinates multiple guide popovers to create a multi-step guide experience.\n * It manages which popover should be open at any given time and provides navigation\n * methods to move between steps.\n *\n * @param popovers - Array of guide popover instances returned from `useGuidePopover`\n * @param options - Configuration options for the manager\n * @param options.autoStart - Whether to automatically start the guide sequence\n * @param options.initialStep - Initial step index to start from\n *\n * @returns An object containing:\n * - `currentStep`: Current step index (0-based, -1 if not started)\n * - `totalSteps`: Total number of steps\n * - `isFirst`: Whether current step is the first step\n * - `isLast`: Whether current step is the last step\n * - `isActive`: Whether the guide sequence is active (any step is open)\n * - `next`: Function to go to the next step\n * - `previous`: Function to go to the previous step\n * - `goToStep`: Function to go to a specific step index\n * - `start`: Function to start the guide sequence from the first step\n * - `finish`: Function to finish the guide sequence and close all popovers\n * - `reset`: Function to reset the guide sequence to initial state\n *\n * @example\n * ```tsx\n * import { GuideAnchor, GuidePopover, useGuidePopover, useGuidePopoverManager } from '@ringcentral-integration/next-widgets/components';\n *\n * const guidePopover1 = useGuidePopover({});\n * const guidePopover2 = useGuidePopover({});\n * const guidePopover3 = useGuidePopover({});\n *\n * const guidePopoverManager = useGuidePopoverManager([\n *   guidePopover1,\n *   guidePopover2,\n *   guidePopover3,\n * ]);\n *\n * const handleNext = () => {\n *   if (guidePopoverManager.isLast) {\n *     guidePopoverManager.finish();\n *   } else {\n *     guidePopoverManager.next();\n *   }\n * };\n *\n * return (\n *   <>\n *     <GuideAnchor\n *       ref={guidePopover1.anchorRef}\n *       popoverOpen={guidePopover1.popoverOpen}\n *       closePopover={guidePopover1.close}\n *       showHint={true}\n *     >\n *       <IconButton onClick={() => guidePopoverManager.start()} />\n *     </GuideAnchor>\n *     <GuidePopover\n *       anchorRef={guidePopover1.anchorRef}\n *       popoverOpen={guidePopover1.popoverOpen}\n *     >\n *       <div>Step 1 content</div>\n *       <Button onClick={handleNext}>Next</Button>\n *     </GuidePopover>\n *\n *     <GuideAnchor\n *       ref={guidePopover2.anchorRef}\n *       popoverOpen={guidePopover2.popoverOpen}\n *       closePopover={guidePopover2.close}\n *       showHint={false}\n *     >\n *       <IconButton />\n *     </GuideAnchor>\n *     <GuidePopover\n *       anchorRef={guidePopover2.anchorRef}\n *       popoverOpen={guidePopover2.popoverOpen}\n *     >\n *       <div>Step 2 content</div>\n *       <Button onClick={handleNext}>Next</Button>\n *     </GuidePopover>\n *\n *     <GuideAnchor\n *       ref={guidePopover3.anchorRef}\n *       popoverOpen={guidePopover3.popoverOpen}\n *       closePopover={guidePopover3.close}\n *       showHint={false}\n *     >\n *       <IconButton />\n *     </GuideAnchor>\n *     <GuidePopover\n *       anchorRef={guidePopover3.anchorRef}\n *       popoverOpen={guidePopover3.popoverOpen}\n *     >\n *       <div>Step 3 content</div>\n *       <Button onClick={guidePopoverManager.finish}>Finish</Button>\n *     </GuidePopover>\n *   </>\n * );\n * ```\n */\nexport const useGuidePopoverManager = (\n  popovers: GuidePopoverInstance[],\n  options: UseGuidePopoverManagerOptions = {},\n) => {\n  const { autoStart = false, initialStep = 0 } = options;\n  const [currentStep, setCurrentStep] = useState(-1);\n  const totalSteps = popovers.length;\n\n  const isFirst = currentStep === 0;\n  const isLast = currentStep === totalSteps - 1;\n  const isActive = currentStep >= 0;\n\n  /**\n   * Opens the popover at the specified step and closes all others.\n   */\n  const goToStep = useCallback(\n    (step: number) => {\n      if (step < 0 || step >= totalSteps) {\n        return;\n      }\n\n      // Close all popovers first\n      popovers.forEach((popover) => {\n        popover.close();\n      });\n\n      // Open the popover at the target step\n      if (step >= 0 && step < totalSteps) {\n        setCurrentStep(step);\n        popovers[step].open();\n      }\n    },\n    [popovers, totalSteps],\n  );\n\n  /**\n   * Goes to the next step.\n   */\n  const next = useCallback(() => {\n    if (currentStep < totalSteps - 1) {\n      goToStep(currentStep + 1);\n    }\n  }, [currentStep, totalSteps, goToStep]);\n\n  /**\n   * Goes to the previous step.\n   */\n  const previous = useCallback(() => {\n    if (currentStep > 0) {\n      goToStep(currentStep - 1);\n    }\n  }, [currentStep, goToStep]);\n\n  /**\n   * Starts the guide sequence from the first step.\n   */\n  const start = useCallback(() => {\n    goToStep(initialStep);\n  }, [goToStep, initialStep]);\n\n  /**\n   * Finishes the guide sequence and closes all popovers.\n   */\n  const finish = useCallback(() => {\n    popovers.forEach((popover) => {\n      popover.close();\n    });\n    setCurrentStep(-1);\n  }, [popovers]);\n\n  /**\n   * Resets the guide sequence to initial state.\n   */\n  const reset = useCallback(() => {\n    finish();\n    if (autoStart) {\n      start();\n    }\n  }, [finish, autoStart, start]);\n\n  // Auto-start if enabled\n  useEffect(() => {\n    if (autoStart && currentStep === -1) {\n      start();\n    }\n  }, [autoStart, currentStep, start]);\n\n  return {\n    currentStep,\n    totalSteps,\n    isFirst,\n    isLast,\n    isActive,\n    next,\n    previous,\n    goToStep,\n    start,\n    finish,\n    reset,\n  };\n};\n\nexport function isElementInsideViewport(elm: HTMLDivElement) {\n  const rect = elm.getBoundingClientRect();\n  const windowHeight =\n    window.innerHeight || document.documentElement.clientHeight;\n  const windowWidth = window.innerWidth || document.documentElement.clientWidth;\n\n  const isVisible =\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= windowHeight &&\n    rect.right <= windowWidth;\n\n  return isVisible;\n}\n"],"mappings":"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","ignoreList":[]}