{"version":3,"sources":["components/DropdownSelect/index.js"],"names":["DropdownSelect","props","toggleShowDropdown","e","state","open","window","addEventListener","_handleDocumentClick","removeEventListener","stopPropagation","disabled","onToggle","setState","preState","onChange","option","idx","placeholder","mounted","wrapper","contains","target","dropdownMenu","prevProps","prevState","renderDropdownMenu","menu","buttomPosition","getBoundingClientRect","_","valueFunction","renderFunction","value","parseInt","renderValue","selectedOption","defaultTitle","titleEnabled","renderTitle","options","ellipsis","dropdown","ref","map","currentValue","className","dropdownItem","selected","display","dropdownAlign","reference","label","iconClassName","icon","iconUp","containerClassName","root","noPadding","button","selectedValue","arrow","propTypes","func","string","bool","arrayOf","any","isRequired","oneOf","defaultProps","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport styles from './styles.scss';\nimport dynamicsFont from '../../assets/DynamicsFont/DynamicsFont.scss';\n\nclass DropdownSelect extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n    };\n  }\n  toggleShowDropdown = (e) => {\n    if (!this.state.open) {\n      window.addEventListener('click', this._handleDocumentClick, false);\n    } else {\n      window.removeEventListener('click', this._handleDocumentClick, false);\n    }\n    if (e && this.props.stopPropagation) {\n      e.stopPropagation();\n    }\n    if (this.props.disabled) {\n      return;\n    }\n    this.props.onToggle(!this.state.open);\n    this.setState(preState => ({\n      open: !preState.open,\n    }));\n  }\n\n  onChange = (e, option, idx) => {\n    e.stopPropagation();\n    if (this.props.placeholder && idx === 0) {\n      this.toggleShowDropdown();\n      return;\n    }\n    this.props.onChange(option, idx);\n    this.toggleShowDropdown();\n  };\n\n  _handleDocumentClick = (e) => {\n    if (!this.mounted) {\n      return;\n    }\n    if (this.wrapper && this.wrapper.contains(e.target)) {\n      return;\n    }\n    if (this.dropdownMenu && this.dropdownMenu.contains(e.target)) {\n      return;\n    }\n    this.props.onToggle(false);\n    this.setState({\n      open: false,\n    });\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.open !== this.state.open) {\n      if (this.props.renderDropdownMenu && this.wrapper) {\n        const menu = this.renderDropdownMenu();\n        const buttomPosition = this.wrapper.getBoundingClientRect();\n        this.props.renderDropdownMenu(menu, this.state.open, buttomPosition);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    window.removeEventListener('click', this._handleDocumentClick, false);\n  }\n\n  valueFunction(_, idx) {\n    if (this.props.placeholder) {\n      idx = `${idx - 1}`;\n    }\n    return this.props.valueFunction(_, idx);\n  }\n\n  renderFunction(option, idx) {\n    if (this.props.placeholder) {\n      return idx === 0 ? this.props.placeholder : this.props.renderFunction(option, idx);\n    }\n    return this.props.renderFunction(option, idx);\n  }\n\n  renderValue(value) {\n    if (this.props.placeholder) {\n      value = parseInt(value, 10) + 1;\n      return value === 0 ? this.props.placeholder : this.props.renderValue(value - 1);\n    }\n    return this.props.renderValue(value);\n  }\n\n  renderTitle(selectedOption, defaultTitle) {\n    if (this.props.titleEnabled) {\n      return typeof this.props.renderTitle === 'function' ?\n        this.props.renderTitle(selectedOption) : defaultTitle;\n    }\n    return '';\n  }\n\n  renderDropdownMenu() {\n    let options;\n    const { placeholder, ellipsis } = this.props;\n    if (placeholder) {\n      options = [\n        {},\n        ...this.props.options,\n      ];\n    } else {\n      options = this.props.options;\n    }\n    return (\n      <ul\n        className={classnames(styles.dropdown,\n          placeholder && styles.placeholder)}\n        ref={(ref) => { this.dropdownMenu = ref; }}>\n        {\n          options.map((option, idx) => {\n            const currentValue = this.valueFunction(option, idx);\n            const className = classnames(\n              styles.dropdownItem,\n              this.props.value === currentValue ? styles.selected : null,\n            );\n            const display = this.renderFunction(option, idx);\n            return (\n              <li\n                key={currentValue}\n                className={classnames(className,\n                  styles[this.props.dropdownAlign],\n                  ellipsis && styles.ellipsis,\n                  placeholder && styles.placeholder)}\n                value={currentValue}\n                title={this.renderTitle(option, display)}\n                onClick={e => this.onChange(e, option, idx)}\n              >\n                {display}\n              </li>\n            );\n          })\n        }\n      </ul>\n    );\n  }\n\n  render() {\n    const ellipsis = this.props.ellipsis;\n    const reference = this.props.reference;\n    const label = this.props.label ?\n      (\n        <label>\n          {this.props.label}\n        </label>\n      ) : null;\n    const iconClassName = classnames(\n      styles.icon,\n      this.state.open ? styles.iconUp : null,\n      this.props.iconClassName,\n    );\n    const containerClassName = classnames(\n      styles.root,\n      this.props.className,\n      this.props.disabled ? styles.disabled : null,\n      this.state.open ? styles.open : null,\n      this.props.noPadding ? styles.noPadding : null,\n    );\n    const dropdownMenu = this.props.renderDropdownMenu ?\n      null :\n      this.renderDropdownMenu();\n\n    const renderValue = this.renderValue(this.props.value);\n    return (\n      <div\n        className={containerClassName}\n        ref={(ref) => {\n          if (reference) reference(ref);\n          this.wrapper = ref;\n        }}\n      >\n        <button\n          type=\"button\"\n          className={styles.button}\n          onClick={this.toggleShowDropdown}\n          title={this.renderTitle(this.props.options[this.props.value], renderValue)}>\n          {label}\n          <span\n            className={classnames(\n              styles.selectedValue,\n              ellipsis && styles.ellipsis\n            )}>\n            {renderValue}\n          </span>\n          <span className={iconClassName}>\n            <i className={dynamicsFont.arrow} />\n          </span>\n        </button>\n        {dropdownMenu}\n      </div>\n    );\n  }\n}\n\nDropdownSelect.propTypes = {\n  reference: PropTypes.func,\n  className: PropTypes.string,\n  iconClassName: PropTypes.string,\n  value: PropTypes.string,\n  label: PropTypes.string,\n  onChange: PropTypes.func,\n  disabled: PropTypes.bool,\n  options: PropTypes.arrayOf(PropTypes.any).isRequired,\n  valueFunction: PropTypes.func,\n  renderFunction: PropTypes.func,\n  renderValue: PropTypes.func,\n  renderDropdownMenu: PropTypes.func,\n  renderTitle: PropTypes.func,\n  titleEnabled: PropTypes.bool,\n  dropdownAlign: PropTypes.oneOf(['left', 'center', 'right']),\n  stopPropagation: PropTypes.bool,\n  placeholder: PropTypes.string,\n  ellipsis: PropTypes.bool,\n  noPadding: PropTypes.bool,\n  onToggle: PropTypes.func\n};\n\nDropdownSelect.defaultProps = {\n  reference: undefined,\n  className: null,\n  iconClassName: null,\n  value: null,\n  label: null,\n  onChange: undefined,\n  disabled: false,\n  renderDropdownMenu: undefined,\n  renderTitle: undefined,\n  valueFunction: (_, idx) => idx,\n  renderFunction: option => option,\n  renderValue: option => option,\n  dropdownAlign: 'center',\n  titleEnabled: undefined,\n  stopPropagation: false,\n  placeholder: undefined,\n  ellipsis: true,\n  noPadding: false,\n  onToggle: () => {}\n};\n\nexport default DropdownSelect;\n"]}