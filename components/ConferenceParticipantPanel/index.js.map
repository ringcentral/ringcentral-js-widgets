{"version":3,"sources":["components/ConferenceParticipantPanel/index.tsx"],"names":["ParticipantsContainer","props","state","showModal","detail","formatPrticipants","onRemoveBtnClick","bind","onCancel","onCancelNoAfter","participants","formatPhone","map","participant","partyNumber","setState","afterOnRemoveBtnClick","afterOnCancel","nextProps","find","id","currentLocale","removeFunc","onBackButtonClick","backHeader","styles","header","i18n","getString","root","participantsListContainer","participantsCount","length","participantsList","avatarUrl","partyName","calleeType","displayText","calleeTypes","contacts","then","Component","defaultProps","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport calleeTypes from '@ringcentral-integration/commons/enums/calleeTypes';\n\nimport BackButton from '../BackButton';\nimport BackHeader from '../BackHeader';\nimport ConfirmRemoveModal from './ConfirmRemoveModal';\nimport i18n from './i18n';\nimport ParticipantItem from './ParticipantItem';\nimport styles from './styles.scss';\n\ntype ParticipantsContainerProps = {\n  currentLocale: string;\n  removeFunc?: (...args: any[]) => any;\n  participants: object[];\n  onBackButtonClick?: (...args: any[]) => any;\n  formatPhone?: (...args: any[]) => any;\n  afterOnCancel?: (...args: any[]) => any;\n  afterOnRemoveBtnClick?: (...args: any[]) => any;\n};\ntype ParticipantsContainerState = (() => {\n  detail: any;\n  showModal: boolean;\n}) & { showModal: boolean; detail: null } & {\n  showModal: boolean;\n  detail: null;\n};\nclass ParticipantsContainer extends Component<\n  ParticipantsContainerProps,\n  ParticipantsContainerState\n> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false,\n      detail: null,\n    };\n    this.formatPrticipants(props);\n    this.onRemoveBtnClick = this.onRemoveBtnClick.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n    this.onCancelNoAfter = this.onCancelNoAfter.bind(this);\n  }\n  formatPrticipants(props = this.props) {\n    const { participants, formatPhone } = props;\n    participants.map((participant) => {\n      participant.partyNumber = formatPhone(participant.partyNumber);\n      return participant;\n    });\n  }\n  onRemoveBtnClick(participant) {\n    this.setState(() => ({\n      detail: participant,\n      showModal: true,\n    }));\n    this.props.afterOnRemoveBtnClick();\n  }\n  onCancel() {\n    this.onCancelNoAfter();\n    this.props.afterOnCancel();\n  }\n  // onCancel without track\n  onCancelNoAfter() {\n    this.setState({\n      showModal: false,\n      detail: null,\n    });\n  }\n  componentWillReceiveProps(nextProps) {\n    this.formatPrticipants(nextProps);\n    if (\n      this.state.showModal &&\n      !nextProps.participants.find(\n        (participant) => participant.id === this.state.detail.id,\n      )\n    ) {\n      this.onCancelNoAfter();\n    }\n  }\n  render() {\n    const { participants, currentLocale, removeFunc, onBackButtonClick } =\n      this.props;\n    const { detail, showModal } = this.state;\n    const backHeader = (\n      <BackHeader\n        className={styles.header}\n        onBackClick={onBackButtonClick}\n        backButton={\n          <BackButton label={i18n.getString('conferenceCall', currentLocale)} />\n        }\n      />\n    );\n    return (\n      <div className={styles.root}>\n        {backHeader}\n        <div className={styles.participantsListContainer}>\n          <div className={styles.participantsCount}>\n            {participants.length === 1\n              ? `${participants.length} ${i18n.getString(\n                  'participant',\n                  currentLocale,\n                )}`\n              : `${participants.length} ${i18n.getString(\n                  'participants',\n                  currentLocale,\n                )}`}\n          </div>\n          <div className={styles.participantsList}>\n            {participants.map((participant) => {\n              const { id, avatarUrl, partyName, partyNumber, calleeType } =\n                participant;\n              let displayText =\n                partyNumber || i18n.getString('unknownNumber', currentLocale);\n              if (partyName && calleeType === calleeTypes.contacts) {\n                // means that matched a contact\n                displayText = partyName;\n              }\n              return (\n                <ParticipantItem\n                  key={id}\n                  avatarUrl={avatarUrl}\n                  detail={displayText}\n                  currentLocale={currentLocale}\n                  onRemove={() => this.onRemoveBtnClick(participant)}\n                />\n              );\n            })}\n          </div>\n        </div>\n        <ConfirmRemoveModal\n          show={showModal}\n          detail={detail}\n          onCancel={this.onCancel}\n          currentLocale={currentLocale}\n          onRemove={() =>\n            removeFunc(detail && detail.id).then(this.onCancelNoAfter)\n          }\n        />\n      </div>\n    );\n  }\n}\nParticipantsContainer.defaultProps = {\n  removeFunc: (i) => i,\n  onBackButtonClick: (i) => i,\n  formatPhone: (i) => i,\n  afterOnCancel: (i) => i,\n  afterOnRemoveBtnClick: (i) => i,\n};\nexport default ParticipantsContainer;\n"],"file":"index.js"}