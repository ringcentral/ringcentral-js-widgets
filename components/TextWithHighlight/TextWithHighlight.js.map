{"version":3,"file":"TextWithHighlight.js","names":["_clsx","_interopRequireDefault","require","_react","_interopRequireWildcard","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","indexesOf","exports","string","highLightText","match","indexes","regex","RegExp","replace","exec","push","index","mergeOverlappingRanges","ranges","sorted","sort","a","b","merged","current","next","currentEnd","nextEnd","Math","max","TextWithHighlight","_ref","text","classes","rest","matches","useMemo","Array","isArray","map","item","flatMatches","flatMap","_ref2","createElement","title","_ref3","_flatMatches","startIndex","endIndex","nextStartIndex","Fragment","key","substring","className","clsx","highlight","undefined"],"sources":["components/TextWithHighlight/TextWithHighlight.tsx"],"sourcesContent":["import clsx from 'clsx';\nimport type { FunctionComponent } from 'react';\nimport React, { Fragment, useMemo } from 'react';\n\nexport const indexesOf = (string: string, highLightText: string) => {\n  if (highLightText.length === 0) return [];\n  let match;\n  const indexes = [];\n  const regex = new RegExp(\n    highLightText.replace(/[-\\\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'),\n    'gi',\n  );\n  // eslint-disable-next-line no-cond-assign\n  while ((match = regex.exec(string)) !== null) {\n    indexes.push(match.index);\n  }\n  return indexes;\n};\n\nexport const mergeOverlappingRanges = (\n  ranges: Array<{ index: number; length: number }>,\n) => {\n  if (ranges.length === 0) return [];\n\n  // Sort by start index\n  const sorted = ranges.sort((a, b) => a.index - b.index);\n  const merged = [];\n\n  let current = {\n    index: sorted[0].index,\n    length: sorted[0].length,\n  };\n\n  for (let i = 1; i < sorted.length; i++) {\n    const next = sorted[i];\n    const currentEnd = current.index + current.length;\n    const nextEnd = next.index + next.length;\n\n    // If ranges overlap or are adjacent\n    if (next.index <= currentEnd) {\n      // Extend current range to cover the next range\n      current.length = Math.max(currentEnd, nextEnd) - current.index;\n    } else {\n      // No overlap, add current to merged and start new current\n      merged.push(current);\n      current = { index: next.index, length: next.length };\n    }\n  }\n\n  // Add the last range\n  merged.push(current);\n\n  return merged;\n};\n\ntype TextWithHighlightProps = {\n  text: string;\n  highLightText: string | string[] | null | undefined;\n  classes?: {\n    highlight?: string;\n  };\n} & React.HTMLAttributes<HTMLSpanElement>;\n\nexport const TextWithHighlight: FunctionComponent<TextWithHighlightProps> = ({\n  text,\n  highLightText,\n  classes,\n  ...rest\n}) => {\n  const matches = useMemo(() => {\n    if (Array.isArray(highLightText)) {\n      return highLightText.map((item) => {\n        return {\n          indexes: indexesOf(text, item),\n          length: item.length,\n        };\n      });\n    }\n\n    return typeof highLightText === 'string'\n      ? [\n          {\n            indexes: indexesOf(text, highLightText),\n            length: highLightText.length,\n          },\n        ]\n      : [];\n  }, [highLightText, text]);\n\n  const flatMatches = useMemo(() => {\n    if (matches.length === 0) {\n      return [];\n    }\n\n    if (matches.length === 1) {\n      const match = matches[0];\n      return match.indexes.map((index) => ({\n        index,\n        length: match.length,\n      }));\n    }\n\n    return mergeOverlappingRanges(\n      matches.flatMap(({ indexes, length }) =>\n        indexes.map((index) => ({ index, length })),\n      ),\n    );\n  }, [matches]);\n\n  return (\n    <span title={text} {...rest}>\n      {flatMatches.length > 0\n        ? flatMatches.map(({ index, length }, i) => {\n            const startIndex = index;\n            const endIndex = startIndex + length;\n            const nextStartIndex = flatMatches[i + 1]?.index;\n\n            return (\n              <Fragment key={startIndex}>\n                {i === 0 && text.substring(0, startIndex)}\n\n                <span\n                  data-sign=\"highlight\"\n                  className={clsx('font-bold', classes?.highlight)}\n                >\n                  {text.substring(startIndex, endIndex)}\n                </span>\n\n                {nextStartIndex !== undefined\n                  ? text.substring(endIndex, nextStartIndex)\n                  : text.substring(endIndex)}\n              </Fragment>\n            );\n          })\n        : text}\n    </span>\n  );\n};\n"],"mappings":"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","ignoreList":[]}