{"version":3,"file":"TextWithHighlight.js","names":["_juno","require","_react","_interopRequireWildcard","_excluded","_templateObject","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","_taggedTemplateLiteral","slice","freeze","defineProperties","raw","value","HighlightText","styled","span","palette2","indexesOf","string","highLightText","match","indexes","regex","RegExp","replace","exec","push","index","TextWithHighlight","exports","_ref","text","rest","highlightTextLength","matchIndexes","useMemo","createElement","title","map","startIndex","endIndex","Fragment","key","substring"],"sources":["components/TextWithHighlight/TextWithHighlight.tsx"],"sourcesContent":["import { palette2, styled } from '@ringcentral/juno';\nimport type { FunctionComponent } from 'react';\nimport React, { Fragment, useMemo } from 'react';\n\nconst HighlightText = styled.span`\n  background: ${palette2('highlight', 'b02')};\n`;\n\nconst indexesOf = (string: string, highLightText: string) => {\n  let match;\n  const indexes = [];\n  const regex = new RegExp(\n    highLightText.replace(/[-\\\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'),\n    'gi',\n  );\n  // eslint-disable-next-line no-cond-assign\n  while ((match = regex.exec(string)) !== null) {\n    indexes.push(match.index);\n  }\n  return indexes;\n};\n\ninterface TextWithHighlightProps {\n  text: string;\n  highLightText: string;\n}\n\nexport const TextWithHighlight: FunctionComponent<TextWithHighlightProps> = ({\n  text,\n  highLightText,\n  ...rest\n}) => {\n  const highlightTextLength = highLightText?.length;\n  const matchIndexes = useMemo(\n    () => (highlightTextLength > 0 ? indexesOf(text, highLightText) : []),\n    [highLightText, highlightTextLength, text],\n  );\n\n  return (\n    <span title={text} {...rest}>\n      {matchIndexes.length > 0\n        ? matchIndexes.map((startIndex, index) => {\n            const endIndex = startIndex + highlightTextLength;\n            return (\n              <Fragment key={startIndex}>\n                {index === 0 && text.substring(0, startIndex)}\n\n                <HighlightText data-sign=\"highlight\">\n                  {text.substring(startIndex, endIndex)}\n                </HighlightText>\n\n                {text.substring(endIndex, matchIndexes[index + 1])}\n              </Fragment>\n            );\n          })\n        : text}\n    </span>\n  );\n};\n"],"mappings":"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","ignoreList":[]}