{"version":3,"file":"TextWithHighlight.js","names":["_react","_interopRequireWildcard","require","_juno","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_extends","assign","bind","target","i","arguments","length","source","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","_templateObject","data","_taggedTemplateLiteral","strings","raw","slice","freeze","defineProperties","value","HighlightText","styled","span","palette2","indexesOf","string","highLightText","match","indexes","regex","RegExp","replace","exec","push","index","TextWithHighlight","_ref","text","rest","highlightTextLength","matchIndexes","useMemo","createElement","title","map","startIndex","endIndex","Fragment","substring","exports"],"sources":["components/TextWithHighlight/TextWithHighlight.tsx"],"sourcesContent":["import type { FunctionComponent } from 'react';\nimport React, { Fragment, useMemo } from 'react';\n\nimport { palette2, styled } from '@ringcentral/juno';\n\nconst HighlightText = styled.span`\n  background: ${palette2('highlight', 'b02')};\n`;\n\nconst indexesOf = (string: string, highLightText: string) => {\n  let match;\n  const indexes = [];\n  const regex = new RegExp(\n    highLightText.replace(/[-\\\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'),\n    'gi',\n  );\n  // eslint-disable-next-line no-cond-assign\n  while ((match = regex.exec(string)) !== null) {\n    indexes.push(match.index);\n  }\n  return indexes;\n};\n\ninterface TextWithHighlightProps {\n  text: string;\n  highLightText: string;\n}\n\nexport const TextWithHighlight: FunctionComponent<TextWithHighlightProps> = ({\n  text,\n  highLightText,\n  ...rest\n}) => {\n  const highlightTextLength = highLightText?.length;\n  const matchIndexes = useMemo(\n    () => (highlightTextLength > 0 ? indexesOf(text, highLightText) : []),\n    [highLightText, highlightTextLength, text],\n  );\n\n  return (\n    <span title={text} {...rest}>\n      {matchIndexes.length > 0\n        ? matchIndexes.map((startIndex, index) => {\n            const endIndex = startIndex + highlightTextLength;\n            return (\n              <Fragment key={startIndex}>\n                {index === 0 && text.substring(0, startIndex)}\n\n                <HighlightText data-sign=\"highlight\">\n                  {text.substring(startIndex, endIndex)}\n                </HighlightText>\n\n                {text.substring(endIndex, matchIndexes[index + 1])}\n              </Fragment>\n            );\n          })\n        : text}\n    </span>\n  );\n};\n"],"mappings":"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"}