{"version":3,"file":"TextWithHighlight.js","names":["_juno","require","_react","_interopRequireWildcard","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_extends","assign","bind","arguments","length","apply","_objectWithoutProperties","o","_objectWithoutPropertiesLoose","getOwnPropertySymbols","s","includes","propertyIsEnumerable","_templateObject","data","_taggedTemplateLiteral","slice","freeze","defineProperties","raw","value","HighlightText","styled","span","palette2","indexesOf","string","highLightText","match","indexes","regex","RegExp","replace","exec","push","index","TextWithHighlight","_ref","text","rest","highlightTextLength","matchIndexes","useMemo","createElement","title","map","startIndex","endIndex","Fragment","key","substring","exports"],"sources":["components/TextWithHighlight/TextWithHighlight.tsx"],"sourcesContent":["import { palette2, styled } from '@ringcentral/juno';\nimport type { FunctionComponent } from 'react';\nimport React, { Fragment, useMemo } from 'react';\n\nconst HighlightText = styled.span`\n  background: ${palette2('highlight', 'b02')};\n`;\n\nconst indexesOf = (string: string, highLightText: string) => {\n  let match;\n  const indexes = [];\n  const regex = new RegExp(\n    highLightText.replace(/[-\\\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'),\n    'gi',\n  );\n  // eslint-disable-next-line no-cond-assign\n  while ((match = regex.exec(string)) !== null) {\n    indexes.push(match.index);\n  }\n  return indexes;\n};\n\ninterface TextWithHighlightProps {\n  text: string;\n  highLightText: string;\n}\n\nexport const TextWithHighlight: FunctionComponent<TextWithHighlightProps> = ({\n  text,\n  highLightText,\n  ...rest\n}) => {\n  const highlightTextLength = highLightText?.length;\n  const matchIndexes = useMemo(\n    () => (highlightTextLength > 0 ? indexesOf(text, highLightText) : []),\n    [highLightText, highlightTextLength, text],\n  );\n\n  return (\n    <span title={text} {...rest}>\n      {matchIndexes.length > 0\n        ? matchIndexes.map((startIndex, index) => {\n            const endIndex = startIndex + highlightTextLength;\n            return (\n              <Fragment key={startIndex}>\n                {index === 0 && text.substring(0, startIndex)}\n\n                <HighlightText data-sign=\"highlight\">\n                  {text.substring(startIndex, endIndex)}\n                </HighlightText>\n\n                {text.substring(endIndex, matchIndexes[index + 1])}\n              </Fragment>\n            );\n          })\n        : text}\n    </span>\n  );\n};\n"],"mappings":"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","ignoreList":[]}