{"version":3,"sources":["components/NavigationBar/NavigationBar.tsx"],"names":["NavigationBar","props","_mounted","goTo","bind","state","currentVirtualPath","nextProps","setState","tab","path","virtualPath","setTimeout","className","button","childNavigationView","currentPath","tabWidth","tabHeight","tabs","fullSizeInk","direction","tooltipForceHide","NavigationButton","ChildNavigationView","isVertical","directionClass","styles","vertical","undefined","_tabWidth","_tabHeight","length","dropdownMenuTab","find","childTabs","isActive","dropdownMenu","root","map","index","active","some","childTab","slice","activeAttr","icon","activeIcon","Icon","React","isValidElement","cloneElement","ActiveIcon","Component","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport classnames from 'classnames';\n\nimport {\n  NavigationBarProps,\n  NavigationBarState,\n  TabPropTypes,\n} from './NavigationBar.interface';\nimport styles from './styles.scss';\n\nexport default class NavigationBar extends Component<\n  NavigationBarProps,\n  NavigationBarState\n> {\n  static defaultProps: Partial<NavigationBarProps> = {\n    className: undefined,\n    childNavigationView: undefined,\n    currentVirtualPath: undefined,\n    tabWidth: undefined,\n    tabHeight: undefined,\n    tabs: [],\n    fullSizeInk: true,\n    direction: 'horizonal',\n  };\n\n  constructor(props: NavigationBarProps) {\n    super(props);\n    this.goTo = this.goTo.bind(this);\n    this._mounted = false;\n    this.state = {\n      currentVirtualPath: this.props.currentVirtualPath,\n    };\n  }\n\n  private _mounted: boolean;\n\n  componentDidMount() {\n    this._mounted = true;\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: NavigationBarProps) {\n    if (nextProps.currentVirtualPath && this._mounted) {\n      this.setState({\n        currentVirtualPath: nextProps.currentVirtualPath,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n  }\n\n  goTo(tab: TabPropTypes) {\n    this.props.goTo(tab.path, tab.virtualPath);\n    // seems like the goTo is asynchronous\n    // so here set timeout for resolving menu looks flash issue\n    setTimeout(() => {\n      if (this._mounted) {\n        this.setState({\n          currentVirtualPath: tab.virtualPath,\n        });\n      }\n    }, 10);\n  }\n\n  render() {\n    const {\n      className,\n      button,\n      childNavigationView,\n      currentPath,\n      tabWidth,\n      tabHeight,\n      tabs,\n      fullSizeInk,\n      direction,\n      tooltipForceHide,\n    } = this.props;\n\n    const NavigationButton = button;\n    const ChildNavigationView = childNavigationView;\n    const isVertical = direction === 'vertical';\n    const directionClass = isVertical ? styles.vertical : undefined;\n\n    const { currentVirtualPath } = this.state;\n\n    let _tabWidth = '0';\n    const _tabHeight = isVertical ? tabHeight || '50px' : '100%';\n    if (tabWidth) {\n      _tabWidth = tabWidth;\n    } else {\n      // Align equally fully\n      _tabWidth = tabs.length > 0 ? `${(1 / tabs.length) * 100}%` : '0';\n    }\n    const dropdownMenuTab = tabs.find(\n      (tab) =>\n        tab.childTabs &&\n        tab.isActive &&\n        tab.isActive(currentPath, currentVirtualPath),\n    );\n    const dropdownMenu = dropdownMenuTab && dropdownMenuTab.childTabs;\n    return (\n      <nav className={classnames(styles.root, className, directionClass)}>\n        {tabs.map((tab, index) => {\n          const active =\n            tab.isActive?.(currentPath, currentVirtualPath) ||\n            (tab.path && tab.path === currentPath) ||\n            (tab.virtualPath && tab.virtualPath === currentVirtualPath) ||\n            (tab.childTabs &&\n              tab.childTabs.some(\n                (childTab) =>\n                  childTab.path === currentPath ||\n                  childTab.path === currentPath.slice(0, 9),\n              ));\n          const activeAttr = active ? 'true' : '';\n\n          let { icon, activeIcon } = tab;\n\n          if (typeof icon === 'function') {\n            const Icon = icon;\n            icon = tab.childTabs ? (\n              <Icon currentPath={currentPath} />\n            ) : (\n              <Icon />\n            );\n          } else if (icon && React.isValidElement(icon)) {\n            icon = React.cloneElement(icon, {\n              active: activeAttr,\n            });\n          }\n\n          if (typeof activeIcon === 'function') {\n            const ActiveIcon = activeIcon;\n            activeIcon = tab.childTabs ? (\n              <ActiveIcon currentPath={currentPath} />\n            ) : (\n              <ActiveIcon />\n            );\n          } else if (activeIcon && React.isValidElement(activeIcon)) {\n            activeIcon = React.cloneElement(activeIcon, {\n              active: activeAttr,\n            });\n          }\n\n          return (\n            <NavigationButton\n              {...tab}\n              fullSizeInk={fullSizeInk}\n              key={index}\n              onClick={() => {\n                this.goTo(tab);\n              }}\n              active={active}\n              width={_tabWidth}\n              height={_tabHeight}\n              icon={icon}\n              activeIcon={activeIcon}\n              tooltipForceHide={tooltipForceHide}\n            />\n          );\n        })}\n        {ChildNavigationView && dropdownMenu && dropdownMenu.length ? (\n          <ChildNavigationView\n            tabs={dropdownMenu}\n            goTo={this.goTo}\n            currentPath={currentPath}\n            currentVirtualPath={currentVirtualPath}\n          />\n        ) : null}\n      </nav>\n    );\n  }\n}\n"],"file":"NavigationBar.js"}