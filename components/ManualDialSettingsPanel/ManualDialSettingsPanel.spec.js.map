{"version":3,"file":"ManualDialSettingsPanel.spec.js","names":["_juno","require","_enzyme","_react","_interopRequireDefault","_i18n","_ManualDialSettingsPanel","e","__esModule","asyncGeneratorStep","n","t","r","o","a","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","wrapper","currentLocale","pickListItems","key","label","name","wholeName","defaultSettingFields","dataSign","onChange","undefined","select","required","options","input","type","placeholder","setup","_ref","_ref$goBack","goBack","_ref$settingFields","settingFields","mount","createElement","RcThemeProvider","ManualDialSettingsPanel","init","save","afterEach","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","unmount","stop","describe","it","jest","fn","expect","find","text","toBe","i18n","getString","at","simulate","toHaveBeenCalled","customInput","onBlur","min","max","rcTextField","concat","toContain","not","prop","changeValue","target","toHaveBeenCalledWith"],"sources":["components/ManualDialSettingsPanel/ManualDialSettingsPanel.spec.tsx"],"sourcesContent":["import { RcThemeProvider } from '@ringcentral/juno';\nimport { mount } from 'enzyme';\nimport React from 'react';\n\nimport i18n from '../../modules/EvManualDialSettingsUI/i18n';\n\nimport type { ManualDialSettingsPanelProps } from './ManualDialSettingsPanel';\nimport { ManualDialSettingsPanel } from './ManualDialSettingsPanel';\n\nlet wrapper;\nconst currentLocale = 'en-US';\nconst pickListItems = [\n  {\n    key: '101',\n    label: 'work',\n    name: 'work name',\n    wholeName: 'work name whole',\n  },\n  {\n    key: '102',\n    label: 'study',\n    name: 'studyname',\n    wholeName: 'studyname  whole',\n  },\n];\n\nconst defaultSettingFields = [\n  {\n    dataSign: 'callerId',\n    onChange: () => null,\n    value: undefined,\n    select: {\n      label: 'Call ID',\n      required: true,\n      options: pickListItems,\n    },\n  },\n  {\n    dataSign: 'ringTime',\n    onChange: () => null,\n    value: undefined,\n    input: {\n      required: true,\n      label: 'Ring time (seconds)',\n      type: 'text',\n      placeholder: 'input holder',\n    },\n  },\n];\n\nfunction setup({\n  goBack = () => {},\n  settingFields = defaultSettingFields,\n}: Partial<ManualDialSettingsPanelProps>) {\n  return mount(\n    <RcThemeProvider>\n      <ManualDialSettingsPanel\n        currentLocale={currentLocale}\n        goBack={goBack}\n        settingFields={settingFields}\n        init={() => {}}\n        save={() => {}}\n      />\n    </RcThemeProvider>,\n  );\n}\n\nafterEach(async () => {\n  wrapper.unmount();\n});\n\ndescribe('<ManualDialSettingsPanel />', () => {\n  it('Display Back Button and when user click it, function goBack will be called', () => {\n    const goBack = jest.fn();\n    wrapper = setup({ goBack });\n    expect(wrapper.find('.title').text()).toBe(\n      i18n.getString('manualDialSettings', currentLocale),\n    );\n\n    wrapper\n      .find('[data-sign=\"backButton\"]')\n      .at(0)\n      .find('button')\n      .simulate('click');\n    expect(goBack).toHaveBeenCalled();\n  });\n\n  // Declan: I thinks that is not need, that is too detail about render, just using snapshot is ok\n\n  // it('Can render select, input list respectively', () => {\n  //   wrapper = setup({});\n  //   defaultSettingFields.forEach((field) => {\n  //     if (field.select) {\n  //       const pickList = wrapper.find(\n  //         `PickList[data-sign=\"${field.dataSign}\"]`,\n  //       );\n  //       expect(pickList).toHaveLength(1);\n  //       expect(pickList.find('label').text()).toContain(field.select.label);\n  //       expect(pickList.find('label').text()).toContain('*');\n  //       expect(pickList.find('input').prop('value')).toBe('');\n  //     }\n  //     if (field.input) {\n  //       const rcTextField = wrapper.find(\n  //         `RcTextField[data-sign=\"${field.dataSign}\"]`,\n  //       );\n  //       expect(rcTextField).toHaveLength(1);\n  //       expect(rcTextField.find('label').text()).toContain(field.input.label);\n  //       expect(rcTextField.find('label').text()).toContain('*');\n  //       expect(rcTextField.find('input').prop('value')).toBe('');\n  //     }\n  //   });\n  // });\n\n  // it('Check PickList from settingFields can render correctly', () => {\n  //   const customSelect = {\n  //     dataSign: 'callerId',\n  //     value: '101',\n  //     onChange: jest.fn(),\n  //     select: {\n  //       options: pickListItems,\n  //       label: 'Color Dropdown',\n  //       required: false,\n  //       optionValueKey: 'key',\n  //       optionKey: 'name',\n  //       renderValue: jest.fn(\n  //         (n) => pickListItems.find((item) => item.key === n).name,\n  //       ),\n  //       renderItem: jest.fn((item) => item.wholeName),\n  //     },\n  //   };\n\n  //   wrapper = setup({\n  //     settingFields: [customSelect],\n  //   });\n  //   const pickList = wrapper.find(\n  //     `PickList[data-sign=\"${customSelect.dataSign}\"]`,\n  //   );\n  //   expect(pickList.find('label').text()).toContain(customSelect.select.label);\n  //   expect(pickList.find('label').text()).not.toContain('*');\n  //   expect(pickList.find('input').prop('value')).toBe(customSelect.value);\n  //   const baseButton = wrapper.find('[role=\"button\"]');\n  //   expect(baseButton.text()).toBe(\n  //     customSelect.select.renderValue(customSelect.value),\n  //   );\n  //   baseButton.simulate('click');\n  //   const menuItems = document.body.querySelectorAll<HTMLInputElement>(\n  //     '[role=\"presentation\"] li[role=\"option\"]',\n  //   );\n  //   expect(customSelect.select.renderItem).toHaveBeenCalledTimes(\n  //     pickListItems.length,\n  //   );\n  //   expect(menuItems).toHaveLength(pickListItems.length);\n  //   menuItems.forEach((el, index) => {\n  //     expect(el.textContent).toBe(\n  //       customSelect.select.renderItem(pickListItems[index]),\n  //     );\n  //     expect(el.dataset.value).toBe(\n  //       pickListItems[index][customSelect.select.optionValueKey],\n  //     );\n  //   });\n  //   const selectIndex = 1;\n  //   menuItems[selectIndex].click();\n  //   expect(customSelect.onChange).toHaveBeenCalledWith(\n  //     pickListItems[selectIndex][customSelect.select.optionValueKey],\n  //   );\n  // });\n\n  it('Check input can render correctly', () => {\n    const customInput = {\n      dataSign: 'ringTime',\n      value: '30',\n      onChange: jest.fn(),\n      onBlur: jest.fn(),\n      input: {\n        type: 'number',\n        label: 'Ring time (seconds)',\n        required: false,\n        placeholder: 'Ring time (seconds)',\n        min: 20,\n        max: 120,\n      },\n    };\n\n    wrapper = setup({\n      settingFields: [customInput],\n    });\n    const rcTextField = wrapper.find(\n      `RcTextField[data-sign=\"${customInput.dataSign}\"]`,\n    );\n    const input = rcTextField.find('input');\n    expect(rcTextField.find('label').text()).toContain(customInput.input.label);\n    expect(rcTextField.find('label').text()).not.toContain('*');\n    expect(input.prop('required')).toBe(customInput.input.required);\n    expect(input.prop('value')).toBe(customInput.value);\n    expect(input.prop('placeholder')).toBe(customInput.input.placeholder);\n    expect(input.prop('type')).toBe(customInput.input.type);\n    expect(input.prop('min')).toBe(customInput.input.min);\n    expect(input.prop('max')).toBe(customInput.input.max);\n\n    input.simulate('blur');\n    expect(customInput.onBlur).toHaveBeenCalled();\n\n    const changeValue = 35;\n    input.simulate('change', { target: { value: changeValue } });\n    expect(customInput.onChange).toHaveBeenCalledWith(changeValue);\n  });\n});\n"],"mappings":"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","ignoreList":[]}