{"version":3,"file":"ManualDialSettingsPanel.spec.js","names":["_react","_interopRequireDefault","require","_enzyme","_juno","_i18n","_ManualDialSettingsPanel","obj","__esModule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","wrapper","currentLocale","pickListItems","label","name","wholeName","defaultSettingFields","dataSign","onChange","select","required","options","input","type","placeholder","setup","_ref","_ref$goBack","goBack","_ref$settingFields","settingFields","mount","createElement","RcThemeProvider","ManualDialSettingsPanel","init","save","afterEach","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","unmount","stop","describe","it","jest","expect","find","text","toBe","i18n","getString","at","simulate","toBeCalled","customInput","onBlur","min","max","rcTextField","concat","toContain","not","prop","changeValue","target","toBeCalledWith"],"sources":["components/ManualDialSettingsPanel/ManualDialSettingsPanel.spec.tsx"],"sourcesContent":["import React from 'react';\n\nimport { mount } from 'enzyme';\n\nimport { RcThemeProvider } from '@ringcentral/juno';\n\nimport i18n from '../../modules/EvManualDialSettingsUI/i18n';\nimport type { ManualDialSettingsPanelProps } from './ManualDialSettingsPanel';\nimport { ManualDialSettingsPanel } from './ManualDialSettingsPanel';\n\nlet wrapper;\nconst currentLocale = 'en-US';\nconst pickListItems = [\n  {\n    key: '101',\n    label: 'work',\n    name: 'work name',\n    wholeName: 'work name whole',\n  },\n  {\n    key: '102',\n    label: 'study',\n    name: 'studyname',\n    wholeName: 'studyname  whole',\n  },\n];\n\nconst defaultSettingFields = [\n  {\n    dataSign: 'callerId',\n    onChange: () => null,\n    value: undefined,\n    select: {\n      label: 'Call ID',\n      required: true,\n      options: pickListItems,\n    },\n  },\n  {\n    dataSign: 'ringTime',\n    onChange: () => null,\n    value: undefined,\n    input: {\n      required: true,\n      label: 'Ring time (seconds)',\n      type: 'text',\n      placeholder: 'input holder',\n    },\n  },\n];\n\nfunction setup({\n  goBack = () => {},\n  settingFields = defaultSettingFields,\n}: Partial<ManualDialSettingsPanelProps>) {\n  return mount(\n    <RcThemeProvider>\n      <ManualDialSettingsPanel\n        currentLocale={currentLocale}\n        goBack={goBack}\n        settingFields={settingFields}\n        init={() => {}}\n        save={() => {}}\n      />\n    </RcThemeProvider>,\n  );\n}\n\nafterEach(async () => {\n  wrapper.unmount();\n});\n\ndescribe('<ManualDialSettingsPanel />', () => {\n  it('Display Back Button and when user click it, function goBack will be called', () => {\n    const goBack = jest.fn();\n    wrapper = setup({ goBack });\n    expect(wrapper.find('.title').text()).toBe(\n      i18n.getString('manualDialSettings', currentLocale),\n    );\n\n    wrapper\n      .find('[data-sign=\"backButton\"]')\n      .at(0)\n      .find('button')\n      .simulate('click');\n    expect(goBack).toBeCalled();\n  });\n\n  // Declan: I thinks that is not need, that is too detail about render, just using snapshot is ok\n\n  // it('Can render select, input list respectively', () => {\n  //   wrapper = setup({});\n  //   defaultSettingFields.forEach((field) => {\n  //     if (field.select) {\n  //       const pickList = wrapper.find(\n  //         `PickList[data-sign=\"${field.dataSign}\"]`,\n  //       );\n  //       expect(pickList).toHaveLength(1);\n  //       expect(pickList.find('label').text()).toContain(field.select.label);\n  //       expect(pickList.find('label').text()).toContain('*');\n  //       expect(pickList.find('input').prop('value')).toBe('');\n  //     }\n  //     if (field.input) {\n  //       const rcTextField = wrapper.find(\n  //         `RcTextField[data-sign=\"${field.dataSign}\"]`,\n  //       );\n  //       expect(rcTextField).toHaveLength(1);\n  //       expect(rcTextField.find('label').text()).toContain(field.input.label);\n  //       expect(rcTextField.find('label').text()).toContain('*');\n  //       expect(rcTextField.find('input').prop('value')).toBe('');\n  //     }\n  //   });\n  // });\n\n  // it('Check PickList from settingFields can render correctly', () => {\n  //   const customSelect = {\n  //     dataSign: 'callerId',\n  //     value: '101',\n  //     onChange: jest.fn(),\n  //     select: {\n  //       options: pickListItems,\n  //       label: 'Color Dropdown',\n  //       required: false,\n  //       optionValueKey: 'key',\n  //       optionKey: 'name',\n  //       renderValue: jest.fn(\n  //         (n) => pickListItems.find((item) => item.key === n).name,\n  //       ),\n  //       renderItem: jest.fn((item) => item.wholeName),\n  //     },\n  //   };\n\n  //   wrapper = setup({\n  //     settingFields: [customSelect],\n  //   });\n  //   const pickList = wrapper.find(\n  //     `PickList[data-sign=\"${customSelect.dataSign}\"]`,\n  //   );\n  //   expect(pickList.find('label').text()).toContain(customSelect.select.label);\n  //   expect(pickList.find('label').text()).not.toContain('*');\n  //   expect(pickList.find('input').prop('value')).toBe(customSelect.value);\n  //   const baseButton = wrapper.find('[role=\"button\"]');\n  //   expect(baseButton.text()).toBe(\n  //     customSelect.select.renderValue(customSelect.value),\n  //   );\n  //   baseButton.simulate('click');\n  //   const menuItems = document.body.querySelectorAll<HTMLInputElement>(\n  //     '[role=\"presentation\"] li[role=\"option\"]',\n  //   );\n  //   expect(customSelect.select.renderItem).toBeCalledTimes(\n  //     pickListItems.length,\n  //   );\n  //   expect(menuItems).toHaveLength(pickListItems.length);\n  //   menuItems.forEach((el, index) => {\n  //     expect(el.textContent).toBe(\n  //       customSelect.select.renderItem(pickListItems[index]),\n  //     );\n  //     expect(el.dataset.value).toBe(\n  //       pickListItems[index][customSelect.select.optionValueKey],\n  //     );\n  //   });\n  //   const selectIndex = 1;\n  //   menuItems[selectIndex].click();\n  //   expect(customSelect.onChange).toBeCalledWith(\n  //     pickListItems[selectIndex][customSelect.select.optionValueKey],\n  //   );\n  // });\n\n  it('Check input can render correctly', () => {\n    const customInput = {\n      dataSign: 'ringTime',\n      value: '30',\n      onChange: jest.fn(),\n      onBlur: jest.fn(),\n      input: {\n        type: 'number',\n        label: 'Ring time (seconds)',\n        required: false,\n        placeholder: 'Ring time (seconds)',\n        min: 20,\n        max: 120,\n      },\n    };\n\n    wrapper = setup({\n      settingFields: [customInput],\n    });\n    const rcTextField = wrapper.find(\n      `RcTextField[data-sign=\"${customInput.dataSign}\"]`,\n    );\n    const input = rcTextField.find('input');\n    expect(rcTextField.find('label').text()).toContain(customInput.input.label);\n    expect(rcTextField.find('label').text()).not.toContain('*');\n    expect(input.prop('required')).toBe(customInput.input.required);\n    expect(input.prop('value')).toBe(customInput.value);\n    expect(input.prop('placeholder')).toBe(customInput.input.placeholder);\n    expect(input.prop('type')).toBe(customInput.input.type);\n    expect(input.prop('min')).toBe(customInput.input.min);\n    expect(input.prop('max')).toBe(customInput.input.max);\n\n    input.simulate('blur');\n    expect(customInput.onBlur).toBeCalled();\n\n    const changeValue = 35;\n    input.simulate('change', { target: { value: changeValue } });\n    expect(customInput.onChange).toBeCalledWith(changeValue);\n  });\n});\n"],"mappings":"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"}