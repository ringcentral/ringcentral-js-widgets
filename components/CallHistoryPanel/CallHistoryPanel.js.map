{"version":3,"file":"CallHistoryPanel.js","names":["_juno","require","_dayjs","_interopRequireDefault","_react","_interopRequireWildcard","_CallHistoryItem","_StickyVirtualizedList","_i18n","_styles","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","_templateObject2","data","_taggedTemplateLiteral","_templateObject","slice","freeze","raw","DATE_ITEM_HEIGHT","CALL_ITEM_HEIGHT","ROOT_NODE","id","height","isSticky","formatCallDate","timestamp","now","dayjs","today","clone","startOf","yesterday","subtract","mTimestamp","isSame","format","formatCallTime","DateText","styled","div","typography","palette2","StyledCallHistoryPanel","CallHistoryPanel","_ref","_ref$calls","calls","currentLocale","_ref$getActionMenu","getActionMenu","_ref$isWide","isWide","_ref$listScrollTop","listScrollTop","_ref$changeListScroll","changeListScrollTop","listRef","useRef","useEffect","_listRef$current","current","setScrollTop","tree","useMemo","_tree","root","name","depth","children","startTime","callDate","callTime","callWithFormattedDate","includes","getChildren","useCallback","node","map","childId","childNode","rowRenderer","_ref2","style","createElement","key","i18n","getString","CallHistoryItem","actionMenu","StickyVirtualizedList","overscanRowCount","defaultRowHeight","width","window","innerWidth","innerHeight","onScroll","_ref3","scrollTop","ref","className","styles","empty","exports"],"sources":["components/CallHistoryPanel/CallHistoryPanel.tsx"],"sourcesContent":["import { palette2, styled, typography } from '@ringcentral/juno';\nimport dayjs from 'dayjs';\nimport type { FunctionComponent } from 'react';\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\n\nimport { CallHistoryItem } from './CallHistoryItem';\nimport type {\n  CallLog,\n  CallLogMenu,\n  CallsTree,\n} from './CallHistoryPanel.interface';\nimport { StickyVirtualizedList } from './StickyVirtualizedList';\nimport type { RowRendererProps } from './StickyVirtualizedList/StickyVirtualizedList.interface';\nimport i18n, { type I18nKey } from './i18n';\nimport styles from './styles.scss';\n\nexport type CallHistoryPanelProps = {\n  calls: CallLog[];\n  currentLocale: string;\n  getActionMenu?: (call: CallLog) => CallLogMenu;\n  isWide?: boolean;\n  listScrollTop?: number;\n  changeListScrollTop?: (scrollTop: number) => void;\n};\n\nconst DATE_ITEM_HEIGHT = 32;\nconst CALL_ITEM_HEIGHT = 64; // ./CallHistoryItem/styles.scss .item\n\nconst ROOT_NODE = {\n  id: 'root',\n  height: DATE_ITEM_HEIGHT,\n  isSticky: true,\n};\n\nfunction formatCallDate(timestamp: number) {\n  const now = dayjs();\n  const today = now.clone().startOf('day');\n  const yesterday = now.clone().subtract(1, 'days').startOf('day');\n\n  const mTimestamp = dayjs(timestamp);\n  if (mTimestamp.isSame(today, 'd')) {\n    return 'today';\n  }\n  if (mTimestamp.isSame(yesterday, 'd')) {\n    return 'yesterday';\n  }\n  return mTimestamp.format('MM/DD/YYYY');\n}\n\nfunction formatCallTime(timestamp: number) {\n  return dayjs(timestamp).format('h:mm A');\n}\n\nconst DateText = styled.div`\n  ${typography('caption1')};\n\n  color: ${palette2('neutral', 'f06')};\n  text-align: center;\n  display: block;\n  height: ${DATE_ITEM_HEIGHT}px;\n  line-height: ${DATE_ITEM_HEIGHT}px;\n  background: ${palette2('neutral', 'b01')};\n  box-sizing: border-box;\n  border-bottom: 1px solid ${palette2('neutral', 'l02')};\n  position: sticky;\n  top: 0;\n  z-index: 2 !important;\n`;\n\nconst StyledCallHistoryPanel = styled.div`\n  display: flex;\n  flex-direction: column;\n  border-top: 1px solid ${palette2('neutral', 'l02')};\n  background-color: ${palette2('neutral', 'b01')};\n  height: 100%;\n  box-sizing: border-box;\n  overflow: hidden;\n  position: relative;\n`;\n\nexport const CallHistoryPanel: FunctionComponent<CallHistoryPanelProps> = ({\n  calls = [],\n  currentLocale,\n  getActionMenu = () => [],\n  isWide = true,\n  listScrollTop = 0,\n  changeListScrollTop = () => {},\n}) => {\n  const listRef = useRef(null);\n\n  useEffect(() => {\n    // @ts-expect-error TS(2339): Property 'setScrollTop' does not exist on type 'ne... Remove this comment to see the full error message\n    listRef.current?.setScrollTop(listScrollTop);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const tree = useMemo(() => {\n    const _tree: CallsTree = {\n      root: {\n        name: 'root',\n        depth: 0,\n        children: [],\n      },\n    };\n    calls.forEach((call: CallLog) => {\n      const { id, startTime } = call;\n\n      // @ts-expect-error TS(2345): Argument of type 'number | undefined' is not assig... Remove this comment to see the full error message\n      const callDate = formatCallDate(startTime);\n      // @ts-expect-error TS(2345): Argument of type 'number | undefined' is not assig... Remove this comment to see the full error message\n      const callTime = formatCallTime(startTime);\n      const callWithFormattedDate = {\n        ...call,\n        callDate,\n        callTime,\n      };\n\n      // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n      if (!_tree.root.children.includes(callDate)) {\n        // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n        _tree.root.children.push(callDate);\n      }\n\n      if (!Object.keys(_tree).includes(callDate)) {\n        _tree[callDate] = {\n          name: callDate,\n          // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n          children: [id],\n          depth: 1,\n        };\n      } else {\n        // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n        _tree[callDate].children.push(id);\n      }\n\n      // @ts-expect-error TS(2538): Type 'undefined' cannot be used as an index type.\n      _tree[id] = {\n        name: id,\n        depth: 2,\n        call: callWithFormattedDate,\n      };\n    });\n\n    return _tree;\n  }, [calls]);\n\n  const getChildren = useCallback(\n    (id: string) => {\n      const node = tree[id];\n\n      if (node.children) {\n        return node.children.map((childId: string) => {\n          const childNode = tree[childId];\n\n          let height = CALL_ITEM_HEIGHT;\n          if (childNode.depth === 1) {\n            height = DATE_ITEM_HEIGHT;\n          }\n\n          return {\n            id: childId,\n            height,\n            isSticky: childNode.depth === 1,\n          };\n        });\n      }\n    },\n    [tree],\n  );\n\n  const rowRenderer = useCallback(\n    ({ id, style }: RowRendererProps) => {\n      const node = tree[id];\n      if (node.children) {\n        return (\n          <DateText data-sign=\"dateText\" style={style} key={node.name}>\n            {i18n.getString(node.name as I18nKey, currentLocale)}\n          </DateText>\n        );\n      }\n      return (\n        // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n        <div data-sign=\"historyItem\" style={style} key={node.call.id}>\n          <CallHistoryItem\n            // @ts-expect-error TS(2322): Type 'CallLog | undefined' is not assignable to ty... Remove this comment to see the full error message\n            call={node.call}\n            // @ts-expect-error TS(2345): Argument of type 'CallLog | undefined' is not assi... Remove this comment to see the full error message\n            actionMenu={getActionMenu(node.call)}\n            isWide={isWide}\n          />\n        </div>\n      );\n    },\n    [tree, getActionMenu, isWide, currentLocale],\n  );\n\n  return (\n    <StyledCallHistoryPanel>\n      {/* @ts-expect-error TS(2532): Object is possibly 'undefined'. */}\n      {tree.root.children.length ? (\n        <StickyVirtualizedList\n          overscanRowCount={20}\n          root={ROOT_NODE}\n          // @ts-expect-error TS(2322): Type '(id: string) => { id: string; height: number... Remove this comment to see the full error message\n          getChildren={getChildren}\n          rowRenderer={rowRenderer}\n          defaultRowHeight={64}\n          width={window.innerWidth}\n          height={window.innerHeight}\n          onScroll={({ scrollTop }) => {\n            changeListScrollTop(scrollTop);\n          }}\n          ref={listRef}\n        />\n      ) : (\n        <div className={styles.empty}>\n          {i18n.getString('empty', currentLocale)}\n        </div>\n      )}\n    </StyledCallHistoryPanel>\n  );\n};\n"],"mappings":"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","ignoreList":[]}