{"version":3,"file":"CallHistoryPanel.js","names":["_react","_interopRequireWildcard","require","_dayjs","_interopRequireDefault","_juno","_CallHistoryItem","_i18n","_StickyVirtualizedList","_styles","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","_templateObject2","data","_taggedTemplateLiteral","_templateObject","strings","raw","slice","freeze","DATE_ITEM_HEIGHT","CALL_ITEM_HEIGHT","ROOT_NODE","id","height","isSticky","formatCallDate","timestamp","now","dayjs","today","clone","startOf","yesterday","subtract","mTimestamp","isSame","format","formatCallTime","DateText","styled","div","typography","palette2","StyledCallHistoryPanel","CallHistoryPanel","_ref","_ref$calls","calls","currentLocale","_ref$getActionMenu","getActionMenu","_ref$isWide","isWide","_ref$listScrollTop","listScrollTop","_ref$changeListScroll","changeListScrollTop","listRef","useRef","useEffect","_listRef$current","current","setScrollTop","tree","useMemo","_tree","root","name","depth","children","startTime","callDate","callTime","callWithFormattedDate","includes","getChildren","useCallback","node","map","childId","childNode","rowRenderer","_ref2","style","createElement","i18n","getString","CallHistoryItem","actionMenu","StickyVirtualizedList","overscanRowCount","defaultRowHeight","width","window","innerWidth","innerHeight","onScroll","_ref3","scrollTop","ref","className","styles","empty","exports"],"sources":["components/CallHistoryPanel/CallHistoryPanel.tsx"],"sourcesContent":["import type { FunctionComponent } from 'react';\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\n\nimport dayjs from 'dayjs';\n\nimport { palette2, styled, typography } from '@ringcentral/juno';\n\nimport { CallHistoryItem } from './CallHistoryItem';\nimport type {\n  CallLog,\n  CallLogMenu,\n  CallsTree,\n} from './CallHistoryPanel.interface';\nimport i18n, { I18nKey } from './i18n';\nimport { StickyVirtualizedList } from './StickyVirtualizedList';\nimport type { RowRendererProps } from './StickyVirtualizedList/StickyVirtualizedList.interface';\nimport styles from './styles.scss';\n\nexport type CallHistoryPanelProps = {\n  calls: CallLog[];\n  currentLocale: string;\n  getActionMenu?: (call: CallLog) => CallLogMenu;\n  isWide?: boolean;\n  listScrollTop?: number;\n  changeListScrollTop?: (scrollTop: number) => void;\n};\n\nconst DATE_ITEM_HEIGHT = 32;\nconst CALL_ITEM_HEIGHT = 64; // ./CallHistoryItem/styles.scss .item\n\nconst ROOT_NODE = {\n  id: 'root',\n  height: DATE_ITEM_HEIGHT,\n  isSticky: true,\n};\n\nfunction formatCallDate(timestamp: number) {\n  const now = dayjs();\n  const today = now.clone().startOf('day');\n  const yesterday = now.clone().subtract(1, 'days').startOf('day');\n\n  const mTimestamp = dayjs(timestamp);\n  if (mTimestamp.isSame(today, 'd')) {\n    return 'today';\n  }\n  if (mTimestamp.isSame(yesterday, 'd')) {\n    return 'yesterday';\n  }\n  return mTimestamp.format('MM/DD/YYYY');\n}\n\nfunction formatCallTime(timestamp: number) {\n  return dayjs(timestamp).format('h:mm A');\n}\n\nconst DateText = styled.div`\n  ${typography('caption1')};\n\n  color: ${palette2('neutral', 'f06')};\n  text-align: center;\n  display: block;\n  height: ${DATE_ITEM_HEIGHT}px;\n  line-height: ${DATE_ITEM_HEIGHT}px;\n  background: ${palette2('neutral', 'b01')};\n  box-sizing: border-box;\n  border-bottom: 1px solid ${palette2('neutral', 'l02')};\n  position: sticky;\n  top: 0;\n  z-index: 2 !important;\n`;\n\nconst StyledCallHistoryPanel = styled.div`\n  display: flex;\n  flex-direction: column;\n  border-top: 1px solid ${palette2('neutral', 'l02')};\n  background-color: ${palette2('neutral', 'b01')};\n  height: 100%;\n  box-sizing: border-box;\n  overflow: hidden;\n  position: relative;\n`;\n\nexport const CallHistoryPanel: FunctionComponent<CallHistoryPanelProps> = ({\n  calls = [],\n  currentLocale,\n  getActionMenu = () => [],\n  isWide = true,\n  listScrollTop = 0,\n  changeListScrollTop = () => {},\n}) => {\n  const listRef = useRef(null);\n\n  useEffect(() => {\n    // @ts-expect-error TS(2339): Property 'setScrollTop' does not exist on type 'ne... Remove this comment to see the full error message\n    listRef.current?.setScrollTop(listScrollTop);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const tree = useMemo(() => {\n    const _tree: CallsTree = {\n      root: {\n        name: 'root',\n        depth: 0,\n        children: [],\n      },\n    };\n    calls.forEach((call: CallLog) => {\n      const { id, startTime } = call;\n\n      // @ts-expect-error TS(2345): Argument of type 'number | undefined' is not assig... Remove this comment to see the full error message\n      const callDate = formatCallDate(startTime);\n      // @ts-expect-error TS(2345): Argument of type 'number | undefined' is not assig... Remove this comment to see the full error message\n      const callTime = formatCallTime(startTime);\n      const callWithFormattedDate = {\n        ...call,\n        callDate,\n        callTime,\n      };\n\n      // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n      if (!_tree.root.children.includes(callDate)) {\n        // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n        _tree.root.children.push(callDate);\n      }\n\n      if (!Object.keys(_tree).includes(callDate)) {\n        _tree[callDate] = {\n          name: callDate,\n          // @ts-expect-error TS(2322): Type 'string | undefined' is not assignable to typ... Remove this comment to see the full error message\n          children: [id],\n          depth: 1,\n        };\n      } else {\n        // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n        _tree[callDate].children.push(id);\n      }\n\n      // @ts-expect-error TS(2538): Type 'undefined' cannot be used as an index type.\n      _tree[id] = {\n        name: id,\n        depth: 2,\n        call: callWithFormattedDate,\n      };\n    });\n\n    return _tree;\n  }, [calls]);\n\n  const getChildren = useCallback(\n    (id: string) => {\n      const node = tree[id];\n\n      if (node.children) {\n        return node.children.map((childId: string) => {\n          const childNode = tree[childId];\n\n          let height = CALL_ITEM_HEIGHT;\n          if (childNode.depth === 1) {\n            height = DATE_ITEM_HEIGHT;\n          }\n\n          return {\n            id: childId,\n            height,\n            isSticky: childNode.depth === 1,\n          };\n        });\n      }\n    },\n    [tree],\n  );\n\n  const rowRenderer = useCallback(\n    ({ id, style }: RowRendererProps) => {\n      const node = tree[id];\n      if (node.children) {\n        return (\n          <DateText data-sign=\"dateText\" style={style} key={node.name}>\n            {i18n.getString(node.name as I18nKey, currentLocale)}\n          </DateText>\n        );\n      }\n      return (\n        // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n        <div data-sign=\"historyItem\" style={style} key={node.call.id}>\n          <CallHistoryItem\n            // @ts-expect-error TS(2322): Type 'CallLog | undefined' is not assignable to ty... Remove this comment to see the full error message\n            call={node.call}\n            // @ts-expect-error TS(2345): Argument of type 'CallLog | undefined' is not assi... Remove this comment to see the full error message\n            actionMenu={getActionMenu(node.call)}\n            isWide={isWide}\n          />\n        </div>\n      );\n    },\n    [tree, getActionMenu, isWide, currentLocale],\n  );\n\n  return (\n    <StyledCallHistoryPanel>\n      {/* @ts-expect-error TS(2532): Object is possibly 'undefined'. */}\n      {tree.root.children.length ? (\n        <StickyVirtualizedList\n          overscanRowCount={20}\n          root={ROOT_NODE}\n          // @ts-expect-error TS(2322): Type '(id: string) => { id: string; height: number... Remove this comment to see the full error message\n          getChildren={getChildren}\n          rowRenderer={rowRenderer}\n          defaultRowHeight={64}\n          width={window.innerWidth}\n          height={window.innerHeight}\n          onScroll={({ scrollTop }) => {\n            changeListScrollTop(scrollTop);\n          }}\n          ref={listRef}\n        />\n      ) : (\n        <div className={styles.empty}>\n          {i18n.getString('empty', currentLocale)}\n        </div>\n      )}\n    </StyledCallHistoryPanel>\n  );\n};\n"],"mappings":"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"}