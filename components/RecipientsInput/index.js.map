{"version":3,"sources":["components/RecipientsInput/index.js"],"names":["focusCampo","inputField","blur","value","length","createTextRange","FieldRange","moveStart","collapse","select","selectionStart","elemLen","selectionEnd","focus","SelectedRecipientItem","phoneNumber","name","title","onRemove","className","styles","extension","removeReceiver","propTypes","PropTypes","string","isRequired","func","defaultProps","undefined","SelectedRecipients","recipient","recipients","multiple","selectReceivers","map","item","shape","arrayOf","bool","RecipientsInput","props","onInputKeyUp","e","searchContact","currentTarget","setState","isFocusOnInput","onInputFocus","onInputChange","onChange","listRef","scrollTop","onClean","clickHandler","evt","contains","target","inputRef","_addToRecipients","addToRecipients","setInputRef","ref","state","selectedContactIndex","scrollDirection","setSelectedIndex","index","scrollOperation","direction","addSelectedContactIndex","searchContactList","preState","reduceSelectedContactIndex","isSplitter","key","keyCode","handleHotKey","preventDefault","relatedContactList","currentSelected","replace","nextProps","window","addEventListener","autoFocus","_focusTimeout","setTimeout","removeEventListener","slice","label","i18n","getString","currentLocale","toNumberInput","inputWrapper","numberInput","placeholder","removeButton","container","rightPanel","removeFromRecipients","recipientsClassName","formatContactPhone","titleEnabled","phoneTypeRenderer","contactInfoRenderer","contactPhoneRenderer","Component","entityType","phoneType"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport styles from './styles.scss';\nimport RemoveButton from '../RemoveButton';\nimport ContactDropdownList from '../ContactDropdownList';\nimport i18n from './i18n';\n\n/**\n * Set mouse focus and move cursor to end of input\n * @param {HTMLElement} inputField\n */\nconst focusCampo = (inputField) => {\n  inputField.blur();\n  if (inputField && inputField.value.length !== 0) {\n    if (inputField.createTextRange) {\n      const FieldRange = inputField.createTextRange();\n      FieldRange.moveStart('character', inputField.value.length);\n      FieldRange.collapse();\n      FieldRange.select();\n    } else if (inputField.selectionStart || inputField.selectionStart === 0) {\n      const elemLen = inputField.value.length;\n      inputField.selectionStart = elemLen;\n      inputField.selectionEnd = elemLen;\n    }\n  }\n  inputField.focus();\n};\n\nfunction SelectedRecipientItem({\n  phoneNumber,\n  name = phoneNumber,\n  title = name,\n  onRemove,\n}) {\n  const className = phoneNumber.length > 5 ? styles.phoneNumber : styles.extension;\n  return (\n    <li\n      className={className}\n      title={title}\n    >\n      <span>{name}</span>\n      <RemoveButton\n        className={styles.removeReceiver}\n        onClick={onRemove}\n        visibility\n      />\n    </li>\n  );\n}\n\nSelectedRecipientItem.propTypes = {\n  phoneNumber: PropTypes.string.isRequired,\n  name: PropTypes.string,\n  title: PropTypes.string,\n  onRemove: PropTypes.func.isRequired,\n};\nSelectedRecipientItem.defaultProps = {\n  name: undefined,\n  title: undefined,\n};\n\nfunction SelectedRecipients({\n  recipient,\n  recipients,\n  multiple,\n  onRemove,\n  className\n}) {\n  if (multiple && recipients.length) {\n    return (\n      <ul className={classnames(className, styles.selectReceivers)}>\n        {\n          recipients.map(item => (\n            <SelectedRecipientItem\n              key={item.phoneNumber}\n              name={item.name}\n              phoneNumber={item.phoneNumber}\n              onRemove={() => onRemove(item.phoneNumber)}\n            />\n          ))\n        }\n      </ul>\n    );\n  } else if (!multiple && recipient) {\n    return (\n      <ul className={classnames(className, styles.selectReceivers)}>\n        <SelectedRecipientItem\n          key={recipient.phoneNumber}\n          name={recipient.name}\n          phoneNumber={recipient.phoneNumber}\n          onRemove={() => onRemove(recipient.phoneNumber)}\n        />\n      </ul>\n    );\n  }\n  return null;\n}\n\nSelectedRecipients.propTypes = {\n  onRemove: PropTypes.func.isRequired,\n  recipient: PropTypes.shape({\n    phoneNumber: PropTypes.string.isRequired,\n    name: PropTypes.string,\n  }),\n  recipients: PropTypes.arrayOf(PropTypes.shape({\n    phoneNumber: PropTypes.string.isRequired,\n    name: PropTypes.string,\n  })).isRequired,\n  multiple: PropTypes.bool.isRequired,\n  className: PropTypes.string,\n};\nSelectedRecipients.defaultProps = {\n  recipient: null,\n  className: undefined,\n};\n\nclass RecipientsInput extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.value,\n      isFocusOnInput: false,\n      selectedContactIndex: 0,\n      scrollDirection: null,\n    };\n\n    this.setSelectedIndex = (index) => {\n      this.setState({\n        selectedContactIndex: index,\n        scrollDirection: null,\n      });\n    };\n    this.scrollOperation = (direction) => {\n      if (direction === 'ArrowDown' || direction === 'ArrowUp') {\n        this.setState({\n          scrollDirection: direction,\n        });\n      }\n    };\n    this.addSelectedContactIndex = () => {\n      const { length } = this.props.searchContactList;\n      if (this.state.selectedContactIndex >= (length - 1)) {\n        this.setState({\n          selectedContactIndex: length - 1,\n        });\n      } else {\n        this.setState(preState => ({\n          selectedContactIndex: (preState.selectedContactIndex + 1),\n        }));\n      }\n    };\n\n    this.reduceSelectedContactIndex = () => {\n      if (this.state.selectedContactIndex > 0) {\n        this.setState(preState => ({\n          selectedContactIndex: (preState.selectedContactIndex - 1),\n        }));\n      } else {\n        this.setState({\n          selectedContactIndex: 0,\n        });\n      }\n    };\n\n    this.isSplitter = (e) => {\n      if (\n        e.key === ',' || e.key === ';' || e.key === 'Enter' ||\n        (e.key === 'Unidentified' && // for Safari (FF cannot rely on keyCode...)\n          (e.keyCode === 186 || // semicolon\n            e.keyCode === 188 || // comma\n            e.keyCode === 13)) // enter\n      ) {\n        return true;\n      }\n      return false;\n    };\n    // using React SyntheticEvent to deal with cross browser issue\n    this.handleHotKey = (e: React.KeyboardEvent) => {\n      if (this.state.isFocusOnInput && this.state.value.length >= 3) {\n        if (e.key === 'ArrowUp') {\n          this.reduceSelectedContactIndex();\n          this.scrollOperation(e.key);\n        } else if (e.key === 'ArrowDown') {\n          this.addSelectedContactIndex();\n          this.scrollOperation(e.key);\n        }\n      } else {\n        this.setState({\n          selectedContactIndex: 0,\n        });\n      }\n      if (this.isSplitter(e)) {\n        e.preventDefault();\n        if (this.state.value.length === 0) {\n          return;\n        }\n        const relatedContactList = this.state.value.length >= 3 ?\n          this.props.searchContactList : [];\n        const currentSelected\n          = relatedContactList[this.state.selectedContactIndex];\n        if (currentSelected && e.key === 'Enter') {\n          this.props.addToRecipients({\n            name: currentSelected.name,\n            phoneNumber: currentSelected.phoneNumber,\n          });\n        } else {\n          this.props.addToRecipients({\n            name: this.state.value.replace(',', ''),\n            phoneNumber: this.state.value.replace(',', ''),\n          });\n        }\n      }\n    };\n  }\n\n  onInputKeyUp = (e) => {\n    this.props.searchContact(e.currentTarget.value);\n    this.setState({\n      isFocusOnInput: true\n    });\n  }\n\n  onInputFocus = () => {\n    this.setState({\n      isFocusOnInput: true\n    });\n  }\n\n  onInputChange = (e) => {\n    const { value } = e.currentTarget;\n    this.setState({ value }, () => {\n      this.props.onChange(value);\n    });\n    if (this.listRef) {\n      this.listRef.scrollTop = 0;\n    }\n  }\n\n  onClean = () => {\n    this.setState({ value: '' });\n    this.props.onClean();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.value !== undefined &&\n      nextProps.value !== this.props.value &&\n      nextProps.value !== this.state.value\n    ) {\n      this.setState({ value: nextProps.value }, () => {\n        if (this.inputRef) {\n          focusCampo(this.inputRef);\n        }\n      });\n      this.props.searchContact(nextProps.value);\n    }\n  }\n\n  componentDidMount() {\n    this.props.searchContact(this.props.value);\n    window.addEventListener('click', this.clickHandler);\n    if (this.props.autoFocus) {\n      this._focusTimeout = setTimeout(() => {\n        if (this.inputRef) {\n          this.inputRef.focus();\n        }\n      }, 300);\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', this.clickHandler);\n  }\n\n  clickHandler = (evt) => {\n    if (this.listRef && this.listRef.contains(evt.target)) return;\n    if (this.inputRef && this.inputRef.contains(evt.target)) {\n      this.setState({\n        isFocusOnInput: true\n      });\n      return;\n    }\n    this.setState({\n      isFocusOnInput: false\n    });\n  }\n\n  _addToRecipients = (item) => {\n    this.setState({ value: '', isFocusOnInput: false });\n    this.props.addToRecipients(item);\n  }\n\n  setInputRef = (ref) => {\n    this.inputRef = ref;\n    if (typeof this.props.inputRef === 'function') {\n      this.props.inputRef(ref);\n    }\n  }\n\n  render() {\n    // TODO a temporary fix for rendering slower search result.\n    const relatedContactList = this.state.value.length >= 3 ?\n      this.props.searchContactList.slice(0, 50) : [];\n    const label = (\n      <label>\n        {\n          this.props.label === undefined\n            ? `${i18n.getString('to', this.props.currentLocale)}:`\n            : this.props.label\n        }\n      </label>\n    );\n    const toNumberInput = !this.props.multiple && this.props.recipient ?\n      null :\n      (\n        <div className={styles.inputWrapper}>\n          <div className={styles.inputField}>\n            <input\n              ref={this.setInputRef}\n              name=\"receiver\"\n              value={this.state.value}\n              onChange={this.onInputChange}\n              className={styles.numberInput}\n              maxLength={30}\n              onFocus={this.onInputFocus}\n              onKeyUp={this.onInputKeyUp}\n              placeholder={\n                this.props.placeholder === undefined\n                  ? i18n.getString('enterNameOrNumber', this.props.currentLocale)\n                  : this.props.placeholder\n              }\n              autoComplete=\"off\"\n            />\n          </div>\n          <RemoveButton\n            className={styles.removeButton}\n            onClick={this.onClean}\n            visibility={\n              this.state.value.length > 0\n            }\n          />\n        </div>\n      );\n\n    return (\n      <div\n        className={classnames(styles.container, this.props.className)}\n        onKeyDown={this.handleHotKey}\n      >\n        {label}\n        <div className={this.props.label === undefined ? styles.rightPanel : ''}>\n          <SelectedRecipients\n            recipient={this.props.recipient}\n            recipients={this.props.recipients}\n            multiple={this.props.multiple}\n            onRemove={this.props.removeFromRecipients}\n            className={this.props.recipientsClassName}\n          />\n          {toNumberInput}\n        </div>\n        <ContactDropdownList\n          currentLocale={this.props.currentLocale}\n          listRef={(ref) => { this.listRef = ref; }}\n          scrollDirection={this.state.scrollDirection}\n          selectedIndex={this.state.selectedContactIndex}\n          setSelectedIndex={this.setSelectedIndex}\n          addToRecipients={this._addToRecipients}\n          items={relatedContactList}\n          formatContactPhone={this.props.formatContactPhone}\n          visibility={this.state.isFocusOnInput}\n          titleEnabled={this.props.titleEnabled}\n          phoneTypeRenderer={this.props.phoneTypeRenderer}\n          contactInfoRenderer={this.props.contactInfoRenderer}\n          contactPhoneRenderer={this.props.contactPhoneRenderer}\n        />\n      </div>\n    );\n  }\n}\n\nRecipientsInput.propTypes = {\n  className: PropTypes.string,\n  recipientsClassName: PropTypes.string,\n  label: PropTypes.string,\n  placeholder: PropTypes.string,\n  searchContactList: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    entityType: PropTypes.string.isRequired,\n    phoneType: PropTypes.string.isRequired,\n    phoneNumber: PropTypes.string.isRequired,\n  })).isRequired,\n  recipient: PropTypes.shape({\n    phoneNumber: PropTypes.string.isRequired,\n    name: PropTypes.string,\n  }),\n  recipients: PropTypes.arrayOf(PropTypes.shape({\n    phoneNumber: PropTypes.string.isRequired,\n    name: PropTypes.string,\n  })),\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onClean: PropTypes.func.isRequired,\n  addToRecipients: PropTypes.func.isRequired,\n  removeFromRecipients: PropTypes.func.isRequired,\n  formatContactPhone: PropTypes.func.isRequired,\n  searchContact: PropTypes.func,\n  titleEnabled: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  currentLocale: PropTypes.string.isRequired,\n  multiple: PropTypes.bool,\n  inputRef: PropTypes.func,\n  phoneTypeRenderer: PropTypes.func,\n  contactInfoRenderer: PropTypes.func,\n  contactPhoneRenderer: PropTypes.func,\n};\n\nRecipientsInput.defaultProps = {\n  className: undefined,\n  recipientsClassName: undefined,\n  label: undefined,\n  placeholder: undefined,\n  recipient: null,\n  recipients: [],\n  searchContact: () => null,\n  titleEnabled: undefined,\n  autoFocus: false,\n  multiple: false,\n  inputRef: undefined,\n  phoneTypeRenderer: undefined,\n  contactInfoRenderer: undefined,\n  contactPhoneRenderer: undefined,\n};\n\nexport default RecipientsInput;\n"]}