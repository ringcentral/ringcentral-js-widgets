{"version":3,"file":"useHistoryActionButtons.js","names":["_hooks","require","_springIcon","_springUi","_react","_i18n","_interopRequireDefault","e","__esModule","ownKeys","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","TypeError","String","Number","useHistoryActionButtons","exports","actions","onEffect","_useLocale","useLocale","i18n","actionMap","useMemo","addEntity","label","symbol","InviteMd","addRecord","action","PlusMd","isSubmenu","submenuActions","viewEntity","ContactsMd","delete","TrashMd","CallMd","text","Smsmd","viewFax","ShowMd","downloadFax","component","DownloadMd","target","download","rel","downloadVoicemail","copyNumber","CopyMd","mark","MarkUnreadMd","unmark","MarkUnreadFilledMd","createLog","DispositionMd","selectRecordsForAutoLog","viewLog","ArrowRightUpMd","resolveThread","CheckBoldMd","assignToMe","TextReplyMd","reassignThread","ReassignMd","assignThread","unassignThread","MinusMd","effect","useEventCallback","map","actionType","type","disabled","href","propsGetter","process","env","NODE_ENV","Error","concat","actionButtonProps","item","shape","variant","color","size","onClick","stopPropagation","subAction","_subAction$onClick","result"],"sources":["components/ActionMenuList/useHistoryActionButtons/useHistoryActionButtons.tsx"],"sourcesContent":["import { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport {\n  ArrowRightUpMd,\n  CallMd,\n  CheckBoldMd,\n  ContactsMd,\n  CopyMd,\n  DispositionMd,\n  DownloadMd,\n  InviteMd,\n  MarkUnreadFilledMd,\n  MarkUnreadMd,\n  MinusMd,\n  PlusMd,\n  ReassignMd,\n  ShowMd,\n  Smsmd,\n  TextReplyMd,\n  TrashMd,\n} from '@ringcentral/spring-icon';\nimport {\n  IconButtonProps,\n  UnionOmit,\n  useEventCallback,\n} from '@ringcentral/spring-ui';\nimport { useMemo } from 'react';\n\nimport type { SubmenuAction } from '../ActionMenuList';\n\nimport i18n from './i18n';\n\nexport type HistoryActionType =\n  | 'addEntity'\n  | 'viewEntity'\n  | 'delete'\n  | 'call'\n  | 'text'\n  | 'viewFax'\n  | 'downloadFax'\n  | 'downloadVoicemail'\n  | 'copyNumber'\n  | 'mark'\n  | 'unmark'\n  | 'viewLog'\n  | 'createLog'\n  | 'selectRecordsForAutoLog'\n  | 'addRecord'\n  | 'resolveThread'\n  | 'assignToMe'\n  | 'assignThread'\n  | 'reassignThread'\n  | 'unassignThread'\n  // action only\n  | HistoryActionOnlyType;\n\ntype HistoryActionOnlyType = 'read' | 'viewDetail';\n\nexport type HistoryAction = {\n  type: UnionOmit<HistoryActionType, HistoryActionOnlyType>;\n  disabled?: boolean;\n  /**\n   * href for download or preview\n   */\n  href?: string;\n  /**\n   * for action display label\n   */\n  label?: string;\n  /**\n   * indicates this should render as a submenu\n   */\n  isSubmenu?: boolean;\n  /**\n   * array of submenu actions (only used when isSubmenu is true)\n   */\n  submenuActions?: SubmenuAction[];\n};\n\ntype HistoryActionButtonProps = Pick<\n  IconButtonProps,\n  'symbol' | 'variant' | 'color' | 'iconSize' | 'className'\n> & {\n  label: string;\n  isSubmenu?: boolean;\n  submenuActions?: SubmenuAction[];\n};\n\n/**\n * hooks for history action buttons data source\n *\n * ```tsx\n * useHistoryActionButtons(\n *  [\n *   { type: 'addEntity' },\n *   { type: 'viewEntity' },\n *   { type: 'delete' },\n * ],\n * (actionType) => {\n *    console.log(actionType);\n * });\n * ```\n */\nexport const useHistoryActionButtons = (\n  actions: HistoryAction[],\n  onEffect: (key: HistoryActionType, e?: React.MouseEvent) => void,\n) => {\n  const { t } = useLocale(i18n);\n\n  const actionMap = useMemo<\n    Record<\n      HistoryAction['type'],\n      (action?: HistoryAction) => HistoryActionButtonProps\n    >\n  >(\n    () => ({\n      addEntity: () => ({\n        label: t('addEntity'),\n        symbol: InviteMd,\n      }),\n      addRecord: (action) => ({\n        label: t('addRecord'),\n        symbol: PlusMd,\n        isSubmenu: action?.isSubmenu,\n        submenuActions: action?.submenuActions,\n      }),\n      viewEntity: (action?: HistoryAction) => ({\n        label: action?.label || t('viewDetails'),\n        symbol: ContactsMd,\n      }),\n      delete: () => ({\n        label: t('delete'),\n        symbol: TrashMd,\n      }),\n      call: () => ({\n        label: t('call'),\n        symbol: CallMd,\n      }),\n      text: () => ({\n        label: t('text'),\n        symbol: Smsmd,\n      }),\n      viewFax: () => ({\n        label: t('viewFax'),\n        symbol: ShowMd,\n      }),\n      downloadFax: () =>\n        ({\n          component: 'a',\n          label: t('downloadFax'),\n          symbol: DownloadMd,\n          target: '_blank',\n          download: true,\n          rel: 'noreferrer',\n        } satisfies IconButtonProps<'a'>),\n      downloadVoicemail: () =>\n        ({\n          component: 'a',\n          label: t('downloadVoicemail'),\n          symbol: DownloadMd,\n          target: '_blank',\n          download: true,\n          rel: 'noreferrer',\n        } satisfies IconButtonProps<'a'>),\n      copyNumber: () => ({\n        label: t('copyNumber'),\n        symbol: CopyMd,\n      }),\n      mark: () => ({\n        label: t('mark'),\n        symbol: MarkUnreadMd,\n      }),\n      unmark: () => ({\n        label: t('unmark'),\n        symbol: MarkUnreadFilledMd,\n      }),\n      createLog: () => ({\n        label: t('createLog'),\n        symbol: DispositionMd,\n      }),\n      selectRecordsForAutoLog: () => ({\n        label: t('selectRecordsForAutoLog'),\n        symbol: DispositionMd,\n      }),\n      viewLog: (action) => ({\n        label: action?.label!,\n        symbol: ArrowRightUpMd,\n      }),\n      resolveThread: () => ({\n        label: t('resolveThread'),\n        symbol: CheckBoldMd,\n      }),\n      assignToMe: () => ({\n        label: t('assignToMe'),\n        symbol: TextReplyMd,\n      }),\n      reassignThread: () => ({\n        label: t('reassignThread'),\n        symbol: ReassignMd,\n      }),\n      assignThread: () => ({\n        label: t('assignThread'),\n        symbol: ReassignMd,\n      }),\n      unassignThread: () => ({\n        label: t('unassignThread'),\n        symbol: MinusMd,\n      }),\n    }),\n    [t],\n  );\n\n  const effect = useEventCallback(onEffect);\n\n  return useMemo(\n    () =>\n      actions.map((action) => {\n        const actionType = action.type;\n        const disabled = action.disabled;\n        const href = action.href;\n        const isSubmenu = action.isSubmenu;\n        const submenuActions = action.submenuActions;\n\n        const propsGetter = actionMap[actionType];\n\n        if (process.env.NODE_ENV !== 'production' && !propsGetter) {\n          throw new Error(`actionType \"${actionType}\" not exist`);\n        }\n        const actionButtonProps = propsGetter?.(action);\n\n        const item: IconButtonProps & {\n          actionType: HistoryActionType;\n          isSubmenu?: boolean;\n          submenuActions?: SubmenuAction[];\n        } = {\n          actionType,\n          disabled,\n          shape: 'squircle',\n          variant: 'outlined',\n          color: 'secondary',\n          size: 'medium',\n          ...actionButtonProps,\n          onClick: (e) => {\n            effect(actionType, e);\n            e.stopPropagation();\n          },\n        };\n\n        if ((actionButtonProps as IconButtonProps<'a'>)?.component === 'a') {\n          (item as any).href = href;\n        }\n\n        if (isSubmenu && submenuActions) {\n          item.isSubmenu = true;\n          item.submenuActions = submenuActions.map((subAction) => ({\n            ...subAction,\n            onClick: (e: React.MouseEvent<HTMLButtonElement>) => {\n              const result = subAction.onClick?.(e);\n\n              // when the action is prevented, don't call the effect\n              if (!result) {\n                effect(subAction.actionType as HistoryActionType, e);\n              }\n\n              e.stopPropagation();\n            },\n          }));\n        }\n\n        return item;\n      }),\n    [actionMap, actions, effect],\n  );\n};\n"],"mappings":"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","ignoreList":[]}