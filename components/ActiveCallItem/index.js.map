{"version":3,"sources":["components/ActiveCallItem/index.tsx"],"names":["WebphoneButtons","currentLocale","session","webphoneAnswer","webphoneReject","webphoneHangup","webphoneResume","showAnswer","hangupFunc","resumeFunc","endIcon","EndIcon","rejectTitle","i18n","getString","acceptTitle","direction","callDirections","inbound","callStatus","sessionStatus","connecting","VoicemailIcon","styles","webphoneButtons","webphoneButton","rejectButton","e","stopPropagation","id","answerButton","AnswerIcon","propTypes","PropTypes","string","isRequired","object","func","bool","defaultProps","undefined","ActiveCallItem","props","onSelectContact","value","nameMatches","getContactMatches","selected","findIndex","match","_userSelection","setState","call","activityMatches","length","autoLog","logCall","redirect","getSelectedContact","state","contactMatches","clickToSms","onClickToSms","phoneNumber","getPhoneNumber","contact","formatted","formatPhone","name","enableContactFallback","getFallbackContactName","createSelectedContact","entityType","onCreateContact","_mounted","isCreating","viewSelectedContact","onViewContact","bind","externalViewEntity","isLogging","extended","contactDisplay","toggleExtended","isOnConferenceCall","contains","target","preState","webphoneToVoicemail","sessionId","toVoicemailTimeout","setTimeout","clearTimeout","from","to","nextProps","fromMatches","toMatches","extensionNumber","telephonyStatus","startTime","webphoneSession","offset","disableLinks","showCallDetail","myPhoneNumber","getMyPhoneNumber","callDetail","label","telephonyStatusInfo","split","onLogCall","areaCode","countryCode","outboundSmsPermission","internalSmsPermission","brand","showContactDisplayPlaceholder","createEntityTypes","sourceIcons","phoneTypeRenderer","phoneSourceNameRenderer","renderContactName","renderExtraButton","contactDisplayStyle","externalHasEntity","readTextPermission","hasActionMenu","avatarUrl","showAvatar","parsedInfo","isExtension","hasPlus","number","disableClickToSms","fallbackContactName","ringing","getCallInfo","contactName","extraButton","root","wrapper","infoWrapper","conferenceContactDisplay","Component","shape","array"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport callDirections from '@ringcentral-integration/commons/enums/callDirections';\nimport {\n  isInbound,\n  isRinging,\n} from '@ringcentral-integration/commons/lib/callLogHelpers';\nimport parseNumber from '@ringcentral-integration/commons/lib/parseNumber';\nimport sessionStatus from '@ringcentral-integration/commons/modules/Webphone/sessionStatus';\n\nimport AnswerIcon from '../../assets/images/Answer.svg';\nimport EndIcon from '../../assets/images/End.svg';\nimport VoicemailIcon from '../../assets/images/Voicemail.svg';\nimport ActionMenu from '../ActionMenu';\nimport CallIcon from '../CallIcon';\nimport CircleButton from '../CircleButton';\nimport ContactDisplay from '../ContactDisplay';\nimport DurationCounter from '../DurationCounter';\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nfunction WebphoneButtons({\n  currentLocale,\n  session,\n  webphoneAnswer,\n  webphoneReject,\n  webphoneHangup,\n  webphoneResume,\n  showAnswer,\n}) {\n  if (!session || !webphoneAnswer || !webphoneHangup) {\n    return null;\n  }\n  let hangupFunc = webphoneHangup;\n  let resumeFunc = webphoneResume;\n  let endIcon = EndIcon;\n  let rejectTitle = i18n.getString('hangup', currentLocale);\n  const acceptTitle = i18n.getString('accept', currentLocale);\n  if (\n    session.direction === callDirections.inbound &&\n    session.callStatus === sessionStatus.connecting\n  ) {\n    hangupFunc = webphoneReject;\n    resumeFunc = webphoneAnswer;\n    endIcon = VoicemailIcon;\n    rejectTitle = i18n.getString('toVoicemail', currentLocale);\n  }\n  return (\n    <div className={styles.webphoneButtons}>\n      <span title={rejectTitle} className={styles.webphoneButton}>\n        <CircleButton\n          className={styles.rejectButton}\n          onClick={(e) => {\n            e.stopPropagation();\n            hangupFunc(session.id);\n          }}\n          iconWidth={260}\n          iconX={120}\n          icon={endIcon}\n          showBorder={false}\n        />\n      </span>\n      {showAnswer ? (\n        <span title={acceptTitle} className={styles.webphoneButton}>\n          <CircleButton\n            className={styles.answerButton}\n            onClick={(e) => {\n              e.stopPropagation();\n              resumeFunc(session.id);\n            }}\n            icon={AnswerIcon}\n            showBorder={false}\n          />\n        </span>\n      ) : null}\n    </div>\n  );\n}\n\nWebphoneButtons.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n  session: PropTypes.object,\n  webphoneAnswer: PropTypes.func,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  showAnswer: PropTypes.bool,\n};\n\nWebphoneButtons.defaultProps = {\n  session: undefined,\n  webphoneAnswer: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  showAnswer: true,\n};\n\nclass ActiveCallItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: 0,\n      isLogging: false,\n      extended: false,\n      isCreating: false,\n    };\n    this._userSelection = false;\n    this.contactDisplay = null;\n\n    this.toggleExtended = (e) => {\n      if (this.props.isOnConferenceCall) {\n        return;\n      }\n      if (this.contactDisplay && this.contactDisplay.contains(e.target)) {\n        return;\n      }\n      this.setState((preState) => ({\n        extended: !preState.extended,\n      }));\n    };\n\n    this.webphoneToVoicemail = (sessionId) => {\n      if (typeof this.props.webphoneToVoicemail !== 'function') {\n        return;\n      }\n      this.props.webphoneToVoicemail(sessionId);\n      this.toVoicemailTimeout = setTimeout(() => {\n        this.props.webphoneReject(sessionId);\n      }, 3000);\n    };\n  }\n\n  componentDidMount() {\n    this._mounted = true;\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n    if (this.toVoicemailTimeout) {\n      clearTimeout(this.toVoicemailTimeout);\n      this.toVoicemailTimeout = null;\n    }\n  }\n\n  onSelectContact = (value) => {\n    const nameMatches = this.getContactMatches();\n    const selected = nameMatches.findIndex((match) => match.id === value.id);\n    this._userSelection = true;\n    this.setState({\n      selected,\n    });\n    if (this.props.call.activityMatches.length > 0 && this.props.autoLog) {\n      this.logCall({ redirect: false, selected });\n    }\n  };\n\n  getFallbackContactName() {\n    return isInbound(this.props.call)\n      ? this.props.call.from.name\n      : this.props.call.to.name;\n  }\n\n  getSelectedContact = (selected = this.state.selected) => {\n    const contactMatches = this.getContactMatches();\n    return (\n      (selected > -1 && contactMatches[selected]) ||\n      (contactMatches.length === 1 && contactMatches[0]) ||\n      null\n    );\n  };\n\n  getContactMatches(nextProps = this.props) {\n    return isInbound(nextProps.call)\n      ? nextProps.call.fromMatches\n      : nextProps.call.toMatches;\n  }\n\n  getPhoneNumber() {\n    return isInbound(this.props.call)\n      ? this.props.call.from.phoneNumber || this.props.call.from.extensionNumber\n      : this.props.call.to.phoneNumber || this.props.call.to.extensionNumber;\n  }\n\n  getMyPhoneNumber() {\n    return isInbound(this.props.call)\n      ? this.props.call.to.phoneNumber || this.props.call.to.extensionNumber\n      : this.props.call.from.phoneNumber ||\n          this.props.call.from.extensionNumber;\n  }\n\n  getCallInfo() {\n    const {\n      call: { telephonyStatus, startTime, webphoneSession, offset },\n      disableLinks,\n      currentLocale,\n      formatPhone,\n      showCallDetail,\n    } = this.props;\n\n    if (!showCallDetail) {\n      return null;\n    }\n    const myPhoneNumber = this.getMyPhoneNumber();\n\n    if (webphoneSession) {\n      return (\n        <div className={styles.callDetail}>\n          <span className={styles.label}>\n            {isInbound(this.props.call)\n              ? i18n.getString('to', currentLocale)\n              : i18n.getString('from', currentLocale)}\n            :\n          </span>\n          {myPhoneNumber\n            ? formatPhone(myPhoneNumber)\n            : i18n.getString('anonymous', currentLocale)}\n        </div>\n      );\n    }\n    const telephonyStatusInfo = i18n.getString(telephonyStatus, currentLocale);\n    return (\n      <div className={styles.callDetail}>\n        {disableLinks ? (\n          i18n.getString('unavailable', currentLocale)\n        ) : (\n          <DurationCounter startTime={startTime} offset={offset} />\n        )}\n        <span className={styles.split}>|</span>\n        <span title={telephonyStatusInfo}>{telephonyStatusInfo}</span>\n      </div>\n    );\n  }\n\n  clickToSms = () => {\n    if (this.props.onClickToSms) {\n      const phoneNumber = this.getPhoneNumber();\n      const contact = this.getSelectedContact();\n      if (contact) {\n        this.props.onClickToSms({\n          ...contact,\n          phoneNumber,\n        });\n      } else {\n        const formatted = this.props.formatPhone(phoneNumber);\n        this.props.onClickToSms(\n          {\n            name: this.props.enableContactFallback\n              ? this.getFallbackContactName()\n              : formatted,\n            phoneNumber,\n          },\n          true,\n        );\n      }\n    }\n  };\n\n  createSelectedContact = async (entityType) => {\n    // console.log('click createSelectedContact!!', entityType);\n    if (\n      typeof this.props.onCreateContact === 'function' &&\n      this._mounted &&\n      !this.state.isCreating\n    ) {\n      this.setState({\n        isCreating: true,\n      });\n      // console.log('start to create: isCreating...', this.state.isCreating);\n      const phoneNumber = this.getPhoneNumber();\n      await this.props.onCreateContact({\n        phoneNumber,\n        name: this.props.enableContactFallback\n          ? this.getFallbackContactName()\n          : '',\n        entityType,\n      });\n\n      if (this._mounted) {\n        this.setState({\n          isCreating: false,\n        });\n        // console.log('created: isCreating...', this.state.isCreating);\n      }\n    }\n  };\n\n  viewSelectedContact = () => {\n    if (typeof this.props.onViewContact === 'function') {\n      this.props.onViewContact({\n        contact: this.getSelectedContact(),\n      });\n    }\n  };\n\n  async logCall({ redirect = true, selected }) {\n    if (\n      typeof this.props.onLogCall === 'function' &&\n      this._mounted &&\n      !this.state.isLogging\n    ) {\n      this.setState({\n        isLogging: true,\n      });\n      await this.props.onLogCall({\n        contact: this.getSelectedContact(selected),\n        call: this.props.call,\n        redirect,\n      });\n      if (this._mounted) {\n        this.setState({\n          isLogging: false,\n        });\n      }\n    }\n  }\n\n  logCall = this.logCall.bind(this);\n\n  externalViewEntity = () => this.props.externalViewEntity(this.props.call);\n  render() {\n    const {\n      call: { direction, activityMatches, webphoneSession },\n      disableLinks,\n      currentLocale,\n      areaCode,\n      countryCode,\n      outboundSmsPermission,\n      internalSmsPermission,\n      enableContactFallback,\n      isLogging,\n      brand,\n      showContactDisplayPlaceholder,\n      onClickToSms,\n      onViewContact,\n      onCreateContact,\n      createEntityTypes,\n      onLogCall,\n      webphoneAnswer,\n      webphoneHangup,\n      webphoneResume,\n      sourceIcons,\n      phoneTypeRenderer,\n      phoneSourceNameRenderer,\n      renderContactName,\n      renderExtraButton,\n      contactDisplayStyle,\n      externalViewEntity,\n      externalHasEntity,\n      readTextPermission,\n      isOnConferenceCall,\n      hasActionMenu,\n      showAnswer,\n      avatarUrl,\n      showAvatar,\n    } = this.props;\n    const phoneNumber = this.getPhoneNumber();\n    const parsedInfo = parseNumber({\n      phoneNumber,\n      countryCode,\n      areaCode,\n    });\n    const isExtension =\n      !parsedInfo.hasPlus && parsedInfo.number && parsedInfo.number.length <= 6;\n    const disableClickToSms = !(\n      onClickToSms &&\n      (isExtension ? internalSmsPermission : outboundSmsPermission)\n    );\n    const contactMatches = this.getContactMatches();\n    const fallbackContactName = this.getFallbackContactName();\n    const ringing = isRinging(this.props.call);\n    const callDetail = this.getCallInfo();\n    const contactName =\n      typeof renderContactName === 'function'\n        ? renderContactName(this.props.call)\n        : undefined;\n    const extraButton =\n      typeof renderExtraButton === 'function'\n        ? renderExtraButton(this.props.call)\n        : undefined;\n\n    return (\n      <div className={styles.root} onClick={this.toggleExtended}>\n        <div className={styles.wrapper}>\n          <CallIcon\n            direction={direction}\n            ringing={ringing}\n            active\n            missed={false}\n            inboundTitle={i18n.getString('inboundCall', currentLocale)}\n            outboundTitle={i18n.getString('outboundCall', currentLocale)}\n            missedTitle={i18n.getString('missedCall', currentLocale)}\n            isOnConferenceCall={isOnConferenceCall}\n            showAvatar={showAvatar}\n            avatarUrl={avatarUrl}\n          />\n          <div className={styles.infoWrapper}>\n            <ContactDisplay\n              isOnConferenceCall={isOnConferenceCall}\n              contactName={contactName}\n              className={\n                isOnConferenceCall\n                  ? classnames(styles.conferenceContactDisplay)\n                  : classnames(styles.contactDisplay, contactDisplayStyle)\n              }\n              contactMatches={contactMatches}\n              selected={this.state.selected}\n              onSelectContact={this.onSelectContact}\n              disabled={disableLinks}\n              isLogging={isLogging || this.state.isLogging}\n              fallBackName={fallbackContactName}\n              enableContactFallback={enableContactFallback}\n              areaCode={areaCode}\n              countryCode={countryCode}\n              phoneNumber={phoneNumber}\n              currentLocale={currentLocale}\n              brand={brand}\n              showPlaceholder={showContactDisplayPlaceholder}\n              showType={false}\n              sourceIcons={sourceIcons}\n              phoneTypeRenderer={phoneTypeRenderer}\n              phoneSourceNameRenderer={phoneSourceNameRenderer}\n              stopPropagation\n            />\n            {isOnConferenceCall ? null : callDetail}\n          </div>\n          <WebphoneButtons\n            session={webphoneSession}\n            webphoneAnswer={webphoneAnswer}\n            webphoneReject={this.webphoneToVoicemail}\n            webphoneHangup={webphoneHangup}\n            webphoneResume={webphoneResume}\n            currentLocale={currentLocale}\n            showAnswer={showAnswer}\n          />\n          {extraButton}\n        </div>\n        {hasActionMenu ? (\n          <ActionMenu\n            extended={this.state.extended}\n            onToggle={this.toggleExtended}\n            currentLocale={currentLocale}\n            disableLinks={disableLinks}\n            phoneNumber={phoneNumber}\n            onClickToSms={\n              readTextPermission\n                ? () => this.clickToSms({ countryCode, areaCode })\n                : undefined\n            }\n            hasEntity={!!contactMatches.length}\n            onViewEntity={onViewContact && this.viewSelectedContact}\n            onCreateEntity={onCreateContact && this.createSelectedContact}\n            createEntityTypes={createEntityTypes}\n            textTitle={i18n.getString('text', currentLocale)}\n            onLog={onLogCall}\n            isLogging={isLogging || this.state.isLogging}\n            isLogged={activityMatches.length > 0}\n            isCreating={this.state.isCreating}\n            addLogTitle={i18n.getString('addLog', currentLocale)}\n            editLogTitle={i18n.getString('editLog', currentLocale)}\n            createEntityTitle={i18n.getString('addEntity', currentLocale)}\n            viewEntityTitle={i18n.getString('viewDetails', currentLocale)}\n            externalViewEntity={externalViewEntity && this.externalViewEntity}\n            externalHasEntity={\n              externalHasEntity && externalHasEntity(this.props.call)\n            }\n            disableClickToSms={disableClickToSms}\n          />\n        ) : null}\n      </div>\n    );\n  }\n}\n\nActiveCallItem.propTypes = {\n  call: PropTypes.shape({\n    direction: PropTypes.string.isRequired,\n    telephonyStatus: PropTypes.string,\n    startTime: PropTypes.number.isRequired,\n    activityMatches: PropTypes.array.isRequired,\n    fromMatches: PropTypes.array.isRequired,\n    toMatches: PropTypes.array.isRequired,\n    from: PropTypes.shape({\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n      name: PropTypes.string,\n    }).isRequired,\n    to: PropTypes.shape({\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n      name: PropTypes.string,\n    }),\n    webphoneSession: PropTypes.object,\n  }).isRequired,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  disableLinks: PropTypes.bool,\n  outboundSmsPermission: PropTypes.bool,\n  internalSmsPermission: PropTypes.bool,\n  isLogging: PropTypes.bool,\n  webphoneAnswer: PropTypes.func,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  webphoneToVoicemail: PropTypes.func,\n  enableContactFallback: PropTypes.bool,\n  autoLog: PropTypes.bool,\n  brand: PropTypes.string,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  formatPhone: PropTypes.func.isRequired,\n  onClickToSms: PropTypes.func,\n  onCreateContact: PropTypes.func,\n  createEntityTypes: PropTypes.array,\n  onLogCall: PropTypes.func,\n  onViewContact: PropTypes.func,\n  sourceIcons: PropTypes.object,\n  phoneTypeRenderer: PropTypes.func,\n  phoneSourceNameRenderer: PropTypes.func,\n  renderContactName: PropTypes.func,\n  renderExtraButton: PropTypes.func,\n  contactDisplayStyle: PropTypes.string,\n  externalViewEntity: PropTypes.func,\n  externalHasEntity: PropTypes.func,\n  readTextPermission: PropTypes.bool,\n  isOnConferenceCall: PropTypes.bool,\n  hasActionMenu: PropTypes.bool,\n  showAnswer: PropTypes.bool,\n  avatarUrl: PropTypes.string,\n  showAvatar: PropTypes.bool,\n  showCallDetail: PropTypes.bool,\n};\n\nActiveCallItem.defaultProps = {\n  onLogCall: undefined,\n  onClickToSms: undefined,\n  onViewContact: undefined,\n  onCreateContact: undefined,\n  createEntityTypes: undefined,\n  isLogging: false,\n  outboundSmsPermission: false,\n  internalSmsPermission: false,\n  disableLinks: false,\n  webphoneAnswer: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  webphoneToVoicemail: undefined,\n  enableContactFallback: undefined,\n  autoLog: false,\n  brand: 'RingCentral',\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  phoneTypeRenderer: undefined,\n  phoneSourceNameRenderer: undefined,\n  renderContactName: undefined,\n  renderExtraButton: undefined,\n  contactDisplayStyle: undefined,\n  externalViewEntity: undefined,\n  externalHasEntity: undefined,\n  readTextPermission: true,\n  isOnConferenceCall: false,\n  hasActionMenu: true,\n  showAnswer: true,\n  avatarUrl: null,\n  showAvatar: false,\n  showCallDetail: true,\n};\n\nexport default ActiveCallItem;\n"],"file":"index.js"}