{"version":3,"file":"index.js","names":["_isBlank","require","_clsx","_interopRequireDefault","_propTypes","_react","_interopRequireWildcard","_FileAttachmentRender","_ImageAttachmentRender","_SubjectRender","_i18n","_styles","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","asyncGeneratorStep","o","c","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_classCallCheck","TypeError","_defineProperties","length","enumerable","configurable","writable","_toPropertyKey","key","_createClass","prototype","_toPrimitive","Symbol","toPrimitive","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","Message","_ref","subject","time","direction","sender","SubjectRenderer","subjectRenderer","mmsAttachments","currentLocale","onAttachmentDownload","onLinkClick","handleImageLoad","subjectNode","isBlank","SubjectComp","DefaultRender","createElement","imageAttachments","filter","m","contentType","indexOf","map","attachment","ImageAttachmentRender","id","otherAttachments","concat","className","clsx","styles","messageBody","outbound","inbound","FileAttachmentRender","message","big","imageBody","Fragment","clear","exports","propTypes","PropTypes","string","isRequired","func","array","defaultProps","undefined","ConversationMessageList","_Component","_super","_this","_len","args","Array","_key","_listRef","_scrollHeight","_scrollTop","_scrollUp","onScroll","regeneratorRuntime","mark","_callee","currentScrollTop","clientHeight","wrap","_callee$","_context","prev","next","abrupt","scrollTop","scrollHeight","props","loadPreviousMessages","stop","scrollToLastMessage","componentDidMount","componentDidUpdate","previousProps","messages","render","_this2","_this$props","dateTimeFormatter","showSender","height","messageSubjectRenderer","formatPhone","loadingNextPage","lastDate","messageList","from","name","extensionNumber","phoneNumber","date","Date","creationTime","getHours","utcTimestamp","type","loading","i18n","getString","root","style","ref","body","Component","arrayOf","shape","number","bool","oneOfType","_default"],"sources":["components/ConversationMessageList/index.tsx"],"sourcesContent":["import { isBlank } from '@ringcentral-integration/commons/lib/isBlank';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { FileAttachmentRender } from './FileAttachmentRender';\nimport { ImageAttachmentRender } from './ImageAttachmentRender';\nimport { SubjectRender as DefaultRender } from './SubjectRender';\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nexport const Message = ({\n  subject,\n  time,\n  direction,\n  sender,\n  subjectRenderer: SubjectRenderer,\n  mmsAttachments,\n  currentLocale,\n  onAttachmentDownload,\n  onLinkClick,\n  handleImageLoad,\n}: any) => {\n  let subjectNode;\n  if (subject && !isBlank(subject)) {\n    const SubjectComp = SubjectRenderer || DefaultRender;\n    subjectNode = <SubjectComp subject={subject} onLinkClick={onLinkClick} />;\n  }\n  const imageAttachments = mmsAttachments\n    .filter((m: any) => m.contentType.indexOf('image') > -1)\n    .map((attachment: any) => {\n      return (\n        <ImageAttachmentRender\n          key={attachment.id}\n          attachment={attachment}\n          handleImageLoad={handleImageLoad}\n        />\n      );\n    });\n  const otherAttachments = mmsAttachments\n    .filter((m: any) => m.contentType.indexOf('image') === -1)\n    .map((attachment: any) => {\n      return (\n        <div\n          key={attachment.id}\n          data-sign={`${direction}Attachment`}\n          className={clsx(\n            styles.messageBody,\n            direction === 'Outbound' ? styles.outbound : styles.inbound,\n          )}\n        >\n          <FileAttachmentRender\n            attachment={attachment}\n            currentLocale={currentLocale}\n            onLinkClick={onAttachmentDownload}\n          />\n        </div>\n      );\n    });\n  return (\n    <div data-sign=\"message\" className={styles.message}>\n      {time ? (\n        <div className={styles.time} data-sign=\"conversationSendTime\">\n          {time}\n        </div>\n      ) : null}\n      {sender && direction === 'Inbound' ? (\n        <div className={styles.sender}>{sender}</div>\n      ) : null}\n      {!isBlank(subject) && (\n        <div\n          data-sign={`${direction}Text`}\n          className={clsx(\n            styles.messageBody,\n            direction === 'Outbound' ? styles.outbound : styles.inbound,\n            subject && subject.length > 500 && styles.big,\n          )}\n        >\n          {subjectNode}\n        </div>\n      )}\n      {imageAttachments.length > 0 && (\n        <div\n          data-sign={`${direction}Image`}\n          className={clsx(\n            styles.imageBody,\n            direction === 'Outbound' ? styles.outbound : styles.inbound,\n          )}\n        >\n          {imageAttachments}\n        </div>\n      )}\n      {otherAttachments.length > 0 && <>{otherAttachments}</>}\n      <div className={styles.clear} />\n    </div>\n  );\n};\n\nMessage.propTypes = {\n  direction: PropTypes.string.isRequired,\n  subject: PropTypes.string,\n  time: PropTypes.string,\n  sender: PropTypes.string,\n  subjectRenderer: PropTypes.func,\n  mmsAttachments: PropTypes.array,\n  currentLocale: PropTypes.string.isRequired,\n  onAttachmentDownload: PropTypes.func,\n  onLinkClick: PropTypes.func,\n  handleImageLoad: PropTypes.func,\n};\n\nMessage.defaultProps = {\n  subject: '',\n  sender: undefined,\n  time: undefined,\n  subjectRenderer: undefined,\n  mmsAttachments: [],\n  onAttachmentDownload: undefined,\n  handleImageLoad: undefined,\n};\n\nclass ConversationMessageList extends Component {\n  _listRef: any;\n  _scrollHeight: any;\n  _scrollTop: any;\n  _scrollUp: any;\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  componentDidMount() {\n    this.scrollToLastMessage();\n  }\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  componentDidUpdate(previousProps: any) {\n    // @ts-expect-error TS(2339): Property 'messages' does not exist on type 'Readon... Remove this comment to see the full error message\n    if (previousProps.messages.length === this.props.messages.length) {\n      return;\n    }\n    if (!this._scrollUp) {\n      this.scrollToLastMessage();\n    } else if (\n      this._listRef &&\n      this._scrollHeight !== this._listRef.scrollHeight\n    ) {\n      this._listRef.scrollTop +=\n        this._listRef.scrollHeight - this._scrollHeight;\n    }\n  }\n\n  onScroll = async () => {\n    if (!this._listRef) {\n      return;\n    }\n    const currentScrollTop = this._listRef.scrollTop;\n    this._scrollHeight = this._listRef.scrollHeight;\n    const clientHeight = this._listRef.clientHeight;\n    if (currentScrollTop < this._scrollTop) {\n      // user scroll up\n      this._scrollUp = true;\n    } else if (currentScrollTop + clientHeight > this._scrollHeight - 200) {\n      // user scroll down to bottom\n      this._scrollUp = false;\n    }\n    if (currentScrollTop < 20 && this._scrollTop >= 20) {\n      // @ts-expect-error TS(2339): Property 'loadPreviousMessages' does not exist on ... Remove this comment to see the full error message\n      this.props.loadPreviousMessages();\n    }\n    this._scrollTop = currentScrollTop;\n  };\n\n  scrollToLastMessage = () => {\n    if (this._listRef) {\n      this._listRef.scrollTop = this._listRef.scrollHeight;\n    }\n  };\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  render() {\n    const {\n      // @ts-expect-error TS(2339): Property 'className' does not exist on type 'Reado... Remove this comment to see the full error message\n      className,\n      // @ts-expect-error TS(2339): Property 'dateTimeFormatter' does not exist on typ... Remove this comment to see the full error message\n      dateTimeFormatter,\n      // @ts-expect-error TS(2339): Property 'messages' does not exist on type 'Readon... Remove this comment to see the full error message\n      messages,\n      // @ts-expect-error TS(2339): Property 'showSender' does not exist on type 'Read... Remove this comment to see the full error message\n      showSender,\n      // @ts-expect-error TS(2339): Property 'height' does not exist on type 'Readonly... Remove this comment to see the full error message\n      height,\n      // @ts-expect-error TS(2339): Property 'messageSubjectRenderer' does not exist o... Remove this comment to see the full error message\n      messageSubjectRenderer,\n      // @ts-expect-error TS(2339): Property 'formatPhone' does not exist on type 'Rea... Remove this comment to see the full error message\n      formatPhone,\n      // @ts-expect-error TS(2339): Property 'loadingNextPage' does not exist on type ... Remove this comment to see the full error message\n      loadingNextPage,\n      // @ts-expect-error TS(2339): Property 'currentLocale' does not exist on type 'R... Remove this comment to see the full error message\n      currentLocale,\n      // @ts-expect-error TS(2339): Property 'onAttachmentDownload' does not exist on ... Remove this comment to see the full error message\n      onAttachmentDownload,\n      // @ts-expect-error TS(2339): Property 'onLinkClick' does not exist on ... Remove this comment to see the full error message\n      onLinkClick,\n    } = this.props;\n\n    let lastDate = 0;\n    const messageList = messages.map((message: any) => {\n      const sender = showSender\n        ? message.from.name ||\n          formatPhone(message.from.extensionNumber || message.from.phoneNumber)\n        : null;\n      const date = new Date(message.creationTime);\n      const time =\n        // @ts-expect-error TS(2362): The left-hand side of an arithmetic operation must... Remove this comment to see the full error message\n        date - lastDate < 60 * 60 * 1000 &&\n        // @ts-expect-error TS(2339): Property 'getHours' does not exist on type 'number... Remove this comment to see the full error message\n        date.getHours() === lastDate.getHours()\n          ? null\n          : dateTimeFormatter({\n              utcTimestamp: message.creationTime,\n              type: 'long',\n            });\n      // @ts-expect-error TS(2322): Type 'Date' is not assignable to type 'number'.\n      lastDate = date;\n      return (\n        <Message\n          key={message.id}\n          sender={sender}\n          time={time}\n          direction={message.direction}\n          subject={message.subject}\n          subjectRenderer={messageSubjectRenderer}\n          mmsAttachments={message.mmsAttachments}\n          currentLocale={currentLocale}\n          onAttachmentDownload={onAttachmentDownload}\n          onLinkClick={onLinkClick}\n          handleImageLoad={() => {\n            if (!this._scrollUp) {\n              this.scrollToLastMessage();\n            }\n          }}\n        />\n      );\n    });\n    const loading = loadingNextPage ? (\n      <div className={styles.loading}>\n        {i18n.getString('loading', currentLocale)}\n      </div>\n    ) : null;\n    return (\n      <div\n        className={clsx(styles.root, className)}\n        style={{ height }}\n        ref={(body) => {\n          this._listRef = body;\n        }}\n        onScroll={this.onScroll}\n      >\n        {loading}\n        {messageList}\n      </div>\n    );\n  }\n}\n\n// @ts-expect-error TS(2339): Property 'propTypes' does not exist on type 'typeo... Remove this comment to see the full error message\nConversationMessageList.propTypes = {\n  currentLocale: PropTypes.string,\n  messages: PropTypes.arrayOf(\n    PropTypes.shape({\n      creationTime: PropTypes.number,\n      id: PropTypes.number,\n      direction: PropTypes.string,\n      subject: PropTypes.string,\n      mmsAttachments: PropTypes.array,\n    }),\n  ).isRequired,\n  className: PropTypes.string,\n  showSender: PropTypes.bool,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  messageSubjectRenderer: PropTypes.func,\n  formatPhone: PropTypes.func.isRequired,\n  loadPreviousMessages: PropTypes.func,\n  loadingNextPage: PropTypes.bool,\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  onAttachmentDownload: PropTypes.func,\n};\n\n// @ts-expect-error TS(2339): Property 'defaultProps' does not exist on type 'ty... Remove this comment to see the full error message\nConversationMessageList.defaultProps = {\n  currentLocale: 'en-US',\n  className: null,\n  showSender: false,\n  messageSubjectRenderer: undefined,\n  height: '100%',\n  loadingNextPage: false,\n  loadPreviousMessages: () => null,\n  onAttachmentDownload: undefined,\n};\n\nexport default ConversationMessageList;\n"],"mappings":"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","ignoreList":[]}