{"version":3,"file":"index.js","names":["_react","_interopRequireWildcard","require","_classnames","_interopRequireDefault","_propTypes","_isBlank","_juno","_junoIcon","_i18n","_styles","_SubjectRender","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_toPropertyKey","_createClass","protoProps","staticProps","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","getExtFromContentType","contentType","ext","split","Message","_ref","subject","time","direction","sender","SubjectRenderer","subjectRenderer","mmsAttachments","currentLocale","onAttachmentDownload","onLinkClick","subjectNode","isBlank","SubjectComp","DefaultRender","createElement","imageAttachments","filter","m","indexOf","map","attachment","id","src","uri","alt","concat","className","styles","picture","otherAttachments","fileName","title","file","RcIcon","size","symbol","fileSvg","download","onClick","i18n","getString","href","downloadSvg","message","classnames","messageBody","outbound","inbound","big","clear","exports","propTypes","PropTypes","string","isRequired","func","array","defaultProps","ConversationMessageList","_Component","_super","_this","_len","Array","_key","_listRef","_scrollHeight","_scrollTop","_scrollUp","onScroll","regeneratorRuntime","mark","_callee","currentScrollTop","clientHeight","wrap","_callee$","_context","prev","next","abrupt","scrollTop","scrollHeight","loadPreviousMessages","stop","scrollToLastMessage","componentDidMount","componentDidUpdate","previousProps","messages","render","_this2","_this$props","dateTimeFormatter","showSender","height","messageSubjectRenderer","formatPhone","loadingNextPage","lastDate","messageList","from","name","extensionNumber","phoneNumber","date","Date","creationTime","getHours","utcTimestamp","type","loading","root","style","ref","body","Component","arrayOf","shape","number","bool","oneOfType","_default"],"sources":["components/ConversationMessageList/index.tsx"],"sourcesContent":["import React, { Component } from 'react';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport { isBlank } from '@ringcentral-integration/commons/lib/isBlank';\nimport { RcIcon } from '@ringcentral/juno';\nimport {\n  DefaultFile as fileSvg,\n  Download as downloadSvg,\n} from '@ringcentral/juno-icon';\n\nimport i18n from './i18n';\nimport styles from './styles.scss';\nimport { SubjectRender as DefaultRender } from './SubjectRender';\n\nfunction getExtFromContentType(contentType: any) {\n  const ext = contentType.split('/');\n  return ext[1].split('+')[0];\n}\n\nexport const Message = ({\n  subject,\n  time,\n  direction,\n  sender,\n  subjectRenderer: SubjectRenderer,\n  mmsAttachments,\n  currentLocale,\n  onAttachmentDownload,\n  onLinkClick,\n}: any) => {\n  let subjectNode;\n  if (subject && !isBlank(subject)) {\n    const SubjectComp = SubjectRenderer || DefaultRender;\n    subjectNode = <SubjectComp subject={subject} onLinkClick={onLinkClick} />;\n  }\n  const imageAttachments = mmsAttachments\n    .filter((m: any) => m.contentType.indexOf('image') > -1)\n    .map((attachment: any) => {\n      return (\n        <img\n          key={attachment.id}\n          src={attachment.uri}\n          alt={`attachment${attachment.id}`}\n          className={styles.picture}\n        />\n      );\n    });\n  const otherAttachments = mmsAttachments\n    .filter((m: any) => m.contentType.indexOf('image') === -1)\n    .map((attachment: any) => {\n      const fileName =\n        attachment.fileName ||\n        `${attachment.id}.${getExtFromContentType(attachment.contentType)}`;\n      return (\n        <div key={attachment.id} title={fileName} className={styles.file}>\n          <RcIcon size=\"small\" symbol={fileSvg} />\n          <span className={styles.fileName}>{fileName}</span>\n          <a\n            target=\"_blank\"\n            className={styles.download}\n            download={fileName}\n            onClick={(e) => {\n              if (typeof onAttachmentDownload === 'function') {\n                onAttachmentDownload(attachment.uri, e);\n              }\n            }}\n            title={i18n.getString('download', currentLocale)}\n            href={`${attachment.uri}&contentDisposition=Attachment`}\n          >\n            <RcIcon size=\"small\" symbol={downloadSvg} />\n          </a>\n        </div>\n      );\n    });\n  return (\n    <div data-sign=\"message\" className={styles.message}>\n      {time ? (\n        <div className={styles.time} data-sign=\"conversationSendTime\">\n          {time}\n        </div>\n      ) : null}\n      {sender && direction === 'Inbound' ? (\n        <div className={styles.sender}>{sender}</div>\n      ) : null}\n      <div\n        data-sign={`${direction}Text`}\n        className={classnames(\n          styles.messageBody,\n          direction === 'Outbound' ? styles.outbound : styles.inbound,\n          subject && subject.length > 500 && styles.big,\n        )}\n      >\n        {subjectNode}\n        {imageAttachments}\n        {otherAttachments}\n      </div>\n      <div className={styles.clear} />\n    </div>\n  );\n};\n\nMessage.propTypes = {\n  direction: PropTypes.string.isRequired,\n  subject: PropTypes.string,\n  time: PropTypes.string,\n  sender: PropTypes.string,\n  subjectRenderer: PropTypes.func,\n  mmsAttachments: PropTypes.array,\n  currentLocale: PropTypes.string.isRequired,\n  onAttachmentDownload: PropTypes.func,\n  onLinkClick: PropTypes.func,\n};\n\nMessage.defaultProps = {\n  subject: '',\n  sender: undefined,\n  time: undefined,\n  subjectRenderer: undefined,\n  mmsAttachments: [],\n  onAttachmentDownload: undefined,\n};\n\nclass ConversationMessageList extends Component {\n  _listRef: any;\n  _scrollHeight: any;\n  _scrollTop: any;\n  _scrollUp: any;\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  componentDidMount() {\n    this.scrollToLastMessage();\n  }\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  componentDidUpdate(previousProps: any) {\n    // @ts-expect-error TS(2339): Property 'messages' does not exist on type 'Readon... Remove this comment to see the full error message\n    if (previousProps.messages.length === this.props.messages.length) {\n      return;\n    }\n    if (!this._scrollUp) {\n      this.scrollToLastMessage();\n    } else if (\n      this._listRef &&\n      this._scrollHeight !== this._listRef.scrollHeight\n    ) {\n      this._listRef.scrollTop +=\n        this._listRef.scrollHeight - this._scrollHeight;\n    }\n  }\n\n  onScroll = async () => {\n    if (!this._listRef) {\n      return;\n    }\n    const currentScrollTop = this._listRef.scrollTop;\n    this._scrollHeight = this._listRef.scrollHeight;\n    const clientHeight = this._listRef.clientHeight;\n    if (currentScrollTop < this._scrollTop) {\n      // user scroll up\n      this._scrollUp = true;\n    } else if (currentScrollTop + clientHeight > this._scrollHeight - 200) {\n      // user scroll down to bottom\n      this._scrollUp = false;\n    }\n    if (currentScrollTop < 20 && this._scrollTop >= 20) {\n      // @ts-expect-error TS(2339): Property 'loadPreviousMessages' does not exist on ... Remove this comment to see the full error message\n      this.props.loadPreviousMessages();\n    }\n    this._scrollTop = currentScrollTop;\n  };\n\n  scrollToLastMessage = () => {\n    if (this._listRef) {\n      this._listRef.scrollTop = this._listRef.scrollHeight;\n    }\n  };\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  render() {\n    const {\n      // @ts-expect-error TS(2339): Property 'className' does not exist on type 'Reado... Remove this comment to see the full error message\n      className,\n      // @ts-expect-error TS(2339): Property 'dateTimeFormatter' does not exist on typ... Remove this comment to see the full error message\n      dateTimeFormatter,\n      // @ts-expect-error TS(2339): Property 'messages' does not exist on type 'Readon... Remove this comment to see the full error message\n      messages,\n      // @ts-expect-error TS(2339): Property 'showSender' does not exist on type 'Read... Remove this comment to see the full error message\n      showSender,\n      // @ts-expect-error TS(2339): Property 'height' does not exist on type 'Readonly... Remove this comment to see the full error message\n      height,\n      // @ts-expect-error TS(2339): Property 'messageSubjectRenderer' does not exist o... Remove this comment to see the full error message\n      messageSubjectRenderer,\n      // @ts-expect-error TS(2339): Property 'formatPhone' does not exist on type 'Rea... Remove this comment to see the full error message\n      formatPhone,\n      // @ts-expect-error TS(2339): Property 'loadingNextPage' does not exist on type ... Remove this comment to see the full error message\n      loadingNextPage,\n      // @ts-expect-error TS(2339): Property 'currentLocale' does not exist on type 'R... Remove this comment to see the full error message\n      currentLocale,\n      // @ts-expect-error TS(2339): Property 'onAttachmentDownload' does not exist on ... Remove this comment to see the full error message\n      onAttachmentDownload,\n      // @ts-expect-error TS(2339): Property 'onLinkClick' does not exist on ... Remove this comment to see the full error message\n      onLinkClick,\n    } = this.props;\n\n    let lastDate = 0;\n    const messageList = messages.map((message: any) => {\n      const sender = showSender\n        ? message.from.name ||\n          formatPhone(message.from.extensionNumber || message.from.phoneNumber)\n        : null;\n      const date = new Date(message.creationTime);\n      const time =\n        // @ts-expect-error TS(2362): The left-hand side of an arithmetic operation must... Remove this comment to see the full error message\n        date - lastDate < 60 * 60 * 1000 &&\n        // @ts-expect-error TS(2339): Property 'getHours' does not exist on type 'number... Remove this comment to see the full error message\n        date.getHours() === lastDate.getHours()\n          ? null\n          : dateTimeFormatter({\n              utcTimestamp: message.creationTime,\n              type: 'long',\n            });\n      // @ts-expect-error TS(2322): Type 'Date' is not assignable to type 'number'.\n      lastDate = date;\n      return (\n        <Message\n          key={message.id}\n          sender={sender}\n          time={time}\n          direction={message.direction}\n          subject={message.subject}\n          subjectRenderer={messageSubjectRenderer}\n          mmsAttachments={message.mmsAttachments}\n          currentLocale={currentLocale}\n          onAttachmentDownload={onAttachmentDownload}\n          onLinkClick={onLinkClick}\n        />\n      );\n    });\n    const loading = loadingNextPage ? (\n      <div className={styles.loading}>\n        {i18n.getString('loading', currentLocale)}\n      </div>\n    ) : null;\n    return (\n      <div\n        className={classnames(styles.root, className)}\n        style={{ height }}\n        ref={(body) => {\n          this._listRef = body;\n        }}\n        onScroll={this.onScroll}\n      >\n        {loading}\n        {messageList}\n      </div>\n    );\n  }\n}\n\n// @ts-expect-error TS(2339): Property 'propTypes' does not exist on type 'typeo... Remove this comment to see the full error message\nConversationMessageList.propTypes = {\n  currentLocale: PropTypes.string,\n  messages: PropTypes.arrayOf(\n    PropTypes.shape({\n      creationTime: PropTypes.number,\n      id: PropTypes.number,\n      direction: PropTypes.string,\n      subject: PropTypes.string,\n      mmsAttachments: PropTypes.array,\n    }),\n  ).isRequired,\n  className: PropTypes.string,\n  showSender: PropTypes.bool,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  messageSubjectRenderer: PropTypes.func,\n  formatPhone: PropTypes.func.isRequired,\n  loadPreviousMessages: PropTypes.func,\n  loadingNextPage: PropTypes.bool,\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  onAttachmentDownload: PropTypes.func,\n};\n\n// @ts-expect-error TS(2339): Property 'defaultProps' does not exist on type 'ty... Remove this comment to see the full error message\nConversationMessageList.defaultProps = {\n  currentLocale: 'en-US',\n  className: null,\n  showSender: false,\n  messageSubjectRenderer: undefined,\n  height: '100%',\n  loadingNextPage: false,\n  loadPreviousMessages: () => null,\n  onAttachmentDownload: undefined,\n};\n\nexport default ConversationMessageList;\n"],"mappings":"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"}