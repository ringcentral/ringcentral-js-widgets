{"version":3,"file":"index.js","names":["_isBlank","require","_juno","_junoIcon","_clsx","_interopRequireDefault","_propTypes","_react","_interopRequireWildcard","_SubjectRender","_i18n","_styles","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","asyncGeneratorStep","o","c","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_classCallCheck","TypeError","_defineProperties","length","enumerable","configurable","writable","_toPropertyKey","key","_createClass","prototype","_toPrimitive","Symbol","toPrimitive","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","getExtFromContentType","contentType","ext","split","Message","_ref","subject","time","direction","sender","SubjectRenderer","subjectRenderer","mmsAttachments","currentLocale","onAttachmentDownload","onLinkClick","subjectNode","isBlank","SubjectComp","DefaultRender","createElement","imageAttachments","filter","m","indexOf","map","attachment","id","src","uri","alt","concat","className","styles","picture","otherAttachments","fileName","title","file","RcIcon","size","symbol","fileSvg","target","download","onClick","i18n","getString","href","downloadSvg","message","clsx","messageBody","outbound","inbound","big","clear","exports","propTypes","PropTypes","string","isRequired","func","array","defaultProps","undefined","ConversationMessageList","_Component","_super","_this","_len","args","Array","_key","_listRef","_scrollHeight","_scrollTop","_scrollUp","onScroll","regeneratorRuntime","mark","_callee","currentScrollTop","clientHeight","wrap","_callee$","_context","prev","next","abrupt","scrollTop","scrollHeight","props","loadPreviousMessages","stop","scrollToLastMessage","componentDidMount","componentDidUpdate","previousProps","messages","render","_this2","_this$props","dateTimeFormatter","showSender","height","messageSubjectRenderer","formatPhone","loadingNextPage","lastDate","messageList","from","name","extensionNumber","phoneNumber","date","Date","creationTime","getHours","utcTimestamp","type","loading","root","style","ref","body","Component","arrayOf","shape","number","bool","oneOfType","_default"],"sources":["components/ConversationMessageList/index.tsx"],"sourcesContent":["import { isBlank } from '@ringcentral-integration/commons/lib/isBlank';\nimport { RcIcon } from '@ringcentral/juno';\nimport {\n  DefaultFile as fileSvg,\n  Download as downloadSvg,\n} from '@ringcentral/juno-icon';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { SubjectRender as DefaultRender } from './SubjectRender';\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nfunction getExtFromContentType(contentType: any) {\n  const ext = contentType.split('/');\n  return ext[1].split('+')[0];\n}\n\nexport const Message = ({\n  subject,\n  time,\n  direction,\n  sender,\n  subjectRenderer: SubjectRenderer,\n  mmsAttachments,\n  currentLocale,\n  onAttachmentDownload,\n  onLinkClick,\n}: any) => {\n  let subjectNode;\n  if (subject && !isBlank(subject)) {\n    const SubjectComp = SubjectRenderer || DefaultRender;\n    subjectNode = <SubjectComp subject={subject} onLinkClick={onLinkClick} />;\n  }\n  const imageAttachments = mmsAttachments\n    .filter((m: any) => m.contentType.indexOf('image') > -1)\n    .map((attachment: any) => {\n      return (\n        <img\n          key={attachment.id}\n          src={attachment.uri}\n          alt={`attachment${attachment.id}`}\n          className={styles.picture}\n        />\n      );\n    });\n  const otherAttachments = mmsAttachments\n    .filter((m: any) => m.contentType.indexOf('image') === -1)\n    .map((attachment: any) => {\n      const fileName =\n        attachment.fileName ||\n        `${attachment.id}.${getExtFromContentType(attachment.contentType)}`;\n      return (\n        <div key={attachment.id} title={fileName} className={styles.file}>\n          <RcIcon size=\"small\" symbol={fileSvg} />\n          <span className={styles.fileName}>{fileName}</span>\n          <a\n            target=\"_blank\"\n            className={styles.download}\n            download={fileName}\n            onClick={(e) => {\n              if (typeof onAttachmentDownload === 'function') {\n                onAttachmentDownload(attachment.uri, e);\n              }\n            }}\n            title={i18n.getString('download', currentLocale)}\n            href={`${attachment.uri}&contentDisposition=Attachment`}\n          >\n            <RcIcon size=\"small\" symbol={downloadSvg} />\n          </a>\n        </div>\n      );\n    });\n  return (\n    <div data-sign=\"message\" className={styles.message}>\n      {time ? (\n        <div className={styles.time} data-sign=\"conversationSendTime\">\n          {time}\n        </div>\n      ) : null}\n      {sender && direction === 'Inbound' ? (\n        <div className={styles.sender}>{sender}</div>\n      ) : null}\n      <div\n        data-sign={`${direction}Text`}\n        className={clsx(\n          styles.messageBody,\n          direction === 'Outbound' ? styles.outbound : styles.inbound,\n          subject && subject.length > 500 && styles.big,\n        )}\n      >\n        {subjectNode}\n        {imageAttachments}\n        {otherAttachments}\n      </div>\n      <div className={styles.clear} />\n    </div>\n  );\n};\n\nMessage.propTypes = {\n  direction: PropTypes.string.isRequired,\n  subject: PropTypes.string,\n  time: PropTypes.string,\n  sender: PropTypes.string,\n  subjectRenderer: PropTypes.func,\n  mmsAttachments: PropTypes.array,\n  currentLocale: PropTypes.string.isRequired,\n  onAttachmentDownload: PropTypes.func,\n  onLinkClick: PropTypes.func,\n};\n\nMessage.defaultProps = {\n  subject: '',\n  sender: undefined,\n  time: undefined,\n  subjectRenderer: undefined,\n  mmsAttachments: [],\n  onAttachmentDownload: undefined,\n};\n\nclass ConversationMessageList extends Component {\n  _listRef: any;\n  _scrollHeight: any;\n  _scrollTop: any;\n  _scrollUp: any;\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  componentDidMount() {\n    this.scrollToLastMessage();\n  }\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  componentDidUpdate(previousProps: any) {\n    // @ts-expect-error TS(2339): Property 'messages' does not exist on type 'Readon... Remove this comment to see the full error message\n    if (previousProps.messages.length === this.props.messages.length) {\n      return;\n    }\n    if (!this._scrollUp) {\n      this.scrollToLastMessage();\n    } else if (\n      this._listRef &&\n      this._scrollHeight !== this._listRef.scrollHeight\n    ) {\n      this._listRef.scrollTop +=\n        this._listRef.scrollHeight - this._scrollHeight;\n    }\n  }\n\n  onScroll = async () => {\n    if (!this._listRef) {\n      return;\n    }\n    const currentScrollTop = this._listRef.scrollTop;\n    this._scrollHeight = this._listRef.scrollHeight;\n    const clientHeight = this._listRef.clientHeight;\n    if (currentScrollTop < this._scrollTop) {\n      // user scroll up\n      this._scrollUp = true;\n    } else if (currentScrollTop + clientHeight > this._scrollHeight - 200) {\n      // user scroll down to bottom\n      this._scrollUp = false;\n    }\n    if (currentScrollTop < 20 && this._scrollTop >= 20) {\n      // @ts-expect-error TS(2339): Property 'loadPreviousMessages' does not exist on ... Remove this comment to see the full error message\n      this.props.loadPreviousMessages();\n    }\n    this._scrollTop = currentScrollTop;\n  };\n\n  scrollToLastMessage = () => {\n    if (this._listRef) {\n      this._listRef.scrollTop = this._listRef.scrollHeight;\n    }\n  };\n\n  // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n  render() {\n    const {\n      // @ts-expect-error TS(2339): Property 'className' does not exist on type 'Reado... Remove this comment to see the full error message\n      className,\n      // @ts-expect-error TS(2339): Property 'dateTimeFormatter' does not exist on typ... Remove this comment to see the full error message\n      dateTimeFormatter,\n      // @ts-expect-error TS(2339): Property 'messages' does not exist on type 'Readon... Remove this comment to see the full error message\n      messages,\n      // @ts-expect-error TS(2339): Property 'showSender' does not exist on type 'Read... Remove this comment to see the full error message\n      showSender,\n      // @ts-expect-error TS(2339): Property 'height' does not exist on type 'Readonly... Remove this comment to see the full error message\n      height,\n      // @ts-expect-error TS(2339): Property 'messageSubjectRenderer' does not exist o... Remove this comment to see the full error message\n      messageSubjectRenderer,\n      // @ts-expect-error TS(2339): Property 'formatPhone' does not exist on type 'Rea... Remove this comment to see the full error message\n      formatPhone,\n      // @ts-expect-error TS(2339): Property 'loadingNextPage' does not exist on type ... Remove this comment to see the full error message\n      loadingNextPage,\n      // @ts-expect-error TS(2339): Property 'currentLocale' does not exist on type 'R... Remove this comment to see the full error message\n      currentLocale,\n      // @ts-expect-error TS(2339): Property 'onAttachmentDownload' does not exist on ... Remove this comment to see the full error message\n      onAttachmentDownload,\n      // @ts-expect-error TS(2339): Property 'onLinkClick' does not exist on ... Remove this comment to see the full error message\n      onLinkClick,\n    } = this.props;\n\n    let lastDate = 0;\n    const messageList = messages.map((message: any) => {\n      const sender = showSender\n        ? message.from.name ||\n          formatPhone(message.from.extensionNumber || message.from.phoneNumber)\n        : null;\n      const date = new Date(message.creationTime);\n      const time =\n        // @ts-expect-error TS(2362): The left-hand side of an arithmetic operation must... Remove this comment to see the full error message\n        date - lastDate < 60 * 60 * 1000 &&\n        // @ts-expect-error TS(2339): Property 'getHours' does not exist on type 'number... Remove this comment to see the full error message\n        date.getHours() === lastDate.getHours()\n          ? null\n          : dateTimeFormatter({\n              utcTimestamp: message.creationTime,\n              type: 'long',\n            });\n      // @ts-expect-error TS(2322): Type 'Date' is not assignable to type 'number'.\n      lastDate = date;\n      return (\n        <Message\n          key={message.id}\n          sender={sender}\n          time={time}\n          direction={message.direction}\n          subject={message.subject}\n          subjectRenderer={messageSubjectRenderer}\n          mmsAttachments={message.mmsAttachments}\n          currentLocale={currentLocale}\n          onAttachmentDownload={onAttachmentDownload}\n          onLinkClick={onLinkClick}\n        />\n      );\n    });\n    const loading = loadingNextPage ? (\n      <div className={styles.loading}>\n        {i18n.getString('loading', currentLocale)}\n      </div>\n    ) : null;\n    return (\n      <div\n        className={clsx(styles.root, className)}\n        style={{ height }}\n        ref={(body) => {\n          this._listRef = body;\n        }}\n        onScroll={this.onScroll}\n      >\n        {loading}\n        {messageList}\n      </div>\n    );\n  }\n}\n\n// @ts-expect-error TS(2339): Property 'propTypes' does not exist on type 'typeo... Remove this comment to see the full error message\nConversationMessageList.propTypes = {\n  currentLocale: PropTypes.string,\n  messages: PropTypes.arrayOf(\n    PropTypes.shape({\n      creationTime: PropTypes.number,\n      id: PropTypes.number,\n      direction: PropTypes.string,\n      subject: PropTypes.string,\n      mmsAttachments: PropTypes.array,\n    }),\n  ).isRequired,\n  className: PropTypes.string,\n  showSender: PropTypes.bool,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  messageSubjectRenderer: PropTypes.func,\n  formatPhone: PropTypes.func.isRequired,\n  loadPreviousMessages: PropTypes.func,\n  loadingNextPage: PropTypes.bool,\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  onAttachmentDownload: PropTypes.func,\n};\n\n// @ts-expect-error TS(2339): Property 'defaultProps' does not exist on type 'ty... Remove this comment to see the full error message\nConversationMessageList.defaultProps = {\n  currentLocale: 'en-US',\n  className: null,\n  showSender: false,\n  messageSubjectRenderer: undefined,\n  height: '100%',\n  loadingNextPage: false,\n  loadPreviousMessages: () => null,\n  onAttachmentDownload: undefined,\n};\n\nexport default ConversationMessageList;\n"],"mappings":"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","ignoreList":[]}