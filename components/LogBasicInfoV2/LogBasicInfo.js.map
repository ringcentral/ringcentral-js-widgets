{"version":3,"file":"LogBasicInfo.js","names":["_callDirections","_interopRequireDefault","require","_callResults","_telephonyStatus","_callLogHelpers","_formatDuration","_juno","_junoIcon","_clsx","_ramda","_react","_DynamicsFont","_DurationCounter","_RecordingIndicator","_CallIcon","_ShinyBar","_i18n","_styles","_styles2","_callIconMap","e","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","_extends","Object","assign","bind","n","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutProperties","i","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","_defineProperty","_toPropertyKey","defineProperty","value","enumerable","configurable","writable","_toPrimitive","toPrimitive","TypeError","String","Number","callIconMap","callResults","missed","dynamicsFont","callDirections","inbound","outbound","telephonyStatuses","ringing","callHover","conference","getInfoStatus","status","onHold","callConnected","SubCallInfoSection","_ref","_ref$displayCallLog","displayCallLog","logName","subContactNameDisplay","entityDetailLinkId","disabledSwitchButton","currentLocale","disableLinks","isWide","showRecordingIndicator","openEntityDetailLink","openEntityDetailLinkTrack","onSwitchWarmTransferSession","startTime","offset","duration","telephonyStatus","isRecording","getDurationElm","durationElement","createElement","DurationCounter","formatDuration","infoStatus","switchButtonDisabled","StyleSubBox","className","clsx","styles","root","classic","ShinyBar","top","SubInfoWrapper","RcIcon","symbol","Hold","size","color","SubInfoName","$isWide","title","concat","RcLink","variant","onClick","RcText","component","align","StyledSubSide","StyledSubRecordingIndicator","RecordingIndicator","subRecordingIndicator","StyledTransferSwitchButton","undefined","i18n","getString","disabled","ResendFax","ActiveCallInfoSection","_ref2","_ref2$displayCallLog","formatPhone","dataSign","dateTimeFormatter","toggleConference","conferenceParticipantsIsOpen","direction","to","from","result","isConferenceCall","conferenceParticipants","number","phoneNumber","extensionNumber","formatNumber","isMissed","statusI18n","isRinging","logBasicInfo","leftSectionInfo","CallIcon","iconClassName","icon","callDisplay","info","follow","RcTooltip","StyledParticipantsButton","radius","Team","time","StyledSide","recordingIndicator","utcTimestamp","locale","LogBasicInfo","React","memo","props","currentLog","subCallLog","rest","disabledCtrl","Fragment","prevProps","nextProps","_nextProps$currentLog","_prevProps$currentLog","_nextProps$currentLog2","isEmpty","defaultProps","_default","exports"],"sources":["components/LogBasicInfoV2/LogBasicInfo.tsx"],"sourcesContent":["import callDirections from '@ringcentral-integration/commons/enums/callDirections';\nimport { callResults } from '@ringcentral-integration/commons/enums/callResults';\nimport type { TelephonyStatus } from '@ringcentral-integration/commons/enums/telephonyStatus';\nimport telephonyStatuses from '@ringcentral-integration/commons/enums/telephonyStatus';\nimport type { Call } from '@ringcentral-integration/commons/interfaces/Call.interface';\nimport { isMissed } from '@ringcentral-integration/commons/lib/callLogHelpers';\nimport { formatDuration } from '@ringcentral-integration/commons/lib/formatDuration';\nimport { RcIcon, RcLink, RcText, RcTooltip } from '@ringcentral/juno';\nimport { Hold, ResendFax, Team } from '@ringcentral/juno-icon';\nimport clsx from 'clsx';\nimport { isEmpty } from 'ramda';\nimport type { FunctionComponent } from 'react';\nimport React from 'react';\n\nimport dynamicsFont from '../../assets/DynamicsFont/DynamicsFont.scss';\nimport { DurationCounter } from '../DurationCounter';\nimport { RecordingIndicator } from '../RecordingIndicator';\n\nimport { CallIcon } from './CallIcon';\nimport { ShinyBar } from './ShinyBar';\nimport i18n from './i18n';\nimport {\n  StyledSide,\n  StyledSubRecordingIndicator,\n  StyledSubSide,\n  StyledTransferSwitchButton,\n  StyleSubBox,\n  SubInfoName,\n  SubInfoWrapper,\n  StyledParticipantsButton,\n} from './styles';\nimport styles from './styles.scss';\n\nconst callIconMap = {\n  [callResults.missed]: dynamicsFont.missed,\n  [callDirections.inbound]: dynamicsFont.inbound,\n  [callDirections.outbound]: dynamicsFont.outbound,\n  [telephonyStatuses.ringing]: dynamicsFont.callHover,\n  conferenceCall: dynamicsFont.conference,\n};\nfunction getInfoStatus(status?: TelephonyStatus) {\n  switch (status) {\n    case telephonyStatuses.onHold:\n      return 'onHold';\n    case telephonyStatuses.callConnected:\n    case telephonyStatuses.ringing:\n      return 'active';\n    default:\n      return 'callEnd';\n  }\n}\n\ninterface ILogInfo {\n  call?: Call;\n  logName?: string;\n  subContactNameDisplay?: string;\n  entityDetailLinkId?: string;\n}\n\ntype LogBasicInfoProps = {\n  currentLocale?: string;\n  formatPhone?: (...args: any[]) => string;\n  currentLog?: ILogInfo;\n  subCallLog?: ILogInfo;\n  dataSign?: string;\n  disableLinks?: boolean;\n  dateTimeFormatter: (...args: any[]) => any;\n  isWide?: boolean;\n  className?: string;\n  showRecordingIndicator?: boolean;\n  openEntityDetailLinkTrack?: (...args: any[]) => any;\n  openEntityDetailLink: (entityDetailLinkId: string) => any;\n  onSwitchWarmTransferSession?: () => any;\n  disabledSwitchButton: boolean;\n  toggleConference: (open: boolean) => any;\n  conferenceParticipantsIsOpen: boolean;\n};\n\ntype CallInfoProps = Omit<LogBasicInfoProps, 'currentLog'> & {\n  displayCallLog: ILogInfo;\n};\n\nconst SubCallInfoSection: FunctionComponent<CallInfoProps> = ({\n  displayCallLog: { call, logName, subContactNameDisplay, entityDetailLinkId },\n  disabledSwitchButton,\n  currentLocale,\n  disableLinks,\n  isWide,\n  showRecordingIndicator,\n  openEntityDetailLink,\n  openEntityDetailLinkTrack,\n  onSwitchWarmTransferSession,\n}) => {\n  if (!call) return null;\n  const { startTime, offset, duration, telephonyStatus, isRecording } = call;\n\n  function getDurationElm() {\n    let durationElement = null;\n    if (typeof duration === 'undefined') {\n      durationElement = disableLinks ? (\n        // TODO: should find what is that key, this unavailable is not exist\n        // i18n.getString('unavailable', currentLocale)\n        'unavailable'\n      ) : (\n        <DurationCounter startTime={startTime} offset={offset} />\n      );\n    } else {\n      durationElement = formatDuration(duration);\n    }\n    return durationElement;\n  }\n  const durationElement = getDurationElm();\n  const infoStatus = getInfoStatus(telephonyStatus);\n  const switchButtonDisabled = disableLinks || disabledSwitchButton;\n  return (\n    <StyleSubBox>\n      <div\n        data-sign=\"subLogSection\"\n        className={clsx(\n          styles.root,\n          !isWide && styles.classic,\n          styles[infoStatus],\n        )}\n      >\n        <ShinyBar className={styles.top} status={infoStatus} />\n        <SubInfoWrapper>\n          <RcIcon\n            data-sign=\"subInfoHoldIcon\"\n            symbol={Hold}\n            size=\"small\"\n            color=\"nav.f02\"\n          />\n          <SubInfoName\n            $isWide={isWide}\n            className={styles.logName}\n            title={`${\n              subContactNameDisplay\n                ? `${logName} ${subContactNameDisplay}`\n                : logName\n            }`}\n            data-sign=\"subLogName\"\n          >\n            {entityDetailLinkId ? (\n              <RcLink\n                variant=\"inherit\"\n                onClick={() => {\n                  openEntityDetailLink?.(entityDetailLinkId);\n                  openEntityDetailLinkTrack?.('call log page');\n                }}\n              >\n                {logName}\n              </RcLink>\n            ) : (\n              logName\n            )}\n            {subContactNameDisplay && (\n              <RcText\n                color=\"neutral.f04\"\n                component=\"span\"\n                align=\"center\"\n                variant=\"caption1\"\n              >\n                {` ${subContactNameDisplay}`}\n              </RcText>\n            )}\n          </SubInfoName>\n          <StyledSubSide>\n            <p data-sign=\"subCallDuration\">{durationElement}</p>\n            {showRecordingIndicator && isRecording && (\n              <StyledSubRecordingIndicator>\n                <RecordingIndicator\n                  className={styles.subRecordingIndicator}\n                  data-sign=\"subRecordingIndicator\"\n                />\n              </StyledSubRecordingIndicator>\n            )}\n          </StyledSubSide>\n        </SubInfoWrapper>\n      </div>\n      <StyledTransferSwitchButton\n        data-sign=\"warmTransferSwitchCallButton\"\n        variant=\"contained\"\n        color=\"neutral.b01\"\n        size=\"small\"\n        onClick={onSwitchWarmTransferSession}\n        title={\n          switchButtonDisabled\n            ? undefined\n            : i18n.getString('warmTransferSwitchCall', currentLocale)\n        }\n        disabled={switchButtonDisabled}\n      >\n        <RcIcon color=\"interactive.b02\" size=\"inherit\" symbol={ResendFax} />\n      </StyledTransferSwitchButton>\n    </StyleSubBox>\n  );\n};\n\nconst ActiveCallInfoSection: FunctionComponent<CallInfoProps> = ({\n  displayCallLog: { call, logName, subContactNameDisplay, entityDetailLinkId },\n  formatPhone,\n  currentLocale,\n  dataSign,\n  disableLinks,\n  dateTimeFormatter,\n  isWide,\n  className,\n  showRecordingIndicator,\n  openEntityDetailLinkTrack,\n  openEntityDetailLink,\n  toggleConference,\n  conferenceParticipantsIsOpen,\n}) => {\n  if (!call) return null;\n\n  const {\n    direction,\n    to,\n    from,\n    startTime,\n    offset,\n    duration,\n    result,\n    telephonyStatus,\n    isRecording,\n    isConferenceCall,\n    conferenceParticipants,\n  } = call;\n\n  function getDurationElm() {\n    let durationElement = null;\n    if (typeof duration === 'undefined') {\n      durationElement = disableLinks ? (\n        // TODO: should find what is that key, this unavailable is not exist\n        // i18n.getString('unavailable', currentLocale)\n        'unavailable'\n      ) : (\n        <DurationCounter startTime={startTime} offset={offset} />\n      );\n    } else {\n      durationElement = formatDuration(duration);\n    }\n    return durationElement;\n  }\n\n  const number =\n    direction === callDirections.outbound\n      ? to && (to.phoneNumber || to.extensionNumber)\n      : from && (from.phoneNumber || from.extensionNumber);\n  const formatNumber = formatPhone?.(number);\n  const missed = isMissed(call);\n  const durationElement = getDurationElm();\n  const status = result || telephonyStatus;\n  // @ts-expect-error TS(2345): Argument of type 'string | undefined' is not assig... Remove this comment to see the full error message\n  const statusI18n = i18n.getString(status, currentLocale);\n  const isRinging = status === telephonyStatuses.ringing;\n  // @ts-expect-error TS(2345): Argument of type '\"NoCall\" | \"OnHold\" | \"Ringing\" ... Remove this comment to see the full error message\n  const infoStatus = getInfoStatus(status);\n\n  return (\n    <div\n      data-sign=\"logSection\"\n      className={clsx(\n        styles.root,\n        !isWide && styles.classic,\n        styles[infoStatus],\n        className,\n        styles.logBasicInfo,\n      )}\n    >\n      <ShinyBar\n        className={styles.top}\n        isRinging={isRinging}\n        status={infoStatus}\n      />\n      <div data-sign={dataSign} className={styles.leftSectionInfo}>\n        <CallIcon\n          title={\n            missed\n              ? i18n.getString(callResults.missed, currentLocale)\n              : isConferenceCall\n              ? i18n.getString('conferenceCall', currentLocale)\n              : i18n.getString(direction!, currentLocale)\n          }\n          iconClassName={clsx(\n            styles.icon,\n            callIconMap[\n              missed\n                ? callResults.missed\n                : isConferenceCall\n                ? 'conferenceCall'\n                : direction!\n            ],\n          )}\n        />\n        <ul className={styles.callDisplay}>\n          <li className={styles.info}>\n            <RcText\n              className={styles.logName}\n              title={`${\n                subContactNameDisplay\n                  ? `${logName} ${subContactNameDisplay}`\n                  : logName\n              }`}\n              data-sign=\"logName\"\n            >\n              {entityDetailLinkId ? (\n                <RcLink\n                  variant=\"inherit\"\n                  onClick={() => {\n                    openEntityDetailLink?.(entityDetailLinkId);\n                    openEntityDetailLinkTrack?.('call log page');\n                  }}\n                >\n                  {logName}\n                </RcLink>\n              ) : (\n                logName\n              )}\n              {subContactNameDisplay && (\n                <RcText\n                  color=\"neutral.f04\"\n                  component=\"span\"\n                  align=\"center\"\n                  variant=\"caption1\"\n                >\n                  {` ${subContactNameDisplay}`}\n                </RcText>\n              )}\n            </RcText>\n\n            <p className={clsx(styles.follow, styles['text-ellipsis'])}>\n              {isConferenceCall ? null : (\n                <span title={formatNumber} data-sign=\"phoneNumber\">\n                  {formatNumber}\n                </span>\n              )}\n              <span data-sign=\"callStatus\" title={statusI18n}>\n                {statusI18n}\n              </span>\n            </p>\n          </li>\n          {!call.result && isConferenceCall && (\n            <li>\n              <RcTooltip\n                title={`${i18n.getString('participants', currentLocale)} (${\n                  conferenceParticipants?.length\n                })`}\n              >\n                <StyledParticipantsButton\n                  data-sign=\"conferenceCallParticipantsIcon\"\n                  size=\"xsmall\"\n                  radius=\"round\"\n                  variant=\"outlined\"\n                  color={\n                    conferenceParticipantsIsOpen\n                      ? 'action.primary'\n                      : 'action.grayLight'\n                  }\n                  onClick={() => toggleConference(true)}\n                >\n                  <RcIcon size=\"xsmall\" symbol={Team} />\n                  {conferenceParticipants?.length}\n                </StyledParticipantsButton>\n              </RcTooltip>\n            </li>\n          )}\n\n          <li className={styles['flex-fill']} />\n          {isWide ? (\n            <li className={styles.time}>\n              <StyledSide>\n                {durationElement}\n                {showRecordingIndicator && isRecording && (\n                  <RecordingIndicator\n                    className={styles.recordingIndicator}\n                    data-sign=\"recordingIndicator\"\n                  />\n                )}\n              </StyledSide>\n              <p data-sign=\"startTime\">\n                {dateTimeFormatter({\n                  utcTimestamp: startTime,\n                  locale: currentLocale,\n                })}\n              </p>\n            </li>\n          ) : (\n            <li className={clsx(styles.follow, styles.time)}>\n              <p>{durationElement}</p>\n              <p>\n                {dateTimeFormatter({\n                  utcTimestamp: startTime,\n                  locale: currentLocale,\n                })}\n              </p>\n              {showRecordingIndicator && isRecording && (\n                <RecordingIndicator\n                  className={styles.recordingIndicator}\n                  data-sign=\"recordingIndicator\"\n                />\n              )}\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nconst LogBasicInfo: React.FC<LogBasicInfoProps> = React.memo(\n  (props) => {\n    const { currentLog, subCallLog, ...rest } = props;\n\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    const status = currentLog?.call.result || currentLog?.call.telephonyStatus;\n    const disabledCtrl = status === telephonyStatuses.ringing;\n    return (\n      <>\n        {subCallLog && (\n          <SubCallInfoSection\n            displayCallLog={subCallLog}\n            // @ts-expect-error TS(2783): 'disabledSwitchButton' is specified more than once... Remove this comment to see the full error message\n            disabledSwitchButton={disabledCtrl}\n            {...rest}\n          />\n        )}\n        {/* @ts-expect-error TS(2322): Type 'ILogInfo | undefined' is not */}\n        <ActiveCallInfoSection displayCallLog={currentLog} {...rest} />\n      </>\n    );\n  },\n  (prevProps, nextProps) => {\n    // current call will be {} temporally when the call is ended\n    // will not update log info component at that time\n    if (\n      nextProps.currentLog?.call !== prevProps.currentLog?.call &&\n      isEmpty(nextProps.currentLog?.call)\n    ) {\n      return true;\n    }\n    return false;\n  },\n);\n\nLogBasicInfo.defaultProps = {\n  formatPhone: (value) => value,\n  currentLog: {},\n  dataSign: undefined,\n  disableLinks: false,\n  isWide: true,\n  currentLocale: 'en',\n  className: undefined,\n  showRecordingIndicator: false,\n};\n\nexport default LogBasicInfo;\n"],"mappings":"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","ignoreList":[]}