{"version":3,"sources":["components/ContactDetails/components/PhoneSection.tsx"],"names":["PhoneList","label","children","styles","item","content","PhoneListItem","contact","currentLocale","disableLinks","formatNumber","isCallButtonDisabled","isMultipleSiteEnabled","canCallButtonShow","canTextButtonShow","onClickToDial","onClickToSMS","phoneNumber","rawPhoneNumber","phoneType","formattedNumber","displayedPhoneNumber","usedPhoneNumber","text","number","menu","disabled","i18n","getString","dynamicsFont","call","composeText","PhoneSection","phoneNumbers","length","sortedPhoneNumbers","phoneMap","acc","lastType","map","push","section","contacts"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AAEA;;AACA;;AAIA;;AAKA;;AAMA;;AACA;;;;AAYA,IAAMA,SAA4C,GAAG,SAA/CA,SAA+C,OAAyB;AAAA,MAAtBC,KAAsB,QAAtBA,KAAsB;AAAA,MAAfC,QAAe,QAAfA,QAAe;AAC5E,sBACE;AAAK,IAAA,SAAS,EAAEC,mBAAOC;AAAvB,kBACE;AAAK,IAAA,SAAS,EAAED,mBAAOF;AAAvB,kBACE,8CAAOA,KAAP,CADF,CADF,eAIE;AAAI,IAAA,SAAS,EAAEE,mBAAOE;AAAtB,KAAgCH,QAAhC,CAJF,CADF;AAQD,CATD;;AAsBA,IAAMI,aAAoD,GAAG,SAAvDA,aAAuD,QAcvD;AAAA,MAbJC,OAaI,SAbJA,OAaI;AAAA,MAZJC,aAYI,SAZJA,aAYI;AAAA,MAXJC,YAWI,SAXJA,YAWI;AAAA,MAVJC,YAUI,SAVJA,YAUI;AAAA,MATJC,oBASI,SATJA,oBASI;AAAA,MARJC,qBAQI,SARJA,qBAQI;AAAA,MAPJC,iBAOI,SAPJA,iBAOI;AAAA,MANJC,iBAMI,SANJA,iBAMI;AAAA,MALJC,aAKI,SALJA,aAKI;AAAA,MAJJC,YAII,SAJJA,YAII;AAAA,MAHJC,WAGI,SAHJA,WAGI;AAAA,MAFJC,cAEI,SAFJA,cAEI;AAAA,MADJC,SACI,SADJA,SACI;AACJ,MAAMC,eAAe,GAAGV,YAAY,CAACO,WAAD,CAApC,CADI,CAEJ;;AACA,MAAMI,oBAAoB,GAAGH,cAAc,IAAIE,eAA/C,CAHI,CAIJ;AACA;;AACA,MAAME,eAAe,GAAGV,qBAAqB,GAAGQ,eAAH,GAAqBH,WAAlE;AAEA,sBACE,yDACE;AAAK,IAAA,SAAS,EAAE,4BAAWd,mBAAOoB,IAAlB,EAAwBpB,mBAAOqB,MAA/B;AAAhB,kBACE;AAAM,iBAAU,eAAhB;AAAgC,IAAA,KAAK,EAAEF;AAAvC,KACGD,oBADH,CADF,CADF,eAME;AAAK,IAAA,SAAS,EAAElB,mBAAOsB;AAAvB,KACGZ,iBAAiB,CAACM,SAAD,CAAjB,gBACC;AACE,IAAA,IAAI,EAAC,QADP;AAEE,iBAAU,MAFZ;AAGE,IAAA,SAAS,EAAE,4BAAWR,oBAAoB,IAAIR,mBAAOuB,QAA1C,CAHb;AAIE,IAAA,KAAK,YAAKC,iBAAKC,SAAL,CACR,MADQ,EAERpB,aAFQ,CAAL,cAGAc,eAHA,CAJP;AAQE,IAAA,QAAQ,EAAEX,oBARZ;AASE,IAAA,OAAO,EAAE;AAAA,aAAMI,aAAa,CAACR,OAAD,EAAUe,eAAV,CAAnB;AAAA;AATX,kBAWE;AAAG,IAAA,SAAS,EAAEO,yBAAaC;AAA3B,IAXF,CADD,GAcG,IAfN,EAgBGhB,iBAAiB,CAACK,SAAD,CAAjB,gBACC;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAE,4BAAWV,YAAY,IAAIN,mBAAOuB,QAAlC,CAFb;AAGE,iBAAU,MAHZ;AAIE,IAAA,KAAK,YAAKC,iBAAKC,SAAL,CACR,MADQ,EAERpB,aAFQ,CAAL,cAGAc,eAHA,CAJP;AAQE,IAAA,QAAQ,EAAEb,YARZ;AASE,IAAA,OAAO,EAAE;AAAA,aAAMO,YAAY,CAACT,OAAD,EAAUe,eAAV,CAAlB;AAAA;AATX,kBAWE;AAAG,IAAA,SAAS,EAAEO,yBAAaE;AAA3B,IAXF,CADD,GAcG,IA9BN,CANF,CADF;AAyCD,CA/DD;;AA4EO,IAAMC,YAAkD,GAAG,SAArDA,YAAqD,QAW5D;AAAA,MAVJzB,OAUI,SAVJA,OAUI;AAAA,MATJC,aASI,SATJA,aASI;AAAA,MARJC,YAQI,SARJA,YAQI;AAAA,MAPJE,oBAOI,SAPJA,oBAOI;AAAA,MANJC,qBAMI,SANJA,qBAMI;AAAA,MALJF,YAKI,SALJA,YAKI;AAAA,MAJJG,iBAII,SAJJA,iBAII;AAAA,MAHJC,iBAGI,SAHJA,iBAGI;AAAA,MAFJC,aAEI,SAFJA,aAEI;AAAA,MADJC,YACI,SADJA,YACI;;AACJ,MAAIT,OAAO,IAAIA,OAAO,CAAC0B,YAAnB,IAAmC1B,OAAO,CAAC0B,YAAR,CAAqBC,MAA5D,EAAoE;AAClE,QAAMC,kBAAkB,GAAG,uCACzB,yCAAmB5B,OAAO,CAAC0B,YAA3B,CADyB,CAA3B;AAGA,QAAMG,QAAQ,GAAG,mBACf,UAACC,GAAD,EAAMjC,IAAN,EAAe;AACb,UAAIA,IAAI,CAACe,SAAL,KAAmBkB,GAAG,CAACC,QAA3B,EAAqC;AACnCD,QAAAA,GAAG,CAACC,QAAJ,GAAelC,IAAI,CAACe,SAApB;AACAkB,QAAAA,GAAG,CAACE,GAAJ,CAAQnC,IAAI,CAACe,SAAb,IAA0B,EAA1B;AACD;;AACDkB,MAAAA,GAAG,CAACE,GAAJ,CAAQnC,IAAI,CAACe,SAAb,EAAwBqB,IAAxB,CAA6BpC,IAA7B;AACA,aAAOiC,GAAP;AACD,KARc,EASf;AACEE,MAAAA,GAAG,EAAE,EADP;AAEED,MAAAA,QAAQ,EAAE;AAFZ,KATe,EAafH,kBAbe,EAcfI,GAdF;AAeA,wBACE;AACE,MAAA,SAAS,EAAE,4BAAWpC,mBAAOsC,OAAlB,EAA2BtC,mBAAOuC,QAAlC,CADb;AAEE,oBAAW;AAFb,OAIG,gBACC,UAACvB,SAAD;AAAA,0BACE,gCAAC,SAAD;AACE,QAAA,GAAG,EAAEA,SADP;AAEE,QAAA,KAAK,EAAEQ,iBAAKC,SAAL,CAAeT,SAAf,EAA0BX,aAA1B;AAFT,SAIG,gBACC;AAAA,YAAGS,WAAH,SAAGA,WAAH;AAAA,YAAgBC,cAAhB,SAAgBA,cAAhB;AAAA,4BACE,gCAAC,aAAD;AACE,UAAA,GAAG,EAAED,WADP;AAEE,UAAA,WAAW,EAAEA,WAFf;AAGE,UAAA,cAAc,EAAEC,cAHlB;AAIE,UAAA,SAAS,EAAEC,SAJb;AAKE,UAAA,OAAO,EAAEZ,OALX;AAME,UAAA,iBAAiB,EAAEM,iBANrB;AAOE,UAAA,iBAAiB,EAAEC,iBAPrB;AAQE,UAAA,YAAY,EAAEJ,YARhB;AASE,UAAA,aAAa,EAAEF,aATjB;AAUE,UAAA,oBAAoB,EAAEG,oBAVxB;AAWE,UAAA,qBAAqB,EAAEC,qBAXzB;AAYE,UAAA,YAAY,EAAEH,YAZhB;AAaE,UAAA,aAAa,EAAEM,aAbjB;AAcE,UAAA,YAAY,EAAEC;AAdhB,UADF;AAAA,OADD,EAmBCoB,QAAQ,CAACjB,SAAD,CAnBT,CAJH,CADF;AAAA,KADD,EA6BC,iBAAKiB,QAAL,CA7BD,CAJH,CADF;AAsCD;;AACD,SAAO,IAAP;AACD,CAvEM","sourcesContent":["import React, { FunctionComponent } from 'react';\n\nimport classnames from 'classnames';\nimport { keys, map, reduce } from 'ramda';\n\nimport { PhoneType } from '@ringcentral-integration/commons/enums/phoneTypes';\nimport { ContactModel } from '@ringcentral-integration/commons/interfaces/Contact.model';\nimport {\n  filterByPhoneTypes,\n  sortByPhoneTypes,\n} from '@ringcentral-integration/commons/lib/phoneTypeHelper';\n\nimport dynamicsFont from '../../../assets/DynamicsFont/DynamicsFont.scss';\nimport {\n  clickToDial,\n  clickToSMS,\n  formatNumber,\n} from '../ContactDetails.interface';\nimport i18n from '../i18n';\nimport styles from '../styles.scss';\n\n/**\n * TODO\n * 1. Refactor phone type and phoneTypeOrder into modules\n * 2. RawNumberDisplay\n */\n\ninterface PhoneListProps {\n  label: string;\n}\n\nconst PhoneList: FunctionComponent<PhoneListProps> = ({ label, children }) => {\n  return (\n    <div className={styles.item}>\n      <div className={styles.label}>\n        <span>{label}</span>\n      </div>\n      <ul className={styles.content}>{children}</ul>\n    </div>\n  );\n};\n\ninterface PhoneListItemProps extends formatNumber, clickToSMS, clickToDial {\n  currentLocale: string;\n  contact: ContactModel;\n  disableLinks: boolean;\n  isCallButtonDisabled: boolean;\n  isMultipleSiteEnabled: boolean;\n  phoneNumber: string;\n  rawPhoneNumber: string;\n  phoneType: PhoneType;\n}\n\nconst PhoneListItem: FunctionComponent<PhoneListItemProps> = ({\n  contact,\n  currentLocale,\n  disableLinks,\n  formatNumber,\n  isCallButtonDisabled,\n  isMultipleSiteEnabled,\n  canCallButtonShow,\n  canTextButtonShow,\n  onClickToDial,\n  onClickToSMS,\n  phoneNumber,\n  rawPhoneNumber,\n  phoneType,\n}) => {\n  const formattedNumber = formatNumber(phoneNumber);\n  // User will see, for example: (650) 123-4567\n  const displayedPhoneNumber = rawPhoneNumber || formattedNumber;\n  // User will use, for example: +16501234567\n  // In multi-site feature, \"user will see\" and \"user will use\" are the same\n  const usedPhoneNumber = isMultipleSiteEnabled ? formattedNumber : phoneNumber;\n\n  return (\n    <li>\n      <div className={classnames(styles.text, styles.number)}>\n        <span data-sign=\"contactNumber\" title={usedPhoneNumber}>\n          {displayedPhoneNumber}\n        </span>\n      </div>\n      <div className={styles.menu}>\n        {canCallButtonShow(phoneType) ? (\n          <button\n            type=\"button\"\n            data-sign=\"call\"\n            className={classnames(isCallButtonDisabled && styles.disabled)}\n            title={`${i18n.getString(\n              'call',\n              currentLocale,\n            )} ${usedPhoneNumber}`}\n            disabled={isCallButtonDisabled}\n            onClick={() => onClickToDial(contact, usedPhoneNumber)}\n          >\n            <i className={dynamicsFont.call} />\n          </button>\n        ) : null}\n        {canTextButtonShow(phoneType) ? (\n          <button\n            type=\"button\"\n            className={classnames(disableLinks && styles.disabled)}\n            data-sign=\"text\"\n            title={`${i18n.getString(\n              'text',\n              currentLocale,\n            )} ${usedPhoneNumber}`}\n            disabled={disableLinks}\n            onClick={() => onClickToSMS(contact, usedPhoneNumber)}\n          >\n            <i className={dynamicsFont.composeText} />\n          </button>\n        ) : null}\n      </div>\n    </li>\n  );\n};\n\nexport interface PhoneSectionProps\n  extends formatNumber,\n    clickToSMS,\n    clickToDial {\n  currentLocale: string;\n  contact: ContactModel;\n  disableLinks: boolean;\n  isCallButtonDisabled: boolean;\n  isMultipleSiteEnabled: boolean;\n}\n\nexport const PhoneSection: FunctionComponent<PhoneSectionProps> = ({\n  contact,\n  currentLocale,\n  disableLinks,\n  isCallButtonDisabled,\n  isMultipleSiteEnabled,\n  formatNumber,\n  canCallButtonShow,\n  canTextButtonShow,\n  onClickToDial,\n  onClickToSMS,\n}) => {\n  if (contact && contact.phoneNumbers && contact.phoneNumbers.length) {\n    const sortedPhoneNumbers = sortByPhoneTypes(\n      filterByPhoneTypes(contact.phoneNumbers),\n    );\n    const phoneMap = reduce(\n      (acc, item) => {\n        if (item.phoneType !== acc.lastType) {\n          acc.lastType = item.phoneType;\n          acc.map[item.phoneType] = [];\n        }\n        acc.map[item.phoneType].push(item);\n        return acc;\n      },\n      {\n        map: {},\n        lastType: null,\n      },\n      sortedPhoneNumbers,\n    ).map;\n    return (\n      <section\n        className={classnames(styles.section, styles.contacts)}\n        aria-label=\"phone\"\n      >\n        {map(\n          (phoneType) => (\n            <PhoneList\n              key={phoneType}\n              label={i18n.getString(phoneType, currentLocale)}\n            >\n              {map(\n                ({ phoneNumber, rawPhoneNumber }) => (\n                  <PhoneListItem\n                    key={phoneNumber}\n                    phoneNumber={phoneNumber}\n                    rawPhoneNumber={rawPhoneNumber}\n                    phoneType={phoneType}\n                    contact={contact}\n                    canCallButtonShow={canCallButtonShow}\n                    canTextButtonShow={canTextButtonShow}\n                    formatNumber={formatNumber}\n                    currentLocale={currentLocale}\n                    isCallButtonDisabled={isCallButtonDisabled}\n                    isMultipleSiteEnabled={isMultipleSiteEnabled}\n                    disableLinks={disableLinks}\n                    onClickToDial={onClickToDial}\n                    onClickToSMS={onClickToSMS}\n                  />\n                ),\n                phoneMap[phoneType],\n              )}\n            </PhoneList>\n          ),\n          keys(phoneMap),\n        )}\n      </section>\n    );\n  }\n  return null;\n};\n"],"file":"PhoneSection.js"}