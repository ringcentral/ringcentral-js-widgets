{"version":3,"file":"Profile.js","names":["_react","_interopRequireDefault","require","_classnames","_extensionStatusTypes","_getPresenceStatusName","_PresenceStatusIcon","_i18n","_styles","_usePresence","_Avatar","obj","__esModule","Status","_ref","presence","inactive","currentLocale","createElement","className","styles","status","inactiveText","i18n","getString","_presence$presenceSta","presenceStatus","_presence$dndStatus","dndStatus","presenceName","getPresenceStatusName","presenceIcon","Name","_ref2","name","classnames","withoutPresence","title","Profile","_ref3","contact","sourceNodeRenderer","isMultipleSiteEnabled","getPresence","profileImageUrl","site","type","usePresence","fetch","extensionStatusTypes","notActivated","profile","profileWrapper","Avatar","avatarUrl","source","sourceType","info","concat","label","content","exports","defaultProps"],"sources":["components/ContactDetails/components/Profile.tsx"],"sourcesContent":["import type { FunctionComponent } from 'react';\nimport React from 'react';\n\nimport classnames from 'classnames';\n\nimport { extensionStatusTypes } from '@ringcentral-integration/commons/enums/extensionStatusTypes';\nimport type {\n  ContactModel,\n  ContactPresence,\n} from '@ringcentral-integration/commons/interfaces/Contact.model';\n\nimport { getPresenceStatusName } from '../../../lib/getPresenceStatusName';\nimport PresenceStatusIcon from '../../PresenceStatusIcon';\nimport type { sourceNodeRenderer } from '../ContactDetails.interface';\nimport i18n from '../i18n';\nimport styles from '../styles.scss';\nimport type { GetPresenceFn } from '../../../react-hooks/usePresence';\nimport { usePresence } from '../../../react-hooks/usePresence';\nimport { Avatar } from './Avatar';\n\ninterface StatusProps {\n  inactive: boolean;\n  presence?: ContactPresence | null;\n  currentLocale: string;\n}\n\nconst Status: FunctionComponent<StatusProps> = ({\n  presence,\n  inactive,\n  currentLocale,\n}) => {\n  if (inactive) {\n    return (\n      <div className={styles.status}>\n        <div>\n          <span className={styles.inactiveText}>\n            {i18n.getString('notActivated', currentLocale)}\n          </span>\n        </div>\n      </div>\n    );\n  }\n  if (presence) {\n    const { presenceStatus = '', dndStatus = '' } = presence;\n    const presenceName = getPresenceStatusName(\n      presenceStatus as any,\n      dndStatus as any,\n      currentLocale,\n    );\n    return (\n      <div className={styles.status}>\n        <div className={styles.presence}>\n          <PresenceStatusIcon\n            className={styles.presenceIcon}\n            presenceStatus={presenceStatus}\n            dndStatus={dndStatus}\n          />\n        </div>\n        {presenceName && (\n          <span className={styles.presenceName}>{presenceName}</span>\n        )}\n      </div>\n    );\n  }\n  return null;\n};\n\ninterface NameProps {\n  presence?: ContactPresence | null;\n  inactive: boolean;\n  name: string;\n}\n\nconst Name: FunctionComponent<NameProps> = ({ presence, inactive, name }) => {\n  return (\n    <div\n      className={classnames(\n        styles.name,\n        !presence && styles.withoutPresence,\n        inactive && styles.inactiveText,\n      )}\n      title={name}\n      data-sign=\"contactName\"\n      data-inactive={inactive}\n    >\n      {name}\n    </div>\n  );\n};\n\nexport interface ProfileProps extends sourceNodeRenderer {\n  contact: ContactModel &\n    Partial<{\n      profileImageUrl: string;\n      status: string;\n      site: {\n        name: string;\n        code: string;\n      };\n    }>;\n  currentLocale: string;\n  isMultipleSiteEnabled: boolean;\n  getPresence: GetPresenceFn;\n}\n\nexport const Profile: FunctionComponent<ProfileProps> = ({\n  contact,\n  sourceNodeRenderer,\n  currentLocale,\n  isMultipleSiteEnabled,\n  getPresence,\n}) => {\n  const { name, profileImageUrl, status, site, type } = contact;\n  // @ts-ignore\n  const presence = usePresence(contact, { fetch: getPresence });\n  const inactive = status === extensionStatusTypes.notActivated;\n  return (\n    <section className={styles.profile} aria-label=\"profile\">\n      <div className={styles.profileWrapper}>\n        <Avatar\n          name={name}\n          avatarUrl={profileImageUrl}\n          inactive={inactive}\n          source={\n            sourceNodeRenderer && sourceNodeRenderer({ sourceType: type })\n          }\n        />\n        <div className={styles.info}>\n          <Name inactive={inactive} name={name} presence={presence} />\n          <Status\n            inactive={inactive}\n            presence={presence}\n            currentLocale={currentLocale}\n          />\n        </div>\n      </div>\n      {isMultipleSiteEnabled && site?.name && (\n        <div className={styles.site} aria-label={`Site: ${site.name}`}>\n          <span className={styles.label}>\n            {i18n.getString('site', currentLocale)}\n          </span>\n          <span className={styles.content}>{site.name}</span>\n        </div>\n      )}\n    </section>\n  );\n};\nProfile.defaultProps = {\n  sourceNodeRenderer: () => null,\n};\n"],"mappings":"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"}