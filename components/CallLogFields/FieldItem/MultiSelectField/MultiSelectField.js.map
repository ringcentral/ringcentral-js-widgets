{"version":3,"file":"MultiSelectField.js","names":["_juno","require","_junoIcon","_react","_interopRequireWildcard","_i18n","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","Symbol","iterator","Array","from","isArray","_arrayLikeToArray","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","a","toString","slice","constructor","name","test","l","u","next","done","push","value","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","MultiSelectField","exports","_ref","_fieldRef$current","options","labelClassName","_ref$value","onChange","label","placeholder","_ref$disabled","disabled","onOpen","rest","_useState","useState","_useState2","anchorEl","setAnchorEl","fieldRef","useRef","_useState3","filter","v","trim","_useState4","selectedValues","setSelectedValues","filteredValues","useMemo","handleFieldClick","useCallback","current","handleClose","handleSelect","selectedValue","newValue","includes","item","concat","handleOkClick","displayValue","map","option","find","join","createElement","ref","RcTextField","clearBtn","onClick","fullWidth","InputProps","readOnly","endAdornment","RcIcon","size","symbol","ArrowDropDownIcon","RcPopover","open","Boolean","onClose","anchorOrigin","vertical","horizontal","transformOrigin","PaperProps","style","width","offsetWidth","index","RcMenuItem","key","RcCheckbox","checked","RcButton","variant"],"sources":["components/CallLogFields/FieldItem/MultiSelectField/MultiSelectField.tsx"],"sourcesContent":["import {\n  RcButton,\n  RcCheckbox,\n  RcIcon,\n  RcMenuItem,\n  RcPopover,\n  RcTextField,\n} from '@ringcentral/juno';\nimport { ArrowDown2 as ArrowDropDownIcon } from '@ringcentral/juno-icon';\nimport type { FunctionComponent } from 'react';\nimport React, { useRef, useState, useMemo, useCallback } from 'react';\n\nimport { PickListOption } from '../FieldItem.interface';\n\nimport { t } from './i18n';\n\n/**\n * TODO:\n * 1. this feature needs to be UX reviewed if prioritized\n */\n\nexport type MultiSelectFieldProps = {\n  options: PickListOption[];\n  labelClassName?: string;\n  value?: string[];\n  onChange?: (value: string[]) => void;\n  label?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  helperText?: React.ReactNode;\n  error?: boolean;\n  required?: boolean;\n  onOpen?: () => void;\n};\n\nexport const MultiSelectField: FunctionComponent<MultiSelectFieldProps> = ({\n  options,\n  labelClassName,\n  value = [],\n  onChange,\n  label,\n  placeholder,\n  disabled = false,\n  onOpen,\n  ...rest\n}) => {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const fieldRef = useRef<HTMLDivElement | null>(null);\n  const [selectedValues, setSelectedValues] = useState<string[]>(() =>\n    value.filter((v) => v.trim() !== ''),\n  );\n\n  const filteredValues = useMemo(() => {\n    return selectedValues.filter((v) => v.trim() !== '');\n  }, [selectedValues]);\n\n  const handleFieldClick = useCallback(() => {\n    setAnchorEl(fieldRef.current);\n    onOpen?.();\n  }, [onOpen]);\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleSelect = useCallback(\n    (selectedValue: string) => {\n      const newValue = selectedValues.includes(selectedValue)\n        ? selectedValues.filter((item) => item !== selectedValue)\n        : [...selectedValues, selectedValue];\n      setSelectedValues(newValue.filter((v) => v.trim() !== ''));\n    },\n    [selectedValues],\n  );\n\n  const handleOkClick = useCallback(() => {\n    onChange?.(filteredValues);\n    handleClose();\n  }, [onChange, filteredValues, handleClose]);\n\n  const displayValue = useMemo(() => {\n    return filteredValues.length > 0\n      ? filteredValues\n          .map((value) => {\n            const option = options.find((o) => o.value === value);\n            return option?.label || value;\n          })\n          .join(', ')\n      : '';\n  }, [options, filteredValues]);\n\n  return (\n    <div ref={fieldRef}>\n      <RcTextField\n        clearBtn={false}\n        onClick={handleFieldClick}\n        value={displayValue}\n        placeholder={placeholder}\n        label={label}\n        disabled={disabled}\n        fullWidth\n        InputProps={{\n          readOnly: true,\n          endAdornment: <RcIcon size=\"small\" symbol={ArrowDropDownIcon} />,\n        }}\n        {...rest}\n      />\n      <RcPopover\n        open={Boolean(anchorEl)}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n        PaperProps={{\n          style: {\n            width: fieldRef.current?.offsetWidth || '100%',\n          },\n        }}\n      >\n        {anchorEl && (\n          <div>\n            {options.map((item, index) => (\n              <RcMenuItem key={index} onClick={() => handleSelect(item.value)}>\n                <RcCheckbox\n                  checked={selectedValues.includes(item.value)}\n                  onChange={() => handleSelect(item.value)}\n                />\n                {item.label}\n              </RcMenuItem>\n            ))}\n            <div>\n              <RcButton variant=\"contained\" onClick={handleOkClick}>\n                {t('ok')}\n              </RcButton>\n            </div>\n          </div>\n        )}\n      </RcPopover>\n    </div>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAQA,IAAAC,SAAA,GAAAD,OAAA;AAEA,IAAAE,MAAA,GAAAC,uBAAA,CAAAH,OAAA;AAIA,IAAAI,KAAA,GAAAJ,OAAA;AAA2B,IAAAK,SAAA;AAAA,SAAAF,wBAAAG,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAL,uBAAA,YAAAA,wBAAAG,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,mBAAAT,CAAA,iBAAAA,CAAA,gBAAAU,OAAA,CAAAV,CAAA,0BAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,cAAAM,EAAA,IAAAd,CAAA,gBAAAc,EAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,EAAA,OAAAP,CAAA,IAAAD,CAAA,GAAAW,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAnB,CAAA,EAAAc,EAAA,OAAAP,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAM,EAAA,EAAAP,CAAA,IAAAC,CAAA,CAAAM,EAAA,IAAAd,CAAA,CAAAc,EAAA,WAAAN,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAAA,SAAAmB,SAAA,WAAAA,QAAA,GAAAH,MAAA,CAAAI,MAAA,GAAAJ,MAAA,CAAAI,MAAA,CAAAC,IAAA,eAAAlB,CAAA,aAAAJ,CAAA,MAAAA,CAAA,GAAAuB,SAAA,CAAAC,MAAA,EAAAxB,CAAA,UAAAC,CAAA,GAAAsB,SAAA,CAAAvB,CAAA,YAAAG,CAAA,IAAAF,CAAA,OAAAc,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAE,CAAA,MAAAC,CAAA,CAAAD,CAAA,IAAAF,CAAA,CAAAE,CAAA,aAAAC,CAAA,KAAAgB,QAAA,CAAAK,KAAA,OAAAF,SAAA;AAAA,SAAAG,mBAAAvB,CAAA,WAAAwB,kBAAA,CAAAxB,CAAA,KAAAyB,gBAAA,CAAAzB,CAAA,KAAA0B,2BAAA,CAAA1B,CAAA,KAAA2B,kBAAA;AAAA,SAAAA,mBAAA,cAAAC,SAAA;AAAA,SAAAH,iBAAAzB,CAAA,8BAAA6B,MAAA,YAAA7B,CAAA,CAAA6B,MAAA,CAAAC,QAAA,aAAA9B,CAAA,uBAAA+B,KAAA,CAAAC,IAAA,CAAAhC,CAAA;AAAA,SAAAwB,mBAAAxB,CAAA,QAAA+B,KAAA,CAAAE,OAAA,CAAAjC,CAAA,UAAAkC,iBAAA,CAAAlC,CAAA;AAAA,SAAAmC,eAAAnC,CAAA,EAAAH,CAAA,WAAAuC,eAAA,CAAApC,CAAA,KAAAqC,qBAAA,CAAArC,CAAA,EAAAH,CAAA,KAAA6B,2BAAA,CAAA1B,CAAA,EAAAH,CAAA,KAAAyC,gBAAA;AAAA,SAAAA,iBAAA,cAAAV,SAAA;AAAA,SAAAF,4BAAA1B,CAAA,EAAAuC,CAAA,QAAAvC,CAAA,2BAAAA,CAAA,SAAAkC,iBAAA,CAAAlC,CAAA,EAAAuC,CAAA,OAAAzC,CAAA,MAAA0C,QAAA,CAAA3B,IAAA,CAAAb,CAAA,EAAAyC,KAAA,6BAAA3C,CAAA,IAAAE,CAAA,CAAA0C,WAAA,KAAA5C,CAAA,GAAAE,CAAA,CAAA0C,WAAA,CAAAC,IAAA,aAAA7C,CAAA,cAAAA,CAAA,GAAAiC,KAAA,CAAAC,IAAA,CAAAhC,CAAA,oBAAAF,CAAA,+CAAA8C,IAAA,CAAA9C,CAAA,IAAAoC,iBAAA,CAAAlC,CAAA,EAAAuC,CAAA;AAAA,SAAAL,kBAAAlC,CAAA,EAAAuC,CAAA,aAAAA,CAAA,IAAAA,CAAA,GAAAvC,CAAA,CAAAqB,MAAA,MAAAkB,CAAA,GAAAvC,CAAA,CAAAqB,MAAA,YAAAxB,CAAA,MAAAI,CAAA,GAAA8B,KAAA,CAAAQ,CAAA,GAAA1C,CAAA,GAAA0C,CAAA,EAAA1C,CAAA,IAAAI,CAAA,CAAAJ,CAAA,IAAAG,CAAA,CAAAH,CAAA,UAAAI,CAAA;AAAA,SAAAoC,sBAAArC,CAAA,EAAA6C,CAAA,QAAA/C,CAAA,WAAAE,CAAA,gCAAA6B,MAAA,IAAA7B,CAAA,CAAA6B,MAAA,CAAAC,QAAA,KAAA9B,CAAA,4BAAAF,CAAA,QAAAD,CAAA,EAAAI,CAAA,EAAAG,CAAA,EAAA0C,CAAA,EAAAP,CAAA,OAAAlC,CAAA,OAAAF,CAAA,iBAAAC,CAAA,IAAAN,CAAA,GAAAA,CAAA,CAAAe,IAAA,CAAAb,CAAA,GAAA+C,IAAA,QAAAF,CAAA,QAAA/B,MAAA,CAAAhB,CAAA,MAAAA,CAAA,UAAAO,CAAA,uBAAAA,CAAA,IAAAR,CAAA,GAAAO,CAAA,CAAAS,IAAA,CAAAf,CAAA,GAAAkD,IAAA,MAAAT,CAAA,CAAAU,IAAA,CAAApD,CAAA,CAAAqD,KAAA,GAAAX,CAAA,CAAAlB,MAAA,KAAAwB,CAAA,GAAAxC,CAAA,iBAAAL,CAAA,IAAAG,CAAA,OAAAF,CAAA,GAAAD,CAAA,yBAAAK,CAAA,YAAAP,CAAA,eAAAgD,CAAA,GAAAhD,CAAA,cAAAgB,MAAA,CAAAgC,CAAA,MAAAA,CAAA,2BAAA3C,CAAA,QAAAF,CAAA,aAAAsC,CAAA;AAAA,SAAAH,gBAAApC,CAAA,QAAA+B,KAAA,CAAAE,OAAA,CAAAjC,CAAA,UAAAA,CAAA;AAAA,SAAAmD,yBAAAtD,CAAA,EAAAC,CAAA,gBAAAD,CAAA,iBAAAM,CAAA,EAAAH,CAAA,EAAAI,CAAA,GAAAgD,6BAAA,CAAAvD,CAAA,EAAAC,CAAA,OAAAgB,MAAA,CAAAuC,qBAAA,QAAApD,CAAA,GAAAa,MAAA,CAAAuC,qBAAA,CAAAxD,CAAA,QAAAG,CAAA,MAAAA,CAAA,GAAAC,CAAA,CAAAoB,MAAA,EAAArB,CAAA,IAAAG,CAAA,GAAAF,CAAA,CAAAD,CAAA,UAAAF,CAAA,CAAAwD,OAAA,CAAAnD,CAAA,QAAAoD,oBAAA,CAAA1C,IAAA,CAAAhB,CAAA,EAAAM,CAAA,MAAAC,CAAA,CAAAD,CAAA,IAAAN,CAAA,CAAAM,CAAA,aAAAC,CAAA;AAAA,SAAAgD,8BAAApD,CAAA,EAAAH,CAAA,gBAAAG,CAAA,iBAAAF,CAAA,gBAAAG,CAAA,IAAAD,CAAA,SAAAY,cAAA,CAAAC,IAAA,CAAAb,CAAA,EAAAC,CAAA,gBAAAJ,CAAA,CAAAyD,OAAA,CAAArD,CAAA,aAAAH,CAAA,CAAAG,CAAA,IAAAD,CAAA,CAAAC,CAAA,YAAAH,CAAA;AAE3B;AACA;AACA;AACA;;AAgBO,IAAM0D,gBAA0D,GAAAC,OAAA,CAAAD,gBAAA,GAAG,SAA7DA,gBAA0DA,CAAAE,IAAA,EAUjE;EAAA,IAAAC,iBAAA;EAAA,IATJC,OAAO,GAAAF,IAAA,CAAPE,OAAO;IACPC,cAAc,GAAAH,IAAA,CAAdG,cAAc;IAAAC,UAAA,GAAAJ,IAAA,CACdR,KAAK;IAALA,KAAK,GAAAY,UAAA,cAAG,EAAE,GAAAA,UAAA;IACVC,QAAQ,GAAAL,IAAA,CAARK,QAAQ;IACRC,KAAK,GAAAN,IAAA,CAALM,KAAK;IACLC,WAAW,GAAAP,IAAA,CAAXO,WAAW;IAAAC,aAAA,GAAAR,IAAA,CACXS,QAAQ;IAARA,QAAQ,GAAAD,aAAA,cAAG,KAAK,GAAAA,aAAA;IAChBE,MAAM,GAAAV,IAAA,CAANU,MAAM;IACHC,IAAI,GAAAlB,wBAAA,CAAAO,IAAA,EAAA9D,SAAA;EAEP,IAAA0E,SAAA,GAAgC,IAAAC,eAAQ,EAAqB,IAAI,CAAC;IAAAC,UAAA,GAAArC,cAAA,CAAAmC,SAAA;IAA3DG,QAAQ,GAAAD,UAAA;IAAEE,WAAW,GAAAF,UAAA;EAC5B,IAAMG,QAAQ,GAAG,IAAAC,aAAM,EAAwB,IAAI,CAAC;EACpD,IAAAC,UAAA,GAA4C,IAAAN,eAAQ,EAAW;MAAA,OAC7DrB,KAAK,CAAC4B,MAAM,CAAC,UAACC,CAAC;QAAA,OAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,KAAK,EAAE;MAAA,EAAC;IAAA,CACtC,CAAC;IAAAC,UAAA,GAAA9C,cAAA,CAAA0C,UAAA;IAFMK,cAAc,GAAAD,UAAA;IAAEE,iBAAiB,GAAAF,UAAA;EAIxC,IAAMG,cAAc,GAAG,IAAAC,cAAO,EAAC,YAAM;IACnC,OAAOH,cAAc,CAACJ,MAAM,CAAC,UAACC,CAAC;MAAA,OAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,KAAK,EAAE;IAAA,EAAC;EACtD,CAAC,EAAE,CAACE,cAAc,CAAC,CAAC;EAEpB,IAAMI,gBAAgB,GAAG,IAAAC,kBAAW,EAAC,YAAM;IACzCb,WAAW,CAACC,QAAQ,CAACa,OAAO,CAAC;IAC7BpB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,CAAC;EACZ,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EAEZ,IAAMqB,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;IACxBf,WAAW,CAAC,IAAI,CAAC;EACnB,CAAC;EAED,IAAMgB,YAAY,GAAG,IAAAH,kBAAW,EAC9B,UAACI,aAAqB,EAAK;IACzB,IAAMC,QAAQ,GAAGV,cAAc,CAACW,QAAQ,CAACF,aAAa,CAAC,GACnDT,cAAc,CAACJ,MAAM,CAAC,UAACgB,IAAI;MAAA,OAAKA,IAAI,KAAKH,aAAa;IAAA,EAAC,MAAAI,MAAA,CAAAxE,kBAAA,CACnD2D,cAAc,IAAES,aAAa,EAAC;IACtCR,iBAAiB,CAACS,QAAQ,CAACd,MAAM,CAAC,UAACC,CAAC;MAAA,OAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,KAAK,EAAE;IAAA,EAAC,CAAC;EAC5D,CAAC,EACD,CAACE,cAAc,CACjB,CAAC;EAED,IAAMc,aAAa,GAAG,IAAAT,kBAAW,EAAC,YAAM;IACtCxB,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAGqB,cAAc,CAAC;IAC1BK,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,CAAC1B,QAAQ,EAAEqB,cAAc,EAAEK,WAAW,CAAC,CAAC;EAE3C,IAAMQ,YAAY,GAAG,IAAAZ,cAAO,EAAC,YAAM;IACjC,OAAOD,cAAc,CAAC/D,MAAM,GAAG,CAAC,GAC5B+D,cAAc,CACXc,GAAG,CAAC,UAAChD,KAAK,EAAK;MACd,IAAMiD,MAAM,GAAGvC,OAAO,CAACwC,IAAI,CAAC,UAACjG,CAAC;QAAA,OAAKA,CAAC,CAAC+C,KAAK,KAAKA,KAAK;MAAA,EAAC;MACrD,OAAO,CAAAiD,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEnC,KAAK,KAAId,KAAK;IAC/B,CAAC,CAAC,CACDmD,IAAI,CAAC,IAAI,CAAC,GACb,EAAE;EACR,CAAC,EAAE,CAACzC,OAAO,EAAEwB,cAAc,CAAC,CAAC;EAE7B,oBACE3F,MAAA,YAAA6G,aAAA;IAAKC,GAAG,EAAE5B;EAAS,gBACjBlF,MAAA,YAAA6G,aAAA,CAAChH,KAAA,CAAAkH,WAAW,EAAAvF,QAAA;IACVwF,QAAQ,EAAE,KAAM;IAChBC,OAAO,EAAEpB,gBAAiB;IAC1BpC,KAAK,EAAE+C,YAAa;IACpBhC,WAAW,EAAEA,WAAY;IACzBD,KAAK,EAAEA,KAAM;IACbG,QAAQ,EAAEA,QAAS;IACnBwC,SAAS;IACTC,UAAU,EAAE;MACVC,QAAQ,EAAE,IAAI;MACdC,YAAY,eAAErH,MAAA,YAAA6G,aAAA,CAAChH,KAAA,CAAAyH,MAAM;QAACC,IAAI,EAAC,OAAO;QAACC,MAAM,EAAEC;MAAkB,CAAE;IACjE;EAAE,GACE7C,IAAI,CACT,CAAC,eACF5E,MAAA,YAAA6G,aAAA,CAAChH,KAAA,CAAA6H,SAAS;IACRC,IAAI,EAAEC,OAAO,CAAC5C,QAAQ,CAAE;IACxBA,QAAQ,EAAEA,QAAS;IACnB6C,OAAO,EAAE7B,WAAY;IACrB8B,YAAY,EAAE;MACZC,QAAQ,EAAE,QAAQ;MAClBC,UAAU,EAAE;IACd,CAAE;IACFC,eAAe,EAAE;MACfF,QAAQ,EAAE,KAAK;MACfC,UAAU,EAAE;IACd,CAAE;IACFE,UAAU,EAAE;MACVC,KAAK,EAAE;QACLC,KAAK,EAAE,EAAAlE,iBAAA,GAAAgB,QAAQ,CAACa,OAAO,cAAA7B,iBAAA,uBAAhBA,iBAAA,CAAkBmE,WAAW,KAAI;MAC1C;IACF;EAAE,GAEDrD,QAAQ,iBACPhF,MAAA,YAAA6G,aAAA,cACG1C,OAAO,CAACsC,GAAG,CAAC,UAACJ,IAAI,EAAEiC,KAAK;IAAA,oBACvBtI,MAAA,YAAA6G,aAAA,CAAChH,KAAA,CAAA0I,UAAU;MAACC,GAAG,EAAEF,KAAM;MAACrB,OAAO,EAAE,SAATA,OAAOA,CAAA;QAAA,OAAQhB,YAAY,CAACI,IAAI,CAAC5C,KAAK,CAAC;MAAA;IAAC,gBAC9DzD,MAAA,YAAA6G,aAAA,CAAChH,KAAA,CAAA4I,UAAU;MACTC,OAAO,EAAEjD,cAAc,CAACW,QAAQ,CAACC,IAAI,CAAC5C,KAAK,CAAE;MAC7Ca,QAAQ,EAAE,SAAVA,QAAQA,CAAA;QAAA,OAAQ2B,YAAY,CAACI,IAAI,CAAC5C,KAAK,CAAC;MAAA;IAAC,CAC1C,CAAC,EACD4C,IAAI,CAAC9B,KACI,CAAC;EAAA,CACd,CAAC,eACFvE,MAAA,YAAA6G,aAAA,2BACE7G,MAAA,YAAA6G,aAAA,CAAChH,KAAA,CAAA8I,QAAQ;IAACC,OAAO,EAAC,WAAW;IAAC3B,OAAO,EAAEV;EAAc,GAClD,IAAAlG,OAAC,EAAC,IAAI,CACC,CACP,CACF,CAEE,CACR,CAAC;AAEV,CAAC","ignoreList":[]}