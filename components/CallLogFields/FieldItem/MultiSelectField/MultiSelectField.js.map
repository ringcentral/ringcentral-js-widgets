{"version":3,"file":"MultiSelectField.js","names":["_juno","require","_junoIcon","_react","_interopRequireWildcard","_i18n","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_extends","assign","bind","arguments","length","apply","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","Symbol","iterator","Array","from","isArray","_arrayLikeToArray","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","toString","slice","constructor","name","test","l","f","o","next","done","push","value","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","MultiSelectField","_ref","_fieldRef$current","options","labelClassName","_ref$value","onChange","label","placeholder","_ref$disabled","disabled","onOpen","rest","_useState","useState","_useState2","anchorEl","setAnchorEl","fieldRef","useRef","_useState3","filter","v","trim","_useState4","selectedValues","setSelectedValues","filteredValues","useMemo","handleFieldClick","useCallback","current","handleClose","handleSelect","selectedValue","newValue","includes","item","concat","handleOkClick","displayValue","map","option","find","join","createElement","ref","RcTextField","clearBtn","onClick","fullWidth","InputProps","readOnly","endAdornment","RcIcon","size","symbol","ArrowDropDownIcon","RcPopover","open","Boolean","onClose","anchorOrigin","vertical","horizontal","transformOrigin","PaperProps","style","width","offsetWidth","index","RcMenuItem","key","RcCheckbox","checked","RcButton","variant","exports"],"sources":["components/CallLogFields/FieldItem/MultiSelectField/MultiSelectField.tsx"],"sourcesContent":["import {\n  RcButton,\n  RcCheckbox,\n  RcIcon,\n  RcMenuItem,\n  RcPopover,\n  RcTextField,\n} from '@ringcentral/juno';\nimport { ArrowDown2 as ArrowDropDownIcon } from '@ringcentral/juno-icon';\nimport type { FunctionComponent } from 'react';\nimport React, { useRef, useState, useMemo, useCallback } from 'react';\n\nimport { PickListOption } from '../FieldItem.interface';\n\nimport { t } from './i18n';\n\n/**\n * TODO:\n * 1. this feature needs to be UX reviewed if prioritized\n */\n\nexport type MultiSelectFieldProps = {\n  options: PickListOption[];\n  labelClassName?: string;\n  value?: string[];\n  onChange?: (value: string[]) => void;\n  label?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  helperText?: React.ReactNode;\n  error?: boolean;\n  required?: boolean;\n  onOpen?: () => void;\n};\n\nexport const MultiSelectField: FunctionComponent<MultiSelectFieldProps> = ({\n  options,\n  labelClassName,\n  value = [],\n  onChange,\n  label,\n  placeholder,\n  disabled = false,\n  onOpen,\n  ...rest\n}) => {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const fieldRef = useRef<HTMLDivElement | null>(null);\n  const [selectedValues, setSelectedValues] = useState<string[]>(() =>\n    value.filter((v) => v.trim() !== ''),\n  );\n\n  const filteredValues = useMemo(() => {\n    return selectedValues.filter((v) => v.trim() !== '');\n  }, [selectedValues]);\n\n  const handleFieldClick = useCallback(() => {\n    setAnchorEl(fieldRef.current);\n    onOpen?.();\n  }, [onOpen]);\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleSelect = useCallback(\n    (selectedValue: string) => {\n      const newValue = selectedValues.includes(selectedValue)\n        ? selectedValues.filter((item) => item !== selectedValue)\n        : [...selectedValues, selectedValue];\n      setSelectedValues(newValue.filter((v) => v.trim() !== ''));\n    },\n    [selectedValues],\n  );\n\n  const handleOkClick = useCallback(() => {\n    onChange?.(filteredValues);\n    handleClose();\n  }, [onChange, filteredValues, handleClose]);\n\n  const displayValue = useMemo(() => {\n    return filteredValues.length > 0\n      ? filteredValues\n          .map((value) => {\n            const option = options.find((o) => o.value === value);\n            return option?.label || value;\n          })\n          .join(', ')\n      : '';\n  }, [options, filteredValues]);\n\n  return (\n    <div ref={fieldRef}>\n      <RcTextField\n        clearBtn={false}\n        onClick={handleFieldClick}\n        value={displayValue}\n        placeholder={placeholder}\n        label={label}\n        disabled={disabled}\n        fullWidth\n        InputProps={{\n          readOnly: true,\n          endAdornment: <RcIcon size=\"small\" symbol={ArrowDropDownIcon} />,\n        }}\n        {...rest}\n      />\n      <RcPopover\n        open={Boolean(anchorEl)}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n        PaperProps={{\n          style: {\n            width: fieldRef.current?.offsetWidth || '100%',\n          },\n        }}\n      >\n        {anchorEl && (\n          <div>\n            {options.map((item, index) => (\n              <RcMenuItem key={index} onClick={() => handleSelect(item.value)}>\n                <RcCheckbox\n                  checked={selectedValues.includes(item.value)}\n                  onChange={() => handleSelect(item.value)}\n                />\n                {item.label}\n              </RcMenuItem>\n            ))}\n            <div>\n              <RcButton variant=\"contained\" onClick={handleOkClick}>\n                {t('ok')}\n              </RcButton>\n            </div>\n          </div>\n        )}\n      </RcPopover>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}