{"version":3,"sources":["components/ReplyWithMessage/index.tsx"],"names":["CALL_YOU","CALL_ME","ON_MY_WAY","CUSTOM_MESSAGE","cleanRegex","StyledMenuItem","RcMenuItem","defaultProps","disableRipple","ReplyWithMessage","props","callYouInputRef","callMeInputRef","customValueInput","onSelectType","index","setState","type","onChange","_getValue","onCustomValueChange","e","value","target","customValue","onCallYouTimeValueChange","callYouTimeValue","replace","onCallYouTimeUnitChange","unit","callYouTimeUnit","onCallMeTimeValueChange","callMeTimeValue","onCallMeTimeUnitChange","callMeTimeUnit","onReply","onCallYouInputRef","input","onCallMeInputRef","state","MINS","replyType","replyText","callbackDirection","timeValue","timeUnits","className","onCancel","currentLocale","disabled","disableButton","styles","root","messages","setTimeout","focus","messageItem","active","label","i18n","getString","inputField","buttonGroup","cancelButton","replyButton","buttonText","Component","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport classnames from 'classnames';\n\nimport isBlank from '@ringcentral-integration/commons/lib/isBlank';\nimport { RcMenuItem, RcMenuList, styled } from '@ringcentral/juno';\n\nimport { Button } from '../Button';\nimport i18n from './i18n';\nimport styles from './styles.scss';\nimport { MINS, TimeInput } from './TimeInput';\n\nconst CALL_YOU = 0;\nconst CALL_ME = 1;\nconst ON_MY_WAY = 2;\nconst CUSTOM_MESSAGE = 3;\nconst cleanRegex = /[^\\d]/g;\n\nconst StyledMenuItem = styled(RcMenuItem)`\n  flex-wrap: wrap;\n`;\n\nStyledMenuItem.defaultProps = {\n  disableRipple: true,\n};\n\ntype ReplyWithMessageProps = {\n  className?: string;\n  onCancel: (...args: any[]) => any;\n  onReply: (...args: any[]) => any;\n  currentLocale: string;\n  onChange?: (...args: any[]) => any;\n  disabled: boolean;\n};\n\ntype ReplyWithMessageState = {\n  type: number;\n  customValue: string;\n  callYouTimeValue: string;\n  callYouTimeUnit: any;\n  callMeTimeValue: string;\n  callMeTimeUnit: number;\n};\n\nclass ReplyWithMessage extends Component<\n  ReplyWithMessageProps,\n  ReplyWithMessageState\n> {\n  callYouInputRef: any;\n  callMeInputRef: any;\n  customValueInput: any;\n\n  static defaultProps: Partial<ReplyWithMessageProps> = {\n    className: null,\n    onChange: undefined,\n  };\n\n  constructor(props: ReplyWithMessageProps) {\n    super(props);\n    this.state = {\n      type: ON_MY_WAY,\n      customValue: '',\n      callYouTimeValue: '',\n      callYouTimeUnit: MINS,\n      callMeTimeValue: '',\n      callMeTimeUnit: MINS,\n    };\n  }\n\n  onSelectType = (index: number) => {\n    this.setState({\n      type: index,\n    });\n    this.props.onChange(this._getValue());\n  };\n\n  onCustomValueChange: React.ChangeEventHandler<HTMLTextAreaElement> = (e) => {\n    const value = e.target.value;\n    this.setState({\n      customValue: value,\n    });\n    this.props.onChange(this._getValue());\n  };\n\n  onCallYouTimeValueChange: React.ChangeEventHandler<HTMLInputElement> = (\n    e,\n  ) => {\n    const value = e.target.value;\n    this.setState({\n      callYouTimeValue: value.replace(cleanRegex, ''),\n    });\n  };\n\n  onCallYouTimeUnitChange = (unit: number) => {\n    this.setState({\n      callYouTimeUnit: unit,\n    });\n  };\n\n  onCallMeTimeValueChange: React.ChangeEventHandler<HTMLInputElement> = (e) => {\n    const value = e.target.value;\n    this.setState({\n      callMeTimeValue: value.replace(cleanRegex, ''),\n    });\n  };\n\n  onCallMeTimeUnitChange = (unit: number) => {\n    this.setState({\n      callMeTimeUnit: unit,\n    });\n  };\n\n  onReply = () => {\n    this.props.onReply(this._getValue());\n  };\n\n  onCallYouInputRef = (input: HTMLInputElement) => {\n    this.callYouInputRef = input;\n  };\n\n  onCallMeInputRef = (input: HTMLInputElement) => {\n    this.callMeInputRef = input;\n  };\n\n  _getValue() {\n    const value: {\n      replyType: number;\n      callbackDirection?: number;\n      replyText?: string;\n      timeValue?: string;\n      timeUnits?: number;\n    } = { replyType: 0 };\n    if (this.state.type === CUSTOM_MESSAGE) {\n      value.replyText = this.state.customValue;\n    }\n    if (this.state.type === ON_MY_WAY) {\n      value.replyText = 'On my way';\n    }\n    if (this.state.type < 2) {\n      value.replyType = 1;\n      value.callbackDirection = this.state.type;\n      if (this.state.type === 0) {\n        value.timeValue = this.state.callYouTimeValue;\n        value.timeUnits = this.state.callYouTimeUnit;\n        value.replyText = this.state.callYouTimeValue;\n      } else {\n        value.timeValue = this.state.callMeTimeValue;\n        value.timeUnits = this.state.callMeTimeUnit;\n        value.replyText = this.state.callMeTimeValue;\n      }\n    }\n    return value;\n  }\n\n  render() {\n    const { className, onCancel, currentLocale, disabled } = this.props;\n    const disableButton = isBlank(this._getValue().replyText) || disabled;\n    return (\n      <div className={classnames(styles.root, className)}>\n        <RcMenuList className={styles.messages}>\n          <StyledMenuItem\n            onClick={() => {\n              this.onSelectType(CALL_YOU);\n              setTimeout(() => {\n                this.callYouInputRef.focus();\n              }, 100);\n            }}\n            className={classnames(\n              styles.messageItem,\n              this.state.type === CALL_YOU ? styles.active : null,\n            )}\n            data-sign=\"willCallYouBackIn\"\n          >\n            <div className={styles.label}>\n              {i18n.getString('willCallYouBackIn', currentLocale)}...\n            </div>\n            <div className={styles.inputField}>\n              <TimeInput\n                currentLocale={currentLocale}\n                timeValue={this.state.callYouTimeValue}\n                timeUnit={this.state.callYouTimeUnit}\n                onTimeValueChange={this.onCallYouTimeValueChange}\n                onSelectTimeUnit={this.onCallYouTimeUnitChange}\n                inputRef={this.onCallYouInputRef}\n              />\n            </div>\n          </StyledMenuItem>\n          <StyledMenuItem\n            onClick={() => {\n              this.onSelectType(CALL_ME);\n              setTimeout(() => {\n                this.callMeInputRef.focus();\n              }, 100);\n            }}\n            className={classnames(\n              styles.messageItem,\n              this.state.type === CALL_ME ? styles.active : null,\n            )}\n            data-sign=\"callMeBackIn\"\n          >\n            <div className={styles.label}>\n              {i18n.getString('callMeBackIn', currentLocale)}...\n            </div>\n            <div className={styles.inputField}>\n              <TimeInput\n                currentLocale={currentLocale}\n                timeValue={this.state.callMeTimeValue}\n                timeUnit={this.state.callMeTimeUnit}\n                onTimeValueChange={this.onCallMeTimeValueChange}\n                onSelectTimeUnit={this.onCallMeTimeUnitChange}\n                inputRef={this.onCallMeInputRef}\n              />\n            </div>\n          </StyledMenuItem>\n          <StyledMenuItem\n            onClick={() => this.onSelectType(ON_MY_WAY)}\n            className={classnames(\n              styles.messageItem,\n              this.state.type === ON_MY_WAY ? styles.active : null,\n            )}\n            data-sign=\"onMyWay\"\n          >\n            <div className={styles.label}>\n              {i18n.getString('onMyWay', currentLocale)}\n            </div>\n          </StyledMenuItem>\n          <StyledMenuItem\n            onClick={() => {\n              this.onSelectType(CUSTOM_MESSAGE);\n              setTimeout(() => {\n                this.customValueInput.focus();\n              }, 100);\n            }}\n            className={classnames(\n              styles.messageItem,\n              this.state.type === CUSTOM_MESSAGE ? styles.active : null,\n            )}\n            data-sign=\"customMessage\"\n          >\n            <div className={styles.label}>\n              {i18n.getString('customMessage', currentLocale)}\n            </div>\n            <div className={styles.inputField}>\n              <textarea\n                value={this.state.customValue}\n                maxLength={50}\n                onChange={this.onCustomValueChange}\n                ref={(input) => {\n                  this.customValueInput = input;\n                }}\n              />\n            </div>\n          </StyledMenuItem>\n        </RcMenuList>\n        <div className={styles.buttonGroup}>\n          <Button\n            className={styles.cancelButton}\n            onClick={onCancel}\n            dataSign=\"cancelReplyButton\"\n          >\n            {i18n.getString('cancel', currentLocale)}\n          </Button>\n          <Button\n            className={classnames(\n              styles.replyButton,\n              disableButton ? styles.disabled : null,\n            )}\n            onClick={this.props.disabled ? () => {} : this.onReply}\n            disabled={disableButton}\n            dataSign=\"doReplyButton\"\n          >\n            <span className={styles.buttonText}>\n              {i18n.getString('reply', currentLocale)}\n            </span>\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ReplyWithMessage;\n"],"file":"index.js"}