{"version":3,"file":"index.js","names":["_Download","_interopRequireDefault","require","_clsx","_propTypes","_react","_isPicture","_GlipMarkdown","_styles","e","__esModule","Attachments","_ref","attachments","attachmentFiles","map","attachment","isPicture","contentUri","createElement","key","name","src","alt","className","styles","attachmentImg","type","download","href","attachmentFile","title","downloadIcon","width","height","propTypes","PropTypes","array","isRequired","PostContent","_ref2","post","atRender","text","length","clsx","root","replace","textContent","content","object","string","func","defaultProps","undefined","_default","exports"],"sources":["components/GlipPostContent/index.js"],"sourcesContent":["import DownloadIcon from '@ringcentral-integration/widgets/assets/images/Download.svg';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport isPicture from '../../lib/isPicture';\nimport Markdown from '../GlipMarkdown';\n\nimport styles from './styles.scss';\n\nfunction Attachments({ attachments }) {\n  const attachmentFiles = attachments.map((attachment) => {\n    if (isPicture(attachment.contentUri)) {\n      return (\n        <img\n          key={attachment.name}\n          src={attachment.contentUri}\n          alt={attachment.name}\n          className={styles.attachmentImg}\n        />\n      );\n    }\n    if (attachment.type === 'Card') {\n      // TODO: update message with i18n\n      return 'Unsupported message';\n    }\n    return (\n      <a\n        key={attachment.name}\n        download\n        href={attachment.contentUri}\n        className={styles.attachmentFile}\n      >\n        {attachment.name}\n        <span title=\"Download\" className={styles.downloadIcon}>\n          <DownloadIcon width=\"18\" height=\"18\" />\n        </span>\n      </a>\n    );\n  });\n  return <div className={styles.attachments}>{attachmentFiles}</div>;\n}\n\nAttachments.propTypes = {\n  attachments: PropTypes.array.isRequired,\n};\n\nfunction PostContent({ post, className, atRender }) {\n  if (!post.text && (!post.attachments || post.attachments.length === 0)) {\n    return (\n      <div className={clsx(styles.root, className)}>Unsupported message</div>\n    );\n  }\n  let text = post.text;\n  if (text) {\n    text = text.replace('[code]', '```\\n').replace('[/code]', '\\n```\\n');\n  }\n  const textContent = text ? (\n    <Markdown text={text} atRender={atRender} />\n  ) : null;\n  const attachments = post.attachments ? (\n    <Attachments attachments={post.attachments} />\n  ) : null;\n  return (\n    <div className={clsx(styles.root, className)}>\n      <div className={styles.content}>\n        {textContent}\n        {attachments}\n      </div>\n    </div>\n  );\n}\n\nPostContent.propTypes = {\n  post: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  atRender: PropTypes.func,\n};\n\nPostContent.defaultProps = {\n  className: undefined,\n  atRender: undefined,\n};\n\nexport default PostContent;\n"],"mappings":"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","ignoreList":[]}