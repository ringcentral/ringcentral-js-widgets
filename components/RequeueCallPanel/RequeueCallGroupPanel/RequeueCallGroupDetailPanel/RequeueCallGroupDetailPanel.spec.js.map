{"version":3,"sources":["components/RequeueCallPanel/RequeueCallGroupPanel/RequeueCallGroupDetailPanel/RequeueCallGroupDetailPanel.spec.tsx"],"names":["wrapper","currentLocale","searchGate","text","gateName","toLowerCase","includes","defalutSelectedQueueGroup","groupName","gates","gateId","setup","goBack","selectedQueueGroup","selectedGateIndex","submitSelection","selectedGateId","getSearchInput","find","at","getDetailItems","getSubmitButton","describe","it","expect","prop","toBe","length","jest","fn","simulate","toBeCalled","submitButton","toBeCalledWith","not","eventObj","target","value","searchText"],"mappings":"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","sourcesContent":["import { RcThemeProvider } from '@ringcentral/juno';\nimport { mount } from 'enzyme';\nimport React from 'react';\n\nimport { RequeueCallGroupDetailPanel } from './RequeueCallGroupDetailPanel';\n\nlet wrapper;\nconst currentLocale = 'en-US';\nconst searchGate = ({ gateName }, text) => {\n  return (\n    gateName && text && gateName.toLowerCase().includes(text.toLowerCase())\n  );\n};\nconst defalutSelectedQueueGroup = {\n  groupName: 'group3432',\n  gates: [\n    { gateId: '40520', gateName: 'DukeTest1' },\n    { gateId: '40521', gateName: 'DukeTest2' },\n    { gateId: '40522', gateName: 'EVdemo' },\n  ],\n};\n\nfunction setup({\n  goBack = () => {},\n  selectedQueueGroup = defalutSelectedQueueGroup,\n  selectedGateIndex = 0,\n  submitSelection = () => {},\n} = {}) {\n  const selectedGateId = defalutSelectedQueueGroup.gates[selectedGateIndex]\n    ? defalutSelectedQueueGroup.gates[selectedGateIndex].gateId\n    : '';\n  return mount(\n    <RcThemeProvider>\n      <RequeueCallGroupDetailPanel\n        currentLocale={currentLocale}\n        goBack={goBack}\n        searchGate={searchGate}\n        selectedQueueGroup={selectedQueueGroup as any}\n        selectedGateId={selectedGateId}\n        submitSelection={submitSelection}\n      />\n    </RcThemeProvider>,\n  );\n}\n\nconst getSearchInput = () => wrapper.find('RcTextField').at(0).find('input');\n\nconst getDetailItems = () => wrapper.find('RcList').at(0).find('RcListItem');\n\nconst getSubmitButton = () =>\n  wrapper.find('RcButton[data-sign=\"select-group-item\"]').at(0).find('button');\n\ndescribe('<RequeueCallGroupPanel />', () => {\n  it('Can display selected Queue Group Name and all the Queues', () => {\n    wrapper = setup({});\n    expect(wrapper.find('BackHeader').at(0).prop('title')).toBe(\n      defalutSelectedQueueGroup.groupName,\n    );\n    expect(getDetailItems().length).toBe(3);\n  });\n\n  it('Default with select Queue and enabled Select Button', () => {\n    const selectedGateIndex = 1;\n    wrapper = setup({\n      selectedGateIndex,\n    });\n    expect(getDetailItems().at(selectedGateIndex).prop('selected')).toBe(true);\n    expect(getSubmitButton().prop('disabled')).toBe(false);\n  });\n\n  it('When user click Back Button and function goBack will be called', () => {\n    const goBack = jest.fn(() => {});\n    wrapper = setup({ goBack });\n    wrapper\n      .find('[data-sign=\"backButton\"]')\n      .at(0)\n      .find('button')\n      .simulate('click');\n    expect(goBack).toBeCalled();\n  });\n\n  it('When user select a queue, the queue will be highlighted, then user click the select button, submitSelection will be called', () => {\n    const selectedGateIndex = 1;\n    const submitSelection = jest.fn(() => {});\n    wrapper = setup({ submitSelection });\n\n    getDetailItems()\n      .at(selectedGateIndex)\n      .find('RcListItem')\n      .find('div')\n      .simulate('click');\n\n    expect(\n      getDetailItems()\n        .at(selectedGateIndex)\n        .find('RcListItem')\n        .prop('selected'),\n    ).toBe(true);\n\n    const submitButton = getSubmitButton();\n    expect(submitButton.prop('disabled')).toBe(false);\n    submitButton.simulate('click');\n\n    const selectedGateId =\n      defalutSelectedQueueGroup.gates[selectedGateIndex].gateId;\n    expect(submitSelection).toBeCalledWith(selectedGateId);\n  });\n\n  it(\"When user select no queue, the Select Button should be disabled and submitSelection shouldn't be called\", () => {\n    const selectedGateIndex = -1;\n    const submitSelection = jest.fn(() => {});\n    wrapper = setup({ submitSelection, selectedGateIndex });\n\n    expect(\n      wrapper\n        .find('RcList')\n        .at(0)\n        .find('ListItemWithScrollCheck[selected=true]').length,\n    ).toBe(0);\n\n    const submitButton = getSubmitButton();\n    expect(submitButton.prop('disabled')).toBe(true);\n\n    submitButton.simulate('click');\n    expect(submitSelection).not.toBeCalled();\n  });\n\n  it('Can search Requeue Queue', () => {\n    wrapper = setup();\n    const eventObj = { target: { value: 'Duke' } };\n    getSearchInput().simulate('change', eventObj);\n\n    expect(getDetailItems().length).toBe(2);\n  });\n\n  it('Can search Requeue Queue, but with no result', () => {\n    wrapper = setup();\n    const searchText = 'Amy';\n    const eventObj = { target: { value: searchText } };\n    getSearchInput().simulate('change', eventObj);\n\n    expect(getDetailItems().length).toBe(0);\n\n    expect(\n      wrapper.find('[data-sign=\"searchResult\"]').at(0).find('div').at(0).text(),\n    ).toBe(`No result found for \"${searchText}\"`);\n  });\n});\n"],"file":"RequeueCallGroupDetailPanel.spec.js"}