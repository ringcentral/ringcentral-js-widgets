{"version":3,"file":"ActiveCallListPanel.js","names":["_react","_interopRequireDefault","require","_classnames","_FormatPhoneNumber","_SelectList","_SmallCallControl","_i18n","_styles","obj","__esModule","_toArray","arr","_arrayWithHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","len","length","i","arr2","iter","Symbol","iterator","isArray","ActiveCallListPanel","_ref","currentLocale","isOnMute","showMuteButton","callList","goBack","onHangup","onUnHold","onHold","onMute","onUnmute","userName","isInbound","callListRender","_callList","everyoneCaller","ownCall","transferCalls","createElement","Fragment","className","styles","item","emphasisCallInfo","i18n","getString","controlButtons","HangUpButton","button","size","classNames","otherCallInfo","children","formatPhoneNumber","phoneNumber","session","phone","concat","HoldCallButton","isOnHold","isHold","agentName","MuteCallButton","map","callItem","key","_callItem$session$tra","_callItem$session$tra2","destination","transferSessions","sessionId","BackHeader","title","onBackClick","list","exports"],"sources":["components/ActiveCallListPanel/ActiveCallListPanel.tsx"],"sourcesContent":["import type { FunctionComponent } from 'react';\nimport React from 'react';\n\nimport classNames from 'classnames';\n\nimport type {\n  EvActiveCallListUIFunctions,\n  EvActiveCallListUIProps,\n} from '../../interfaces';\nimport { formatPhoneNumber } from '../../lib/FormatPhoneNumber';\nimport { BackHeader } from '../SelectList';\nimport {\n  HangUpButton,\n  HoldCallButton,\n  MuteCallButton,\n} from '../SmallCallControl';\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nexport type ActiveCallListPanelProps = EvActiveCallListUIProps &\n  EvActiveCallListUIFunctions;\n\nconst ActiveCallListPanel: FunctionComponent<ActiveCallListPanelProps> = ({\n  currentLocale,\n  isOnMute,\n  showMuteButton,\n  callList,\n  goBack,\n  onHangup,\n  onUnHold,\n  onHold,\n  onMute,\n  onUnmute,\n  userName,\n  isInbound,\n}) => {\n  const callListRender = () => {\n    if (callList.length < 2) return null;\n    const [everyoneCaller, ownCall, ...transferCalls] = callList;\n    return (\n      <>\n        <div className={styles.item} data-sign=\"callItem\">\n          <span className={styles.emphasisCallInfo}>\n            {i18n.getString('everyone', currentLocale)}\n          </span>\n          <div className={styles.controlButtons}>\n            <HangUpButton\n              currentLocale={currentLocale}\n              onHangup={() => onHangup(everyoneCaller)}\n              className={styles.button}\n              size=\"small\"\n            />\n          </div>\n        </div>\n        <div className={styles.item} data-sign=\"callItem\">\n          <span className={classNames(styles.otherCallInfo, styles.children)}>\n            {formatPhoneNumber({\n              phoneNumber: everyoneCaller.session.phone,\n              currentLocale,\n            })}\n            {`(${i18n.getString(\n              isInbound ? 'caller' : 'callee',\n              currentLocale,\n            )})`}\n          </span>\n          <div className={styles.controlButtons}>\n            <HoldCallButton\n              currentLocale={currentLocale}\n              isOnHold={everyoneCaller.isHold}\n              onUnHold={() => onUnHold(everyoneCaller)}\n              onHold={() => onHold(everyoneCaller)}\n              className={styles.button}\n              size=\"small\"\n            />\n            <HangUpButton\n              currentLocale={currentLocale}\n              onHangup={() => onHangup(everyoneCaller)}\n              className={styles.button}\n              size=\"small\"\n            />\n          </div>\n        </div>\n        <div className={styles.item} data-sign=\"callItem\">\n          <span\n            className={classNames(styles.emphasisCallInfo, styles.children)}\n          >\n            {`${ownCall.agentName || userName || ''}(${i18n.getString(\n              'me',\n              currentLocale,\n            )})`}\n          </span>\n          <div className={styles.controlButtons}>\n            {showMuteButton && (\n              <MuteCallButton\n                isOnMute={isOnMute}\n                onMute={onMute}\n                onUnmute={onUnmute}\n                currentLocale={currentLocale}\n                className={styles.button}\n                size=\"small\"\n              />\n            )}\n            <HangUpButton\n              currentLocale={currentLocale}\n              onHangup={() => onHangup(ownCall)}\n              className={styles.button}\n              size=\"small\"\n            />\n          </div>\n        </div>\n        {transferCalls.map((callItem, key) => {\n          const destination =\n            callItem.session.transferSessions?.[callItem.session.sessionId]\n              ?.destination;\n          return (\n            <div className={styles.item} data-sign=\"callItem\" key={key}>\n              <span\n                className={classNames(styles.otherCallInfo, styles.children)}\n              >\n                {formatPhoneNumber({\n                  phoneNumber: destination,\n                  currentLocale,\n                })}\n              </span>\n              <div className={styles.controlButtons}>\n                <HoldCallButton\n                  currentLocale={currentLocale}\n                  isOnHold={callItem.isHold}\n                  onUnHold={() => onUnHold(callItem)}\n                  onHold={() => onHold(callItem)}\n                  className={styles.button}\n                  size=\"small\"\n                />\n                <HangUpButton\n                  currentLocale={currentLocale}\n                  onHangup={() => onHangup(callItem)}\n                  className={styles.button}\n                  size=\"small\"\n                />\n              </div>\n            </div>\n          );\n        })}\n      </>\n    );\n  };\n\n  return (\n    <>\n      <BackHeader\n        currentLocale={currentLocale}\n        title={i18n.getString('activeCall', currentLocale)}\n        onBackClick={goBack}\n      />\n      <div className={styles.list} data-sign=\"callList\">\n        {callListRender()}\n      </div>\n    </>\n  );\n};\n\nexport { ActiveCallListPanel };\n"],"mappings":"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"}