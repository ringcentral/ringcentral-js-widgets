{"version":3,"sources":["components/ActiveCallListPanel/ActiveCallListPanel.ut.tsx"],"names":["wrapper","currentLocale","defaultCallList","session","sessionId","isHold","setup","goBack","callList","onHangup","onUnHold","onHold","onMute","onUnmute","isOnMute","showMuteButton","userName","isInbound","wrapperUnmount","unmount","getControlButton","itemIndex","buttonType","dataIcon","callItem","find","at","button","title","prop","click","simulate","UTGoBackPage","jest","fn","expect","toBeCalled","UTNoCall","text","toBe","UTHoldRender","holdButton","i18n","getString","not","toBeCalledWith","UTUnholdRender","UTHangUpRender","HangUpButton","UTMuteRender","muteButton","toBeCalledTimes","UTUnMuteRender","unMuteButton"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { mount } from 'enzyme';\n\nimport { StepFunction } from '@ringcentral-integration/test-utils';\nimport { DeepPartial, RcThemeProvider } from '@ringcentral/juno';\n\nimport { EvCallData } from '../../interfaces';\nimport i18n from '../SmallCallControl/i18n';\nimport { ActiveCallListPanel } from './ActiveCallListPanel';\n\nlet wrapper;\nconst currentLocale = 'en-US';\nconst defaultCallList: DeepPartial<EvCallData>[] = [\n  {\n    session: {\n      sessionId: '5001',\n    },\n    isHold: true,\n  },\n  {\n    session: {\n      sessionId: '5002',\n    },\n    isHold: false,\n  },\n  {\n    session: {\n      sessionId: '5003',\n    },\n    isHold: false,\n  },\n] as any;\n\nfunction setup({\n  goBack = () => {},\n  callList = defaultCallList,\n  onHangup = () => {},\n  onUnHold = () => {},\n  onHold = () => {},\n  onMute = () => {},\n  onUnmute = () => {},\n  isOnMute = false,\n  showMuteButton = true,\n  userName = '',\n  isInbound = false,\n} = {}) {\n  return mount(\n    <RcThemeProvider>\n      <ActiveCallListPanel\n        currentLocale={currentLocale}\n        goBack={goBack}\n        callList={callList as any}\n        onHangup={onHangup}\n        onUnHold={onUnHold}\n        onHold={onHold}\n        onMute={onMute}\n        onUnmute={onUnmute}\n        isOnMute={isOnMute}\n        showMuteButton={showMuteButton}\n        userName={userName}\n        isInbound={isInbound}\n      />\n    </RcThemeProvider>,\n  );\n}\n\nexport const wrapperUnmount = () => {\n  wrapper.unmount();\n};\n\nconst getControlButton = ({ itemIndex, buttonType, dataIcon }) => {\n  const callItem = wrapper.find('[data-sign=\"callItem\"]').at(itemIndex);\n  const button = callItem.find(buttonType).find('button');\n  return {\n    title: button.prop('title'),\n    click: () => button.simulate('click'),\n  };\n};\n\nexport const UTGoBackPage: StepFunction = async () => {\n  const goBack = jest.fn();\n  wrapper = setup({ goBack });\n  wrapper\n    .find('[data-sign=\"backButton\"]')\n    .at(0)\n    .find('button')\n    .simulate('click');\n  expect(goBack).toBeCalled();\n  wrapperUnmount();\n};\n\nexport const UTNoCall: StepFunction = () => {\n  const callList = [];\n  wrapper = setup({\n    callList,\n  });\n  expect(wrapper.find('[data-sign=\"callList\"]').text()).toBe('');\n  wrapperUnmount();\n};\n\nexport const UTHoldRender: StepFunction = () => {\n  const onHold = jest.fn();\n  const onUnHold = jest.fn();\n  const itemIndex = 0;\n  wrapper = setup({\n    onHold,\n    onUnHold,\n  });\n  const holdButton = getControlButton({\n    itemIndex: itemIndex + 1,\n    buttonType: 'HoldCallButton',\n    dataIcon: 'hold',\n  });\n  expect(holdButton.title).toBe(i18n.getString('onHold'));\n  holdButton.click();\n  expect(onHold).not.toBeCalled();\n  expect(onUnHold).toBeCalledWith(defaultCallList[itemIndex]);\n  wrapperUnmount();\n};\n\nexport const UTUnholdRender: StepFunction = () => {\n  const onHold = jest.fn();\n  const onUnHold = jest.fn();\n  const itemIndex = 2;\n  wrapper = setup({ onHold, onUnHold });\n  const holdButton = getControlButton({\n    itemIndex: itemIndex + 1,\n    buttonType: 'HoldCallButton',\n    dataIcon: 'hold',\n  });\n  expect(holdButton.title).toBe(i18n.getString('hold'));\n  holdButton.click();\n  expect(onHold).toBeCalledWith(defaultCallList[itemIndex]);\n  expect(onUnHold).not.toBeCalled();\n  wrapperUnmount();\n};\n\nexport const UTHangUpRender: StepFunction = () => {\n  const onHangup = jest.fn();\n  const itemIndex = 0;\n  wrapper = setup({ onHangup });\n  const HangUpButton = getControlButton({\n    itemIndex,\n    buttonType: 'HangUpButton',\n    dataIcon: 'hand-up',\n  });\n  expect(HangUpButton.title).toBe(i18n.getString('hangup'));\n  HangUpButton.click();\n  expect(onHangup).toBeCalledWith(defaultCallList[itemIndex]);\n  wrapperUnmount();\n};\n\nexport const UTMuteRender: StepFunction = () => {\n  const onMute = jest.fn();\n  wrapper = setup({ onMute, isOnMute: false, showMuteButton: true });\n  const muteButton = getControlButton({\n    itemIndex: 2,\n    buttonType: 'MuteCallButton',\n    dataIcon: 'mic',\n  });\n  expect(muteButton.title).toBe(i18n.getString('mute'));\n  muteButton.click();\n  expect(onMute).toBeCalledTimes(1);\n  wrapperUnmount();\n};\n\nexport const UTUnMuteRender: StepFunction = () => {\n  const onUnmute = jest.fn();\n  wrapper = setup({ onUnmute, isOnMute: true, showMuteButton: true });\n  const unMuteButton = getControlButton({\n    itemIndex: 2,\n    buttonType: 'MuteCallButton',\n    dataIcon: 'mic-off',\n  });\n  expect(unMuteButton.title).toBe(i18n.getString('unmute'));\n  unMuteButton.click();\n  expect(onUnmute).toBeCalledTimes(1);\n  wrapperUnmount();\n};\n"],"file":"ActiveCallListPanel.ut.js"}