{"version":3,"file":"CallHistoryCallLogPanel.js","names":["_BasicCallInfo","require","_CallLogPanel","_interopRequireDefault","_juno","_clsx","_react","_interopRequireWildcard","_EvActivityCallUI","_ActivityCallLogWrapper","_IvrInfo","_styles","_utils","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","CallHistoryCallLogPanel","exports","_ref","currentLocale","currentLog","basicInfo","isInbound","disposeCall","status","saveStatus","disableDispose","isWide","ivrAlertData","onCopySuccess","scrollTo","referenceFieldOptions","method","rest","rootRef","useRef","isLoading","saveStatusValue","saving","headerTitle","concat","editLogSection","useCallback","props","_rootRef$current","createElement","EditLogSection","current","editSectionRef","buttonText","callLogMethods","create","submit","ref","classes","root","styles","callLogCallControl","clsx","noneShadow","refs","header","renderSaveLogButton","showSpinner","isInTransferPage","currentIdentify","renderEditLogSection","renderBasicInfo","Fragment","BasicCallInfo","isRinging","subject","followInfos","callInfos","panel","IvrInfo","isCallEnd","SubmitButtonWrapper","RcButton","size","fullWidth","disabled","loading","onClick","getButtonText"],"sources":["components/CallHistoryCallLogPanel/CallHistoryCallLogPanel.tsx"],"sourcesContent":["import { BasicCallInfo } from '@ringcentral-integration/widgets/components/BasicCallInfo';\nimport type { CallLogPanelProps } from '@ringcentral-integration/widgets/components/CallLogPanel';\nimport CallLogPanel from '@ringcentral-integration/widgets/components/CallLogPanel';\nimport type { CallLogTitle } from '@ringcentral-integration/widgets/components/CallLogPanel/CallLog.interface';\nimport { RcButton } from '@ringcentral/juno';\nimport clsx from 'clsx';\nimport type { FunctionComponent } from 'react';\nimport React, { useCallback, useRef } from 'react';\n\nimport type {\n  CallLogMethods,\n  EvActivityCallUIFunctions,\n  EvActivityCallUIProps,\n} from '../../interfaces/EvActivityCallUI.interface';\nimport {\n  callLogMethods,\n  saveStatus as saveStatusValue,\n} from '../../interfaces/EvActivityCallUI.interface';\nimport { SubmitButtonWrapper } from '../ActivityCallLogPanel/ActivityCallLogWrapper';\nimport { IvrInfo } from '../ActivityCallLogPanel/IvrInfo';\nimport styles from '../ActivityCallLogPanel/styles.scss';\nimport { EditLogSection, getButtonText } from '../ActivityCallLogPanel/utils';\n\nexport type CallHistoryCallLogPanelProps = EvActivityCallUIProps &\n  EvActivityCallUIFunctions &\n  Pick<CallLogPanelProps, 'startAdornmentRender'> & {\n    method: CallLogMethods;\n  };\n\nexport const CallHistoryCallLogPanel: FunctionComponent<\n  CallHistoryCallLogPanelProps\n> = ({\n  currentLocale,\n  currentLog,\n  basicInfo,\n  isInbound,\n  disposeCall,\n  status,\n  saveStatus,\n  disableDispose,\n  isWide,\n  ivrAlertData,\n  onCopySuccess,\n  scrollTo,\n  referenceFieldOptions,\n  method,\n  ...rest\n}) => {\n  const rootRef = useRef<CallLogPanel>(null);\n  const isLoading = saveStatus === saveStatusValue.saving;\n  const headerTitle = `${method}CallLog` as CallLogTitle;\n\n  const editLogSection = useCallback(\n    (props) => (\n      <EditLogSection\n        isWide={isWide}\n        {...props}\n        scrollTo={scrollTo}\n        rootRef={rootRef.current?.editSectionRef}\n        referenceFieldOptions={referenceFieldOptions}\n      />\n    ),\n    [isWide, scrollTo, referenceFieldOptions],\n  );\n\n  let buttonText;\n  if (\n    saveStatus === callLogMethods.create ||\n    saveStatus === saveStatusValue.submit\n  ) {\n    buttonText = callLogMethods.create;\n  } else {\n    buttonText = saveStatus;\n  }\n\n  return (\n    <CallLogPanel\n      ref={rootRef}\n      {...rest}\n      currentLog={currentLog}\n      currentLocale={currentLocale}\n      classes={{\n        root: styles.root,\n        callLogCallControl: clsx(styles.callLogCallControl, styles.noneShadow),\n      }}\n      refs={{\n        root: rootRef,\n      }}\n      isWide={isWide}\n      header\n      headerTitle={headerTitle}\n      renderSaveLogButton={() => null}\n      showSpinner={false}\n      isInTransferPage={false}\n      // TODO: that need refactor CallLogPanel and then can remove that\n      currentIdentify=\"123\"\n      renderEditLogSection={editLogSection}\n      renderBasicInfo={() => {\n        return (\n          <>\n            <BasicCallInfo\n              status={status}\n              currentLocale={currentLocale}\n              isInbound={isInbound}\n              isRinging={false}\n              subject={basicInfo.subject}\n              followInfos={basicInfo.followInfos}\n              callInfos={basicInfo.callInfos}\n              onCopySuccess={onCopySuccess}\n              classes={{\n                panel: styles.noneShadow,\n              }}\n            />\n            {ivrAlertData?.length > 0 && (\n              <IvrInfo isCallEnd ivrAlertData={ivrAlertData} />\n            )}\n          </>\n        );\n      }}\n    >\n      <SubmitButtonWrapper>\n        <RcButton\n          data-sign={method}\n          size=\"large\"\n          fullWidth\n          disabled={disableDispose}\n          loading={isLoading}\n          onClick={disposeCall}\n        >\n          {getButtonText(buttonText, currentLocale)}\n        </RcButton>\n      </SubmitButtonWrapper>\n    </CallLogPanel>\n  );\n};\n"],"mappings":"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","ignoreList":[]}