{"version":3,"sources":["components/RegionSettingsPanel/index.js"],"names":["RegionSettings","props","onAreaCodeChange","e","value","currentTarget","setState","areaCodeValue","areaCodeInputFilter","onCountryCodeChange","option","isoCode","state","countryCodeValue","onResetClick","areaCode","countryCode","onSaveClick","onSave","showAreaCode","includes","undefined","onBackClick","onBackButtonClick","replace","renderHandler","callingCode","getString","currentLocale","renderValue","selectedOption","availableCountries","find","country","nextProps","hasChanges","hasNA","c","messageId","length","root","className","content","hint","select","children","propTypes","string","node","func","isRequired","arrayOf","shape","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nimport BackHeader from '../BackHeader';\nimport Panel from '../Panel';\nimport InputField from '../InputField';\nimport TextInput from '../TextInput';\nimport Select from '../DropdownSelect';\nimport SaveButton from '../SaveButton';\n\nimport styles from './styles.scss';\nimport i18n from './i18n';\nimport countryNames from '../../lib/countryNames';\n\nexport default class RegionSettings extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      countryCodeValue: props.countryCode,\n      areaCodeValue: props.areaCode,\n    };\n  }\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.areaCode !== this.props.areaCode) {\n      this.setState({\n        areaCodeValue: nextProps.areaCode,\n      });\n    }\n    if (nextProps.countryCode !== this.props.countryCode) {\n      this.setState({\n        countryCodeValue: nextProps.countryCode,\n      });\n    }\n  }\n\n  onAreaCodeChange = (e) => {\n    const value = e.currentTarget.value;\n    this.setState({\n      areaCodeValue: this.areaCodeInputFilter(value),\n    });\n  }\n\n  onCountryCodeChange = (option) => {\n    const value = option.isoCode;\n    if (value !== this.state.countryCodeValue) {\n      this.setState({\n        countryCodeValue: value,\n      });\n    }\n  }\n  onResetClick = () => {\n    this.setState({\n      areaCodeValue: this.props.areaCode,\n      countryCodeValue: this.props.countryCode,\n    });\n  }\n  onSaveClick = () => {\n    if (typeof this.props.onSave === 'function') {\n      const showAreaCode = ['CA', 'US'].includes(this.state.countryCodeValue);\n      this.props.onSave({\n        areaCode: showAreaCode ? this.state.areaCodeValue : undefined,\n        countryCode: this.state.countryCodeValue,\n      });\n    }\n  }\n  onBackClick = () => {\n    if (typeof this.props.onBackButtonClick === 'function') {\n      this.props.onBackButtonClick();\n    }\n  }\n\n  areaCodeInputFilter = value =>\n    value.replace(/[^\\d]/g, '')\n\n  renderHandler = option =>\n    `(+${option.callingCode}) ${countryNames.getString(option.isoCode, this.props.currentLocale)}`\n\n  renderValue = (value) => {\n    const selectedOption = this.props.availableCountries.find(\n      country => country.isoCode === value\n    );\n    if (!selectedOption) {\n      return '';\n    }\n    return `(+${selectedOption.callingCode}) ${countryNames.getString(selectedOption.isoCode, this.props.currentLocale)}`;\n  }\n\n  render() {\n    const hasChanges = this.state.areaCodeValue !== this.props.areaCode ||\n      this.state.countryCodeValue !== this.props.countryCode;\n    const hasNA = !!this.props.availableCountries.find(c => c.isoCode === 'US') ||\n      !!this.props.availableCountries.find(c => c.isoCode === 'CA');\n    let messageId;\n    if (this.props.availableCountries.length > 1) {\n      if (hasNA) {\n        messageId = 'MultiWithNAMessage';\n      } else {\n        messageId = 'MultiWithoutNAMessage';\n      }\n    } else if (hasNA) {\n      messageId = 'NAOnlyMessage';\n    }\n    const showAreaCode = this.state.countryCodeValue === 'US' ||\n      this.state.countryCodeValue === 'CA';\n\n    return (\n      <div className={classnames(styles.root, this.props.className)}>\n        <BackHeader\n          buttons={[]}\n          onBackClick={this.onBackClick}\n          >\n          {i18n.getString('title', this.props.currentLocale)}\n        </BackHeader>\n        <Panel className={styles.content}>\n          <div className={styles.hint}>\n            {i18n.getString(messageId, this.props.currentLocale)}\n          </div>\n          <InputField\n            label={i18n.getString('country', this.props.currentLocale)}>\n            <Select\n              className={styles.select}\n              value={this.state.countryCodeValue}\n              onChange={this.onCountryCodeChange}\n              options={this.props.availableCountries}\n              dropdownAlign=\"left\"\n              valueFunction={option => option.isoCode}\n              renderFunction={this.renderHandler}\n              renderValue={this.renderValue}\n              titleEnabled\n            />\n          </InputField>\n          {showAreaCode && (\n            <InputField\n              label={i18n.getString('areaCode', this.props.currentLocale)}>\n              <TextInput\n                placeholder={i18n.getString('areaCodePlaceholder', this.props.currentLocale)}\n                maxLength={3}\n                filter={this.areaCodeInputFilter}\n                value={this.state.areaCodeValue}\n                onChange={this.onAreaCodeChange} />\n            </InputField>\n          )}\n          <SaveButton\n            currentLocale={this.props.currentLocale}\n            onClick={this.onSaveClick}\n            disabled={!hasChanges}\n          />\n          {this.props.children}\n        </Panel>\n      </div>\n    );\n  }\n}\n\nRegionSettings.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node,\n  onBackButtonClick: PropTypes.func,\n  currentLocale: PropTypes.string.isRequired,\n  availableCountries: PropTypes.arrayOf(PropTypes.shape({\n    isoCode: PropTypes.string,\n    callingCode: PropTypes.string,\n  })).isRequired,\n  countryCode: PropTypes.string.isRequired,\n  areaCode: PropTypes.string.isRequired,\n  onSave: PropTypes.func,\n};\n\nRegionSettings.defaultProps = {\n  className: undefined,\n  children: undefined,\n  onBackButtonClick: undefined,\n  onSave: undefined,\n};\n"]}