{"version":3,"file":"replaceI18nInlineObject.js","names":["_fs","_interopRequireDefault","require","_path","e","__esModule","replaceI18nInlineObject","exports","i18nFolder","targetFilePath","_ref","arguments","length","undefined","excludes","fileList","fs","readdirSync","i18nAll","filter","x","includes","reduce","acc","curr","key","replace","value","path","join","forEach","exclude","toLocaleLowerCase","inlineFilePath","inlineFile","readFileSync","content","toString","startMark","start","indexOf","end","newContent","slice","concat","JSON","stringify","console","log","writeFileSync"],"sources":["scripts/replaceI18nInlineObject.ts"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\n/**\n * Replaces the inline i18n object in a target file with the i18n objects from a specified folder.\n * @param i18nFolder - The path to the folder containing the i18n files.\n * @param targetFilePath - The path to the target file where the inline i18n object will be replaced.\n */\nexport const replaceI18nInlineObject = (\n  i18nFolder: string,\n  targetFilePath: string,\n  { excludes }: { excludes: string[] } = { excludes: [] },\n) => {\n  const fileList = fs.readdirSync(i18nFolder);\n\n  const i18nAll = fileList\n    .filter(\n      (x) => x.includes('ts') && !['index.ts', 'loadLocale.ts'].includes(x),\n    )\n    .reduce((acc, curr) => {\n      const key = curr.replace('.ts', '');\n      // eslint-disable-next-line @typescript-eslint/no-var-requires\n      const value = require(path.join(i18nFolder, curr)).default;\n      excludes.forEach((exclude) => {\n        delete value[exclude];\n      });\n      acc[key.toLocaleLowerCase()] = value;\n      return acc;\n    }, {} as any);\n\n  const inlineFilePath = targetFilePath;\n  const inlineFile = fs.readFileSync(inlineFilePath);\n\n  const content = inlineFile.toString();\n\n  const startMark = '// i18n-replace';\n  const start = content.indexOf(startMark);\n  const end = content.indexOf('// i18n-replace-end');\n\n  const newContent =\n    content.slice(0, start + startMark.length + 1) +\n    `const i18n = ${JSON.stringify(i18nAll)}` +\n    content.slice(end);\n  console.log('write inline i18n content success:', newContent);\n\n  fs.writeFileSync(inlineFilePath, newContent);\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,GAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAwB,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAExB;AACA;AACA;AACA;AACA;AACO,IAAME,uBAAuB,GAAAC,OAAA,CAAAD,uBAAA,GAAG,SAA1BA,uBAAuBA,CAClCE,UAAkB,EAClBC,cAAsB,EAEnB;EAAA,IAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MADoC;MAAEG,QAAQ,EAAE;IAAG,CAAC;IAArDA,QAAQ,GAAAJ,IAAA,CAARI,QAAQ;EAEV,IAAMC,QAAQ,GAAGC,cAAE,CAACC,WAAW,CAACT,UAAU,CAAC;EAE3C,IAAMU,OAAO,GAAGH,QAAQ,CACrBI,MAAM,CACL,UAACC,CAAC;IAAA,OAAKA,CAAC,CAACC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,UAAU,EAAE,eAAe,CAAC,CAACA,QAAQ,CAACD,CAAC,CAAC;EAAA,CACvE,CAAC,CACAE,MAAM,CAAC,UAACC,GAAG,EAAEC,IAAI,EAAK;IACrB,IAAMC,GAAG,GAAGD,IAAI,CAACE,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;IACnC;IACA,IAAMC,KAAK,GAAGzB,OAAO,CAAC0B,gBAAI,CAACC,IAAI,CAACrB,UAAU,EAAEgB,IAAI,CAAC,CAAC,WAAQ;IAC1DV,QAAQ,CAACgB,OAAO,CAAC,UAACC,OAAO,EAAK;MAC5B,OAAOJ,KAAK,CAACI,OAAO,CAAC;IACvB,CAAC,CAAC;IACFR,GAAG,CAACE,GAAG,CAACO,iBAAiB,CAAC,CAAC,CAAC,GAAGL,KAAK;IACpC,OAAOJ,GAAG;EACZ,CAAC,EAAE,CAAC,CAAQ,CAAC;EAEf,IAAMU,cAAc,GAAGxB,cAAc;EACrC,IAAMyB,UAAU,GAAGlB,cAAE,CAACmB,YAAY,CAACF,cAAc,CAAC;EAElD,IAAMG,OAAO,GAAGF,UAAU,CAACG,QAAQ,CAAC,CAAC;EAErC,IAAMC,SAAS,GAAG,iBAAiB;EACnC,IAAMC,KAAK,GAAGH,OAAO,CAACI,OAAO,CAACF,SAAS,CAAC;EACxC,IAAMG,GAAG,GAAGL,OAAO,CAACI,OAAO,CAAC,qBAAqB,CAAC;EAElD,IAAME,UAAU,GACdN,OAAO,CAACO,KAAK,CAAC,CAAC,EAAEJ,KAAK,GAAGD,SAAS,CAAC1B,MAAM,GAAG,CAAC,CAAC,mBAAAgC,MAAA,CAC9BC,IAAI,CAACC,SAAS,CAAC5B,OAAO,CAAC,CAAE,GACzCkB,OAAO,CAACO,KAAK,CAACF,GAAG,CAAC;EACpBM,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEN,UAAU,CAAC;EAE7D1B,cAAE,CAACiC,aAAa,CAAChB,cAAc,EAAES,UAAU,CAAC;AAC9C,CAAC","ignoreList":[]}