{"version":3,"file":"checkPatches.js","names":["checkPatches","exports","oldStateTree","options","_options$_patches","patches","_patches","_iterator","_createForOfIteratorHelper","_step","s","n","done","patch","value","op","path","toString","call","Object","keys","length","Array","isArray","oldState","reduce","state","_path","_typeof","err","e","f"],"sources":["lib/usm-redux/checkPatches.ts"],"sourcesContent":["import type { Action } from './interface';\n\nexport const checkPatches = (\n  oldStateTree: Record<string, any>,\n  options: Action,\n) => {\n  const patches = options._patches ?? [];\n  for (const patch of patches) {\n    const { op, path, value } = patch;\n    if (\n      op === 'replace' &&\n      ((toString.call(value) === '[object Object]' &&\n        !!Object.keys(value).length) ||\n        (Array.isArray(value) && !!value.length))\n    ) {\n      const oldState = path.reduce(\n        (state, _path) => state?.[_path],\n        oldStateTree,\n      );\n      if (oldState && typeof oldState === 'object') {\n        const length = Array.isArray(oldState)\n          ? oldState.length\n          : Object.keys(oldState).length;\n        if (length > 0) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAEO,IAAMA,YAAY,GAAAC,OAAA,CAAAD,YAAA,GAAG,SAAfA,YAAYA,CACvBE,YAAiC,EACjCC,OAAe,EACZ;EAAA,IAAAC,iBAAA;EACH,IAAMC,OAAO,IAAAD,iBAAA,GAAGD,OAAO,CAACG,QAAQ,cAAAF,iBAAA,cAAAA,iBAAA,GAAI,EAAE;EAAC,IAAAG,SAAA,GAAAC,0BAAA,CACnBH,OAAO;IAAAI,KAAA;EAAA;IAA3B,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAA6B;MAAA,IAAlBC,KAAK,GAAAJ,KAAA,CAAAK,KAAA;MACd,IAAQC,EAAE,GAAkBF,KAAK,CAAzBE,EAAE;QAAEC,IAAI,GAAYH,KAAK,CAArBG,IAAI;QAAEF,KAAK,GAAKD,KAAK,CAAfC,KAAK;MACvB,IACEC,EAAE,KAAK,SAAS,KACdE,QAAQ,CAACC,IAAI,CAACJ,KAAK,CAAC,KAAK,iBAAiB,IAC1C,CAAC,CAACK,MAAM,CAACC,IAAI,CAACN,KAAK,CAAC,CAACO,MAAM,IAC1BC,KAAK,CAACC,OAAO,CAACT,KAAK,CAAC,IAAI,CAAC,CAACA,KAAK,CAACO,MAAO,CAAC,EAC3C;QACA,IAAMG,QAAQ,GAAGR,IAAI,CAACS,MAAM,CAC1B,UAACC,KAAK,EAAEC,KAAK;UAAA,OAAKD,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAGC,KAAK,CAAC;QAAA,GAChCzB,YACF,CAAC;QACD,IAAIsB,QAAQ,IAAII,OAAA,CAAOJ,QAAQ,MAAK,QAAQ,EAAE;UAC5C,IAAMH,MAAM,GAAGC,KAAK,CAACC,OAAO,CAACC,QAAQ,CAAC,GAClCA,QAAQ,CAACH,MAAM,GACfF,MAAM,CAACC,IAAI,CAACI,QAAQ,CAAC,CAACH,MAAM;UAChC,IAAIA,MAAM,GAAG,CAAC,EAAE;YACd,OAAO,IAAI;UACb;QACF;MACF;IACF;EAAC,SAAAQ,GAAA;IAAAtB,SAAA,CAAAuB,CAAA,CAAAD,GAAA;EAAA;IAAAtB,SAAA,CAAAwB,CAAA;EAAA;EACD,OAAO,KAAK;AACd,CAAC","ignoreList":[]}