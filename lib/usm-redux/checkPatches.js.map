{"version":3,"sources":["lib/usm-redux/checkPatches.ts"],"names":["checkPatches","oldStateTree","options","patches","_patches","patch","op","path","value","toString","call","Object","keys","length","Array","isArray","oldState","reduce","state","_path"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEO,IAAMA,YAAY,GAAG,SAAfA,YAAe,CAC1BC,YAD0B,EAE1BC,OAF0B,EAGvB;AAAA;;AACH,MAAMC,OAAO,wBAAGD,OAAO,CAACE,QAAX,iEAAuB,EAApC;;AADG,6CAEiBD,OAFjB;AAAA;;AAAA;AAEH,wDAA6B;AAAA,UAAlBE,KAAkB;AAAA,UACnBC,EADmB,GACCD,KADD,CACnBC,EADmB;AAAA,UACfC,IADe,GACCF,KADD,CACfE,IADe;AAAA,UACTC,KADS,GACCH,KADD,CACTG,KADS;;AAE3B,UACEF,EAAE,KAAK,SAAP,KACEG,QAAQ,CAACC,IAAT,CAAcF,KAAd,MAAyB,iBAAzB,IACA,CAAC,CAACG,MAAM,CAACC,IAAP,CAAYJ,KAAZ,EAAmBK,MADtB,IAEEC,KAAK,CAACC,OAAN,CAAcP,KAAd,KAAwB,CAAC,CAACA,KAAK,CAACK,MAHnC,CADF,EAKE;AACA,YAAMG,QAAQ,GAAGT,IAAI,CAACU,MAAL,CACf,UAACC,KAAD,EAAQC,KAAR;AAAA,iBAAkBD,KAAlB,aAAkBA,KAAlB,uBAAkBA,KAAK,CAAGC,KAAH,CAAvB;AAAA,SADe,EAEflB,YAFe,CAAjB;;AAIA,YAAIe,QAAQ,IAAI,QAAOA,QAAP,MAAoB,QAApC,EAA8C;AAC5C,cAAMH,MAAM,GAAGC,KAAK,CAACC,OAAN,CAAcC,QAAd,IACXA,QAAQ,CAACH,MADE,GAEXF,MAAM,CAACC,IAAP,CAAYI,QAAZ,EAAsBH,MAF1B;;AAGA,cAAIA,MAAM,GAAG,CAAb,EAAgB;AACd,mBAAO,IAAP;AACD;AACF;AACF;AACF;AAvBE;AAAA;AAAA;AAAA;AAAA;;AAwBH,SAAO,KAAP;AACD,CA5BM","sourcesContent":["import { Action } from './interface';\n\nexport const checkPatches = (\n  oldStateTree: Record<string, any>,\n  options: Action,\n) => {\n  const patches = options._patches ?? [];\n  for (const patch of patches) {\n    const { op, path, value } = patch;\n    if (\n      op === 'replace' &&\n      ((toString.call(value) === '[object Object]' &&\n        !!Object.keys(value).length) ||\n        (Array.isArray(value) && !!value.length))\n    ) {\n      const oldState = path.reduce(\n        (state, _path) => state?.[_path],\n        oldStateTree,\n      );\n      if (oldState && typeof oldState === 'object') {\n        const length = Array.isArray(oldState)\n          ? oldState.length\n          : Object.keys(oldState).length;\n        if (length > 0) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n};\n"],"file":"checkPatches.js"}