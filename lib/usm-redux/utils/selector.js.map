{"version":3,"file":"selector.js","names":["defaultMemoize","func","lastArgs","Map","lastResult","areShallowEqualWithArray","get","arguments","set","apply","createSelectorCreatorWithArray","memoize","dependenciesFunc","resultFunc","memoizedResultFunc","createSelectorWithArray"],"sources":["lib/usm-redux/utils/selector.ts"],"sourcesContent":["/* eslint-disable func-names */\n/* eslint-disable prefer-rest-params */\nimport { areShallowEqualWithArray } from './isEqual';\n\nexport function defaultMemoize(func: Function) {\n  const lastArgs: Map<any, IArguments | null> = new Map();\n  const lastResult: Map<any, unknown> = new Map();\n  return function (this: ThisType<unknown>) {\n    if (!areShallowEqualWithArray(lastArgs.get(this) ?? [], arguments)) {\n      lastResult.set(this, func.apply(this, arguments));\n    }\n    lastArgs.set(this, arguments);\n    return lastResult.get(this);\n  };\n}\n\nconst createSelectorCreatorWithArray = (memoize: Function = defaultMemoize) => {\n  return (dependenciesFunc: Function, resultFunc: Function) => {\n    const memoizedResultFunc = memoize(function (this: ThisType<unknown>) {\n      return resultFunc.apply(this, arguments);\n    });\n    return function (this: ThisType<unknown>) {\n      return memoizedResultFunc.apply(\n        this,\n        dependenciesFunc.apply(null, [this]),\n      );\n    };\n  };\n};\n\nexport const createSelectorWithArray = createSelectorCreatorWithArray();\n"],"mappings":";;;;;;;;;;;;;;;;;;AAEA;;AAFA;;AACA;AAGO,SAASA,cAAT,CAAwBC,IAAxB,EAAwC;EAC7C,IAAMC,QAAqC,GAAG,IAAIC,GAAJ,EAA9C;EACA,IAAMC,UAA6B,GAAG,IAAID,GAAJ,EAAtC;EACA,OAAO,YAAmC;IAAA;;IACxC,IAAI,CAAC,IAAAE,iCAAA,mBAAyBH,QAAQ,CAACI,GAAT,CAAa,IAAb,CAAzB,yDAA+C,EAA/C,EAAmDC,SAAnD,CAAL,EAAoE;MAClEH,UAAU,CAACI,GAAX,CAAe,IAAf,EAAqBP,IAAI,CAACQ,KAAL,CAAW,IAAX,EAAiBF,SAAjB,CAArB;IACD;;IACDL,QAAQ,CAACM,GAAT,CAAa,IAAb,EAAmBD,SAAnB;IACA,OAAOH,UAAU,CAACE,GAAX,CAAe,IAAf,CAAP;EACD,CAND;AAOD;;AAED,IAAMI,8BAA8B,GAAG,SAAjCA,8BAAiC,GAAwC;EAAA,IAAvCC,OAAuC,uEAAnBX,cAAmB;EAC7E,OAAO,UAACY,gBAAD,EAA6BC,UAA7B,EAAsD;IAC3D,IAAMC,kBAAkB,GAAGH,OAAO,CAAC,YAAmC;MACpE,OAAOE,UAAU,CAACJ,KAAX,CAAiB,IAAjB,EAAuBF,SAAvB,CAAP;IACD,CAFiC,CAAlC;IAGA,OAAO,YAAmC;MACxC,OAAOO,kBAAkB,CAACL,KAAnB,CACL,IADK,EAELG,gBAAgB,CAACH,KAAjB,CAAuB,IAAvB,EAA6B,CAAC,IAAD,CAA7B,CAFK,CAAP;IAID,CALD;EAMD,CAVD;AAWD,CAZD;;AAcO,IAAMM,uBAAuB,GAAGL,8BAA8B,EAA9D"}