{"version":3,"file":"ClientTransport.js","names":["_uuid","require","_TransportBase2","_constants","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","ClientTransport","exports","_TransportBase","_this","options","undefined","name","TRANSPORT_NAME","_port","_requests","Map","chrome","runtime","connect","CONNECT_PORT_NAME","onMessage","addListener","_ref","type","payload","requestId","result","error","_events","send","emit","response","callback","get","reject","Error","_request","_callee","_ref2","_this2","promise","timeout","_context","v4","set","postMessage","request","setTimeout","_timeout","clearTimeout","concat","functionPath","message","_x","_send","_callee2","_ref3","_context2","_x2","TransportBase"],"sources":["lib/ChromeTransport/ClientTransport.ts"],"sourcesContent":["import { v4 } from 'uuid';\n\nimport {\n  TransportBase,\n  type BaseEventEnum,\n  type TransportBaseProps,\n} from '../TransportBase';\n\nimport { CONNECT_PORT_NAME, TRANSPORT_NAME } from './constants';\n\n/* global chrome */\n\nexport interface ClientTransportProps\n  extends Omit<TransportBaseProps, 'name'> {}\n\ntype PromiseCallback = {\n  resolve: (result: any) => void;\n  reject: (reason: any) => void;\n};\n\nexport class ClientTransport extends TransportBase {\n  _port: chrome.runtime.Port;\n  _requests = new Map<string, PromiseCallback>();\n\n  constructor(options: ClientTransportProps = {}) {\n    super({\n      ...options,\n      name: TRANSPORT_NAME,\n    });\n\n    this._port = chrome.runtime.connect({ name: CONNECT_PORT_NAME });\n    this._port.onMessage.addListener(\n      ({\n        type,\n        payload,\n        requestId,\n        result,\n        error,\n      }: {\n        type: keyof BaseEventEnum;\n        payload: unknown;\n        requestId: string;\n        result?: unknown;\n        error?: string;\n      }) => {\n        switch (type) {\n          case this._events.send:\n            {\n              if (payload) {\n                this.emit(this._events.send, payload);\n              }\n            }\n            break;\n          case this._events.push:\n            {\n              if (payload) {\n                this.emit(this._events.push, payload);\n              }\n            }\n            break;\n          case this._events.response:\n            {\n              const callback = this._requests.get(requestId);\n              if (callback) {\n                if (error) {\n                  callback.reject(new Error(error));\n                } else {\n                  callback.resolve(result);\n                }\n              }\n            }\n            break;\n          default:\n            break;\n        }\n      },\n    );\n  }\n\n  async request({ payload }: { payload: unknown }) {\n    const requestId = v4();\n    let promise = new Promise((resolve, reject) => {\n      this._requests.set(requestId, {\n        resolve,\n        reject,\n      });\n      this._port.postMessage({\n        type: this._events.request,\n        requestId,\n        payload,\n      });\n    });\n    let timeout: NodeJS.Timeout | null = setTimeout(() => {\n      timeout = null;\n      const callback = this._requests.get(requestId);\n      if (callback) {\n        callback.reject(new Error(this._events.timeout));\n      }\n    }, this._timeout);\n    promise = promise\n      .then((result) => {\n        if (timeout) clearTimeout(timeout);\n        this._requests.delete(requestId);\n        return Promise.resolve(result);\n      })\n      .catch((error) => {\n        if (timeout) clearTimeout(timeout);\n        this._requests.delete(requestId);\n        return Promise.reject(\n          // @ts-expect-error TS(2571): Object is of type 'unknown'.\n          new Error(`${payload.functionPath}: ${error.message}`),\n        );\n      });\n    return promise;\n  }\n\n  async send({ payload }: { payload: unknown }) {\n    this._port.postMessage({\n      type: this._events.send,\n      payload,\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]}