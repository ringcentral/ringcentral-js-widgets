{"version":3,"file":"loggerV2.js","names":["_mfeLogger","require","_reactantShare","_globalThis$localStor","_globalThis$localStor2","_typeof","o","Symbol","iterator","constructor","prototype","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","t","toString","call","slice","name","Array","from","test","isArray","length","e","n","asyncGeneratorStep","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_classCallCheck","_defineProperties","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","_toPrimitive","toPrimitive","String","Number","isSharedWorker","globalThis","SharedWorkerGlobalScope","SharedWorkerTransport","_options","undefined","type","transport","enabled","createTransport","prefix","_init","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","init","_write","_callee2","_ref","_this$transport","payload","_callee2$","_context2","emit","respond","write","_x","exports","MemoryStorage","_data","getItem","setItem","removeItem","toggleKey","DEFAULT_LOGGER_ENABLED","loggerEnabled","localStorage","toggleLogger","_globalThis$localStor3","checkLoggerEnabled","defaultEnabled","_globalThis$localStor4","consoleIgnoreRule","consoleTransport","ConsoleTransport","storage","ROARR_LOG","ignoreRule","sessionId","Math","random","substring","concat","_globalThis$indexedDB","_globalThis$indexedDB2","_globalThis$indexedDB3","_globalThis$indexedDB4","globalName","split","indexedDB","deleteDatabase","TestStorageTransport","messages","logLevelMap","options","saveDB","getLogs","content","downloadLogs","message","_console","namespace","context","level","logLevel","serviceName","data","JSON","parse","push","time","console","loggerV2","useLogger","transports","process","env","NODE_ENV","StorageTransport","integrations","ScriptErrorIntegration","ConsoleIntegration","create","module","getPrototypeOf","nameKey","warn","getContext","tag"],"sources":["lib/logger/loggerV2.ts"],"sourcesContent":["import {\n  type ITransport,\n  type SerializedMessage,\n  ConsoleIntegration,\n  ConsoleTransport,\n  Logger,\n  ScriptErrorIntegration,\n  StorageTransport,\n  TransportInitOptions,\n  useLogger,\n} from '@ringcentral/mfe-logger';\nimport { type Transport, createTransport, nameKey } from 'reactant-share';\n\nconst isSharedWorker = !!globalThis.SharedWorkerGlobalScope;\ninterface SharedWorkerTransportOptions {\n  /**\n   * enable transport\n   */\n  enabled?: boolean;\n}\n\nexport class SharedWorkerTransport implements ITransport {\n  type = 'storage';\n\n  private transport?: Transport;\n\n  constructor(protected _options: SharedWorkerTransportOptions = {}) {\n    if (isSharedWorker && this._options.enabled) {\n      this.transport = createTransport('SharedWorkerInternal', {\n        prefix: 'logger',\n      });\n    }\n  }\n\n  async init() {\n    //\n  }\n\n  async write({ payload }: SerializedMessage) {\n    this.transport?.emit(\n      {\n        name: 'syncLog',\n        respond: false,\n      },\n      { payload },\n    );\n  }\n}\n\nexport class MemoryStorage {\n  constructor(protected _data: Record<string, any> = {}) {}\n\n  getItem(key: string) {\n    return this._data[key];\n  }\n\n  setItem(key: string, value: unknown) {\n    this._data[key] = value;\n  }\n\n  removeItem(key: string) {\n    delete this._data[key];\n  }\n}\n\nconst toggleKey = 'RC_MFE_LOGGER';\n\nexport const DEFAULT_LOGGER_ENABLED = true;\n\n// if the toggleKey is not set, the logger is enabled by default\nexport const loggerEnabled =\n  globalThis.localStorage?.getItem(toggleKey) === 'true' ||\n  (DEFAULT_LOGGER_ENABLED &&\n    globalThis.SharedWorkerGlobalScope === undefined &&\n    globalThis.localStorage?.getItem(toggleKey) === null);\n\nexport const toggleLogger = (enabled: boolean) => {\n  globalThis.localStorage?.setItem(toggleKey, String(enabled));\n};\n\nexport const checkLoggerEnabled = (defaultEnabled: boolean) => {\n  if (globalThis.localStorage?.getItem(toggleKey) === null) {\n    globalThis.localStorage.setItem(toggleKey, String(defaultEnabled));\n  }\n};\n\n// add ignore rule here\nexport const consoleIgnoreRule = [\n  'ResizeObserver loop completed with undelivered notifications',\n  // !!! Don't add rules lightly unless you explicitly want to ignore the log\n];\n\nconst consoleTransport = new ConsoleTransport({\n  enabled: true,\n  storage: new MemoryStorage({\n    ROARR_LOG: true,\n  }),\n  //@ts-ignore\n  ignoreRule: consoleIgnoreRule,\n});\n\nconst sessionId = Math.random().toString(36).substring(2, 10);\n\nlet name = `root-${sessionId}`;\n\nif (isSharedWorker) {\n  // @ts-ignore\n  const globalName = globalThis.name;\n  const prefix =\n    typeof globalName === 'string' ? globalName.split('#')[0] : 'worker';\n  name = `${prefix || 'worker'}-${sessionId}`;\n\n  // remove indexedDB old database\n  // This is a short-term temporary deletion only to keep the deletion logic clean, and this code is expected to be deleted in Q3 2025.\n  // There is no impact on the deleted db.\n  globalThis.indexedDB?.deleteDatabase?.('rc-mfe-logs');\n  globalThis.indexedDB?.deleteDatabase?.('rc-mfe-log');\n}\n\n/**\n * for test only storage to store logs in memory\n */\nclass TestStorageTransport implements ITransport {\n  type = 'storage';\n\n  _data = {\n    messages: [] as any[],\n  };\n\n  logLevelMap = {\n    20: 'debug',\n    30: 'info',\n    40: 'warn',\n    50: 'error',\n  } as const;\n\n  init = (options: TransportInitOptions) => {};\n  write(message: SerializedMessage): void {\n    const namespace = message.payload.context.namespace as string[];\n    const level = message.payload.context.logLevel as number;\n    const serviceName = namespace[namespace.length - 1];\n\n    const data = JSON.parse(message.payload.message);\n\n    this._data.messages.push({\n      time: message.payload.time,\n      data,\n    });\n\n    // @ts-ignore\n    // eslint-disable-next-line no-console\n    console[this.logLevelMap[level]](`[${serviceName}]`, ...data);\n  }\n  saveDB = () => {};\n  getLogs = () => {\n    return {\n      content: 'mock-content',\n      name: 'applicationLogs',\n    };\n  };\n  downloadLogs = () => {};\n}\n\n/**\n * new logger\n */\n// eslint-disable-next-line react-hooks/rules-of-hooks\nconst loggerV2 = useLogger({\n  name,\n  transports: isSharedWorker\n    ? [\n        consoleTransport,\n        new SharedWorkerTransport({\n          enabled: true,\n        }),\n      ]\n    : [\n        ...(process.env.NODE_ENV === 'test'\n          ? [new TestStorageTransport()]\n          : [\n              consoleTransport,\n              new StorageTransport({\n                enabled: true,\n              }),\n            ]),\n      ],\n  integrations:\n    process.env.NODE_ENV === 'test'\n      ? []\n      : [\n          new ScriptErrorIntegration({\n            enabled: true,\n          }),\n          ...(process.env.NODE_ENV === 'production'\n            ? [\n                new ConsoleIntegration({\n                  enabled: true,\n                }),\n              ]\n            : []),\n        ],\n  enabled: isSharedWorker ? isSharedWorker : loggerEnabled,\n}) as Logger & { create: (module: object) => Logger };\n\nloggerV2.create = (module: object) => {\n  const name = Object.getPrototypeOf(module)[nameKey];\n  if (!name) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn('Module name not found');\n    }\n    return loggerV2;\n  }\n\n  if (loggerV2['_logger'].getContext().namespace) {\n    return loggerV2.tag(name);\n  }\n  return loggerV2;\n};\n\nexport { loggerV2 };\n"],"mappings":"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","ignoreList":[]}