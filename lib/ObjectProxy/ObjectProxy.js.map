{"version":3,"file":"ObjectProxy.js","names":["ObjectProxy","_target","_delegateTarget","_classCallCheck","_chainSteps","_createClass","key","value","getValue","target","_iterator","_createForOfIteratorHelper","_step","s","n","done","step","err","e","f","create","_this","lastValue","Proxy","get","property","receiver","_this$getValue","push","_typeof","bind","set","Error","exports"],"sources":["lib/ObjectProxy/ObjectProxy.ts"],"sourcesContent":["export class ObjectProxy<Target extends object> {\n  _chainSteps: Array<string | symbol> = [];\n\n  constructor(private _target: Target, private _delegateTarget?: Target) {\n    this._target = _target ?? {};\n  }\n\n  getValue(target: any) {\n    let value = target;\n    for (const step of this._chainSteps) {\n      if (!value) break;\n      value = value[step];\n    }\n    return value;\n  }\n\n  create() {\n    let lastValue = this._target;\n    return new Proxy(this._target, {\n      get: (target, property, receiver) => {\n        // Chaining\n        this._chainSteps.push(property);\n        const value =\n          this.getValue(this._delegateTarget) ?? this.getValue(this._target);\n        // Check value\n        if (typeof value !== 'object' || value === null) {\n          // Stop chaining\n          this._chainSteps = [];\n          return typeof value === 'function' ? value.bind(lastValue) : value;\n        }\n        // Keep on chaining\n        lastValue = value;\n        return receiver;\n      },\n      set: () => {\n        throw new Error('Setting properties is not allowed');\n      },\n    });\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;IAAaA,WAAW;EAGtB,SAAAA,YAAoBC,OAAe,EAAUC,eAAwB,EAAE;IAAAC,eAAA,OAAAH,WAAA;IAAA,KAAnDC,OAAe,GAAfA,OAAe;IAAA,KAAUC,eAAwB,GAAxBA,eAAwB;IAAA,KAFrEE,WAAW,GAA2B,EAAE;IAGtC,IAAI,CAACH,OAAO,GAAGA,OAAO,aAAPA,OAAO,cAAPA,OAAO,GAAI,CAAC,CAAC;EAC9B;EAACI,YAAA,CAAAL,WAAA;IAAAM,GAAA;IAAAC,KAAA,WAAAC,SAEQC,MAAW,EAAE;MACpB,IAAIF,KAAK,GAAGE,MAAM;MAAC,IAAAC,SAAA,GAAAC,0BAAA,CACA,IAAI,CAACP,WAAW;QAAAQ,KAAA;MAAA;QAAnC,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAAqC;UAAA,IAA1BC,IAAI,GAAAJ,KAAA,CAAAL,KAAA;UACb,IAAI,CAACA,KAAK,EAAE;UACZA,KAAK,GAAGA,KAAK,CAACS,IAAI,CAAC;QACrB;MAAC,SAAAC,GAAA;QAAAP,SAAA,CAAAQ,CAAA,CAAAD,GAAA;MAAA;QAAAP,SAAA,CAAAS,CAAA;MAAA;MACD,OAAOZ,KAAK;IACd;EAAC;IAAAD,GAAA;IAAAC,KAAA,WAAAa,OAAA,EAEQ;MAAA,IAAAC,KAAA;MACP,IAAIC,SAAS,GAAG,IAAI,CAACrB,OAAO;MAC5B,OAAO,IAAIsB,KAAK,CAAC,IAAI,CAACtB,OAAO,EAAE;QAC7BuB,GAAG,EAAE,SAAAA,IAACf,MAAM,EAAEgB,QAAQ,EAAEC,QAAQ,EAAK;UAAA,IAAAC,cAAA;UACnC;UACAN,KAAI,CAACjB,WAAW,CAACwB,IAAI,CAACH,QAAQ,CAAC;UAC/B,IAAMlB,KAAK,IAAAoB,cAAA,GACTN,KAAI,CAACb,QAAQ,CAACa,KAAI,CAACnB,eAAe,CAAC,cAAAyB,cAAA,cAAAA,cAAA,GAAIN,KAAI,CAACb,QAAQ,CAACa,KAAI,CAACpB,OAAO,CAAC;UACpE;UACA,IAAI4B,OAAA,CAAOtB,KAAK,MAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,EAAE;YAC/C;YACAc,KAAI,CAACjB,WAAW,GAAG,EAAE;YACrB,OAAO,OAAOG,KAAK,KAAK,UAAU,GAAGA,KAAK,CAACuB,IAAI,CAACR,SAAS,CAAC,GAAGf,KAAK;UACpE;UACA;UACAe,SAAS,GAAGf,KAAK;UACjB,OAAOmB,QAAQ;QACjB,CAAC;QACDK,GAAG,EAAE,SAAAA,IAAA,EAAM;UACT,MAAM,IAAIC,KAAK,CAAC,mCAAmC,CAAC;QACtD;MACF,CAAC,CAAC;IACJ;EAAC;EAAA,OAAAhC,WAAA;AAAA;AAAAiC,OAAA,CAAAjC,WAAA,GAAAA,WAAA","ignoreList":[]}