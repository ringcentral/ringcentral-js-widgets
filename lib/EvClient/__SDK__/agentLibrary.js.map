{"version":3,"file":"agentLibrary.js","names":["_sip","_interopRequireDefault","require","e","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","C","STATUS_NULL","STATUS_NEW","STATUS_CONNECTING","STATUS_CONNECTED","STATUS_COMPLETED","CFSimpleSip","options","media","remote","video","audio","Error","browserUa","window","navigator","userAgent","toLowerCase","isSafari","isFirefox","indexOf","sessionDescriptionHandlerFactoryOptions","peerConnectionOptions","iceCheckingTimeout","rtcConfiguration","iceServers","urls","modifiers","SIP","Web","Modifiers","stripG722","alwaysAcquireMediaFirst","addMidLines","ua","uri","anonymous","UA","authorizationUser","password","displayName","userAgentString","USER_AGENT","register","registerExpires","transportOptions","traceSip","wsServers","maxReconnectionAttempts","dtmfType","RTP","state","logger","getLogger","on","emit","bind","session","warn","reject","setupSession","message","Object","create","EventEmitter","call","destination","checkRegistration","autoplay","local","volume","invite","sessionDescriptionHandlerOptions","constraints","answer","accept","hangup","cancel","bye","hold","local_hold","mute","log","unhold","unmute","toggleMute","sendDTMF","tone","dtmf","_message","isRegistered","setupRemoteMedia","pc","sessionDescriptionHandler","peerConnection","remoteStream","getReceivers","MediaStream","forEach","receiver","track","addTrack","getRemoteStreams","srcObject","play","setupLocalMedia","localStream","getSenders","sender","kind","getLocalStreams","cleanupMedia","pause","onProgress","onAccepted","onEnded","onFailed","destroyMedia","close","enabled","stream","getAudioTracks","getVideoTracks","_default","global","AddSessionNotification","processResponse","notification","model","UIModel","getInstance","notif","ui_notification","sessionAgentId","utils","getText","incrementTotalCalls","agentSettings","agentId","currentCall","sessionId","monitorAgentId","sessionType","allowControl","uii","isMonitoring","monitoringType","isBargeInMonitor","notCurrentAgent","notSessionOne","shouldTrackSession","transferSessions","session_id","onCall","formattedResponse","buildDefaultResponse","status","phone","sessionLabel","monitoring","recordingUrl","AdminDebugEmailNotification","emailTo","requestedBy","DialGroupChangeNotification","origLoginType","loginRequest","loginType","newDgId","dialGroupChangeNotification","dialGroupId","detail","dialGroupName","dialGroupDesc","DialGroupChangePendingNotification","pendingDialGroupChange","parseInt","update_from_adminui","updateDGFromAdminUI","updateFromAdminUI","DirectAgentTransferNotification","ani","dnis","sourceType","sourceId","sourceName","voicemailUrl","DropSessionNotification","sessionUII","transfer","console","logMessage","LOG_LEVELS","DEBUG","transferEnd","EarlyUiiNotification","EndCallNotification","libInstance","endCallNotification","duration","termParty","termReason","callState","onManualOutdial","loginAgent","queueIds","configRequest","chatIds","skillProfileId","dialDest","outdialDispositions","dispositions","length","surveyPopType","pingIntervalId","setInterval","sendPingCallMessage","callDts","dispositionTimeout","GatesChangeNotification","newAssignedGates","availableQueues","inboundSettings","assignedGateIds","split","a","id","foundGate","findObjById","push","gate","gateId","gateName","gateDesc","defaultDestOverride","isAgentSelectable","queues","JSON","parse","stringify","GenericNotification","messageCode","NewCallNotification","newCall","queueDts","queueTime","callType","appUrl","allowHold","allowTransfer","allowManualInternationalTransfer","allowDirectAgentTransfer","allowHangup","allowRequeue","allowEndCallForEveryone","scriptId","scriptVersion","surveyId","requeueType","hangupOnDisposition","callerName","queue","processResponseCollection","agentRecording","requeueShortcuts","baggage","surveyResponse","scriptResponse","transferPhoneBook","lead","extra_data","extraDatas","extraData","key","customLabels","notifLabels","result","savedModel","script_result","results","keys","idx","value","err","entrys","disposition","isCampaign","d","disp","isComplete","requireNote","saveSurvey","xfer","isDefault","callTokens","buildCallTokenMap","auxPhone","transferNumber","agentDailyStats","currCallTime","tokens","generic_key_value_pairs","keyValuePairs","keyValuePairsStr","parseKeyValuePairsFromString","keyValue","number","name","description","any","error","firstName","lastName","externalAgentId","agentType","email","username","PendingChatDispNotification","PendingDispNotification","PreviewLeadStateNotification","messageId","requestId","leadState","callback","ReverseMatchNotification","TcpaSafeLeadStateNotification","AckRequest","audioType","response","resp","ui_response","type","WARN","AgentStateRequest","agentState","agentAuxState","toUpperCase","formatJSON","msg","ui_request","MESSAGE_TYPES","AGENT_STATE","getMessageId","response_to","agent_id","agent_aux_state","prevState","currState","prevAuxState","currAuxState","previousState","currentState","previousAuxState","currentAuxState","prevStateStr","currStateStr","currentStateLabel","agentStatePacket","AuthenticateRequest","config","platformId","rcAccessToken","tokenType","engageAccessToken","authType","sendHttpRequest","authenticateRequest","AUTHENTICATE_TYPES","USERNAME_PASSWORD","_buildHttpRequest","RC_TOKEN","rcTokenType","ENGAGE_TOKEN","authenticatePacket","accessToken","refreshToken","socketUrl","iqUrl","socketPort","port","agents","agentDetails","mainAccountId","path","queryParams","baseUrl","authHost","baseAuthUri","params","headers","errorMsg","HttpService","httpPost","then","authenticateResponse","fireCallback","libraryInstance","CALLBACK_TYPES","AUTHENTICATE","errResponse","errMsg","toString","httpGet","BargeInRequest","BARGE_IN","audio_state","monitor_agent_id","CallNotesRequest","notes","CALL_NOTES","CallbackCancelRequest","leadId","CALLBACK_CANCEL","lead_id","CallbacksPendingRequest","CALLBACK_PENDING","leadsRaw","leads","Array","isArray","l","leadRaw","parseLead","pendingCallbacks","auxData1","auxData2","auxData3","auxData4","auxData5","dialTime","externId","midName","sufix","title","address1","address2","city","zip","gateKeeper","CampaignDispositionsRequest","campaignId","CAMPAIGN_DISPOSITIONS","campaign_id","outboundSettings","campaignDispositions","ChatStateRequest","chatState","CHAT_STATE","currentChatState","chatStatePacket","XferColdRequest","callerId","sipHeaders","countryId","fields","i","fieldObj","XFER_COLD","dial_dest","caller_id","country_id","xfer_header","DirectAgentTransfer","targetAgentId","transferType","DIRECT_AGENT_TRANSFER","target_agent_id","transfer_type","DirectAgentTransferList","DIRECT_AGENT_TRANSFER_LIST","DispositionRequest","dispId","callbackDTS","contactForwardNumber","survey","OUTDIAL_DISPOSITION","disposition_id","call_back","call_back_DTS","contact_forwarding","outbound_externid","pending_request_id","INBOUND_DISPOSITION","obj","leadField","DispositionManualPassRequest","manual_disp","request_key","extern_id","ExtensionPresenceRequest","getExtensionPresenceInfo","extensionIds","_getExtensionPresenceInfo","extensionPresenceResponse","baseApiUri","extensionPresenceRequest","EXTENSION_PRESENCE","HangupRequest","resetPendingDisp","HANGUP","cancel_pending_disp","HoldRequest","holdState","HOLD","hold_state","currUII","onHold","LeadHistoryRequest","LEAD_HISTORY","histResponse","history","leadHistory","LeadInsertRequest","dataObj","agent_reserved","dialable","LEAD_INSERT","lead_phone","call_back_dts","callback_dts","first_name","mid_name","last_name","suffix","gate_keeper","aux_data1","aux_data2","aux_data3","aux_data4","aux_data5","LeadUpdateRequest","leadPhone","_formatBaggage","LEAD_UPDATE","bag","LoginRequest","isForce","updateLogin","checkExistingIds","chatSettings","availableChatQueues","availableSkillProfiles","availableOutdialGroups","isLoggedIn","validateDest","LOGIN","access_token","hash_code","connectionSettings","hashCode","allow_multisocket","applicationSettings","allowMultiSocket","login_type","update_login","outdial_group_id","skill_profile_id","agent_platform_id","is_force","gates","gate_id","chat_queues","chat_queue_id","Lib","isReconnect","updateLoginMode","INFO","loginPacket","loginDTS","Date","reconnect","agentPermissions","allowLeadSearch","accountId","corporateDirectory","consultCall","isMultiSocket","broadcastChannelHelper","init","setDialGroupSettings","setGateSettings","setChatQueueSettings","setSkillProfileSettings","requireFetchedLeadsCalled","allowPreviewLeadFilters","activeCallUii","isPendingDisp","mockEndCallPacket","term_reason","processNotification","isOffhook","offHookTermPacket","agentProcessOffhookCallback","offhookTerm","waitingForAddSession","pendingDisp","activeAgentUiSessions","getTransferSessions","activeAgentSessions","active_call_sessions","call_session_id","map","sessionObj","transferSession","guid","dataStore","save","scriptSettings","outdialGroups","outdialGroup","g","group","progressiveEnabled","skillProfile","skillProfiles","s","profile","responseId","profileId","selectedGateIds","selectedGates","gateIds","gIdx","chatQueues","selectedChatQueueIds","selectedChatQueues","cQueues","chatQueueIds","c","cIdx","chatQueue","chatQueueId","LoginPhase1Request","LOGIN_PHASE_1","isLoggedInIS","loginPhase1Packet","isSso","isFlr","isTcpaSafeMode","pciEnabled","enableCallContactHistory","alias","maxBreakTime","maxLunchTime","realAgentType","defaultLoginDest","altDefaultLoginDest","initLoginState","initLoginStateLabel","outboundManualDefaultRingtime","isOutboundPrepay","phoneLoginPin","agentPassword","allowCallControl","allowChat","enableChat","showLeadHistory","allowManualOutboundGates","allowOffHook","allowManualCalls","allowManualPass","allowManualIntlCalls","allowLoginUpdates","allowInbound","allowOutbound","allowBlended","allowLoginControl","allowCrossQueueRequeue","disableSupervisorMonitoring","allowAutoAnswer","defaultAutoAnswerOn","allowHistoricalDialing","allowAgentStats","allowCampaignStats","allowGateStats","allowChatStats","enableFolderMode","enableTaskMode","defaultDialGroup","allow_lead_inserts","insert_campaigns","campaign","allowLeadInserts","availableCampaigns","_processCampaigns","_processChatQueueDnis","availableChatRequeueQueues","availableRequeueQueues","availableChatRooms","availableScripts","callerIds","availableAgentStates","availableCountries","insertCampaigns","dialGroups","dg","hciType","hciEnabled","hciClicker","campaigns","campaignsRaw","_processCampaign","campaignRaw","allowLeadUpdates","allowLeadUpdatesByCampaign","labelArray","p","label","replace","campaignName","surveyName","rawQueues","login_chat_queues","chat_queue","rawQueue","j","rq","LogoutRequest","LOGOUT","MultiSocketRequest","LOGIN_MULTISOCKET","get","OffhookInitRequest","OFFHOOK_INIT","offhookInitPacket","softphoneSettings","attemptingSoftphoneReconnect","OffhookTermRequest","OFFHOOK_TERM","data","wasMonitoring","offhookTermPacket","startDts","endDts","OneToOneOutdialRequest","ringTime","ONE_TO_ONE_OUTDIAL","ring_time","OneToOneOutdialCancelRequest","ONE_TO_ONE_OUTDIAL_CANCEL","PauseRecordRequest","record","pauseTime","PAUSE_RECORD","PingCallRequest","PING_CALL","PreviewDialRequest","action","searchFields","PREVIEW_DIAL","search_fields","dialer_request","requestKey","destinations","notifLead","filter","destLead","callbacks","isInsert","previewDialLeads","RecordRequest","RECORD","RequeueRequest","queueId","skillId","maintain","REQUEUE","gate_number","skill_id","maintain_agent","ScriptConfigRequest","version","SCRIPT_CONFIG","script_id","json","loadedScripts","ScriptResultRequest","jsonResult","SCRIPT_RESULT","json_result","SearchDirectoryRequest","searchDirectory","searchString","searchDirectoryRequest","_searchDirectory","filteredDirectory","searchDirResponse","SEARCH_DIR","StatsRequest","STATS","TcpaSafeRequest","TCPA_SAFE","callbackLead","tcpaSafeLeads","UpdateDialDestinationRequest","isSoftphoneError","UPDATE_DIAL_DESTINATION","log_softphone_error","XferWarmRequest","XFER_WARM","XferWarmCancelRequest","XFER_WARM_CANCEL","WebRTCRequest","getSipRegistrationInfo","_getSipRegistrationInfo","ssoLogin","sipInfo","webRTCResponse","lastSipFetchTime","now","WEBRTC_INFO","ChatAgentEndRequest","CHAT_AGENT_END","operation_id","generateOpId","ChatAliasRequest","CHAT_ALIAS","ChatDispositionRequest","dispositionId","sendAcknowlegement","CHAT_DISPOSITION","do_ack","ChatListRequest","CHAT_LIST","chatListResponse","chatList","ChatMessageRequest","whisper","CHAT_MESSAGE","dts","trim","dtsDate","from","dequeueAgentId","mediaLinks","ChatPresentedResponseRequest","responseReason","CHAT_PRESENTED_RESPONSE","response_reason","ChatRequeueRequest","maintainAgent","CHAT_REQUEUE","ChatRoomRequest","roomType","roomId","agentOne","agentTwo","CHAT_ROOM","agent_one","agent_two","room_id","ChatRoomStateRequest","chatAlias","ChatSendRequest","CHAT_SEND","senderId","roomName","dynamicCreate","ChatTypingRequest","CHAT_TYPING","LeaveChatRequest","LEAVE_CHAT","ChatManualSmsRequest","CHAT_MANUAL_SMS","MonitorChatRequest","MONITOR_CHAT","StopMonitorChatRequest","STOP_MONITOR_CHAT","monitoredAgentId","SupervisorListRequest","SUPERVISOR_LIST","tempList","supervisors","sup","fname","lname","uname","ChatClientReconnectNotification","AddChatSessionNotification","transcript","ChatActiveNotification","ChatAgentAssignFailureNotification","agentAssignFailure","taskId","ChatCancelledNotification","ChatInactiveNotification","ChatPresentedNotification","edSourceId","edLanguageId","edCategoryIds","edSourceName","edSourceColor","edLanguage","edCategories","processedResponse","instance","cachedSourceList","edSources","cachedLanguageList","edLanguages","cachedCategoryList","sourceCache","_getEdValue","languageCache","categoryCache","_getMultiEdValues","edProxyPath","isCached","refreshAccessToken","authToken","sourceErrorMsg","languageErrorMsg","categoriesErrorMsg","sourcePromise","languagePromise","categoriesPromise","color","_buildEtrHttpRequest","names","sourceResponse","sourceList","currentSource","languageResponse","languageList","categoryResponse","categoryList","Promise","all","_buildPresentedResponse","CHAT_PRESENTED","authorizationToken","baseEtrUri","Authorization","list","returnObj","searchList","ids","idIndex","edValue","channelType","chatQueueName","allowAccept","edAuthorScreenName","edCreatedAt","sourceColor","ChatTypingNotification","pendingMessage","LoadMediaNotification","newTask","chatRequeueType","idleTimeout","chatDispositions","isSuccess","buildTaskTokenMap","NewChatNotification","newChat","preChatData","messages","ERROR","t","buildChatTokenMap","prop","hasOwnProperty","AgentStats","stats","ui_stats","agent","agentStats","agentLoginType","avgTalkTime","calls","isDequeueAgent","defaultRoute","queueDesc","queueName","loginDuration","offHook","pendingDispTime","presented","rna","stateDuration","skillProfileName","totalTalkTime","utilization","callDuration","AgentDailyStats","totalLoginSessions","totalChatsHandled","totalCallsHandled","totalPreviewDials","totalManualDials","totalRna","totalSuccessDispositions","totalLoginTime","totalOffhookTime","CampaignStats","totals","campRaw","active","abandon","available","busy","complete","fax","intercept","machine","noanswer","pending","ready","staffed","totalConnects","campaignStats","ChatQueueStats","chatQueueStats","QueueStats","gateRaw","asa","avgAbandon","avgQueue","avgTalk","deflected","inQueue","longCall","longestInQueue","routing","shortAbandon","shortCall","sla","slaPass","slaFail","tAbandonTime","tQueueTime","tSpeedOfAnswer","queueStats","pendingNewCallSessions","statsIntervalId","pingStatIntervalId","agentDailyIntervalId","reconnectIntervalId","location","origin","socketProtocol","chatAliasRequest","chatRoomRequest","chatSendRequest","supervisorListRequest","chatRoomStateRequest","multiSocketRequest","LocalStorageService","chatCancelledNotification","chatActiveNotification","chatInactiveNotification","chatDispositionRequest","chatMessageRequest","chatPresentedNotification","chatPresentedRequest","chatRequeueRequest","chatTypingNotification","chatTypingRequest","newChatNotification","loadMediaNotification","chatAgentAssignFailureNotification","chatClientReconnectNotification","agentStateRequest","chatStateRequest","ackRequest","bargeInRequest","callNotesRequest","callbacksPendingRequest","campaignDispositionsRequest","coldXferRequest","dispositionRequest","dispositionManualPassRequest","hangupRequest","holdRequest","leadHistoryRequest","leadInsertRequest","leadUpdateRequest","logoutRequest","loginPhase1Request","offhookInitRequest","offhookTermRequest","oneToOneOutdialRequest","oneToOneOutdialCancelRequest","pauseRecordRequest","pingCallRequest","previewDialRequest","reconnectRequest","recordRequest","requeueRequest","statsRequest","tcpaSafeRequest","warmXferRequest","warmXferCancelRequest","chatListRequest","directAgentTransferListRequest","directAgentTransferRequest","webRTCRequest","currentCallPacket","addSessionNotification","dialGroupChangePendingNotification","dropSessionNotification","earlyUiiNotification","gatesChangeNotification","genericNotification","newCallNotification","agentStatsPacket","agentDailyStatsPacket","queueStatsPacket","campaignStatsPacket","chatQueueStatsPacket","socketConnected","socketDest","dialDestType","totalCalls","webRtc","muteActive","registerPending","maintainOH","autoStartOH","sipPassword","sipDialDest","rcAccountId","records","resetInstance","localStorage","prefix","setItem","getItem","remove","removeItem","requestChannel","responseChannel","currentCallMessageId","currentCallRequestCallback","self","BroadcastChannel","onmessage","_sendCurrentCall","_processCurrentCallResponse","destroy","requestCurrentCall","fn","Math","random","postMessage","apiBase","XMLHttpRequest","encodeURIComponent","that","resolve","req","_getUriEncodedParams","open","_addHeaders","_addCompletionListeners","send","_getUriEncodedBody","_isObj","setRequestHeader","addEventListener","responseText","contentType","body","join","NewCallUtils","setupAddSessionCallback","sessionUii","_delayedAddSessionCallback","processSessionsForCall","delayedSessions","addSessionNotif","addResponse","ADD_SESSION","logLevel","_db","transaction","store","objectStore","request","add","sendMessage","msgObj","socket","readyState","_requests","shift","_queuedMsgs","dest","slice","ON_MESSAGE","current_state","stateChangeResponse","responseTo","findRequestById","audioState","SILENT_MONITOR","COACH_CALL","campaignDispsResposne","callNotes","insert","update","loginPhase1Response","loginResponse","offhook","initResponse","pauseRequest","pauseRec","requeue","supervisorList","script","scriptConfigRequest","coldXfer","warmXfer","warmXferCancel","ACK","ack","chatStateResponse","agentList","agentListResponse","agentXfer","agentXferResponse","DIAL_GROUP_CHANGE","dgChangeNotif","changeResponse","DIAL_GROUP_CHANGE_PENDING","dgChangePendNotif","pendResponse","DROP_SESSION","dropSesNotif","dropSesResponse","EARLY_UII","earlyUiiNotif","earlyUiiResponse","END_CALL","endCallNotif","endCallResponse","GATES_CHANGE","gateChangeNotif","gateChangeResponse","GENERIC","genericNotif","generic","callbackFnName","findCallbackBasedOnMessageType","GENERIC_NOTIFICATION","clearInterval","NEW_CALL","newCallNotif","newCallResponse","termResponse","PREVIEW_LEAD_STATE","leadStateNotif","leadStateResponse","PENDING_DISP","pendingDispNotif","pendingDispResponse","PENDING_CHAT_DISP","pendingChatDispNotif","pendingChatDispResponse","REVERSE_MATCH","reverseMatchNotif","reverseMatchResponse","TCPA_SAFE_LEAD_STATE","leadStateTcpaNotif","leadStateTcpaResponse","CHAT_ACTIVE","activeNotif","activeResponse","CHAT_INACTIVE","inactiveNotif","inactiveResponse","CHAT_CLIENT_RECONNECT","reconnectNotif","reconnectResponse","presentedNotif","typingNotif","typingResponse","CHAT_NEW","newChatNotif","newChatResponse","chatMessage","chatMessageResponse","CHAT_CANCELLED","chatCancelled","chatCancelledResponse","CHAT_ADD_SESSION","addChatSession","addChatSessionResponse","stopChatMonitor","stopChatMonitorResponse","CHAT_STOP_MONITOR","DIRECT_AGENT_ROUTE","directAgentTransfer","directAgentTransferResponse","DIRECT_AGENT_TRANSFER_NOTIF","AGENT_DEBUG_EMAIL","emailNotif","emailNotifResp","AGENT_DEBUG_EMAIL_NOTIF","CHAT_LOAD_MEDIA","loadMediaNotif","loadMediaResp","CHAT_AGENT_ASSIGN_FAILURE","chatAgentAssignFailureNotif","chatAgentAssignFailureResp","logoutNotification","logoutNotifResponse","closeSocket","processDialerResponse","PREVIEW_DIAL_ID","pdRequest","dialResponse","LEAD_SEARCH","PREVIEW_FETCH","TCPA_SAFE_ID","tcpaRequest","tcpaResponse","SAFE_MODE_SEARCH","SAFE_MODE_FETCH","processRequest","chatSendResponse","CHAT","CHAT_ROOM_STATE","chatRoomStateResponse","processStats","STATS_AGENT","STATS_AGENT_DAILY","onAgentDailyStats","STATS_CAMPAIGN","STATS_QUEUE","STATS_CHAT","chatStats","STATS_CHAT_QUEUE","groupProp","itemProp","textName","itemsRaw","_processItems","escapeSoftphoneUsername","str","_processItem","itemRaw","_tryConvertValueToBoolean","item","formattedKey","_convertToFormattedKey","_convertKeyForCollection","match","substr","setCallback","s4","floor","substring","objArray","idArray","idProperty","availIds","removeIds","r","splice","propName","isValid","isNum","test","messageType","includeOpId","operationId","det","stat","opId","returnMsg","val","getAttribute","outerDelimiter","innerDelimiter","arr","reduce","dict","pair","sendStatsRequestMessage","sendPingRequestMessage","curLoginTime","Number","curOffhookTime","curTalkTime","curCallTime","getDialDestination","currentServer","domain","loginHashcode","CHARACTERS","round","CLOSE_SOCKET","CONFIG","GENERIC_RESPONSE","LOG_CONSOLE_RESULTS","LOG_RESULTS","OPEN_SOCKET","SIP_CONNECTED","SIP_DIAL_DEST_CHANGED","SIP_ENDED","SIP_MUTE","SIP_REGISTERED","SIP_REGISTRATION_FAILED","SIP_RINGING","SIP_SWITCH_REGISTRAR","SIP_UNMUTE","SIP_UNREGISTERED","ROTATE_WEBRTC_SERVER","SETUP_WEB_RTC_SERVER","SIP_INIT","SIP_ANSWER","SIP_REJECT","SIP_REGISTER","SIP_HANGUP","SIP_SEND_DTMF","SIP_TOGGLE_MUTE","SOFTPHONE_RESET_SESSION","SWITCH_SOFTPHONE_REGISTRAR","initAgentLibraryCore","context","AgentLibrary","_isReconnect","openLogger","openConsoleLogger","isSecureSocket","setCallbacks","callbackMap","property","getCallbacks","getCallback","getSocket","getAuthenticateRequest","getLoginRequest","getMultiSocketRequest","getAgentConfigRequest","getLogoutRequest","getAgentDailyStats","getCallTokens","getAgentStateRequest","getOffhookInitRequest","getOffhookTermRequest","getHangupRequest","getPreviewDialRequest","getTcpaSafeRequest","getManualOutdialRequest","getManualOutdialCancelRequest","getCallNotesRequest","getCampaignDispositionsRequest","getDispositionRequest","getDispositionManualPassRequest","getWarmTransferRequest","getColdTransferRequest","getWarmTransferCancelRequest","getRequeueRequest","getBargeInRequest","getHoldRequest","getPauseRecordRequest","getRecordRequest","getChatPresentedRequest","getChatDispositionRequest","getChatMessageRequest","getChatRequeueRequest","getChatTypingRequest","getAgentStatsPacket","getAgentDailyStatsPacket","getQueueStatsPacket","getChatQueueStatsPacket","getCampaignStatsPacket","getAgentConfigPacket","getLoginPacket","getAgentStatePacket","getCurrentCallPacket","getOffhookInitPacket","getOffhookTermPacket","getChatAgentEnd","chatAgentEnd","getWebRTCRequest","getChatListRequest","getSearchDirectoryRequest","getDialGroupChangeNotification","getDialGroupChangePendingNotification","getEndCallNotification","getGatesChangeNotification","getGenericNotification","getNewCallNotification","getCurrentCall","getAddSessionNotification","getDropSessionNotification","getEarlyUiiNotification","getChatActiveNotification","getChatInactiveNotification","getChatClientReconnectNotification","getChatPresentedNotification","getChatTypingNotification","getNewChatNotification","getLoadMediaNotification","getChatAgentAssignFailureNotification","getChatCancelledNotification","getApplicationSettings","getSoftphoneSettings","getChatSettings","getConnectionSettings","getInboundSettings","getOutboundSettings","getAgentSettings","getPendingSessions","getAgentPermissions","getAgentStats","getQueueStats","getChatQueueStats","getCampaignStats","getFilteredDirectory","getExtensionPresenceResponse","getExtensionPresenceRequest","_utils","_NewCallUtils","_HttpService","_getUIModel","initAgentLibrarySocket","openSocket","_getNewAccessToken","_buildSocketDest","_initSocket","socketOpened","currDts","threeMins","queuedMsg","unshift","getTime","WebSocket","onopen","onerror","evt","onclose","initAgentLibraryAgent","authenticateAgentWithUsernamePassword","authenticateAgentWithRcAccessToken","authenticateAgentWithEngageAccessToken","getAgentConfig","getWebRtcInfo","_setUpAndSendLogin","multiLoginRequest","logoutAgent","requestLogoutAgent","agentToLogout","requestMessage","isSupervisor","setAgentState","offhookInit","getPendingCallbacks","cancelCallback","callbackCancelRequest","requestStats","_terminatePing","terminateStats","_requestPing","updateDialDestination","updateDialDestinationRequest","getRefreshedToken","initAgentLibraryCall","bargeIn","coach","internationalColdXfer","dispositionCall","dispositionManualPass","getCampaignDispositions","holdSession","manualOutdial","manualOutdialCancel","pauseRecord","previewDial","previewFetch","searchLeads","setCallNotes","monitor","requeueCall","safeModeCall","safeModeFetch","safeSearchLeads","internationalWarmXfer","corporateDirWarmXfer","corporateDirColdXfer","getScript","savedScript","saveScriptResult","scriptResultRequest","directAgentXferList","warmDirectAgentXfer","coldDirectAgentXfer","cancelDirectAgentXfer","voicemailDirectAgentXfer","rejectDirectAgentXfer","initAgentLibraryLead","leadInsert","leadUpdate","initAgentLibraryChat","setChatAlias","publicChatRoom","privateChatRoom","sendChat","getSupervisors","chatPresentedResponse","chatWhisper","chatDisposition","chatRequeue","chatTyping","monitorAgentChats","monitorChatRequest","stopMonitoringChatsByAgent","stopMonitorChatRequest","stopMonitoringAllAgentChats","leaveChat","leaveChatRequest","setChatState","sendManualOutboundSms","chatManualSms","initAgentLibraryLogger","dbRequest","indexedDB","event","onsuccess","target","purgeLog","errorCode","onupgradeneeded","objectStoreNames","contains","createObjectStore","autoIncrement","createIndex","unique","keyPath","db","dateIndex","index","endDate","setDate","getDate","range","IDBKeyRange","upperBound","openCursor","cursor","primaryKey","clearLog","objectStoreRequest","clear","deleteDB","dbName","DBDeleteRequest","deleteDatabase","getLogRecords","startDate","maxRows","objStore","limit","lowerBound","bound","levelAndDateReturn","idxLevelAndDate","logLevelReturn","idxLogLevel","dtsNoStatsReturn","idxDTSNoStats","noStatsReturn","idxNoStats","dtsReturn","idxDTS","allValsReturn","idxAll","initAgentLibraryMultisocket","loadCurrentCall","initAgentLibraryConsoleLogger","_consoleDb","_overrideConsole","getConsoleLogRecords","only","count","browserConsole","assign","defaultConsole","_getRecord","args","arg","agentName","_saveRecord","apply","arguments","info","initAgentLibrarySoftphoneService","sipInit","SoftphoneService","setupWebRtcServer","_getSipConfig","_connected","_ended","_registered","_unregistered","_registrationFailed","_ringing","_mute","_unmute","setTimeout","_handleNoRegisterResponse","sipTerminate","opts","unregister","removeAllListeners","stop","sipAnswer","sipReject","sipRegister","webkitNotifications","checkPermission","requestPermission","sipHangUp","sipSendDTMF","sipToggleMute","switchSoftphoneRegistrar","maintainOffhook","autoStartOffhook","_updateOHFlags","resetSoftphoneSession","offhookParams","_rotateWebRtcServer","_getCurrentWebRtcServerInfo","webRtcServer","transport","outboundProxy","authorizationId","remoteAudioElement","document","getElementById","_registerHasResponse","clearTimeout","timeSinceLastFetch","responseObj","usingRcPhone","rcHeader","rcHeaderValue","raw","initAgentLibrary","exports"],"sources":["lib/EvClient/__SDK__/agentLibrary.js"],"sourcesContent":["/* eslint-disable */\nimport SIP from 'sip.js';\n\n(function () {\n  'use strict';\n  /**\n   * @fileoverview CFSimpleSip\n   */\n\n  /*\n   * @param {Object} options\n   */\n\n  var C = {\n    STATUS_NULL: 0,\n    STATUS_NEW: 1,\n    STATUS_CONNECTING: 2,\n    STATUS_CONNECTED: 3,\n    STATUS_COMPLETED: 4,\n  };\n  /**\n   * @property {Class} CFSimpleSip it is use for interacting to sip.js\n   * @param {Object} options\n   */\n\n  var CFSimpleSip = function (options) {\n    /*\n     *  {\n     *    media: {\n     *      remote: {\n     *        audio: <DOM element>,\n     *        video: <DOM element>\n     *      },\n     *      local: {\n     *        video: <DOM element>\n     *      }\n     *    },\n     *    ua: {\n     *       <UA Configuration Options>\n     *    }\n     *  }\n     */\n    if (options.media.remote.video) {\n      this.video = true;\n    } else {\n      this.video = false;\n    }\n\n    if (options.media.remote.audio) {\n      this.audio = true;\n    } else {\n      this.audio = false;\n    }\n\n    if (!this.audio && !this.video) {\n      // Need to do at least audio or video\n      // Error\n      throw new Error(\n        'At least one remote audio or video element is required for CFSimpleSip.',\n      );\n    }\n\n    this.options = options; // https://stackoverflow.com/questions/7944460/detect-safari-browser\n\n    var browserUa = window.navigator.userAgent.toLowerCase();\n    var isSafari = false;\n    var isFirefox = false;\n\n    if (browserUa.indexOf('safari') > -1 && browserUa.indexOf('chrome') < 0) {\n      isSafari = true;\n    } else if (\n      browserUa.indexOf('firefox') > -1 &&\n      browserUa.indexOf('chrome') < 0\n    ) {\n      isFirefox = true;\n    }\n\n    var sessionDescriptionHandlerFactoryOptions = {\n      peerConnectionOptions: {\n        iceCheckingTimeout: 500,\n        rtcConfiguration: {\n          iceServers: [\n            {\n              urls: 'stun:stun.l.google.com:19302',\n            },\n            {\n              urls: 'stun:stun.vacd.biz:19302',\n            },\n            {\n              urls: 'stun:stun.virtualacd.biz:3478',\n            },\n          ],\n        },\n      },\n    };\n\n    if (isSafari) {\n      sessionDescriptionHandlerFactoryOptions.modifiers = [\n        SIP.Web.Modifiers.stripG722,\n      ];\n    }\n\n    if (isFirefox) {\n      sessionDescriptionHandlerFactoryOptions.alwaysAcquireMediaFirst = true;\n      sessionDescriptionHandlerFactoryOptions.modifiers = [\n        SIP.Web.Modifiers.addMidLines,\n      ];\n    }\n\n    if (!this.options.ua.uri) {\n      this.anonymous = true;\n    }\n\n    this.ua = new SIP.UA({\n      // User Configurable Options\n      uri: this.options.ua.uri,\n      authorizationUser: this.options.ua.authorizationUser,\n      password: this.options.ua.password,\n      displayName: this.options.ua.displayName,\n      // Undocumented \"Advanced\" Options\n      userAgentString: SIP.C.USER_AGENT + ';' + browserUa,\n      // Fixed Options\n      register: true,\n      registerExpires: this.options.ua.registerExpires || 600,\n      sessionDescriptionHandlerFactoryOptions: sessionDescriptionHandlerFactoryOptions,\n      transportOptions: {\n        traceSip: this.options.ua.traceSip,\n        wsServers: this.options.ua.wsServers,\n        maxReconnectionAttempts: 2,\n      },\n      dtmfType: SIP.C.dtmfType.RTP,\n    });\n    this.state = C.STATUS_NULL;\n    this.logger = this.ua.getLogger('sip.simple');\n    this.ua.on(\n      'registered',\n      function () {\n        this.emit('registered', this.ua);\n      }.bind(this),\n    );\n    this.ua.on(\n      'unregistered',\n      function () {\n        this.emit('unregistered', this.ua);\n      }.bind(this),\n    );\n    this.ua.on(\n      'failed',\n      function () {\n        this.emit('unregistered', this.ua);\n      }.bind(this),\n    );\n    this.ua.on(\n      'invite',\n      function (session) {\n        // If there is already an active session reject the incoming session\n        if (this.state !== C.STATUS_NULL && this.state !== C.STATUS_COMPLETED) {\n          this.logger.warn(\n            'Rejecting incoming call. CFSimpleSip only supports 1 call at a time',\n          );\n          session.reject();\n          return;\n        }\n\n        this.session = session;\n        this.setupSession();\n        this.emit('ringing', this.session);\n      }.bind(this),\n    );\n    this.ua.on(\n      'message',\n      function (message) {\n        this.emit('message', message);\n      }.bind(this),\n    );\n    return this;\n  };\n\n  /**\n   * @property {Method} call\n   * @param {destination}\n   */\n\n  CFSimpleSip.prototype = Object.create(SIP.EventEmitter.prototype);\n  CFSimpleSip.C = C;\n\n  CFSimpleSip.prototype.call = function (destination) {\n    if (!this.ua || !this.checkRegistration()) {\n      this.logger.warn('A registered UA is required for calling');\n      return;\n    }\n\n    if (this.state !== C.STATUS_NULL && this.state !== C.STATUS_COMPLETED) {\n      this.logger.warn('Cannot make more than a single call with CFSimpleSip');\n      return;\n    } // Safari hack, because you cannot call .play() from a non user action\n\n    if (this.options.media.remote.audio) {\n      this.options.media.remote.audio.autoplay = true;\n    }\n\n    if (this.options.media.remote.video) {\n      this.options.media.remote.video.autoplay = true;\n    }\n\n    if (this.options.media.local && this.options.media.local.video) {\n      this.options.media.local.video.autoplay = true;\n      this.options.media.local.video.volume = 0;\n    }\n\n    this.session = this.ua.invite(destination, {\n      sessionDescriptionHandlerOptions: {\n        constraints: {\n          audio: this.audio,\n          video: this.video,\n        },\n      },\n    });\n    this.setupSession();\n    return this.session;\n  };\n  /**\n   * @property {Method} answer\n   */\n\n  CFSimpleSip.prototype.answer = function () {\n    if (this.state !== C.STATUS_NEW && this.state !== C.STATUS_CONNECTING) {\n      this.logger.warn('No call to answer');\n      return;\n    } // Safari hack, because you cannot call .play() from a non user action\n\n    if (this.options.media.remote.audio) {\n      this.options.media.remote.audio.autoplay = true;\n    }\n\n    if (this.options.media.remote.video) {\n      this.options.media.remote.video.autoplay = true;\n    }\n\n    return this.session.accept({\n      sessionDescriptionHandlerOptions: {\n        constraints: {\n          audio: this.audio,\n          video: this.video,\n        },\n      },\n    }); // emit call is active\n  };\n  /**\n   * @property {Method} reject\n   */\n\n  CFSimpleSip.prototype.reject = function () {\n    if (this.state !== C.STATUS_NEW && this.state !== C.STATUS_CONNECTING) {\n      this.logger.warn('Call is already answered');\n      return;\n    }\n\n    return this.session.reject();\n  };\n  /**\n   * @property {Method} hangup\n   */\n\n  CFSimpleSip.prototype.hangup = function () {\n    if (\n      this.state !== C.STATUS_CONNECTED &&\n      this.state !== C.STATUS_CONNECTING &&\n      this.state !== C.STATUS_NEW\n    ) {\n      this.logger.warn('No active call to hang up on');\n      return;\n    }\n\n    if (this.state !== C.STATUS_CONNECTED) {\n      return this.session.cancel();\n    } else {\n      return this.session.bye();\n    }\n  };\n  /**\n   * @property {Method} hold\n   */\n\n  CFSimpleSip.prototype.hold = function () {\n    if (this.state !== C.STATUS_CONNECTED || this.session.local_hold) {\n      this.logger.warn('Cannot put call on hold');\n      return;\n    }\n\n    this.mute();\n    this.logger.log('Placing session on hold');\n    return this.session.hold();\n  };\n  /**\n   * @property {Method} unhold\n   */\n\n  CFSimpleSip.prototype.unhold = function () {\n    if (this.state !== C.STATUS_CONNECTED || !this.session.local_hold) {\n      this.logger.warn('Cannot unhold a call that is not on hold');\n      return;\n    }\n\n    this.unmute();\n    this.logger.log('Placing call off hold');\n    return this.session.unhold();\n  };\n  /**\n   * @property {Method} mute\n   */\n\n  CFSimpleSip.prototype.mute = function () {\n    if (this.state !== C.STATUS_CONNECTED) {\n      this.logger.warn('An acitve call is required to mute audio');\n      return;\n    }\n\n    this.logger.log('Muting Audio');\n    this.toggleMute(true);\n    this.emit('mute', this);\n  };\n  /**\n   * @property {Method} unmute\n   */\n\n  CFSimpleSip.prototype.unmute = function () {\n    if (this.state !== C.STATUS_CONNECTED) {\n      this.logger.warn('An active call is required to unmute audio');\n      return;\n    }\n\n    this.logger.log('Unmuting Audio');\n    this.toggleMute(false);\n    this.emit('unmute', this);\n  };\n  /**\n   * @property {Method} message\n   * @param {tone}\n   */\n\n  CFSimpleSip.prototype.sendDTMF = function (tone) {\n    if (this.state !== C.STATUS_CONNECTED) {\n      this.logger.warn('An active call is required to send a DTMF tone');\n      return;\n    }\n\n    this.logger.log('Sending DTMF tone: ' + tone);\n    this.session.dtmf(tone);\n  };\n  /**\n   * @property {Method} message\n   * @param {destination}\n   * @param {message}\n   */\n\n  CFSimpleSip.prototype.message = function (destination, _message) {\n    if (!this.ua || !this.checkRegistration()) {\n      this.logger.warn('A registered UA is required to send a message');\n      return;\n    }\n\n    if (!destination || !_message) {\n      this.logger.warn(\n        'A destination and message are required to send a message',\n      );\n      return;\n    }\n\n    this.ua.message(destination, _message);\n  }; // Private Helpers\n\n  /**\n   * @property {Method} checkRegistration\n   */\n\n  CFSimpleSip.prototype.checkRegistration = function () {\n    return this.anonymous || (this.ua && this.ua.isRegistered());\n  };\n  /**\n   * @property {Method} setupRemoteMedia\n   */\n\n  CFSimpleSip.prototype.setupRemoteMedia = function () {\n    // If there is a video track, it will attach the video and audio to the same element\n    var pc = this.session.sessionDescriptionHandler.peerConnection;\n    var remoteStream;\n\n    if (pc.getReceivers) {\n      remoteStream = new window.window.MediaStream();\n      pc.getReceivers().forEach(function (receiver) {\n        var track = receiver.track;\n\n        if (track) {\n          remoteStream.addTrack(track);\n        }\n      });\n    } else {\n      remoteStream = pc.getRemoteStreams()[0];\n    }\n\n    if (this.video) {\n      this.options.media.remote.video.srcObject = remoteStream;\n      this.options.media.remote.video.play().catch(\n        function () {\n          this.logger.log('play was rejected');\n        }.bind(this),\n      );\n    } else if (this.audio) {\n      this.options.media.remote.audio.srcObject = remoteStream;\n      this.options.media.remote.audio.play().catch(\n        function () {\n          this.logger.log('play was rejected');\n        }.bind(this),\n      );\n    }\n  };\n  /**\n   * @property {Method} setupLocalMedia\n   */\n\n  CFSimpleSip.prototype.setupLocalMedia = function () {\n    if (\n      this.video &&\n      this.options.media.local &&\n      this.options.media.local.video\n    ) {\n      var pc = this.session.sessionDescriptionHandler.peerConnection;\n      var localStream;\n\n      if (pc.getSenders) {\n        localStream = new window.window.MediaStream();\n        pc.getSenders().forEach(function (sender) {\n          var track = sender.track;\n\n          if (track && track.kind === 'video') {\n            localStream.addTrack(track);\n          }\n        });\n      } else {\n        localStream = pc.getLocalStreams()[0];\n      }\n\n      this.options.media.local.video.srcObject = localStream;\n      this.options.media.local.video.volume = 0;\n      this.options.media.local.video.play();\n    }\n  };\n  /**\n   * @property {Method} cleanupMedia\n   */\n\n  CFSimpleSip.prototype.cleanupMedia = function () {\n    if (this.video) {\n      this.options.media.remote.video.srcObject = null;\n      this.options.media.remote.video.pause();\n\n      if (this.options.media.local && this.options.media.local.video) {\n        this.options.media.local.video.srcObject = null;\n        this.options.media.local.video.pause();\n      }\n    }\n\n    if (this.audio) {\n      this.options.media.remote.audio.srcObject = null;\n      this.options.media.remote.audio.pause();\n    }\n  };\n  /**\n   * @property {Method} setupSession\n   */\n\n  CFSimpleSip.prototype.setupSession = function () {\n    this.state = C.STATUS_NEW;\n    this.emit('new', this.session);\n    this.session.on('progress', this.onProgress.bind(this));\n    this.session.on('accepted', this.onAccepted.bind(this));\n    this.session.on('rejected', this.onEnded.bind(this));\n    this.session.on('failed', this.onFailed.bind(this));\n    this.session.on('terminated', this.onEnded.bind(this));\n  };\n  /**\n   * @property {Method} destroyMedia\n   * @param {mute}\n   */\n\n  CFSimpleSip.prototype.destroyMedia = function () {\n    this.session.sessionDescriptionHandler.close();\n  };\n  /**\n   * @property {Method} toggleMute\n   * @param {mute}\n   */\n\n  CFSimpleSip.prototype.toggleMute = function (mute) {\n    var pc = this.session.sessionDescriptionHandler.peerConnection;\n\n    if (pc.getSenders) {\n      pc.getSenders().forEach(function (sender) {\n        if (sender.track) {\n          sender.track.enabled = !mute;\n        }\n      });\n    } else {\n      pc.getLocalStreams().forEach(function (stream) {\n        stream.getAudioTracks().forEach(function (track) {\n          track.enabled = !mute;\n        });\n        stream.getVideoTracks().forEach(function (track) {\n          track.enabled = !mute;\n        });\n      });\n    }\n  };\n  /**\n   * @property {Method} onAccepted\n   */\n\n  CFSimpleSip.prototype.onAccepted = function () {\n    this.state = C.STATUS_CONNECTED;\n    this.emit('connected', this.session);\n    this.setupLocalMedia();\n    this.setupRemoteMedia();\n    this.session.sessionDescriptionHandler.on(\n      'addTrack',\n      function () {\n        this.logger.log(\n          'A track has been added, triggering new remoteMedia setup',\n        );\n        this.setupRemoteMedia();\n      }.bind(this),\n    );\n    this.session.sessionDescriptionHandler.on(\n      'addStream',\n      function () {\n        this.logger.log(\n          'A stream has been added, trigger new remoteMedia setup',\n        );\n        this.setupRemoteMedia();\n      }.bind(this),\n    );\n    this.session.on(\n      'hold',\n      function () {\n        this.emit('hold', this.session);\n      }.bind(this),\n    );\n    this.session.on(\n      'unhold',\n      function () {\n        this.emit('unhold', this.session);\n      }.bind(this),\n    );\n    this.session.on(\n      'dtmf',\n      function (tone) {\n        this.emit('dtmf', tone);\n      }.bind(this),\n    );\n    this.session.on('bye', this.onEnded.bind(this));\n  };\n  /**\n   * @property {Method} onProgress\n   */\n\n  CFSimpleSip.prototype.onProgress = function () {\n    this.state = C.STATUS_CONNECTING;\n    this.emit('connecting', this.session);\n  };\n  /**\n   * @property {Method} onFailed\n   */\n\n  CFSimpleSip.prototype.onFailed = function () {\n    this.onEnded();\n  };\n  /**\n   * @property {Method} onEnded\n   */\n\n  CFSimpleSip.prototype.onEnded = function () {\n    this.state = C.STATUS_COMPLETED;\n    this.emit('ended', this.session);\n    this.cleanupMedia();\n  };\n  window.CFSimpleSip = CFSimpleSip;\n  return CFSimpleSip;\n})();\n\nexport default (function () {\n  /**\n   * @fileOverview Exposed functionality for Contact Center AgentUI.\n   * @namespace AgentLibrary\n   */\n\n  return function (global) {\n    var AddSessionNotification = function () {};\n\n    /*\n     * This class is responsible for handling \"ADD-SESSION\" packets from IntelliQueue.  This is used by\n     * the CallControlForm. Then it will increment the total_calls count.\n     *\n     * {\n     *   \"ui_notification\": {\n     *       \"@message_id\": \"IQ982008082918151403727\",\n     *       \"@response_to\": \"\",\n     *       \"@type\": \"ADD-SESSION\",\n     *       \"session_id\": { \"#text\": \"2\" },\n     *       \"uii\": { \"#text\": \"200808291814560000000900016558\" },\n     *       \"phone\": { \"#text\": \"200808291814370000000900016555\" },\n     *       \"session_type\": { \"#text\": \"AGENT\" },\n     *       \"session_label\": { \"#text\": \"Primary Agents Call Session\" },\n     *       \"allow_control\": { \"#text\": \"TRUE\" },\n     *       \"monitoring\": { \"#text\": \"FALSE\" },\n     *       \"agent_id\": { \"#text\": \"1856\" }\n     *   }\n     *  }\n     */\n    AddSessionNotification.prototype.processResponse = function (notification) {\n      var model = UIModel.getInstance();\n      var notif = notification.ui_notification;\n      var sessionAgentId = utils.getText(notif, 'agent_id');\n\n      if (utils.getText(notif, 'session_type') === 'AGENT') {\n        model.incrementTotalCalls();\n      }\n\n      if (sessionAgentId === model.agentSettings.agentId) {\n        // add the session_id of this leg to the current call packet -\n        // this way we can use it for hangups later.\n        model.currentCall.sessionId = utils.getText(notif, 'session_id');\n      } else if (sessionAgentId != '') {\n        // this is a monitoring session, lets save the monitored agent id for barge-ins\n        model.currentCall.monitorAgentId = sessionAgentId;\n      }\n\n      // Check to see if we have a transfer leg here, if so, register it\n      var sessionType = utils.getText(notif, 'session_type'),\n        allowControl = utils.getText(notif, 'allow_control'),\n        sessionId = utils.getText(notif, 'session_id'),\n        uii = utils.getText(notif, 'uii'),\n        isMonitoring = model.currentCall.isMonitoring,\n        monitoringType = model.currentCall.monitoringType;\n\n      var isBargeInMonitor = isMonitoring && monitoringType === 'FULL',\n        notCurrentAgent = sessionAgentId !== model.agentSettings.agentId,\n        notSessionOne = sessionId !== '1',\n        shouldTrackSession = false;\n\n      if (notSessionOne && notCurrentAgent) {\n        if (isBargeInMonitor) {\n          shouldTrackSession = true;\n        } else if (allowControl) {\n          if (sessionType === 'OUTBOUND' || sessionType === 'AGENT') {\n            shouldTrackSession = true;\n          }\n        }\n      }\n\n      if (shouldTrackSession) {\n        var destination = utils.getText(notif, 'phone');\n\n        if (sessionType === 'AGENT' || sessionAgentId !== '') {\n          destination = utils.getText(notif, 'agent_name');\n        }\n\n        model.transferSessions[sessionId] = {\n          sessionId: sessionId,\n          destination: destination,\n          uii: uii,\n        };\n      }\n\n      // if agent session, set on call status\n      if (notif.session_id === '2') {\n        model.agentSettings.onCall = true;\n      }\n\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      formattedResponse.status = 'OK';\n      formattedResponse.message = 'Received ADD-SESSION notification';\n      formattedResponse.sessionId = utils.getText(notif, 'session_id');\n      formattedResponse.uii = utils.getText(notif, 'uii');\n      formattedResponse.phone = utils.getText(notif, 'phone');\n      formattedResponse.sessionType = utils.getText(notif, 'session_type');\n      formattedResponse.sessionLabel = utils.getText(notif, 'session_label');\n      formattedResponse.allowControl = utils.getText(notif, 'allow_control');\n      formattedResponse.monitoring = utils.getText(notif, 'monitoring');\n      formattedResponse.agentId = utils.getText(notif, 'agent_id');\n      formattedResponse.recordingUrl = utils.getText(notif, 'recording_url');\n      formattedResponse.transferSessions = model.transferSessions;\n\n      return formattedResponse;\n    };\n\n    var AdminDebugEmailNotification = function () {};\n\n    /*\n     * This class is responsible for handling \"AGENT-DEBUG-EMAIL\" packets from IntelliQueue\n     *\n     * {\n     *   \"ui_notification\":{\n     *      \"@message_id\":\"IQD01DEV2018071616521500004\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"AGENT-DEBUG-EMAIL\",\n     *      \"email_to\": {\n     *          \"#text\":\"rmyers@connectfirst.com\"\n     *      }\n     *      \"requested_by\": {\n     *          \"#text\":\"Ross Myers\"\n     *      }\n     *   }\n     * }\n     */\n    AdminDebugEmailNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      var notif = notification.ui_notification;\n\n      formattedResponse.status = 'OK';\n      formattedResponse.message = 'Received AGENT-DEBUG-EMAIL notification';\n      formattedResponse.emailTo = utils.getText(notif, 'email_to');\n      formattedResponse.requestedBy = utils.getText(notif, 'requested_by');\n\n      return formattedResponse;\n    };\n\n    var DialGroupChangeNotification = function () {};\n\n    /*\n     * This class is responsible for handling a DIAL_GROUP_CHANGE notification.\n     * This event is sent from IQ when an agent's dial group is changed in through the AdminUI.\n     *\n     *   {\n     *       \"ui_notification\": {\n     *           \"@message_id\": \"IQ10012016080413085500263\",\n     *           \"@type\": \"DIAL_GROUP_CHANGE\",\n     *           \"agent_id\": { \"#text\": \"1180958\" },\n     *           \"dial_group_id\": { \"#text\": \"50354\" },\n     *           \"dialGroupName\": { \"#text\": \"Preview Dial Mode\" },\n     *           \"dial_group_desc\": {}\n     *       }\n     *   }\n     */\n    DialGroupChangeNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      //Modify loginRequest with new DialGroupId\n      var model = UIModel.getInstance();\n      var notif = notification.ui_notification;\n      var origLoginType = model.loginRequest.loginType;\n      var newDgId = utils.getText(notif, 'dial_group_id');\n\n      model.dialGroupChangeNotification = notification;\n\n      // Calculate type of login - called from AdminUI when assigning agent to new dial group.\n      // Only options should be BLENDED or OUTBOUND here.\n      if (\n        newDgId &&\n        newDgId !== '' &&\n        (origLoginType === 'INBOUND' || origLoginType === 'BLENDED')\n      ) {\n        model.loginRequest.loginType = 'BLENDED';\n      } else if (newDgId && newDgId !== '') {\n        model.loginRequest.loginType = 'OUTBOUND';\n      } else if (origLoginType === 'INBOUND') {\n        model.loginRequest.loginType = 'INBOUND';\n      } else {\n        model.loginRequest.loginType = 'NO-SELECTION';\n      }\n\n      UIModel.getInstance().loginRequest.dialGroupId = newDgId;\n\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      formattedResponse.message = 'Dial Group Updated Successfully.';\n      formattedResponse.detail = 'Dial Group changed to [' + newDgId + '].';\n      formattedResponse.dialGroupId = utils.getText(notif, 'dial_group_id');\n      formattedResponse.dialGroupName = utils.getText(notif, 'dialGroupName'); // camel case from server for some reason :/\n      formattedResponse.dialGroupDesc = utils.getText(notif, 'dial_group_desc');\n      formattedResponse.agentId = utils.getText(notif, 'agent_id');\n\n      return formattedResponse;\n    };\n\n    var DialGroupChangePendingNotification = function () {};\n\n    /*\n     * This class is responsible for handling a DIAL_GROUP_CHANGE_PENDING notification.\n     * This event is sent from IQ when an agent's dial group is changed and the agent is on a call.\n     *\n     * {\n     *     \"ui_notification\": {\n     *         \"@message_id\": \"IQ10012016080515294800318\",\n     *         \"@type\": \"DIAL_GROUP_CHANGE_PENDING\",\n     *         \"agent_id\": { \"#text\": \"1180958\" },\n     *         \"dial_group_id\": { \"#text\": \"50354\" },\n     *         \"update_from_adminui\": { \"#text\": \"TRUE\" }\n     *     }\n     * }\n     */\n    DialGroupChangePendingNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var model = UIModel.getInstance();\n      var notif = notification.ui_notification;\n      model.agentSettings.pendingDialGroupChange = parseInt(\n        utils.getText(notif, 'dial_group_id'),\n        10,\n      );\n\n      // check if request originated with AdminUI\n      if (notif.update_from_adminui) {\n        model.agentSettings.updateDGFromAdminUI =\n          utils.getText(notif, 'update_from_adminui') === true;\n      } else {\n        model.agentSettings.updateDGFromAdminUI = false;\n      }\n\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      formattedResponse.message =\n        'Dial Group Change Pending notification received.';\n      formattedResponse.detail =\n        'DialGroup switch for existing session pending until active call ends.';\n      formattedResponse.agentId = utils.getText(notif, 'agent_id');\n      formattedResponse.dialGroupId = utils.getText(notif, 'dial_group_id');\n      formattedResponse.updateFromAdminUI = utils.getText(\n        notif,\n        'update_from_adminui',\n      );\n\n      return formattedResponse;\n    };\n\n    var DirectAgentTransferNotification = function () {};\n\n    /*\n     * This class is responsible for handling a DIRECT-AGENT-ROUTE notification.\n     * This event is sent from IQ when an agent is presented a direct transfer, in the case they are not in an\n     * available state to automatically be presented the call.\n     *\n     * {\n     *     \"ui_notification\": {\n     *         \"@message_id\": \"IQ10012016080515294800318\",\n     *         \"@type\": \"DIRECT-AGENT-ROUTE\",\n     *         \"response_to\": { \"#text\": \"\" },\n     *         \"agent_id\": { \"#text\": \"\" },\n     *         \"uii\": { \"#text\": \"\" },\n     *         \"status\": { \"#text\": \"\" },\n     *         \"ani\": { \"#text\": \"\" },\n     *         \"dnis\": { \"#text\": \"\" }\n     *         \"source_type\": { \"#text\": \"\" },\n     *         \"source_id\": { \"#text\": \"\" },\n     *         \"source_name\": { \"#text\": \"\" }\n     *         \"voicemail_url\": { \"#text\": \"\" }\n     *     }\n     * }\n     */\n    DirectAgentTransferNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      var notif = notification.ui_notification;\n\n      formattedResponse.message = 'Received DIRECT-AGENT-ROUTE notification';\n      formattedResponse.status = utils.getText(notif, 'status');\n      formattedResponse.agentId = utils.getText(notif, 'agent_id');\n      formattedResponse.uii = utils.getText(notif, 'uii');\n      formattedResponse.ani = utils.getText(notif, 'ani');\n      formattedResponse.dnis = utils.getText(notif, 'dnis');\n      formattedResponse.sourceType = utils.getText(notif, 'source_type');\n      formattedResponse.sourceId = utils.getText(notif, 'source_id');\n      formattedResponse.sourceName = utils.getText(notif, 'source_name');\n      formattedResponse.voicemailUrl = utils.getText(notif, 'voicemail_url');\n\n      return formattedResponse;\n    };\n\n    var DropSessionNotification = function () {};\n\n    /*\n     * This class handles the DROP-SESSION packet from IQ. It doesn't really do anything\n     * besides format a response for the callback notification since there isn't any action needed.\n     *\n     *  {\n     *      \"ui_notification\": {\n     *          \"@message_id\":\"IQ10012016081613222800341\",\n     *          \"@response_to\":\"\",\n     *          \"@type\":\"DROP-SESSION\",\n     *          \"session_id\":{\"#text\":\"3\"},\n     *          \"uii\":{\"#text\":\"201608161322180139000000000124\"}\n     *      }\n     *  }\n     */\n    DropSessionNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      var notif = notification.ui_notification;\n\n      var sessionId = utils.getText(notif, 'session_id');\n      var sessionUII = utils.getText(notif, 'uii');\n      var transfer = UIModel.getInstance().transferSessions[sessionId];\n\n      // Check to see if we just disconnected a transfer session\n      // If so, we need to remove the session from our map\n      if (transfer) {\n        console.log(\n          sessionUII + ' TRANSFER TO ' + transfer.destination + ' TERMINATED',\n        );\n        utils.logMessage(\n          LOG_LEVELS.DEBUG,\n          'Transfer to ' + transfer.destination + ' has terminated',\n          '',\n        );\n        delete UIModel.getInstance().transferSessions[sessionId];\n        formattedResponse.transferEnd = transfer;\n      }\n\n      console.log(sessionUII + ' END SESSION ' + sessionId);\n      formattedResponse.message = 'Received DROP-SESSION Notification';\n      formattedResponse.status = 'OK';\n      formattedResponse.sessionId = utils.getText(notif, 'session_id');\n      formattedResponse.uii = utils.getText(notif, 'uii');\n\n      return formattedResponse;\n    };\n\n    var EarlyUiiNotification = function () {};\n\n    /*\n     * This class is responsible for handling \"EARLY_UII\" packets from IntelliQueue.\n     * For manual outdials, this gives the uii to cancel a ringing line.\n     *\n     *  {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016081611595000289\",\n     *          \"@type\":\"EARLY_UII\",\n     *          \"agent_id\":{\"#text\":\"1180958\"},\n     *          \"uii\":{\"#text\":\"201608161200240139000000000120\"}\n     *      }\n     *  }\n     */\n    EarlyUiiNotification.prototype.processResponse = function (notification) {\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      var notif = notification.ui_notification;\n\n      formattedResponse.message = 'Received EARLY_UII notification';\n      formattedResponse.status = 'OK';\n      formattedResponse.agentId = utils.getText(notif, 'agent_id');\n      formattedResponse.uii = utils.getText(notif, 'uii');\n\n      return formattedResponse;\n    };\n\n    var EndCallNotification = function (libInstance) {\n      this.libInstance = libInstance;\n    };\n\n    /*\n     * This class is responsible for handling an END-CALL notification.\n     * Save the packet in the UIModel by appending it to the currentCall packet.\n     * Update the CallState field in the UIModel to \"CALL-ENDED\"\n     *\n     * {\n     *  \"ui_notification\":{\n     *      \"@message_id\":\"IQ982008082910362203349\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"END-CALL\",\n     *      \"agent_id\":{\"#text\":\"1856\"},\n     *      \"uii\":{\"#text\":\"200808291035510000000900029412\"},\n     *      \"session_id\":{\"#text\":\"2\"},\n     *      \"call_dts\":{\"#text\":\"2008-08-29 10:36:04\"},\n     *      \"call_duration\":{\"#text\":\"16\"},\n     *      \"term_party\":{\"#text\":\"CALLER\"},\n     *      \"term_reason\":{},\n     *      \"recording_url\":{},\n     *      \"disposition_timeout:{\"#text\":\"60\"}\n     *  }\n     * }\n     */\n    EndCallNotification.prototype.processResponse = function (notification) {\n      var model = UIModel.getInstance();\n      var notif = notification.ui_notification;\n      model.endCallNotification = notification;\n\n      // add callDuration, termParty, and termReason to the current call packet\n      model.currentCall.duration = utils.getText(notif, 'call_duration');\n      model.currentCall.termParty = utils.getText(notif, 'term_party');\n      model.currentCall.termReason = utils.getText(notif, 'term_reason');\n\n      // set call state to \"CALL-ENDED\"\n      model.agentSettings.callState = 'CALL-ENDED';\n      model.agentSettings.onCall = false;\n      model.agentSettings.onManualOutdial = false;\n\n      // Clear out any transfer sessions from the previous call\n      model.transferSessions = {};\n\n      // Check if there is a pending dial group change\n      if (\n        model.agentSettings.pendingDialGroupChange > 0 ||\n        model.agentSettings.pendingDialGroupChange == -1\n      ) {\n        // update dial group id\n        model.loginRequest.dialGroupId =\n          model.agentSettings.pendingDialGroupChange;\n\n        // send login update request\n        this.libInstance.loginAgent(\n          model.loginRequest.queueIds,\n          model.configRequest.chatIds,\n          model.configRequest.skillProfileId,\n          model.configRequest.dialGroupId,\n          model.configRequest.dialDest,\n          model.agentSettings.updateDGFromAdminUI,\n        );\n\n        // reset pending dial group variables\n        model.agentSettings.pendingDialGroupChange = 0;\n        model.agentSettings.updateDGFromAdminUI = false;\n      }\n\n      // start ping call interval timer, sends message every 30 seconds\n      // if this is not a manual outdial and we are not suppressing disposition pop\n      if (\n        model.currentCall.outdialDispositions &&\n        model.currentCall.outdialDispositions.dispositions &&\n        model.currentCall.outdialDispositions.dispositions.length > 0 &&\n        model.currentCall.surveyPopType !== 'SUPPRESS'\n      ) {\n        model.pingIntervalId = setInterval(utils.sendPingCallMessage, 30000);\n      }\n\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      formattedResponse.message = 'End Call Notification Received.';\n      formattedResponse.detail = '';\n      formattedResponse.uii = utils.getText(notif, 'uii');\n      formattedResponse.sessionId = utils.getText(notif, 'session_id');\n      formattedResponse.agentId = utils.getText(notif, 'agent_id');\n      formattedResponse.callDts = utils.getText(notif, 'call_dts');\n      formattedResponse.duration = model.currentCall.duration;\n      formattedResponse.termParty = model.currentCall.termParty;\n      formattedResponse.termReason = model.currentCall.termReason;\n      formattedResponse.recordingUrl = utils.getText(notif, 'recording_url');\n      formattedResponse.dispositionTimeout = utils.getText(\n        notif,\n        'disposition_timeout',\n      );\n\n      return formattedResponse;\n    };\n\n    var GatesChangeNotification = function () {};\n\n    /*\n     * This class is responsible for handling a gates change notification\n     *\n     * {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016080817344100936\",\n     *          \"@type\":\"GATES_CHANGE\",\n     *          \"agent_id\":{\"#text\":\"1180958\"},\n     *          \"gate_ids\":{\"#text\":\"11117,3\"}\n     *      }\n     * }\n     */\n    GatesChangeNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var model = UIModel.getInstance();\n      var notif = notification.ui_notification;\n      var newAssignedGates = [];\n      var availableQueues = model.inboundSettings.availableQueues;\n      var assignedGateIds = utils.getText(notif, 'gate_ids');\n      if (assignedGateIds !== '') {\n        assignedGateIds = assignedGateIds.split(',');\n      }\n\n      for (var a = 0; a < assignedGateIds.length; a++) {\n        // find gate in avail list\n        var id = assignedGateIds[a];\n        var foundGate = utils.findObjById(availableQueues, id, 'gateId');\n        if (foundGate) {\n          newAssignedGates.push(foundGate);\n        } else {\n          // gate not in assigned list, add stub\n          var gate = {\n            gateId: id,\n            gateName: '',\n            gateDesc: '',\n            defaultDestOverride: '',\n            isAgentSelectable: false,\n          };\n          newAssignedGates.push(gate);\n        }\n      }\n\n      model.inboundSettings.queues = JSON.parse(\n        JSON.stringify(newAssignedGates),\n      );\n\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      formattedResponse.agentId = utils.getText(notif, 'agent_id');\n      formattedResponse.message = 'Gates Change notification received.';\n      formattedResponse.queues = newAssignedGates;\n\n      return formattedResponse;\n    };\n\n    var GenericNotification = function () {};\n\n    /*\n     * This class is responsible for handling a generic notification\n     *\n     * {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016080317400400011\",\n     *          \"@response_to\":\"1c2fe39f-a31e-aff8-8d23-92a61c88270f\",\n     *          \"@type\":\"GENERIC\",\n     *          \"message_code\":{\"#text\":\"0\"},\n     *          \"message\":{\"#text\":\"OK\"},\n     *          \"detail\":{\"#text\":\"Pending Callback Successfully Cancelled.\"}\n     *      }\n     * }\n     */\n    GenericNotification.prototype.processResponse = function (notification) {\n      var formattedResponse = utils.buildDefaultResponse(notification);\n\n      // add message and detail if present\n      formattedResponse.messageCode = utils.getText(\n        notification.ui_notification,\n        'message_code',\n      );\n\n      return formattedResponse;\n    };\n\n    var NewCallNotification = function () {};\n\n    /*\n     * This class processes a \"NEW-CALL\" packet received from Intelliqueue. It will determine\n     * if the call is a regular or monitoring call:\n     * \t\t@Monitoring==true:  set state to ACTIVE-MONITORING, send NewMonitoringCall event\n     * \t\t@Monitoring==false: set state to ACTIVE, send newcall packet and increment total calls\n     *\n     *  {\"ui_notification\":{\n     *      \"@message_id\":\"IQ982010020911335300027\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"NEW-CALL\",\n     *      \"uii\":{\"#text\":\"201002091133350139990000000010\"},\n     *      \"ani\":{\"#text\":\"9548298548\"},\n     *      \"dnis\":{},\n     *      \"dial_dest\":{\"#text\":\"sip:+16789050673@sip.connectfirst.com\"},\n     *      \"call_type\":{\"#text\":\"OUTBOUND\"},\n     *      \"queue_dts\":{\"#text\":\"2010-02-09 11:33:53\"},\n     *      \"queue_time\":{\"#text\":\"-1\"},\n     *      \"agent_id\":{\"#text\":\"657\"},\n     *      \"app_url\":{},\n     *      \"is_monitoring\":{\"#text\":\"FALSE\"},\n     *      \"script_id\":{},\n     *      \"script_version\":{},\n     *      \"survey_id\":{},\n     *      \"survey_pop_type\":{\"#text\":\"SUPPRESS\"},\n     *      \"message\":{},\n     *      \"agent_recording\":{\"@default\":\"ON\",\"@pause\":\"10\",\"#text\":\"TRUE\"},\n     *      \"hangup_on_disposition\":{\"#text\":\"FALSE\"},\n     *      \"gate\":{\n     *          \"@number\":\"17038\",\n     *          \"name\":{\"#text\":\"AM Campaign\"},\n     *          \"description\":{}\n     *      },\n     *      \"outdial_dispositions\":{\n     *          \"@type\":\"CAMPAIGN|GATE\",\n     *          \"disposition\":[\n     *              { \"@contact_forwarding\":\"FALSE\", \"@disposition_id\":\"20556\", \"@is_complete\":\"1\", \"@is_default\"=\"0\", \"@require_note\"=\"0\", \"@save_survey\"=\"1\", \"@xfer\"=\"0\", \"#text\":\"Not Available\"},\n     *              { \"@contact_forwarding\":\"FALSE\", \"@disposition_id\":\"20559\", \"@is_complete\":\"1\", \"@is_default\"=\"1\", \"@require_note\"=\"1\", \"@save_survey\"=\"1\", \"@xfer\"=\"0\", #text\":\"Transfer Not Available\"}\n     *          ]\n     *      },\n     *      \"requeue_shortcuts\":{\n     *          \"requeue_shortcut\":[\n     *              { \"@gate_id\":\"2\", \"@name\":\"test queue\" \"@skill_id\":\"\"}\n     *          ]\n     *      },\n     *      \"baggage\":{\n     *          \"@allow_updates\":\"TRUE\",\n     *          \"@show_lead_passes\":\"TRUE\",\n     *          \"@show_list_name\":\"TRUE\",\n     *          \"aux_phone\":{},\n     *          \"aux_greeting\":{},\n     *          \"aux_external_url\":{},\n     *          \"aux_data1\":{\"#text\":\"BMAK\"},\n     *          \"aux_data2\":{\"#text\":\"BMAK-041653-934\"},\n     *          \"aux_data3\":{\"#text\":\"Call Ctr 1\"},\n     *          \"aux_data4\":{},\n     *          \"aux_data5\":{},\n     *          \"extern_id\":{\"#text\":\"9548298548\"},\n     *          \"lead_id\":{\"#text\":\"64306\"},\n     *          \"lead_passes\":{\"#text\":\"1\"},\n     *          \"first_name\":{\"#text\":\"Ryant\"},\n     *          \"last_name\":{\"#text\":\"Taylor\"},\n     *          \"mid_name\":{},\n     *          \"address1\":{\"#text\":\"8010 Maryland Ave\"},\n     *          \"address2\":{},\n     *          \"city\":{\"#text\":\"Cleveland\"},\n     *          \"state\":{\"#text\":\"OH\"},\n     *          \"zip\":{\"#text\":\"44105\"},\n     *          \"custom_labels\":{\n     *              \"aux_1_label\":{},\n     *              \"aux_2_label\":{},\n     *              \"aux_3_label\":{},\n     *              \"aux_4_label\":{},\n     *              \"aux_5_label\":{}\n     *          }\n     *      },\n     *      \"survey_response\":{\n     *          \"@response_id\":\"24\",\n     *          \"@survey_id\":\"1775\",\n     *          \"details\":{\n     *              \"detail\":[\n     *                  {\"@element_id\":\"9001\",\"@option_id\":\"0\",\"#text\":\"Box 1\"},\n     *                  {\"@element_id\":\"9002\",\"@option_id\":\"0\",\"#text\":\"Area 1\"},\n     *                  {\"@element_id\":\"9003\",\"@option_id\":\"6439\"},\n     *                  {\"@element_id\":\"9004\",\"@option_id\":\"6443\"},\n     *                  {\"@element_id\":\"9004\",\"@option_id\":\"6444\"},\n     *                  {\"@element_id\":\"9005\",\"@option_id\":\"6447\"},\n     *                  {\"@element_id\":\"9006\",\"@option_id\":\"0\",\"#text\":\"11/20/2013\"},\n     *                  {\"@element_id\":\"9015\",\"@option_id\":\"0\",\"#text\":\"Box 2\"},\n     *                  {\"@element_id\":\"9016\",\"@option_id\":\"0\",\"#text\":\"Area 2\"},\n     *                  {\"@element_id\":\"9017\",\"@option_id\":\"6466\"},\n     *                  {\"@element_id\":\"9018\",\"@option_id\":\"6471\"},\n     *                  {\"@element_id\":\"9018\",\"@option_id\":\"6472\"},\n     *                  {\"@element_id\":\"9019\",\"@option_id\":\"6477\"},\n     *                  {\"@element_id\":\"9020\",\"@option_id\":\"0\",\"#text\":\"11/21/2013\"}\n     *             ]\n     *          }\n     *      }\n     *    }\n     *  }\n     */\n    NewCallNotification.prototype.processResponse = function (notification) {\n      var model = UIModel.getInstance();\n      var notif = notification.ui_notification;\n\n      var newCall = utils.buildDefaultResponse(notification);\n      newCall.message = 'Received NEW-CALL notification';\n      newCall.status = 'OK';\n      newCall.uii = utils.getText(notif, 'uii');\n      newCall.agentId = utils.getText(notif, 'agent_id');\n      newCall.dialDest = utils.getText(notif, 'dial_dest');\n      newCall.queueDts = utils.getText(notif, 'queue_dts');\n      newCall.queueTime = utils.getText(notif, 'queue_time');\n      newCall.ani = utils.getText(notif, 'ani');\n      newCall.dnis = utils.getText(notif, 'dnis');\n      newCall.callType = utils.getText(notif, 'call_type');\n      newCall.appUrl = utils.getText(notif, 'app_url');\n      newCall.isMonitoring = utils.getText(notif, 'is_monitoring');\n      newCall.allowHold = utils.getText(notif, 'allow_hold');\n      newCall.allowTransfer = utils.getText(notif, 'allow_transfer');\n      newCall.allowManualInternationalTransfer = utils.getText(\n        notif,\n        'allow_manual_international_transfer',\n      );\n      newCall.allowDirectAgentTransfer = utils.getText(\n        notif,\n        'allow_direct_agent_transfer',\n      );\n      newCall.allowHangup = utils.getText(notif, 'allow_hangup');\n      newCall.allowRequeue = utils.getText(notif, 'allow_requeue');\n      newCall.allowEndCallForEveryone = utils.getText(\n        notif,\n        'allow_endcallforeveryone',\n      );\n      newCall.scriptId = utils.getText(notif, 'script_id');\n      newCall.scriptVersion = utils.getText(notif, 'script_version');\n      newCall.surveyId = utils.getText(notif, 'survey_id');\n      newCall.surveyPopType = utils.getText(notif, 'survey_pop_type');\n      newCall.requeueType = utils.getText(notif, 'requeue_type');\n      newCall.hangupOnDisposition = utils.getText(\n        notif,\n        'hangup_on_disposition',\n      );\n      newCall.callerName = utils.getText(notif, 'caller_name');\n\n      if (newCall.isMonitoring) {\n        newCall.monitoringType = utils.getText(notif, 'monitoring_type'); // FULL, COACHING, MONITOR\n      }\n\n      // set collection values\n      newCall.queue = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'gate',\n      )[0];\n      newCall.agentRecording = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'agent_recording',\n        'agentRecording',\n      )[0];\n      newCall.outdialDispositions = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'outdial_dispositions',\n        'disposition',\n      )[0];\n      newCall.requeueShortcuts =\n        utils.processResponseCollection(\n          notification,\n          'ui_notification',\n          'requeue_shortcuts',\n          'requeueShortcut',\n        )[0] || [];\n      newCall.baggage = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'baggage',\n      )[0];\n      newCall.surveyResponse = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'survey_response',\n        'detail',\n      )[0];\n      newCall.scriptResponse = {};\n      newCall.transferPhoneBook = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'transfer_phone_book',\n      )[0];\n      newCall.lead = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'lead',\n      )[0];\n\n      // parse extra data correctly\n      try {\n        if (notif.lead && notif.lead.extra_data) {\n          delete newCall.lead.extraDatas;\n          newCall.lead.extraData = {};\n          for (var key in notif.lead.extra_data) {\n            newCall.lead.extraData[key] = notif.lead.extra_data[key]['#text'];\n          }\n        }\n      } catch (e) {\n        console.warn('error parsing new call lead extra data: ' + e);\n      }\n\n      if (newCall.baggage) {\n        // process custom labels correctly\n        newCall.baggage.customLabels = {};\n        var notifLabels = notif.baggage['custom_labels'];\n        for (var key in notifLabels) {\n          var result = '';\n          if (notifLabels && notifLabels[key] && notifLabels[key]['#text']) {\n            result = notifLabels[key]['#text'];\n          }\n\n          newCall.baggage.customLabels[key] = result;\n        }\n      }\n\n      // set saved script response if present\n      try {\n        var savedModel = JSON.parse(notif.script_result['#text']).model;\n        var results = {};\n        var keys = Object.keys(savedModel);\n        for (var idx = 0; idx < keys.length; idx++) {\n          var key = keys[idx];\n          var value = savedModel[key].value;\n          results[key] = value;\n        }\n        newCall.scriptResponse = results;\n      } catch (err) {}\n\n      // fix phonebook format\n      if (newCall.transferPhoneBook && newCall.transferPhoneBook.entrys) {\n        newCall.transferPhoneBook = newCall.transferPhoneBook.entrys;\n      }\n\n      // fix requeue shortcuts\n      if (\n        newCall.requeueShortcuts &&\n        newCall.requeueShortcuts.requeueShortcuts\n      ) {\n        newCall.requeueShortcuts = newCall.requeueShortcuts.requeueShortcuts;\n      }\n\n      // if only one disposition, convert to array\n      if (\n        newCall.outdialDispositions &&\n        newCall.outdialDispositions.disposition\n      ) {\n        newCall.outdialDispositions.dispositions = [\n          newCall.outdialDispositions,\n        ];\n      }\n\n      // convert numbers to boolean where applicable\n      newCall.queue.isCampaign = newCall.queue.isCampaign === '1';\n      if (\n        newCall.outdialDispositions &&\n        newCall.outdialDispositions.dispositions\n      ) {\n        for (\n          var d = 0;\n          d < newCall.outdialDispositions.dispositions.length;\n          d++\n        ) {\n          var disp = newCall.outdialDispositions.dispositions[d];\n          disp.isComplete = disp.isComplete === '1';\n          disp.requireNote = disp.requireNote === '1';\n          disp.saveSurvey = disp.saveSurvey === '1';\n          disp.xfer = disp.xfer === '1';\n          disp.isDefault = disp.isDefault === '1';\n        }\n      }\n\n      // Build token map\n      model.callTokens = buildCallTokenMap(notif, newCall);\n      newCall.baggage = model.callTokens; // add all tokens to baggage\n\n      // Is Monitoring Call?\n      if (newCall.isMonitoring) {\n        model.agentSettings.callState = 'ACTIVE-MONITORING';\n      } else {\n        model.agentSettings.callState = 'ACTIVE';\n\n        // check for preloaded transfer number\n        if (newCall.baggage && newCall.baggage.auxPhone != '') {\n          model.transferNumber = newCall.baggage.auxPhone;\n        }\n      }\n\n      // Reset the current call counter for Agent Daily Stats\n      model.agentDailyStats.currCallTime = 0;\n\n      // TODO: handle scripting??\n\n      model.currentCall = newCall;\n\n      return newCall;\n    };\n\n    function buildCallTokenMap(notif, newCall) {\n      var model = UIModel.getInstance();\n      var tokens = newCall.baggage || {}; // seed with baggage values\n      if (notif.baggage && notif.baggage.generic_key_value_pairs) {\n        var keyValuePairs = [];\n        var keyValuePairsStr = utils.getText(\n          notif.baggage,\n          'generic_key_value_pairs',\n        );\n        if (keyValuePairsStr.length > 0) {\n          keyValuePairs = utils.parseKeyValuePairsFromString(\n            keyValuePairsStr,\n            '|',\n            '::',\n          );\n        }\n\n        for (var keyValue in keyValuePairs) {\n          tokens[keyValue] = keyValuePairs[keyValue];\n        }\n      }\n\n      tokens['ani'] = newCall.ani;\n      tokens['dnis'] = newCall.dnis;\n      tokens['uii'] = newCall.uii;\n\n      try {\n        if (newCall.queue.number) {\n          tokens['sourceId'] = newCall.queue.number || '';\n          tokens['sourceName'] = newCall.queue.name || '';\n          tokens['sourceDesc'] = newCall.queue.description || '';\n\n          if (\n            newCall.queue.isCampaign === '1' ||\n            newCall.queue.isCampaign === true\n          ) {\n            tokens['sourceType'] = 'OUTBOUND';\n          } else {\n            tokens['sourceType'] = 'INBOUND';\n          }\n        } else {\n          tokens['sourceId'] = '0';\n          tokens['sourceType'] = 'MANUAL';\n          tokens['sourceName'] = '';\n          tokens['sourceDesc'] = '';\n        }\n      } catch (any) {\n        console.error(\n          'There was an error processing source tokenization',\n          +any,\n        );\n      }\n\n      try {\n        tokens['agentFirstName'] = model.agentSettings.firstName;\n        tokens['agentLastName'] = model.agentSettings.lastName;\n        tokens['agentExternalId'] = model.agentSettings.externalAgentId;\n        tokens['agentType'] = model.agentSettings.agentType;\n        tokens['agentEmail'] = model.agentSettings.email;\n        tokens['agentUserName'] = model.agentSettings.username;\n      } catch (any) {\n        console.error(\n          'There was an error parsing tokens for agent info. ',\n          any,\n        );\n      }\n\n      return tokens;\n    }\n\n    function isCampaign(gate) {\n      if (gate && gate.isCampaign) {\n        return gate.isCampaign === '1' || gate.isCampaign === true;\n      }\n      return false;\n    }\n\n    var PendingChatDispNotification = function () {};\n\n    /*\n     * This class is responsible for handling a pending chat disposition notification\n     *\n     *  {\n     *       \"ui_notification\":{\n     *           \"@message_id\":\"IQD01DEV2018062912352800014\",\n     *           \"@type\":\"PENDING_CHAT_DISP\",\n     *           \"agent_id\":{ \"#text\":\"1182160\" },\n     *           \"uii\":{ \"#text\":\"201806291234550147950000000000\" },\n     *           \"status\":{ \"#text\":\"false\" }\n     *       }\n     *   }\n     */\n    PendingChatDispNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      formattedResponse.message = 'Received PENDING-CHAT-DISP notification';\n      formattedResponse.status = 'OK';\n      formattedResponse.agentId = utils.getText(\n        notification.ui_notification,\n        'agent_id',\n      );\n      formattedResponse.uii = utils.getText(\n        notification.ui_notification,\n        'uii',\n      );\n      formattedResponse.status =\n        utils.getText(notification.ui_notification, 'status') === 'true';\n\n      return formattedResponse;\n    };\n\n    var PendingDispNotification = function () {};\n\n    /*\n     * This class is responsible for handling a generic notification\n     *\n     * {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016080317400400011\",\n     *          \"@type\":\"PENDING_DISP\",\n     *          \"agent_id\":{\"#text\":\"3\"},\n     *          \"status\":{\"#text\":\"false\"}\n     *      }\n     * }\n     */\n    PendingDispNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      formattedResponse.message = 'Received PENDING-DISP notification';\n      formattedResponse.status = 'OK';\n      formattedResponse.agentId = utils.getText(\n        notification.ui_notification,\n        'agent_id',\n      );\n      formattedResponse.status = utils.getText(\n        notification.ui_notification,\n        'status',\n      );\n\n      return formattedResponse;\n    };\n\n    var PreviewLeadStateNotification = function () {};\n\n    /*\n     * This class is responsible for processing the lead state packet\n     * received from intelliqueue. It will decide what type of leads are\n     * being processed, and depending on if the callback is true or false, it will\n     * call the appropriate form to update the lead state.\n     *\n     * {\n     *      \"ui_notification\":{\n     *          \"@type\":\"PREVIEW-LEAD-STATE\",\n     *          \"@call_type\":\"MANUAL|PREVIEW\",\n     *          \"@message_id\":\"IQ10012016092715393600184\",\n     *          \"request_id\":{\"#text\":\"IQ10012016092715390900179\"},\n     *          \"lead_state\":{\"#text\":\"ANSWER\"},\n     *          \"callback\":{\"#text\":\"FALSE\"}\n     *      }\n     *   }\n     * }\n     */\n    PreviewLeadStateNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var notif = notification.ui_notification;\n\n      UIModel.getInstance().agentSettings.onManualOutdial = true;\n\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      formattedResponse.callType = notif['@call_type'];\n      formattedResponse.messageId = notif['@message_id'];\n      formattedResponse.requestId = utils.getText(notif, 'request_id');\n      formattedResponse.leadState = utils.getText(notif, 'lead_state');\n      formattedResponse.callback = utils.getText(notif, 'callback');\n\n      return formattedResponse;\n    };\n\n    var ReverseMatchNotification = function () {};\n\n    /*\n     * This class is responsible for processing a REVERSE_MATCH packet from IQ. It\n     * will log the packet was rec'd, save the packet to the UIModel for use by\n     * components like the WhosCallingForm\n     * {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016080317400400011\",\n     *          \"@response_to\":\"1c2fe39f-a31e-aff8-8d23-92a61c88270f\",\n     *          \"@type\":\"REVERSE_MATCH\",\n     *          \"first_name\":{\"#text\":\"\"},\n     *          \"mid_name\":{\"#text\":\"\"},\n     *          \"last_name\":{\"#text\":\"\"},\n     *          \"address1\":{\"#text\":\"\"},\n     *          \"address2\":{\"#text\":\"\"},\n     *          \"city\":{\"#text\":\"\"},\n     *          \"state\":{\"#text\":\"\"},\n     *          \"zip\":{\"#text\":\"\"},\n     *          \"business_name\":{\"#text\":\"\"}\n     *      }\n     * }\n     */\n    ReverseMatchNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var notif = notification.ui_notification;\n      var model = UIModel.getInstance();\n\n      model.tokens['first_name'] = utils.getText(notif, 'first_name');\n      model.tokens['mid_name'] = utils.getText(notif, 'mid_name');\n      model.tokens['last_name'] = utils.getText(notif, 'last_name');\n      model.tokens['address1'] = utils.getText(notif, 'address1');\n      model.tokens['address2'] = utils.getText(notif, 'address2');\n      model.tokens['suffix'] = utils.getText(notif, 'suffix');\n      model.tokens['title'] = utils.getText(notif, 'title');\n      model.tokens['city'] = utils.getText(notif, 'city');\n      model.tokens['state'] = utils.getText(notif, 'state');\n      model.tokens['zip'] = utils.getText(notif, 'zip');\n      model.tokens['business_name'] = utils.getText(notif, 'business_name');\n\n      return model.tokens;\n    };\n\n    var TcpaSafeLeadStateNotification = function () {};\n\n    /*\n     * This class is responsible for processing the lead state packet\n     * received from intelliqueue. It will decide what type of leads are\n     * being processed, and depending on if the callback is true or false, it will\n     * call the appropriate form to update the lead state.\n     *\n     * {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016080317400400011\",\n     *          \"@type\":\"TCPA-SAFE-LEAD-STATE\",\n     *          \"@call_type\":\"MANUAL|TCPA-SAFE\",\n     *          \"request_id\":{\"#text\":\"\"},\n     *          \"lead_state\":{\"#text\":\"CALLING\"},\n     *          \"callback\":{\"#text\":\"false\"}\n     *      }\n     * }\n     */\n    TcpaSafeLeadStateNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var notif = notification.ui_notification;\n      var formattedResponse = utils.buildDefaultResponse(notification);\n      formattedResponse.callType = notif['@call_type'];\n      formattedResponse.messageId = notif['@message_id'];\n      formattedResponse.requestId = utils.getText(notif, 'request_id');\n      formattedResponse.leadState = utils.getText(notif, 'lead_state');\n      formattedResponse.callback = utils.getText(notif, 'callback');\n\n      return formattedResponse;\n    };\n\n    var AckRequest = function (audioType, agentId, uii, monitorAgentId) {\n      this.audioType = audioType || 'FULL';\n      this.agentId = agentId;\n      this.uii = uii;\n      this.monitorAgentId = monitorAgentId;\n    };\n\n    /*\n     * This class processes ACK packets rec'd from IQ.\n     * This is a callback triggered by certain actions like\n     * sending dispositions or script results.\n     * NOTE: uii is added in utils message processing.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008090317393001252\",\n     *      \"@response_to\":\"1112222\",\n     *      \"@type\":\"ACK\",\n     *      \"type\":{\"#text\":\"CHAT-DISPOSITION|INBOUND-DISPOSITION|OUTDIAL-DISPOSITION|SCRIPT-RESULT\"},\n     *      \"status\":{\"#text\":\"OK|FAILURE\"},\n     *      \"message\":{\"#text\":\"\"},\n     *      \"detail\":{}\n     *    }\n     * }\n     */\n    AckRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      formattedResponse.type = utils.getText(resp, 'type');\n\n      if (formattedResponse.status === 'OK') {\n        utils.logMessage(LOG_LEVELS.DEBUG, formattedResponse.message, response);\n      } else {\n        utils.logMessage(\n          LOG_LEVELS.WARN,\n          formattedResponse.message + ': ' + formattedResponse.detail,\n          response,\n        );\n      }\n\n      return formattedResponse;\n    };\n\n    var AgentStateRequest = function (agentState, agentAuxState) {\n      if (\n        agentState.toUpperCase() === 'ON-BREAK' &&\n        UIModel.getInstance().agentSettings.onCall === true\n      ) {\n        this.agentState = 'BREAK-AFTER-CALL';\n        this.agentAuxState = '';\n      } else {\n        this.agentState = agentState.toUpperCase() || '';\n        this.agentAuxState = agentAuxState || '';\n      }\n    };\n\n    AgentStateRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.AGENT_STATE,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          state: {\n            '#text': this.agentState,\n          },\n          agent_aux_state: {\n            '#text': this.agentAuxState,\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes AGENT-STATE packets rec'd from IQ. It will check the state of the\n     * packet and then set the state on the model. It will also check for deferred surveys,\n     * if one is found it will load it at this point.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008082817165103294\",\n     *      \"@type\":\"AGENT-STATE\",\n     *      \"status\":{\"#text\":\"OK\"},\n     *      \"message\":{},\n     *      \"detail\":{},\n     *      \"agent_id\":{\"#text\":\"1856\"},\n     *      \"prev_state\":{\"#text\":\"ENGAGED\"},\n     *      \"current_state\":{\"#text\":\"WORKING\"},\n     *      \"agent_aux_state\":{\"#text\":\"Offhook Work\"},\n     *      \"prev_aux_state\":{}\n     *   }\n     * }\n     */\n    AgentStateRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var status = utils.getText(resp, 'status');\n      var prevState = utils.getText(resp, 'prev_state');\n      var currState = utils.getText(resp, 'current_state');\n      var prevAuxState = utils.getText(resp, 'prev_aux_state');\n      var currAuxState = utils.getText(resp, 'agent_aux_state');\n      var model = UIModel.getInstance();\n\n      // add message and detail if present\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      formattedResponse.agentId = response.ui_response.agent_id['#text'] || '';\n      formattedResponse.previousState = prevState;\n      formattedResponse.currentState = currState;\n      formattedResponse.previousAuxState = prevAuxState;\n      formattedResponse.currentAuxState = currAuxState;\n\n      if (status == 'OK') {\n        var prevStateStr = prevState;\n        var currStateStr = currState;\n\n        if (prevAuxState.length > 0) {\n          prevStateStr = prevAuxState;\n        }\n\n        if (currAuxState.length > 0) {\n          currStateStr = currAuxState;\n        }\n\n        // Update the state in the UIModel\n        model.agentSettings.currentState = currState;\n        model.agentSettings.currentStateLabel = currAuxState;\n        model.agentStatePacket = response;\n      } else {\n        if (formattedResponse.message === '') {\n          formattedResponse.message = 'Unable to change agent state';\n        }\n\n        // log message response\n        var message =\n          'Unable to change agent state. ' + formattedResponse.detail;\n        utils.logMessage(LOG_LEVELS.WARN, message, response);\n      }\n\n      return formattedResponse;\n    };\n\n    var AuthenticateRequest = function (config) {\n      this.username = config.username;\n      this.password = config.password;\n      this.platformId = config.platformId;\n      this.rcAccessToken = config.rcAccessToken;\n      this.tokenType = config.tokenType;\n      this.engageAccessToken = config.engageAccessToken;\n      this.authType = config.authType;\n    };\n\n    AuthenticateRequest.prototype.sendHttpRequest = function () {\n      UIModel.getInstance().authenticateRequest = this;\n      switch (this.authType) {\n        case AUTHENTICATE_TYPES.USERNAME_PASSWORD:\n          _buildHttpRequest(this.authType, 'login/agent', {\n            username: this.username,\n            password: this.password,\n            platformId: this.platformId,\n          });\n          break;\n        case AUTHENTICATE_TYPES.RC_TOKEN:\n          _buildHttpRequest(this.authType, 'login/rc/accesstoken', {\n            rcAccessToken: this.rcAccessToken,\n            rcTokenType: this.tokenType,\n          });\n          break;\n        case AUTHENTICATE_TYPES.ENGAGE_TOKEN:\n          _buildHttpRequest(this.authType, 'login', {});\n          break;\n      }\n    };\n\n    /*\n     * response:\n     * {\n     *   \"refreshToken\": \"223867e6-ad0f-4af1-bbe7-5090d8259065\",\n     *   \"accessToken\": \"\",\n     *   \"tokenType\": \"Bearer\",\n     *   \"platformId\": \"local\",\n     *   \"iqUrl\": \"d01-dev.vacd.biz\",\n     *   \"port\": 8080,\n     *   \"agentDetails\": [\n     *       {\n     *           \"agentId\": 1,\n     *           \"firstName\": \"D\",\n     *           \"lastName\": \"LB\",\n     *           \"email\": \"dlb@somewhere.com\",\n     *           \"username\": \"dlbooks\"\n     *       }\n     *   ],\n     *   \"adminId\": null,\n     *   \"mainAccountId\": \"99990000\"\n     * }\n     */\n    AuthenticateRequest.prototype.processResponse = function (response) {\n      var model = UIModel.getInstance();\n      model.authenticatePacket = response; // raw response packet\n      model.authenticateRequest.accessToken = response.accessToken; // TODO: - dlb - store in local storage\n      model.authenticateRequest.refreshToken = response.refreshToken;\n      model.authenticateRequest.tokenType = response.tokenType;\n      model.authenticateRequest.socketUrl = response.iqUrl;\n      model.authenticateRequest.socketPort = response.port;\n      model.authenticateRequest.agents = response.agentDetails;\n      model.authenticateRequest.platformId = response.platformId;\n      model.authenticateRequest.mainAccountId = response.mainAccountId;\n\n      return model.authenticateRequest;\n    };\n\n    function _buildHttpRequest(authType, path, queryParams) {\n      var model = UIModel.getInstance();\n      var baseUrl = model.authHost + model.baseAuthUri;\n      var params = {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      };\n\n      switch (authType) {\n        case AUTHENTICATE_TYPES.USERNAME_PASSWORD:\n        case AUTHENTICATE_TYPES.RC_TOKEN:\n          params['queryParams'] = queryParams;\n          var errorMsg =\n            'Error on agent authenticate POST to engage-auth. URL: ' +\n            baseUrl +\n            path;\n          new HttpService(baseUrl).httpPost(path, params).then(\n            function (response) {\n              try {\n                response = JSON.parse(response.response);\n\n                var authenticateResponse = UIModel.getInstance().authenticateRequest.processResponse(\n                  response,\n                );\n                utils.fireCallback(\n                  UIModel.getInstance().libraryInstance,\n                  CALLBACK_TYPES.AUTHENTICATE,\n                  authenticateResponse,\n                );\n              } catch (err) {\n                utils.logMessage(LOG_LEVELS.WARN, errorMsg, err);\n              }\n            },\n            function (err) {\n              var errResponse = {\n                type: 'Authenticate Error',\n                message: errorMsg,\n                err: err,\n              };\n              utils.logMessage(LOG_LEVELS.WARN, errorMsg, err);\n              utils.fireCallback(\n                UIModel.getInstance().libraryInstance,\n                CALLBACK_TYPES.AUTHENTICATE,\n                errResponse,\n              );\n            },\n          );\n          break;\n        case AUTHENTICATE_TYPES.ENGAGE_TOKEN:\n          var errMsg =\n            'Error on agent authenticate GET to engage-auth. URL: ' +\n            baseUrl +\n            path;\n          params.headers['Authorization'] =\n            'Bearer ' +\n            utils.toString(\n              UIModel.getInstance().authenticateRequest.engageAccessToken,\n            );\n          new HttpService(baseUrl).httpGet(path, params).then(\n            function (response) {\n              try {\n                response = JSON.parse(response.response);\n\n                var authenticateResponse = UIModel.getInstance().authenticateRequest.processResponse(\n                  response,\n                );\n                utils.fireCallback(\n                  UIModel.getInstance().libraryInstance,\n                  CALLBACK_TYPES.AUTHENTICATE,\n                  authenticateResponse,\n                );\n              } catch (err) {\n                utils.logMessage(LOG_LEVELS.WARN, errMsg, err);\n              }\n            },\n            function (err) {\n              utils.logMessage(LOG_LEVELS.WARN, errMsg, err);\n              utils.fireCallback(\n                UIModel.getInstance().libraryInstance,\n                CALLBACK_TYPES.AUTHENTICATE,\n                err,\n              );\n            },\n          );\n          break;\n      }\n    }\n\n    var BargeInRequest = function (audioType, agentId, uii, monitorAgentId) {\n      this.audioType = audioType || 'FULL';\n      this.agentId = agentId;\n      this.uii = uii;\n      this.monitorAgentId = monitorAgentId;\n    };\n\n    /*\n     *\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@message_id\":\"UIV22008931055822\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"BARGE-IN\",\n     *      \"agent_id\":{\"#text\":\"94\"},\n     *      \"uii\":{\"#text\":\"200809031054510000000900020961\"},\n     *      \"audio_state\":{\"#text\":\"FULL\"},\n     *      \"monitor_agent_id\":{\"#text\":\"1856\"}\n     *    }\n     * }\n     */\n    BargeInRequest.prototype.formatJSON = function () {\n      var model = UIModel.getInstance();\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.BARGE_IN,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(this.agentId),\n          },\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n          audio_state: {\n            '#text': utils.toString(this.audioType),\n          },\n          monitor_agent_id: {\n            '#text': utils.toString(this.monitorAgentId),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes BARGE-IN packets rec'd from IQ.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008090317393001252\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"BARGE-IN\",\n     *      \"agent_id\":{\"#text\":\"94\"},\n     *      \"uii\":{},\n     *      \"status\":{\"#text\":\"OK\"},\n     *      \"message\":{\"#text\":\"Barge-In processed successfully!\"},\n     *      \"detail\":{}\n     *    }\n     * }\n     */\n    BargeInRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      formattedResponse.agentId = utils.getText(resp, 'agent_id');\n      formattedResponse.uii = utils.getText(resp, 'uii');\n\n      if (formattedResponse.status === 'OK') {\n        utils.logMessage(LOG_LEVELS.DEBUG, formattedResponse.message, response);\n      } else {\n        utils.logMessage(\n          LOG_LEVELS.WARN,\n          'There was an error processing the Barge-In request. ' +\n            formattedResponse.detail,\n          response,\n        );\n      }\n\n      return formattedResponse;\n    };\n\n    var CallNotesRequest = function (notes) {\n      this.notes = notes;\n    };\n\n    /*\n     * This event is responsible for allowing an agent to tag a call with notes\n     */\n    CallNotesRequest.prototype.formatJSON = function () {\n      var model = UIModel.getInstance();\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          '@type': MESSAGE_TYPES.CALL_NOTES,\n          agent_id: {\n            '#text': utils.toString(model.agentSettings.agentId),\n          },\n          uii: {\n            '#text': utils.toString(model.currentCall.uii),\n          },\n          notes: {\n            '#text': utils.toString(this.notes),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class process CALL-NOTES packets rec'd from IntelliQueue.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008082817165103294\",\n     *      \"@type\":\"CALL-NOTES\",\n     *      \"status\":{\"#text\":\"OK\"},\n     *      \"message\":{},\n     *      \"detail\":{}\n     *   }\n     * }\n     */\n    CallNotesRequest.prototype.processResponse = function (response) {\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      if (formattedResponse.status === 'OK') {\n        formattedResponse.message = 'Call notes have been updated.';\n        formattedResponse.type = 'INFO_EVENT';\n      } else {\n        formattedResponse.type = 'ERROR_EVENT';\n        formattedResponse.message = 'Unable to update notes.';\n      }\n\n      return formattedResponse;\n    };\n\n    var CallbackCancelRequest = function (leadId, agentId) {\n      this.agentId = agentId || UIModel.getInstance().agentSettings.agentId;\n      this.leadId = leadId;\n    };\n\n    CallbackCancelRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CALLBACK_CANCEL,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': this.agentId,\n          },\n          lead_id: {\n            '#text': this.leadId,\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    // NOTE: cancel callback response sent as a generic notification message\n\n    var CallbacksPendingRequest = function (agentId) {\n      this.agentId = agentId || UIModel.getInstance().agentSettings.agentId;\n    };\n\n    CallbacksPendingRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CALLBACK_PENDING,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': this.agentId,\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class is responsible for handling an PENDING-CALLBACKS response packet from IntelliQueue.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008091512353000875\",\n     *      \"@response_to\":\"UIV220089151235539\",\n     *      \"@type\":\"PENDING-CALLBACKS\",\n     *      \"lead\":{\n     *          \"@aux_data1\":\"\",\n     *          \"@aux_data2\":\"\",\n     *          \"@aux_data3\":\"\",\n     *          \"@aux_data4\":\"\",\n     *          \"@aux_data5\":\"\",\n     *          \"@destination\":\"5555555555\",\n     *          \"@dial_group_id\":\"\",\n     *          \"@dial_group_name\":\"\",\n     *          \"@dial_time\":\"2016-08-03 10:00\",\n     *          \"@extern_id\":\"\",\n     *          \"@lead_id\":\"\",\n     *          \"lead_id\":{},\n     *          \"extern_id\":{},\n     *          \"extern_id\":{},\n     *          \"first_name\":{},\n     *          \"mid_name\":{},\n     *          \"last_name\":{},\n     *          \"suffix\":{},\n     *          \"title\":{},\n     *          \"address1\":{},\n     *          \"address2\":{},\n     *          \"city\":{},\n     *          \"state\":{},\n     *          \"zip\":{},\n     *          \"gate_keeper\":{}\n     *      }\n     *   }\n     * }\n     */\n    CallbacksPendingRequest.prototype.processResponse = function (response) {\n      var leadsRaw = response.ui_response.lead;\n      var leads = [];\n      if (!Array.isArray(leadsRaw)) {\n        leadsRaw = [leadsRaw];\n      }\n\n      for (var l = 0; l < leadsRaw.length; l++) {\n        var leadRaw = leadsRaw[l];\n        if (leadRaw == null) {\n          continue;\n        }\n\n        leads.push(parseLead(leadRaw));\n      }\n\n      UIModel.getInstance().agentSettings.pendingCallbacks = JSON.parse(\n        JSON.stringify(leads),\n      );\n\n      return UIModel.getInstance().agentSettings.pendingCallbacks;\n    };\n\n    function parseLead(leadRaw) {\n      var lead = {\n        auxData1: leadRaw['@aux_data1'],\n        auxData2: leadRaw['@aux_data2'],\n        auxData3: leadRaw['@aux_data3'],\n        auxData4: leadRaw['@aux_data4'],\n        auxData5: leadRaw['@aux_data5'],\n        destination: leadRaw['@destination'],\n        dialGroupId: leadRaw['@dial_group_id'],\n        dialGroupName: leadRaw['@dial_group_name'],\n        dialTime: leadRaw['@dial_time'],\n        externId: leadRaw['@extern_id'],\n        leadId: leadRaw['@lead_id'],\n        firstName: utils.getText(leadRaw, 'first_name'),\n        midName: utils.getText(leadRaw, 'mid_name'),\n        lastName: utils.getText(leadRaw, 'last_name'),\n        sufix: utils.getText(leadRaw, 'suffix'),\n        title: utils.getText(leadRaw, 'title'),\n        address1: utils.getText(leadRaw, 'address1'),\n        address2: utils.getText(leadRaw, 'address2'),\n        city: utils.getText(leadRaw, 'city'),\n        state: utils.getText(leadRaw, 'state'),\n        zip: utils.getText(leadRaw, 'zip'),\n        gateKeeper: utils.getText(leadRaw, 'gate_keeper'),\n      };\n\n      return lead;\n    }\n\n    /*\n     * This request is used to get the list of dispositions for a given campaign\n     * E.g. in the lead search form for manual passes\n     *\n     */\n    var CampaignDispositionsRequest = function (campaignId) {\n      this.agentId = UIModel.getInstance().agentSettings.agentId;\n      this.campaignId = campaignId;\n    };\n\n    CampaignDispositionsRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CAMPAIGN_DISPOSITIONS,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': utils.toString(this.agentId),\n          },\n          campaign_id: {\n            '#text': utils.toString(this.campaignId),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class is responsible for handling CAMPAIGN-DISPOSITIONS packets received\n     * from IntelliQueue. It will save a copy of it in the UIModel.\n     *\n     * {\"ui_response\":{\n     *      \"@campaign_id\":\"60403\",\n     *      \"@message_id\":\"IQ10012016081813480400006\",\n     *      \"@response_to\":\"0b61c3ca-c4fc-9942-c139-da4978053c9d\",\n     *      \"@type\":\"CAMPAIGN-DISPOSITIONS\",\n     *      \"outdial_dispositions\":{\n     *          \"disposition\":[\n     *              {\"@disposition_id\":\"1\",\"#text\":\"requeue\"},\n     *              {\"@disposition_id\":\"2\",\"#text\":\"complete\"}\n     *          ]\n     *       }\n     *    }\n     * }\n     */\n    CampaignDispositionsRequest.prototype.processResponse = function (\n      response,\n    ) {\n      var resp = response.ui_response;\n      var model = UIModel.getInstance();\n      var dispositions = utils.processResponseCollection(\n        resp,\n        'outdial_dispositions',\n        'disposition',\n        'disposition',\n      );\n\n      model.outboundSettings.campaignDispositions = dispositions;\n      return dispositions;\n    };\n\n    var ChatStateRequest = function (chatState) {\n      this.chatState = (chatState && chatState.toUpperCase()) || '';\n    };\n\n    ChatStateRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CHAT_STATE,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          state: {\n            '#text': this.chatState,\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes CHAT-STATE packets rec'd from IQ. It will check the state of the\n     * packet and then set the state on the model.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008082817165103294\",\n     *      \"@type\":\"AGENT-STATE\",\n     *      \"status\":{\"#text\":\"OK\"},\n     *      \"message\":{},\n     *      \"detail\":{},\n     *      \"agent_id\":{\"#text\":\"1856\"},\n     *      \"prev_state\":{\"#text\":\"CHAT-PRESENTED\"},\n     *      \"current_state\":{\"#text\":\"CHAT-ENGAGED\"}\n     *   }\n     * }\n     */\n    ChatStateRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var status = utils.getText(resp, 'status');\n      var prevState = utils.getText(resp, 'prev_state');\n      var currState = utils.getText(resp, 'current_state');\n      var model = UIModel.getInstance();\n\n      // add message and detail if present\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      formattedResponse.agentId = response.ui_response.agent_id['#text'] || '';\n      formattedResponse.previousState = prevState;\n      formattedResponse.currentState = currState;\n\n      if (status == 'OK') {\n        // Update the state in the UIModel\n        model.agentSettings.currentChatState = currState;\n        model.chatStatePacket = response;\n      } else {\n        if (formattedResponse.message === '') {\n          formattedResponse.message = 'Unable to change chat state';\n        }\n\n        // log message response\n        var message =\n          'Unable to change chat state. ' + formattedResponse.detail;\n        utils.logMessage(LOG_LEVELS.WARN, message, response);\n      }\n\n      return formattedResponse;\n    };\n\n    var XferColdRequest = function (dialDest, callerId, sipHeaders, countryId) {\n      this.dialDest = dialDest;\n      this.callerId = callerId || '';\n      this.sipHeaders = sipHeaders || [];\n      this.countryId = countryId || '';\n    };\n\n    XferColdRequest.prototype.formatJSON = function () {\n      var fields = [];\n      for (var i = 0; i < this.sipHeaders.length; i++) {\n        var fieldObj = this.sipHeaders[i];\n        fields.push({\n          '@name': utils.toString(fieldObj.name),\n          '@value': utils.toString(fieldObj.value),\n        });\n      }\n\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.XFER_COLD,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          uii: {\n            '#text': UIModel.getInstance().currentCall.uii,\n          },\n          dial_dest: {\n            '#text': utils.toString(this.dialDest),\n          },\n          caller_id: {\n            '#text': utils.toString(this.callerId),\n          },\n          country_id: {\n            '#text': utils.toString(this.countryId),\n          },\n          xfer_header: fields,\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes COLD-XFER packets rec'd from IQ.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ10012016082314475000219\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"COLD-XFER\",\n     *      \"agent_id\":{\"#text\":\"1\"},\n     *      \"uii\":{\"#text\":\"201608231447590139000000000200\"},\n     *      \"session_id\":{\"#text\":\"3\"},\n     *      \"status\":{\"#text\":\"OK\"},\n     *      \"dial_dest\":{\"#text\":\"3038593775\"},\n     *      \"message\":{\"#text\":\"OK\"},\n     *      \"detail\":{}\n     *   }\n     * }\n     */\n    XferColdRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      formattedResponse.agentId = utils.getText(resp, 'agent_id');\n      formattedResponse.uii = utils.getText(resp, 'uii');\n      formattedResponse.sessionId = utils.getText(resp, 'session_id');\n      formattedResponse.dialDest = utils.getText(resp, 'dial_dest');\n\n      if (formattedResponse.status === 'OK') {\n      } else {\n        // log message response\n        var message =\n          'There was an error processing the Cold Xfer request. ' +\n          formattedResponse.message +\n          ' : ' +\n          formattedResponse.detail;\n        utils.logMessage(LOG_LEVELS.WARN, message, response);\n      }\n\n      return formattedResponse;\n    };\n\n    var DirectAgentTransfer = function (targetAgentId, transferType, uii) {\n      this.targetAgentId = targetAgentId;\n      this.transferType = transferType;\n      this.uii = uii || UIModel.getInstance().currentCall.uii;\n    };\n\n    DirectAgentTransfer.prototype.formatJSON = function () {\n      var model = UIModel.getInstance();\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.DIRECT_AGENT_TRANSFER,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(model.agentSettings.agentId),\n          },\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n          target_agent_id: {\n            '#text': utils.toString(this.targetAgentId),\n          },\n          transfer_type: {\n            '#text': utils.toString(this.transferType),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes DIRECT-AGENT-TRANSFER packets rec'd from IQ.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ10012016082314475000219\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"DIRECT-AGENT-TRANSFER\",\n     *      \"status\":{\"#text\":\"OK\"},\n     *      \"message\":{\"#text\":\"OK\"},\n     *      \"type\":{\"#text\":\"WARM|COLD|CANCEL\"}\n     *   }\n     * }\n     */\n    DirectAgentTransfer.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n      formattedResponse.type = utils.getText(resp, 'type');\n\n      if (formattedResponse.status !== 'OK') {\n        // log message response\n        var message =\n          'There was an error processing the Direct Agent Transfer request. ' +\n          formattedResponse.message +\n          ' : ' +\n          formattedResponse.detail;\n        utils.logMessage(LOG_LEVELS.WARN, message, response);\n      }\n\n      return formattedResponse;\n    };\n\n    var DirectAgentTransferList = function () {};\n\n    DirectAgentTransferList.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.DIRECT_AGENT_TRANSFER_LIST,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes DIRECT-AGENT-TRANSFER-LIST packets rec'd from IQ.\n     *\n     *  {\n     *      \"ui_response\":{\n     *          \"@message_id\":\"IQD01DEV2018052917202600038\",\n     *          \"@response_to\":\"f0b2e8a3-87fe-13ee-4d00-9d145bfe2be8\",\n     *          \"@type\":\"DIRECT-AGENT-TRANSFER-LIST\",\n     *          \"status\":{\n     *              \"#text\":\"true\"\n     *          },\n     *          \"message\":{\n     *              \"#text\":\"OK\"\n     *          },\n     *          \"agents\": [\n     *             {\n     *                 \"@agent_aux_state\":\"AVAILABLE\",\n     *                 \"@agent_id\":\"1184160\",\n     *                 \"@agent_state\":\"AVAILABLE\",\n     *                 \"@available\":\"true\",\n     *                 \"@first_name\":\"ross\",\n     *                 \"@last_name\":\"m\",\n     *                 \"@pending_disp\":\"false\",\n     *                 \"@state_duration\":\"379\",\n     *                 \"@username\":\"rm1\"\n     *             },\n     *             {\n     *                 \"@agent_aux_state\":\"AVAILABLE\",\n     *                 \"@agent_id\":\"1184161\",\n     *                 \"@agent_state\":\"AVAILABLE\",\n     *                 \"@available\":\"true\",\n     *                 \"@first_name\":\"ross\",\n     *                 \"@last_name\":\"m\",\n     *                 \"@pending_disp\":\"false\",\n     *                 \"@state_duration\":\"84\",\n     *                 \"@username\":\"rm2\"\n     *             }\n     *         ]\n     *      }\n     *  }\n     */\n    DirectAgentTransferList.prototype.processResponse = function (response) {\n      var formattedResponse = utils.buildDefaultResponse(response);\n      formattedResponse.agents = utils.processResponseCollection(\n        response,\n        'ui_response',\n        'agents',\n      );\n\n      if (formattedResponse.status !== 'OK') {\n        // log message response\n        var message =\n          'There was an error processing the Direct Agent Transfer List request. ' +\n          formattedResponse.message +\n          ' : ' +\n          formattedResponse.detail;\n        utils.logMessage(LOG_LEVELS.WARN, message, response);\n      }\n\n      return formattedResponse;\n    };\n\n    var DispositionRequest = function (\n      uii,\n      dispId,\n      notes,\n      callback,\n      callbackDTS,\n      contactForwardNumber,\n      survey,\n      externId,\n      leadId,\n      requestId,\n    ) {\n      this.uii = uii;\n      this.dispId = dispId;\n      this.notes = notes;\n      this.callback = callback;\n      this.callbackDTS = callbackDTS || '';\n      this.contactForwardNumber = contactForwardNumber || null;\n      this.externId = externId || null; // outbound-disposition only\n      this.leadId = leadId || null; // outbound-disposition only\n      this.requestId = requestId || null; // outbound-disposition only (pipe leads)\n\n      /*\n       * survey = {\n       *      first_name: {\n       *          leadField: \"first_name\"\n       *          value: \"Geoff\"\n       *      },\n       *      last_name: {\n       *          leadField: \"last_name\"\n       *          value: \"Mina\"\n       *      }\n       *      ...\n       * }\n       */\n      this.survey = survey || null;\n    };\n\n    /*\n     * This class is responsible for creating an inbound or outbound disposition packet to\n     * send to intelliqueue. It will grab uii and agent_id directly from packets saved\n     * in the UIModel. Then, using the information passed in, it will\n     * create the remainder of the packet. This class is called from the ExtendedCallForm\n     *\n     * {\"ui_request\":{\n     *      \"@message_id\":\"IQ20160817145840132\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"OUTDIAL-DISPOSITION|INBOUND-DISPOSITION\",\n     *      \"session_id\":{\"#text\":\"2\"},  <-- ONLY WHEN AVAILABLE otherwise the node is left blank. this is the AGENT session_id\n     *      \"uii\":{\"#text\":\"201608171658440139000000000165\"},\n     *      \"agent_id\":{\"#text\":\"1180958\"},\n     *      \"lead_id\":{\"#text\":\"1800\"},                 <-- OUTDIAL-DISPOSITION ONLY\n     *      \"outbound_externid\":{\"#text\":\"3038593775\"}, <-- OUTDIAL-DISPOSITION ONLY\n     *      \"pending_request_id\":{\"#text\":\"\"},          <-- OUTDIAL-DISPOSITION ONLY\n     *      \"disposition_id\":{\"#text\":\"5950\"},\n     *      \"notes\":{\"#text\":\"note here\"},\n     *      \"call_back\":{\"#text\":\"FALSE\"},\n     *      \"call_back_DTS\":{},\n     *      \"contact_forwarding\":{},\n     *      \"survey\":{\n     *          \"response\":[\n     *              {\"@extern_id\":\"text_box\",\"@lead_update_column\":\"\",\"#text\":\"hello\"},\n     *              {\"@extern_id\":\"check_box\",\"@lead_update_column\":\"\",\"#text\":\"20\"},\n     *              {\"@extern_id\":\"radio_save\",\"@lead_update_column\":\"\",\"#text\":\"23\"}\n     *          ]\n     *      }\n     *   }\n     * }\n     */\n    DispositionRequest.prototype.formatJSON = function () {\n      var model = UIModel.getInstance();\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          '@type': MESSAGE_TYPES.OUTDIAL_DISPOSITION,\n          agent_id: {\n            '#text': utils.toString(model.agentSettings.agentId),\n          },\n          session_id: {\n            '#text': '',\n          },\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n          disposition_id: {\n            '#text': utils.toString(this.dispId),\n          },\n          notes: {\n            '#text': utils.toString(this.notes),\n          },\n          call_back: {\n            '#text': this.callback === true ? 'TRUE' : 'FALSE',\n          },\n          call_back_DTS: {\n            '#text': utils.toString(this.callbackDTS),\n          },\n          contact_forwarding: {\n            '#text': utils.toString(this.contactForwardNumber),\n          },\n          outbound_externid: {\n            '#text': utils.toString(this.externId),\n          },\n          lead_id: {\n            '#text': utils.toString(this.leadId),\n          },\n          pending_request_id: {\n            '#text': utils.toString(this.requestId),\n          },\n        },\n      };\n\n      if (\n        model.currentCall.outdialDispositions &&\n        model.currentCall.outdialDispositions.type === 'GATE'\n      ) {\n        msg.ui_request['@type'] = MESSAGE_TYPES.INBOUND_DISPOSITION;\n      }\n\n      if (model.currentCall.sessionId) {\n        msg.ui_request.session_id = { '#text': model.currentCall.sessionId };\n      }\n\n      /*\n       * converts survey to this response\n       * survey : {\n       *      response: [\n       *          { \"@extern_id\":\"\", \"@lead_update_column\":\"\", \"#text\":\"\" }\n       *      ]\n       * }\n       */\n      if (this.survey !== null) {\n        var response = [];\n        var keys = Object.keys(this.survey);\n        for (var i = 0; i < keys.length; i++) {\n          var key = keys[i];\n          var obj = {\n            '@extern_id': key,\n            '@lead_update_column': utils.toString(this.survey[key].leadField),\n            '#text': utils.toString(this.survey[key].value),\n          };\n          response.push(obj);\n        }\n        msg.ui_request.survey = { response: response };\n      }\n\n      return JSON.stringify(msg);\n    };\n\n    var DispositionManualPassRequest = function (\n      dispId,\n      notes,\n      callback,\n      callbackDTS,\n      leadId,\n      requestId,\n      externId,\n    ) {\n      this.dispId = dispId;\n      this.notes = notes;\n      this.callback = callback;\n      this.callbackDTS = callbackDTS || '';\n      this.leadId = leadId || null;\n      this.requestId = requestId || null;\n      this.externId = externId || null;\n    };\n\n    /*\n     * Sends an OUTDIAL-DISPOSITION request, just a separate class\n     * specifically for dispositions on manual pass.\n     *\n     * {\"ui_request\":{\n     *      \"@message_id\":\"UIV220089241119416\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"OUTDIAL-DISPOSITION\",\n     *      \"manual_disp\":{\"#text\":\"TRUE\"},\n     *      \"request_key\":{\"#text\":\"IQ10012016081719070100875\"},\n     *      \"session_id\":{},\n     *      \"uii\":{},\n     *      \"agent_id\":{\"#text\":\"1810\"},\n     *      \"lead_id\":{\"#text\":\"213215\"},\n     *      \"outbound_externid\":{\"#text\":\"909809\"},\n     *      \"disposition_id\":{\"#text\":\"126\"},\n     *      \"notes\":{\"#text\":\"here are my notes :)\"},\n     *      \"call_back\":{\"#text\":\"TRUE | FALSE\"},\n     *      \"call_back_DTS\":{\"#text\":\"2008-09-30 22:30:00 | null\"},\n     *      \"contact_forwarding\":{\"#text\":\"null\"}\n     *    }\n     * }\n     */\n    DispositionManualPassRequest.prototype.formatJSON = function () {\n      var model = UIModel.getInstance();\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          '@type': MESSAGE_TYPES.OUTDIAL_DISPOSITION,\n          manual_disp: {\n            '#text': 'TRUE',\n          },\n          agent_id: {\n            '#text': utils.toString(model.agentSettings.agentId),\n          },\n          request_key: {\n            '#text': utils.toString(this.requestId),\n          },\n          disposition_id: {\n            '#text': utils.toString(this.dispId),\n          },\n          notes: {\n            '#text': utils.toString(this.notes),\n          },\n          call_back: {\n            '#text': this.callback === true ? 'TRUE' : 'FALSE',\n          },\n          call_back_DTS: {\n            '#text': utils.toString(this.callbackDTS),\n          },\n          lead_id: {\n            '#text': utils.toString(this.leadId),\n          },\n          extern_id: {\n            '#text': utils.toString(this.externId),\n          },\n          contact_forwarding: {\n            '#text': 'null',\n          },\n          session_id: {},\n          uii: {},\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var ExtensionPresenceRequest = function () {};\n\n    ExtensionPresenceRequest.prototype.getExtensionPresenceInfo = function (\n      extensionIds,\n    ) {\n      UIModel.getInstance().ExtensionPresenceRequest = this;\n      _getExtensionPresenceInfo('rcdirectory/getExtensionPresenceStatus', {\n        extensionIds: extensionIds,\n      });\n    };\n\n    ExtensionPresenceRequest.prototype.processResponse = function (response) {\n      UIModel.getInstance().extensionPresenceResponse = response;\n      return UIModel.getInstance().extensionPresenceResponse;\n    };\n\n    function _getExtensionPresenceInfo(path, queryParams) {\n      var model = UIModel.getInstance();\n      var baseUrl = model.authHost + model.baseApiUri;\n      var engageAccessToken =\n        'Bearer ' +\n        utils.toString(\n          UIModel.getInstance().authenticateRequest.engageAccessToken,\n        );\n      var params = {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      };\n\n      params.headers['Authorization'] = engageAccessToken;\n      params['queryParams'] = queryParams;\n      var errorMsg =\n        'Error while fetching extension presence response. URL: ' +\n        baseUrl +\n        path;\n\n      new HttpService(baseUrl).httpGet(path, params).then(\n        function (response) {\n          try {\n            response = JSON.parse(response.response);\n            var extensionPresenceResponse = UIModel.getInstance().extensionPresenceRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(\n              UIModel.getInstance().libraryInstance,\n              CALLBACK_TYPES.EXTENSION_PRESENCE,\n              extensionPresenceResponse,\n            );\n          } catch (err) {\n            utils.logMessage(LOG_LEVELS.WARN, errorMsg, err);\n          }\n        },\n        function (err) {\n          var errResponse = {\n            type: 'Error while fetching extension presence response.',\n            message: errorMsg,\n          };\n          utils.logMessage(LOG_LEVELS.WARN, errorMsg, err);\n\n          // still fire callback on error response\n          utils.fireCallback(\n            UIModel.getInstance().libraryInstance,\n            CALLBACK_TYPES.EXTENSION_PRESENCE,\n            errResponse,\n          );\n        },\n      );\n    }\n\n    var HangupRequest = function (sessionId, resetPendingDisp) {\n      this.sessionId = sessionId || null;\n      this.resetPendingDisp = resetPendingDisp || false;\n    };\n\n    HangupRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.HANGUP,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': utils.toString(\n              UIModel.getInstance().agentSettings.agentId,\n            ),\n          },\n          uii: {\n            '#text': utils.toString(UIModel.getInstance().currentCall.uii),\n          },\n          session_id: {\n            '#text': utils.toString(\n              this.sessionId === null\n                ? UIModel.getInstance().currentCall.sessionId\n                : this.sessionId,\n            ),\n          },\n          cancel_pending_disp: {\n            '#text': this.resetPendingDisp === true ? 'TRUE' : 'FALSE',\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var HoldRequest = function (holdState, sessionId) {\n      this.holdState = holdState;\n      this.sessionId = sessionId || '1';\n    };\n\n    /*\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@message_id\":\"UI200809291036128\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"HOLD\",\n     *      \"agent_id\":{\"#text\":\"1856\"},\n     *      \"uii\":{\"#text\":\"200808291035510000000900029412\"},\n     *      \"session_id\":{\"#text\":\"1\"},\n     *      \"hold_state\":{\"#text\":\"ON\"}\n     *    }\n     * }\n     */\n    HoldRequest.prototype.formatJSON = function () {\n      var model = UIModel.getInstance();\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.HOLD,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(model.currentCall.agentId),\n          },\n          uii: {\n            '#text': utils.toString(model.currentCall.uii),\n          },\n          session_id: {\n            '#text': utils.toString(this.sessionId),\n          },\n          hold_state: {\n            '#text':\n              this.holdState === true || this.holdState === 'true'\n                ? 'ON'\n                : 'OFF',\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes HOLD packets rec'd from IQ.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008082910361503344\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"HOLD\",\n     *      \"uii\":{\"#text\":\"200808291035510000000900029412\"},\n     *      \"session_id\":{\"#text\":\"1\"},\n     *      \"status\":{\"#text\":\"OK\"},\n     *      \"message\":{},\n     *      \"detail\":{},\n     *      \"hold_state\":{\"#text\":\"ON\"}\n     *    }\n     * }\n     */\n    HoldRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n      var currUII = '';\n      if (UIModel.getInstance().currentCall.uii) {\n        currUII = UIModel.getInstance().currentCall.uii;\n      }\n\n      formattedResponse.holdState = utils.getText(resp, 'hold_state') === 'ON';\n      formattedResponse.sessionId = utils.getText(resp, 'session_id');\n      formattedResponse.uii = utils.getText(resp, 'uii');\n\n      if (formattedResponse.status === 'OK') {\n        // make sure we are talking about the same call\n        if (formattedResponse.uii === currUII) {\n          if (formattedResponse.message === '') {\n            formattedResponse.message =\n              'Broadcasting new hold state of ' + formattedResponse.holdState;\n          }\n          utils.logMessage(\n            LOG_LEVELS.DEBUG,\n            'Broadcasting new hold state of ' + formattedResponse.holdState,\n            response,\n          );\n        } else {\n          utils.logMessage(\n            LOG_LEVELS.DEBUG,\n            'Hold Response is for a different call...discarding',\n            response,\n          );\n        }\n      } else {\n        if (formattedResponse.message === '') {\n          formattedResponse.message =\n            'Error processing HOLD request. ' +\n            +formattedResponse.message +\n            '\\n' +\n            formattedResponse.detail;\n        }\n        utils.logMessage(\n          LOG_LEVELS.WARN,\n          'Error processing HOLD request. ' + formattedResponse.detail,\n          response,\n        );\n      }\n\n      var model = UIModel.getInstance();\n      if (\n        formattedResponse.sessionId !== '1' &&\n        model.transferSessions[formattedResponse.sessionId]\n      ) {\n        // we have a hold for a transfer session\n        model.transferSessions[formattedResponse.sessionId].onHold =\n          formattedResponse.holdState;\n      }\n\n      return formattedResponse;\n    };\n\n    var LeadHistoryRequest = function (leadId) {\n      this.leadId = leadId;\n    };\n\n    /*\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@message_id\":\"UI200809291036128\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"LEAD-HISTORY\",\n     *      \"agent_id\":{\"#text\":\"1\"},\n     *      \"lead_id\":{\"#text\":\"12\"},\n     *    }\n     * }\n     */\n    LeadHistoryRequest.prototype.formatJSON = function () {\n      var model = UIModel.getInstance();\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.LEAD_HISTORY,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(model.agentSettings.agentId),\n          },\n          lead_id: {\n            '#text': utils.toString(this.leadId),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes LEAD-HISTORY packets rec'd from IQ.\n     *\n     * {\"ui_response\":{\n     *      \"@lead_id\":\"2653\",\n     *      \"@message_id\":\"IQ982008091512353000875\",\n     *      \"@response_to\":\"UIV220089151235539\",\n     *      \"@type\":\"LEAD-HISTORY\",\n     *      \"previous_dial\":{\n     *          \"@agent_name\":\"mandy pants (mandy)\",\n     *          \"@duration\":\"\",\n     *          \"@pass_disposition\":\"\",\n     *          \"@pass_dts\":\"2008-09-15 12:35:27\",\n     *          \"@pass_number\":\"\",\n     *          \"@pass_uii\":\"200809151234140000000900021288\",\n     *          \"agent_notes\":{\"#text\":\"This person was incredibly nice and agreed to buy donuts. \"},\n     *          \"agent_disposition\":{\"#text\":\"Incomplete\"}\n     *      }\n     *   }\n     * }\n     *\n     * OR\n     *\n     * {\"ui_response\":{\n     *      \"@lead_id\":\"2653\",\n     *      \"@message_id\":\"IQ982008091512353000875\",\n     *      \"@response_to\":\"UIV220089151235539\",\n     *      \"@type\":\"LEAD-HISTORY\",\n     *      \"previous_dial\":[\n     *        {\n     *          \"@agent_name\":\"mandy pants (mandy)\",\n     *          \"@duration\":\"\",\n     *          \"@pass_disposition\":\"\",\n     *          \"@pass_dts\":\"2008-09-15 12:35:27\",\n     *          \"@pass_number\":\"\",\n     *          \"@pass_uii\":\"200809151234140000000900021288\",\n     *          \"agent_notes\":{\"#text\":\"This person was incredibly nice and agreed to buy donuts. \"},\n     *          \"agent_disposition\":{\"#text\":\"Incomplete\"}\n     *        },\n     *        {\n     *          \"@agent_name\":\"mandy pants (mandy)\",\n     *          \"@duration\":\"\",\n     *          \"@pass_disposition\":\"\",\n     *          \"@pass_dts\":\"2008-09-15 12:35:27\",\n     *          \"@pass_number\":\"\",\n     *          \"@pass_uii\":\"200809151234140000000900021288\",\n     *          \"agent_notes\":{\"#text\":\"This person was incredibly nice and agreed to buy donuts. \"},\n     *          \"agent_disposition\":{\"#text\":\"Incomplete\"}\n     *        }\n     *      ]\n     *   }\n     * }\n     */\n    LeadHistoryRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var histResponse = {\n        leadId: resp['@lead_id'],\n      };\n\n      var history = utils.processResponseCollection(\n        response,\n        'ui_response',\n        'previous_dial',\n      );\n\n      // always return array, even if only one item\n      if (!Array.isArray(history)) {\n        history = [history];\n      }\n      histResponse.leadHistory = history;\n\n      return histResponse;\n    };\n\n    var LeadInsertRequest = function (dataObj) {\n      // handle boolean value conversion\n      if (dataObj.agent_reserved && dataObj.agent_reserved === true) {\n        dataObj.agent_reserved = '1';\n      } else {\n        dataObj.agent_reserved = '0';\n      }\n\n      if (dataObj.dialable && dataObj.dialable === true) {\n        dataObj.dialable = '1';\n      } else {\n        dataObj.dialable = '0';\n      }\n\n      this.dataObj = dataObj;\n    };\n\n    /*\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@message_id\":\"UI200809291036128\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"LEAD-INSERT\",\n     *      \"agent_id\":{\"#text\":\"1\"},\n     *      \"campaign_id\":{\"#text\":\"\"},\n     *      \"lead_phone\":{\"#text\":\"\"},\n     *      \"dialable\":{\"#text\":\"\"},\n     *      \"agent_reserved\":{\"#text\":\"\"},\n     *      \"callback_dts\":{\"#text\":\"\"},\n     *      \"first_name\":{\"#text\":\"\"},\n     *      \"mid_name\":{\"#text\":\"\"},\n     *      \"last_name\":{\"#text\":\"\"},\n     *      \"suffix\":{\"#text\":\"\"},\n     *      \"title\":{\"#text\":\"\"},\n     *      \"address1\":{\"#text\":\"\"},\n     *      \"address2\":{\"#text\":\"\"},\n     *      \"city\":{\"#text\":\"\"},\n     *      \"state\":{\"#text\":\"\"},\n     *      \"zip\":{\"#text\":\"\"},\n     *      \"email\":{\"#text\":\"\"},\n     *      \"gateKeeper\":{\"#text\":\"\"},\n     *      \"aux_data1\":{\"#text\":\"\"},\n     *      \"aux_data2\":{\"#text\":\"\"},\n     *      \"aux_data3\":{\"#text\":\"\"},\n     *      \"aux_data4\":{\"#text\":\"\"},\n     *      \"aux_data5\":{\"#text\":\"\"},\n     *    }\n     * }\n     */\n    LeadInsertRequest.prototype.formatJSON = function () {\n      var model = UIModel.getInstance();\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.LEAD_INSERT,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(this.dataObj.agent_id),\n          },\n          campaign_id: {\n            '#text': utils.toString(this.dataObj.campaign_id),\n          },\n          lead_phone: {\n            '#text': utils.toString(this.dataObj.lead_phone),\n          },\n          dialable: {\n            '#text': utils.toString(this.dataObj.dialable),\n          },\n          agent_reserved: {\n            '#text': utils.toString(this.dataObj.agent_reserved),\n          },\n          call_back_dts: {\n            '#text': utils.toString(this.dataObj.callback_dts),\n          },\n          first_name: {\n            '#text': utils.toString(this.dataObj.first_name),\n          },\n          mid_name: {\n            '#text': utils.toString(this.dataObj.mid_name),\n          },\n          last_name: {\n            '#text': utils.toString(this.dataObj.last_name),\n          },\n          suffix: {\n            '#text': utils.toString(this.dataObj.suffix),\n          },\n          title: {\n            '#text': utils.toString(this.dataObj.title),\n          },\n          address1: {\n            '#text': utils.toString(this.dataObj.address1),\n          },\n          address2: {\n            '#text': utils.toString(this.dataObj.address2),\n          },\n          city: {\n            '#text': utils.toString(this.dataObj.city),\n          },\n          state: {\n            '#text': utils.toString(this.dataObj.state),\n          },\n          zip: {\n            '#text': utils.toString(this.dataObj.zip),\n          },\n          email: {\n            '#text': utils.toString(this.dataObj.email),\n          },\n          gate_keeper: {\n            '#text': utils.toString(this.dataObj.gate_keeper),\n          },\n          aux_data1: {\n            '#text': utils.toString(this.dataObj.aux_data1),\n          },\n          aux_data2: {\n            '#text': utils.toString(this.dataObj.aux_data2),\n          },\n          aux_data3: {\n            '#text': utils.toString(this.dataObj.aux_data3),\n          },\n          aux_data4: {\n            '#text': utils.toString(this.dataObj.aux_data4),\n          },\n          aux_data5: {\n            '#text': utils.toString(this.dataObj.aux_data5),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes LEAD-INSERT packets rec'd from IQ.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008091512353000875\",\n     *      \"@response_to\":\"UIV220089151235539\",\n     *      \"@type\":\"LEAD-INSERT\",\n     *      \"status\":{\"#text\":\"TRUE|FALSE\"},\n     *      \"msg\":{\"#text\":\"\"},\n     *      \"detail\":{\"#text\":\"\"},\n     *   }\n     * }\n     */\n    LeadInsertRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      formattedResponse.message = resp.msg['#text'];\n\n      return formattedResponse;\n    };\n\n    var LeadUpdateRequest = function (leadId, leadPhone, baggage) {\n      this.leadId = leadId;\n      this.leadPhone = leadPhone;\n      this.baggage = baggage;\n      this.agentId = utils.toString(\n        UIModel.getInstance().agentSettings.agentId,\n      );\n    };\n\n    /*\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@message_id\":\"UI200809291036128\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"LEAD-UPDATE\",\n     *      \"agent_id\":{\"#text\":\"1\"},\n     *      \"lead_id\":{\"#text\":\"12\"},\n     *      \"lead_phone\":{\"#text\":\"12\"},\n     *       \"baggage\":{\n     *          \"lead_id\":{\"#text\":\"64306\"},\n     *          \"extern_id\":{\"#text\":\"9548298548\"},\n     *          \"first_name\":{\"#text\":\"Ryant\"},\n     *          \"mid_name\":{},\n     *          \"last_name\":{\"#text\":\"Taylor\"},\n     *          \"state\":{\"#text\":\"OH\"},\n     *          \"aux_data1\":{\"#text\":\"BMAK\"},\n     *          \"aux_data2\":{\"#text\":\"BMAK-041653-934\"},\n     *          \"aux_data3\":{\"#text\":\"Call Ctr 1\"},\n     *          \"aux_data4\":{},\n     *          \"aux_data5\":{},\n     *          \"address1\":{\"#text\":\"8010 Maryland Ave\"},\n     *          \"address2\":{},\n     *          \"city\":{\"#text\":\"Cleveland\"},\n     *          \"zip\":{\"#text\":\"44105\"},\n     *          \"aux_external_url\":{},\n     *          \"aux_greeting\":{},\n     *          \"aux_phone\":{}\n     *      },\n     *    }\n     * }\n     */\n    LeadUpdateRequest.prototype.formatJSON = function () {\n      // make sure required baggage fields are present\n      this.baggage = _formatBaggage(this.baggage);\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.LEAD_UPDATE,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': this.agentId,\n          },\n          lead_id: {\n            '#text': utils.toString(this.leadId),\n          },\n          lead_phone: {\n            '#text': utils.toString(this.leadPhone),\n          },\n          baggage: this.baggage,\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes LEAD-UPDATE packets rec'd from IQ.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008091512353000875\",\n     *      \"@response_to\":\"UIV220089151235539\",\n     *      \"@type\":\"LEAD-UPDATE\",\n     *      \"status\":{\"#text\":\"TRUE|FALSE\"},\n     *      \"msg\":{\"#text\":\"64306\"},\n     *      \"detail\":{\"#text\":\"64306\"},\n     *   }\n     * }\n     */\n    LeadUpdateRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      formattedResponse.message = resp.msg['#text'];\n\n      return formattedResponse;\n    };\n\n    var _formatBaggage = function (baggage) {\n      var bag = {};\n      bag.first_name = { '#text': baggage.first_name || '' };\n      bag.mid_name = { '#text': baggage.mid_name || '' };\n      bag.last_name = { '#text': baggage.last_name || '' };\n      bag.suffix = { '#text': baggage.suffix || '' };\n      bag.title = { '#text': baggage.title || '' };\n      bag.address1 = { '#text': baggage.address1 || '' };\n      bag.address2 = { '#text': baggage.address2 || '' };\n      bag.city = { '#text': baggage.city || '' };\n      bag.state = { '#text': baggage.state || '' };\n      bag.zip = { '#text': baggage.zip || '' };\n      bag.email = { '#text': baggage.email || '' };\n      bag.gate_keeper = { '#text': baggage.gate_keeper || '' };\n      bag.extern_id = { '#text': baggage.extern_id || '' };\n      bag.aux_data1 = { '#text': baggage.aux_data1 || '' };\n      bag.aux_data2 = { '#text': baggage.aux_data2 || '' };\n      bag.aux_data3 = { '#text': baggage.aux_data3 || '' };\n      bag.aux_data4 = { '#text': baggage.aux_data4 || '' };\n      bag.aux_data5 = { '#text': baggage.aux_data5 || '' };\n\n      return bag;\n    };\n\n    var LoginRequest = function (\n      dialDest,\n      queueIds,\n      chatIds,\n      skillProfileId,\n      dialGroupId,\n      updateFromAdminUI,\n      isForce,\n    ) {\n      this.queueIds = queueIds || [];\n      this.chatIds = chatIds || [];\n      this.skillProfileId = skillProfileId || '';\n      this.dialGroupId = dialGroupId || '';\n      this.dialDest = dialDest || '';\n      this.updateFromAdminUI = updateFromAdminUI || false;\n      this.loginType = 'NO-SELECTION';\n      this.updateLogin = false;\n      this.isForce = isForce;\n\n      // Remove any ids agent doesn't have access to\n      var model = UIModel.getInstance();\n      this.queueIds = utils.checkExistingIds(\n        model.inboundSettings.availableQueues,\n        this.queueIds,\n        'gateId',\n      );\n      this.chatIds = utils.checkExistingIds(\n        model.chatSettings.availableChatQueues,\n        this.chatIds,\n        'chatQueueId',\n      );\n      this.skillProfileId =\n        utils.checkExistingIds(\n          model.inboundSettings.availableSkillProfiles,\n          [this.skillProfileId],\n          'profileId',\n        )[0] || '';\n      this.dialGroupId =\n        utils.checkExistingIds(\n          model.outboundSettings.availableOutdialGroups,\n          [this.dialGroupId],\n          'dialGroupId',\n        )[0] || '';\n\n      // Set loginType value\n      if (this.queueIds.length > 0 && this.dialGroupId !== '') {\n        this.loginType = 'BLENDED';\n      } else if (this.queueIds.length > 0) {\n        this.loginType = 'INBOUND';\n      } else if (this.dialGroupId !== '') {\n        this.loginType = 'OUTBOUND';\n      } else if (this.chatIds.length > 0) {\n        this.loginType = 'CHAT';\n      } else {\n        this.loginType = 'NO-SELECTION';\n      }\n\n      // set updateLogin value\n      if (model.agentSettings.isLoggedIn) {\n        this.updateLogin = true;\n        this.dialDest = UIModel.getInstance().agentSettings.dialDest;\n      }\n\n      // validate dialDest is sip or 10-digit num\n      if (!utils.validateDest(this.dialDest)) {\n        utils.logMessage(\n          LOG_LEVELS.WARN,\n          'dialDest [' +\n            this.dialDest +\n            '] must be a valid sip or 10-digit DID',\n          '',\n        );\n      }\n    };\n\n    LoginRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.LOGIN,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': utils.toString(\n              UIModel.getInstance().agentSettings.agentId,\n            ),\n          },\n          access_token: {\n            '#text': UIModel.getInstance().authenticateRequest.accessToken,\n          },\n          hash_code: {\n            '#text': UIModel.getInstance().connectionSettings.hashCode,\n          },\n          allow_multisocket: {\n            '#text': utils.toString(\n              UIModel.getInstance().applicationSettings.allowMultiSocket,\n            ),\n          },\n          dial_dest: {\n            '#text': utils.toString(this.dialDest),\n          },\n          login_type: {\n            '#text': this.loginType,\n          },\n          update_login: {\n            '#text': utils.toString(this.updateLogin),\n          },\n          outdial_group_id: {\n            '#text': utils.toString(this.dialGroupId),\n          },\n          skill_profile_id: {\n            '#text': utils.toString(this.skillProfileId),\n          },\n          update_from_adminui: {\n            '#text': utils.toString(this.updateFromAdminUI),\n          },\n          agent_platform_id: {\n            '#text': utils.toString(2), // Hard-coded platformId for agent-js repo\n          },\n          is_force: {\n            '#text': utils.toString(this.isForce),\n          },\n        },\n      };\n\n      // add arrays\n      var queueIds = [];\n      for (var i = 0; i < this.queueIds.length; i++) {\n        if (this.queueIds[i] !== '') {\n          queueIds.push({ '#text': utils.toString(this.queueIds[i]) });\n        }\n      }\n      if (queueIds.length > 0) {\n        msg.ui_request.gates = { gate_id: queueIds };\n      } else {\n        msg.ui_request.gates = {};\n      }\n\n      var chatIds = [];\n      for (var i = 0; i < this.chatIds.length; i++) {\n        if (this.chatIds[i] !== '') {\n          chatIds.push({ '#text': utils.toString(this.chatIds[i]) });\n        }\n      }\n      if (chatIds.length > 0) {\n        msg.ui_request.chat_queues = { chat_queue_id: chatIds };\n      } else {\n        msg.ui_request.chat_queues = {};\n      }\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This function is responsible for handling the response to Login from IntelliQueue.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ10012016082513212000447\",\n     *      \"@response_to\":\"IQ201608251121200\",\n     *      \"@type\":\"LOGIN\",\n     *      \"agent_id\":{\"#text\":\"1\"},\n     *      \"status\":{\"#text\":\"SUCCESS\"},\n     *      \"message\":{\"#text\":\"Hello Geoffrey Mina!\"},\n     *      \"detail\":{\"#text\":\"Logon request processed successfully!\"},\n     *      \"hash_code\":{\"#text\":\"404946966\"},\n     *      \"login_type\":{\"#text\":\"BLENDED\"},\n     *      \"outdial_group_id\":{\"#text\":\"50692\"},\n     *      \"skill_profile_id\":{\"#text\":\"1513\"},\n     *      \"gates\":{\n     *          \"gate_id\":[\n     *              {\"#text\":\"11116\"},\n     *              {\"#text\":\"11117\"}\n     *          ]\n     *      },\n     *      \"chat_queues\":{\n     *          \"chat_queue_id\":{\"#text\":\"30\"}\n     *      }\n     *    }\n     * }\n     */\n    LoginRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var status = utils.getText(resp, 'status');\n      var detail = utils.getText(resp, 'detail');\n      var model = UIModel.getInstance();\n      var message = '';\n      var formattedResponse = utils.buildDefaultResponse(response);\n      var Lib = UIModel.getInstance().libraryInstance;\n      var isReconnect = false;\n\n      if (detail === 'Logon Session Configuration Updated!') {\n        // this is an update login packet\n        model.agentSettings.updateLoginMode = true;\n\n        message = 'Logon Session Configuration Updated!';\n        utils.logMessage(LOG_LEVELS.INFO, message, response);\n      }\n\n      if (status === 'SUCCESS') {\n        if (!model.agentSettings.isLoggedIn) {\n          // fresh login, set UI Model properties\n          model.loginPacket = response;\n          model.agentSettings.isLoggedIn = true;\n          model.agentSettings.loginDTS = new Date();\n          model.connectionSettings.reconnect = true;\n          model.agentPermissions.allowLeadSearch = false;\n          model.agentSettings.dialDest = utils.getText(resp, 'dial_dest');\n          model.agentSettings.loginType = utils.getText(resp, 'login_type');\n          model.agentSettings.accountId = utils.getText(resp, 'account_id');\n          model.agentSettings.corporateDirectory = utils.getText(\n            resp,\n            'corporate_dir',\n          );\n          model.agentSettings.consultCall = utils.getText(\n            resp,\n            'is_consultcall',\n          );\n\n          model.connectionSettings.isMultiSocket =\n            utils.getText(resp, 'is_multisocket') === 'true';\n\n          // If we allow multisocket, lets setup a listener for other tabs to request data\n          if (\n            model.applicationSettings.allowMultiSocket === true ||\n            model.connectionSettings.isMultiSocket === true\n          ) {\n            broadcastChannelHelper.init();\n          }\n\n          // Set collection values\n          setDialGroupSettings(response);\n          setGateSettings(response);\n          setChatQueueSettings(response);\n          setSkillProfileSettings(response);\n        } else {\n          if (model.agentSettings.updateLoginMode) {\n            model.agentSettings.dialDest = utils.getText(resp, 'dial_dest');\n            model.agentSettings.loginType = utils.getText(resp, 'login_type');\n            model.agentSettings.accountId = utils.getText(resp, 'account_id');\n\n            // This was an update login request\n            model.agentSettings.updateLoginMode = false;\n\n            // reset to false before updating dial group settings\n            model.agentPermissions.allowLeadSearch = false;\n            model.agentPermissions.requireFetchedLeadsCalled = false;\n            model.agentPermissions.allowPreviewLeadFilters = false;\n\n            // Set collection values\n            setDialGroupSettings(response);\n            setGateSettings(response);\n            setChatQueueSettings(response);\n            setSkillProfileSettings(response);\n          } else {\n            // this was a reconnect\n            isReconnect = true;\n            message = 'Processed a Layer 2 Reconnect Successfully';\n\n            model.agentSettings.onCall = utils.getText(resp, 'is_on_call');\n            model.connectionSettings.activeCallUii = utils.getText(\n              resp,\n              'active_call_uii',\n            );\n            model.connectionSettings.isPendingDisp = utils.getText(\n              resp,\n              'is_pending_disp',\n            );\n\n            if (model.agentSettings.onCall === false) {\n              if (model.currentCall.uii) {\n                var mockEndCallPacket = {\n                  ui_notification: {\n                    '@message_id': '',\n                    '@type': 'END-CALL',\n                    uii: { '#text': model.currentCall.uii },\n                    term_reason: { '#text': 'SOCKET-DISCONNECT' },\n                  },\n                };\n\n                utils.processNotification(Lib, mockEndCallPacket);\n              }\n\n              if (model.agentSettings.isOffhook) {\n                var offHookTermPacket = {\n                  ui_notification: {\n                    agent_id: {\n                      '#text': UIModel.getInstance().agentSettings.agentId,\n                    },\n                    '@type': 'OFF-HOOK-TERM',\n                    '@message_id': '',\n                  },\n                };\n\n                var agentProcessOffhookCallback = utils.processNotification(\n                  Lib,\n                  offHookTermPacket,\n                );\n                Lib.offhookTerm(agentProcessOffhookCallback);\n              }\n            } else if (\n              model.agentSettings.onCall &&\n              (model.currentCall.uii !==\n                model.connectionSettings.activeCallUii ||\n                Lib.waitingForAddSession === true)\n            ) {\n              //if the agent does not know it is on a call, but IQ thinks it is on a call\n              //normally in the case of disconnect during transition\n\n              model.currentCall.uii = model.connectionSettings.activeCallUii;\n              model.currentCall.pendingDisp = false;\n              Lib.hangup(1, true);\n            } else {\n              //agent still is on call and there are transferSessions, verify no transferSession were drop\n              var activeAgentUiSessions = Lib.getTransferSessions();\n              var activeAgentSessions = response.ui_response.active_call_sessions.call_session_id.map(\n                function (sessionObj) {\n                  return sessionObj['#text'];\n                },\n              );\n\n              for (var transferSession in activeAgentUiSessions) {\n                if (activeAgentSessions.indexOf(transferSession) === -1) {\n                  //if the active ui session is no longer active, we need to tell the ui\n                  delete UIModel.getInstance().transferSessions[\n                    transferSession\n                  ];\n                }\n              }\n            }\n\n            utils.logMessage(LOG_LEVELS.INFO, message, response);\n          }\n        }\n\n        // always update guid and agent login hashcode if found\n        model.connectionSettings.hashCode =\n          utils.getText(resp, 'hash_code') || model.connectionSettings.hashCode;\n        model.agentSettings.guid =\n          utils.getText(resp, 'guid') || model.agentSettings.guid;\n        model.dataStore.save('agent_id', utils.getText(resp, 'agent_id'));\n        model.dataStore.save('hash_code', utils.getText(resp, 'hash_code'));\n\n        formattedResponse.agentSettings = model.agentSettings;\n        formattedResponse.agentPermissions = model.agentPermissions;\n        formattedResponse.applicationSettings = model.applicationSettings;\n        formattedResponse.chatSettings = model.chatSettings;\n        formattedResponse.connectionSettings = model.connectionSettings;\n        formattedResponse.inboundSettings = model.inboundSettings;\n        formattedResponse.outboundSettings = model.outboundSettings;\n        formattedResponse.scriptSettings = model.scriptSettings;\n        formattedResponse.isReconnect = isReconnect;\n      } else {\n        // Login failed\n        if (formattedResponse.message === '') {\n          formattedResponse.message =\n            'Agent configuration attempt failed (2nd layer login)';\n        }\n        utils.logMessage(LOG_LEVELS.WARN, formattedResponse.message, response);\n      }\n\n      return formattedResponse;\n    };\n\n    function setDialGroupSettings(response) {\n      var model = UIModel.getInstance();\n      var outdialGroups = model.outboundSettings.availableOutdialGroups;\n      model.outboundSettings.outdialGroup = {}; // reset\n      for (var g = 0; g < outdialGroups.length; g++) {\n        var group = outdialGroups[g];\n        if (\n          group.dialGroupId === response.ui_response.outdial_group_id['#text']\n        ) {\n          model.agentPermissions.allowLeadSearch = group.allowLeadSearch;\n          model.agentPermissions.allowPreviewLeadFilters =\n            group.allowPreviewLeadFilters;\n          model.agentPermissions.progressiveEnabled = group.progressiveEnabled;\n          model.outboundSettings.outdialGroup = JSON.parse(\n            JSON.stringify(group),\n          ); // copy object\n\n          // Only used for Preview or TCPA Safe accounts.\n          // If set to true, only allow fetching new leads when current leads are called or expired\n          model.agentPermissions.requireFetchedLeadsCalled =\n            group.requireFetchedLeadsCalled;\n        }\n      }\n    }\n\n    function setSkillProfileSettings(response) {\n      var model = UIModel.getInstance();\n      model.inboundSettings.skillProfile = {};\n      var skillProfiles = model.inboundSettings.availableSkillProfiles;\n      for (var s = 0; s < skillProfiles.length; s++) {\n        var profile = skillProfiles[s];\n        var responseId = utils.getText(\n          response.ui_response,\n          'skill_profile_id',\n        );\n        if (profile.profileId === responseId) {\n          model.inboundSettings.skillProfile = JSON.parse(\n            JSON.stringify(profile),\n          ); // copy object\n        }\n      }\n    }\n\n    function setGateSettings(response) {\n      var model = UIModel.getInstance();\n      var gates = model.inboundSettings.availableQueues;\n      var selectedGateIds = [];\n      var selectedGates = [];\n      var gateIds = response.ui_response.gates.gate_id || [];\n\n      if (!Array.isArray(gateIds)) {\n        gateIds = [gateIds];\n      }\n\n      for (var s = 0; s < gateIds.length; s++) {\n        var obj = gateIds[s];\n        selectedGateIds.push(obj['#text']);\n      }\n\n      for (var gIdx = 0; gIdx < gates.length; gIdx++) {\n        var gate = gates[gIdx];\n        if (selectedGateIds.indexOf(gate.gateId) > -1) {\n          selectedGates.push(gate);\n        }\n      }\n\n      model.inboundSettings.queues = JSON.parse(JSON.stringify(selectedGates)); // copy array\n    }\n\n    function setChatQueueSettings(response) {\n      var model = UIModel.getInstance();\n      var chatQueues = model.chatSettings.availableChatQueues;\n      var selectedChatQueueIds = [];\n      var selectedChatQueues = [];\n      var cQueues = response.ui_response.chat_queues || {};\n      var chatQueueIds = cQueues.chat_queue_id || [];\n\n      if (!Array.isArray(chatQueueIds)) {\n        chatQueueIds = [chatQueueIds];\n      }\n\n      for (var c = 0; c < chatQueueIds.length; c++) {\n        var obj = chatQueueIds[c];\n        selectedChatQueueIds.push(obj['#text']);\n      }\n\n      for (var cIdx = 0; cIdx < chatQueues.length; cIdx++) {\n        var chatQueue = chatQueues[cIdx];\n        if (selectedChatQueueIds.indexOf(chatQueue.chatQueueId) > -1) {\n          selectedChatQueues.push(chatQueue);\n        }\n      }\n\n      model.chatSettings.chatQueues = JSON.parse(\n        JSON.stringify(selectedChatQueues),\n      ); // copy array\n    }\n\n    var LoginPhase1Request = function () {};\n\n    LoginPhase1Request.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.LOGIN_PHASE_1,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          reconnect: {\n            '#text': utils.toString(\n              UIModel.getInstance().connectionSettings.reconnect,\n            ),\n          },\n          agent_id: {\n            '#text': utils.toString(\n              UIModel.getInstance().agentSettings.agentId,\n            ),\n          },\n          access_token: {\n            '#text': utils.toString(\n              UIModel.getInstance().authenticateRequest.accessToken,\n            ),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This function is responsible for handling the login packet received from IntelliServices. It will save\n     * a copy of it in the UIModel as loginPacket, as well as set the isLoggedInIS variable to\n     * true (for reconnect purposes) and the loginDTS with the current date/time.\n     *\n     * {\"ui_response\":{\n     *      \"@type\":\"login\",\n     *      \"status\":{\"#text\":\"OK\"},\n     *      \"is_sso:{\"#text\":\"TRUE\"|\"FALSE\"},\n     *      \"agent_id\":{\"#text\":\"1810\"},\n     *      \"agent_pwd\":{\"#text\":\"bound25\"},\n     *      \"first_name\":{\"#text\":\"mandy\"},\n     *      \"last_name\":{\"#text\":\"pants\"},\n     *      \"email\":{\"#text\":\"mandypants@aol.coim\"},\n     *      \"agent_type\":{\"#text\":\"AGENT\"},\n     *      \"external_agent_id\":{\"#text\":\"blahblah\"},\n     *      \"default_login_dest\":{\"#text\":\"9548298548|123\"},\n     *      \"alt_default_login_dest\":{\"#text\":\"9548298548|123\"},\n     *      \"iq_url\":{\"#text\":\"dev.connectfirst.com\"},\n     *      \"iq_port\":{\"#text\":\"1313\"},\n     *      \"iq_ssl_port\":{\"#text\":\"1213\"},\n     *      \"iq_secret_key\":{\"#text\":\"F-OFF\"},\n     *      \"enable_call_contact_history\":{\"#text\":\"TRUE\"|\"FALSE\"},\n     *      \"allow_inbound\":{\"#text\":\"1\"},\n     *      \"allow_outbound\":{\"#text\":\"1\"},\n     *      \"allow_chat\":{\"#text\":\"1\"},\n     *      \"allow_blended\":{\"#text\":\"0\"},\n     *      \"allow_off_hook\":{\"#text\":\"1\"},\n     *      \"allow_call_control\":{\"#text\":\"1\"},\n     *      \"allow_login_control\":{\"#text\":\"1\"},\n     *      \"allow_login_updates\":{\"#text\":\"1\"},\n     *      \"allow_lead_inserts\":{\"#text\":\"1\"},\n     *      \"show_lead_history\":{\"#text\":\"1\"},\n     *      \"allow_cross_gate_requeue\":{\"#text\":\"1\"},\n     *      \"phone_login_dial_group\":{\"#text\":\"44\"},\n     *      \"phone_login_pin\":{\"#text\":\"1234\"},\n     *      \"allow_manual_calls\":{\"#text\":\"1\"},\n     *      \"allow_manual_intl_calls\":{\"#text\":\"0\"},\n     *      \"init_login_state\":{\"#text\":\"ON-BREAK\"},\n     *      \"init_login_state_label\":{\"#text\":\"Morning Break\"},\n     *      \"outbound_prepay\":{\"#text\":\"0\"},\n     *      \"max_break_time\":{\"#text\":\"-1\"},\n     *      \"max_lunch_time\":{\"#text\":\"-1\"},\n     *      \"allow_lead_search\":{\"#text\":\"YES_ALL\"},\n     *      \"tcpa_safe_mode\":{\"#text\":\"1|0\"},\n     *      \"pci_enabled\":{\"#text\":\"1|0\"},\n     *      \"login_gates\":{\n     *          \"gate\":[\n     *              {\"@default_dest_override\":\"\",\"@gate_desc\":\"\",\"@gate_id\":\"37\",\"@gate_name\":\"test\"},\n     *              {\"@default_dest_override\":\"\",\"@gate_desc\":\"\",\"@gate_id\":\"42\",\"@gate_name\":\"test gate two\"},\n     *              {\"@default_dest_override\":\"\",\"@gate_desc\":\"\",\"@gate_id\":\"43\",\"@gate_name\":\"test gate three\"},\n     *              {\"@default_dest_override\":\"\",\"@gate_desc\":\"Amandas Other Gate\",\"@gate_id\":\"46\",\"@gate_name\":\"You know it!\"}\n     *          ]\n     *      },\n     *      \"login_chat_queues\":{\n     *          \"chat_queue\":[\n     *              {\"@chat_queue_description\":\"\",\"@chat_queue_id\":\"\",\"@chat_queue_name\":\"\"},\n     *              {\"@chat_queue_description\":\"\",\"@chat_queue_id\":\"\",\"@chat_queue_name\":\"\"}\n     *          ]\n     *      },\n     *      \"outdial_groups\":{\n     *          \"group\":[\n     *              {\"@billing_key\":\"\",\"@dial_group_desc\":\"\",\"@dial_group_id\":\"44\",\"@dial_group_name\":\"Geoff Dial Test\",\"@dial_mode\":\"PREDICTIVE\"},\n     *              {\"@billing_key\":\"2\",\"@dial_group_desc\":\"AutoDial Configured Dial Group\",\"@dial_group_id\":\"46\",\"@dial_group_name\":\"Phone Only test5\",\"@dial_mode\":\"PREDICTIVE\"},\n     *              {\"@billing_key\":\"\",\"@dial_group_desc\":\"Test\",\"@dial_group_id\":\"200000\",\"@dial_group_name\":\"Test\",\"@dial_mode\":\"PREDICTIVE\"},\n     *              {\"@billing_key\":\"\",\"@dial_group_desc\":\"Test\",\"@dial_group_id\":\"200010\",\"@dial_group_name\":\"Carissa's Test Group\",\"@dial_mode\":\"PREDICTIVE\"}\n     *          ]\n     *      },\"skill_profiles\":{\n     *          \"profile\":[\n     *              {\"@profile_desc\":\"\",\"@profile_id\":\"571\",\"@profile_name\":\"skill1\"},\n     *              {\"@profile_desc\":\"\",\"@profile_id\":\"572\",\"@profile_name\":\"skill2\"}\n     *          ]\n     *      },\n     *      \"requeue_gates\":{\n     *          \"gate_group\":[\n     *              {\n     *                  \"@gate_group_id\":\"18\",\n     *                  \"@group_name\":\"new gate group\",\n     *                  \"gates\":{\n     *                      \"gate\":[\n     *                          {\"@gate_desc\":\"\",\"@gate_id\":\"37\",\"@gate_name\":\"test\"},\n     *                          {\"@gate_desc\":\"\",\"@gate_id\":\"43\",\"@gate_name\":\"test gate three\"},\n     *                          {\"@gate_desc\":\"\",\"@gate_id\":\"42\",\"@gate_name\":\"test gate two\"}\n     *                      ]\n     *                  },\n     *                  \"skills\":{\n     *                      \"skill\":[\n     *                          {\"@skill_desc\":\"\",\"@skill_id\":\"58\",\"@skill_name\":\"one\"},\n     *                          {\"@skill_desc\":\"\",\"@skill_id\":\"59\",\"@skill_name\":\"two\"},\n     *                      ]\n     *                  }\n     *              }\n     *          ]\n     *      },\n     *      \"chat_rooms\":{},\n     *      \"scripts\": {\n     *           \"script\": {\n     *               \"@script_id\": \"15\",\n     *               \"@script_name\": \"Don't Read This Script\"\n     *           }\n     *      },\n     *      \"campaigns\": {\n     *          \"campaign\": {\n     *              \"@allow_lead_updates\": \"\",\n     *              \"@campaign_id\": \"\",\n     *              \"@campaign_name\": \"\",\n     *              \"@survey_id\": \"\",\n     *              \"@survey_name\": \"\",\n     *              \"custom_labels\": {\n     *                  \"@aux_1_label\": \"\",\n     *                  \"@aux_2_label\": \"\",\n     *                  \"@aux_3_label\": \"\",\n     *                  \"@aux_4_label\": \"\",\n     *                  \"@aux_5_label\": \"\"\n     *              },\n     *              \"generic_key_value_pairs\": {}\n     *          }\n     *      },\n     *      \"account_countries\":{\n     *          \"country\":[\n     *              {\"@country_id\":\"BRA\"},{\"@country_id\":\"FRA\"},{\"@country_id\":\"GER\"}\n     *          ]\n     *      }\n     *   }\n     * }\n     */\n    LoginPhase1Request.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var status = utils.getText(resp, 'status');\n      var model = UIModel.getInstance();\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      if (status === 'OK') {\n        if (!model.applicationSettings.isLoggedInIS) {\n          // save login packet properties to UIModel\n          model.loginPhase1Packet = response;\n          model.applicationSettings.isLoggedInIS = true;\n          model.applicationSettings.isSso = utils.getText(resp, 'is_sso');\n          model.applicationSettings.isFlr = utils.getText(resp, 'is_flr');\n          model.applicationSettings.isTcpaSafeMode =\n            utils.getText(resp, 'tcpa_safe_mode') === '1';\n          model.applicationSettings.pciEnabled =\n            utils.getText(resp, 'pci_enabled') === '1';\n          model.applicationSettings.enableCallContactHistory = utils.getText(\n            resp,\n            'enable_call_contact_history',\n          );\n          model.chatSettings.alias =\n            utils.getText(resp, 'first_name') +\n            ' ' +\n            utils.getText(resp, 'last_name');\n\n          model.agentSettings.loginDTS = new Date();\n          model.agentSettings.maxBreakTime = utils.getText(\n            resp,\n            'max_break_time',\n          );\n          model.agentSettings.maxLunchTime = utils.getText(\n            resp,\n            'max_lunch_time',\n          );\n          model.agentSettings.firstName = utils.getText(resp, 'first_name');\n          model.agentSettings.lastName = utils.getText(resp, 'last_name');\n          model.agentSettings.email = utils.getText(resp, 'email');\n          model.agentSettings.agentId = utils.getText(resp, 'agent_id');\n          model.agentSettings.externalAgentId = utils.getText(\n            resp,\n            'external_agent_id',\n          );\n          model.agentSettings.agentType = utils.getText(resp, 'agent_type');\n          model.agentSettings.realAgentType = utils.getText(\n            resp,\n            'real_agent_type',\n          );\n          model.agentSettings.defaultLoginDest = utils.getText(\n            resp,\n            'default_login_dest',\n          );\n          model.agentSettings.altDefaultLoginDest = utils.getText(\n            resp,\n            'alt_default_login_dest',\n          );\n          model.agentSettings.initLoginState = utils.getText(\n            resp,\n            'init_login_state',\n          );\n          model.agentSettings.initLoginStateLabel = utils.getText(\n            resp,\n            'init_login_state_label',\n          );\n          model.agentSettings.outboundManualDefaultRingtime = utils.getText(\n            resp,\n            'outbound_manual_default_ringtime',\n          );\n          model.agentSettings.isOutboundPrepay =\n            utils.getText(resp, 'outbound_prepay') === '1';\n          model.agentSettings.phoneLoginPin = utils.getText(\n            resp,\n            'phone_login_pin',\n          );\n          model.agentSettings.username = utils.getText(resp, 'username');\n          model.agentSettings.agentPassword = utils.getText(resp, 'agent_pwd');\n\n          model.agentPermissions.allowCallControl =\n            utils.getText(resp, 'allow_call_control') === '1';\n          model.agentPermissions.allowChat =\n            utils.getText(resp, 'allow_chat') === '1'; //Agent permission\n          model.agentPermissions.enableChat =\n            utils.getText(resp, 'enable_chat') === '1'; //Account permission\n          model.agentPermissions.showLeadHistory =\n            utils.getText(resp, 'show_lead_history') === '1';\n          model.agentPermissions.allowManualOutboundGates =\n            utils.getText(resp, 'allow_manual_outbound_gates') === '1';\n          model.agentPermissions.allowOffHook =\n            utils.getText(resp, 'allow_off_hook') === '1';\n          model.agentPermissions.allowManualCalls =\n            utils.getText(resp, 'allow_manual_calls') === '1';\n          model.agentPermissions.allowManualPass =\n            utils.getText(resp, 'allow_manual_pass') === '1';\n          model.agentPermissions.allowManualIntlCalls =\n            utils.getText(resp, 'allow_manual_intl_calls') === '1';\n          model.agentPermissions.allowLoginUpdates =\n            utils.getText(resp, 'allow_login_updates') === '1';\n          model.agentPermissions.allowInbound =\n            utils.getText(resp, 'allow_inbound') === '1';\n          model.agentPermissions.allowOutbound =\n            utils.getText(resp, 'allow_outbound') === '1';\n          model.agentPermissions.allowBlended =\n            utils.getText(resp, 'allow_blended') === '1';\n          model.agentPermissions.allowLoginControl =\n            utils.getText(resp, 'allow_login_control') === '1';\n          model.agentPermissions.allowCrossQueueRequeue =\n            utils.getText(resp, 'allow_cross_gate_requeue') === '1';\n          model.agentPermissions.disableSupervisorMonitoring =\n            utils.getText(resp, 'disable_supervisor_monitoring') === '1';\n          model.agentPermissions.allowAutoAnswer =\n            utils.getText(resp, 'allow_auto_answer') === '1';\n          model.agentPermissions.defaultAutoAnswerOn =\n            utils.getText(resp, 'default_auto_answer_on') === '1';\n          model.agentPermissions.allowHistoricalDialing =\n            utils.getText(resp, 'allow_historical_dialing') === '1';\n          model.agentPermissions.allowAgentStats =\n            utils.getText(resp, 'allow_agent_stats') === '1';\n          model.agentPermissions.allowCampaignStats =\n            utils.getText(resp, 'allow_camp_stats') === '1';\n          model.agentPermissions.allowGateStats =\n            utils.getText(resp, 'allow_gate_stats') === '1';\n          model.agentPermissions.allowChatStats =\n            utils.getText(resp, 'allow_chat_stats') === '1';\n          model.agentPermissions.enableFolderMode =\n            utils.getText(resp, 'enable_folder_mode') === '1';\n          model.agentPermissions.enableTaskMode =\n            utils.getText(resp, 'enable_task_mode') === '1';\n\n          model.outboundSettings.defaultDialGroup = utils.getText(\n            resp,\n            'phone_login_dial_group',\n          );\n\n          if (\n            response.ui_response.allow_lead_inserts &&\n            typeof resp.insert_campaigns !== 'undefined' &&\n            response.ui_response.insert_campaigns.campaign\n          ) {\n            model.agentPermissions.allowLeadInserts =\n              utils.getText(resp, 'allow_lead_inserts') === '1';\n          }\n\n          // Set collection values\n          model.outboundSettings.availableCampaigns = _processCampaigns(\n            response,\n          );\n          model.chatSettings.availableChatQueues = utils.processResponseCollection(\n            response.ui_response,\n            'login_chat_queues',\n            'chat_queue',\n          );\n          _processChatQueueDnis(model.chatSettings, response);\n          model.chatSettings.availableChatRequeueQueues = utils.processResponseCollection(\n            response.ui_response,\n            'chat_requeue_queues',\n            'chat_group',\n          );\n          model.inboundSettings.availableQueues = utils.processResponseCollection(\n            response.ui_response,\n            'login_gates',\n            'gate',\n          );\n          model.inboundSettings.availableSkillProfiles = utils.processResponseCollection(\n            response.ui_response,\n            'skill_profiles',\n            'profile',\n          );\n          model.inboundSettings.availableRequeueQueues = utils.processResponseCollection(\n            response.ui_response,\n            'requeue_gates',\n            'gate_group',\n          );\n          model.chatSettings.availableChatRooms = utils.processResponseCollection(\n            response.ui_response,\n            'chat_rooms',\n            'room',\n          );\n          model.scriptSettings.availableScripts = utils.processResponseCollection(\n            response.ui_response,\n            'scripts',\n            'script',\n          );\n          model.agentSettings.callerIds = utils.processResponseCollection(\n            response.ui_response,\n            'caller_ids',\n            'caller_id',\n          );\n          model.agentSettings.availableAgentStates = utils.processResponseCollection(\n            response.ui_response,\n            'agent_states',\n            'agent_state',\n          );\n          model.applicationSettings.availableCountries = utils.processResponseCollection(\n            response.ui_response,\n            'account_countries',\n            'country',\n          );\n          model.outboundSettings.insertCampaigns = utils.processResponseCollection(\n            response.ui_response,\n            'insert_campaigns',\n            'campaign',\n          );\n\n          var dialGroups = utils.processResponseCollection(\n            response.ui_response,\n            'outdial_groups',\n            'group',\n          );\n          // set boolean values\n          for (var dg = 0; dg < dialGroups.length; dg++) {\n            var group = dialGroups[dg];\n            group.allowLeadSearch = group.allowLeadSearch === 'YES';\n            group.allowPreviewLeadFilters =\n              group.allowPreviewLeadFilters === '1';\n            group.progressiveEnabled = group.progressiveEnabled === '1';\n            group.requireFetchedLeadsCalled =\n              group.requireFetchedLeadsCalled === '1';\n            group.hciType = parseInt(group.hciEnabled) || 0;\n            group.hciEnabled =\n              group.hciEnabled === '1' || group.hciEnabled === '2';\n            group.hciClicker = group.hciClicker === '1';\n          }\n          model.outboundSettings.availableOutdialGroups = dialGroups;\n        }\n      }\n\n      formattedResponse.agentSettings = model.agentSettings;\n      formattedResponse.agentPermissions = model.agentPermissions;\n      formattedResponse.applicationSettings = model.applicationSettings;\n      formattedResponse.chatSettings = model.chatSettings;\n      formattedResponse.connectionSettings = model.connectionSettings;\n      formattedResponse.inboundSettings = model.inboundSettings;\n      formattedResponse.outboundSettings = model.outboundSettings;\n      formattedResponse.scriptSettings = model.scriptSettings;\n\n      return formattedResponse;\n    };\n\n    function _processCampaigns(response) {\n      var campaigns = [];\n      var campaignsRaw = null;\n\n      if (typeof response.ui_response.campaigns.campaign !== 'undefined') {\n        campaignsRaw = response.ui_response.campaigns.campaign;\n      }\n\n      if (campaignsRaw) {\n        if (!Array.isArray(campaignsRaw)) {\n          campaignsRaw = [campaignsRaw];\n        }\n\n        for (var c = 0; c < campaignsRaw.length; c++) {\n          campaigns.push(_processCampaign(campaignsRaw[c]));\n        }\n      }\n\n      return campaigns;\n    }\n\n    function _processCampaign(campaignRaw) {\n      // single campaign object\n      var campaignId = campaignRaw['@campaign_id'];\n      var allowLeadUpdates = campaignRaw['@allow_lead_updates']; // 0 = no update, 1 = allow phone update, 2 = don't allow phone update\n      UIModel.getInstance().agentPermissions.allowLeadUpdatesByCampaign[\n        campaignId\n      ] = allowLeadUpdates;\n\n      var customLabels = campaignRaw['custom_labels'];\n      var labelArray = [];\n\n      for (var p in customLabels) {\n        var label = p.replace(/@/, ''); // remove leading '@'\n        var obj = {};\n        obj[label] = customLabels[p];\n\n        labelArray.push(obj);\n      }\n\n      return {\n        campaignId: campaignId,\n        campaignName: campaignRaw['@campaign_name'],\n        surveyId: campaignRaw['@survey_id'],\n        surveyName: campaignRaw['@survey_name'],\n        customLabels: labelArray,\n        allowLeadUpdates: allowLeadUpdates,\n      };\n    }\n\n    /**\n     * example packet\n     *  {\n     *      \"chat_queue\":[\n     *          {\n     *              \"@chat_queue_desc\":\"\",\n     *              \"@chat_queue_id\":\"74\",\n     *              \"@chat_queue_name\":\"Please don't delete\"\n     *          },\n     *          {\n     *              \"@chat_queue_desc\":\"blah\",\n     *              \"@chat_queue_id\":\"131\",\n     *              \"@chat_queue_name\":\"cris chat queue\",\n     *              \"dnis\":[\n     *                  {\"#text\":\"5555551215\"},\n     *                  {\"#text\":\"5555554444\"},\n     *                  {\"#text\":\"8885551212\"},\n     *                  {\"#text\":\"97687\"}\n     *              ]\n     *          }\n     *      ]\n     *   }\n     *\n     *\n     *      This function will format the dnis list and put them back on chatSettings.availableChatQueues\n     **/\n    function _processChatQueueDnis(chatSettings, response) {\n      var queues = chatSettings.availableChatQueues;\n      var rawQueues = response.ui_response.login_chat_queues.chat_queue;\n\n      if (!Array.isArray(rawQueues)) {\n        rawQueues = [rawQueues];\n      }\n\n      for (var i = 0; i < queues.length; i++) {\n        var queue = queues[i];\n\n        var rawQueue = {};\n        for (var j = 0; j < rawQueues.length; j++) {\n          var rq = rawQueues[j];\n          if (rq['@chat_queue_id'] === queue.chatQueueId) {\n            rawQueue = rq;\n            break;\n          }\n        }\n\n        if (rawQueue.dnis) {\n          if (!Array.isArray(rawQueue.dnis)) {\n            rawQueue.dnis = [rawQueue.dnis];\n          }\n\n          // update the dnis array to just be a list\n          queue.dnis = rawQueue.dnis.map(function (d) {\n            return d['#text'];\n          });\n        }\n      }\n    }\n\n    var LogoutRequest = function (agentId, message) {\n      this.agentId = agentId;\n      this.message = message || '';\n    };\n\n    LogoutRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.LOGOUT,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': this.agentId,\n          },\n          message: {\n            '#text': this.message,\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    LogoutRequest.prototype.processResponse = function (notification) {\n      var formattedResponse = utils.buildDefaultResponse(notification);\n\n      return formattedResponse;\n    };\n    var MultiSocketRequest = function () {};\n\n    MultiSocketRequest.prototype.formatJSON = function () {\n      var model = UIModel.getInstance();\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.LOGIN_MULTISOCKET,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': JSON.parse(model.dataStore.get('agent_id')), //fetch agent_id and hash_code from browser's local storage\n          },\n          hash_code: {\n            '#text': JSON.parse(model.dataStore.get('hash_code')),\n          },\n        },\n      };\n      UIModel.getInstance().loginRequest = new LoginRequest(\n        null,\n        null,\n        null,\n        null,\n        null,\n        null,\n        null,\n      );\n      return JSON.stringify(msg);\n    };\n\n    var OffhookInitRequest = function () {};\n\n    OffhookInitRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.OFFHOOK_INIT,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          dial_dest: {\n            '#text': UIModel.getInstance().agentSettings.dialDest,\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class is responsible for handling an off-hook-init response packet from IntelliQueue.\n     * If the offhookinit is successful, it will go into the UIModel and set the isOffhook variable\n     * to true.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"UI2005\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"OFF-HOOK-INIT\",\n     *      \"status\":{\"#text\":\"OK|FAILURE\"},\n     *      \"monitoring\":{\"#text:\"TRUE|FALSE\"},\n     *      \"message\":{},\n     *      \"detail\":{}\n     *    }\n     * }\n     */\n    OffhookInitRequest.prototype.processResponse = function (response) {\n      var status = response.ui_response.status['#text'];\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      if (status === 'OK') {\n        var isMonitoring = utils.getText(response.ui_response, 'monitoring');\n        UIModel.getInstance().offhookInitPacket = response;\n        UIModel.getInstance().agentSettings.isOffhook = true;\n        UIModel.getInstance().agentSettings.isMonitoring = isMonitoring;\n        formattedResponse.monitoring = isMonitoring;\n\n        // make sure to reset softphone reconnect bool\n        UIModel.getInstance().softphoneSettings.attemptingSoftphoneReconnect = false;\n      } else {\n        if (formattedResponse.message === '') {\n          formattedResponse.message = 'Unable to process offhook request';\n        }\n        utils.logMessage(\n          LOG_LEVELS.WARN,\n          formattedResponse.message + ' ' + formattedResponse.detail,\n          response,\n        );\n      }\n\n      return formattedResponse;\n    };\n\n    var OffhookTermRequest = function () {};\n\n    OffhookTermRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.OFFHOOK_TERM,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * Process an OFF-HOOK-TERM packet and update various variables in the UI\n     *\n     * {\"ui_notification\":{\n     *      \"@message_id\":\"IQ10012016080217135001344\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"OFF-HOOK-TERM\",\n     *      \"agent_id\":{\"#text\":\"1\"},\n     *      \"start_dts\":{\"#text\":\"2016-08-02 17:11:38\"},\n     *      \"end_dts\":{\"#text\":\"2016-08-02 17:14:07\"},\n     *      \"monitoring\":{\"#text\":\"0\"}\n     *    }\n     * }\n     */\n    OffhookTermRequest.prototype.processResponse = function (data) {\n      var notif = data.ui_notification;\n      var monitoring = utils.getText(notif, 'monitoring') === '1';\n      var model = UIModel.getInstance();\n\n      model.agentSettings.wasMonitoring = monitoring;\n      model.offhookTermPacket = data;\n      model.agentSettings.isOffhook = false;\n      model.agentSettings.isMonitoring = false;\n\n      var formattedResponse = {\n        status: 'OK',\n        agentId: utils.getText(notif, 'agent_id'),\n        startDts: utils.getText(notif, 'start_dts'),\n        endDts: utils.getText(notif, 'end_dts'),\n        monitoring: monitoring,\n      };\n\n      return formattedResponse;\n    };\n\n    var OneToOneOutdialRequest = function (\n      destination,\n      callerId,\n      ringTime,\n      countryId,\n      gateId,\n    ) {\n      this.destination = destination;\n      this.callerId = callerId;\n      this.ringTime = ringTime || '60';\n      this.countryId = countryId || 'USA';\n      this.gateId = gateId || '';\n    };\n\n    OneToOneOutdialRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.ONE_TO_ONE_OUTDIAL,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': utils.toString(\n              UIModel.getInstance().agentSettings.agentId,\n            ),\n          },\n          destination: {\n            '#text': utils.toString(this.destination),\n          },\n          ring_time: {\n            '#text': utils.toString(this.ringTime),\n          },\n          caller_id: {\n            '#text': utils.toString(this.callerId),\n          },\n          country_id: {\n            '#text': utils.toString(this.countryId),\n          },\n          gate_id: {\n            '#text': utils.toString(this.gateId),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var OneToOneOutdialCancelRequest = function (uii) {\n      this.uii = uii;\n    };\n\n    /*\n     * This class is responsible for creating a new packet to cancel\n     * an in-progress outbound call.\n     */\n    OneToOneOutdialCancelRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.ONE_TO_ONE_OUTDIAL_CANCEL,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': utils.toString(\n              UIModel.getInstance().agentSettings.agentId,\n            ),\n          },\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var PauseRecordRequest = function (record) {\n      this.record = record;\n    };\n\n    /*\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@message_id\":\"UI200809291036128\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"PAUSE-RECORD\",\n     *      \"agent_id\":{\"#text\":\"1856\"},\n     *      \"uii\":{\"#text\":\"200808291035510000000900029412\"},\n     *      \"record\":{\"#text\":\"TRUE | FALSE\"},\n     *      \"pause\":{\"#text\":\"10\"}\n     *    }\n     * }\n     */\n    PauseRecordRequest.prototype.formatJSON = function () {\n      var model = UIModel.getInstance();\n      var pauseTime = '10';\n      if (\n        model.currentCall.agentRecording &&\n        model.currentCall.agentRecording.pause\n      ) {\n        pauseTime = model.currentCall.agentRecording.pause;\n      }\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.PAUSE_RECORD,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(model.currentCall.agentId),\n          },\n          uii: {\n            '#text': utils.toString(model.currentCall.uii),\n          },\n          record: {\n            '#text': utils.toString(this.record === true ? 'TRUE' : 'FALSE'),\n          },\n          pause: {\n            '#text': utils.toString(pauseTime),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes PAUSE-RECORD packets rec'd from IQ.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008082910361503344\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"PAUSE-RECORD\",\n     *      \"uii\":{\"#text\":\"200808291035510000000900029412\"},\n     *      \"status\":{\"#text\":\"OK | FAILURE\"},\n     *      \"message\":{},\n     *      \"detail\":{},\n     *      \"state\":{\"#text\":\"RECORDING | PAUSED\"},\n     *      \"pause\":{\"#text\":\"10\"}\n     *    }\n     * }\n     */\n    PauseRecordRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n      var currUII = '';\n      if (UIModel.getInstance().currentCall.uii) {\n        currUII = UIModel.getInstance().currentCall.uii;\n      }\n\n      formattedResponse.uii = utils.getText(resp, 'uii');\n      formattedResponse.state = utils.getText(resp, 'state');\n      formattedResponse.pause = utils.getText(resp, 'pause');\n\n      if (formattedResponse.status === 'OK') {\n        // make sure we are talking about the same call\n        if (formattedResponse.uii === currUII) {\n          if (formattedResponse.message === '') {\n            formattedResponse.message =\n              'Broadcasting new record state of ' + formattedResponse.state;\n          }\n          utils.logMessage(\n            LOG_LEVELS.DEBUG,\n            'Broadcasting new record state of ' + formattedResponse.state,\n            response,\n          );\n        } else {\n          utils.logMessage(\n            LOG_LEVELS.DEBUG,\n            'Pause Record Response is for a different call...discarding',\n            response,\n          );\n        }\n      } else {\n        if (formattedResponse.message === '') {\n          formattedResponse.message =\n            'Error processing PAUSE-RECORD request.' +\n            formattedResponse.message +\n            '\\n' +\n            formattedResponse.detail;\n        }\n        utils.logMessage(LOG_LEVELS.WARN, formattedResponse.message, response);\n      }\n\n      return formattedResponse;\n    };\n\n    var PingCallRequest = function () {};\n\n    PingCallRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.PING_CALL,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': UIModel.getInstance().currentCall.agentId,\n          },\n          uii: {\n            '#text': UIModel.getInstance().currentCall.uii,\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var PreviewDialRequest = function (\n      action,\n      searchFields,\n      requestId,\n      leadPhone,\n    ) {\n      this.agentId = UIModel.getInstance().agentSettings.agentId;\n      this.searchFields = searchFields || [];\n      this.requestId = requestId || '';\n      this.action = action || '';\n      this.leadPhone = leadPhone || ''; // pipe leads only\n    };\n\n    /*\n     * searchFields = [\n     *  {key: \"name\", value: \"Danielle\"},\n     *  {key: \"number\", value: \"5555555555\"\n     * ];\n     */\n    PreviewDialRequest.prototype.formatJSON = function () {\n      var fields = {};\n      for (var i = 0; i < this.searchFields.length; i++) {\n        var fieldObj = this.searchFields[i];\n        fields[fieldObj.key] = { '#text': utils.toString(fieldObj.value) };\n      }\n\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.PREVIEW_DIAL,\n          '@message_id': utils.getMessageId(),\n          '@action': this.action,\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(\n              UIModel.getInstance().agentSettings.agentId,\n            ),\n          },\n          pending_request_id: {\n            '#text': utils.toString(this.requestId),\n          },\n          lead_phone: {\n            '#text': utils.toString(this.leadPhone),\n          },\n          search_fields: fields,\n          // { \"name\": {\"#text\": \"Danielle\" } }\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class is responsible for handling PREVIEW-DIAL packets received\n     * from the dialer. It will save a copy of it in the UIModel.\n     *\n     * {\"dialer_request\":{\n     *      \"@action\":\"\", // <-- empty for Preview fetch, otherwise \"SEARCH\"\n     *      \"@callbacks\":\"TRUE|FALSE\"\n     *      ,\"@message_id\":\"ID2008091513163400220\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"PREVIEW_DIAL\",\n     *      \"dial_group_id\":{\"#text\":\"200018\"},\n     *      \"account_id\":{\"#text\":\"99999999\"},\n     *      \"agent_id\":{\"#text\":\"1810\"},\n     *      \"is_insert\":{\"#text\":\"TRUE|FALSE\"}, <--- TRUE if search triggered by insert\n     *      \"destinations\":{\n     *          \"lead\":[\n     *              {\n     *                  \"@aux_data1\":\"\",\"@aux_data2\":\"\",\"@aux_data3\":\"\",\"@aux_data4\":\"\",\"@aux_data5\":\"\",\n     *                  \"@aux_phone\":\"\",\"@campaign_id\":\"51\",\"@destination\":\"9548298548\",\"@dnis\":\"1112223333\",\n     *                  \"@extern_id\":\"amanda\",\"@lead_id\":\"2646\",\"@lead_state\":\"PENDING\",\"@live_answer_msg\":\"\",\n     *                  \"@mach_answer_msg\":\"\",\"@machine_detect\":\"FALSE\",\"@request_key\":\"IQ982008091516241101125\",\n     *                  \"@valid_until\":\"2008-09-15 17:24:11\",\"extern_id\":{\"#text\":\"9548298548\"},\n     *                  \"first_name\":{\"#text\":\"Amanda\"},\"mid_name\":{\"#text\":\"Amanda\"},\"last_name\":{\"#text\":\"Machutta2\"},\n     *                  \"address1\":{},\"address2\":{},\"city\":{},\"state\":{},\"zip\":{},\"aux_greeting\":{},\n     *                  \"aux_external_url\":{}, \"app_url\":{}\n     *              },\n     *          ]\n     *      }\n     *    }\n     * }\n     */\n    PreviewDialRequest.prototype.processResponse = function (notification) {\n      var notif = notification.dialer_request;\n      var model = UIModel.getInstance();\n      var leads = utils.processResponseCollection(\n        notif,\n        'destinations',\n        'lead',\n      );\n\n      // send over requestId (as well as requestKey for backwards compatibility)\n      // to match previewLeadState.notification property\n      for (var l = 0; l < leads.length; l++) {\n        var lead = leads[l];\n        lead.requestId = lead.requestKey;\n        lead.ani = lead.destination; // add ani prop since used in new call packet & update lead\n\n        // In case of a single lead returned, the XML converter to JSON will add lead as an object and not an array\n        //\n        if (!Array.isArray(notif.destinations.lead)) {\n          notif.destinations.lead = [notif.destinations.lead];\n        }\n\n        // parse extra data correctly\n        try {\n          var notifLead = notif.destinations.lead[l];\n\n          if (notifLead.extra_data) {\n            // if this lead doesn't match the current lead, find it from the notification\n            if (notifLead['@lead_id'] !== lead.leadId) {\n              notifLead = notif.destinations.lead.filter(function (destLead) {\n                return destLead['@lead_id'] === lead.leadId;\n              });\n            }\n\n            delete lead.extraDatas;\n            lead.extraData = {};\n            for (var key in notifLead.extra_data) {\n              lead.extraData[key] = notifLead.extra_data[key]['#text'];\n            }\n          }\n        } catch (e) {\n          console.warn('error parsing lead extra data: ' + e);\n        }\n      }\n\n      var formattedResponse = {\n        action: notif['@action'],\n        callbacks: notif['@callbacks'] === 'TRUE',\n        dialGroupId: utils.getText(notif, 'dial_group_id'),\n        accountId: utils.getText(notif, 'account_id'),\n        agentId: utils.getText(notif, 'agent_id'),\n        isInsert: utils.getText(notif, 'is_insert'),\n        leads: leads,\n      };\n\n      if (notif['@callbacks'] === 'TRUE') {\n        utils.logMessage(\n          LOG_LEVELS.INFO,\n          \"New CALLBACK packet request rec'd from dialer\",\n          notification,\n        );\n        // clear callbacks??\n        //model.callbacks = [];\n        for (var l = 0; l < leads.length; l++) {\n          var lead = leads[l];\n          model.callbacks.push(lead);\n        }\n      } else {\n        model.outboundSettings.previewDialLeads = leads;\n      }\n\n      return formattedResponse;\n    };\n\n    var RecordRequest = function (record) {\n      this.record = record;\n    };\n\n    /*\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@message_id\":\"UI200809291036128\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"RECORD\",\n     *      \"agent_id\":{\"#text\":\"1856\"},\n     *      \"uii\":{\"#text\":\"200808291035510000000900029412\"},\n     *      \"record\":{\"#text\":\"TRUE | FALSE\"}\n     *    }\n     * }\n     */\n    RecordRequest.prototype.formatJSON = function () {\n      var model = UIModel.getInstance();\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.RECORD,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(model.currentCall.agentId),\n          },\n          uii: {\n            '#text': utils.toString(model.currentCall.uii),\n          },\n          record: {\n            '#text': this.record === true ? 'TRUE' : 'FALSE',\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes RECORD packets rec'd from IQ.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008082910361503344\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"RECORD\",\n     *      \"uii\":{\"#text\":\"200808291035510000000900029412\"},\n     *      \"status\":{\"#text\":\"OK\"},\n     *      \"message\":{},\n     *      \"detail\":{},\n     *      \"state\":{\"#text\":\"RECORDING | STOPPED\"}\n     *    }\n     * }\n     */\n    RecordRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n      var currUII = '';\n      if (UIModel.getInstance().currentCall.uii) {\n        currUII = UIModel.getInstance().currentCall.uii;\n      }\n\n      formattedResponse.uii = utils.getText(resp, 'uii');\n      formattedResponse.state = utils.getText(resp, 'state');\n\n      if (formattedResponse.status === 'OK') {\n        // make sure we are talking about the same call\n        if (formattedResponse.uii === currUII) {\n          if (formattedResponse.message === '') {\n            formattedResponse.message =\n              'Broadcasting new record state of ' + formattedResponse.state;\n          }\n          utils.logMessage(\n            LOG_LEVELS.DEBUG,\n            formattedResponse.message,\n            response,\n          );\n        } else {\n          utils.logMessage(\n            LOG_LEVELS.DEBUG,\n            'Record Response is for a different call...discarding',\n            response,\n          );\n        }\n      } else {\n        if (formattedResponse.message === '') {\n          formattedResponse.message =\n            'Error processing RECORD request.' +\n            formattedResponse.message +\n            '\\n' +\n            formattedResponse.detail;\n        }\n        utils.logMessage(LOG_LEVELS.WARN, formattedResponse.message, response);\n      }\n\n      return formattedResponse;\n    };\n\n    var RequeueRequest = function (queueId, skillId, maintain) {\n      this.queueId = queueId;\n      this.skillId = skillId;\n      this.maintain = maintain;\n    };\n\n    RequeueRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.REQUEUE,\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          uii: {\n            '#text': UIModel.getInstance().currentCall.uii,\n          },\n          gate_number: {\n            '#text': utils.toString(this.queueId),\n          },\n          skill_id: {\n            '#text': utils.toString(this.skillId),\n          },\n          maintain_agent: {\n            '#text': this.maintain === true ? 'TRUE' : 'FALSE',\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes RE-QUEUE packets rec'd from IQ.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008082817165103291\",\n     *      \"@response_to\":\"UIV220088281716486\",\n     *      \"@type\":\"RE-QUEUE\",\n     *      \"status\":\"OK\",\n     *      \"message\":\"Success.\",\n     *      \"detail\":\"The re-queue request was successfully processed.\",\n     *      \"agent_id\":{\"#text\":\"1856\"},\n     *      \"uii\":{\"#text\":\"200808281716090000000900028070\"},\n     *      \"gate_number\":{\"#text\":\"19\"},\n     *      \"maintain_agent\":{\"#text\":\"FALSE\"}\n     *    }\n     * }\n     */\n    RequeueRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      formattedResponse.agentId = utils.getText(resp, 'agent_id');\n      formattedResponse.uii = utils.getText(resp, 'uii');\n      formattedResponse.queueId = utils.getText(resp, 'gate_number');\n\n      if (formattedResponse.status === 'OK') {\n      } else {\n        var message =\n          'There was an error processing the requeue request. ' +\n          formattedResponse.detail;\n        utils.logMessage(LOG_LEVELS.WARN, message, response);\n      }\n\n      return formattedResponse;\n    };\n\n    var ScriptConfigRequest = function (scriptId, version) {\n      this.scriptId = scriptId;\n      this.version = version || null;\n    };\n\n    /*\n     * This event is responsible for requesting a script object\n     */\n    ScriptConfigRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          '@type': MESSAGE_TYPES.SCRIPT_CONFIG,\n          agent_id: {\n            '#text': utils.toString(\n              UIModel.getInstance().agentSettings.agentId,\n            ),\n          },\n          script_id: {\n            '#text': utils.toString(this.scriptId),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class process SCRIPT-CONFIG packets received from IntelliQueue.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008082817165103294\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"SCRIPT-CONFIG\",\n     *      \"status\":{\"#text\":\"OK\"},\n     *      \"message\":{},\n     *      \"script_id\":{\"#text\":\"123\"},\n     *      \"version\":{\"#text\":\"1\"},\n     *      \"json\":{},\n     *   }\n     * }\n     */\n    ScriptConfigRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      if (formattedResponse.status === 'true') {\n        formattedResponse.status = true;\n        formattedResponse.scriptId = utils.getText(resp, 'script_id');\n        formattedResponse.version = utils.getText(resp, 'version');\n        formattedResponse.json = utils.getText(resp, 'json');\n\n        // store script on model\n        UIModel.getInstance().scriptSettings.loadedScripts[\n          formattedResponse.scriptId\n        ] = formattedResponse;\n      } else {\n        formattedResponse.status = false;\n      }\n\n      return formattedResponse;\n    };\n\n    var ScriptResultRequest = function (uii, scriptId, jsonResult) {\n      this.uii = uii;\n      this.scriptId = scriptId;\n      this.jsonResult = jsonResult;\n    };\n\n    /*\n     * This event is responsible for sending the script result object\n     */\n    ScriptResultRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@message_id': utils.getMessageId(),\n          response_to: '',\n          '@type': MESSAGE_TYPES.SCRIPT_RESULT,\n          agent_id: {\n            '#text': utils.toString(\n              UIModel.getInstance().agentSettings.agentId,\n            ),\n          },\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n          script_id: {\n            '#text': utils.toString(this.scriptId),\n          },\n          json_result: {\n            '#text': JSON.stringify(this.jsonResult),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var SearchDirectoryRequest = function () {};\n\n    SearchDirectoryRequest.prototype.searchDirectory = function (searchString) {\n      UIModel.getInstance().searchDirectoryRequest = this;\n      _searchDirectory('rcdirectory/getRcCorporateDirectory', searchString);\n    };\n\n    SearchDirectoryRequest.prototype.processResponse = function (response) {\n      UIModel.getInstance().filteredDirectory = response;\n      return UIModel.getInstance().filteredDirectory;\n    };\n\n    function _searchDirectory(path, searchString) {\n      var model = UIModel.getInstance();\n      var accountId = model.agentSettings.accountId; //subAccountId\n      var baseUrl = model.authHost + model.baseApiUri;\n      var engageAccessToken =\n        'Bearer ' +\n        utils.toString(\n          UIModel.getInstance().authenticateRequest.engageAccessToken,\n        );\n      var params = {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        queryParams: {},\n      };\n      params.headers['Authorization'] = engageAccessToken;\n      params.queryParams['searchString'] = searchString;\n      params.queryParams['accountId'] = accountId;\n      var errorMsg = 'Error on request to search Directory: ' + baseUrl + path;\n      new HttpService(baseUrl).httpGet(path, params).then(\n        function (response) {\n          try {\n            response = JSON.parse(response.response);\n            var searchDirResponse = UIModel.getInstance().searchDirectoryRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(\n              UIModel.getInstance().libraryInstance,\n              CALLBACK_TYPES.SEARCH_DIR,\n              searchDirResponse,\n            );\n          } catch (err) {\n            utils.logMessage(LOG_LEVELS.WARN, errorMsg, err);\n          }\n        },\n        function (err) {\n          var errResponse = {\n            type: 'Error retrieving directory list',\n            message: errorMsg,\n          };\n          utils.logMessage(LOG_LEVELS.WARN, errorMsg, err);\n\n          // still fire callback on error response\n          utils.fireCallback(\n            UIModel.getInstance().libraryInstance,\n            CALLBACK_TYPES.SEARCH_DIR,\n            errResponse,\n          );\n        },\n      );\n    }\n\n    var StatsRequest = function () {};\n\n    /*\n     * { \"ui_request\": {\n     *      \"@response_to\":\"\",\n     *      \"@message_id\":\"IS20160901142437535\",\n     *      \"@type\":\"STATS\"\n     *    }\n     * }\n     */\n    StatsRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IS',\n          '@type': MESSAGE_TYPES.STATS,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var TcpaSafeRequest = function (\n      action,\n      searchFields,\n      requestId,\n      leadPhone,\n    ) {\n      this.agentId = UIModel.getInstance().agentSettings.agentId;\n      this.searchFields = searchFields || [];\n      this.requestId = requestId || '';\n      this.action = action || '';\n      this.leadPhone = leadPhone || ''; // pipe leads only\n    };\n\n    /*\n     * searchFields = [\n     *  {key: \"name\", value: \"Danielle\"},\n     *  {key: \"number\", value: \"5555555555\"\n     * ];\n     */\n    TcpaSafeRequest.prototype.formatJSON = function () {\n      var fields = {};\n      for (var i = 0; i < this.searchFields.length; i++) {\n        var fieldObj = this.searchFields[i];\n        fields[fieldObj.key] = { '#text': utils.toString(fieldObj.value) };\n      }\n\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.TCPA_SAFE,\n          '@message_id': utils.getMessageId(),\n          '@action': this.action,\n          response_to: '',\n          agent_id: {\n            '#text': utils.toString(\n              UIModel.getInstance().agentSettings.agentId,\n            ),\n          },\n          pending_request_id: {\n            '#text': utils.toString(this.requestId),\n          },\n          lead_phone: {\n            '#text': utils.toString(this.leadPhone),\n          },\n          search_fields: fields,\n          // { \"name\": {\"#text\": \"Danielle\"} }\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class is responsible for handling TCPA-SAFE packets received\n     * from the dialer. It will save a copy of it in the UIModel.\n     *\n     * {\"dialer_request\":{\n     *      \"@action\":\"\",\n     *      \"@callbacks\":\"TRUE|FALSE\"\n     *      ,\"@message_id\":\"ID2008091513163400220\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"TCPA_SAFE\",\n     *      \"dial_group_id\":{\"#text\":\"200018\"},\n     *      \"account_id\":{\"#text\":\"99999999\"},\n     *      \"agent_id\":{\"#text\":\"1810\"},\n     *      \"is_insert\":{\"#text\":\"TRUE|FALSE\"}, <--- TRUE if search triggered by insert\n     *      \"destinations\":{\n     *          \"lead\":[\n     *              {\n     *                  \"@aux_data1\":\"\",\"@aux_data2\":\"\",\"@aux_data3\":\"\",\"@aux_data4\":\"\",\"@aux_data5\":\"\",\n     *                  \"@aux_phone\":\"\",\"@campaign_id\":\"51\",\"@destination\":\"9548298548\",\"@dnis\":\"1112223333\",\n     *                  \"@extern_id\":\"amanda\",\"@lead_id\":\"2646\",\"@lead_state\":\"PENDING\",\"@live_answer_msg\":\"\",\n     *                  \"@mach_answer_msg\":\"\",\"@machine_detect\":\"FALSE\",\"@request_key\":\"IQ982008091516241101125\",\n     *                  \"@valid_until\":\"2008-09-15 17:24:11\",\"extern_id\":{\"#text\":\"9548298548\"},\n     *                  \"first_name\":{\"#text\":\"Amanda\"},\"mid_name\":{\"#text\":\"Amanda\"},\"last_name\":{\"#text\":\"Machutta2\"},\n     *                  \"address1\":{},\"address2\":{},\"city\":{},\"state\":{},\"zip\":{},\"aux_greeting\":{},\n     *                  \"aux_external_url\":{}, \"app_url\":{}\n     *              },\n     *          ]\n     *      }\n     *    }\n     * }\n     *\n     */\n    TcpaSafeRequest.prototype.processResponse = function (notification) {\n      var notif = notification.dialer_request;\n      var model = UIModel.getInstance();\n      var leads = utils.processResponseCollection(\n        notif,\n        'destinations',\n        'lead',\n      );\n\n      // send over requestId (as well as requestKey for backwards compatibility)\n      // to match tcpaSafeLeadState.notification property\n      for (var l = 0; l < leads.length; l++) {\n        var lead = leads[l];\n        lead.requestId = lead.requestKey;\n        lead.ani = lead.destination; // add ani prop since used in new call packet & update lead\n\n        // In case of a single lead returned, the XML converter to JSON will add lead as an object and not an array\n        //\n        if (!Array.isArray(notif.destinations.lead)) {\n          notif.destinations.lead = [notif.destinations.lead];\n        }\n\n        // parse extra data correctly\n        try {\n          var notifLead = notif.destinations.lead[l];\n\n          if (notifLead.extra_data) {\n            // if this lead doesn't match the current lead, find it from the notification\n            if (notifLead['@lead_id'] !== lead.leadId) {\n              notifLead = notif.destinations.lead.filter(function (destLead) {\n                return destLead['@lead_id'] === lead.leadId;\n              });\n            }\n\n            delete lead.extraDatas;\n            lead.extraData = {};\n            for (var key in notifLead.extra_data) {\n              lead.extraData[key] = notifLead.extra_data[key]['#text'];\n            }\n          }\n        } catch (e) {\n          console.warn('error parsing lead extra data: ' + e);\n        }\n      }\n\n      var formattedResponse = {\n        action: notif['@action'],\n        callbacks: notif['@callbacks'] === 'TRUE',\n        dialGroupId: utils.getText(notif, 'dial_group_id'),\n        accountId: utils.getText(notif, 'account_id'),\n        agentId: utils.getText(notif, 'agent_id'),\n        isInsert: utils.getText(notif, 'is_insert'),\n        leads: leads,\n      };\n\n      if (notif['@callbacks'] === 'TRUE') {\n        var message = \"New CALLBACK packet request rec'd from dialer\";\n        utils.logMessage(LOG_LEVELS.INFO, message, notification);\n        // clear callbacks??\n        //model.callbacks = [];\n        for (var l = 0; l < leads.length; l++) {\n          var callbackLead = leads[l];\n          model.callbacks.push(callbackLead);\n        }\n      } else {\n        model.outboundSettings.tcpaSafeLeads = leads;\n      }\n\n      return formattedResponse;\n    };\n\n    var UpdateDialDestinationRequest = function (dialDest, isSoftphoneError) {\n      this.dialDest = dialDest;\n      this.isSoftphoneError = isSoftphoneError || false;\n    };\n\n    /*\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@type\":MESSAGE_TYPES.UPDATE_DIAL_DESTINATION,\n     *      \"@message_id\":\"UI200809291036128\",\n     *      \"@response_to\":\"\",\n     *      \"agent_id\":\"1\",\n     *      \"dial_dest\":{\"#text\":\"blah@something.com\"},\n     *      \"log_softphone_error\": {\"#text\":\"TRUE|FALSE\"},\n     *    }\n     * }\n     */\n    UpdateDialDestinationRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.UPDATE_DIAL_DESTINATION,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(\n              UIModel.getInstance().agentSettings.agentId,\n            ),\n          },\n          dial_dest: {\n            '#text': utils.toString(this.dialDest),\n          },\n          log_softphone_error: {\n            '#text': utils.toString(\n              this.isSoftphoneError === true ? 'TRUE' : 'FALSE',\n            ),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var XferWarmRequest = function (dialDest, callerId, sipHeaders, countryId) {\n      this.dialDest = dialDest;\n      this.callerId = callerId || '';\n      this.sipHeaders = sipHeaders || [];\n      this.countryId = countryId;\n    };\n\n    XferWarmRequest.prototype.formatJSON = function () {\n      var fields = [];\n      for (var i = 0; i < this.sipHeaders.length; i++) {\n        var fieldObj = this.sipHeaders[i];\n        fields.push({\n          '@name': utils.toString(fieldObj.name),\n          '@value': utils.toString(fieldObj.value),\n        });\n      }\n\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.XFER_WARM,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          uii: {\n            '#text': UIModel.getInstance().currentCall.uii,\n          },\n          dial_dest: {\n            '#text': utils.toString(this.dialDest),\n          },\n          caller_id: {\n            '#text': utils.toString(this.callerId),\n          },\n          country_id: {\n            '#text': utils.toString(this.countryId),\n          },\n          xfer_header: fields,\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class processes WARM-XFER packets rec'd from IQ.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ10012016082314475000219\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"WARM-XFER\",\n     *      \"agent_id\":{\"#text\":\"1\"},\n     *      \"uii\":{\"#text\":\"201608231447590139000000000200\"},\n     *      \"session_id\":{\"#text\":\"3\"},\n     *      \"status\":{\"#text\":\"OK\"},\n     *      \"dial_dest\":{\"#text\":\"3038593775\"},\n     *      \"message\":{\"#text\":\"OK\"},\"detail\":{}\n     *    }\n     * }\n     *  Response on CANCEL:\n     *  {\"ui_response\":{\n     *      \"@message_id\":\"IQ10012016082315005000264\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"WARM-XFER\",\n     *      \"agent_id\":{\"#text\":\"1\"},\n     *      \"uii\":{\"#text\":\"201608231501090139000000000204\"},\n     *      \"session_id\":{},\n     *      \"status\":{\"#text\":\"FAILURE\"},\n     *      \"dial_dest\":{\"#text\":\"3038593775\"},\n     *      \"message\":{\"#text\":\"Transfer CANCELED\"},\n     *      \"detail\":{\"#text\":\"NOANSWER after 3 seconds.\"}\n     *    }\n     * }\n     */\n    XferWarmRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      formattedResponse.agentId = utils.getText(resp, 'agent_id');\n      formattedResponse.uii = utils.getText(resp, 'uii');\n      formattedResponse.sessionId = utils.getText(resp, 'session_id');\n      formattedResponse.dialDest = utils.getText(resp, 'dial_dest');\n\n      if (formattedResponse.status === 'OK') {\n        utils.logMessage(\n          LOG_LEVELS.DEBUG,\n          'Warm Xfer to ' +\n            formattedResponse.dialDest +\n            ' processed successfully.',\n          response,\n        );\n      } else {\n        utils.logMessage(\n          LOG_LEVELS.WARN,\n          'There was an error processing the Warm Xfer request. ' +\n            formattedResponse.message +\n            '\\n' +\n            formattedResponse.detail,\n          response,\n        );\n      }\n\n      return formattedResponse;\n    };\n\n    var XferWarmCancelRequest = function (dialDest) {\n      this.dialDest = dialDest;\n    };\n\n    XferWarmCancelRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.XFER_WARM_CANCEL,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          uii: {\n            '#text': UIModel.getInstance().currentCall.uii,\n          },\n          dial_dest: {\n            '#text': utils.toString(this.dialDest),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var WebRTCRequest = function () {};\n\n    WebRTCRequest.prototype.getSipRegistrationInfo = function () {\n      UIModel.getInstance().WebRTCRequest = this;\n      _getSipRegistrationInfo('sip/sipRegistrationInfo', {\n        agentId: UIModel.getInstance().agentSettings.agentId,\n        ssoLogin: UIModel.getInstance().applicationSettings.isSso,\n      });\n    };\n\n    /*\n     * legacy response\n     * {\n     *   \"sipInfo\": [\n     *       {\n     *           \"transport\": \"wss\",\n     *           \"username\": \"yadvendra_agent\",\n     *           \"password\": \"oct@2018\",\n     *           \"domain\": \"d03-reg1.vacd.biz\",\n     *           \"outboundProxy\": \"d03-reg1.vacd.biz:8089/freeswitch\"\n     *       }\n     *   ]\n     * }\n     *\n     * RC SSO response\n     * {\n     *   \"sipInfo\": [\n     *       {\n     *           \"transport\": \"WSS\",\n     *           \"username\": \"18662032059*101\",\n     *           \"password\": \"B77O85vO\",\n     *           \"authorizationId\": \"400017513008\",\n     *           \"domain\": \"sip-cfintams.lab.nordigy.ru\",\n     *           \"outboundProxy\": \"webphone-sip-cfintams.lab.nordigy.ru:8083\"\n     *       }\n     *   ]\n     * }\n     * */\n    WebRTCRequest.prototype.processResponse = function (response) {\n      var softphoneSettings = UIModel.getInstance().softphoneSettings;\n      softphoneSettings.sipInfo = response.sipInfo;\n\n      return softphoneSettings.sipInfo;\n    };\n\n    function _getSipRegistrationInfo(path, queryParams) {\n      var model = UIModel.getInstance();\n      var baseUrl = model.authHost + model.baseApiUri;\n      var engageAccessToken =\n        'Bearer ' +\n        utils.toString(\n          UIModel.getInstance().authenticateRequest.engageAccessToken,\n        );\n      var params = {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      };\n\n      params.headers['Authorization'] = engageAccessToken;\n      params['queryParams'] = queryParams;\n      var errorMsg =\n        'Error on request get to sip registration info. URL: ' + baseUrl + path;\n\n      new HttpService(baseUrl).httpGet(path, params).then(\n        function (response) {\n          try {\n            response = JSON.parse(response.response);\n            var webRTCResponse = UIModel.getInstance().WebRTCRequest.processResponse(\n              response,\n            );\n            model.softphoneSettings.lastSipFetchTime = Date.now();\n            utils.fireCallback(\n              UIModel.getInstance().libraryInstance,\n              CALLBACK_TYPES.WEBRTC_INFO,\n              webRTCResponse,\n            );\n          } catch (err) {\n            utils.logMessage(LOG_LEVELS.WARN, errorMsg, err);\n          }\n        },\n        function (err) {\n          var errResponse = {\n            type: 'Error retrieving sip registration information',\n            message: errorMsg,\n          };\n          utils.logMessage(LOG_LEVELS.WARN, errorMsg, err);\n\n          // still fire callback on error response\n          utils.fireCallback(\n            UIModel.getInstance().libraryInstance,\n            CALLBACK_TYPES.WEBRTC_INFO,\n            errResponse,\n          );\n        },\n      );\n    }\n    var ChatAgentEndRequest = function (agentId, uii) {\n      this.uii = uii;\n      this.agentId = agentId;\n    };\n\n    /*\n\nExternal Chat :\nwhen agent submits a chat end request, send \"CHAT-AGENT-END\" request to IntelliQueue\n\n{\n    \"ui_request\" : {\n        \"@destination\" : \"IQ\",\n        \"@type\" : MESSAGE_TYPES.CHAT_AGENT_END,\n        \"uii\":{\n            \"#text\":utils.toString(this.uii)\n        },\n        \"agent_id\":{\n            \"#text\":utils.toString(this.agentId)\n        }\n    }\n}\n\n*/\n\n    ChatAgentEndRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CHAT_AGENT_END,\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n          agent_id: {\n            '#text': utils.toString(this.agentId),\n          },\n          operation_id: {\n            '#text': utils.generateOpId(),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n    /** Deprecated */\n    var ChatAliasRequest = function (alias) {\n      this.alias = alias;\n    };\n\n    /*\n     * This class is responsible for creating the request to change chat alias\n     * packet and sending it to intelliservices.\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@message_id\":\"UI200809291036128\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"CHAT-ALIAS\",\n     *      \"alias\":{\"#text\":\"\"}\n     *    }\n     * }\n     */\n    ChatAliasRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IS',\n          '@type': MESSAGE_TYPES.CHAT_ALIAS,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          alias: {\n            '#text': utils.toString(this.alias),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var ChatDispositionRequest = function (\n      uii,\n      agentId,\n      dispositionId,\n      notes,\n      sendAcknowlegement,\n      survey,\n      sessionId,\n    ) {\n      this.uii = uii;\n      this.agentId = agentId;\n      this.dispositionId = dispositionId;\n      this.notes = notes || '';\n      this.sendAcknowlegement = sendAcknowlegement || false;\n      this.sessionId = sessionId;\n\n      /*\n       * survey = {\n       *      first_name: {\n       *          leadField: \"first_name\"\n       *          value: \"Geoff\"\n       *      },\n       *      last_name: {\n       *          leadField: \"last_name\"\n       *          value: \"Mina\"\n       *      }\n       *      ...\n       * }\n       */\n      this.survey = survey || null;\n    };\n\n    /*\n     * External Chat:\n     * When agent dispositions a chat, send \"CHAT-DISPOSITION\" request to IntelliQueue\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@type\":\"CHAT-DISPOSITION\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"uii\":{\"#text\":\"\"},\n     *      \"agent_id\":{\"#text\":\"\"},\n     *      \"session_id\" : {\"#text\" : \"\"},\n     *      \"disposition_id\":{\"#text\":\"\"},\n     *      \"notes\":{\"#text\":\"hello\"},\n     *      \"do_ack\":{\"#text\":\"true\"},\n     *      \"survey\":{\n     *          \"response\":[\n     *              {\"@extern_id\":\"text_box\",\"#text\":\"hello\"},\n     *              {\"@extern_id\":\"check_box\",\"#text\":\"20\"},\n     *              {\"@extern_id\":\"radio_save\",\"#text\":\"23\"}\n     *          ]\n     *      }\n     *    }\n     * }\n     */\n    ChatDispositionRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CHAT_DISPOSITION,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n          agent_id: {\n            '#text': utils.toString(this.agentId),\n          },\n          session_id: {\n            '#text': utils.toString(this.sessionId),\n          },\n          disposition_id: {\n            '#text': utils.toString(this.dispositionId),\n          },\n          notes: {\n            '#text': utils.toString(this.notes),\n          },\n          do_ack: {\n            '#text': this.sendAcknowlegement === true ? 'TRUE' : 'FALSE',\n          },\n        },\n      };\n\n      /*\n       * converts survey to this response\n       * survey : {\n       *      response: [\n       *          { \"@extern_id\":\"\", \"@lead_update_column\":\"\", \"#text\":\"\" }\n       *      ]\n       * }\n       */\n      if (this.survey !== null) {\n        var response = [];\n        var keys = Object.keys(this.survey);\n        for (var i = 0; i < keys.length; i++) {\n          var key = keys[i];\n          var obj = {\n            '@extern_id': key,\n            '#text': utils.toString(this.survey[key].value),\n          };\n          response.push(obj);\n        }\n        msg.ui_request.survey = { response: response };\n      }\n\n      return JSON.stringify(msg);\n    };\n\n    var ChatListRequest = function (agentId, monitorAgentId) {\n      this.agentId = agentId;\n      this.monitorAgentId = monitorAgentId;\n    };\n\n    /*\n     * External Chat:\n     * Requests a list of all chats by monitor agent id\n     *\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@type\":\"CHAT-LIST\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"agent_id\":{\"#text\":\"\"},\n     *      \"monitor_agent_id\":{\"#text\":\"\"}\n     *    }\n     * }\n     */\n\n    ChatListRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CHAT_LIST,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(this.agentId),\n          },\n          monitor_agent_id: {\n            '#text': utils.toString(this.monitorAgentId),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * External Chat:\n     * This class is responsible for handling \"CHAT-LIST\" packets from IntelliQueue.\n     *\n     *  {\n     *      \"ui_response\":{\n     *          \"@message_id\":\"IQ10012016081611595000289\",\n     *          \"@type\":\"CHAT-LIST\",\n     *          \"@response_to\":\"\",\n     *          \"agent_id\":{\"#text\":\"17\"},\n     *          \"monitor_agent_id\":{\"#text\":\"18\"},\n     *          \"chat_list\": {}\n     *      }\n     *  }\n     */\n\n    ChatListRequest.prototype.processResponse = function (response) {\n      var notif = response.ui_response;\n      var model = UIModel.getInstance();\n      model.chatListResponse = response;\n      var formattedResponse = utils.buildDefaultResponse(response);\n\n      formattedResponse.message = 'Received CHAT-LIST response';\n      formattedResponse.status = 'OK';\n      formattedResponse.messageId = notif['@message_id'];\n      formattedResponse.agentId = utils.getText(notif, 'agent_id');\n      formattedResponse.monitorAgentId = utils.getText(\n        notif,\n        'monitor_agent_id',\n      );\n      formattedResponse.chatList = utils.processResponseCollection(\n        notif,\n        'chat_list',\n        'active_chat',\n      );\n\n      return formattedResponse;\n    };\n\n    var ChatMessageRequest = function (uii, agentId, message, whisper) {\n      this.uii = uii;\n      this.agentId = agentId;\n      this.message = message;\n      this.whisper = whisper;\n    };\n\n    /*\n     * External Chat:\n     * When agent submits a chat message, send \"CHAT-MESSAGE\" request to IntelliQueue\n     *\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@type\":\"CHAT-MESSAGE\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"uii\":{\"#text\":\"\"},\n     *      \"agent_id\":{\"#text\":\"\"},\n     *      \"message\":{\"#text\":\"hello\"},\n     *      \"whisper\":{\"#text\":\"true|false\"}\n     *    }\n     * }\n     */\n    ChatMessageRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CHAT_MESSAGE,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n          agent_id: {\n            '#text': utils.toString(this.agentId),\n          },\n          message: {\n            '#text': utils.toString(this.message),\n          },\n          whisper: {\n            '#text': utils.toString(this.whisper),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class is responsible for handling external CHAT-MESSAGE packets received from\n     * IntelliQueue.\n     *\n     * {\"ui_notification\":{\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"CHAT-MESSAGE\",\n     *      \"uii\":{\"#text\":\"\"},\n     *      \"account_id\":{\"#text\":\"\"},\n     *      \"from\":{\"#text\":\"\"},\n     *      \"message\":{\"#text\":\"hello\"},\n     *      \"dts\":{\"#text\":\"2017-05-10 12:40:28\"},\n     *      \"dequeue_agent_id\":{\"#text\":\"123\"},\n     *      \"whisper\":{\"#text\":'TRUE'|'FALSE'\"}\n     *    }\n     * }\n     */\n\n    ChatMessageRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_notification;\n      var dts = utils.getText(resp, 'dts').trim();\n      var dtsDate = new Date(dts.replace(' ', 'T'));\n\n      var formattedResponse = utils.buildDefaultResponse(response);\n      formattedResponse.status = 'OK';\n      formattedResponse.uii = utils.getText(resp, 'uii');\n      formattedResponse.accountId = utils.getText(resp, 'account_id');\n      formattedResponse.from = utils.getText(resp, 'from');\n      formattedResponse.type = utils.getText(resp, 'type');\n      formattedResponse.message = utils.getText(resp, 'message');\n      formattedResponse.whisper = utils.getText(resp, 'whisper');\n      formattedResponse.dequeueAgentId = utils.getText(\n        resp,\n        'dequeue_agent_id',\n      );\n      formattedResponse.dts = dtsDate;\n      formattedResponse.mediaLinks = utils.processResponseCollection(\n        resp,\n        'media_links',\n        'link',\n      );\n\n      utils.logMessage(\n        LOG_LEVELS.DEBUG,\n        'New CHAT-MESSAGE packet received from IntelliQueue',\n        response,\n      );\n\n      return formattedResponse;\n    };\n\n    var ChatPresentedResponseRequest = function (\n      uii,\n      messageId,\n      response,\n      responseReason,\n    ) {\n      this.uii = uii;\n      this.messageId = messageId;\n      this.response = response;\n      this.responseReason = responseReason || '';\n    };\n\n    /*\n     * External Chat:\n     * When Agent receives a CHAT-PRESENTED notification, respond with\n     * either ACCEPT or REJECT for presented chat.\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@type\":\"CHAT-PRESENTED-RESPONSE\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"uii\":{\"#text\":\"\"},\n     *      \"agent_id\":{\"#text\":\"\"},\n     *      \"response\":{\"#text\":\"ACCEPT|REJECT\"},\n     *      \"response_reason\":{\"#text\":\"\"}\n     *      \"operation_id\":{\"#text\":\"\"}\n     *    }\n     * }\n     */\n    ChatPresentedResponseRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CHAT_PRESENTED_RESPONSE,\n          '@message_id': utils.getMessageId(),\n          '@response_to': this.messageId,\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          response: {\n            '#text': utils.toString(this.response),\n          },\n          response_reason: {\n            '#text': utils.toString(this.responseReason),\n          },\n          operation_id: {\n            '#text': utils.generateOpId(),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var ChatRequeueRequest = function (\n      uii,\n      agentId,\n      chatQueueId,\n      skillId,\n      maintainAgent,\n    ) {\n      this.uii = uii;\n      this.agentId = agentId;\n      this.chatQueueId = chatQueueId;\n      this.skillId = skillId || '';\n      this.maintainAgent = maintainAgent || false;\n    };\n\n    /*\n     * External Chat:\n     * When agent submits a chat message, send \"CHAT-REQUEUE\" request to IntelliQueue\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@type\":\"CHAT-REQUEUE\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"operation_id\":{\"#text\":\"1234567890asdfghjklzxcvb\"}, // 24 character hex string, only set for Engage Digital Tasks\n     *      \"uii\":{\"#text\":\"\"},\n     *      \"agent_id\":{\"#text\":\"\"},\n     *      \"chat_queue_id\":{\"#text\":\"\"},\n     *      \"skill_id\":{\"#text\":\"\"},\n     *      \"maintain_agent\":{\"#text\":\"true|false\"}\n     *    }\n     * }\n     */\n    ChatRequeueRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CHAT_REQUEUE,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          operation_id: {\n            '#text': utils.generateOpId(),\n          },\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n          agent_id: {\n            '#text': utils.toString(this.agentId),\n          },\n          chat_queue_id: {\n            '#text': utils.toString(this.chatQueueId),\n          },\n          skill_id: {\n            '#text': utils.toString(this.skillId),\n          },\n          maintain_agent: {\n            '#text': utils.toString(this.maintainAgent),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /** Deprecated */\n    var ChatRoomRequest = function (\n      action,\n      roomType,\n      roomId,\n      agentOne,\n      agentTwo,\n    ) {\n      this.action = action;\n      this.roomType = roomType;\n      this.roomId = roomId;\n      this.agentOne = agentOne || '';\n      this.agentTwo = agentTwo || '';\n    };\n\n    /*\n     * This class is responsible for sending the packet requesting to either enter\n     * a chatroom, or to exit a chatroom to IS. It also handles private chats. There are\n     * two possible ways these packets could look:\n     *\n     * //PUBLIC\n     * {\"ui_request\":{\n     *      \"@destination\":\"IS\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"CHAT-ROOM\",\n     *      \"@room_type\":\"PUBLIC\",\n     *      \"room_id\":{\"#text\":\"\"},\n     *      \"action\":{\"#text\":\"EXIT|ENTER\"}\n     *    }\n     * }\n     * -OR-\n     * // PRIVATE\n     * {\"ui_request\":{\n     *      \"@destination\":\"IS\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"CHAT-ROOM\",\n     *      \"@room_type\":\"PRIVATE\",\n     *      \"agent_one\":{\"#text\":\"\"},\n     *      \"agent_two\":{\"#text\":\"\"},\n     *      \"action\":{\"#text\":\"ENTER|EXIT\"}\n     *    }\n     * }\n     *\n     */\n    ChatRoomRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IS',\n          '@type': MESSAGE_TYPES.CHAT_ROOM,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          action: {\n            '#text': utils.toString(this.action),\n          },\n        },\n      };\n\n      if (this.action !== 'EXIT') {\n        msg.ui_request['@room_type'] = this.roomType;\n      }\n\n      if (this.roomType === 'PRIVATE' && this.action === 'ENTER') {\n        msg.ui_request.agent_one = { '#text': utils.toString(this.agentOne) };\n        msg.ui_request.agent_two = { '#text': utils.toString(this.agentTwo) };\n      } else {\n        msg.ui_request.room_id = { '#text': utils.toString(this.roomId) };\n      }\n      return JSON.stringify(msg);\n    };\n\n    /** Deprecated */\n    var ChatRoomStateRequest = function () {};\n\n    /*\n     * This class is responsible for processing CHAT-ROOM-STATE packets received\n     * from IntelliServices.\n     *\n     * {\"ui_request\":{\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"CHAT-ROOM-STATE\",\n     *      \"room_id\":{\"#text\":\"\"},\n     *      \"agent_id\":{\"#text\":\"\"},\n     *      \"chat_alias\":{\"#text\":\"\"},\n     *      \"state\":{\"#text\":\"\"}\n     *    }\n     * }\n     */\n    ChatRoomStateRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_request;\n      var formattedResponse = {\n        roomId: utils.getText(resp, 'room_id'),\n        agentId: utils.getText(resp, 'agent_id'),\n        chatAlias: utils.getText(resp, 'chat_alias'),\n        state: utils.getText(resp, 'state'),\n      };\n\n      utils.logMessage(\n        LOG_LEVELS.DEBUG,\n        'Chat-Room-State update packet received for room #' +\n          formattedResponse.roomId,\n        response,\n      );\n      return formattedResponse;\n    };\n    /** Deprecated */\n    var ChatSendRequest = function (roomId, message) {\n      this.roomId = roomId;\n      this.message = message;\n    };\n\n    /*\n     * This class is responsible for creating the CHAT message packet and sending\n     * it to IntelliServices.\n     *\n     * {\"ui_request\":{\n     *      \"@destination\":\"IS\",\n     *      \"@message_id\":\"UI200809291036128\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"CHAT\",\n     *      \"room_id\":{\"#text\":\"\"}\n     *      \"message\":{\"#text\":\"\"}\n     *    }\n     * }\n     */\n    ChatSendRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IS',\n          '@type': MESSAGE_TYPES.CHAT_SEND,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          room_id: {\n            '#text': utils.toString(this.roomId),\n          },\n          message: {\n            '#text': utils.toString(this.message),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class is responsible for handling CHAT packets received from\n     * IntelliServices.\n     *\n     * //PUBLIC\n     * {\"ui_request\":{\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"CHAT\",\n     *      \"room_type\":\"GROUP\",\n     *      \"room_id\":{\"#text\":\"\"},\n     *      \"message\":{\"#text\":\"\"},\n     *      \"sender\":{\"#text\":\"\"},\n     *      \"sender_id\":{\"#text\":\"\"},\n     *      \"room_name\":{\"#text\":\"\"}\n     *    }\n     * }\n     * -OR-\n     * // PRIVATE\n     * {\"ui_request\":{\n     *      \"@dynamic_create\":\"TRUE\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"CHAT\",\n     *      \"room_type\":\"PRIVATE\",\n     *      \"room_id\":{\"#text\":\"\"},\n     *      \"message\":{\"#text\":\"\"},\n     *      \"sender\":{\"#text\":\"\"},\n     *      \"room_name\":{\"#text\":\"\"}\n     *    }\n     * }\n     */\n\n    ChatSendRequest.prototype.processResponse = function (response) {\n      var resp = response.ui_request;\n      var formattedResponse = {\n        roomType: utils.getText(resp, 'room_type'),\n        roomId: utils.getText(resp, 'room_id'),\n        message: utils.getText(resp, 'message'),\n        sender: utils.getText(resp, 'sender'),\n        senderId: utils.getText(resp, 'sender_id'),\n        roomName: utils.getText(resp, 'room_name'),\n        dynamicCreate: utils.getText(resp, 'dynamic_create') === 'TRUE',\n      };\n\n      utils.logMessage(\n        LOG_LEVELS.DEBUG,\n        'New CHAT packet received from IntelliServices',\n        response,\n      );\n\n      return formattedResponse;\n    };\n\n    var ChatTypingRequest = function (uii, message) {\n      this.uii = uii;\n      this.message = message;\n    };\n\n    /*\n     * External Chat:\n     * Agent sends typing message to notify client widgets,\n     * but the agent's pending message is not sent going this direction.\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@type\":\"CHAT-TYPING\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"uii\":{\"#text\":\"\"},\n     *      \"agent_id\":{\"#text\":\"\"},\n     *      \"message\":{\"#text\":\"\"}\n     *    }\n     * }\n     */\n    ChatTypingRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CHAT_TYPING,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          message: {\n            '#text': utils.toString(this.message),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var LeaveChatRequest = function (uii, agentId, sessionId) {\n      this.uii = uii;\n      this.agentId = agentId;\n      this.sessionId = sessionId;\n    };\n\n    /*\n     * External Chat:\n     * Requests to terminate a chat session on an existing chat uii\n     *\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@type\":\"CHAT-DROP-SESSION\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"uii\":{\"#text\":\"\"},\n     *      \"agent_id\":{\"#text\":\"\"},\n     *      \"session_id\":{\"#text\":\"\"}\n     *    }\n     * }\n     */\n    LeaveChatRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.LEAVE_CHAT,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          uii: {\n            '#text': utils.toString(this.uii),\n          },\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          session_id: {\n            '#text': utils.toString(this.sessionId),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var ChatManualSmsRequest = function (\n      agentId,\n      chatQueueId,\n      ani,\n      dnis,\n      message,\n    ) {\n      this.agentId = agentId;\n      this.chatQueueId = chatQueueId;\n      this.ani = ani;\n      this.dnis = dnis;\n      this.message = message;\n    };\n\n    /*\n     * External Chat:\n     * When agent submits a manual sms message, send \"MANUAL-SMS\" request to IntelliQueue\n     *\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@type\":\"MANUAL-SMS\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"agent_id\":{\"#text\":\"1995\"},\n     *      \"chatQueueId\":{\"#text\":\"44\"},\n     *      \"ani\":{\"#text\":\"1231231234\"},\n     *      \"dnis\":{\"#text\":\"5435435432\"},\n     *      \"message\":{\"#text\":\"hello\"}\n     *    }\n     * }\n     */\n    ChatManualSmsRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.CHAT_MANUAL_SMS,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(this.agentId),\n          },\n          chat_queue_id: {\n            '#text': utils.toString(this.chatQueueId),\n          },\n          ani: {\n            '#text': utils.toString(this.ani),\n          },\n          dnis: {\n            '#text': utils.toString(this.dnis),\n          },\n          message: {\n            '#text': utils.toString(this.message),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var MonitorChatRequest = function (monitorAgentId) {\n      this.monitorAgentId = monitorAgentId;\n    };\n\n    /*\n     * External Chat:\n     * Requests a new session on an existing chat uii\n     *\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@type\":\"CHAT-MONITOR\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"agent_id\":{\"#text\":\"\"},\n     *      \"monitor_agent_id\":{\"#text\":\"\"}\n     *    }\n     * }\n     */\n    MonitorChatRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.MONITOR_CHAT,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          monitor_agent_id: {\n            '#text': utils.toString(this.monitorAgentId),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    var StopMonitorChatRequest = function (monitorAgentId) {\n      this.monitorAgentId = monitorAgentId || '';\n    };\n\n    /*\n     * External Chat:\n     * Requests a termination of a chat monitor session for an agent\n     *\n     * {\"ui_request\":{\n     *      \"@destination\":\"IQ\",\n     *      \"@type\":\"CHAT-DROP-MONITORING-SESSION\",\n     *      \"@message_id\":\"\",\n     *      \"@response_to\":\"\",\n     *      \"agent_id\":{\"#text\":\"\"},\n     *      \"monitor_agent_id\":{\"#text\":\"\"}\n     *    }\n     * }\n     */\n    StopMonitorChatRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IQ',\n          '@type': MESSAGE_TYPES.STOP_MONITOR_CHAT,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': UIModel.getInstance().agentSettings.agentId,\n          },\n          monitor_agent_id: {\n            '#text': utils.toString(this.monitorAgentId),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * Process a CHAT-DROP-MONITORING-SESSION notification. Used to notify supervisor monitors that agent has logged out.\n     *\n     * {\"ui_notification\":{\n     *      \"@message_id\":\"IQ10012016080217135001344\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"CHAT-DROP-MONITORING-SESSION\",\n     *      \"monitored_agent_id\":{\"#text\":\"1\"}\n     *    }\n     * }\n     */\n    StopMonitorChatRequest.prototype.processResponse = function (data) {\n      var notif = data.ui_notification;\n\n      return { monitoredAgentId: utils.getText(notif, 'monitored_agent_id') };\n    };\n\n    /** Deprecated */\n    var SupervisorListRequest = function () {};\n\n    /*\n     * This class is responsible for creating a packet to request a list of\n     * supervisors from IntelliServices. This is used by the chat function so an\n     * agent can grab a list of supervisors and then select one for a private chat.\n     *\n     * {\"ui_request\":{\n     *      \"@destination\":\"IS\",\n     *      \"@message_id\":\"UI200809291036128\",\n     *      \"@response_to\":\"\",\n     *      \"@type\":\"SUPERVISOR-LIST\",\n     *      \"agent_id\":{\"#text\":\"\"}\n     *    }\n     * }\n     */\n    SupervisorListRequest.prototype.formatJSON = function () {\n      var msg = {\n        ui_request: {\n          '@destination': 'IS',\n          '@type': MESSAGE_TYPES.SUPERVISOR_LIST,\n          '@message_id': utils.getMessageId(),\n          '@response_to': '',\n          agent_id: {\n            '#text': utils.toString(\n              UIModel.getInstance().agentSettings.agentId,\n            ),\n          },\n        },\n      };\n\n      return JSON.stringify(msg);\n    };\n\n    /*\n     * This class is responsible for handling the SUPERVISOR-LIST packet\n     * rec'd from intelliservices. It will save a copy of this list in the\n     * UIModel under a variable called \"supervisors\". Whenever a new list\n     * is rec'd it is overwritten.\n     *\n     * {\"ui_response\":{\n     *      \"@message_id\":\"IQ982008082910361503344\",\n     *      \"@response_to\":\"\",\n     *      \"supervisor\":[\n     *          {\"id\":{\"#text\":\"\"}, \"fname\":{\"#text\":\"\"}, \"lname\":{\"#text\":\"\"}, \"uname\":{\"#text\":\"\"} }\n     *          {\"id\":{\"#text\":\"\"}, \"fname\":{\"#text\":\"\"}, \"lname\":{\"#text\":\"\"}, \"uname\":{\"#text\":\"\"} }\n     *      ]\n     *    }\n     * }\n     */\n\n    SupervisorListRequest.prototype.processResponse = function (response) {\n      var model = UIModel.getInstance();\n      var tempList = utils.processResponseCollection(\n        response,\n        'ui_response',\n        'supervisor',\n      );\n      var supervisors = [];\n\n      for (var i = 0; i < tempList.length; i++) {\n        var sup = tempList[i];\n        supervisors.push({\n          agentId: sup.id,\n          firstName: sup.fname,\n          lastName: sup.lname,\n          username: sup.uname,\n        });\n      }\n\n      utils.logMessage(\n        LOG_LEVELS.DEBUG,\n        'New supervisor list received ',\n        supervisors,\n      );\n      model.supervisors = supervisors;\n\n      return model.supervisors;\n    };\n\n    var ChatClientReconnectNotification = function () {};\n\n    /*\n     * External Chat:\n     * This class is responsible for handling \"CHAT-CLIENT-RECONNECT\" packets from IntelliQueue.\n     * This is sent when a chat connect message is sent to a non-archieved chat.\n     *\n     *  {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016081611595000289\",\n     *          \"@type\":\"CHAT-CLIENT-RECONNECT\",\n     *          \"@destination\":\"IQ\",\n     *          \"@response_to\":\"\",\n     *          \"account_id\":{\"#text\":\"99999999\"},\n     *          \"uii\":{\"#text\":\"201608161200240139000000000120\"}\n     *          \"agent_id\":{\"#text\":\"1\"}\n     *      }\n     *  }\n     */\n\n    ChatClientReconnectNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var notif = notification.ui_notification;\n      var formattedResponse = utils.buildDefaultResponse(notification);\n\n      formattedResponse.message = 'Received CHAT-CLIENT-RECONNECT notification';\n      formattedResponse.status = 'OK';\n      formattedResponse.accountId = utils.getText(notif, 'account_id');\n      formattedResponse.uii = utils.getText(notif, 'uii');\n      formattedResponse.agentId = utils.getText(notif, 'agent_id');\n\n      return formattedResponse;\n    };\n\n    var AddChatSessionNotification = function () {};\n\n    /*\n     * This class is responsible for handling \"ADD-CHAT-SESSION\" packets from IntelliQueue.\n     *\n     * {\n     *   \"ui_notification\": {\n     *       \"@message_id\": \"IQ982008082918151403727\",\n     *       \"@response_to\": \"\",\n     *       \"@type\": \"ADD-CHAT-SESSION\",\n     *       \"session_id\": { \"#text\": \"2\" },\n     *       \"uii\": { \"#text\": \"200808291814560000000900016558\" },\n     *       \"session_type\": { \"#text\": \"AGENT|MONITORING\" },\n     *       \"agent_id\": { \"#text\": \"1856\" } // null unless monitor type,\n     *       \"transcript\": { }\n     *   }\n     *  }\n     */\n    AddChatSessionNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var notif = notification.ui_notification;\n      var formattedResponse = utils.buildDefaultResponse(notification);\n\n      formattedResponse.status = 'OK';\n      formattedResponse.message = 'Received ADD-CHAT-SESSION notification';\n      formattedResponse.sessionId = utils.getText(notif, 'session_id');\n      formattedResponse.uii = utils.getText(notif, 'uii');\n      formattedResponse.sessionType = utils.getText(notif, 'session_type');\n      formattedResponse.agentId = utils.getText(notif, 'agent_id');\n      formattedResponse.transcript = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'transcript',\n      )[0];\n\n      return formattedResponse;\n    };\n\n    var ChatActiveNotification = function () {};\n\n    /*\n     * External Chat:\n     * This class is responsible for handling \"CHAT-ACTIVE\" packets from IntelliQueue.\n     * This is sent in response to an agent's CHAT-PRESENTED-RESPONSE accept request.\n     *\n     *  {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016081611595000289\",\n     *          \"@type\":\"CHAT-ACTIVE\",\n     *          \"@destination\":\"IQ\",\n     *          \"@response_to\":\"\",\n     *          \"account_id\":{\"#text\":\"99999999\"},\n     *          \"uii\":{\"#text\":\"201608161200240139000000000120\"},\n     *          \"is_monitoring\":{\"#text\":\"TRUE\"|\"FALSE\"}\n     *      }\n     *  }\n     */\n    ChatActiveNotification.prototype.processResponse = function (notification) {\n      var notif = notification.ui_notification;\n      var formattedResponse = utils.buildDefaultResponse(notification, true);\n\n      formattedResponse.message = 'Received CHAT-ACTIVE notification';\n      formattedResponse.status = 'OK';\n      formattedResponse.accountId = utils.getText(notif, 'account_id');\n      formattedResponse.uii = utils.getText(notif, 'uii');\n      formattedResponse.isMonitoring = utils.getText(notif, 'is_monitoring');\n\n      return formattedResponse;\n    };\n\n    var ChatAgentAssignFailureNotification = function () {};\n\n    /*\n     * This class is responsible for handling \"CHAT-AGENT-ASSIGN-FAILURE\" packets from IntelliQueue.\n     * This is sent to the agent when the last session is disconnected from a chat.\n     *\n     *  {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016081611595000289\",\n     *          \"@type\":\"CHAT-AGENT-ASSIGN-FAILURE\",\n     *          \"@destination\":\"IQ\",\n     *          \"operation_id\":{\"#text\":\"1234567890asdfghjklzxcvb\"}, // 24 character hex string, only set for Engage Digital Tasks\n     *          \"account_id\":{\"#text\":\"99999999\"},\n     *          \"uii\":{\"#text\":\"201608161200240139000000000120\"},\n     *          \"task_id\": {\"#text\":\"\"}\n     *      }\n     *  }\n     */\n\n    ChatAgentAssignFailureNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var notif = notification.ui_notification;\n\n      var agentAssignFailure = utils.buildDefaultResponse(notification, true);\n      agentAssignFailure.message =\n        'Received CHAT-AGENT-ASSIGN-FAILURE notification';\n      agentAssignFailure.status = 'OK';\n      agentAssignFailure.uii = utils.getText(notif, 'uii');\n      agentAssignFailure.taskId = utils.getText(notif, 'task_id');\n      agentAssignFailure.accountId = utils.getText(notif, 'account_id');\n\n      return agentAssignFailure;\n    };\n\n    var ChatCancelledNotification = function () {};\n\n    /*\n     * External Chat:\n     * This class is responsible for processing \"CHAT-CANCELLED\" packets from IntelliQueue.\n     * If an agent is presented a chat and doesn't respond before the timeout, the CHAT-CANCELLED\n     * message is sent from IQ.\n     *\n     *  {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016081611595000289\",\n     *          \"@type\":\"CHAT-CANCELLED\",\n     *          \"@destination\":\"IQ\",\n     *          \"@response_to\":\"\",\n     *          \"account_id\":{\"#text\":\"99999999\"},\n     *          \"operation_id\":{\"#text\":\"1234567890asdfghjklzxcvb\"},\n     *          \"uii\":{\"#text\":\"201608161200240139000000000120\"}\n     *      }\n     *  }\n     */\n    ChatCancelledNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var notif = notification.ui_notification;\n      var formattedResponse = utils.buildDefaultResponse(notification, true);\n\n      formattedResponse.message = 'Received CHAT-CANCELLED notification';\n      formattedResponse.status = 'OK';\n      formattedResponse.messageId = notif['@message_id'];\n      formattedResponse.accountId = utils.getText(notif, 'account_id');\n      formattedResponse.uii = utils.getText(notif, 'uii');\n\n      return formattedResponse;\n    };\n\n    var ChatInactiveNotification = function () {};\n\n    /*\n     * External Chat:\n     * This class is responsible for handling \"CHAT-INACTIVE\" packets from IntelliQueue.\n     * This is sent to the agent when the last session is disconnected from a chat.\n     *\n     *  {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016081611595000289\",\n     *          \"@type\":\"CHAT-INACTIVE\",\n     *          \"@destination\":\"IQ\",\n     *          \"@response_to\":\"\",\n     *          \"operation_id\":{\"#text\":\"1234567890asdfghjklzxcvb\"}, // 24 character hex string, only set for Engage Digital Tasks\n     *          \"account_id\":{\"#text\":\"99999999\"},\n     *          \"uii\":{\"#text\":\"201608161200240139000000000120\"},\n     *          \"disposition_timeout\":{\"#text\":\"30\"},\n     *          \"dequeue_agent_id\":{\"#text\":\"123\"}\n     *      }\n     *  }\n     */\n    ChatInactiveNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var notif = notification.ui_notification;\n      var formattedResponse = utils.buildDefaultResponse(notification, true);\n\n      formattedResponse.message = 'Received CHAT-INACTIVE notification';\n      formattedResponse.status = 'OK';\n      formattedResponse.accountId = utils.getText(notif, 'account_id');\n      formattedResponse.uii = utils.getText(notif, 'uii');\n      formattedResponse.dispositionTimeout = utils.getText(\n        notif,\n        'disposition_timeout',\n      );\n      formattedResponse.dequeueAgentId = utils.getText(\n        notif,\n        'dequeue_agent_id',\n      );\n\n      return formattedResponse;\n    };\n\n    var ChatPresentedNotification = function () {};\n\n    /*\n     * External Chat:\n     * This class is responsible for handling \"CHAT-PRESENTED\" packets from IntelliQueue.\n     * When this notification is received, the Agent can either Accept or Decline which will\n     * be sent back to IntelliQueue as a CHAT-PRESENTED-RESPONSE.\n     *\n     *  {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016081611595000289\",\n     *          \"@type\":\"CHAT-PRESENTED\",\n     *          \"@destination\":\"IQ\",\n     *          \"@response_to\":\"\",\n     *          \"task_id\":{\"#text\":\"123\"}, // only applicable for Engage Digital tasks\n     *          \"operation_id:{\"#text\":\"1234567890asdfghjklzxcvb\"} // 24 character hex string, only set for Engage Digital Tasks\n     *          \"chat_queue_id\":{\"#text\":\"3\"},\n     *          \"chat_queue_name\":{\"#text\":\"Support Chat\"},\n     *          \"account_id\":{\"#text\":\"99999999\"},\n     *          \"uii\":{\"#text\":\"201608161200240139000000000120\"},\n     *          \"channel_type\":{\"#text\":\"email\"},\n     *          \"allow_accept\":{\"#text\":\"TRUE|FALSE\"},\n     *          \"is_reconnect\":{\"#text\":\"TRUE|FALSE\"}\n     *          \"ed_source_id\":{\"#text\":\"5ec6d788f3b1490008773a10\"},\n     *          \"ed_category_ids\":{\"#text\": \"5ec6b48ff3b14900087739eb,5ec6b4c2f3b14900087739f1,5f11dff7fcd72e0007c53b3e\"},\n     *          \"ed_language_id\":{\"#text\":\"en\"},\n     *          \"ed_author_screen_name\":{\"#text\":\"Joe Smith\"},\n     *          \"ed_created_at\":{\"#text\":\"Thu Aug 20 08:21:00 UTC 2020\"},\n     *      }\n     *  }\n     */\n    ChatPresentedNotification.prototype.processResponse = function (\n      notification,\n    ) {\n      var notif = notification.ui_notification;\n      var edSourceId = utils.getText(notif, 'ed_source_id');\n      var edLanguageId = utils.getText(notif, 'ed_language_id');\n      var edCategoryIds = utils.getText(notif, 'ed_category_ids').split(',');\n      var taskId = utils.getText(notif, 'task_id');\n      var model = UIModel.getInstance();\n      var edSourceName = '';\n      var edSourceColor = 0;\n      var edLanguage = '';\n      var edCategories = [];\n      var processedResponse;\n      var instance = model.libraryInstance;\n\n      if (taskId) {\n        // look in cached values to see if we have ED info already loaded\n        var mainAccountId = model.authenticateRequest.mainAccountId;\n        var cachedSourceList =\n          model.applicationSettings.edSources[mainAccountId];\n        var cachedLanguageList =\n          model.applicationSettings.edLanguages[mainAccountId];\n        var cachedCategoryList =\n          model.applicationSettings.edCategories[mainAccountId];\n\n        var sourceCache = _getEdValue(cachedSourceList, edSourceId);\n        var languageCache = _getEdValue(cachedLanguageList, edLanguageId);\n        var categoryCache = _getMultiEdValues(\n          cachedCategoryList,\n          edCategoryIds,\n        );\n\n        var edProxyPath = 'digital-api-proxy/evMainAccount/' + mainAccountId;\n\n        if (\n          !sourceCache.isCached ||\n          !languageCache.isCached ||\n          !categoryCache.isCached\n        ) {\n          // make sure access token is valid by just getting fresh token\n          utils.refreshAccessToken().then(function () {\n            var authToken = model.authenticateRequest.engageAccessToken;\n            var sourceErrorMsg = 'Error retrieving ED source name from ETR.';\n            var languageErrorMsg =\n              'Error retrieving ED language name from ETR.';\n            var categoriesErrorMsg = 'Error retrieving ED categories from ETR.';\n            var sourcePromise, languagePromise, categoriesPromise;\n\n            if (sourceCache.isCached) {\n              edSourceName = sourceCache.name;\n              edSourceColor = sourceCache.color;\n            } else {\n              sourcePromise = _buildEtrHttpRequest(\n                edProxyPath + '/sources',\n                authToken,\n              );\n            }\n\n            if (languageCache.isCached) {\n              edLanguage = languageCache.name;\n            } else {\n              languagePromise = _buildEtrHttpRequest(\n                edProxyPath + '/languages',\n                authToken,\n              );\n            }\n\n            if (categoryCache.isCached) {\n              edCategories = categoryCache.names;\n            } else {\n              categoriesPromise = _buildEtrHttpRequest(\n                edProxyPath + '/categories',\n                authToken,\n              );\n            }\n\n            if (sourcePromise) {\n              sourcePromise.then(\n                function (sourceResponse) {\n                  try {\n                    var sourceList = JSON.parse(sourceResponse.response);\n                    model.applicationSettings.edSources[\n                      mainAccountId\n                    ] = sourceList; // store returned sources in memory for later use\n\n                    var currentSource = _getEdValue(sourceList, edSourceId);\n                    edSourceName = currentSource.name;\n                    edSourceColor = currentSource.color || 0;\n                  } catch (err) {\n                    utils.logMessage(LOG_LEVELS.WARN, sourceErrorMsg, err);\n                  }\n                },\n                function (err) {\n                  utils.logMessage(LOG_LEVELS.WARN, sourceErrorMsg, err);\n                },\n              );\n            }\n\n            if (languagePromise) {\n              languagePromise.then(\n                function (languageResponse) {\n                  try {\n                    var languageList = JSON.parse(languageResponse.response);\n                    model.applicationSettings.edLanguages[\n                      mainAccountId\n                    ] = languageList; // store returned languages in memory for later use\n                    edLanguage = _getEdValue(languageList, edLanguageId).name;\n                  } catch (err) {\n                    utils.logMessage(LOG_LEVELS.WARN, languageErrorMsg, err);\n                  }\n                },\n                function (err) {\n                  utils.logMessage(LOG_LEVELS.WARN, languageErrorMsg, err);\n                },\n              );\n            }\n\n            if (categoriesPromise) {\n              categoriesPromise.then(\n                function (categoryResponse) {\n                  try {\n                    var categoryList = JSON.parse(categoryResponse.response);\n                    model.applicationSettings.edCategories[\n                      mainAccountId\n                    ] = categoryList; // store returned categories in memory for later use\n                    edCategories = _getMultiEdValues(\n                      categoryList,\n                      edCategoryIds,\n                    ).names;\n                  } catch (err) {\n                    utils.logMessage(LOG_LEVELS.WARN, categoriesErrorMsg, err);\n                  }\n                },\n                function (err) {\n                  utils.logMessage(LOG_LEVELS.WARN, categoriesErrorMsg, err);\n                },\n              );\n            }\n\n            Promise.all([\n              sourcePromise,\n              languagePromise,\n              categoriesPromise,\n            ]).then(\n              function () {\n                processedResponse = _buildPresentedResponse(\n                  notification,\n                  edSourceName,\n                  edSourceColor,\n                  edLanguage,\n                  edCategories,\n                );\n                utils.fireCallback(\n                  instance,\n                  CALLBACK_TYPES.CHAT_PRESENTED,\n                  processedResponse,\n                );\n                return processedResponse;\n              },\n              function (err) {\n                utils.logMessage(\n                  LOG_LEVELS.WARN,\n                  'Error resolving ETR API promises',\n                  err,\n                );\n                processedResponse = _buildPresentedResponse(\n                  notification,\n                  edSourceName,\n                  edSourceColor,\n                  edLanguage,\n                  edCategories,\n                );\n                utils.fireCallback(\n                  instance,\n                  CALLBACK_TYPES.CHAT_PRESENTED,\n                  processedResponse,\n                );\n                return processedResponse;\n              },\n            );\n          });\n        } else {\n          // all values cached\n          edSourceName = sourceCache.name;\n          edSourceColor = sourceCache.color;\n          edLanguage = languageCache.name;\n          edCategories = categoryCache.names;\n          processedResponse = _buildPresentedResponse(\n            notification,\n            edSourceName,\n            edSourceColor,\n            edLanguage,\n            edCategories,\n          );\n          utils.fireCallback(\n            instance,\n            CALLBACK_TYPES.CHAT_PRESENTED,\n            processedResponse,\n          );\n          return processedResponse; // for testing\n        }\n      } else {\n        // not task\n        processedResponse = _buildPresentedResponse(\n          notification,\n          edSourceName,\n          edSourceColor,\n          edLanguage,\n          edCategories,\n        );\n        utils.fireCallback(\n          instance,\n          CALLBACK_TYPES.CHAT_PRESENTED,\n          processedResponse,\n        );\n        return processedResponse; // for testing\n      }\n    };\n\n    function _buildEtrHttpRequest(path, authorizationToken) {\n      var model = UIModel.getInstance();\n      var baseUrl = model.authHost + model.baseEtrUri;\n      var params = {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer ' + authorizationToken,\n        },\n      };\n\n      return new HttpService(baseUrl).httpGet(path, params);\n    }\n\n    function _getEdValue(list, id) {\n      var idx;\n      var isCached = false;\n      var name = '';\n      var color; // only present for source objects\n\n      if (list) {\n        for (idx = 0; idx < list.length; idx++) {\n          if (list[idx].id === id) {\n            name = list[idx].name;\n            isCached = true;\n            if (list[idx].color) {\n              color = list[idx].color;\n            }\n          }\n        }\n      }\n\n      var returnObj = { isCached: isCached, name: name };\n      if (color) {\n        returnObj.color = color;\n      }\n\n      return returnObj;\n    }\n\n    function _getMultiEdValues(searchList, ids) {\n      var idIndex;\n      var edValue;\n      var isCached = false;\n      var names = [];\n\n      if (searchList) {\n        for (idIndex = 0; idIndex < ids.length; idIndex++) {\n          edValue = _getEdValue(searchList, ids[idIndex]);\n          names.push(edValue.name);\n          if (edValue.isCached) {\n            isCached = true;\n          }\n        }\n      }\n      return { isCached: isCached, names: names };\n    }\n\n    function _buildPresentedResponse(\n      notification,\n      edSourceName,\n      edSourceColor,\n      edLanguage,\n      edCategories,\n    ) {\n      var notif = notification.ui_notification;\n      var formattedResponse = utils.buildDefaultResponse(notification, true);\n\n      formattedResponse.message = 'Received CHAT-PRESENTED notification';\n      formattedResponse.status = 'OK';\n      formattedResponse.messageId = notif['@message_id'];\n      formattedResponse.accountId = utils.getText(notif, 'account_id');\n      formattedResponse.uii = utils.getText(notif, 'uii');\n      formattedResponse.channelType = utils.getText(notif, 'channel_type');\n      formattedResponse.taskId = utils.getText(notif, 'task_id');\n      formattedResponse.chatQueueId = utils.getText(notif, 'chat_queue_id');\n      formattedResponse.chatQueueName = utils.getText(notif, 'chat_queue_name');\n      formattedResponse.allowAccept = utils.getText(notif, 'allow_accept');\n      formattedResponse.isReconnect = utils.getText(notif, 'is_reconnect');\n      formattedResponse.edAuthorScreenName = utils.getText(\n        notif,\n        'ed_author_screen_name',\n      );\n      formattedResponse.edCreatedAt = utils.getText(notif, 'ed_created_at');\n      formattedResponse.edSourceName = edSourceName;\n      formattedResponse.sourceColor = edSourceColor;\n      formattedResponse.edLanguage = edLanguage;\n      formattedResponse.edCategories = edCategories;\n\n      return formattedResponse;\n    }\n\n    var ChatTypingNotification = function () {};\n\n    /*\n     * External Chat:\n     * This class is responsible for handling \"CHAT-TYPING\" packets from IntelliQueue.\n     * When this notification is received, the AgentUI will show the pending message\n     * so far from the client chat widget and typing notification.\n     *\n     *  {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016081611595000289\",\n     *          \"@type\":\"CHAT-TYPING\",\n     *          \"@destination\":\"IQ\",\n     *          \"@response_to\":\"\",\n     *          \"uii\":{\"#text\":\"201608161200240139000000000120\"},\n     *          \"account_id\":{\"#text\":\"99999999\"},\n     *          \"from\":{\"#text\":\"\"},\n     *          \"message\":{\"#text\":\"this is the message before actual send\"}\n     *          \"dequeue_agent_id\":{\"#text\":\"123\"}\n     *      }\n     *  }\n     */\n    ChatTypingNotification.prototype.processResponse = function (notification) {\n      var notif = notification.ui_notification;\n      var formattedResponse = utils.buildDefaultResponse(notification);\n\n      formattedResponse.message = 'Received CHAT-TYPING notification';\n      formattedResponse.status = 'OK';\n      formattedResponse.accountId = utils.getText(notif, 'account_id');\n      formattedResponse.uii = utils.getText(notif, 'uii');\n      formattedResponse.from = utils.getText(notif, 'from');\n      formattedResponse.type = utils.getText(notif, 'type');\n      formattedResponse.pendingMessage = utils.getText(notif, 'message');\n      formattedResponse.dequeueAgentId = utils.getText(\n        notif,\n        'dequeue_agent_id',\n      );\n\n      return formattedResponse;\n    };\n\n    var LoadMediaNotification = function () {};\n\n    /*\n     * Engage Digital Chat:\n     * This class is responsible for handling \"LOAD-MEDIA\" packets from IntelliQueue.\n     *\n     *  {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016081611595000289\",\n     *          \"@type\":\"LOAD-MEDIA\",\n     *          \"@destination\":\"IQ\",\n     *          \"@response_to\":\"\",\n     *          \"uii\":{\"#text\":\"201608161200240139000000000120\"},\n     *          \"task_id\":{\"#text\":\"\"}\n     *          \"operation_id\":{\"#text\":\"\"}\n     *          \"account_id\":{\"#text\":\"99999999\"},\n     *          \"session_id\":{\"#text\":\"2\"},\n     *          \"agent_id\":{\"#text\":\"1180958\"},\n     *          \"queue_dts\":{\"#text\":\"\"},\n     *          \"queue_time\":{\"#text\":\"\"},\n     *          \"chat_queue_id\":{\"#text\":\"\"},\n     *          \"chat_queue_name\":{\"#text\":\"\"},\n     *          \"chat_requeue_type\" : {\"#text\":\"\"}\n     *          \"channel_type\":{\"#text\":\"ENGAGE-DIGITAL\"},\n     *          \"idle_timeout\":{\"#text\":\"\"},\n     *          \"chat_dispositions\":{\n     *              \"disposition\":[\n     *                  { \"@disposition_id\":\"2\", \"@is_success\":\"true\", \"@is_complete\":\"false\", \"@is_default\"=\"0\", \"@email_template_id\":\"1\", \"#text\":\"Complete\"},\n     *                  { \"@disposition_id\":\"3\", \"@is_success\":\"true\", \"@is_complete\":\"false\", \"@is_default\"=\"0\", \"#text\":\"Requeue\"}\n     *              ]\n     *          },\n     *          \"chat_requeue_shortcuts\" :{\n     *              shortcut : [\n     *                {@chat_requeue_shortcut_id:\"3\", @name:\"test\", @rank:\"1\",@requeue_chat_queue_id:\"74\",@skill_id:\"\"}\n     *              ]\n     *          }\n     *      }\n     *  }\n     */\n    LoadMediaNotification.prototype.processResponse = function (notification) {\n      var notif = notification.ui_notification;\n\n      var dts = utils.getText(notif, 'queue_dts');\n      dts = new Date(dts.replace(' ', 'T'));\n\n      var newTask = utils.buildDefaultResponse(notification, true);\n\n      newTask.message = 'Received LOAD-MEDIA notification';\n      newTask.status = 'OK';\n      newTask.uii = utils.getText(notif, 'uii');\n      newTask.taskId = utils.getText(notif, 'task_id');\n      newTask.accountId = utils.getText(notif, 'account_id');\n      newTask.sessionId = utils.getText(notif, 'session_id');\n      newTask.agentId = utils.getText(notif, 'agent_id');\n      newTask.queueDts = dts;\n      newTask.queueTime = utils.getText(notif, 'queue_time');\n      newTask.chatQueueId = utils.getText(notif, 'chat_queue_id');\n      newTask.chatQueueName = utils.getText(notif, 'chat_queue_name');\n      newTask.chatRequeueType = utils.getText(notif, 'chat_requeue_type');\n      newTask.channelType = utils.getText(notif, 'channel_type');\n      newTask.idleTimeout = utils.getText(notif, 'idle_timeout');\n\n      newTask.requeueShortcuts = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'chat_requeue_shortcuts',\n        'shortcut',\n      )[0];\n      newTask.chatDispositions = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'chat_dispositions',\n        'disposition',\n      )[0];\n\n      if (newTask.chatDispositions && newTask.chatDispositions.disposition) {\n        newTask.chatDispositions.dispositions = [newTask.chatDispositions];\n      } else {\n        newTask.chatDispositions = newTask.chatDispositions.dispositions;\n      }\n\n      // convert numbers to boolean\n      if (newTask.chatDispositions) {\n        for (var d = 0; d < newTask.chatDispositions.length; d++) {\n          var disp = newTask.chatDispositions[d];\n          disp.isComplete = disp.isComplete === '1';\n          disp.isSuccess = disp.isSuccess === '1';\n          disp.isDefault = disp.isDefault === '1';\n        }\n      }\n\n      // Build token map\n      newTask.baggage = buildTaskTokenMap(newTask);\n\n      return newTask;\n    };\n\n    function buildTaskTokenMap(newTask) {\n      var tokens = {};\n      var model = UIModel.getInstance();\n\n      try {\n        tokens['chatQueueId'] = newTask.chatQueueId;\n        tokens['chatQueueName'] = newTask.chatQueueName;\n        tokens['uii'] = newTask.uii;\n      } catch (any) {\n        console.error(\n          'There was an error parsing chat tokens for basic chat info. ',\n          any,\n        );\n      }\n\n      try {\n        tokens['agentFirstName'] = model.agentSettings.firstName;\n        tokens['agentLastName'] = model.agentSettings.lastName;\n        tokens['agentExternalId'] = model.agentSettings.externalAgentId;\n        tokens['agentType'] = model.agentSettings.agentType;\n        tokens['agentEmail'] = model.agentSettings.email;\n        tokens['agentUserName'] = model.agentSettings.username;\n      } catch (any) {\n        console.error(\n          'There was an error parsing chat tokens for agent info. ',\n          any,\n        );\n      }\n\n      return tokens;\n    }\n\n    var NewChatNotification = function () {};\n\n    /*\n     * External Chat:\n     * This class is responsible for handling \"NEW-CHAT\" packets from IntelliQueue.\n     *\n     *  {\n     *      \"ui_notification\":{\n     *          \"@message_id\":\"IQ10012016081611595000289\",\n     *          \"@type\":\"NEW-CHAT\",\n     *          \"@destination\":\"IQ\",\n     *          \"@response_to\":\"\",\n     *          \"uii\":{\"#text\":\"201608161200240139000000000120\"},\n     *          \"account_id\":{\"#text\":\"99999999\"},\n     *          \"session_id\":{\"#text\":\"2\"},\n     *          \"agent_id\":{\"#text\":\"1180958\"},\n     *          \"queue_dts\":{\"#text\":\"\"},\n     *          \"queue_time\":{\"#text\":\"\"},\n     *          \"chat_queue_id\":{\"#text\":\"\"},\n     *          \"chat_queue_name\":{\"#text\":\"\"},\n     *          \"chat_requeue_type\" : {\"#text\":\"\"}\n     *          \"app_url\":{\"#text\":\"\"},\n     *          \"channel_type\":{\"#text\":\"\"},\n     *          \"ani\":{\"#text\":\"\"},\n     *          \"dnis\":{\"#text\":\"\"},\n     *          \"survey_pop_type\":{\"#text\":\"\"},\n     *          \"script_id\":{\"#text\":\"\"},\n     *          \"script_version\":{\"#text\":\"\"},\n     *          \"idle_timeout\":{\"#text\":\"\"},\n     *          \"is_monitoring\":{#text\":\"TRUE\"|\"FALSE\"},\n     *          \"monitored_agent_id\":{\"#text\":\"123\"| \"\"} <-- only populated if is_monitoring == TRUE\n     *          \"chat_dispositions\":{\n     *              \"disposition\":[\n     *                  { \"@disposition_id\":\"2\", \"@is_success\":\"true\", \"@is_complete\":\"false\", \"@is_default\"=\"0\", \"@email_template_id\":\"1\", \"#text\":\"Complete\"},\n     *                  { \"@disposition_id\":\"3\", \"@is_success\":\"true\", \"@is_complete\":\"false\", \"@is_default\"=\"0\", \"#text\":\"Requeue\"}\n     *              ]\n     *          },\n     *          \"chat_requeue_shortcuts\" :{\n     *              shortcut : [\n     *                {@chat_requeue_shortcut_id:\"3\", @name:\"test\", @rank:\"1\",@requeue_chat_queue_id:\"74\",@skill_id:\"\"}\n     *              ]\n     *          }\n     *          \"transcript\":{\n     *              \"message\":[\n     *                  { \"@from\":\"system\", \"@type\":\"SYSTEM\", \"@whisper\":\"FALSE\", \"@dts\":\"yyyy-MM-dd HH:mm:ss\", \"#text\":\"User1 connected\"},\n     *                  { \"@from\":\"dlbooks\", \"@type\":\"AGENT\", \"@whisper\":\"FALSE\", \"@dts\":\"yyyy-MM-dd HH:mm:ss\", \"#text\":\"Hello\"},\n     *                  { \"@from\":\"user1\", \"@type\":\"CLIENT\", \"@whisper\":\"FALSE\", \"@dts\":\"yyyy-MM-dd HH:mm:ss\", \"#text\":\"Hi\"}\n     *              ]\n     *          },\n     *          \"json_baggage\":{\"#text\":\"json_string_form_data\"}, <--- pre-form chat data\n     *      }\n     *  }\n     */\n    NewChatNotification.prototype.processResponse = function (notification) {\n      var notif = notification.ui_notification;\n\n      var dts = utils.getText(notif, 'queue_dts');\n      dts = new Date(dts.replace(' ', 'T'));\n\n      var newChat = utils.buildDefaultResponse(notification);\n      newChat.message = 'Received NEW-CHAT notification';\n      newChat.status = 'OK';\n      newChat.uii = utils.getText(notif, 'uii');\n      newChat.accountId = utils.getText(notif, 'account_id');\n      newChat.sessionId = utils.getText(notif, 'session_id');\n      newChat.agentId = utils.getText(notif, 'agent_id');\n      newChat.queueDts = dts;\n      newChat.queueTime = utils.getText(notif, 'queue_time');\n      newChat.chatQueueId = utils.getText(notif, 'chat_queue_id');\n      newChat.chatQueueName = utils.getText(notif, 'chat_queue_name');\n      newChat.chatRequeueType = utils.getText(notif, 'chat_requeue_type');\n      newChat.appUrl = utils.getText(notif, 'app_url');\n      newChat.channelType = utils.getText(notif, 'channel_type');\n      newChat.ani = utils.getText(notif, 'ani');\n      newChat.dnis = utils.getText(notif, 'dnis');\n      newChat.surveyPopType = utils.getText(notif, 'survey_pop_type');\n      newChat.scriptId = utils.getText(notif, 'script_id');\n      newChat.scriptVersion = utils.getText(notif, 'script_version');\n      newChat.idleTimeout = utils.getText(notif, 'idle_timeout');\n      newChat.isMonitoring = utils.getText(notif, 'is_monitoring');\n      newChat.monitoredAgentId = utils.getText(notif, 'monitored_agent_id');\n      newChat.preChatData = utils.getText(notif, 'json_baggage');\n\n      newChat.requeueShortcuts = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'chat_requeue_shortcuts',\n        'shortcut',\n      )[0];\n      newChat.chatDispositions = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'chat_dispositions',\n        'disposition',\n      )[0];\n      newChat.transcript = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'transcript',\n        'message',\n      )[0];\n      newChat.baggage = utils.processResponseCollection(\n        notification,\n        'ui_notification',\n        'json_baggage',\n      )[0];\n\n      if (newChat.chatDispositions && newChat.chatDispositions.disposition) {\n        newChat.chatDispositions.dispositions = [newChat.chatDispositions];\n      } else {\n        newChat.chatDispositions = newChat.chatDispositions.dispositions;\n      }\n\n      if (newChat.transcript && newChat.transcript.message) {\n        newChat.transcript = [newChat.transcript];\n      } else {\n        newChat.transcript = newChat.transcript.messages;\n      }\n\n      if (newChat.preChatData) {\n        try {\n          newChat.preChatData = JSON.parse(newChat.preChatData);\n        } catch (err) {\n          utils.logMessage(\n            LOG_LEVELS.ERROR,\n            'Error parsing the pre-form chat data.',\n            notif,\n          );\n        }\n      }\n\n      // convert numbers to boolean\n      if (newChat.chatDispositions) {\n        for (var d = 0; d < newChat.chatDispositions.length; d++) {\n          var disp = newChat.chatDispositions[d];\n          disp.isComplete = disp.isComplete === '1';\n          disp.isSuccess = disp.isSuccess === '1';\n          disp.isDefault = disp.isDefault === '1';\n        }\n      }\n\n      // convert dates\n      if (newChat.transcript) {\n        for (var t = 0; t < newChat.transcript.length; t++) {\n          var msg = newChat.transcript[t];\n          if (msg.dts) {\n            msg.dts = new Date(msg.dts.replace(' ', 'T'));\n          }\n        }\n      }\n\n      // Build token map\n      newChat.baggage = buildChatTokenMap(notif, newChat);\n\n      return newChat;\n    };\n\n    function buildChatTokenMap(notif, newChat) {\n      var tokens = {};\n      var model = UIModel.getInstance();\n\n      if (newChat.preChatData) {\n        for (var prop in newChat.preChatData) {\n          if (newChat.preChatData.hasOwnProperty(prop)) {\n            tokens[prop] = newChat.preChatData[prop];\n          }\n        }\n      }\n\n      try {\n        tokens['chatQueueId'] = newChat.chatQueueId;\n        tokens['chatQueueName'] = newChat.chatQueueName;\n        tokens['ani'] = newChat.ani;\n        tokens['dnis'] = newChat.dnis;\n        tokens['uii'] = newChat.uii;\n      } catch (any) {\n        console.error(\n          'There was an error parsing chat tokens for basic chat info. ',\n          any,\n        );\n      }\n\n      try {\n        tokens['agentFirstName'] = model.agentSettings.firstName;\n        tokens['agentLastName'] = model.agentSettings.lastName;\n        tokens['agentExternalId'] = model.agentSettings.externalAgentId;\n        tokens['agentType'] = model.agentSettings.agentType;\n        tokens['agentEmail'] = model.agentSettings.email;\n        tokens['agentUserName'] = model.agentSettings.username;\n      } catch (any) {\n        console.error(\n          'There was an error parsing chat tokens for agent info. ',\n          any,\n        );\n      }\n\n      return tokens;\n    }\n\n    var AgentStats = function () {};\n\n    /*\n * This class is responsible for handling an Agent Stats packet rec'd from IntelliServices.\n * It will save a copy of it in the UIModel. Could be a single agent or array of agents.\n *\n  {\"ui_stats\":{\n       \"@type\":\"AGENT\",\n       \"agent\":{\n           \"@alt\":\"INBOUND\",\n           \"@atype\":\"AGENT\",\n           \"@avgtt\":\"00.0\",\n           \"@calls\":\"0\",\n           \"@da\":\"0\",\n           \"@droute\":\"6789050673\",\n           \"@f\":\"John\",\n           \"@gdesc\":\"\",\n           \"@gname\":\"\",\n           \"@id\":\"1856\",\n           \"@l\":\"Doe\",\n           \"@ldur\":\"6\",\n           \"@ltype\":\"INBOUND\",\n           \"@oh\":\"0\",\n           \"@pd\":\"0\",\n           \"@pdt\":\"0\",\n           \"@pres\":\"0\",\n           \"@rna\":\"0\",\n           \"@sdur\":\"6\",\n           \"@sp\":\"\",\n           \"@state\":\"AVAILABLE\",\n           \"@ttt\":\"0\",\n           \"@u\":\"jdoe\",\n           \"@uii\":\"\",\n           \"@util\":\"0.00\",\n           \"@call_duration:0\"\n       }\n     }\n  }\n */\n    AgentStats.prototype.processResponse = function (stats) {\n      var resp = stats.ui_stats.agent;\n      var agentStats = [];\n\n      if (!Array.isArray(resp)) {\n        resp = [resp];\n      }\n\n      try {\n        for (var i = 0; i < resp.length; i++) {\n          agentStats.push({\n            agentLoginType: resp[i]['@alt'],\n            agentType: resp[i]['@atype'],\n            avgTalkTime: resp[i]['@avgtt'],\n            calls: resp[i]['@calls'],\n            isDequeueAgent: resp[i]['@da'],\n            defaultRoute: resp[i]['@droute'],\n            firstName: resp[i]['@f'],\n            queueDesc: resp[i]['@gdesc'],\n            queueName: resp[i]['@gname'],\n            agentId: resp[i]['@id'],\n            lastName: resp[i]['@l'],\n            loginDuration: resp[i]['@ldur'],\n            loginType: resp[i]['@ltype'],\n            offHook: resp[i]['@oh'],\n            pendingDisp: resp[i]['@pd'],\n            pendingDispTime: resp[i]['@pdt'],\n            presented: resp[i]['@pres'],\n            rna: resp[i]['@rna'],\n            stateDuration: resp[i]['@sdur'],\n            skillProfileName: resp[i]['@sp'],\n            agentState: resp[i]['@state'],\n            totalTalkTime: resp[i]['@ttt'],\n            username: resp[i]['@u'],\n            uii: resp[i]['@uii'],\n            utilization: resp[i]['@util'],\n            callDuration: resp[i]['@call_duration'],\n          });\n        }\n      } catch (e) {}\n\n      UIModel.getInstance().agentStats = agentStats;\n      return agentStats;\n    };\n\n    var AgentDailyStats = function () {};\n\n    /*\n     * This class is responsible for handling an Agent Daily Stats packet rec'd from IntelliServices.\n     * It will save a copy of it in the UIModel.\n     *\n     * {\"ui_stats\":{\n     *      \"@type\":\"AGENTDAILY\",\n     *      \"agent_id\":{\"#text\":\"1180723\"},\n     *      \"total_login_sessions\":{\"#text\":\"1\"},\n     *      \"total_calls_handled\":{\"#text\":\"0\"},\n     *      \"total_preview_dials\":{\"#text\":\"0\"},\n     *      \"total_manual_dials\":{\"#text\":\"0\"},\n     *      \"total_rna\":{\"#text\":\"0\"},\n     *      \"total_talk_time\":{\"#text\":\"0\"},\n     *      \"total_offhook_time\":{\"#text\":\"0\"},\n     *      \"total_login_time\":{\"#text\":\"7808\"},\n     *      \"total_success_dispositions\":{\"#text\":\"0\"}\n     *    }\n     * }\n     */\n    AgentDailyStats.prototype.processResponse = function (stats) {\n      var model = UIModel.getInstance().agentDailyStats;\n      var resp = stats.ui_stats;\n\n      model.agentId = utils.getText(resp, 'agent_id');\n      model.totalLoginSessions = utils.getText(resp, 'total_login_sessions');\n      model.totalChatsHandled = utils.getText(resp, 'total_chats_handled');\n      model.totalCallsHandled = utils.getText(resp, 'total_calls_handled');\n      model.totalPreviewDials = utils.getText(resp, 'total_preview_dials');\n      model.totalManualDials = utils.getText(resp, 'total_manual_dials');\n      model.totalRna = utils.getText(resp, 'total_rna');\n      model.totalSuccessDispositions = utils.getText(\n        resp,\n        'total_success_dispositions',\n      );\n\n      if (!model.totalTalkTime) {\n        // init daily stats to first stats packet if they don't exist\n        model.totalLoginTime = utils.getText(resp, 'total_login_time');\n        model.totalOffhookTime = utils.getText(resp, 'total_offhook_time');\n        model.totalTalkTime = utils.getText(resp, 'total_talk_time');\n        model.currCallTime = '0';\n      }\n\n      return model;\n    };\n\n    var CampaignStats = function () {};\n\n    /*\n     * This class is responsible for handling a Campaign Stats packet rec'd from IntelliServices.\n     * It will save a copy of it in the UIModel.\n     *\n     * {\"ui_stats\":{\n     *      \"@type\":\"CAMPAIGN\",\n     *      \"campaign\":[\n     *          {\n     *              \"@a\":\"0\",\"@aba\":\"0\",\"@an\":\"0\",\"@av\":\"0\",\"@b\":\"0\",\"@c\":\"1\",\"@e\":\"0\",\"@f\":\"0\",\n     *              \"@id\":\"60275\",\"@int\":\"0\",\"@m\":\"0\",\"@na\":\"0\",\"@name\":\"Test Campaign\",\n     *              \"@p\":\"0\",\"@r\":\"1\",\"@s\":\"0\",\"@tc\":\"0\",\"@ttt\":\"0\"\n     *          },\n     *          {\n     *              \"@a\":\"0\",\"@aba\":\"0\",\"@an\":\"0\",\"@av\":\"0\",\"@b\":\"0\",\"@c\":\"0\",\"@e\":\"0\",\"@f\":\"0\",\n     *              \"@id\":\"60293\",\"@int\":\"0\",\"@m\":\"0\",\"@na\":\"0\",\"@name\":\"Test Campaign w\\\\ Search\",\n     *              \"@p\":\"0\",\"@r\":\"19\",\"@s\":\"0\",\"@tc\":\"0\",\"@ttt\":\"0\"\n     *          }\n     *     ],\n     *     \"totals\":{\n     *          \"noanswer\":{\"#text\":\"0\"},\n     *          \"totalConnects\":{\"#text\":\"0\"},\n     *          \"pending\":{\"#text\":\"0\"},\n     *          \"active\":{\"#text\":\"0\"},\n     *          \"error\":{\"#text\":\"0\"},\n     *          \"totalTalkTime\":{\"#text\":\"0\"},\n     *          \"answer\":{\"#text\":\"0\"},\n     *          \"abandon\":{\"#text\":\"0\"},\n     *          \"ready\":{\"#text\":\"20\"},\n     *          \"machine\":{\"#text\":\"0\"},\n     *          \"intercept\":{\"#text\":\"0\"},\n     *          \"busy\":{\"#text\":\"0\"},\n     *          \"complete\":{\"#text\":\"1\"},\n     *          \"fax\":{\"#text\":\"0\"}\n     *     }\n     *   }\n     * }\n     */\n    CampaignStats.prototype.processResponse = function (stats) {\n      var resp = stats.ui_stats;\n      var totals = utils.processResponseCollection(\n        stats,\n        'ui_stats',\n        'totals',\n      )[0];\n      var campaigns = [];\n      var campRaw = null;\n\n      if (!Array.isArray(resp.campaign)) {\n        resp.campaign = [resp.campaign];\n      }\n\n      for (var c = 0; c < resp.campaign.length; c++) {\n        campRaw = resp.campaign[c];\n\n        if (campRaw == null) {\n          continue;\n        }\n\n        campaigns.push({\n          active: campRaw['@a'],\n          abandon: campRaw['@aba'],\n          answer: campRaw['@an'],\n          available: campRaw['@av'],\n          busy: campRaw['@b'],\n          complete: campRaw['@c'],\n          error: campRaw['@e'],\n          fax: campRaw['@f'],\n          campaignId: campRaw['@id'],\n          intercept: campRaw['@int'],\n          machine: campRaw['@m'],\n          noanswer: campRaw['@na'],\n          campaignName: campRaw['@name'],\n          pending: campRaw['@p'],\n          ready: campRaw['@r'],\n          staffed: campRaw['@s'],\n          totalConnects: campRaw['@tc'],\n          totalTalkTime: campRaw['@ttt'],\n        });\n      }\n\n      var campaignStats = {\n        type: resp['@type'],\n        campaigns: campaigns,\n        totals: totals,\n      };\n\n      UIModel.getInstance().campaignStats = campaignStats;\n\n      return campaignStats;\n    };\n\n    var ChatQueueStats = function () {};\n\n    /*\n     * This class is responsible for handling an Chat Stats packet rec'd from IntelliServices.\n     * It will save a copy of it in the UIModel.\n     *\n     *{\n     *  \"ui_stats\": {\n     *  \"@type\": \"CHAT\",\n     *  \"chatQueue\": [\n     *      {\n     *          \"@active\": \"1\",\n     *          \"@available\": \"0\",\n     *          \"@avgAbandon\": \"00.0\",\n     *          \"@avgChatTime\": \"00.0\",\n     *          \"@avgQueueTime\": \"00.0\",\n     *          \"@chatQueueId\": \"1\",\n     *          \"@chatQueueName\": \"testing chat quuee\",\n     *          \"@deflected\": \"0\",\n     *          \"@inQueue\": \"0\",\n     *          \"@longestInQueue\": \"0\",\n     *          \"@presented\": \"0\",\n     *          \"@routing\": \"0\",\n     *          \"@staffed\": \"0\",\n     *          \"@totalAbandonTime\": \"0\",\n     *          \"@totalAnswerTime\": \"0\",\n     *          \"@totalChatTime\": \"0\",\n     *          \"@totalQueueTime\": \"0\",\n     *          \"@utilization\": \"00.0\"\n     *      },\n     *      {\n     *          \"@active\": \"0\",\n     *          \"@available\": \"0\",\n     *          \"@avgAbandon\": \"00.0\",\n     *          \"@avgChatTime\": \"00.0\",\n     *          \"@avgQueueTime\": \"00.0\",\n     *          \"@chatQueueId\": \"3\",\n     *          \"@chatQueueName\": \"testing test\",\n     *          \"@deflected\": \"0\",\n     *          \"@inQueue\": \"0\",\n     *          \"@longestInQueue\": \"0\",\n     *          \"@presented\": \"0\",\n     *          \"@routing\": \"0\",\n     *          \"@staffed\": \"0\",\n     *          \"@totalAbandonTime\": \"0\",\n     *          \"@totalAnswerTime\": \"0\",\n     *          \"@totalChatTime\": \"0\",\n     *          \"@totalQueueTime\": \"0\",\n     *          \"@utilization\": \"00.0\"\n     *      }\n     *  ],\n     *  \"totals\": {\n     *      \"routing\": {\"#text\": \"0\"},\n     *      \"ttotalAnswerTime\": {\"#text\": \"0\"},\n     *      \"inQueue\": { \"#text\": \"0\"},\n     *      \"ttotalChatTime\": {\"#text\": \"0\"},\n     *      \"ttotalAbandonTime\": {\"#text\": \"0\"},\n     *      \"presented\": {\"#text\": \"0},\n     *      \"accepted\": {\"#text\": \"0\"},\n     *      \"deflected\": {\"#text\": \"0\"},\n     *      \"active\": {\"#text\": \"1\"},\n     *      \"abandoned\": {\"#text\": \"0\"},\n     *      \"ttotalQueueTime\": {\"#text\": \"0\"}\n     *   }\n     *  }\n     *}\n     */\n    ChatQueueStats.prototype.processResponse = function (stats) {\n      var resp = stats.ui_stats;\n      var totals = utils.processResponseCollection(\n        stats,\n        'ui_stats',\n        'totals',\n      )[0];\n      var chatQueues = utils.processResponseCollection(\n        stats,\n        'ui_stats',\n        'chatQueue',\n      );\n\n      var chatQueueStats = {\n        type: resp['@type'],\n        chatQueues: chatQueues,\n        totals: totals,\n      };\n\n      UIModel.getInstance().chatQueueStats = chatQueueStats;\n\n      return chatQueueStats;\n    };\n\n    var QueueStats = function () {};\n\n    /*\n     * This class is responsible for handling an Queue Stats packet rec'd from IntelliServices.\n     * It will save a copy of it in the UIModel.\n     *\n     * {\n     *   \"ui_stats\":{\n     *       \"@type\":\"GATE\",\n     *       \"gate\":{\n     *           \"@aba\":\"0\",\"@active\":\"0\",\"@ans\":\"0\",\"@asa\":\"00.0\",\"@avail\":\"2\",\n     *           \"@avga\":\"00.0\",\"@avgq\":\"00.0\",\"@avgt\":\"00.0\",\"@def\":\"0\",\"@id\":\"12126\",\n     *           \"@inq\":\"0\",\"@long_c\":\"0\",\"@longq\":\"0\",\"@name\":\"Cris inbound\",\n     *           \"@pres\":\"0\",\"@route\":\"0\",\"@short_aba\":\"0\",\"@short_c\":\"0\",\"@sla\":\"100.0\",\n     *           \"@sla_f\":\"0\",\"@sla_p\":\"0\",\"@staff\":\"2\",\"@t_aba\":\"0\",\"@t_q\":\"0\",\"@t_soa\":\"0\",\"@util\":\"00.0\"\n     *       },\n     *       \"totals\":{\n     *           \"inQueue\":{\"#text\":\"0\"},\n     *           \"answered\":{\"#text\":\"0\"},\n     *           \"totalABATime\":{\"#text\":\"0\"},\n     *           \"active\":{\"#text\":\"0\"},\n     *           \"longCall\":{\"#text\":\"0\"},\n     *           \"shortCall\":{\"#text\":\"0\"},\n     *           \"slaPass\":{\"#text\":\"0\"},\n     *           \"totalQueueTime\":{\"#text\":\"0\"},\n     *           \"routing\":{\"#text\":\"0\"},\n     *           \"totalTalkTime\":{\"#text\":\"0\"},\n     *           \"shortAbandon\":{\"#text\":\"0\"},\n     *           \"presented\":{\"#text\":\"0\"},\n     *           \"totalSOA\":{\"#text\":\"0\"},\n     *           \"slaFail\":{\"#text\":\"0\"},\n     *           \"deflected\":{\"#text\":\"0\"},\n     *           \"abandoned\":{\"#text\":\"0\"}\n     *      }\n     *   }\n     * }\n     */\n    QueueStats.prototype.processResponse = function (stats) {\n      var resp = stats.ui_stats;\n      var totals = utils.processResponseCollection(\n        stats,\n        'ui_stats',\n        'totals',\n      )[0];\n      var queues = [];\n      var gateRaw = {};\n\n      if (!Array.isArray(resp.gate)) {\n        resp.gate = [resp.gate];\n      }\n\n      for (var c = 0; c < resp.gate.length; c++) {\n        gateRaw = resp.gate[c];\n        if (gateRaw == null) {\n          continue;\n        }\n\n        queues.push({\n          abandon: gateRaw['@aba'],\n          active: gateRaw['@active'],\n          answer: gateRaw['@ans'],\n          asa: gateRaw['@asa'],\n          available: gateRaw['@avail'],\n          avgAbandon: gateRaw['@avga'],\n          avgQueue: gateRaw['@avgq'],\n          avgTalk: gateRaw['@avgt'],\n          deflected: gateRaw['@def'],\n          queueId: gateRaw['@id'],\n          inQueue: gateRaw['@inq'],\n          longCall: gateRaw['@long_c'],\n          longestInQueue: gateRaw['@longq'],\n          queueName: gateRaw['@name'],\n          presented: gateRaw['@pres'],\n          routing: gateRaw['@route'],\n          shortAbandon: gateRaw['@short_aba'],\n          shortCall: gateRaw['@short_c'],\n          sla: gateRaw['@sla'],\n          slaPass: gateRaw['@sla_p'],\n          slaFail: gateRaw['@sla_f'],\n          staffed: gateRaw['@staff'],\n          tAbandonTime: gateRaw['@t_aba'],\n          tQueueTime: gateRaw['@t_q'],\n          tSpeedOfAnswer: gateRaw['@t_soa'],\n          utilization: gateRaw['@util'],\n        });\n      }\n\n      var queueStats = {\n        type: resp['@type'],\n        queues: queues,\n        totals: totals,\n      };\n\n      UIModel.getInstance().queueStats = queueStats;\n\n      return queueStats;\n    };\n\n    var UIModel = (function () {\n      var instance;\n\n      function init() {\n        // Singleton\n\n        // Private methods and variables here //\n        //function privateMethod(){\n        //    console.log( \"I am private\" );\n        //}\n        //\n        //var privateVariable = \"I'm also private\";\n\n        // Public methods and variables\n        return {\n          currentCall: {}, // save the NEW-CALL notification in parsed form\n          pendingNewCallSessions: {}, // save any pending call sessions, in case the new call packet hasn't arrived\n          callTokens: {}, // Stores a map of all tokens for a call\n          callbacks: [],\n          libraryInstance: null, // Initialized to the library instance on startup\n          pingIntervalId: null, // The id of the timer used to send ping-call messages\n          statsIntervalId: null, // The id of the timer used to send stats request messages\n          pingStatIntervalId: null, // The id of the timer used to send ping-call beat messages\n          agentDailyIntervalId: null, // The id of the timer used to update some agent daily stats values\n          reconnectIntervalId: null, // The id of the timer used to try reconnecting the socket\n          waitingForAddSession: null,\n          authHost: window.location.origin, // default to protocol + hostname + port\n          socketProtocol: 'wss://', // default to secure socket unless local test flag passed in on initialization\n          baseAuthUri: '/api/auth/', // the path to engage-auth e.g.: http://localhost:81/api/auth/ or window.location.origin + \"/api/auth/\",\n          baseApiUri: '/api/v1/', // the path to engage-api\n          baseEtrUri: '/platform/api/ed-task-routing/v1/', // the path to ETR task routing endpoints\n\n          // internal chat requests\n          chatAliasRequest: null,\n          chatRoomRequest: null,\n          chatSendRequest: null,\n          supervisorListRequest: null,\n          chatRoomStateRequest: new ChatRoomStateRequest(),\n\n          //multi-socket\n          multiSocketRequest: new MultiSocketRequest(),\n          dataStore: new LocalStorageService('agentSDK'),\n\n          // external chat requests/notifications\n          chatCancelledNotification: new ChatCancelledNotification(),\n          chatActiveNotification: new ChatActiveNotification(),\n          chatInactiveNotification: new ChatInactiveNotification(),\n          chatDispositionRequest: null,\n          chatMessageRequest: new ChatMessageRequest(),\n          chatPresentedNotification: new ChatPresentedNotification(),\n          chatPresentedRequest: null,\n          chatRequeueRequest: null,\n          chatTypingNotification: new ChatTypingNotification(),\n          chatTypingRequest: null,\n          newChatNotification: new NewChatNotification(),\n          loadMediaNotification: new LoadMediaNotification(),\n          chatAgentAssignFailureNotification: new ChatAgentAssignFailureNotification(),\n          chatClientReconnectNotification: new ChatClientReconnectNotification(),\n\n          // request instances\n          agentStateRequest: null,\n          chatStateRequest: null,\n          ackRequest: new AckRequest(),\n          bargeInRequest: null,\n          callNotesRequest: null,\n          callbacksPendingRequest: null,\n          campaignDispositionsRequest: null,\n          loginRequest: null,\n          coldXferRequest: null,\n          dispositionRequest: null,\n          dispositionManualPassRequest: null,\n          hangupRequest: null,\n          holdRequest: null,\n          leadHistoryRequest: null,\n          leadInsertRequest: null,\n          leadUpdateRequest: null,\n          logoutRequest: null,\n          authenticateRequest: null, // get RC access token\n          loginPhase1Request: null,\n          offhookInitRequest: null,\n          offhookTermRequest: null,\n          oneToOneOutdialRequest: null,\n          oneToOneOutdialCancelRequest: null,\n          pauseRecordRequest: null,\n          pingCallRequest: null,\n          previewDialRequest: null,\n          reconnectRequest: null,\n          recordRequest: null,\n          requeueRequest: null,\n          statsRequest: null,\n          tcpaSafeRequest: null,\n          warmXferRequest: null,\n          warmXferCancelRequest: null,\n          chatListRequest: null,\n          directAgentTransferListRequest: null,\n          directAgentTransferRequest: null,\n          webRTCRequest: null,\n          searchDirectoryRequest: null,\n          extensionPresenceRequest: null,\n\n          // response packets\n          agentStatePacket: null,\n          chatStatePacket: null,\n          loginPacket: null,\n          currentCallPacket: null,\n          authenticatePacket: null,\n          loginPhase1Packet: null,\n          offhookInitPacket: null,\n          offhookTermPacket: null,\n          transferSessions: {},\n          chatListResponse: null,\n\n          // notification packets\n          addSessionNotification: new AddSessionNotification(),\n          dialGroupChangeNotification: new DialGroupChangeNotification(),\n          dialGroupChangePendingNotification: new DialGroupChangePendingNotification(),\n          dropSessionNotification: new DropSessionNotification(),\n          earlyUiiNotification: new EarlyUiiNotification(),\n          endCallNotification: new EndCallNotification(),\n          gatesChangeNotification: new GatesChangeNotification(),\n          genericNotification: new GenericNotification(),\n          newCallNotification: new NewCallNotification(),\n\n          // stats packets\n          agentStatsPacket: new AgentStats(),\n          agentDailyStatsPacket: new AgentDailyStats(),\n          queueStatsPacket: new QueueStats(),\n          campaignStatsPacket: new CampaignStats(),\n          chatQueueStatsPacket: new ChatQueueStats(),\n\n          // application state\n          applicationSettings: {\n            availableCountries: [],\n            isLoggedInIS: false, // a check for whether or not user is logged in with IntelliServices\n            socketConnected: false,\n            socketDest: '',\n            isTcpaSafeMode: false, // Comes in at the account-level - will get set to true if this interface should be in tcpa-safe-mode only.\n            isSso: false, // Passed in on phase 1 login response, if agent signed in through RC single sign-on path set to true\n            isFlr: false, // Check of Force legacy registration for dialing destination type\n            dialDestType: '', // What type of phone are we setting up: e.g. \"RC_SOFTPHONE\", \"LEGACY_SOFTPHONE\", \"RC_PHONE\" (for RC office ext)// Comes in at the account-level - will get set to true if this interface should be in tcpa-safe-mode only.\n            allowMultiSocket: false, // Determines whether agent can open a new socket under the same login\n            edSources: {}, // Cache for ED sources, loaded when first task received. Object indexed by mainAccountId, then array of all sources\n            edLanguages: {}, // Cache for ED language, loaded when first task received. Object indexed by mainAccountId, then array of all languages\n            edCategories: {}, // Cache for ED categories, loaded when first task received. Object indexed by mainAccountId, then array of all categories\n          },\n\n          // stat objects\n          agentStats: [],\n          agentDailyStats: {},\n          campaignStats: {},\n          queueStats: {},\n          chatQueueStats: {},\n\n          // current agent settings\n          agentSettings: {\n            accountId: null, // account agent belongs to\n            agentId: 0,\n            agentPassword: '', //agent Password\n            agentType: 'AGENT', // AGENT | SUPERVISOR\n            altDefaultLoginDest: '',\n            availableAgentStates: [],\n            callerIds: [],\n            callState: null, // display the current state of the call\n            corporateDirectory: false,\n            consultCall: false, //consult call allow\n            currentState: 'OFFLINE', // Agent system/base state\n            currentStateLabel: '', // Agent aux state label\n            defaultLoginDest: '',\n            dialDest: '', // Destination agent is logged in with for offhook session, set on configure response, if multi values in format \"xxxx|,,xxxx\"\n            email: '',\n            externalAgentId: '',\n            firstName: '',\n            guid: '', // unique key generated on login, used for accessing spring endpoints\n            isLoggedIn: false, // agent is logged in to the platform\n            isOffhook: false, // track whether or not the agent has an active offhook session\n            isMonitoring: false, // track whether or not the offhook session is for monitoring\n            initLoginState: 'AVAILABLE', // state agent is placed in on successful login\n            initLoginStateLabel: 'Available', // state label for agent on successful login\n            isOutboundPrepay: false, // determines if agent is a prepay agent\n            lastName: '',\n            loginDTS: null, // date and time of the final login phase (IQ)\n            loginType: 'NO-SELECTION', // Could be INBOUND | OUTBOUND | BLENDED | NO-SELECTION, set on login response\n            maxBreakTime: -1,\n            maxLunchTime: -1,\n            onCall: false, // true if agent is on an active call\n            onManualOutdial: false, // true if agent is on a manual outdial call\n            outboundManualDefaultRingtime: '30',\n            pendingCallbacks: [],\n            pendingDialGroupChange: 0, // Set to Dial Group Id if we are waiting to change dial groups until agent ends call\n            phoneLoginPin: '',\n            realAgentType: 'AGENT',\n            supervisors: [], // Used for agent chat\n            totalCalls: 0, // Call counter that is incremented every time a new session is received\n            transferNumber: '', // May be pre-populated by an external interface, if so, the transfer functionality uses it\n            updateDGFromAdminUI: false, // if pending Dial Group change came from AdminUI, set to true (only used if request is pending)\n            updateLoginMode: false, // gets set to true when doing an update login (for events control)\n            username: '', // Agent's username\n            wasMonitoring: false, // used to track if the last call was a monitoring call\n          },\n\n          // current agent permissions\n          agentPermissions: {\n            allowBlended: true, // Controls whether or not the agent can log into both inbound queues and an outbound dialgroup\n            allowCallControl: true, // Set from the the login response packet\n            allowChat: false, // Controls whether or not the agent has the option to open the Chat Queue Manager\n            enableChat: false, // Controls whether or not the agent has legacy chat and SMS access on the account level\n            allowCrossQueueRequeue: false, // Controls whether or not the agent can requeue to a different queue group\n            allowInbound: true, // Controls whether or not the agent can log into an inbound queue\n            allowLeadInserts: false, // Controls whether or not the agents can insert leads\n            allowLeadSearch: false, // Controlled by the dial-group allow_lead_search setting. Enables or disables the lead search\n            allowLoginControl: true, // Controls whether or not the agent can log in\n            allowLoginUpdates: true, // Controls whether or not the agent can update their login\n            allowManualCalls: true, // Controls whether or not the agents have the option to make a manual outbound call\n            allowManualPass: true, // Controls whether or not the agent has the option to make a manual pass on a lead\n            allowManualIntlCalls: false, // Controls whether or not the agent has the option to make international manual outbound calls\n            allowManualOutboundGates: false, // Controls whether or not the agent has the option to select queues to convert manual outbound calls to\n            allowOffHook: true, // Controls whether or not the agents can go offhook\n            allowOutbound: true, // Controls whether or not the agent can log into an outdial group\n            allowPreviewLeadFilters: false, // Controlled by the dial-group allow_preview_lead_filters setting. Enables or disables the filters on the preview style forms\n            allowLeadUpdatesByCampaign: {}, // For each campaign ID, store whether leads can be updated\n            disableSupervisorMonitoring: true, // Controls whether or not a supervisor can view agent stats\n            progressiveEnabled: false, // Preview dial feature that enables auto-calls from the preview window.\n            requireFetchedLeadsCalled: false, // Controlled by the dial-group require_fetched_leads_called setting. Enables or disables the requirement to only fetch new leads when current leads are called or expired. ONly for Preview or TCPA-SAFE.\n            showLeadHistory: true, // Controls whether or not the agents can view lead history\n            enableTaskMode: false, // Controls whether or not the agent has access to Digital task mode\n            enableFolderMode: false, // Controls whether or not the agent has access to Digital folder mode\n          },\n\n          // chat\n          chatSettings: {\n            availableChatQueues: [], // List of all chat queues agent has access to, set on login\n            availableChatRooms: [], // List of all chat rooms agent has access to, set on login\n            chatQueues: [], // Array of chat queues agent is signed into\n            alias: '', // Chat alias, on-login this is the UID, but is changed if the user changes it\n          },\n\n          // connection objects\n          connectionSettings: {\n            hashCode: '', // used specifically for reconnects\n            reconnect: false, // variable tracks the type of login, on init it's false...once connected it's set to true\n            isMultiSocket: false,\n          },\n\n          // inbound settings\n          inboundSettings: {\n            availableQueues: [], // array of queues agent has access to, set on login\n            availableSkillProfiles: [], // array of skill profiles agent has access to, set on login\n            queues: [], // array of queues agent is signed into, set on config response\n            skillProfile: {}, // The skill profile the agent is signed into, set on config response\n          },\n\n          // outbound settings\n          outboundSettings: {\n            availableCampaigns: [], // array of campaigns agent has access to, set on login\n            availableOutdialGroups: [], // array of dial groups agent has access to, set on login\n            insertCampaigns: [],\n            defaultDialGroup: 0,\n            outdialGroup: {}, // dial group agent is signed into\n            previewDialLeads: [], // list of leads returned from preview dial request\n            tcpaSafeLeads: [], // list of leads returned from tcpa safe request\n            campaignDispositions: [], // list of campaign dispositions for specific campaign\n          },\n\n          scriptSettings: {\n            availableScripts: [], // array of all scripts associated with any campaigns or queues agent is logged into\n            loadedScripts: {}, // stores script data by script id e.g. {1:{}, 32:{}}\n          },\n\n          softphoneSettings: {\n            webRtc: null, // stores the CFSimpleSip object\n            isRegistered: false, // whether or not the softphone is currently registered\n            muteActive: false, // whether or not the softphone is muted\n            registerPending: null, // timeout to trigger no register response\n            maintainOH: false, // based on the configurable agent setting to keep offhook session after ending call\n            autoStartOH: false, // determines whether or not to start an offhook session automatically after softphone registrar reconnect\n            wsServers: [], // current sip server domain + user credentials, set as array for SIP.js ua object\n            sipInfo: [], // array of sip server domains + user credentials for softphone registration, retrieved from engage-auth\n            uri: '', // username + @ + domain\n            displayName: '', // username - Used to register softphone with freeswitch (legacy)\n            authorizationUser: '', // username - Used to register softphone with freeswitch (legacy)\n            sipPassword: '', // password for sip softphone registration\n            sipDialDest: '', // dialDest used for softphone connection\n            attemptingSoftphoneReconnect: false, // set to true when attempting to rotate softphone registrar and reconnect\n            //manualSoftphoneReconnect: false,     // set to true when agent triggered registrar rotation\n            lastSipFetchTime: 0, //set current time when sip registration info fetched.\n          },\n\n          // Filtered Directory\n          filteredDirectory: {\n            rcAccountId: '',\n            records: [],\n          },\n\n          extensionPresenceResponse: [],\n\n          // Public methods\n          incrementTotalCalls: function () {\n            this.agentSettings.totalCalls = this.agentSettings.totalCalls + 1;\n          },\n        };\n      }\n\n      return {\n        // Get the Singleton instance if one exists\n        // or create one if it doesn't\n        getInstance: function () {\n          if (!instance) {\n            instance = init();\n          }\n          return instance;\n        },\n\n        resetInstance: function () {\n          instance = null;\n        },\n      };\n    })();\n\n    var LocalStorageService = function (name) {\n      if (!window.localStorage) {\n        console.log('Browser does not support HTML5 Web Storage');\n      }\n      this.prefix = name + ':';\n    };\n    LocalStorageService.prototype.save = function (key, value) {\n      // TODO: that window.localStorage is add by ringcentral-integration\n      if (!window.localStorage || !key || !value) {\n        console.log('Missing parameters key or value on add');\n        return false;\n      }\n      window.localStorage.setItem(this.prefix + key, JSON.stringify(value));\n    };\n    LocalStorageService.prototype.get = function (key) {\n      // TODO: that window.localStorage is add by ringcentral-integration\n      if (\n        !window.localStorage ||\n        !key ||\n        !window.localStorage.getItem(this.prefix + key)\n      ) {\n        console.log('Missing parameter key on retrieve');\n        return false;\n      }\n      return window.localStorage.getItem(this.prefix + key);\n    };\n\n    LocalStorageService.prototype.remove = function (key) {\n      // TODO: that window.localStorage is add by ringcentral-integration\n      if (\n        !window.localStorage ||\n        !key ||\n        !window.localStorage.getItem(this.prefix + key)\n      ) {\n        console.log('Missing parameter key on remove');\n        return false;\n      }\n      window.localStorage.removeItem(this.prefix + key);\n    };\n    // --------------------------\n    // BroadcastChannelHelper.js\n    // --------------------------\n    var broadcastChannelHelper = {\n      // Generate handlers to request / response BroadcastChannels\n      //\n      requestChannel: null,\n      responseChannel: null,\n      currentCallMessageId: null,\n      currentCallRequestCallback: null,\n\n      // Registers the request / response channels\n      //\n      init: function () {\n        if (this.requestChannel != null) {\n          return;\n        }\n\n        var self = this;\n        this.requestChannel = new BroadcastChannel('ev-multisocket-request');\n        this.responseChannel = new BroadcastChannel('ev-multisocket-response');\n\n        // Listen for requests coming from the requestChannel\n        //\n        this.requestChannel.onmessage = function (e) {\n          var type = e.data.type;\n          var messageId = e.data.messageId;\n\n          switch (type) {\n            case 'currentCall':\n              self._sendCurrentCall(messageId);\n              break;\n          }\n        };\n\n        // Listen for requests coming from the responseChannel\n        //\n        this.responseChannel.onmessage = function (e) {\n          var type = e.data.type;\n\n          switch (type) {\n            case 'currentCall':\n              self._processCurrentCallResponse(e.data.data, e.data.messageId);\n          }\n        };\n      },\n\n      destroy: function () {\n        if (this.requestChannel == null) {\n          return;\n        }\n\n        this.requestChannel.onmessage = null;\n        this.responseChannel.onmessage = null;\n\n        this.requestChannel.close();\n        this.responseChannel.close();\n\n        this.requestChannel = null;\n        this.responseChannel = null;\n      },\n\n      // ----------------------------------------------------\n      // Current Call, Request & Response\n      // ----------------------------------------------------\n\n      // When a new tab opens and needs to get the current call, it can do so with this method.  Passing\n      // a callback function to response with (could be a Promise if we are using them in SDK). Once\n      // a response is retrieved, it will be handled in the \"processCurrentCall\" method, and returned\n      // back to the original callback function\n      //\n      requestCurrentCall: function (fn) {\n        this.currentCallMessageId = Math.random();\n        this.currentCallRequestCallback = fn;\n\n        this.requestChannel.postMessage({\n          type: 'currentCall',\n          messageId: this.currentCallMessageId,\n        });\n      },\n\n      // Any instance that has knowledge of the current call can respond to the request\n      //\n      _sendCurrentCall: function (messageId) {\n        if (UIModel.getInstance().currentCall != null) {\n          var obj = {\n            type: 'currentCall',\n            messageId: messageId,\n            data: UIModel.getInstance().currentCall,\n          };\n\n          this.responseChannel.postMessage(obj);\n        }\n      },\n\n      // When a current call response is received, every tab will try to process it.  Only the original\n      // requestor will be able to process it successfully.\n      //\n      _processCurrentCallResponse: function (data, messageId) {\n        if (this.currentCallMessageId === messageId) {\n          // Set the current call model\n          UIModel.getInstance().currentCall = data;\n\n          // Alert the original method that our data is now available.\n          if (this.currentCallRequestCallback != null) {\n            this.currentCallRequestCallback(data);\n          }\n\n          // Null out properties - this ensure subsequent responses from other tabs will be ignored.\n          this.currentCallMessageId = null;\n          this.currentCallRequestCallback = null;\n        }\n      },\n    };\n\n    function HttpService(apiBase) {\n      this.XMLHttpRequest = window.XMLHttpRequest;\n      this.encodeURIComponent = window.encodeURIComponent;\n      this.apiBase = apiBase || 'http://localhost:81';\n\n      var that = this;\n\n      /**\n       * Makes a GET request to Engage Auth.\n       *\n       * @param {string} path - Relative path to append to apiUrl.\n       * @param {Object} config - Object describing different properties of the request.\n       * @returns {Promise} Promise that represents status of the request. Resolves if server responds with 200 status code, and is rejected otherwise.\n       */\n      this.httpGet = function (path, config) {\n        return new Promise(function (resolve, reject) {\n          var req = new that.XMLHttpRequest();\n          var queryParams = '';\n          if (config.queryParams) {\n            queryParams = '?' + _getUriEncodedParams(config.queryParams);\n          }\n          req.open('GET', that.apiBase + path + queryParams);\n          _addHeaders(config, req);\n          _addCompletionListeners(resolve, reject, req);\n          req.send();\n        });\n      };\n\n      /**\n       * Makes a GET request to Engage Auth.\n       *\n       * @param {string} path - Relative path to append to apiUrl.\n       * @param {Object} config - Object describing different properties of the request.\n       * @returns {Promise} Promise that represents status of the request. Resolves if server responds with 200 status code, and is rejected otherwise.\n       */\n      this.httpPost = function (path, config) {\n        return new Promise(function (resolve, reject) {\n          var req = new that.XMLHttpRequest();\n          var queryParams = '';\n          if (config.queryParams) {\n            queryParams = '?' + _getUriEncodedParams(config.queryParams);\n          }\n          req.open('POST', that.apiBase + path + queryParams);\n          _addHeaders(config, req);\n          _addCompletionListeners(resolve, reject, req);\n          req.send(_getUriEncodedBody(config));\n        });\n      };\n\n      /**\n       * Utility method used to check if an argument is actually an object.\n       *\n       * @param {*} obj\n       */\n      function _isObj(obj) {\n        return typeof obj === 'object' && obj !== null;\n      }\n\n      /**\n       * Adds headers to XMLHttpRequest based on configuration object.\n       *\n       * @param {Object} config - Config object passed to HttpService methods.\n       * @param {XMLHttpRequest} req - Instance of XMLHttpRequest that needs to be configured.\n       */\n      function _addHeaders(config, req) {\n        if (!_isObj(config)) {\n          return;\n        }\n\n        var headers = config.headers;\n\n        if (!_isObj(headers)) {\n          return;\n        }\n\n        for (var key in headers) {\n          req.setRequestHeader(key, headers[key]);\n        }\n      }\n\n      /**\n       * Configures an XMLHttpRequest object to properly resolve/reject a promise, depending on the outcome of the request.\n       *\n       * @param {Function} resolve - Resolve callback function from a promise. Invoked if the request completed successfully.\n       * @param {Function} reject - Reject callback function from a promise. Invoked if the request failed.\n       * @param {XMLHttpRequest} req - Instance of XMLHttpRequest that will be configured.\n       */\n      function _addCompletionListeners(resolve, reject, req) {\n        req.addEventListener('error', function (e) {\n          reject(e);\n        });\n        req.addEventListener('timeout', function () {\n          reject(new Error('request timeout'));\n        });\n        req.addEventListener('load', function () {\n          if (this.status !== 200) {\n            reject({\n              status: this.status,\n              response: this.responseText,\n            });\n          } else {\n            resolve({\n              status: this.status,\n              response: this.responseText,\n            });\n          }\n        });\n      }\n\n      /**\n       * Takes a config object and serializes/URI encodes the contents of the body property. If the \"Content-Type\" header is set\n       * to \"application/json\", it encodes the payload as JSON. Otherwise, we assume that the payload should be x-www-form-urlencoded.\n       */\n      function _getUriEncodedBody(config) {\n        var contentType =\n          config && config.headers && config.headers['Content-Type'];\n        var body = (config && config.body) || '';\n\n        if (contentType === 'application/json') {\n          body = JSON.stringify(body);\n        } else {\n          if (_isObj(body)) {\n            body = _getUriEncodedParams(body);\n          }\n        }\n\n        return body;\n      }\n\n      function _getUriEncodedParams(params) {\n        if (!_isObj(params)) {\n          return;\n        }\n\n        return Object.keys(params)\n          .map(function (key) {\n            return (\n              encodeURIComponent(key) + '=' + encodeURIComponent(params[key])\n            );\n          })\n          .join('&');\n      }\n    }\n\n    function NewCallUtils(instance, data) {\n      this.instance = instance;\n      this.data = data;\n\n      var that = this;\n\n      this.setupAddSessionCallback = function () {\n        var sessionUii = utils.getText(data.ui_notification, 'uii'),\n          sessionId = utils.getText(data.ui_notification, 'session_id'),\n          call = UIModel.getInstance().currentCall;\n\n        console.log(sessionUii + ' ADD SESSION ' + sessionId);\n\n        if (call.uii === sessionUii) {\n          // we already have a new call packet for this session\n          _delayedAddSessionCallback(that.instance, that.data);\n        } else {\n          // uii mismatch, but call has been dispositioned\n          UIModel.getInstance().pendingNewCallSessions[sessionUii] =\n            UIModel.getInstance().pendingNewCallSessions[sessionUii] || {};\n          UIModel.getInstance().pendingNewCallSessions[sessionUii][\n            sessionId\n          ] = that;\n        }\n      };\n\n      this.processSessionsForCall = function () {\n        var uii = UIModel.getInstance().currentCall.uii,\n          delayedSessions = UIModel.getInstance().pendingNewCallSessions[uii];\n\n        console.log(uii + ' NEW CALL');\n\n        if (delayedSessions && Object.keys(delayedSessions).length > 0) {\n          // we have delayed sessions to process\n          for (var sessionId in delayedSessions) {\n            if (delayedSessions.hasOwnProperty(sessionId)) {\n              var session = delayedSessions[sessionId];\n              _delayedAddSessionCallback(session.instance, session.data);\n            } else {\n              console.error(\n                'error processing sessions for uii: ' +\n                  uii +\n                  ' session: ' +\n                  sessionId,\n              );\n            }\n          }\n\n          delete UIModel.getInstance().pendingNewCallSessions[uii];\n        }\n      };\n\n      function _delayedAddSessionCallback(instance, data) {\n        var addSessionNotif = new AddSessionNotification();\n        var addResponse = addSessionNotif.processResponse(data);\n        utils.fireCallback(instance, CALLBACK_TYPES.ADD_SESSION, addResponse);\n      }\n    }\n\n    var utils = {\n      logMessage: function (logLevel, message, data) {\n        var instance = UIModel.getInstance().libraryInstance;\n        if (instance._db) {\n          try {\n            var transaction = instance._db.transaction(['logger'], 'readwrite');\n            var store = transaction.objectStore('logger');\n\n            var record = {\n              logLevel: logLevel,\n              message: message,\n              dts: new Date(),\n              data: data,\n            };\n\n            var request = store.add(record);\n          } catch (err) {\n            console.error('Error adding log message: ' + err);\n          }\n        } else {\n          //console.log(\"AgentLibrary: indexedDb not available\");\n        }\n      },\n\n      sendMessage: function (instance, msg) {\n        var msgObj = JSON.parse(msg);\n\n        if (instance.socket && instance.socket.readyState === 1) {\n          // add message id to request map, then send message\n          var type = msgObj.ui_request['@type'];\n          var destination = msgObj.ui_request['@destination'];\n          var message =\n            'Sending ' + type + ' request message to ' + destination;\n          instance._requests.push({\n            id: msgObj.ui_request['@message_id'],\n            type: msgObj.ui_request['@type'],\n            msg: msgObj.ui_request,\n          });\n\n          // keep rolling window of latest 1000 requests\n          if (instance._requests.length > 1000) {\n            instance._requests.shift();\n          }\n\n          instance.socket.send(msg);\n\n          if (type === 'STATS') {\n            utils.logMessage(LOG_LEVELS.STATS, message, msgObj);\n          } else {\n            utils.logMessage(LOG_LEVELS.INFO, message, msgObj);\n          }\n        } else {\n          // add message to queue if socket is not open.\n          instance._queuedMsgs.push({ dts: new Date(), msg: msg });\n        }\n      },\n\n      processResponse: function (instance, response) {\n        var type = response.ui_response['@type'];\n        var messageId = response.ui_response['@message_id'];\n        var dest =\n          messageId === '' || !messageId ? 'IS' : messageId.slice(0, 2);\n        var message =\n          'Received ' + type.toUpperCase() + ' response message from ' + dest;\n\n        // log message response\n        utils.logMessage(LOG_LEVELS.INFO, message, response);\n\n        // Send generic on message response\n        utils.fireCallback(instance, CALLBACK_TYPES.ON_MESSAGE, response);\n\n        // Fire callback function\n        switch (type.toUpperCase()) {\n          case MESSAGE_TYPES.AGENT_STATE:\n            if (UIModel.getInstance().agentStateRequest === null) {\n              UIModel.getInstance().agentStateRequest = new AgentStateRequest(\n                response.ui_response.current_state['#text'],\n                response.ui_response.agent_aux_state['#text'],\n              );\n            }\n            var stateChangeResponse = UIModel.getInstance().agentStateRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.AGENT_STATE,\n              stateChangeResponse,\n            );\n            break;\n          case MESSAGE_TYPES.BARGE_IN:\n            var resp = UIModel.getInstance().bargeInRequest.processResponse(\n              response,\n            );\n            var responseTo = response.ui_response['@response_to'];\n            var request = utils.findRequestById(instance, responseTo);\n            if (request) {\n              // found corresponding request, fire registered callback for type\n              var audioState = request.msg.audio_state['#text'];\n              if (audioState === 'MUTE') {\n                utils.fireCallback(\n                  instance,\n                  CALLBACK_TYPES.SILENT_MONITOR,\n                  resp,\n                );\n              } else if (audioState === 'COACHING') {\n                utils.fireCallback(instance, CALLBACK_TYPES.COACH_CALL, resp);\n              } else {\n                utils.fireCallback(instance, CALLBACK_TYPES.BARGE_IN, resp);\n              }\n            } else {\n              // no corresponding request, just fire FULL audio type BARGE-IN callback\n              utils.fireCallback(instance, CALLBACK_TYPES.BARGE_IN, resp);\n            }\n            break;\n          case MESSAGE_TYPES.CAMPAIGN_DISPOSITIONS:\n            var campaignDispsResposne = UIModel.getInstance().campaignDispositionsRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CAMPAIGN_DISPOSITIONS,\n              campaignDispsResposne,\n            );\n            break;\n          case MESSAGE_TYPES.CALL_NOTES:\n            var callNotes = UIModel.getInstance().callNotesRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(instance, CALLBACK_TYPES.CALL_NOTES, callNotes);\n            break;\n          case MESSAGE_TYPES.CALLBACK_PENDING:\n            var pendingCallbacks = UIModel.getInstance().callbacksPendingRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CALLBACK_PENDING,\n              pendingCallbacks,\n            );\n            break;\n          case MESSAGE_TYPES.HOLD:\n            var holdRequest;\n            if (UIModel.getInstance().holdRequest === null) {\n              holdRequest = new HoldRequest();\n            } else {\n              holdRequest = UIModel.getInstance().holdRequest;\n            }\n            var hold = holdRequest.processResponse(response);\n            utils.fireCallback(instance, CALLBACK_TYPES.HOLD, hold);\n            break;\n          case MESSAGE_TYPES.LEAD_HISTORY:\n            var history = UIModel.getInstance().leadHistoryRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(instance, CALLBACK_TYPES.LEAD_HISTORY, history);\n            break;\n          case MESSAGE_TYPES.LEAD_INSERT:\n            var insert = UIModel.getInstance().leadInsertRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(instance, CALLBACK_TYPES.LEAD_INSERT, insert);\n            break;\n          case MESSAGE_TYPES.LEAD_UPDATE:\n            var update = UIModel.getInstance().leadUpdateRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(instance, CALLBACK_TYPES.LEAD_UPDATE, update);\n            break;\n          case MESSAGE_TYPES.LOGIN_PHASE_1:\n            var loginPhase1Response = UIModel.getInstance().loginPhase1Request.processResponse(\n              response,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.LOGIN_PHASE_1,\n              loginPhase1Response,\n            );\n            break;\n          case MESSAGE_TYPES.LOGIN:\n            var loginResponse = UIModel.getInstance().loginRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(instance, CALLBACK_TYPES.LOGIN, loginResponse);\n            break;\n          case MESSAGE_TYPES.OFFHOOK_INIT:\n            var offhook = new OffhookInitRequest();\n            var initResponse = offhook.processResponse(response);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.OFFHOOK_INIT,\n              initResponse,\n            );\n            break;\n          case MESSAGE_TYPES.PAUSE_RECORD:\n            var pauseRequest;\n            if (UIModel.getInstance().pauseRecordRequest === null) {\n              pauseRequest = new PauseRecordRequest();\n            } else {\n              pauseRequest = UIModel.getInstance().pauseRecordRequest;\n            }\n            var pauseRec = pauseRequest.processResponse(response);\n            utils.fireCallback(instance, CALLBACK_TYPES.PAUSE_RECORD, pauseRec);\n            break;\n          case MESSAGE_TYPES.RECORD:\n            var record = UIModel.getInstance().recordRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(instance, CALLBACK_TYPES.RECORD, record);\n            break;\n          case MESSAGE_TYPES.REQUEUE:\n            var requeue = UIModel.getInstance().requeueRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(instance, CALLBACK_TYPES.REQUEUE, requeue);\n            break;\n          case MESSAGE_TYPES.SUPERVISOR_LIST:\n            var supervisorList = UIModel.getInstance().supervisorListRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.SUPERVISOR_LIST,\n              supervisorList,\n            );\n            break;\n          case MESSAGE_TYPES.SCRIPT_CONFIG:\n            var script = UIModel.getInstance().scriptConfigRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(instance, CALLBACK_TYPES.SCRIPT_CONFIG, script);\n            break;\n          case MESSAGE_TYPES.XFER_COLD:\n            var coldXfer = UIModel.getInstance().coldXferRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(instance, CALLBACK_TYPES.XFER_COLD, coldXfer);\n            break;\n          case MESSAGE_TYPES.XFER_WARM:\n            var warmXfer = UIModel.getInstance().warmXferRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(instance, CALLBACK_TYPES.XFER_WARM, warmXfer);\n            break;\n          case MESSAGE_TYPES.XFER_WARM_CANCEL:\n            var warmXferCancel = UIModel.getInstance().warmXferCancelRequest.processResponse(\n              response,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.XFER_WARM_CANCEL,\n              warmXferCancel,\n            );\n            break;\n          case MESSAGE_TYPES.ACK:\n            var ack = UIModel.getInstance().ackRequest.processResponse(\n              response,\n            );\n            var responseTo = response.ui_response['@response_to'];\n            var request = utils.findRequestById(instance, responseTo);\n            ack.uii = request.msg.uii && request.msg.uii['#text'];\n            utils.fireCallback(instance, CALLBACK_TYPES.ACK, ack);\n            break;\n          case MESSAGE_TYPES.CHAT_LIST:\n            var chatList = new ChatListRequest();\n            var chatListResponse = chatList.processResponse(response);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_LIST,\n              chatListResponse,\n            );\n            break;\n          case MESSAGE_TYPES.CHAT_STATE:\n            var chatState = new ChatStateRequest();\n            var chatStateResponse = chatState.processResponse(response);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_STATE,\n              chatStateResponse,\n            );\n            break;\n          case MESSAGE_TYPES.DIRECT_AGENT_TRANSFER_LIST:\n            var agentList = new DirectAgentTransferList();\n            var agentListResponse = agentList.processResponse(response);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.DIRECT_AGENT_TRANSFER_LIST,\n              agentListResponse,\n            );\n            break;\n          case MESSAGE_TYPES.DIRECT_AGENT_TRANSFER:\n            var agentXfer = new DirectAgentTransfer();\n            var agentXferResponse = agentXfer.processResponse(response);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.DIRECT_AGENT_TRANSFER,\n              agentXferResponse,\n            );\n            break;\n        }\n      },\n\n      processNotification: function (instance, data) {\n        var type = data.ui_notification['@type'];\n        var messageId = data.ui_notification['@message_id'];\n        var dest = messageId === '' ? 'IS' : messageId.slice(0, 2);\n        var message =\n          'Received ' +\n          type.toUpperCase() +\n          ' notification message from ' +\n          dest;\n\n        // log message response\n        utils.logMessage(LOG_LEVELS.INFO, message, data);\n\n        switch (type.toUpperCase()) {\n          case MESSAGE_TYPES.ADD_SESSION:\n            new NewCallUtils(instance, data).setupAddSessionCallback();\n            break;\n          case MESSAGE_TYPES.DIAL_GROUP_CHANGE:\n            var dgChangeNotif = new DialGroupChangeNotification();\n            var changeResponse = dgChangeNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.DIAL_GROUP_CHANGE,\n              changeResponse,\n            );\n            break;\n          case MESSAGE_TYPES.DIAL_GROUP_CHANGE_PENDING:\n            var dgChangePendNotif = new DialGroupChangePendingNotification();\n            var pendResponse = dgChangePendNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.DIAL_GROUP_CHANGE_PENDING,\n              pendResponse,\n            );\n            break;\n          case MESSAGE_TYPES.DROP_SESSION:\n            var dropSesNotif = new DropSessionNotification(instance);\n            var dropSesResponse = dropSesNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.DROP_SESSION,\n              dropSesResponse,\n            );\n            break;\n          case MESSAGE_TYPES.EARLY_UII:\n            var earlyUiiNotif = new EarlyUiiNotification(instance);\n            var earlyUiiResponse = earlyUiiNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.EARLY_UII,\n              earlyUiiResponse,\n            );\n            break;\n          case MESSAGE_TYPES.END_CALL:\n            var endCallNotif = new EndCallNotification(instance);\n            var endCallResponse = endCallNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.END_CALL,\n              endCallResponse,\n            );\n            break;\n          case MESSAGE_TYPES.GATES_CHANGE:\n            var gateChangeNotif = new GatesChangeNotification();\n            var gateChangeResponse = gateChangeNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.GATES_CHANGE,\n              gateChangeResponse,\n            );\n            break;\n          case MESSAGE_TYPES.GENERIC:\n            var genericNotif = new GenericNotification();\n            var generic = genericNotif.processResponse(data);\n            var responseTo = data.ui_notification['@response_to'];\n            var request = utils.findRequestById(instance, responseTo);\n            if (request) {\n              // found corresponding request, fire registered callback for type\n              var type = request.type;\n              var callbackFnName = utils.findCallbackBasedOnMessageType(type);\n\n              if (callbackFnName) {\n                if (type === MESSAGE_TYPES.CALLBACK_CANCEL) {\n                  generic.leadId = request.msg.lead_id['#text'];\n                }\n                utils.fireCallback(instance, callbackFnName, generic);\n              } else {\n                // no registered callback, fallback to generic notification\n                utils.fireCallback(\n                  instance,\n                  CALLBACK_TYPES.GENERIC_NOTIFICATION,\n                  generic,\n                );\n              }\n            } else {\n              if (generic.messageCode === '001') {\n                // caller hangup, stop pinging call\n                if (UIModel.getInstance().pingIntervalId) {\n                  clearInterval(UIModel.getInstance().pingIntervalId);\n                }\n              }\n\n              // no corresponding request, just fire generic notification callback\n              utils.fireCallback(\n                instance,\n                CALLBACK_TYPES.GENERIC_NOTIFICATION,\n                generic,\n              );\n            }\n            break;\n          case MESSAGE_TYPES.NEW_CALL:\n            var newCallNotif = new NewCallNotification();\n            var newCallResponse = newCallNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.NEW_CALL,\n              newCallResponse,\n            );\n            new NewCallUtils(instance, data).processSessionsForCall();\n\n            break;\n          case MESSAGE_TYPES.OFFHOOK_TERM:\n            if (UIModel.getInstance().offhookTermRequest === null) {\n              // offhook term initiated by IQ\n              UIModel.getInstance().offhookTermRequest = new OffhookTermRequest();\n            }\n            var termResponse = UIModel.getInstance().offhookTermRequest.processResponse(\n              data,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.OFFHOOK_TERM,\n              termResponse,\n            );\n            break;\n          case MESSAGE_TYPES.PREVIEW_LEAD_STATE:\n            var leadStateNotif = new PreviewLeadStateNotification();\n            var leadStateResponse = leadStateNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.PREVIEW_LEAD_STATE,\n              leadStateResponse,\n            );\n            break;\n          case MESSAGE_TYPES.PENDING_DISP:\n            var pendingDispNotif = new PendingDispNotification();\n            var pendingDispResponse = pendingDispNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.PENDING_DISP,\n              pendingDispResponse,\n            );\n            break;\n          case MESSAGE_TYPES.PENDING_CHAT_DISP:\n            var pendingChatDispNotif = new PendingChatDispNotification();\n            var pendingChatDispResponse = pendingChatDispNotif.processResponse(\n              data,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.PENDING_CHAT_DISP,\n              pendingChatDispResponse,\n            );\n            break;\n          case MESSAGE_TYPES.REVERSE_MATCH:\n            var reverseMatchNotif = new ReverseMatchNotification();\n            var reverseMatchResponse = reverseMatchNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.REVERSE_MATCH,\n              reverseMatchResponse,\n            );\n            break;\n          case MESSAGE_TYPES.TCPA_SAFE_LEAD_STATE:\n            var leadStateTcpaNotif = new TcpaSafeLeadStateNotification();\n            var leadStateTcpaResponse = leadStateTcpaNotif.processResponse(\n              data,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.TCPA_SAFE_LEAD_STATE,\n              leadStateTcpaResponse,\n            );\n            break;\n          case MESSAGE_TYPES.CHAT_ACTIVE:\n            var activeNotif = new ChatActiveNotification();\n            var activeResponse = activeNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_ACTIVE,\n              activeResponse,\n            );\n            break;\n          case MESSAGE_TYPES.CHAT_INACTIVE:\n            var inactiveNotif = new ChatInactiveNotification();\n            var inactiveResponse = inactiveNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_INACTIVE,\n              inactiveResponse,\n            );\n            break;\n          case MESSAGE_TYPES.CHAT_CLIENT_RECONNECT:\n            var reconnectNotif = new ChatClientReconnectNotification();\n            var reconnectResponse = reconnectNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_CLIENT_RECONNECT,\n              reconnectResponse,\n            );\n            break;\n          case MESSAGE_TYPES.CHAT_PRESENTED:\n            var presentedNotif = new ChatPresentedNotification();\n            presentedNotif.processResponse(data);\n            break;\n          case MESSAGE_TYPES.CHAT_TYPING:\n            var typingNotif = new ChatTypingNotification();\n            var typingResponse = typingNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_TYPING,\n              typingResponse,\n            );\n            break;\n          case MESSAGE_TYPES.CHAT_NEW:\n            var newChatNotif = new NewChatNotification();\n            var newChatResponse = newChatNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_NEW,\n              newChatResponse,\n            );\n            break;\n          case MESSAGE_TYPES.CHAT_MESSAGE:\n            var chatMessage = new ChatMessageRequest();\n            var chatMessageResponse = chatMessage.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_MESSAGE,\n              chatMessageResponse,\n            );\n            break;\n          case MESSAGE_TYPES.CHAT_CANCELLED:\n            var chatCancelled = new ChatCancelledNotification();\n            var chatCancelledResponse = chatCancelled.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_CANCELLED,\n              chatCancelledResponse,\n            );\n            break;\n          case MESSAGE_TYPES.CHAT_ADD_SESSION:\n            var addChatSession = new AddChatSessionNotification();\n            var addChatSessionResponse = addChatSession.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_ADD_SESSION,\n              addChatSessionResponse,\n            );\n            break;\n          case MESSAGE_TYPES.STOP_MONITOR_CHAT:\n            var stopChatMonitor = new StopMonitorChatRequest();\n            var stopChatMonitorResponse = stopChatMonitor.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_STOP_MONITOR,\n              stopChatMonitorResponse,\n            );\n            break;\n          case MESSAGE_TYPES.DIRECT_AGENT_ROUTE:\n            var directAgentTransfer = new DirectAgentTransferNotification();\n            var directAgentTransferResponse = directAgentTransfer.processResponse(\n              data,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.DIRECT_AGENT_TRANSFER_NOTIF,\n              directAgentTransferResponse,\n            );\n            break;\n          case MESSAGE_TYPES.AGENT_DEBUG_EMAIL:\n            var emailNotif = new AdminDebugEmailNotification();\n            var emailNotifResp = emailNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.AGENT_DEBUG_EMAIL_NOTIF,\n              emailNotifResp,\n            );\n            break;\n          case MESSAGE_TYPES.CHAT_LOAD_MEDIA:\n            var loadMediaNotif = new LoadMediaNotification();\n            var loadMediaResp = loadMediaNotif.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_LOAD_MEDIA,\n              loadMediaResp,\n            );\n            break;\n          case MESSAGE_TYPES.CHAT_AGENT_ASSIGN_FAILURE:\n            var chatAgentAssignFailureNotif = new ChatAgentAssignFailureNotification();\n            var chatAgentAssignFailureResp = chatAgentAssignFailureNotif.processResponse(\n              data,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_AGENT_ASSIGN_FAILURE,\n              chatAgentAssignFailureResp,\n            );\n            break;\n          case MESSAGE_TYPES.LOGOUT:\n            var logoutNotification = new LogoutRequest();\n            var logoutNotifResponse = logoutNotification.processResponse(data);\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.LOGOUT,\n              logoutNotifResponse,\n            );\n            var model = UIModel.getInstance();\n\n            //remove agent_id and hash_code from local storage\n            model.dataStore.remove('agent_id');\n            model.dataStore.remove('hash_code');\n\n            // set login flag here in case notification initiated externally\n            // and not in response to agent logout request\n            model.agentSettings.isLoggedIn = false;\n\n            instance.closeSocket();\n            break;\n          case MESSAGE_TYPES.MONITOR_CHAT:\n            //TODO: do this\n\n            break;\n          case MESSAGE_TYPES.LEAVE_CHAT:\n            //TODO: do this\n\n            break;\n        }\n      },\n\n      processDialerResponse: function (instance, response) {\n        var type = response.dialer_request['@type'];\n        var messageId = response.dialer_request['@message_id'];\n        var dest = messageId === '' ? 'IS' : messageId.slice(0, 2);\n        var message =\n          'Received ' +\n          type.toUpperCase() +\n          ' dialer response message from ' +\n          dest;\n\n        // log message response\n        utils.logMessage(LOG_LEVELS.INFO, message, response);\n\n        // Send generic on message response\n        utils.fireCallback(instance, CALLBACK_TYPES.ON_MESSAGE, response);\n\n        // Fire callback function\n        switch (type.toUpperCase()) {\n          case MESSAGE_TYPES.PREVIEW_DIAL_ID:\n            var pdRequest = new PreviewDialRequest();\n            var dialResponse = pdRequest.processResponse(response);\n            if (dialResponse.action.toUpperCase() === 'SEARCH') {\n              utils.fireCallback(\n                instance,\n                CALLBACK_TYPES.LEAD_SEARCH,\n                dialResponse,\n              );\n            } else {\n              utils.fireCallback(\n                instance,\n                CALLBACK_TYPES.PREVIEW_FETCH,\n                dialResponse,\n              );\n            }\n            break;\n          case MESSAGE_TYPES.TCPA_SAFE_ID:\n            var tcpaRequest = new TcpaSafeRequest();\n            var tcpaResponse = tcpaRequest.processResponse(response);\n            if (tcpaResponse.action.toUpperCase() === 'SEARCH') {\n              utils.fireCallback(\n                instance,\n                CALLBACK_TYPES.SAFE_MODE_SEARCH,\n                tcpaResponse,\n              );\n            } else {\n              utils.fireCallback(\n                instance,\n                CALLBACK_TYPES.SAFE_MODE_FETCH,\n                tcpaResponse,\n              );\n            }\n            break;\n        }\n      },\n\n      processRequest: function (instance, message) {\n        var type = message.ui_request['@type'];\n\n        // Fire callback function\n        switch (type.toUpperCase()) {\n          case MESSAGE_TYPES.CHAT_SEND:\n            var chatSendRequest = new ChatSendRequest();\n            var chatSendResponse = chatSendRequest.processResponse(message);\n            utils.fireCallback(instance, CALLBACK_TYPES.CHAT, chatSendResponse);\n            break;\n          case MESSAGE_TYPES.CHAT_ROOM_STATE:\n            var chatRoomStateRequest = new ChatRoomStateRequest();\n            var chatRoomStateResponse = chatRoomStateRequest.processResponse(\n              message,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.CHAT_ROOM_STATE,\n              chatRoomStateResponse,\n            );\n            break;\n        }\n      },\n\n      processStats: function (instance, data) {\n        var type = data.ui_stats['@type'];\n        var message =\n          'Received ' + type.toUpperCase() + ' response message from IS';\n\n        // Fire callback function\n        switch (type.toUpperCase()) {\n          case MESSAGE_TYPES.STATS_AGENT:\n            var agentStats = UIModel.getInstance().agentStatsPacket.processResponse(\n              data,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.STATS_AGENT,\n              agentStats,\n            );\n            break;\n          case MESSAGE_TYPES.STATS_AGENT_DAILY:\n            var agentDailyStats = UIModel.getInstance().agentDailyStatsPacket.processResponse(\n              data,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.STATS_AGENT_DAILY,\n              agentDailyStats,\n            );\n\n            // start daily stats interval timer, request update every second\n            if (UIModel.getInstance().agentDailyIntervalId === null) {\n              UIModel.getInstance().agentDailyIntervalId = setInterval(\n                utils.onAgentDailyStats,\n                1000,\n              );\n            }\n\n            break;\n          case MESSAGE_TYPES.STATS_CAMPAIGN:\n            var campaignStats = UIModel.getInstance().campaignStatsPacket.processResponse(\n              data,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.STATS_CAMPAIGN,\n              campaignStats,\n            );\n            break;\n          case MESSAGE_TYPES.STATS_QUEUE:\n            var queueStats = UIModel.getInstance().queueStatsPacket.processResponse(\n              data,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.STATS_QUEUE,\n              queueStats,\n            );\n            break;\n          case MESSAGE_TYPES.STATS_CHAT:\n            var chatStats = UIModel.getInstance().chatQueueStatsPacket.processResponse(\n              data,\n            );\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.STATS_CHAT_QUEUE,\n              chatStats,\n            );\n            break;\n        }\n      },\n\n      /*\n       * Take the xml marked JSON, group and item property names and reformat to\n       * simple javascript object without the xml markers.\n       * Will work recursively down the tree on nested objects and arrays.\n       *\n       * example of acceptable response tree (groupProp = requeue_gates, itemProp = gate_group):\n       *   \"requeue_gates\": {\n       *       \"gate_group\": [\n       *           {\n       *               \"@gate_group_id\": \"4\",\n       *               \"@group_name\": \"Test Gate Group\",\n       *               \"gates\": {\n       *                   \"gate\": [\n       *                       {\n       *                           \"@gate_desc\": \"\",\n       *                           \"@gate_id\": \"10951\",\n       *                           \"@gate_name\": \"CD ACD Queue\"\n       *                       },\n       *                       {\n       *                           \"@gate_desc\": \"\",\n       *                           \"@gate_id\": \"11036\",\n       *                           \"@gate_name\": \"Xerox Test Gate\"\n       *                       }\n       *                   ]\n       *               },\n       *               \"skills\": {\n       *                   \"skill\": [\n       *                       {\n       *                           \"@skill_desc\": \"\",\n       *                           \"@skill_id\": \"322\",\n       *                           \"@skill_name\": \"English\"\n       *                       },\n       *                       {\n       *                           \"@skill_desc\": \"\",\n       *                           \"@skill_id\": \"323\",\n       *                           \"@skill_name\": \"Spanish\"\n       *                       }\n       *                   ]\n       *               }\n       *           },\n       *           {\n       *               \"@gate_group_id\": \"14292\",\n       *               \"@group_name\": \"New Test Group\",\n       *               \"gates\": {\n       *                   \"gate\": {\n       *                       \"@gate_desc\": \"\",\n       *                       \"@gate_id\": \"15535\",\n       *                       \"@gate_name\": \"New Test Gate\"\n       *                   }\n       *               },\n       *               \"skills\": {\n       *                   \"skill\": {\n       *                       \"@skill_desc\": \"\",\n       *                       \"@skill_id\": \"1658\",\n       *                       \"@skill_name\": \"new skill\"\n       *                   }\n       *               }\n       *           }\n       *       ]\n       *   }\n       *\n       *   OR\n       *\n       *   \"outdial_dispositions\": {\n       *       \"@type\": \"GATE\",\n       *       \"disposition\": [\n       *          {\n       *           \"@contact_forwarding\": \"false\",\n       *           \"@disposition_id\": \"926\",\n       *           \"@is_complete\": \"1\",\n       *           \"@require_note\": \"0\",\n       *           \"@save_survey\": \"1\",\n       *           \"@xfer\": \"0\",\n       *           \"#text\": \"One B\"\n       *          },\n       *          {\n       *           \"@contact_forwarding\": \"false\",\n       *           \"@disposition_id\": \"926\",\n       *           \"@is_complete\": \"1\",\n       *           \"@require_note\": \"0\",\n       *           \"@save_survey\": \"1\",\n       *           \"@xfer\": \"0\",\n       *           \"#text\": \"One B\"\n       *          }\n       *      ]\n       *   }\n       *\n       *   OR\n       *\n       *   \"outdial_dispositions\": {\n       *       \"@type\": \"GATE\",\n       *       \"disposition\": {\n       *          {\n       *           \"@contact_forwarding\": \"false\",\n       *           \"@disposition_id\": \"926\",\n       *           \"@is_complete\": \"1\",\n       *           \"@require_note\": \"0\",\n       *           \"@save_survey\": \"1\",\n       *           \"@xfer\": \"0\",\n       *           \"#text\": \"One B\"\n       *          }\n       *      }\n       *   }\n       */\n\n      processResponseCollection: function (\n        response,\n        groupProp,\n        itemProp,\n        textName,\n      ) {\n        textName = textName || 'text';\n\n        if (\n          response[groupProp] &&\n          typeof response[groupProp][itemProp] !== 'undefined'\n        ) {\n          var itemsRaw = response[groupProp][itemProp];\n          return this._processItems(itemsRaw, textName);\n        } else {\n          return [];\n        }\n      },\n\n      escapeSoftphoneUsername: function (str) {\n        return str && str.replace(/[@]/g, '_at_');\n      },\n\n      _processItems: function (itemsRaw, textName) {\n        var result = [];\n        if (typeof itemsRaw === 'undefined' || itemsRaw === null) {\n          return result;\n        }\n\n        if (!Array.isArray(itemsRaw)) {\n          itemsRaw = [itemsRaw];\n        }\n\n        for (var i = 0; i < itemsRaw.length; i++) {\n          result.push(this._processItem(itemsRaw[i], textName));\n        }\n\n        return result;\n      },\n\n      _processItem: function (itemRaw, textName) {\n        /*\n         * Be sure that the item we are processing is not a #text node only, where the \"texName\" is also \"text\". If this\n         * is the case, it means there's a default value that needs to get converted and isn't going to be mapped to a custom\n         * field.  Therefore, we treat it as just a single value, not an object.\n         */\n        if (\n          textName === 'text' &&\n          Object.keys(itemRaw).length === 1 &&\n          itemRaw['#text'] != null\n        ) {\n          return this._tryConvertValueToBoolean(itemRaw['#text']);\n        }\n\n        // Convert the raw item to a new item, with keys and values processed below\n        //\n        var item = {};\n        for (var key in itemRaw) {\n          var formattedKey = this._convertToFormattedKey(key, textName);\n\n          var value = itemRaw[key];\n\n          // If we aren't an object, set the value and continue to next key\n          if (typeof value !== 'object') {\n            item[formattedKey] = this._tryConvertValueToBoolean(value);\n            continue;\n          }\n\n          if (\n            (Array.isArray(value) && value.length === 0) ||\n            Object.keys(value).length === 0\n          ) {\n            // Empty property\n            item[formattedKey] = '';\n          } else if (Array.isArray(value) || Object.keys(value).length > 1) {\n            // Array or object with more than one key\n            formattedKey = this._convertKeyForCollection(formattedKey);\n            item[formattedKey] = this._processItems(value, textName);\n          } else if (\n            Object.keys(value).length === 1 &&\n            value['#text'] != null\n          ) {\n            // One property of type \"#text\"\n            item[formattedKey] = value['#text'];\n          } else {\n            // One property not with key \"#text\"\n            item[formattedKey] = this._processItems(\n              value[Object.keys(value)[0]],\n              'text',\n            );\n          }\n        }\n\n        return item;\n      },\n\n      _convertToFormattedKey: function (key, textName) {\n        var formattedKey;\n        if (key.match(/^#/)) {\n          // dealing with text property\n          formattedKey = textName;\n        } else {\n          // dealing with attribute\n          formattedKey = key.replace(/@/, ''); // remove leading '@'\n          formattedKey = formattedKey.replace(/_([a-z])/g, function (g) {\n            return g[1].toUpperCase();\n          }); // convert to camelCase\n        }\n\n        return formattedKey;\n      },\n\n      _convertKeyForCollection: function (formattedKey) {\n        if (formattedKey.substr(formattedKey.length - 1) !== 's') {\n          return formattedKey + 's';\n        }\n\n        return formattedKey;\n      },\n\n      _tryConvertValueToBoolean: function (value) {\n        if (value === null) {\n          return null;\n        }\n\n        // can't convert 0 | 1 to boolean since some are counters\n        if (value.toUpperCase() === 'TRUE') {\n          return true;\n        } else if (value.toUpperCase() === 'FALSE') {\n          return false;\n        } else {\n          return value;\n        }\n      },\n\n      fireCallback: function (instance, type, response) {\n        response = response || '';\n        if (\n          typeof type !== 'undefined' &&\n          typeof instance.callbacks[type] === 'function'\n        ) {\n          instance.callbacks[type].call(instance, response);\n        }\n      },\n\n      setCallback: function (instance, type, callback) {\n        if (typeof type !== 'undefined' && typeof callback !== 'undefined') {\n          instance.callbacks[type] = callback;\n        }\n      },\n\n      getMessageId: function () {\n        function s4() {\n          return Math.floor((1 + Math.random()) * 0x10000)\n            .toString(16)\n            .substring(1);\n        }\n\n        return (\n          s4() +\n          s4() +\n          '-' +\n          s4() +\n          '-' +\n          s4() +\n          '-' +\n          s4() +\n          '-' +\n          s4() +\n          s4() +\n          s4()\n        );\n      },\n\n      // check whether the given array of ids exist in the given array of objects\n      // if not available, remove the id\n      // returns the clean list of acceptable ids\n      checkExistingIds: function (objArray, idArray, idProperty) {\n        var availIds = [];\n        var removeIds = [];\n\n        // get list of available ids\n        for (var o = 0; o < objArray.length; o++) {\n          availIds.push(parseInt(objArray[o][idProperty], 10));\n        }\n\n        // go through selected ids and mark unfound ones for removal\n        for (var i = 0; i < idArray.length; i++) {\n          if (availIds.indexOf(parseInt(idArray[i], 10)) === -1) {\n            // selected id not found in available list, mark for removal\n            removeIds.push(parseInt(idArray[i], 10));\n          }\n        }\n\n        // remove marked ids\n        for (var r = idArray.length - 1; r >= 0; r--) {\n          if (removeIds.indexOf(parseInt(idArray[r], 10)) > -1) {\n            // remove\n            idArray.splice(r, 1);\n          }\n        }\n\n        return idArray;\n      },\n\n      // find an object by given id in an array of objects\n      findObjById: function (objArray, id, propName) {\n        for (var o = 0; o < objArray.length; o++) {\n          var obj = objArray[o];\n          if (obj[propName] === id) {\n            return obj;\n          }\n        }\n\n        return null;\n      },\n\n      // check whether agent dialDest is either a 10-digit number or valid sip\n      validateDest: function (dialDest) {\n        var isValid = false;\n        var isNum = /^\\d+$/.test(dialDest);\n        if (isNum && dialDest.length === 10) {\n          // is a 10-digit number\n          isValid = true;\n        } else if (\n          dialDest.slice(0, 4).toLowerCase() === 'sip:' &&\n          dialDest.indexOf('@') !== -1\n        ) {\n          // has sip prefix and '@'\n          isValid = true;\n        }\n\n        return isValid;\n      },\n\n      // pass in MESSAGE_TYPE string (e.g. \"CANCEL-CALLBACK\"),\n      // return corresponding CALLBACK_TYPE function name string (e.g. \"callbackCancelResponse\")\n      findCallbackBasedOnMessageType: function (messageType) {\n        var callbackFnName = '';\n        for (var key in MESSAGE_TYPES) {\n          if (MESSAGE_TYPES[key] === messageType) {\n            callbackFnName = CALLBACK_TYPES[key];\n          }\n        }\n        return callbackFnName;\n      },\n\n      // add message, detail, and status values to the formattedResponse\n      // returned from each request processResponse method\n      buildDefaultResponse: function (response, includeOpId) {\n        includeOpId = includeOpId || false; // default to false, the ES5 way\n        var message = '';\n        var detail = '';\n        var status = '';\n        var operationId = '';\n\n        var msg = '';\n        var det = '';\n        var stat = '';\n        var opId = '';\n\n        // add properties if present\n        if (response.ui_response) {\n          msg = response.ui_response.message;\n          det = response.ui_response.detail;\n          stat = response.ui_response.status;\n          opId = response.ui_response.operation_id;\n        } else if (response.ui_notification) {\n          msg = response.ui_notification.message;\n          det = response.ui_notification.detail;\n          stat = response.ui_notification.status;\n          opId = response.ui_notification.operation_id;\n        }\n\n        if (msg) {\n          message = msg['#text'] || '';\n        }\n        if (det) {\n          detail = det['#text'] || '';\n        }\n        if (stat) {\n          status = stat['#text'] || '';\n        }\n        if (opId) {\n          operationId = opId['#text'] || '';\n        }\n\n        var returnMsg = {\n          message: message,\n          detail: detail,\n          status: status,\n        };\n\n        if (includeOpId) {\n          returnMsg.operationId = operationId;\n        }\n\n        return returnMsg;\n      },\n\n      toString: function (val) {\n        if (val) {\n          return val.toString();\n        } else {\n          return '';\n        }\n      },\n\n      // safely check if property exists and return empty string\n      // instead of undefined if it doesn't exist\n      // convert \"TRUE\" | \"FALSE\" to boolean\n      getText: function (obj, prop) {\n        var o = obj[prop];\n        if (o && o['#text']) {\n          if (o['#text'].toUpperCase() === 'TRUE') {\n            return true;\n          } else if (o['#text'].toUpperCase() === 'FALSE') {\n            return false;\n          } else {\n            return o['#text'] || '';\n          }\n        } else {\n          return '';\n        }\n      },\n\n      // safely check if property exists and return empty string\n      // instead of undefined if it doesn't exist\n      // convert \"TRUE\" | \"FALSE\" to boolean\n      getAttribute: function (obj, prop) {\n        var o = obj[prop];\n        if (o && o[prop]) {\n          if (o[prop].toUpperCase() === 'TRUE') {\n            return true;\n          } else if (o[prop].toUpperCase() === 'FALSE') {\n            return false;\n          } else {\n            return o[prop] || '';\n          }\n        } else {\n          return '';\n        }\n      },\n\n      // Parses a string of key value pairs and returns an Array of KeyValue objects.\n      // @param str The string of keyvalue pairs to parse\n      // @param outerDelimiter The delimiter that separates each keyValue pair\n      // @param innerDelimiter The delimiter that separates each key from its value\n      parseKeyValuePairsFromString: function (\n        str,\n        outerDelimiter,\n        innerDelimiter,\n      ) {\n        if (!str) {\n          return [];\n        }\n\n        var arr = str.split(outerDelimiter).reduce(function (dict, pair) {\n          var keyValue = pair.split(innerDelimiter);\n          dict[keyValue[0]] = keyValue[1];\n          return dict;\n        }, {});\n\n        return arr;\n      },\n\n      // Finds a request by responseTo id\n      findRequestById: function (instance, id) {\n        var request = null;\n        for (var i = 0; i < instance._requests.length; i++) {\n          if (instance._requests[i].id === id) {\n            request = instance._requests[i];\n            break;\n          }\n        }\n        return request;\n      },\n\n      // called every 30 seconds letting intelliQueue know\n      // not to archive the call so dispositions and other call\n      // clean up actions can happen\n      sendPingCallMessage: function () {\n        UIModel.getInstance().pingCallRequest = new PingCallRequest();\n        var msg = UIModel.getInstance().pingCallRequest.formatJSON();\n        var msgObj = JSON.parse(msg);\n        var agentId = utils.getText(msgObj.ui_request, 'agent_id');\n        var uii = utils.getText(msgObj.ui_request, 'uii');\n        if (agentId === '' || uii === '') {\n          utils.logMessage(\n            LOG_LEVELS.WARN,\n            'PING-CALL message failed, agentId or UII is empty',\n            msgObj,\n          );\n        } else {\n          utils.sendMessage(UIModel.getInstance().libraryInstance, msg);\n        }\n      },\n\n      // called every 5 seconds to request stats from IntelliServices\n      sendStatsRequestMessage: function () {\n        UIModel.getInstance().statsRequest = new StatsRequest();\n        var msg = UIModel.getInstance().statsRequest.formatJSON();\n        utils.sendMessage(UIModel.getInstance().libraryInstance, msg);\n      },\n\n      // called every 20 seconds to ping IntelliSocket whent stats are disabled\n      sendPingRequestMessage: function () {\n        var msg = 'BEAT';\n        var instance = UIModel.getInstance().libraryInstance;\n        if (instance.socket && instance.socket.readyState === 1) {\n          instance.socket.send('BEAT');\n        }\n      },\n\n      // called every second\n      // if we have received agent daily stats\n      // start incrementing various data points since not all\n      // data is incremented when we want on the IntelliServices side\n      onAgentDailyStats: function () {\n        if (Object.keys(UIModel.getInstance().agentDailyStats).length !== 0) {\n          var agentSettings = UIModel.getInstance().agentSettings,\n            stats = UIModel.getInstance().agentDailyStats;\n\n          var curLoginTime = stats.totalLoginTime;\n          stats.totalLoginTime = Number(curLoginTime) + 1;\n\n          if (agentSettings.isOffhook) {\n            var curOffhookTime = stats.totalOffhookTime;\n            stats.totalOffhookTime = Number(curOffhookTime) + 1;\n          }\n\n          if (agentSettings.currentState === 'ENGAGED') {\n            var curTalkTime = stats.totalTalkTime;\n            stats.totalTalkTime = Number(curTalkTime) + 1;\n\n            var curCallTime = stats.currCallTime;\n            stats.currCallTime = Number(curCallTime) + 1;\n          }\n        }\n      },\n\n      // called in loginAgent if 'integrated' dial destination passed in\n      getDialDestination: function () {\n        var model = UIModel.getInstance();\n        var softphoneSettings = model.softphoneSettings;\n        var dialDestType = model.applicationSettings.dialDestType;\n\n        var dialDest = '';\n\n        // default to the first server in the array\n        if (softphoneSettings.sipInfo.length > 0) {\n          var currentServer = softphoneSettings.sipInfo[0];\n          if (dialDestType === 'LEGACY_SOFTPHONE') {\n            dialDest =\n              'sip:' +\n              utils.escapeSoftphoneUsername(currentServer.username) +\n              '@' +\n              currentServer.domain;\n          } else if (dialDestType === 'RC_SOFTPHONE') {\n            dialDest =\n              utils.escapeSoftphoneUsername(currentServer.username) +\n              '@RC_SOFTPHONE';\n          }\n        }\n\n        return dialDest;\n      },\n\n      // get valid access token based on agentId and login hash code\n      refreshAccessToken: function () {\n        var model = UIModel.getInstance();\n        var baseUrl = model.authHost + model.baseAuthUri;\n        var errorMsg = 'Error in refreshing access token';\n        var params = {\n          queryParams: {\n            loginHashcode: model.connectionSettings.hashCode,\n            agentId: model.agentSettings.agentId,\n            platformId: model.authenticateRequest.platformId,\n            isSso: model.applicationSettings.isSso,\n          },\n        };\n\n        return new HttpService(baseUrl)\n          .httpPost('login/agent/hashcode', params)\n          .then(\n            function (response) {\n              try {\n                response = JSON.parse(response.response);\n                UIModel.getInstance().authenticateRequest.engageAccessToken =\n                  response.accessToken;\n              } catch (err) {\n                utils.logMessage(LOG_LEVELS.WARN, errorMsg, err);\n              }\n            },\n            function (err) {\n              var errResponse = {\n                type: 'refreshAccessToken Error',\n                message: errorMsg,\n              };\n              utils.logMessage(LOG_LEVELS.WARN, errResponse, err);\n            },\n          );\n      },\n\n      // return random string of length given\n      generateOpId: function (length) {\n        length = length || 24;\n        var CHARACTERS = '0123456789abcdefghijklmnopqrstuvwxyz';\n\n        var result = '';\n        for (var i = length; i > 0; --i) {\n          result +=\n            CHARACTERS[Math.round(Math.random() * (CHARACTERS.length - 1))];\n        }\n        return result;\n      },\n    };\n\n    // CONSTANTS\n\n    /*jshint esnext: true */\n    const LOG_LEVELS = {\n      DEBUG: 'debug',\n      STATS: 'stats',\n      INFO: 'info',\n      WARN: 'warn',\n      ERROR: 'error',\n    };\n\n    const AUTHENTICATE_TYPES = {\n      USERNAME_PASSWORD: 'USERNAME_PASSWORD',\n      RC_TOKEN: 'RC_TOKEN',\n      ENGAGE_TOKEN: 'ENGAGE_TOKEN',\n    };\n\n    // add all callback types to setCallback method description\n    const CALLBACK_TYPES = {\n      ACK: 'acknowledgeResponse',\n      ADD_SESSION: 'addSessionNotification',\n      AGENT_DEBUG_EMAIL_NOTIF: 'agentDebugEmailNotification',\n      AGENT_STATE: 'agentStateResponse',\n      AUTHENTICATE: 'authenticateResponse',\n      BARGE_IN: 'bargeInResponse',\n      CALLBACK_CANCEL: 'callbackCancelResponse',\n      CALLBACK_PENDING: 'callbacksPendingResponse',\n      CALL_NOTES: 'callNotesResponse',\n      CAMPAIGN_DISPOSITIONS: 'campaignDispositionsResponse',\n      CHAT: 'chatResponse', // internal chat\n      CHAT_ACTIVE: 'chatActiveNotification', // external chat\n      CHAT_ADD_SESSION: 'addChatSessionNotification', // external chat\n      CHAT_CANCELLED: 'chatCancelledNotification', // external chat\n      CHAT_CLIENT_RECONNECT: 'chatClientReconnectNotification',\n      CHAT_INACTIVE: 'chatInactiveNotification', // external chat\n      CHAT_LIST: 'chatListResponse', // external chat\n      CHAT_LOAD_MEDIA: 'chatLoadMediaResponse', // engage digital task\n      CHAT_AGENT_ASSIGN_FAILURE: 'chatAgentAssignFailureResponse', // engage digital task\n      CHAT_MESSAGE: 'chatMessageNotification', // external chat\n      CHAT_NEW: 'chatNewNotification', // external chat\n      CHAT_PRESENTED: 'chatPresentedNotification', // external chat\n      CHAT_ROOM_STATE: 'chatRoomStateResponse',\n      CHAT_STATE: 'chatStateResponse', // external chat\n      CHAT_STOP_MONITOR: 'stopAgentChatMonitorNotification', // external chat\n      CHAT_TYPING: 'chatTypingNotification', // external chat\n      CLOSE_SOCKET: 'closeResponse',\n      COACH_CALL: 'coachResponse',\n      CONFIG: 'configureResponse',\n      DIAL_GROUP_CHANGE: 'dialGroupChangeNotification',\n      DIAL_GROUP_CHANGE_PENDING: 'dialGroupChangePendingNotification',\n      DIRECT_AGENT_TRANSFER: 'directAgentTransferResponse',\n      DIRECT_AGENT_TRANSFER_LIST: 'directAgentTransferListResponse',\n      DIRECT_AGENT_TRANSFER_NOTIF: 'directAgentTransferNotification',\n      DROP_SESSION: 'dropSessionNotification',\n      EARLY_UII: 'earlyUiiNotification',\n      END_CALL: 'endCallNotification',\n      GATES_CHANGE: 'gatesChangeNotification',\n      GENERIC_NOTIFICATION: 'genericNotification',\n      GENERIC_RESPONSE: 'genericResponse',\n      HOLD: 'holdResponse',\n      LEAD_HISTORY: 'leadHistoryResponse',\n      LEAD_INSERT: 'leadInsertResponse',\n      LEAD_SEARCH: 'leadSearchResponse',\n      LEAD_UPDATE: 'leadUpdateResponse',\n      LOGIN: 'loginResponse',\n      LOGIN_PHASE_1: 'loginPhase1Response',\n      LOGIN_MULTISOCKET: 'multiSocketResponse',\n      LOGOUT: 'logoutResponse',\n      LOG_CONSOLE_RESULTS: 'logConsoleResultsResponse',\n      LOG_RESULTS: 'logResultsResponse',\n      NEW_CALL: 'newCallNotification',\n      OFFHOOK_INIT: 'offhookInitResponse',\n      OFFHOOK_TERM: 'offhookTermNotification',\n      OPEN_SOCKET: 'openResponse',\n      PAUSE_RECORD: 'pauseRecordResponse',\n      PENDING_CHAT_DISP: 'pendingChatDispNotification',\n      PENDING_DISP: 'pendingDispNotification',\n      PREVIEW_FETCH: 'previewFetchResponse',\n      PREVIEW_LEAD_STATE: 'previewLeadStateNotification',\n      RECORD: 'recordResponse',\n      REQUEUE: 'requeueResponse',\n      REVERSE_MATCH: 'reverseMatchNotification',\n      SAFE_MODE_FETCH: 'safeModeFetchResponse',\n      SAFE_MODE_SEARCH: 'safeModeSearchResponse',\n      SCRIPT_CONFIG: 'scriptConfigResponse',\n      SILENT_MONITOR: 'monitorResponse',\n      STATS_AGENT: 'agentStats',\n      STATS_AGENT_DAILY: 'agentDailyStats',\n      STATS_CAMPAIGN: 'campaignStats',\n      STATS_CHAT_QUEUE: 'chatQueueStats',\n      STATS_QUEUE: 'queueStats',\n      SUPERVISOR_LIST: 'supervisorListResponse',\n      TCPA_SAFE_LEAD_STATE: 'tcpaSafeLeadStateNotification',\n      WEBRTC_INFO: 'webRtcInfoResponse',\n      XFER_COLD: 'coldXferResponse',\n      XFER_WARM: 'warmXferResponse',\n      SEARCH_DIR: 'searchDirectoryResponse',\n      EXTENSION_PRESENCE: 'extensionPresenceInfo',\n\n      // SOFTPHONE Callbacks\n      SIP_CONNECTED: 'sipConnectedNotification',\n      SIP_DIAL_DEST_CHANGED: 'sipDialDestChangedNotification',\n      SIP_ENDED: 'sipEndedNotification',\n      SIP_MUTE: 'sipMuteResponse',\n      SIP_REGISTERED: 'sipRegisteredNotification',\n      SIP_REGISTRATION_FAILED: 'sipRegistrationFailedNotification',\n      SIP_RINGING: 'sipRingingNotification',\n      SIP_SWITCH_REGISTRAR: 'sipSwitchRegistrarNotification',\n      SIP_UNMUTE: 'sipUnmuteResponse',\n      SIP_UNREGISTERED: 'sipUnregisteredNotification',\n      ROTATE_WEBRTC_SERVER: 'rotateWebRtcServer',\n    };\n\n    const MESSAGE_TYPES = {\n      ACK: 'ACK',\n      ADD_SESSION: 'ADD-SESSION',\n      AGENT_DEBUG_EMAIL: 'AGENT-DEBUG-EMAIL',\n      AGENT_STATE: 'AGENT-STATE',\n      BARGE_IN: 'BARGE-IN',\n      CALLBACK_CANCEL: 'CANCEL-CALLBACK',\n      CALLBACK_PENDING: 'PENDING-CALLBACKS',\n      CALL_NOTES: 'CALL-NOTES',\n      CAMPAIGN_DISPOSITIONS: 'CAMPAIGN-DISPOSITIONS',\n      CHAT_ACTIVE: 'CHAT-ACTIVE', // external chat\n      CHAT_ADD_SESSION: 'ADD-CHAT-SESSION', // external chat\n      CHAT_AGENT_END: 'CHAT-END', // external chat\n      CHAT_ALIAS: 'CHAT-ALIAS', // internal chat\n      CHAT_CANCELLED: 'CHAT-CANCELLED', // external chat\n      CHAT_CLIENT_RECONNECT: 'CHAT-CLIENT-RECONNECT', // external chat\n      CHAT_DISPOSITION: 'CHAT-DISPOSITION', // external chat\n      CHAT_INACTIVE: 'CHAT-INACTIVE', // external chat\n      CHAT_LIST: 'CHAT-LIST', // external chat\n      CHAT_MANUAL_SMS: 'MANUAL-SMS', // external chat\n      CHAT_MESSAGE: 'CHAT-MESSAGE', // external chat\n      CHAT_NEW: 'NEW-CHAT', // external chat\n      CHAT_PRESENTED: 'CHAT-PRESENTED', // external chat\n      CHAT_PRESENTED_RESPONSE: 'CHAT-PRESENTED-RESPONSE', // external chat\n      CHAT_REQUEUE: 'CHAT-REQUEUE', // external chat\n      CHAT_ROOM: 'CHAT-ROOM', // internal chat\n      CHAT_ROOM_STATE: 'CHAT-ROOM-STATE', // internal chat\n      CHAT_SEND: 'CHAT', // internal chat\n      CHAT_STATE: 'CHAT-STATE', // external chat\n      CHAT_TYPING: 'CHAT-TYPING', // external chat\n      CHAT_LOAD_MEDIA: 'LOAD-MEDIA', // engage digital task\n      CHAT_AGENT_ASSIGN_FAILURE: 'CHAT-AGENT-ASSIGN-FAILURE', // engage digital task\n      DIAL_GROUP_CHANGE: 'DIAL_GROUP_CHANGE',\n      DIAL_GROUP_CHANGE_PENDING: 'DIAL_GROUP_CHANGE_PENDING',\n      DIRECT_AGENT_ROUTE: 'DIRECT-AGENT-ROUTE',\n      DIRECT_AGENT_TRANSFER: 'DIRECT-AGENT-TRANSFER',\n      DIRECT_AGENT_TRANSFER_LIST: 'DIRECT-AGENT-TRANSFER-LIST',\n      DROP_SESSION: 'DROP-SESSION',\n      EARLY_UII: 'EARLY_UII',\n      END_CALL: 'END-CALL',\n      GATES_CHANGE: 'GATES_CHANGE',\n      GENERIC: 'GENERIC',\n      HANGUP: 'HANGUP',\n      HOLD: 'HOLD',\n      INBOUND_DISPOSITION: 'INBOUND-DISPOSITION',\n      LEAD_HISTORY: 'LEAD-HISTORY',\n      LEAD_INSERT: 'LEAD-INSERT',\n      LEAD_UPDATE: 'LEAD-UPDATE',\n      LEAVE_CHAT: 'CHAT-DROP-SESSION', // external chat\n      LOGIN: 'LOGIN',\n      LOGIN_PHASE_1: 'LOGIN-PHASE-1',\n      LOGIN_MULTISOCKET: 'MULTISOCKET',\n      LOGOUT: 'LOGOUT',\n      MONITOR_CHAT: 'CHAT-MONITOR', // external chat\n      NEW_CALL: 'NEW-CALL',\n      OFFHOOK_INIT: 'OFF-HOOK-INIT',\n      OFFHOOK_TERM: 'OFF-HOOK-TERM',\n      ONE_TO_ONE_OUTDIAL: 'ONE-TO-ONE-OUTDIAL',\n      ONE_TO_ONE_OUTDIAL_CANCEL: 'ONE-TO-ONE-OUTDIAL-CANCEL',\n      ON_MESSAGE: 'ON-MESSAGE',\n      OUTDIAL_DISPOSITION: 'OUTDIAL-DISPOSITION',\n      PAUSE_RECORD: 'PAUSE-RECORD',\n      PENDING_CHAT_DISP: 'PENDING-CHAT-DISP', // external chat\n      PENDING_DISP: 'PENDING_DISP',\n      PING_CALL: 'PING-CALL',\n      PREVIEW_DIAL: 'PREVIEW-DIAL',\n      PREVIEW_DIAL_ID: 'PREVIEW_DIAL',\n      PREVIEW_LEAD_STATE: 'PREVIEW-LEAD-STATE',\n      RECORD: 'RECORD',\n      REQUEUE: 'RE-QUEUE',\n      REVERSE_MATCH: 'REVERSE_MATCH',\n      SCRIPT_CONFIG: 'SCRIPT-CONFIG',\n      SCRIPT_RESULT: 'SCRIPT-RESULT',\n      STATS: 'STATS',\n      STATS_AGENT: 'AGENT',\n      STATS_AGENT_DAILY: 'AGENTDAILY',\n      STATS_CAMPAIGN: 'CAMPAIGN',\n      STATS_CHAT: 'CHAT',\n      STATS_QUEUE: 'GATE',\n      STOP_MONITOR_CHAT: 'CHAT-DROP-MONITORING-SESSION', // external chat\n      SUPERVISOR_LIST: 'SUPERVISOR-LIST', // internal chat\n      TCPA_SAFE: 'TCPA-SAFE',\n      TCPA_SAFE_ID: 'TCPA_SAFE',\n      TCPA_SAFE_LEAD_STATE: 'TCPA-SAFE-LEAD-STATE',\n      UPDATE_DIAL_DESTINATION: 'UPDATE_DIAL_DESTINATION',\n      XFER_COLD: 'COLD-XFER',\n      XFER_WARM: 'WARM-XFER',\n      XFER_WARM_CANCEL: 'WARM-XFER-CANCEL',\n      // SOFTPHONE message types\n      SETUP_WEB_RTC_SERVER: 'SETUP_WEB_RTC_SERVER',\n      SIP_INIT: 'SIP_INIT',\n      SIP_ANSWER: 'SIP_ANSWER',\n      SIP_REJECT: 'SIP_REJECT',\n      SIP_REGISTER: 'SIP_REGISTER',\n      SIP_HANGUP: 'SIP_HANGUP',\n      SIP_SEND_DTMF: 'SIP_SEND_DTMF',\n      SIP_TOGGLE_MUTE: 'SIP_TOGGLE_MUTE',\n      SOFTPHONE_RESET_SESSION: 'SOFTPHONE_RESET_SESSION',\n      SWITCH_SOFTPHONE_REGISTRAR: 'SWITCH_SOFTPHONE_REGISTRAR',\n    };\n\n    /*\n     * Init wrapper for the core module.\n     * @param {Object} The Object that the library gets attached to in\n     * library.init.js.  If the library was not loaded with an AMD loader such as\n     * require.js, this is the global Object.\n     */\n    function initAgentLibraryCore(context) {\n      'use strict';\n\n      /**\n     * This is the constructor for the Library Object. Note that the constructor is also being\n     * attached to the context that the library was loaded in.\n     * @param {Object} [config={}] Set authHost, if the WebSocket should be secure or not with the testingLocal boolean, and callback functions.\n     * @constructor\n     * @namespace Core\n     * @memberof AgentLibrary\n     * @property {object} callbacks Internal map of registered callback functions\n     * @property {array} _requests Internal map of requests by message id, private property.\n     * @property {array} _queuedMsgs Array of pending messages to be sent when socket reconnected\n     * @property {boolean} _isReconnect Whether or not we are doing a reconnect for the socket\n     * @example\n      var Lib = new AgentLibrary({\n           authHost:'d01-test.cf.dev:8080', // window.location.origin\n           testingLocal: true,\n           allowMultiSocket: true,\n           callbacks: {\n               closeResponse: onCloseFunction,\n               openResponse: onOpenFunction\n           }\n      });\n     */\n      var AgentLibrary = (context.AgentLibrary = function (config) {\n        config = config || {};\n\n        // define properties\n        this.callbacks = {};\n        this._requests = [];\n        this._queuedMsgs = [];\n        this._isReconnect = false;\n\n        // start with new model instance\n        UIModel.resetInstance();\n\n        // set instance on model object\n        UIModel.getInstance().libraryInstance = this;\n\n        // initialize indexedDB for logging\n        this.openLogger();\n        this.openConsoleLogger();\n\n        // set default values\n        if (typeof config.callbacks !== 'undefined') {\n          this.callbacks = config.callbacks;\n        }\n\n        if (typeof config.authHost !== 'undefined') {\n          UIModel.getInstance().authHost = config.authHost;\n        }\n\n        if (config.isSecureSocket !== 'undefined') {\n          if (typeof config.isSecureSocket === 'string') {\n            config.isSecureSocket =\n              config.isSecureSocket.toLowerCase() === 'true';\n          }\n          UIModel.getInstance().socketProtocol = config.isSecureSocket\n            ? 'wss://'\n            : 'ws://';\n        }\n\n        UIModel.getInstance().applicationSettings.allowMultiSocket =\n          config.allowMultiSocket === true;\n\n        return this;\n      });\n\n      /**\n       * Set multiple callback functions based on type\n       * @memberof AgentLibrary.Core\n       * @param {Object} callbackMap Contains map of callback types to their respective functions:<br />\n       * <tt>callbackMap = {<br />\n       *      closeResponse: onCloseFunction,<br />\n       *      openResponse: onOpenFunction<br />\n       * }\n       * </tt>\n       *<br />\n       * Possible callback types:\n       * <li>\"addSessionNotification\"</li>\n       * <li>\"agentStateResponse\"</li>\n       * <li>\"acknowledgeResponse\"</li>\n       * <li>\"bargeInResponse\"</li>\n       * <li>\"closeResponse\"</li>\n       * <li>\"coachResponse\"</li>\n       * <li>\"configureResponse\"</li>\n       * <li>\"callNotesResponse\"</li>\n       * <li>\"callbacksPendingResponse\"</li>\n       * <li>\"callbackCancelResponse\"</li>\n       * <li>\"campaignDispositionsResponse\"</li>\n       * <li>\"chatResponse\"</li>\n       * <li>\"dialGroupChangeNotification\"</li>\n       * <li>\"dialGroupChangePendingNotification\"</li>\n       * <li>\"dropSessionNotification\"</li>\n       * <li>\"earlyUiiNotification\"</li>\n       * <li>\"endCallNotification\"</li>\n       * <li>\"gatesChangeNotification\"</li>\n       * <li>\"genericNotification\"</li>\n       * <li>\"genericResponse\"</li>\n       * <li>\"holdResponse\"</li>\n       * <li>\"leadSearchResponse\"</li>\n       * <li>\"loginResponse\"</li>\n       * <li>\"logoutResponse\"</li>\n       * <li>\"monitorResponse\"</li>\n       * <li>\"newCallNotification\"</li>\n       * <li>\"offhookInitResponse\"</li>\n       * <li>\"offhookTermNotification\"</li>\n       * <li>\"openResponse\"</li>\n       * <li>\"pauseRecordResponse\"</li>\n       * <li>\"pendingDispNotification\"</li>\n       * <li>\"previewFetchResponse\"</li>\n       * <li>\"previewLeadStateNotification\"</li>\n       * <li>\"recordResponse\"</li>\n       * <li>\"requeueResponse\"</li>\n       * <li>\"reverseMatchNotification\"</li>\n       * <li>\"safeModeFetchResponse\"</li>\n       * <li>\"safeModeSearchResponse\"</li>\n       * <li>\"scriptConfigResponse\"</li>\n       * <li>\"supervisorListResponse\"</li>\n       * <li>\"coldXferResponse\"</li>\n       * <li>\"warmXferResponse\"</li>\n       * <li>\"agentStats\"</li>\n       * <li>\"agentDailyStats\"</li>\n       * <li>\"campaignStats\"</li>\n       * <li>\"queueStats\"</li>\n       * <li>\"chatQueueStats\"</li>\n       * @type {object}\n       */\n      AgentLibrary.prototype.setCallbacks = function (callbackMap) {\n        for (var property in callbackMap) {\n          this.callbacks[property] = callbackMap[property];\n        }\n      };\n\n      /**\n       * Set an individual callback function for the given type\n       * @memberof AgentLibrary.Core\n       * @param {string} type The name of the event that fires the callback function\n       * @param {function} callback The function to call for the given type\n       */\n      AgentLibrary.prototype.setCallback = function (type, callback) {\n        this.callbacks[type] = callback;\n      };\n\n      /**\n       * Get the map of all registered callbacks\n       * @memberof AgentLibrary.Core\n       * @returns {array}\n       */\n      AgentLibrary.prototype.getCallbacks = function () {\n        return this.callbacks;\n      };\n\n      /**\n       * Get a given registered callback by type\n       * @memberof AgentLibrary.Core\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getCallback = function (type) {\n        return this.callbacks[type];\n      };\n\n      /**\n       * Get the socket connection to IntelliSocket\n       * @memberof AgentLibrary.Core\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getSocket = function (type) {\n        return this.socket;\n      };\n\n      /**\n       * @namespace Requests\n       * @memberof AgentLibrary.Core\n       */\n\n      ////////////////////////////\n      // requests and responses //\n      ////////////////////////////\n      /**\n       * Get outgoing Authenticate Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAuthenticateRequest = function () {\n        return UIModel.getInstance().authenticateRequest;\n      };\n      /**\n       * Get outgoing Login Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getLoginRequest = function () {\n        return UIModel.getInstance().loginRequest;\n      };\n      /**\n       * Get the MultiSocket Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getMultiSocketRequest = function () {\n        return UIModel.getInstance().multiSocketRequest;\n      };\n      /**\n       * Get outgoing Login Phase 1 Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAgentConfigRequest = function () {\n        return UIModel.getInstance().loginPhase1Request;\n      };\n      /**\n       * Get outgoing Logout Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getLogoutRequest = function () {\n        return UIModel.getInstance().logoutRequest;\n      };\n      /**\n       * Get latest Agent Daily Stats object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAgentDailyStats = function () {\n        return UIModel.getInstance().agentDailyStats;\n      };\n      /**\n       * Get latest Call Tokens object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getCallTokens = function () {\n        return UIModel.getInstance().callTokens;\n      };\n      /**\n       * Get latest outgoing Agent State Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAgentStateRequest = function () {\n        return UIModel.getInstance().agentStateRequest;\n      };\n      /**\n       * Get latest outgoing offhook init Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getOffhookInitRequest = function () {\n        return UIModel.getInstance().offhookInitRequest;\n      };\n      /**\n       * Get latest outgoing offhook termination Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getOffhookTermRequest = function () {\n        return UIModel.getInstance().offhookTermRequest;\n      };\n      /**\n       * Get latest outgoing Hangup Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getHangupRequest = function () {\n        return UIModel.getInstance().hangupRequest;\n      };\n      /**\n       * Get latest outgoing Preview Dial Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getPreviewDialRequest = function () {\n        return UIModel.getInstance().previewDialRequest;\n      };\n      /**\n       * Get latest TCPA Safe Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getTcpaSafeRequest = function () {\n        return UIModel.getInstance().tcpaSafeRequest;\n      };\n      /**\n       * Get latest Manual Outdial Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getManualOutdialRequest = function () {\n        return UIModel.getInstance().oneToOneOutdialRequest;\n      };\n      /**\n       * Get latest Manual Outdial Cancel Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getManualOutdialCancelRequest = function () {\n        return UIModel.getInstance().oneToOneOutdialCancelRequest;\n      };\n      /**\n       * Get latest Call Notes Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getCallNotesRequest = function () {\n        return UIModel.getInstance().callNotesRequest;\n      };\n      /**\n       * Get latest Campaign Dispositions Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getCampaignDispositionsRequest = function () {\n        return UIModel.getInstance().campaignDispositionsRequest;\n      };\n      /**\n       * Get latest Disposition Call Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getDispositionRequest = function () {\n        return UIModel.getInstance().dispositionRequest;\n      };\n      /**\n       * Get latest Disposition Manual Pass Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getDispositionManualPassRequest = function () {\n        return UIModel.getInstance().dispositionManualPassRequest;\n      };\n      /**\n       * Get latest Warm Transfer Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getWarmTransferRequest = function () {\n        return UIModel.getInstance().warmXferRequest;\n      };\n      /**\n       * Get latest Cold Transfer Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getColdTransferRequest = function () {\n        return UIModel.getInstance().coldXferRequest;\n      };\n      /**\n       * Get latest Warm Transfer Cancel Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getWarmTransferCancelRequest = function () {\n        return UIModel.getInstance().warmXferCancelRequest;\n      };\n      /**\n       * Get latest Requeue Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getRequeueRequest = function () {\n        return UIModel.getInstance().requeueRequest;\n      };\n      /**\n       * Get latest Barge-In Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getBargeInRequest = function () {\n        return UIModel.getInstance().bargeInRequest;\n      };\n      /**\n       * Get latest Hold Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getHoldRequest = function () {\n        return UIModel.getInstance().holdRequest;\n      };\n      /**\n       * Get latest Pause Record Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getPauseRecordRequest = function () {\n        return UIModel.getInstance().pauseRecordRequest;\n      };\n      /**\n       * Get latest Record Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getRecordRequest = function () {\n        return UIModel.getInstance().recordRequest;\n      };\n      /**\n       * Get latest Chat Presented Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatPresentedRequest = function () {\n        return UIModel.getInstance().chatPresentedRequest;\n      };\n      /**\n       * Get latest Chat Disposition Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatDispositionRequest = function () {\n        return UIModel.getInstance().chatDispositionRequest;\n      };\n      /**\n       * Get latest Chat Message Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatMessageRequest = function () {\n        return UIModel.getInstance().chatMessageRequest;\n      };\n      /**\n       * Get latest Chat Requeue Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatRequeueRequest = function () {\n        return UIModel.getInstance().chatRequeueRequest;\n      };\n      /**\n       * Get latest Chat Typing Request object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatTypingRequest = function () {\n        return UIModel.getInstance().chatTypingRequest;\n      };\n      /**\n       * Get latest Agent Stats object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAgentStatsPacket = function () {\n        return UIModel.getInstance().agentStatsPacket;\n      };\n      /**\n       * Get latest Agent Daily Stats object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAgentDailyStatsPacket = function () {\n        return UIModel.getInstance().agentDailyStatsPacket;\n      };\n      /**\n       * Get latest Queue Stats object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getQueueStatsPacket = function () {\n        return UIModel.getInstance().queueStatsPacket;\n      };\n      /**\n       * Get latest Chat Queue Stats object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatQueueStatsPacket = function () {\n        return UIModel.getInstance().chatQueueStatsPacket;\n      };\n      /**\n       * Get latest Campaign Stats object\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getCampaignStatsPacket = function () {\n        return UIModel.getInstance().campaignStatsPacket;\n      };\n      /**\n       * Get packet received on successful Phase 1 login\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAgentConfigPacket = function () {\n        return UIModel.getInstance().loginPhase1Packet;\n      };\n      /**\n       * Get packet received on successful Login (2nd layer login)\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getLoginPacket = function () {\n        return UIModel.getInstance().loginPacket;\n      };\n      /**\n       * Get latest received packet for Agent State\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAgentStatePacket = function () {\n        return UIModel.getInstance().agentStatePacket;\n      };\n      /**\n       * Get latest received packet for the Current Call\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getCurrentCallPacket = function () {\n        return UIModel.getInstance().currentCallPacket;\n      };\n      /**\n       * Get latest received packet for initiating an offhook session\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getOffhookInitPacket = function () {\n        return UIModel.getInstance().offhookInitPacket;\n      };\n      /**\n       * Get latest received packet for terminating an offhook session\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getOffhookTermPacket = function () {\n        return UIModel.getInstance().offhookTermPacket;\n      };\n\n      /**\n       * Get chat agent end request class\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n\n      AgentLibrary.prototype.getChatAgentEnd = function () {\n        return UIModel.getInstance().chatAgentEnd;\n      };\n\n      /**\n       * Get WebRTC request class\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n\n      AgentLibrary.prototype.getWebRTCRequest = function () {\n        return UIModel.getInstance().webRTCRequest;\n      };\n\n      AgentLibrary.prototype.getChatListRequest = function () {\n        return UIModel.getInstance().chatListRequest;\n      };\n\n      /**\n       * Get SearchDirectoryRequest class\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n\n      AgentLibrary.prototype.getSearchDirectoryRequest = function () {\n        return UIModel.getInstance().searchDirectoryRequest;\n      };\n\n      /**\n       * @namespace Notifications\n       * @memberof AgentLibrary.Core\n       */\n      ///////////////////\n      // notifications //\n      ///////////////////\n      /**\n       * Get Dial Group Change notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getDialGroupChangeNotification = function () {\n        return UIModel.getInstance().dialGroupChangeNotification;\n      };\n      /**\n       * Get Dial Group Change Pending notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getDialGroupChangePendingNotification = function () {\n        return UIModel.getInstance().dialGroupChangePendingNotification;\n      };\n      /**\n       * Get End Call notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getEndCallNotification = function () {\n        return UIModel.getInstance().endCallNotification;\n      };\n      /**\n       * Get Gates Change notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getGatesChangeNotification = function () {\n        return UIModel.getInstance().gatesChangeNotification;\n      };\n      /**\n       * Get Generic notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getGenericNotification = function () {\n        return UIModel.getInstance().genericNotification;\n      };\n      /**\n       * Get New Call notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getNewCallNotification = function () {\n        return UIModel.getInstance().newCallNotification;\n      };\n      /**\n       * Get current call object\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getCurrentCall = function () {\n        return UIModel.getInstance().currentCall;\n      };\n      /**\n       * Get Add Session notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAddSessionNotification = function () {\n        return UIModel.getInstance().addSessionNotification;\n      };\n      /**\n       * Get Drop Session notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getDropSessionNotification = function () {\n        return UIModel.getInstance().dropSessionNotification;\n      };\n      /**\n       * Get Early UII notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getEarlyUiiNotification = function () {\n        return UIModel.getInstance().earlyUiiNotification;\n      };\n      /**\n       * Get Chat Active notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatActiveNotification = function () {\n        return UIModel.getInstance().chatActiveNotification;\n      };\n      /**\n       * Get Chat Inactive notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatInactiveNotification = function () {\n        return UIModel.getInstance().chatInactiveNotification;\n      };\n      /**\n       * Get Chat Inactive notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatClientReconnectNotification = function () {\n        return UIModel.getInstance().chatClientReconnectNotification;\n      };\n      /**\n       * Get Chat Presented notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatPresentedNotification = function () {\n        return UIModel.getInstance().chatPresentedNotification;\n      };\n      /**\n       * Get Chat Typing notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatTypingNotification = function () {\n        return UIModel.getInstance().chatTypingNotification;\n      };\n      /**\n       * Get New Chat notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getNewChatNotification = function () {\n        return UIModel.getInstance().newChatNotification;\n      };\n      /**\n       * Get Load Media notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getLoadMediaNotification = function () {\n        return UIModel.getInstance().loadMediaNotification;\n      };\n      /**\n       * Get Load Media notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatAgentAssignFailureNotification = function () {\n        return UIModel.getInstance().chatAgentAssignFailureNotification;\n      };\n      /**\n       * Get Chat Typing notification class\n       * @memberof AgentLibrary.Core.Notifications\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatCancelledNotification = function () {\n        return UIModel.getInstance().chatCancelledNotification;\n      };\n\n      /**\n       * @namespace Settings\n       * @memberof AgentLibrary.Core\n       */\n      //////////////////////\n      // settings objects //\n      //////////////////////\n      /**\n       * Get Application Settings object containing the current state of application related data\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getApplicationSettings = function () {\n        return UIModel.getInstance().applicationSettings;\n      };\n      /**\n       * Get Softphone Settings object containing the current state of SIP related data\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getSoftphoneSettings = function () {\n        return UIModel.getInstance().softphoneSettings;\n      };\n      /**\n       * Get Chat Settings object containing the current state of chat related data\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatSettings = function () {\n        return UIModel.getInstance().chatSettings;\n      };\n      /**\n       * Get Connection Settings object containing the current state of connection related data\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getConnectionSettings = function () {\n        return UIModel.getInstance().connectionSettings;\n      };\n      /**\n       * Get Inbound Settings object containing the current state of inbound related data\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getInboundSettings = function () {\n        return UIModel.getInstance().inboundSettings;\n      };\n      /**\n       * Get Outbound Settings object containing the current state of outbound related data\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getOutboundSettings = function () {\n        return UIModel.getInstance().outboundSettings;\n      };\n      /**\n       * Get Agent Settings object containing the current state of agent related data\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAgentSettings = function () {\n        return UIModel.getInstance().agentSettings;\n      };\n      /**\n       * Get Transfer Sessions\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getTransferSessions = function () {\n        return UIModel.getInstance().transferSessions;\n      };\n\n      AgentLibrary.prototype.getPendingSessions = function () {\n        return UIModel.getInstance().pendingNewCallSessions;\n      };\n      /**\n       * Get the Agent Permissions object containing the current state of agent permissions\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAgentPermissions = function () {\n        return UIModel.getInstance().agentPermissions;\n      };\n\n      /**\n       * @namespace Stats\n       * @memberof AgentLibrary.Core\n       */\n      ///////////////////\n      // stats objects //\n      ///////////////////\n\n      /**\n       * Get the Agent stats object containing the current state of agent stats\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAgentStats = function () {\n        return UIModel.getInstance().agentStats;\n      };\n      /**\n       * Get the Agent Daily stats object containing the current state of agent daily stats\n       * @memberof AgentLibrary.Core.Stats\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getAgentDailyStats = function () {\n        return UIModel.getInstance().agentDailyStats;\n      };\n      /**\n       * Get the Queue stats object containing the current state of queue stats\n       * @memberof AgentLibrary.Core.Stats\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getQueueStats = function () {\n        return UIModel.getInstance().queueStats;\n      };\n      /**\n       * Get the Chat Queue stats object containing the current state of chat queue stats\n       * @memberof AgentLibrary.Core.Stats\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getChatQueueStats = function () {\n        return UIModel.getInstance().chatQueueStats;\n      };\n      /**\n       * Get the Campaign stats object containing the current state of campaign stats\n       * @memberof AgentLibrary.Core.Stats\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getCampaignStats = function () {\n        return UIModel.getInstance().campaignStats;\n      };\n\n      /**\n       * Get filteredDirectory object containing the filtered directory data\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getFilteredDirectory = function () {\n        return UIModel.getInstance().filteredDirectory;\n      };\n\n      /**\n       * Get extensionPresenceResponse object containing the presenceInfo of extensionIds\n       * @memberof AgentLibrary.Core.Settings\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getExtensionPresenceResponse = function () {\n        return UIModel.getInstance().extensionPresenceResponse;\n      };\n\n      /**\n       * Get ExtensionPresenceRequest class\n       * @memberof AgentLibrary.Core.Requests\n       * @returns {object}\n       */\n      AgentLibrary.prototype.getExtensionPresenceRequest = function () {\n        return UIModel.getInstance().extensionPresenceRequest;\n      };\n\n      /**********************\n       *  PRIVATE FUNCTIONS *\n       **********************/\n\n      AgentLibrary.prototype._utils = utils;\n\n      AgentLibrary.prototype._NewCallUtils = NewCallUtils;\n\n      AgentLibrary.prototype._HttpService = HttpService;\n\n      AgentLibrary.prototype._getUIModel = function () {\n        return UIModel;\n      };\n    }\n\n    function initAgentLibrarySocket(context) {\n      'use strict';\n      var AgentLibrary = context.AgentLibrary;\n\n      AgentLibrary.prototype.openSocket = function (agentId, callback) {\n        var instance = this;\n        utils.setCallback(instance, CALLBACK_TYPES.OPEN_SOCKET, callback);\n        if ('WebSocket' in context) {\n          if (!instance.socket) {\n            var model = UIModel.getInstance();\n\n            model.agentSettings.agentId = agentId; // set agentId here since id is in scope\n\n            if (instance._isReconnect) {\n              // update access_token on reconnect\n              _getNewAccessToken(instance);\n            } else {\n              _buildSocketDest();\n              _initSocket(instance);\n            }\n          }\n        } else {\n          console.error('WebSocket NOT supported by your Browser');\n          utils.logMessage(\n            LOG_LEVELS.WARN,\n            'WebSocket NOT supported by your Browser',\n            '',\n          );\n        }\n      };\n\n      AgentLibrary.prototype.closeSocket = function () {\n        this.socket.close();\n      };\n\n      // when socket is successfully opened, check to see if there are any queued messaged\n      // and if so, send them.\n      AgentLibrary.prototype.socketOpened = function () {\n        var instance = this;\n        var currDts = new Date();\n        var threeMins = 3 * 60 * 1000; // milliseconds\n        var queuedMsg;\n\n        // get agent configuration information - \"phase 1 login\"\n        UIModel.getInstance().loginPhase1Request = new LoginPhase1Request();\n        var msg = UIModel.getInstance().loginPhase1Request.formatJSON();\n        utils.sendMessage(this, msg);\n\n        // if this is a reconnect, we need to re-authenticate with IntelliServices & IntelliQueue\n        if (instance._isReconnect) {\n          instance._isReconnect = false;\n          // Add IntelliQueue reconnect\n          var loginRequest = JSON.parse(\n            UIModel.getInstance().loginRequest.formatJSON(),\n          );\n          var hashCode = UIModel.getInstance().connectionSettings.hashCode;\n          loginRequest.ui_request.hash_code = {\n            '#text': hashCode,\n          };\n          loginRequest.ui_request.update_login = {\n            '#text': 'FALSE',\n          };\n          loginRequest.ui_request.reconnect = {\n            '#text': 'TRUE',\n          };\n          instance._queuedMsgs.unshift({\n            dts: new Date(),\n            msg: JSON.stringify(loginRequest),\n          });\n        }\n        for (var idx = 0; idx < instance._queuedMsgs.length; idx++) {\n          queuedMsg = instance._queuedMsgs[idx];\n          if (currDts.getTime() - queuedMsg.dts.getTime() < threeMins) {\n            // message queued less than 3 mins ago, send\n            utils.logMessage(\n              LOG_LEVELS.DEBUG,\n              'Sending queued message to IntelliSocket.',\n              queuedMsg.msg,\n            );\n            utils.sendMessage(instance, queuedMsg.msg);\n          } else {\n            // message expired, don't send\n            utils.logMessage(\n              LOG_LEVELS.DEBUG,\n              'Queued message expired, discarding.',\n              queuedMsg.msg,\n            );\n          }\n        }\n        // reset queued messages\n        instance._queuedMsgs = [];\n      };\n\n      // build WebSocket destination based on current agentId and access token\n      function _buildSocketDest() {\n        var model = UIModel.getInstance();\n        var socketDest = model.applicationSettings.socketDest;\n        socketDest = model.socketProtocol + model.authenticateRequest.socketUrl;\n        socketDest += ':' + model.authenticateRequest.socketPort;\n        socketDest += '?access_token=' + model.authenticateRequest.accessToken;\n        socketDest += '&agent_id=' + model.agentSettings.agentId;\n\n        model.applicationSettings.socketDest = socketDest; // seems redundant, but needed to update value on model\n        return socketDest;\n      }\n\n      // connect socket, setup socket event listeners\n      function _initSocket(instance) {\n        var socketDest = UIModel.getInstance().applicationSettings.socketDest;\n        utils.logMessage(\n          LOG_LEVELS.DEBUG,\n          'Attempting to open socket connection to ' + socketDest,\n          '',\n        );\n\n        instance.socket = new WebSocket(socketDest);\n\n        instance.socket.onopen = function () {\n          // stop reconnect timer\n          clearInterval(UIModel.getInstance().reconnectIntervalId);\n          UIModel.getInstance().reconnectIntervalId = null;\n\n          UIModel.getInstance().applicationSettings.socketConnected = true;\n          utils.fireCallback(instance, CALLBACK_TYPES.OPEN_SOCKET, {\n            reconnect: instance._isReconnect,\n          });\n          instance.socketOpened();\n        };\n\n        instance.socket.onerror = function (err) {\n          utils.fireCallback(instance, CALLBACK_TYPES.OPEN_SOCKET, {\n            error: err,\n          });\n        };\n\n        instance.socket.onmessage = function (evt) {\n          if (evt.data !== 'BOP') {\n            var data = JSON.parse(evt.data);\n            if (data.ui_response) {\n              utils.processResponse(instance, data);\n            } else if (data.ui_notification) {\n              utils.processNotification(instance, data);\n            } else if (data.dialer_request) {\n              utils.processDialerResponse(instance, data);\n            } else if (data.ui_stats) {\n              utils.processStats(instance, data);\n            } else if (data.ui_request) {\n              utils.processRequest(instance, data);\n            }\n          }\n        };\n\n        instance.socket.onclose = function () {\n          utils.fireCallback(instance, CALLBACK_TYPES.CLOSE_SOCKET, '');\n          UIModel.getInstance().applicationSettings.socketConnected = false;\n          instance.socket = null;\n\n          // cancel daily stats timer\n          clearInterval(UIModel.getInstance().agentDailyIntervalId);\n          UIModel.getInstance().agentDailyIntervalId = null;\n\n          // cancel stats timer\n          clearInterval(UIModel.getInstance().statsIntervalId);\n          UIModel.getInstance().statsIntervalId = null;\n\n          // cancel BEAT timer\n          clearInterval(UIModel.getInstance().pingStatIntervalId);\n          UIModel.getInstance().pingStatIntervalId = null;\n\n          // if we are still logged in, set reconnect flag and try to reconnect\n          if (UIModel.getInstance().agentSettings.isLoggedIn) {\n            instance._isReconnect = true;\n            console.warn(\n              'AgentLibrary: WebSocket is not connected, attempting to reconnect.',\n            );\n\n            // try reconnect every 5 seconds\n            UIModel.getInstance().reconnectIntervalId = setInterval(\n              function () {\n                instance.openSocket(\n                  UIModel.getInstance().agentSettings.agentId,\n                );\n              },\n              5000,\n            );\n          }\n        };\n      }\n\n      // get valid access token based on agentId and login hash code\n      function _getNewAccessToken(instance) {\n        var model = UIModel.getInstance();\n        var baseUrl = model.authHost + model.baseAuthUri;\n        var errorMsg = 'Error in opening WebSocket on retrieving access token';\n        var params = {\n          queryParams: {\n            loginHashcode: model.connectionSettings.hashCode,\n            agentId: model.agentSettings.agentId,\n            platformId: model.authenticateRequest.platformId,\n            isSso: model.applicationSettings.isSso,\n          },\n        };\n\n        new HttpService(baseUrl).httpPost('login/agent/hashcode', params).then(\n          function (response) {\n            try {\n              response = JSON.parse(response.response);\n              UIModel.getInstance().authenticateRequest.accessToken =\n                response.accessToken;\n              _buildSocketDest();\n              _initSocket(instance);\n            } catch (err) {\n              utils.logMessage(LOG_LEVELS.WARN, errorMsg, err);\n            }\n          },\n          function (err) {\n            var errResponse = {\n              type: 'WebSocket Error',\n              message: errorMsg,\n            };\n            utils.logMessage(LOG_LEVELS.WARN, errorMsg, err);\n          },\n        );\n      }\n    }\n\n    function initAgentLibraryAgent(context) {\n      /**\n       * @namespace Agent\n       * @memberof AgentLibrary\n       */\n\n      'use strict';\n\n      var AgentLibrary = context.AgentLibrary;\n\n      /**\n       * Sends authenticate request to Engage Auth. Can either pass in 3 params of username, password, and platformId or\n       * two params of jwt and tokenType. In each case a callback function may optionally be specified.\n       * @memberof AgentLibrary.Agent\n       * @param {string} username Agent's username\n       * @param {string} password Agent's password\n       * @param {string} platformId Designate the platform where the agent is set up\n       * @param {function} [callback=null] Callback function when loginAgent response received\n       */\n      AgentLibrary.prototype.authenticateAgentWithUsernamePassword = function (\n        username,\n        password,\n        platformId,\n        callback,\n      ) {\n        UIModel.getInstance().authenticateRequest = new AuthenticateRequest({\n          username: username,\n          password: password,\n          platformId: platformId,\n          authType: AUTHENTICATE_TYPES.USERNAME_PASSWORD,\n        });\n        UIModel.getInstance().authenticateRequest.sendHttpRequest();\n\n        utils.setCallback(this, CALLBACK_TYPES.AUTHENTICATE, callback);\n      };\n\n      /**\n       * Sends authenticate request to Engage Auth. Returns an array of agents to continue login process.\n       * @memberof AgentLibrary.Agent\n       * @param {string} rcAccessToken JSON Web Token received from RingCentral Single Sign-on API\n       * @param {string} tokenType string type received from RingCentral Single Sign-on API\n       * @param {function} [callback=null] Callback function when loginAgent response received\n       */\n      AgentLibrary.prototype.authenticateAgentWithRcAccessToken = function (\n        rcAccessToken,\n        tokenType,\n        callback,\n      ) {\n        UIModel.getInstance().authenticateRequest = new AuthenticateRequest({\n          rcAccessToken: rcAccessToken,\n          tokenType: tokenType,\n          authType: AUTHENTICATE_TYPES.RC_TOKEN,\n        });\n        UIModel.getInstance().authenticateRequest.sendHttpRequest();\n\n        utils.setCallback(this, CALLBACK_TYPES.AUTHENTICATE, callback);\n      };\n\n      /**\n       * Sends authenticate request to Engage Auth. Returns an array of agents to continue login process.\n       * @memberof AgentLibrary.Agent\n       * @param {string} engageAccessToken JSON Web Token received from RingCentral Single Sign-on API\n       * @param {function} [callback=null] Callback function when loginAgent response received\n       */\n      AgentLibrary.prototype.authenticateAgentWithEngageAccessToken = function (\n        engageAccessToken,\n        callback,\n      ) {\n        UIModel.getInstance().authenticateRequest = new AuthenticateRequest({\n          engageAccessToken: engageAccessToken,\n          authType: AUTHENTICATE_TYPES.ENGAGE_TOKEN,\n        });\n        UIModel.getInstance().authenticateRequest.sendHttpRequest();\n\n        utils.setCallback(this, CALLBACK_TYPES.AUTHENTICATE, callback);\n      };\n\n      /**\n       * Sends request to IntelliQueue to get the agent's available products for login\n       * @memberof AgentLibrary.Agent\n       * @param {function} [callback=null] Callback function when loginPhase1 response received\n       */\n      AgentLibrary.prototype.getAgentConfig = function (callback) {\n        UIModel.getInstance().loginPhase1Request = new LoginPhase1Request();\n        var msg = UIModel.getInstance().loginPhase1Request.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.LOGIN_PHASE_1, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Sends request to the WebRTC Endpoint URL and process the response.\n       * @memberof AgentLibrary.Agent\n       *\n       * @param {function} [callback=null] Callback function when web rtc info response received\n       */\n      AgentLibrary.prototype.getWebRtcInfo = function (callback) {\n        var model = UIModel.getInstance();\n        model.webRTCRequest = new WebRTCRequest();\n        model.webRTCRequest.getSipRegistrationInfo();\n\n        utils.setCallback(this, CALLBACK_TYPES.WEBRTC_INFO, callback);\n      };\n\n      /**\n       * Sends agent configure message (2nd layer login) to IntelliQueue\n       * @memberof AgentLibrary.Agent\n       * @param {string} dialDest The agent's number, sip | DID.\n       * @param {string[]} [queueIds=null] The queue ids the agent will be logged into.\n       * @param {string[]} [chatIds=null] The chat ids the agent will be logged into.\n       * @param {string} [skillProfileId=null] The skill profile the agent will be logged into.\n       * @param {string} [dialGroupId=null] The outbound dial group id the agent will be logged into.\n       * @param {string} [updateFromAdminUI=false] Whether the request is generated from the AdminUI or not.\n       * @param {boolean} isForce Whether the agent login is forcing an existing agentlogin out.\n       * @param {function} [callback=null] Callback function when configureAgent response received.\n       */\n      AgentLibrary.prototype.loginAgent = function (\n        dialDest,\n        queueIds,\n        chatIds,\n        skillProfileId,\n        dialGroupId,\n        updateFromAdminUI,\n        isForce,\n        callback,\n      ) {\n        var model = UIModel.getInstance();\n        var config = {\n          dialDest: dialDest,\n          queueIds: queueIds,\n          chatIds: chatIds,\n          skillProfileId: skillProfileId,\n          dialGroupId: dialGroupId,\n          updateFromAdminUI: updateFromAdminUI,\n          isForce: isForce,\n        };\n        var instance = this;\n\n        // if dialDest is set to `integrated`, we are doing an integrated softphone\n        // and need to get SIP credentials\n        if (config.dialDest === 'integrated') {\n          // set up some global variables to track dial dest type for later offhook init\n          if (\n            model.applicationSettings.isFlr ||\n            !model.applicationSettings.isSso\n          ) {\n            model.applicationSettings.dialDestType = 'LEGACY_SOFTPHONE';\n          } else {\n            model.applicationSettings.dialDestType = 'RC_SOFTPHONE';\n          }\n\n          if (model.softphoneSettings.sipInfo.length === 0) {\n            // call engage-auth api to get webRtc info\n            model.libraryInstance.getWebRtcInfo(function () {\n              config.dialDest = utils.getDialDestination();\n              _setUpAndSendLogin(config, callback, instance);\n            });\n          } else {\n            // set webRtc info from model, could be an update login\n            config.dialDest = utils.getDialDestination();\n            _setUpAndSendLogin(config, callback, instance);\n          }\n        } else {\n          // set up some global variables to track dial dest type for later offhook init\n          if (config.dialDest === 'RC_PHONE') {\n            model.applicationSettings.dialDestType = 'RC_PHONE';\n          }\n\n          _setUpAndSendLogin(config, callback, instance);\n        }\n      };\n\n      function _setUpAndSendLogin(config, callback, instance) {\n        UIModel.getInstance().loginRequest = new LoginRequest(\n          config.dialDest,\n          config.queueIds,\n          config.chatIds,\n          config.skillProfileId,\n          config.dialGroupId,\n          config.updateFromAdminUI,\n          config.isForce,\n        );\n        var msg = UIModel.getInstance().loginRequest.formatJSON();\n\n        utils.setCallback(instance, CALLBACK_TYPES.LOGIN, callback);\n        utils.sendMessage(instance, msg);\n      }\n      /**\n       * Sends multisocket message to IntelliQueue\n       * @memberof AgentLibrary.Agent\n       * @param {function} [callback=null] Callback function when multisocket response received.\n       */\n      AgentLibrary.prototype.multiLoginRequest = function (callback) {\n        var model = UIModel.getInstance();\n        model.multiSocketRequest = new MultiSocketRequest();\n        var msg = model.multiSocketRequest.formatJSON();\n        if (\n          model.dataStore.get('agent_id') &&\n          model.dataStore.get('hash_code')\n        ) {\n          utils.setCallback(this, CALLBACK_TYPES.LOGIN_MULTISOCKET, callback);\n          utils.sendMessage(this, msg);\n        } else {\n          this.getAgentConfig(callback);\n        }\n      };\n\n      /**\n       * Sends agent logout message to IntelliQueue\n       * @memberof AgentLibrary.Agent\n       * @param {number} agentId Id of the agent that will be logged out.\n       * @param {function} [callback=null] Callback function when logoutAgent response received.\n       */\n      AgentLibrary.prototype.logoutAgent = function (agentId, callback) {\n        var model = UIModel.getInstance();\n        if (model.agentSettings.isLoggedIn) {\n          model.agentSettings.isLoggedIn = false;\n          model.logoutRequest = new LogoutRequest(agentId);\n          var msg = model.logoutRequest.formatJSON();\n\n          // socket closed in callback function\n          utils.setCallback(this, CALLBACK_TYPES.LOGOUT, callback);\n          utils.sendMessage(this, msg);\n        }\n      };\n\n      /**\n       * Sends agent logout for the given agent to logout message to IntelliQueue\n       * @memberof AgentLibrary.Agent\n       * @param {number} agentToLogout Id of the agent that will be logged out.\n       * @param {number} [requestMessage=\"\"] Message to send for the logout request.\n       * @param {function} [callback=null] Callback function when logoutAgent response received.\n       */\n      AgentLibrary.prototype.requestLogoutAgent = function (\n        agentToLogout,\n        requestMessage,\n        callback,\n      ) {\n        var isSupervisor =\n          UIModel.getInstance().agentSettings.agentType === 'SUPERVISOR';\n        if (isSupervisor) {\n          //This is a supervisor request to log an agent out. Create the\n          //logout packet and then send the packet to IntelliQueue.\n          UIModel.getInstance().logoutRequest = new LogoutRequest(\n            agentToLogout,\n            requestMessage,\n          );\n          utils.setCallback(this, CALLBACK_TYPES.LOGOUT, callback);\n          var msg = UIModel.getInstance().logoutRequest.formatJSON();\n          utils.sendMessage(this, msg);\n        }\n      };\n\n      /**\n       * Sends agent state change message to IntelliQueue\n       * @memberof AgentLibrary.Agent\n       * @param {string} agentState The system/base state to transition to <br />\n       * AVAILABLE | TRANSITION | ENGAGED | ON-BREAK | WORKING | AWAY | LUNCH | AUX-UNAVAIL-NO-OFFHOOK | AUX-UNAVAIL-OFFHOOK\n       * @param {string} [agentAuxState=\"\"] The aux state display label\n       * @param {function} [callback=null] Callback function when agentState response received\n       */\n      AgentLibrary.prototype.setAgentState = function (\n        agentState,\n        agentAuxState,\n        callback,\n      ) {\n        UIModel.getInstance().agentStateRequest = new AgentStateRequest(\n          agentState,\n          agentAuxState,\n        );\n        var msg = UIModel.getInstance().agentStateRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.AGENT_STATE, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Initiates an agent offhook session\n       * @memberof AgentLibrary.Agent\n       * @param {function} [callback=null] Callback function when offhookInit response received\n       */\n      AgentLibrary.prototype.offhookInit = function (callback) {\n        UIModel.getInstance().offhookInitRequest = new OffhookInitRequest();\n        var msg = UIModel.getInstance().offhookInitRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.OFFHOOK_INIT, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Terminates agent's offhook session\n       * @memberof AgentLibrary.Agent\n       * @param {function} [callback=null] Callback function when pending callbacks response received\n       */\n      AgentLibrary.prototype.offhookTerm = function (callback) {\n        UIModel.getInstance().offhookTermRequest = new OffhookTermRequest();\n        var msg = UIModel.getInstance().offhookTermRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.OFFHOOK_TERM, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Returns scheduled callbacks for the given agent\n       * @memberof AgentLibrary.Agent\n       * @param {number} [agentId=logged in agent id] Id of agent to get callbacks for\n       * @param {function} [callback=null] Callback function when pending callbacks response received\n       */\n      AgentLibrary.prototype.getPendingCallbacks = function (\n        agentId,\n        callback,\n      ) {\n        UIModel.getInstance().callbacksPendingRequest = new CallbacksPendingRequest(\n          agentId,\n        );\n        var msg = UIModel.getInstance().callbacksPendingRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.CALLBACK_PENDING, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Cancel a scheduled callback for the given agent based on lead id\n       * @memberof AgentLibrary.Agent\n       * @param {number} leadId Id of lead callback to cancel\n       * @param {number} [agentId=logged in agent id] Id of agent to cancel specified lead callback for\n       * @param {function} [callback=null] Callback function when callback is canceled\n       */\n      AgentLibrary.prototype.cancelCallback = function (\n        leadId,\n        agentId,\n        callback,\n      ) {\n        UIModel.getInstance().callbackCancelRequest = new CallbackCancelRequest(\n          leadId,\n          agentId,\n        );\n        var msg = UIModel.getInstance().callbackCancelRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.CALLBACK_CANCEL, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Request stats messages to be sent every 5 seconds. The stats responses will be sent as\n       * four possible callback types: agentStats, agentDailyStats, campaignStats, or queueStats\n       * @memberof AgentLibrary.Agent\n       */\n      AgentLibrary.prototype.requestStats = function () {\n        // start stats interval timer, request stats every 5 seconds\n        if (UIModel.getInstance().statsIntervalId === null) {\n          UIModel.getInstance().statsIntervalId = setInterval(\n            utils.sendStatsRequestMessage,\n            5000,\n          );\n          _terminatePing();\n        }\n      };\n\n      /**\n       * Terminate stats messages sent to the agent every 5 seconds.\n       * @memberof AgentLibrary.Agent\n       */\n      AgentLibrary.prototype.terminateStats = function () {\n        clearInterval(UIModel.getInstance().statsIntervalId);\n        UIModel.getInstance().statsIntervalId = null;\n        _requestPing();\n      };\n\n      function _requestPing() {\n        // start ping interval timer, request BEAT every 20 seconds\n        if (UIModel.getInstance().pingStatIntervalId === null) {\n          UIModel.getInstance().pingStatIntervalId = setInterval(\n            utils.sendPingRequestMessage,\n            20000,\n          );\n        }\n      }\n\n      function _terminatePing() {\n        clearInterval(UIModel.getInstance().pingStatIntervalId);\n        UIModel.getInstance().pingStatIntervalId = null;\n      }\n\n      /**\n       * Set the agent dial destination\n       * @memberof AgentLibrary.Agent\n       * @param {string} dialDest The dial destination used for softphone registration\n       * @param {boolean} isSoftphoneError True - if we want to log this dial destination update as a softphone error\n       */\n      AgentLibrary.prototype.updateDialDestination = function (\n        dialDest,\n        isSoftphoneError,\n      ) {\n        UIModel.getInstance().updateDialDestinationRequest = new UpdateDialDestinationRequest(\n          dialDest,\n          isSoftphoneError,\n        );\n        var msg = UIModel.getInstance().updateDialDestinationRequest.formatJSON();\n\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Search Directory for the searchString passed to function.\n       * @memberof AgentLibrary.Agent\n       * @param {string} searchString The search filter for PBX directory\n       */\n      AgentLibrary.prototype.searchDirectory = function (\n        searchString,\n        callback,\n      ) {\n        var model = UIModel.getInstance();\n\n        model.searchDirectoryRequest = new SearchDirectoryRequest(searchString);\n        model.searchDirectoryRequest.searchDirectory(searchString);\n        utils.setCallback(this, CALLBACK_TYPES.SEARCH_DIR, callback);\n      };\n\n      /**\n       * Refresh Token method\n       * @memberof AgentLibrary.Agent\n       */\n      AgentLibrary.prototype.getRefreshedToken = function () {\n        utils.refreshAccessToken();\n      };\n\n      /**\n       * get Extension Presence  Info for the extension Ids passed to function.\n       * @memberof AgentLibrary.Agent\n       * @param {string} extensionIds The extension Ids of RC\n       */\n      AgentLibrary.prototype.getExtensionPresenceInfo = function (\n        extensionIds,\n        callback,\n      ) {\n        var model = UIModel.getInstance();\n        model.extensionPresenceRequest = new ExtensionPresenceRequest(\n          extensionIds,\n        );\n        model.extensionPresenceRequest.getExtensionPresenceInfo(extensionIds);\n        utils.setCallback(this, CALLBACK_TYPES.EXTENSION_PRESENCE, callback);\n      };\n    }\n\n    function initAgentLibraryCall(context) {\n      /**\n       * @namespace Call\n       * @memberof AgentLibrary\n       */\n\n      'use strict';\n\n      var AgentLibrary = context.AgentLibrary;\n\n      /**\n       * Barge in on a call, can hear all parties and be heard by all\n       * @memberof AgentLibrary.Call\n       * @param {number} agentId Agent Id of the current logged in agent\n       * @param {string} uii UII of the active call you wish to monitor\n       * @param {number} monitorAgentId UII Agent Id of the agent you wish to monitor\n       * @param {function} [callback=null] Callback function when barge in response received\n       */\n      AgentLibrary.prototype.bargeIn = function (\n        agentId,\n        uii,\n        monitorAgentId,\n        callback,\n      ) {\n        UIModel.getInstance().bargeInRequest = new BargeInRequest(\n          'FULL',\n          agentId,\n          uii,\n          monitorAgentId,\n        );\n        var msg = UIModel.getInstance().bargeInRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.BARGE_IN, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Add a coaching session to the call, can hear all parties but only able to speak on agent channel\n       * @memberof AgentLibrary.Call\n       * @param {number} agentId Agent Id of the current logged in agent\n       * @param {string} uii UII of the active call you wish to monitor\n       * @param {number} monitorAgentId UII Agent Id of the agent you wish to monitor\n       * @param {function} [callback=null] Callback function when coaching session response received\n       */\n      AgentLibrary.prototype.coach = function (\n        agentId,\n        uii,\n        monitorAgentId,\n        callback,\n      ) {\n        UIModel.getInstance().bargeInRequest = new BargeInRequest(\n          'COACHING',\n          agentId,\n          uii,\n          monitorAgentId,\n        );\n        var msg = UIModel.getInstance().bargeInRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.COACH_CALL, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Transfer to another number and end the call for the original agent (cold transfer).\n       * @memberof AgentLibrary.Call\n       * @param {number} dialDest Number to transfer to\n       * @param {number} [callerId=\"\"] Caller Id for caller (DNIS)\n       * @param {number} [sipHeaders=[]] Name/Value header pairs\n       * @param {function} [callback=null] Callback function when cold transfer response received\n       */\n      AgentLibrary.prototype.coldXfer = function (\n        dialDest,\n        callerId,\n        sipHeaders,\n        callback,\n      ) {\n        UIModel.getInstance().coldXferRequest = new XferColdRequest(\n          dialDest,\n          callerId,\n          sipHeaders,\n        );\n        var msg = UIModel.getInstance().coldXferRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.XFER_COLD, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Transfer to another number and end the call for the original agent (cold transfer).\n       * @memberof AgentLibrary.Call\n       * @param {number} dialDest Number to transfer to\n       * @param {number} [callerId=\"\"] Caller Id for caller (DNIS)\n       * @param {number} [sipHeaders=[]] Name/Value header pairs\n       * @param {number} [countryId=\"\"] Country Id for the dialDest\n       * @param {function} [callback=null] Callback function when warm transfer response received\n       */\n      AgentLibrary.prototype.internationalColdXfer = function (\n        dialDest,\n        callerId,\n        sipHeaders,\n        countryId,\n        callback,\n      ) {\n        UIModel.getInstance().coldXferRequest = new XferColdRequest(\n          dialDest,\n          callerId,\n          sipHeaders,\n          countryId,\n        );\n        var msg = UIModel.getInstance().coldXferRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.XFER_COLD, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Send a disposition for an inbound or outbound call\n       * @memberof AgentLibrary.Call\n       * @param {string} uii UII (unique id) for call\n       * @param {string} dispId The disposition id\n       * @param {string} notes Agent notes for call\n       * @param {boolean} callback Boolean for whether or not this call is a callback\n       * @param {string} [callbackDTS=\"\"] date time stamp if callback\n       * @param {string} [contactForwardNumber=null] Number for contact forwarding\n       * @param {string} [survey=null] The survey response values for the call.\n       * Format: survey = [ { label: \"\", externId: \"\", leadUpdateColumn: \"\"} ]\n       * @param {string} [externId=null] The external id associated with the lead for this call (only for Outbound Dispositions).\n       * @param {string} [leadId=null] The lead id associated with this call (only for Outbound Dispositions).\n       * @param {string} [requestId=null] The request id associated with a preview fetched lead (only for Outbound Dispositions).\n       */\n      AgentLibrary.prototype.dispositionCall = function (\n        uii,\n        dispId,\n        notes,\n        callback,\n        callbackDTS,\n        contactForwardNumber,\n        survey,\n        externId,\n        leadId,\n        requestId,\n      ) {\n        var model = UIModel.getInstance();\n        model.dispositionRequest = new DispositionRequest(\n          uii,\n          dispId,\n          notes,\n          callback,\n          callbackDTS,\n          contactForwardNumber,\n          survey,\n          externId,\n          leadId,\n          requestId,\n        );\n        var msg = model.dispositionRequest.formatJSON();\n        utils.sendMessage(this, msg);\n\n        // cancel ping call timer\n        if (model.pingIntervalId) {\n          clearInterval(model.pingIntervalId);\n          model.pingIntervalId = null;\n        }\n      };\n\n      /**\n       * Send a disposition for a manual pass on a lead\n       * @memberof AgentLibrary.Call\n       * @param {string} dispId The disposition id\n       * @param {string} notes Agent notes for call\n       * @param {boolean} callback Boolean for whether or not this call is a callback\n       * @param {string} [callbackDTS=\"\"] date time stamp if callback\n       * @param {string} [leadId=null] The lead id\n       * @param {string} [requestId=null] The request key for the lead\n       * @param {string} [externId=null] The external id of the lead\n       */\n      AgentLibrary.prototype.dispositionManualPass = function (\n        dispId,\n        notes,\n        callback,\n        callbackDTS,\n        leadId,\n        requestId,\n        externId,\n      ) {\n        UIModel.getInstance().dispositionManualPassRequest = new DispositionManualPassRequest(\n          dispId,\n          notes,\n          callback,\n          callbackDTS,\n          leadId,\n          requestId,\n          externId,\n        );\n        var msg = UIModel.getInstance().dispositionManualPassRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Get a list of all campaign dispositions for given campaign id\n       * @memberof AgentLibrary.Call\n       * @param {string} campaignId Id for campaign to get dispositions for\n       * @param {function} [callback=null] Callback function when campaign dispositions response received\n       */\n      AgentLibrary.prototype.getCampaignDispositions = function (\n        campaignId,\n        callback,\n      ) {\n        UIModel.getInstance().campaignDispositionsRequest = new CampaignDispositionsRequest(\n          campaignId,\n        );\n        var msg = UIModel.getInstance().campaignDispositionsRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.CAMPAIGN_DISPOSITIONS, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Sends a hangup request message\n       * @memberof AgentLibrary.Call\n       * @param {string} [sessionId=\"\"] Session to hangup, defaults to current call session id\n       * @param {boolean} resetPendingDisp, reset pendingDisp to false, in case of bad reconnect\n       */\n      AgentLibrary.prototype.hangup = function (sessionId, resetPendingDisp) {\n        UIModel.getInstance().hangupRequest = new HangupRequest(\n          sessionId,\n          resetPendingDisp,\n        );\n        var msg = UIModel.getInstance().hangupRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Place a call on hold\n       * @memberof AgentLibrary.Call\n       * @param {boolean} holdState Whether we are putting call on hold or taking off hold - values true | false\n       * @param {function} [callback=null] Callback function when hold response received\n       */\n      AgentLibrary.prototype.hold = function (holdState, callback) {\n        UIModel.getInstance().holdRequest = new HoldRequest(holdState);\n        var msg = UIModel.getInstance().holdRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.HOLD, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Place a specified session of a call on hold\n       * @memberof AgentLibrary.Call\n       * @param {boolean} holdState Whether we are putting call on hold or taking off hold - values true | false\n       * @param {integer|string} sessionId session id of the call to place on hold\n       * @param {function} [callback=null] Callback function when hold response received\n       */\n      AgentLibrary.prototype.holdSession = function (\n        holdState,\n        sessionId,\n        callback,\n      ) {\n        UIModel.getInstance().holdRequest = new HoldRequest(\n          holdState,\n          sessionId,\n        );\n        var msg = UIModel.getInstance().holdRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.HOLD, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Sends a manual outdial request message\n       * @memberof AgentLibrary.Call\n       * @param {string} destination Number to call - ANI\n       * @param {number} callerId Number displayed to callee, DNIS\n       * @param {number} [ringTime=60] Time in seconds to ring call\n       * @param {string} [countryId='USA'] Country for the destination number\n       * @param {number} [queueId=''] Queue id to tie manual call to\n       */\n      AgentLibrary.prototype.manualOutdial = function (\n        destination,\n        callerId,\n        ringTime,\n        countryId,\n        queueId,\n      ) {\n        UIModel.getInstance().oneToOneOutdialRequest = new OneToOneOutdialRequest(\n          destination,\n          callerId,\n          ringTime,\n          countryId,\n          queueId,\n        );\n        var msg = UIModel.getInstance().oneToOneOutdialRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Cancels a manual outdial request by UII.\n       * @memberof AgentLibrary.Call\n       * @param {string} uii UII of manual call request, the UII is returned in the EARLY_UII notification.\n       */\n      AgentLibrary.prototype.manualOutdialCancel = function (uii) {\n        UIModel.getInstance().oneToOneOutdialCancelRequest = new OneToOneOutdialCancelRequest(\n          uii,\n        );\n        var msg = UIModel.getInstance().oneToOneOutdialCancelRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Pause call recording\n       * @memberof AgentLibrary.Call\n       * @param {boolean} record Whether we are recording or not\n       * @param {function} [callback=null] Callback function when pause record response received\n       */\n      AgentLibrary.prototype.pauseRecord = function (record, callback) {\n        UIModel.getInstance().pauseRecordRequest = new PauseRecordRequest(\n          record,\n        );\n        var msg = UIModel.getInstance().pauseRecordRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.PAUSE_RECORD, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Sends a preview dial request to call lead based on request id and (optional) lead phone.\n       * Call previewFetch method first to get request id.\n       * @memberof AgentLibrary.Call\n       * @param {number} requestId Pending request id sent back with lead, required to dial lead.\n       * @param {number} [leadPhone=\"\"] Lead phone number. Only needed if there are multiple numbers loaded for given lead.\n       */\n      AgentLibrary.prototype.previewDial = function (requestId, leadPhone) {\n        UIModel.getInstance().previewDialRequest = new PreviewDialRequest(\n          '',\n          [],\n          requestId,\n          leadPhone,\n        );\n        var msg = UIModel.getInstance().previewDialRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Sends a message to fetch preview dialable leads\n       * @memberof AgentLibrary.Call\n       * @param {array} [searchFields=[]] Array of objects with key/value pairs for search parameters\n       * e.g. [ {key: \"name\", value: \"Geoff\"} ]\n       * @param {function} [callback=null] Callback function when preview fetch completed, returns matched leads\n       */\n      AgentLibrary.prototype.previewFetch = function (searchFields, callback) {\n        UIModel.getInstance().previewDialRequest = new PreviewDialRequest(\n          '',\n          searchFields,\n          '',\n        );\n        var msg = UIModel.getInstance().previewDialRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.PREVIEW_FETCH, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Pull back leads that match search criteria\n       * @memberof AgentLibrary.Call\n       * @param {array} [searchFields=[]] Array of objects with key/value pairs for search parameters\n       * e.g. [ {key: \"name\", value: \"Geoff\"} ]\n       * @param {function} [callback=null] Callback function when lead search completed, returns matched leads\n       */\n      AgentLibrary.prototype.searchLeads = function (searchFields, callback) {\n        UIModel.getInstance().previewDialRequest = new PreviewDialRequest(\n          'search',\n          searchFields,\n          '',\n        );\n        var msg = UIModel.getInstance().previewDialRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.LEAD_SEARCH, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Set agent notes for a call\n       * @memberof AgentLibrary.Call\n       * @param {string} notes Agent notes to add to call\n       * @param {function} [callback=null] Callback function when call notes response received\n       */\n      AgentLibrary.prototype.setCallNotes = function (notes, callback) {\n        UIModel.getInstance().callNotesRequest = new CallNotesRequest(notes);\n        var msg = UIModel.getInstance().callNotesRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.CALL_NOTES, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Add a silent monitor session to a call, can hear all channels but can't be heard by any party\n       * @memberof AgentLibrary.Call\n       * @param {number} agentId Agent Id of the current logged in agent\n       * @param {string} uii UII of the active call you wish to monitor\n       * @param {number} monitorAgentId UII Agent Id of the agent you wish to monitor\n       * @param {function} [callback=null] Callback function when silent monitor response received\n       */\n      AgentLibrary.prototype.monitor = function (\n        agentId,\n        uii,\n        monitorAgentId,\n        callback,\n      ) {\n        UIModel.getInstance().bargeInRequest = new BargeInRequest(\n          'MUTE',\n          agentId,\n          uii,\n          monitorAgentId,\n        );\n        var msg = UIModel.getInstance().bargeInRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.SILENT_MONITOR, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Toggle call recording based on passed in boolean true | false\n       * @memberof AgentLibrary.Call\n       * @param {boolean} record Whether we are recording or not\n       * @param {function} [callback=null] Callback function when record response received\n       */\n      AgentLibrary.prototype.record = function (record, callback) {\n        UIModel.getInstance().recordRequest = new RecordRequest(record);\n        var msg = UIModel.getInstance().recordRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.RECORD, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Requeue a call\n       * @memberof AgentLibrary.Call\n       * @param {number} queueId Queue Id to send the call to\n       * @param {number} skillId Skill Id for the requeued call\n       * @param {boolean} maintain Whether or not to maintain the current agent\n       * @param {function} [callback=null] Callback function when requeue response received\n       */\n      AgentLibrary.prototype.requeueCall = function (\n        queueId,\n        skillId,\n        maintain,\n        callback,\n      ) {\n        UIModel.getInstance().requeueRequest = new RequeueRequest(\n          queueId,\n          skillId,\n          maintain,\n        );\n        var msg = UIModel.getInstance().requeueRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.REQUEUE, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Sends a TCPA Safe call request to call lead based on request id and (optional) lead phone.\n       * Call safeModeFetch method first to get request id.\n       * @memberof AgentLibrary.Call\n       * @param {number} requestId Pending request id sent back with lead, required to dial lead.\n       * @param {number} [leadPhone=\"\"] Lead phone number. Only needed if there are multiple numbers loaded for given lead.\n       */\n      AgentLibrary.prototype.safeModeCall = function (requestId, leadPhone) {\n        UIModel.getInstance().tcpaSafeRequest = new TcpaSafeRequest(\n          '',\n          [],\n          requestId,\n          leadPhone,\n        );\n        var msg = UIModel.getInstance().tcpaSafeRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Sends a message to fetch safe mode dialable leads\n       * @memberof AgentLibrary.Call\n       * @param {array} [searchFields=[]] Array of objects with key/value pairs for search parameters\n       * e.g. [ {key: \"name\", value: \"Geoff\"} ]\n       * @param {function} [callback=null] Callback function when safe mode fetch completed, returns matched leads\n       */\n      AgentLibrary.prototype.safeModeFetch = function (searchFields, callback) {\n        UIModel.getInstance().tcpaSafeRequest = new TcpaSafeRequest(\n          '',\n          searchFields,\n          '',\n        );\n        var msg = UIModel.getInstance().tcpaSafeRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.SAFE_MODE_FETCH, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Pull back Safe Mode leads that match search criteria\n       * @memberof AgentLibrary.Call\n       * @param {array} [searchFields=[]] Array of objects with key/value pairs for search parameters\n       * e.g. [ {key: \"name\", value: \"Geoff\"} ]\n       * @param {function} [callback=null] Callback function when safe mode fetch completed, returns matched leads\n       */\n      AgentLibrary.prototype.safeSearchLeads = function (\n        searchFields,\n        callback,\n      ) {\n        UIModel.getInstance().tcpaSafeRequest = new TcpaSafeRequest(\n          'search',\n          searchFields,\n          '',\n        );\n        var msg = UIModel.getInstance().tcpaSafeRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.SAFE_MODE_SEARCH, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Transfer to another number while keeping the original agent on the line (warm transfer).\n       * @memberof AgentLibrary.Call\n       * @param {number} dialDest Number to transfer to\n       * @param {number} [callerId=\"\"] Caller Id for caller (DNIS)\n       * @param {number} [sipHeaders=[]] Name/Value header pairs\n       * @param {number} [countryId=\"\"] Country Id for the dialDest\n       * @param {function} [callback=null] Callback function when warm transfer response received\n       */\n      AgentLibrary.prototype.internationalWarmXfer = function (\n        dialDest,\n        callerId,\n        sipHeaders,\n        countryId,\n        callback,\n      ) {\n        UIModel.getInstance().warmXferRequest = new XferWarmRequest(\n          dialDest,\n          callerId,\n          sipHeaders,\n          countryId,\n        );\n        var msg = UIModel.getInstance().warmXferRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.XFER_WARM, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Transfer to another number while keeping the original agent on the line (warm transfer).\n       * @memberof AgentLibrary.Call\n       * @param {number} dialDest Number to transfer to\n       * @param {number} [callerId=\"\"] Caller Id for caller (DNIS)\n       * @param {number} [sipHeaders=[]] Name/Value header pairs\n       * @param {function} [callback=null] Callback function when warm transfer response received\n       */\n      AgentLibrary.prototype.warmXfer = function (\n        dialDest,\n        callerId,\n        sipHeaders,\n        callback,\n      ) {\n        UIModel.getInstance().warmXferRequest = new XferWarmRequest(\n          dialDest,\n          callerId,\n          sipHeaders,\n        );\n        var msg = UIModel.getInstance().warmXferRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.XFER_WARM, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Cancel a warm transfer\n       * @memberof AgentLibrary.Call\n       * @param {number} dialDest Number that was transfered to\n       */\n      AgentLibrary.prototype.warmXferCancel = function (dialDest) {\n        UIModel.getInstance().warmXferCancelRequest = new XferWarmCancelRequest(\n          dialDest,\n        );\n        var msg = UIModel.getInstance().warmXferCancelRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Transfer to another number while keeping the original agent on the line (warm transfer).\n       * @memberof AgentLibrary.Call\n       * @param {number} dialDest Number to transfer to\n       * @param {number} [callerId=\"\"] Caller Id for caller (DNIS)\n       * @param {number} [sipHeaders=[]] Name/Value header pairs\n       * @param {number} [countryId=\"\"] Country Id for the dialDest\n       * @param {function} [callback=null] Callback function when warm transfer response received\n       */\n      AgentLibrary.prototype.corporateDirWarmXfer = function (\n        dialDest,\n        callerId,\n        sipHeaders,\n        countryId,\n        callback,\n      ) {\n        UIModel.getInstance().warmXferRequest = new XferWarmRequest(\n          dialDest,\n          callerId,\n          sipHeaders,\n          countryId,\n        );\n        var msg = UIModel.getInstance().warmXferRequest.formatJSON();\n        utils.setCallback(this, CALLBACK_TYPES.XFER_WARM, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Transfer to another number and end the call for the original agent (cold transfer).\n       * @memberof AgentLibrary.Call\n       * @param {number} dialDest Number to transfer to\n       * @param {number} [callerId=\"\"] Caller Id for caller (DNIS)\n       * @param {number} [sipHeaders=[]] Name/Value header pairs\n       * @param {number} [countryId=\"\"] Country Id for the dialDest\n       * @param {function} [callback=null] Callback function when cold transfer response received\n       */\n      AgentLibrary.prototype.corporateDirColdXfer = function (\n        dialDest,\n        callerId,\n        sipHeaders,\n        countryId,\n        callback,\n      ) {\n        UIModel.getInstance().coldXferRequest = new XferColdRequest(\n          dialDest,\n          callerId,\n          sipHeaders,\n          countryId,\n        );\n        var msg = UIModel.getInstance().coldXferRequest.formatJSON();\n        utils.setCallback(this, CALLBACK_TYPES.XFER_COLD, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Requests a script object based on given id\n       * @memberof AgentLibrary.Call\n       * @param {number} scriptId Id of script\n       * @param {number} version The version number of the script, if the current loaded script version matches,\n       *                 just return current script. Otherwise, fetch new version of script.\n       * @param {function} [callback=null] Callback function when warm transfer response received\n       */\n      AgentLibrary.prototype.getScript = function (\n        scriptId,\n        version,\n        callback,\n      ) {\n        var model = UIModel.getInstance();\n        var script = model.scriptSettings.loadedScripts[scriptId];\n        utils.setCallback(this, CALLBACK_TYPES.SCRIPT_CONFIG, callback);\n\n        if (script && script.version === version) {\n          // return from memory\n          var savedScript = UIModel.getInstance().scriptSettings.loadedScripts[\n            scriptId\n          ];\n          callback(savedScript);\n        } else {\n          // load script\n          model.scriptConfigRequest = new ScriptConfigRequest(scriptId);\n          var msg = UIModel.getInstance().scriptConfigRequest.formatJSON();\n          utils.sendMessage(this, msg);\n        }\n      };\n\n      /**\n       * Saves the results from a script\n       * @memberof AgentLibrary.Call\n       * @param {string} uii The UII of the call the script results belong to\n       * @param {number} scriptId Id of script\n       * @param {object} jsonResult JSON object of script results, name/value pairs\n       */\n      AgentLibrary.prototype.saveScriptResult = function (\n        uii,\n        scriptId,\n        jsonResult,\n      ) {\n        UIModel.getInstance().scriptResultRequest = new ScriptResultRequest(\n          uii,\n          scriptId,\n          jsonResult,\n        );\n        var msg = UIModel.getInstance().scriptResultRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Get available list of agents available for Direct Transfer\n       * @memberof AgentLibrary.Call\n       */\n      AgentLibrary.prototype.directAgentXferList = function (callback) {\n        UIModel.getInstance().directAgentTransferListRequest = new DirectAgentTransferList();\n        var msg = UIModel.getInstance().directAgentTransferListRequest.formatJSON();\n\n        utils.setCallback(\n          this,\n          CALLBACK_TYPES.DIRECT_AGENT_TRANSFER_LIST,\n          callback,\n        );\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Transfer directly to an available agent from the directAgentXferList result and stay on the call\n       * @memberof AgentLibrary.Call\n       * @param {number} targetAgentId Agent id to transfer the call to\n       */\n      AgentLibrary.prototype.warmDirectAgentXfer = function (targetAgentId) {\n        UIModel.getInstance().directAgentTransferRequest = new DirectAgentTransfer(\n          targetAgentId,\n          'WARM',\n        );\n        var msg = UIModel.getInstance().directAgentTransferRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Transfer directly to an available agent from the directAgentXferList result\n       * and terminate the current agents call session\n       * @memberof AgentLibrary.Call\n       * @param {number} targetAgentId Agent id to transfer the call to\n       */\n      AgentLibrary.prototype.coldDirectAgentXfer = function (targetAgentId) {\n        UIModel.getInstance().directAgentTransferRequest = new DirectAgentTransfer(\n          targetAgentId,\n          'COLD',\n        );\n        var msg = UIModel.getInstance().directAgentTransferRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Cancel the request to transfer directly to an agent\n       * @memberof AgentLibrary.Call\n       * @param {number} targetAgentId Agent id to transfer the call to\n       */\n      AgentLibrary.prototype.cancelDirectAgentXfer = function (targetAgentId) {\n        UIModel.getInstance().directAgentTransferRequest = new DirectAgentTransfer(\n          targetAgentId,\n          'CANCEL',\n        );\n        var msg = UIModel.getInstance().directAgentTransferRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Send the direct agent transfer straight to voicemail, avoid any attempts to connect to the target agent\n       * @memberof AgentLibrary.Call\n       * @param {number} targetAgentId Agent id to receive the voicemail\n       */\n      AgentLibrary.prototype.voicemailDirectAgentXfer = function (\n        targetAgentId,\n      ) {\n        UIModel.getInstance().directAgentTransferRequest = new DirectAgentTransfer(\n          targetAgentId,\n          'VOICEMAIL',\n        );\n        var msg = UIModel.getInstance().directAgentTransferRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Reject a presented direct agent transfer, if WARM requesting agent will be notified to try again,\n       * if COLD a voicemail will be left for the target agent\n       * @memberof AgentLibrary.Call\n       * @param {number} targetAgentId Agent id to receive the voicemail\n       */\n      AgentLibrary.prototype.rejectDirectAgentXfer = function (uii) {\n        UIModel.getInstance().directAgentTransferRequest = new DirectAgentTransfer(\n          '0',\n          'REJECT',\n          uii,\n        );\n        var msg = UIModel.getInstance().directAgentTransferRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n    }\n\n    function initAgentLibraryLead(context) {\n      /**\n       * @namespace Lead\n       * @memberof AgentLibrary\n       */\n\n      'use strict';\n\n      var AgentLibrary = context.AgentLibrary;\n\n      /**\n       * Get the history for a given lead\n       * @memberof AgentLibrary.Lead\n       * @param {number} leadId The lead id to retrieve history for\n       * @param {function} [callback=null] Callback function when lead history response received\n       */\n      AgentLibrary.prototype.leadHistory = function (leadId, callback) {\n        UIModel.getInstance().leadHistoryRequest = new LeadHistoryRequest(\n          leadId,\n        );\n        var msg = UIModel.getInstance().leadHistoryRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.LEAD_HISTORY, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Insert a lead to the given campaign\n       * @memberof AgentLibrary.Lead\n       * @param {object} dataObj agentId, campaignId, and lead info\n       * @param {function} [callback=null] Callback function when lead history response received\n       */\n      AgentLibrary.prototype.leadInsert = function (dataObj, callback) {\n        UIModel.getInstance().leadInsertRequest = new LeadInsertRequest(\n          dataObj,\n        );\n        var msg = UIModel.getInstance().leadInsertRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.LEAD_INSERT, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Update lead information\n       * @memberof AgentLibrary.Lead\n       * @param {string} leadId Id for lead to update\n       * @param {string} leadPhone Lead phone number\n       * @param {object} baggage Object containing lead information\n       * @param {function} [callback=null] Callback function when lead history response received\n       */\n      AgentLibrary.prototype.leadUpdate = function (\n        leadId,\n        leadPhone,\n        baggage,\n        callback,\n      ) {\n        UIModel.getInstance().leadUpdateRequest = new LeadUpdateRequest(\n          leadId,\n          leadPhone,\n          baggage,\n        );\n        var msg = UIModel.getInstance().leadUpdateRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.LEAD_UPDATE, callback);\n        utils.sendMessage(this, msg);\n      };\n    }\n\n    function initAgentLibraryChat(context) {\n      /**\n       * @namespace Chat\n       * @memberof AgentLibrary\n       */\n\n      'use strict';\n\n      var AgentLibrary = context.AgentLibrary;\n\n      /**\n       * Set the agent chat alias\n       * @memberof AgentLibrary.Chat\n       * @param {string} alias The alias string to be used for agent chat messages\n       * @deprecated\n       */\n      AgentLibrary.prototype.setChatAlias = function (alias) {\n        UIModel.getInstance().chatAliasRequest = new ChatAliasRequest(alias);\n        var msg = UIModel.getInstance().chatAliasRequest.formatJSON();\n\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Request to enter/exit a public chat room\n       * @memberof AgentLibrary.Chat\n       * @param {string} action \"ENTER\" | \"EXIT\"\n       * @param {number} roomId Chat room id\n       * @deprecated\n       */\n      AgentLibrary.prototype.publicChatRoom = function (action, roomId) {\n        UIModel.getInstance().chatRoomRequest = new ChatRoomRequest(\n          action,\n          'PUBLIC',\n          roomId,\n        );\n        var msg = UIModel.getInstance().chatRoomRequest.formatJSON();\n\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Request to enter/exit a private chat room\n       * @memberof AgentLibrary.Chat\n       * @param {string} action \"ENTER\" | \"EXIT\"\n       * @param {number} roomId Chat room id\n       * @param {number} agentOne Id for the logged in agent\n       * @param {number} agentTwo Id for the agent or supervisor the logged in agent is chatting with\n       * @deprecated\n       */\n      AgentLibrary.prototype.privateChatRoom = function (\n        action,\n        roomId,\n        agentOne,\n        agentTwo,\n      ) {\n        UIModel.getInstance().chatRoomRequest = new ChatRoomRequest(\n          action,\n          'PRIVATE',\n          roomId,\n          agentOne,\n          agentTwo,\n        );\n        var msg = UIModel.getInstance().chatRoomRequest.formatJSON();\n\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Send a chat message to the given room\n       * @memberof AgentLibrary.Chat\n       * @param {number} roomId Id for chat room\n       * @param {string} message The message to be sent\n       * @param {function} [callback=null] Callback function when chat message received\n       * @deprecated\n       */\n      AgentLibrary.prototype.sendChat = function (roomId, message, callback) {\n        UIModel.getInstance().chatSendRequest = new ChatSendRequest(\n          roomId,\n          message,\n        );\n        var msg = UIModel.getInstance().chatSendRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.CHAT, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Get list of supervisors for logged in agent\n       * @memberof AgentLibrary.Chat\n       * @param {function} [callback=null] Callback function when chat message received\n       * @deprecated\n       */\n      AgentLibrary.prototype.getSupervisors = function (callback) {\n        UIModel.getInstance().supervisorListRequest = new SupervisorListRequest();\n        var msg = UIModel.getInstance().supervisorListRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.SUPERVISOR_LIST, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Send accept/decline response when a chat is presented to an agent\n       * @memberof AgentLibrary.Chat\n       * @param {string} uii Unique identifier for the chat session\n       * @param {string} messageId Id tied to chat presented notification which this response is connected to.\n       * @param {string} response ACCEPT|REJECT response\n       * @param {string} responseReason Agent reason for Reject\n       */\n      AgentLibrary.prototype.chatPresentedResponse = function (\n        uii,\n        messageId,\n        response,\n        responseReason,\n      ) {\n        UIModel.getInstance().chatPresentedRequest = new ChatPresentedResponseRequest(\n          uii,\n          messageId,\n          response,\n          responseReason,\n        );\n        var msg = UIModel.getInstance().chatPresentedRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Send an external chat message\n       * @memberof AgentLibrary.Chat\n       * @param {string} uii Unique identifier for the chat session\n       * @param {string} agentId The agent associated with the chat\n       * @param {string} message The message sent by the agent\n       */\n      AgentLibrary.prototype.chatMessage = function (uii, agentId, message) {\n        UIModel.getInstance().chatMessageRequest = new ChatMessageRequest(\n          uii,\n          agentId,\n          message,\n          false,\n        );\n        var msg = UIModel.getInstance().chatMessageRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Send an whisper type chat message\n       * @memberof AgentLibrary.Chat\n       * @param {string} uii Unique identifier for the chat session\n       * @param {string} agentId The agent associated with the chat\n       * @param {string} message The message sent by the agent\n       */\n      AgentLibrary.prototype.chatWhisper = function (uii, agentId, message) {\n        UIModel.getInstance().chatMessageRequest = new ChatMessageRequest(\n          uii,\n          agentId,\n          message,\n          true,\n        );\n        var msg = UIModel.getInstance().chatMessageRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Send a disposition to end a chat session\n       * @memberof AgentLibrary.Chat\n       * @param {string} uii Unique identifier for the chat session\n       * @param {number} agentId The agent's id\n       * @param {number} dispositionId Id of the selected disposition\n       * @param {string} [notes=\"\"] Agent notes\n       * @param {boolean} sendAcknowlegement Whether or not to fire callback\n       * @param {object} [script=null] Script data associated with the chat session\n       * @param {number} sessionId Id for chat session\n       */\n      AgentLibrary.prototype.chatDisposition = function (\n        uii,\n        agentId,\n        dispositionId,\n        notes,\n        sendAcknowlegement,\n        script,\n        sessionId,\n      ) {\n        UIModel.getInstance().chatDispositionRequest = new ChatDispositionRequest(\n          uii,\n          agentId,\n          dispositionId,\n          notes,\n          sendAcknowlegement,\n          script,\n          sessionId,\n        );\n        var msg = UIModel.getInstance().chatDispositionRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Send the chat to a different Chat Queue\n       * @memberof AgentLibrary.Chat\n       * @param {string} uii Unique identifier for the chat session\n       * @param {number} agentId The agent's id\n       * @param {number} chatQueueId Id of the Chat Queue to requeue to\n       * @param {number} skillId Skill id associated with the Chat Queue\n       * @param {boolean} [maintainAgent=false] Whether or not to keep the current agent connected to the chat on requeue\n       */\n      AgentLibrary.prototype.chatRequeue = function (\n        uii,\n        agentId,\n        chatQueueId,\n        skillId,\n        maintainAgent,\n      ) {\n        UIModel.getInstance().chatRequeueRequest = new ChatRequeueRequest(\n          uii,\n          agentId,\n          chatQueueId,\n          skillId,\n          maintainAgent,\n        );\n        var msg = UIModel.getInstance().chatRequeueRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Sent when agent starts/stops typing\n       * @memberof AgentLibrary.Chat\n       * @param {string} uii Unique identifier for the chat session\n       * @param {string} message Pending Agent message - sent to any monitoring Supervisors\n       */\n      AgentLibrary.prototype.chatTyping = function (uii, message) {\n        UIModel.getInstance().chatTypingRequest = new ChatTypingRequest(\n          uii,\n          message,\n        );\n        var msg = UIModel.getInstance().chatTypingRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Request to add a session on an existing chat\n       * @memberof AgentLibrary.Chat\n       * @param {string} monitorAgentId Agent id handling this chat, the agent being monitored\n       */\n      AgentLibrary.prototype.monitorAgentChats = function (monitorAgentId) {\n        UIModel.getInstance().monitorChatRequest = new MonitorChatRequest(\n          monitorAgentId,\n        );\n        var msg = UIModel.getInstance().monitorChatRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Request to stop a chat monitoring session for a specific agent\n       * @memberof AgentLibrary.Chat\n       * @param {string} monitorAgentId Agent id of agent being monitored\n       */\n      AgentLibrary.prototype.stopMonitoringChatsByAgent = function (\n        monitorAgentId,\n      ) {\n        UIModel.getInstance().stopMonitorChatRequest = new StopMonitorChatRequest(\n          monitorAgentId,\n        );\n        var msg = UIModel.getInstance().stopMonitorChatRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Request to drop all chat monitoring sessions for the logged in agent\n       * @memberof AgentLibrary.Chat\n       */\n      AgentLibrary.prototype.stopMonitoringAllAgentChats = function () {\n        UIModel.getInstance().stopMonitorChatRequest = new StopMonitorChatRequest();\n        var msg = UIModel.getInstance().stopMonitorChatRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Request to terminate an active chat session\n       * @memberof AgentLibrary.Chat\n       * @param {string} uii Unique identifier for the chat session\n       * @param {string} agentId Current logged in agent id\n       * @param {string} sessionId Chat session id\n       */\n      AgentLibrary.prototype.leaveChat = function (uii, agentId, sessionId) {\n        UIModel.getInstance().leaveChatRequest = new LeaveChatRequest(\n          uii,\n          agentId,\n          sessionId,\n        );\n        var msg = UIModel.getInstance().leaveChatRequest.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Request a list of active chats by agent id\n       * @memberof AgentLibrary.Chat\n       * @param {string} agentId Current logged in agent id\n       * @param {string} monitorAgentId Agent id handling chats\n       * @param {function} [callback=null] Callback function when chat-list request received\n       */\n      AgentLibrary.prototype.chatList = function (\n        agentId,\n        monitorAgentId,\n        callback,\n      ) {\n        UIModel.getInstance().chatListRequest = new ChatListRequest(\n          agentId,\n          monitorAgentId,\n        );\n        var msg = UIModel.getInstance().chatListRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.CHAT_LIST, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * set chat in state of agent-chat-end\n       * @memberof AgentLibrary.Chat\n       * @param {string} uii Unique identifier for the chat session\n       * @param {string} agentId Current logged in agent id\n       */\n\n      AgentLibrary.prototype.chatAgentEnd = function (agentId, uii) {\n        UIModel.getInstance().chatAgentEnd = new ChatAgentEndRequest(\n          agentId,\n          uii,\n        );\n        var msg = UIModel.getInstance().chatAgentEnd.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * Sends chat state change message to IntelliQueue\n       * @memberof AgentLibrary.Agent\n       * @param {string} chatState The base chat state <br />\n       * CHAT-AVAILABLE | CHAT-PRESENTED | CHAT-ENGAGED | CHAT-RNA\n       * @param {function} [callback=null] Callback function when chatState response received\n       */\n      AgentLibrary.prototype.setChatState = function (chatState, callback) {\n        UIModel.getInstance().chatStateRequest = new ChatStateRequest(\n          chatState,\n        );\n        var msg = UIModel.getInstance().chatStateRequest.formatJSON();\n\n        utils.setCallback(this, CALLBACK_TYPES.CHAT_STATE, callback);\n        utils.sendMessage(this, msg);\n      };\n\n      /**\n       * initialize a chat session by sending a manual outbound sms\n       * @memberof AgentLibrary.Chat\n       * @param {string} agentId Current logged in agent id\n       * @param {number} chatQueueId Id of the Chat Queue to send this sms through\n       * @param {number} ani to receive the sms\n       * @param {number} dnis to be used for the sms\n       * @param {string} message content\n       */\n\n      AgentLibrary.prototype.sendManualOutboundSms = function (\n        agentId,\n        chatQueueId,\n        ani,\n        dnis,\n        message,\n      ) {\n        UIModel.getInstance().chatManualSms = new ChatManualSmsRequest(\n          agentId,\n          chatQueueId,\n          ani,\n          dnis,\n          message,\n        );\n        var msg = UIModel.getInstance().chatManualSms.formatJSON();\n        utils.sendMessage(this, msg);\n      };\n    }\n\n    function initAgentLibraryLogger(context) {\n      'use strict';\n\n      var AgentLibrary = context.AgentLibrary;\n\n      AgentLibrary.prototype.openLogger = function () {\n        var instance = this;\n\n        if ('indexedDB' in context) {\n          // Open database\n          var dbRequest = indexedDB.open('AgentLibraryLogging', 6); // version number\n\n          dbRequest.onerror = function (event) {\n            console.error('Error requesting DB access');\n          };\n\n          dbRequest.onsuccess = function (event) {\n            instance._db = event.target.result;\n\n            //prune items older than 2 days\n            instance.purgeLog(instance._db, 'logger');\n\n            instance._db.onerror = function (event) {\n              // Generic error handler for all errors targeted at this database requests\n              console.error(\n                'AgentLibrary: Database error - ' + event.target.errorCode,\n              );\n            };\n\n            instance._db.onsuccess = function (event) {\n              console.log('AgentLibrary: Successful logging of record');\n            };\n          };\n\n          // This event is only implemented in recent browsers\n          dbRequest.onupgradeneeded = function (event) {\n            instance._db = event.target.result;\n\n            // Create an objectStore to hold log information. Key path should be unique\n            if (!instance._db.objectStoreNames.contains('logger')) {\n              var objectStore = instance._db.createObjectStore('logger', {\n                autoIncrement: true,\n              });\n\n              // simple indicies: index name, index column path\n              objectStore.createIndex('logLevel', 'logLevel', {\n                unique: false,\n              });\n              objectStore.createIndex('dts', 'dts', { unique: false });\n\n              // index for logLevel and date range\n              var name = 'levelAndDate';\n              var keyPath = ['logLevel', 'dts'];\n              objectStore.createIndex(name, keyPath, { unique: false });\n            }\n          };\n        } else {\n          console.warn(\n            'AgentLibrary: indexedDB NOT supported by your Browser.',\n          );\n        }\n      };\n\n      /**\n       * Purge records older than 2 days from the AgentLibrary log\n       * @memberof AgentLibrary\n       */\n      AgentLibrary.prototype.purgeLog = function (db, store) {\n        var instance = this;\n\n        if (db) {\n          try {\n            var transaction = db.transaction([store], 'readwrite');\n            var objectStore = transaction.objectStore(store);\n            var dateIndex = objectStore.index('dts');\n            var endDate = new Date();\n            endDate.setDate(endDate.getDate() - 2); // two days ago\n\n            var range = IDBKeyRange.upperBound(endDate);\n            dateIndex.openCursor(range).onsuccess = function (event) {\n              var cursor = event.target.result;\n              if (cursor) {\n                objectStore.delete(cursor.primaryKey);\n                cursor.continue();\n              }\n            };\n          } catch (err) {\n            // no op\n          }\n        }\n      };\n\n      /**\n       * Clear the AgentLibrary log by emptying the IndexedDB object store\n       * @memberof AgentLibrary\n       */\n      AgentLibrary.prototype.clearLog = function (db) {\n        var transaction = db.transaction(['logger'], 'readwrite');\n        var objectStore = transaction.objectStore('logger');\n\n        var objectStoreRequest = objectStore.clear();\n\n        objectStoreRequest.onsuccess = function (event) {\n          console.log('AgentLibrary: logger database cleared');\n        };\n      };\n\n      AgentLibrary.prototype.deleteDB = function (dbName) {\n        dbName = dbName || 'AgentLibraryLogging';\n        var DBDeleteRequest = indexedDB.deleteDatabase(dbName);\n\n        DBDeleteRequest.onerror = function (event) {\n          console.log('Error deleting database.', dbName);\n        };\n\n        DBDeleteRequest.onsuccess = function (event) {\n          console.log('Database', dbName, 'deleted successfully');\n        };\n      };\n\n      AgentLibrary.prototype.getLogRecords = function (\n        logLevel,\n        startDate,\n        endDate,\n        maxRows,\n        callback,\n      ) {\n        logLevel = logLevel || '';\n        var instance = this;\n        var transaction = instance._db.transaction(['logger'], 'readonly');\n        var objStore = transaction.objectStore('logger');\n        var index = null,\n          cursor = null,\n          range = null,\n          limit = maxRows || 100;\n        utils.setCallback(instance, CALLBACK_TYPES.LOG_RESULTS, callback);\n\n        if (\n          logLevel !== '' &&\n          logLevel.toUpperCase() !== 'ALL' &&\n          logLevel.toUpperCase() !== 'NO-STATS'\n        ) {\n          // looking for specific log level type\n          if (startDate && endDate) {\n            var lowerBound = [logLevel.toLowerCase(), startDate];\n            var upperBound = [logLevel.toLowerCase(), endDate];\n            range = IDBKeyRange.bound(lowerBound, upperBound);\n          } else if (startDate) {\n            range = IDBKeyRange.lowerBound([logLevel.toLowerCase(), startDate]);\n          } else if (endDate) {\n            range = IDBKeyRange.upperBound([logLevel.toLowerCase(), endDate]);\n          }\n\n          if (range !== null) {\n            // with the provided date range\n            var levelAndDateReturn = [];\n            var idxLevelAndDate = 0;\n            index = objStore.index('levelAndDate');\n            index.openCursor(range, 'prev').onsuccess = function (event) {\n              cursor = event.target.result;\n              if (cursor && idxLevelAndDate < limit) {\n                levelAndDateReturn.push(cursor.value);\n                idxLevelAndDate = idxLevelAndDate + 1;\n                cursor.continue();\n              } else {\n                utils.fireCallback(\n                  instance,\n                  CALLBACK_TYPES.LOG_RESULTS,\n                  levelAndDateReturn,\n                );\n              }\n            };\n          } else {\n            // no date range specified, return all within log level\n            var logLevelReturn = [];\n            var idxLogLevel = 0;\n            index = objStore.index('logLevel');\n            index.openCursor(logLevel, 'prev').onsuccess = function (event) {\n              cursor = event.target.result;\n              if (cursor && idxLogLevel < limit) {\n                logLevelReturn.push(cursor.value);\n                idxLogLevel = idxLogLevel + 1;\n                cursor.continue();\n              } else {\n                utils.fireCallback(\n                  instance,\n                  CALLBACK_TYPES.LOG_RESULTS,\n                  logLevelReturn,\n                );\n              }\n            };\n          }\n        } else if (logLevel.toUpperCase() === 'NO-STATS') {\n          // give us all types except stats\n          if (startDate && endDate) {\n            range = IDBKeyRange.bound(startDate, endDate);\n          } else if (startDate) {\n            range = IDBKeyRange.lowerBound(startDate);\n          } else if (endDate) {\n            range = IDBKeyRange.upperBound(endDate);\n          }\n\n          if (range !== null) {\n            // with the provided date range\n            var dtsNoStatsReturn = [];\n            var idxDTSNoStats = 0;\n            index = objStore.index('dts');\n\n            index.openCursor(range, 'prev').onsuccess = function (event) {\n              cursor = event.target.result;\n              if (cursor && idxDTSNoStats < limit) {\n                if (cursor.value.logLevel !== 'stats') {\n                  dtsNoStatsReturn.push(cursor.value);\n                  idxDTSNoStats = idxDTSNoStats + 1;\n                }\n                cursor.continue();\n              } else {\n                utils.fireCallback(\n                  instance,\n                  CALLBACK_TYPES.LOG_RESULTS,\n                  dtsNoStatsReturn,\n                );\n              }\n            };\n          } else {\n            // no date range specified, return all records\n            var noStatsReturn = [];\n            var idxNoStats = 0;\n            objStore.openCursor().onsuccess = function (event) {\n              cursor = event.target.result;\n              if (cursor && idxNoStats < limit) {\n                if (cursor.value.logLevel !== 'stats') {\n                  noStatsReturn.push(cursor.value);\n                  idxNoStats = idxNoStats + 1;\n                }\n                cursor.continue();\n              } else {\n                utils.fireCallback(\n                  instance,\n                  CALLBACK_TYPES.LOG_RESULTS,\n                  noStatsReturn,\n                );\n              }\n            };\n          }\n        } else {\n          // give us all log level types\n          if (startDate && endDate) {\n            range = IDBKeyRange.bound(startDate, endDate);\n          } else if (startDate) {\n            range = IDBKeyRange.lowerBound(startDate);\n          } else if (endDate) {\n            range = IDBKeyRange.upperBound(endDate);\n          }\n\n          if (range !== null) {\n            // with the provided date range\n            var dtsReturn = [];\n            var idxDTS = 0;\n            index = objStore.index('dts');\n\n            index.openCursor(range, 'prev').onsuccess = function (event) {\n              cursor = event.target.result;\n              if (cursor && idxDTS < limit) {\n                dtsReturn.push(cursor.value);\n                idxDTS = idxDTS + 1;\n                cursor.continue();\n              } else {\n                utils.fireCallback(\n                  instance,\n                  CALLBACK_TYPES.LOG_RESULTS,\n                  dtsReturn,\n                );\n              }\n            };\n          } else {\n            // no date range specified, return all records\n            var allValsReturn = [];\n            var idxAll = 0;\n            objStore.openCursor().onsuccess = function (event) {\n              cursor = event.target.result;\n              if (cursor && idxAll < limit) {\n                allValsReturn.push(cursor.value);\n                idxAll = idxAll + 1;\n                cursor.continue();\n              } else {\n                utils.fireCallback(\n                  instance,\n                  CALLBACK_TYPES.LOG_RESULTS,\n                  allValsReturn,\n                );\n              }\n            };\n          }\n        }\n\n        return null;\n      };\n    }\n\n    function initAgentLibraryMultisocket(context) {\n      /**\n       * @namespace Multisocket\n       * @memberof AgentLibrary\n       */\n\n      'use strict';\n\n      var AgentLibrary = context.AgentLibrary;\n\n      /**\n       * Method to request call details from other tabs using the broadcast channel, for multisocket\n       */\n      AgentLibrary.prototype.loadCurrentCall = function (callback) {\n        broadcastChannelHelper.requestCurrentCall(callback);\n      };\n    }\n    function initAgentLibraryConsoleLogger(context) {\n      'use strict';\n\n      var AgentLibrary = context.AgentLibrary;\n\n      AgentLibrary.prototype.openConsoleLogger = function () {\n        var instance = this;\n\n        if ('indexedDB' in context) {\n          var dbRequest = indexedDB.open('AgentLibraryConsoleLogging', 1);\n\n          dbRequest.onerror = function (event) {\n            console.error('Error requesting DB access');\n          };\n\n          dbRequest.onsuccess = function (event) {\n            instance._consoleDb = event.target.result;\n\n            //prune items older than 2 days\n            instance.purgeLog(instance._consoleDb, 'consoleLogger');\n\n            instance._consoleDb.onerror = function (event) {\n              // Generic error handler for all errors targeted at this database requests\n              console.error(\n                'AgentLibrary: Database error - ' + event.target.errorCode,\n              );\n            };\n\n            instance._consoleDb.onsuccess = function (event) {\n              console.log('AgentLibrary: Successful logging of record');\n            };\n\n            _overrideConsole();\n          };\n\n          // This event is only implemented in recent browsers\n          dbRequest.onupgradeneeded = function (event) {\n            instance._consoleDb = event.target.result;\n\n            // Create an objectStore to hold log information. Key path should be unique\n            if (\n              !instance._consoleDb.objectStoreNames.contains('consoleLogger')\n            ) {\n              var objectStore = instance._consoleDb.createObjectStore(\n                'consoleLogger',\n                { autoIncrement: true },\n              );\n\n              // simple indicies: index name, index column path\n              objectStore.createIndex('type', 'type', { unique: false });\n              objectStore.createIndex('dts', 'dts', { unique: false });\n              objectStore.createIndex('agentId', 'agentId', { unique: false });\n\n              // index for type and agent id\n              var name = 'typeAndAgent';\n              var keyPath = ['type', 'agentId'];\n              objectStore.createIndex(name, keyPath, { unique: false });\n            }\n\n            _overrideConsole();\n          };\n        } else {\n          console.warn(\n            'AgentLibrary: indexedDB NOT supported by your Browser.',\n          );\n        }\n      };\n\n      AgentLibrary.prototype.getConsoleLogRecords = function (type, callback) {\n        var agentId = UIModel.getInstance().agentSettings.agentId; // only return records for this agent id\n        var instance = this;\n        var transaction = instance._consoleDb.transaction(\n          ['consoleLogger'],\n          'readonly',\n        );\n        var objStore = transaction.objectStore('consoleLogger');\n        var index = null,\n          cursor = null,\n          range = null,\n          limit = 5000;\n\n        utils.setCallback(\n          instance,\n          CALLBACK_TYPES.LOG_CONSOLE_RESULTS,\n          callback,\n        );\n\n        var result = [];\n        if (type) {\n          // everything with this type\n          index = objStore.index('typeAndAgent');\n          range = IDBKeyRange.only([type.toUpperCase(), agentId]);\n        } else {\n          index = objStore.index('agentId');\n          range = IDBKeyRange.only(agentId);\n        }\n\n        var count = 0;\n        index.openCursor(range, 'prev').onsuccess = function (event) {\n          cursor = event.target.result;\n          if (cursor && count < limit) {\n            result.push(cursor.value);\n            count++;\n            cursor.continue();\n          } else {\n            utils.fireCallback(\n              instance,\n              CALLBACK_TYPES.LOG_CONSOLE_RESULTS,\n              result,\n            );\n          }\n        };\n      };\n\n      function _overrideConsole() {\n        // override the window.console functions, process as normal then save to the local db\n        var browserConsole = Object.assign({}, window.console);\n        (function (defaultConsole) {\n          var instance;\n          if (\n            UIModel &&\n            UIModel.getInstance() &&\n            UIModel.getInstance().libraryInstance\n          ) {\n            instance = UIModel.getInstance().libraryInstance;\n          } else {\n            // fallback\n            instance = new AgentLibrary();\n          }\n\n          var agentSettings = UIModel.getInstance().agentSettings;\n\n          function _getRecord(type, args) {\n            var result = [];\n            for (var i = 0; i < args.length; i++) {\n              var arg = args[i];\n              if (typeof arg === 'function') {\n                result.push(arg.toString());\n              } else if (typeof arg === 'object') {\n                try {\n                  result.push(JSON.stringify(arg));\n                } catch (e) {}\n              } else {\n                result.push(arg);\n              }\n            }\n\n            return {\n              type: type,\n              message: result.join(' '),\n              dts: new Date(),\n              agentId: agentSettings.agentId,\n              agentName: agentSettings.firstName + ' ' + agentSettings.lastName,\n            };\n          }\n\n          function _saveRecord(type, args) {\n            if (instance._consoleDb) {\n              var transaction = instance._consoleDb.transaction(\n                ['consoleLogger'],\n                'readwrite',\n              );\n              var store = transaction.objectStore('consoleLogger');\n\n              store.add(_getRecord(type, args));\n            }\n          }\n\n          window.console.log = function () {\n            defaultConsole.log.apply(this, arguments);\n            _saveRecord('LOG', arguments);\n          };\n          window.console.info = function () {\n            defaultConsole.info.apply(this, arguments);\n            _saveRecord('INFO', arguments);\n          };\n          window.console.warn = function () {\n            defaultConsole.warn.apply(this, arguments);\n            _saveRecord('WARN', arguments);\n          };\n          window.console.error = function () {\n            defaultConsole.error.apply(this, arguments);\n            _saveRecord('ERROR', arguments);\n          };\n        })(browserConsole);\n      }\n    }\n\n    function initAgentLibrarySoftphoneService(context) {\n      /**\n       * @namespace Softphone\n       * @memberof AgentLibrary\n       */\n\n      'use strict';\n\n      var AgentLibrary = context.AgentLibrary;\n      // var agentAuthRequest = UIModel.getInstance().authenticateRequest;\n      // // Auth token ,agentId,dialDest will be passed in init() function when sipInit is initialized in AgentJs.\n      // var serviceInstance = new SoftphoneService({\n      //     authToken: agentAuthRequest && agentAuthRequest.engageAccessToken,\n      //     agentId: UIModel.getInstance().agentSettings.agentId,\n      // });\n\n      // // set the softphone instance on the Lib\n      // AgentLibrary.prototype._SoftphoneService = serviceInstance;\n\n      //////////////////////\n      // PUBLIC FUNCTIONS //\n      //////////////////////\n      /* These functions are available externally to agent-js or other parent apps */\n\n      /**\n       * Initializes the SIP library, sets up callback functions\n       * @memberof AgentLibrary.Softphone\n       */\n      AgentLibrary.prototype.sipInit = function () {\n        var model = UIModel.getInstance();\n        var softphoneSettings = model.softphoneSettings;\n\n        // if webRtc settings not yet set, do so now\n        if (\n          softphoneSettings.uri === '' ||\n          softphoneSettings.wsServers.length === 0 ||\n          softphoneSettings.displayName === '' ||\n          softphoneSettings.authorizationUser === ''\n        ) {\n          SoftphoneService.setupWebRtcServer();\n        }\n\n        if (softphoneSettings.wsServers.length > 0) {\n          var webRtc = new CFSimpleSip(_getSipConfig());\n\n          // callbacks\n          webRtc.on('connected', _connected);\n          webRtc.on('ended', _ended);\n          webRtc.on('registered', _registered);\n          webRtc.on('unregistered', _unregistered);\n          webRtc.on('registrationFailed', _registrationFailed);\n          webRtc.on('ringing', _ringing);\n          webRtc.on('mute', _mute);\n          webRtc.on('unmute', _unmute);\n\n          // after 15 sec of no registration response, rotate the registrar\n          softphoneSettings.registerPending = setTimeout(\n            _handleNoRegisterResponse,\n            15 * 1000,\n          );\n          softphoneSettings.webRtc = webRtc; // set back on the UIModel instance\n        } else {\n          console.error('Unable to setup WebRtc server');\n        }\n      };\n\n      /**\n       * clear webRtc settings, hangup, unregister\n       * @memberof SoftphoneLibrary\n       * @returns boolean - success state\n       */\n      AgentLibrary.prototype.sipTerminate = function () {\n        var model = UIModel.getInstance();\n        var webRtc = model.softphoneSettings.webRtc;\n        if (webRtc && webRtc.ua) {\n          var opts = {\n            all: true,\n          };\n          model.libraryInstance.offhookTerm(); // TODO: - dlb - set up callback with agent-js??\n          webRtc.hangup();\n          webRtc.ua.unregister(opts);\n\n          webRtc.removeAllListeners('connected');\n          webRtc.removeAllListeners('ended');\n          webRtc.removeAllListeners('registered');\n          webRtc.removeAllListeners('unregistered');\n          webRtc.removeAllListeners('registrationFailed');\n          webRtc.removeAllListeners('ringing');\n          webRtc.removeAllListeners('mute');\n          webRtc.removeAllListeners('unmute');\n\n          webRtc.ua.stop();\n          webRtc = null;\n          model.softphoneSettings.webRtc = webRtc; // set back on model\n          model.softphoneSettings.isRegistered = false;\n          model.softphoneSettings.attemptingSoftphoneReconnect = false;\n          model.softphoneSettings.muteActive = false;\n          model.softphoneSettings.registerPending = null;\n          model.softphoneSettings.uri = '';\n\n          return true;\n        }\n\n        console.warn('sipTerminate: sip rtc settings or ua missing', webRtc);\n        return false;\n      };\n      /**\n       * Sends a session.accept response to a SIP invite event.\n       * @memberof AgentLibrary.Softphone\n       */\n      AgentLibrary.prototype.sipAnswer = function () {\n        var webRtc = UIModel.getInstance().softphoneSettings.webRtc;\n        if (webRtc) {\n          webRtc.answer();\n        }\n      };\n\n      /**\n       * Sends a session.reject response to a SIP invite event.\n       * @memberof AgentLibrary.Softphone\n       */\n      AgentLibrary.prototype.sipReject = function () {\n        var webRtc = UIModel.getInstance().softphoneSettings.webRtc;\n        if (webRtc && webRtc.reject) {\n          webRtc.reject();\n        }\n      };\n\n      /**\n       * Request microphone access, if already registered, call hangup\n       * @memberof AgentLibrary.Softphone\n       */\n      AgentLibrary.prototype.sipRegister = function () {\n        var model = UIModel.getInstance();\n        var webRtc = model.softphoneSettings.webRtc;\n\n        try {\n          // enable microphone access notification if not already done\n          if (\n            window.webkitNotifications &&\n            window.webkitNotifications.checkPermission() !== 0\n          ) {\n            window.webkitNotifications.requestPermission();\n          }\n\n          if (!webRtc) {\n            return;\n          }\n\n          // if already registered, hangup\n          if (model.softphoneSettings.isRegistered) {\n            model.libraryInstance.sipHangUp();\n          }\n        } catch (e) {\n          console.error('sip reg error:' + e);\n        }\n      };\n\n      /**\n       * Sends session.cancel if connected, or session.bye if not connected to a call\n       * @memberof AgentLibrary.Softphone\n       */\n      AgentLibrary.prototype.sipHangUp = function () {\n        var webRtc = UIModel.getInstance().softphoneSettings.webRtc;\n        if (webRtc && webRtc.hangup) {\n          webRtc.hangup();\n        }\n      };\n\n      /**\n       * Sends session.dtmf for the tone specified\n       * @memberof AgentLibrary.Softphone\n       * @param {string} dtmf The dtmf tone to send\n       */\n      AgentLibrary.prototype.sipSendDTMF = function (dtmf) {\n        var webRtc = UIModel.getInstance().softphoneSettings.webRtc;\n        if (webRtc) {\n          webRtc.sendDTMF(dtmf);\n        }\n      };\n\n      /**\n       * Toggles call audio on/off\n       * @memberof AgentLibrary.Softphone\n       * @param {boolean} state The dtmf tone to send\n       */\n      AgentLibrary.prototype.sipToggleMute = function (state) {\n        var softphoneSettings = UIModel.getInstance().softphoneSettings;\n        var webRtc = softphoneSettings.webRtc;\n        var muteActive = softphoneSettings.muteActive;\n\n        if (webRtc) {\n          if (muteActive || state === false) {\n            webRtc.unmute();\n            utils.fireCallback(\n              UIModel.getInstance().libraryInstance,\n              CALLBACK_TYPES.SIP_UNMUTE,\n              { message: 'Call unmuted' },\n            );\n          } else {\n            webRtc.mute();\n            utils.fireCallback(\n              UIModel.getInstance().libraryInstance,\n              CALLBACK_TYPES.SIP_MUTE,\n              { message: 'Call muted' },\n            );\n          }\n        }\n      };\n\n      AgentLibrary.prototype.switchSoftphoneRegistrar = function (\n        maintainOffhook,\n        autoStartOffhook,\n      ) {\n        var model = UIModel.getInstance();\n\n        if (typeof autoStartOffhook === 'undefined') {\n          autoStartOffhook = true;\n        }\n        if (\n          model.softphoneSettings.attemptingSoftphoneReconnect &&\n          autoStartOffhook\n        ) {\n          _updateOHFlags(maintainOffhook, autoStartOffhook);\n          utils.fireCallback(\n            UIModel.getInstance().libraryInstance,\n            CALLBACK_TYPES.SIP_SWITCH_REGISTRAR,\n            {\n              message: 'Updating offhook flags, set status message',\n              status: 'UPDATE',\n            },\n          );\n        } else {\n          model.libraryInstance.resetSoftphoneSession({\n            maintainOH: maintainOffhook,\n            autoStartOH: autoStartOffhook,\n          });\n          utils.fireCallback(\n            UIModel.getInstance().libraryInstance,\n            CALLBACK_TYPES.SIP_SWITCH_REGISTRAR,\n            { message: 'Triggering softphone registrar swap', status: 'RESET' },\n          );\n        }\n      };\n\n      AgentLibrary.prototype.resetSoftphoneSession = function (offhookParams) {\n        var model = UIModel.getInstance();\n        var softphoneSettings = model.softphoneSettings;\n        if (\n          softphoneSettings.isRegistered &&\n          !softphoneSettings.attemptingSoftphoneReconnect\n        ) {\n          model.libraryInstance.sipTerminate(); // clear current SIP.js object\n          _rotateWebRtcServer(function () {\n            SoftphoneService.setupWebRtcServer();\n            if (offhookParams) {\n              if (offhookParams.maintainOH === 'null') {\n                offhookParams.maintainOH = softphoneSettings.maintainOH; // default to model setting\n              }\n              _updateOHFlags(\n                offhookParams.maintainOH,\n                offhookParams.autoStartOH,\n              );\n            }\n\n            model.libraryInstance.sipInit();\n            model.libraryInstance.sipRegister();\n          });\n        }\n      };\n\n      // INTERNAL FUNCTIONS //\n      ////////////////////////\n      /* These functions are globally available to the AgentSDK app */\n\n      var SoftphoneService = {\n        setupWebRtcServer: function () {\n          var model = UIModel.getInstance();\n          var softphoneSettings = model.softphoneSettings;\n\n          // webRtcServerInfo format for Legacy\n          // [\n          //     {\n          //        \"transport\": \"wss\",\n          //        \"username\": \"yadvendra_agent\",\n          //        \"password\": \"oct@2018\",\n          //        \"domain\": \"d03-reg1.vacd.biz\",\n          //        \"outboundProxy\": \"d03-reg1.vacd.biz:8089/freeswitch\"\n          //    }\n          // ]\n          //\n          // webRtcServerInfo format for RC Int API\n          // [\n          //     {\n          //        \"transport\": \"WSS\",\n          //        \"username\": \"18662032059*101\",\n          //        \"password\": \"B77O85vO\",\n          //        \"authorizationId\": \"400017513008\",\n          //        \"domain\": \"sip-cfintams.lab.nordigy.ru\",\n          //        \"outboundProxy\": \"webphone-sip-cfintams.lab.nordigy.ru:8083\"\n          //    }\n          // ]\n          var sipInfo = _getCurrentWebRtcServerInfo();\n          if (sipInfo !== null) {\n            var username = sipInfo.username.toLowerCase();\n            var webRtcServer =\n              sipInfo.transport.toLowerCase() + '://' + sipInfo.outboundProxy; // e.g. \"wss://aws87-f06-ccw01.vacd.biz:8089/freeswitch\";\n\n            softphoneSettings.uri =\n              utils.escapeSoftphoneUsername(username) + '@' + sipInfo.domain;\n            softphoneSettings.wsServers = [webRtcServer];\n            softphoneSettings.displayName = username;\n            softphoneSettings.authorizationUser = sipInfo.authorizationId;\n\n            softphoneSettings.sipPassword = sipInfo.password;\n            softphoneSettings.sipDialDest = 'sip:' + softphoneSettings.uri;\n\n            return {\n              webRtcServer: webRtcServer,\n              username: username,\n              password: softphoneSettings.sipPassword,\n              domain: sipInfo.domain || null,\n              dialDest: softphoneSettings.sipDialDest || null,\n              uri: softphoneSettings.uri || null,\n              wsServers: softphoneSettings.wsServers || [],\n            };\n          }\n\n          return null;\n        },\n      };\n\n      ///////////////////////\n      // PRIVATE FUNCTIONS //\n      ///////////////////////\n      /* These functions are just used within this softphoneService.js file */\n\n      function _getSipConfig() {\n        var remoteAudioElement = document.getElementById('remoteAudio'), // audio node on index.html\n          model = UIModel.getInstance(),\n          softphoneSettings = model.softphoneSettings,\n          config = {\n            media: {\n              remote: {\n                audio: remoteAudioElement,\n              },\n            },\n            ua: {\n              displayName: utils.escapeSoftphoneUsername(\n                softphoneSettings.displayName,\n              ),\n              authorizationUser: utils.escapeSoftphoneUsername(\n                softphoneSettings.authorizationUser,\n              ),\n              password: softphoneSettings.sipPassword,\n              uri: softphoneSettings.uri,\n              wsServers: softphoneSettings.wsServers,\n              traceSip: true,\n              registerExpires: 60,\n              userAgentString: navigator.userAgent,\n            },\n          };\n        return config;\n      }\n\n      function _handleNoRegisterResponse() {\n        // registration timeout reached, rotate registrar\n        var model = UIModel.getInstance();\n        var softphoneSettings = model.softphoneSettings;\n\n        // we want to force a registrar refresh\n        softphoneSettings.isRegistered = true;\n        softphoneSettings.attemptingSoftphoneReconnect = false;\n\n        model.libraryInstance.switchSoftphoneRegistrar(\n          softphoneSettings.maintainOH,\n          softphoneSettings.autoStartOH,\n        );\n      }\n\n      // clear registration timeout\n      function _registerHasResponse() {\n        clearTimeout(UIModel.getInstance().softphoneSettings.registerPending);\n      }\n\n      function _rotateWebRtcServer(callback) {\n        var softphoneSettings = UIModel.getInstance().softphoneSettings;\n        utils.setCallback(\n          UIModel.getInstance().libraryInstance,\n          CALLBACK_TYPES.ROTATE_WEBRTC_SERVER,\n          callback,\n        );\n        var sipInfo = softphoneSettings.sipInfo;\n        var timeSinceLastFetch =\n          Date.now() - softphoneSettings.lastSipFetchTime;\n        console.log(\n          '## Checking to rotate webRtc Server.SipInfo array length is ' +\n            sipInfo.length +\n            '. Time since last fetch of webRtcInfo is ' +\n            timeSinceLastFetch / 60000 +\n            ' mins.',\n        );\n        if (sipInfo.length > 1 && timeSinceLastFetch < 5 * 60000) {\n          sipInfo.shift();\n          console.log(\n            '## rotated sip server.Will now attempt to new server: ' +\n              sipInfo[0].domain,\n          );\n          softphoneSettings.attemptingSoftphoneReconnect = true;\n          utils.fireCallback(\n            UIModel.getInstance().libraryInstance,\n            CALLBACK_TYPES.ROTATE_WEBRTC_SERVER,\n            callback,\n          );\n        } else {\n          console.log('## fetching webRtcInfo.');\n          // fetch Sip Registration info again if array is consumed to rotate registrar\n          var model = UIModel.getInstance();\n          model.libraryInstance.getWebRtcInfo(callback);\n        }\n      }\n\n      function _updateOHFlags(maintainOffhook, autoStartOffhook) {\n        var softphoneSettings = UIModel.getInstance().softphoneSettings;\n        softphoneSettings.maintainOH = maintainOffhook;\n        softphoneSettings.autoStartOH = autoStartOffhook;\n      }\n\n      function _getCurrentWebRtcServerInfo() {\n        var softphoneSettings = UIModel.getInstance().softphoneSettings;\n        return softphoneSettings.sipInfo != null &&\n          softphoneSettings.sipInfo.length > 0\n          ? softphoneSettings.sipInfo[0]\n          : null;\n      }\n\n      ///////////////////////////////\n      // SIP JS CALLBACK FUNCTIONS //\n      ///////////////////////////////\n      /* These functions bubble up SIP callbacks to the UI */\n\n      function _connected() {\n        // send response to agent-js\n        utils.fireCallback(\n          UIModel.getInstance().libraryInstance,\n          CALLBACK_TYPES.SIP_CONNECTED,\n          { message: 'SIP connected' },\n        );\n      }\n\n      function _ended() {\n        utils.fireCallback(\n          UIModel.getInstance().libraryInstance,\n          CALLBACK_TYPES.SIP_ENDED,\n          { message: 'SIP ended' },\n        );\n      }\n\n      function _registered() {\n        var model = UIModel.getInstance();\n        _registerHasResponse();\n        model.softphoneSettings.isRegistered = true;\n\n        // check if dial destination has changed to a new registrar,\n        // but not just with the IQ replacement of @RC_SOFTPHONE\n        if (\n          model.agentSettings.dialDest !==\n            model.softphoneSettings.sipDialDest &&\n          model.agentSettings.dialDest.indexOf('@RC_SOFTPHONE') === -1\n        ) {\n          // update agent dial dest on instance\n          model.agentSettings.dialDest = JSON.parse(\n            JSON.stringify(model.softphoneSettings.sipDialDest),\n          );\n\n          // notify agent of change\n          var responseObj = {\n            message: 'SIP dial destination changed',\n            dialDest: model.agentSettings.dialDest,\n            maintainOH: model.softphoneSettings.maintainOH,\n            autoStartOH: model.softphoneSettings.autoStartOH,\n          };\n\n          if (!model.softphoneSettings.autoStartOH) {\n            model.softphoneSettings.attemptingSoftphoneReconnect = false; // done with reconnect steps for now\n          }\n\n          utils.fireCallback(\n            UIModel.getInstance().libraryInstance,\n            CALLBACK_TYPES.SIP_DIAL_DEST_CHANGED,\n            responseObj,\n          );\n\n          // update dial destination on agent login record, send request to IQ\n          model.libraryInstance.updateDialDestination(\n            model.agentSettings.dialDest,\n            true,\n          );\n        }\n\n        utils.fireCallback(\n          model.libraryInstance,\n          CALLBACK_TYPES.SIP_REGISTERED,\n          { message: 'SIP registered' },\n        );\n      }\n\n      function _unregistered() {\n        var model = UIModel.getInstance();\n        _registerHasResponse();\n        model.softphoneSettings.isRegistered = false;\n        model.libraryInstance.sipTerminate();\n        model.libraryInstance.sipInit();\n      }\n\n      function _registrationFailed() {\n        var model = UIModel.getInstance();\n        _registerHasResponse();\n        model.softphoneSettings.isRegistered = false;\n        model.libraryInstance.sipTerminate();\n      }\n\n      function _ringing(notif) {\n        var model = UIModel.getInstance();\n        var usingRcPhone =\n          model.agentSettings.dialDest.indexOf('@RC_SOFTPHONE') > -1;\n\n        var rcHeader =\n          notif.transaction &&\n          notif.transaction.request &&\n          notif.transaction.request.headers['P-Rc-Call-Source'];\n\n        var rcHeaderValue =\n          rcHeader && rcHeader.length === 1 && rcHeader[0].raw;\n\n        // do not notify the app of ringing if Rc Call Source is not 'partner-contact-center'\n        if (usingRcPhone && rcHeaderValue !== 'partner-contact-center') {\n          return;\n        }\n\n        utils.fireCallback(\n          UIModel.getInstance().libraryInstance,\n          CALLBACK_TYPES.SIP_RINGING,\n          { message: 'SIP ringing', data: notif },\n        );\n      }\n\n      function _mute() {\n        UIModel.getInstance().softphoneSettings.muteActive = true;\n      }\n\n      function _unmute() {\n        UIModel.getInstance().softphoneSettings.muteActive = false;\n      }\n      /**\n       * Initializes the SIP library, sets up callback functions\n       * Request microphone access, if already registered, call hangup\n       * @memberof AgentLibrary.Softphone\n       */\n      // AgentLibrary.prototype.sipInitAndRegister = serviceInstance.sipInitAndRegister.bind(\n      //     serviceInstance\n      // );\n    }\n\n    var initAgentLibrary = function (context) {\n      initAgentLibraryCore(context);\n      initAgentLibrarySocket(context);\n      initAgentLibraryAgent(context);\n      initAgentLibraryCall(context);\n      initAgentLibraryLead(context);\n      initAgentLibraryChat(context);\n      initAgentLibraryLogger(context);\n      initAgentLibraryConsoleLogger(context);\n      initAgentLibrarySoftphoneService(context);\n      initAgentLibraryMultisocket(context);\n\n      return context.AgentLibrary;\n    };\n\n    return initAgentLibrary(this);\n  }.call(this, this);\n}.call(window));\n"],"mappings":"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MAAM,GAAGhB,gBAAgB;MAE3C,OAAOlE,iBAAiB;IAC1B,CAAC;IAED,IAAIsF,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA,EAAe,CAAC,CAAC;;IAExC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIA,mBAAmB,CAACjP,SAAS,CAAC+H,eAAe,GAAG,UAAUC,YAAY,EAAE;MACtE,IAAI2B,iBAAiB,GAAGpB,KAAK,CAACqB,oBAAoB,CAAC5B,YAAY,CAAC;;MAEhE;MACA2B,iBAAiB,CAACuF,WAAW,GAAG3G,KAAK,CAACC,OAAO,CAC3CR,YAAY,CAACK,eAAe,EAC5B,cACF,CAAC;MAED,OAAOsB,iBAAiB;IAC1B,CAAC;IAED,IAAIwF,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA,EAAe,CAAC,CAAC;;IAExC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIA,mBAAmB,CAACnP,SAAS,CAAC+H,eAAe,GAAG,UAAUC,YAAY,EAAE;MACtE,IAAIC,KAAK,GAAGC,OAAO,CAACC,WAAW,CAAC,CAAC;MACjC,IAAIC,KAAK,GAAGJ,YAAY,CAACK,eAAe;MAExC,IAAI+G,OAAO,GAAG7G,KAAK,CAACqB,oBAAoB,CAAC5B,YAAY,CAAC;MACtD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IO,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAA,EAAe,CAAC,CAAC;IAEvCA,kBAAkB,CAACznB,SAAS,CAACkV,UAAU,GAAG,YAAY;MACpD,IAAIC,GAAG,GAAG;QACRC,UAAU,EAAE;UACV,cAAc,EAAE,IAAI;UACpB,OAAO,EAAEC,aAAa,CAACqS,aAAa;UACpC,aAAa,EAAEnf,KAAK,CAACgN,YAAY,CAAC,CAAC;UACnCC,WAAW,EAAE,EAAE;UACfmO,SAAS,EAAE;YACT,OAAO,EAAEpb,KAAK,CAAC2Q,QAAQ,CACrBhR,OAAO,CAACC,WAAW,CAAC,CAAC,CAACka,kBAAkB,CAACsB,SAC3C;UACF,CAAC;UACDlO,QAAQ,EAAE;YACR,OAAO,EAAElN,KAAK,CAAC2Q,QAAQ,CACrBhR,OAAO,CAACC,WAAW,CAAC,CAAC,CAACO,aAAa,CAACC,OACtC;UACF,CAAC;UACDwZ,YAAY,EAAE;YACZ,OAAO,EAAE5Z,KAAK,CAAC2Q,QAAQ,CACrBhR,OAAO,CAACC,WAAW,CAAC,CAAC,CAAC4O,mBAAmB,CAACQ,WAC5C;UACF;QACF;MACF,CAAC;MAED,OAAOzI,IAAI,CAACE,SAAS,CAACmG,GAAG,CAAC;IAC5B,CAAC;;IAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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ACDnlB,KAAK,CAACqQ,YAAY,CAChBof,QAAQ,EACRlf,cAAc,CAACq6B,WAAW,EAC1BzS,UACF,CAAC;YACD;UACF,KAAKrrB,aAAa,CAAC+9B,UAAU;YAC3B,IAAIC,SAAS,GAAGnrC,OAAO,CAACC,WAAW,CAAC,CAAC,CAACo9B,oBAAoB,CAACx9B,eAAe,CACxE2lB,IACF,CAAC;YACDnlB,KAAK,CAACqQ,YAAY,CAChBof,QAAQ,EACRlf,cAAc,CAACw6B,gBAAgB,EAC/BD,SACF,CAAC;YACD;QACJ;MACF,CAAC;MAED;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;MAEM9iC,yBAAyB,EAAE,SAAAA,0BACzBkE,QAAQ,EACR8+B,SAAS,EACTC,QAAQ,EACRC,QAAQ,EACR;QACAA,QAAQ,GAAGA,QAAQ,IAAI,MAAM;QAE7B,IACEh/B,QAAQ,CAAC8+B,SAAS,CAAC,IACnB,OAAO9+B,QAAQ,CAAC8+B,SAAS,CAAC,CAACC,QAAQ,CAAC,KAAK,WAAW,EACpD;UACA,IAAIE,QAAQ,GAAGj/B,QAAQ,CAAC8+B,SAAS,CAAC,CAACC,QAAQ,CAAC;UAC5C,OAAO,IAAI,CAACG,aAAa,CAACD,QAAQ,EAAED,QAAQ,CAAC;QAC/C,CAAC,MAAM;UACL,OAAO,EA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","ignoreList":[]}