{"version":3,"file":"EvClient.js","names":["_events","require","_utils","_di","_core","_SDK","_interopRequireDefault","_enums","_constant","_EvTypeError","_enums2","_callbackTypes","_dec","_class","_class2","_descriptor","obj","__esModule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","target","i","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","configurable","writable","_initializerDefineProperty","property","descriptor","context","initializer","call","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","_createClass","protoProps","staticProps","prototype","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","decorators","desc","slice","reverse","reduce","decorator","_initializerWarningHelper","Error","EvClient","Module","name","deps","_RcModuleV","_super","_this","_sdk","_onOpen","_onClose","_Sdk","AgentLibrary","_options","_eventEmitter","EventEmitter","_callbacks","_deps","evClientOptions","options","_this$_deps$evClientO","callbacks","closeResponse","openResponse","setAppStatus","evStatus","CONNECTED","emit","EvCallbackTypes","OPEN_SOCKET","terminateStats","console","log","CLOSED","CLOSE_SOCKET","window","localStorage","authHost","getItem","addListener","type","listener","addListenerOnce","once","removeListener","loadCurrentCall","_this2","status","appStatus","setEnv","setItem","location","reload","setSIPNoLog","onInitOnce","initSDK","_this3","_objectSpread2","Sdk","ACK","on","eventType","callback","_callback","setCallbacks","getEventCallback","getCallback","getRefreshedToken","authenticateAgentWithEngageAccessToken","engageAccessToken","_this4","LOGIN","response","configureAgent","_ref","_this5","dialDest","queueIds","chatIds","skillProfileId","dialGroupId","_ref$updateFromAdminU","updateFromAdminUI","_ref$isForce","isForce","loginAgent","messageTypes","CONFIGURE_AGENT","data","dispositionManualPass","_ref2","_this6","dispId","notes","callbackDTS","leadId","requestId","externId","dispositionCall","_ref3","uii","_ref3$dispId","_ref3$notes","contactForwardNumber","survey","_ref3$requestId","decodeUii","authenticateAgent","rcAccessToken","tokenType","_this7","authenticateAgentWithRcAccessToken","_ref4","regeneratorRuntime","mark","_callee","_agents","agents","wrap","_callee$","_context","prev","next","accessToken","LOGINED","map","agent","agentId","concat","agentType","AGENT_TYPES","stop","_x","openSocket","_this8","hasSupportWebSocket","EvTypeError","INVALID_BROWSER","getAgentConfig","_this9","_getAndHandleAuthenticateResponse","_callee2","_this10","authenticateResponse","_callee2$","_context2","waitUntilTo","interval","timeout","CONNECT_TIMEOUT","sent","message","CONNECT_ERROR","NO_AGENT","UNEXPECTED_AGENT","abrupt","getAndHandleAuthenticateResponse","_x2","_x3","closeSocket","hangup","_ref5","sessionId","_ref5$resetPendingDis","resetPendingDisp","logoutAgent","_this11","manualOutdial","_ref6","destination","callerId","ringTime","countryId","queueId","manualOutdialCancel","offhookInit","offhookTerm","hold","holdState","pauseRecord","isRecord","_this12","formattedResponse","pause","record","state","_this13","holdSession","_ref7","coldTransferCall","_ref8","_this14","_ref8$callerId","_ref8$sipHeaders","sipHeaders","coldXfer","warmTransferCall","_ref9","_this15","_ref9$callerId","_ref9$sipHeaders","warmXfer","coldTransferIntlCall","_ref10","_this16","_ref10$callerId","_ref10$sipHeaders","_ref10$countryId","internationalColdXfer","warmTransferIntlCall","_ref11","_this17","_ref11$callerId","_ref11$sipHeaders","_ref11$countryId","internationalWarmXfer","cancelWarmTransferCall","warmXferCancel","requeueCall","_ref12","_this18","_ref12$skillId","skillId","_ref12$maintain","maintain","fetchDirectAgentList","_this19","directAgentXferList","encodeUii","_ref13","_encodeSymbol","encodeRingingUii","_ref14","split","getMainId","rejectDirectAgentTransferCall","rejectDirectAgentXfer","coldDirectAgentTransfer","targetAgentId","coldDirectAgentXfer","warmDirectAgentTransfer","warmDirectAgentXfer","sendVoicemailDirectAgentTransfer","voicemailDirectAgentXfer","cancelDirectAgentTransfer","cancelDirectAgentXfer","setAgentState","agentState","agentAuxState","_multiLoginRequest","_this20","multiLoginRequest","GENERIC_NOTIFICATION","messageCode","_multiLoginRequest2","_callee3","_this21","_callee3$","_context3","t0","sipInit","sipAnswer","sipRegister","sipTerminate","sipHangUp","sipReject","sipSendDTMF","dtmf","sipToggleMute","getScript","scriptId","version","_this22","_saveScriptResult","_callee4","jsonResult","_callee4$","_context4","saveScriptResult","_x4","_x5","_x6","_getKnowledgeBaseGroups","_callee5","knowledgeBaseGroupIds","uiModel","HttpService","agentSettings","_yield$HttpService$ht","_response","_callee5$","_context5","_getUIModel","getInstance","_HttpService","getAgentSettings","authenticateRequest","httpGet","accountId","headers","Authorization","queryParams","guid","JSON","parse","getKnowledgeBaseGroups","_x7","get","getCurrentCall","socket","RcModuleV2","START","action","exports"],"sources":["lib/EvClient/EvClient.ts"],"sourcesContent":["import { EventEmitter } from 'events';\nimport { waitUntilTo } from '@ringcentral-integration/commons/utils';\n\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport { action, RcModuleV2, state } from '@ringcentral-integration/core';\n// eslint-disable-next-line import/no-unresolved\nimport AgentLibrary from '@SDK';\n\nimport { AGENT_TYPES, messageTypes } from '../../enums';\nimport { _encodeSymbol } from '../constant';\nimport { EvTypeError } from '../EvTypeError';\nimport { evStatus } from './enums';\nimport { EvCallbackTypes } from './enums/callbackTypes';\nimport type {\n  Deps,\n  EvACKResponse,\n  EvAddSessionNotification,\n  EvAgentConfig,\n  EvAgentOptions,\n  EvAgentScriptResult,\n  EvAgentSettings,\n  EvAuthenticateAgentWithEngageAccessTokenRes,\n  EvAuthenticateAgentWithRcAccessTokenRes,\n  EvBaseCall,\n  EvClientCallMapping,\n  EvColdTransferCallResponse,\n  EvColdTransferIntlCallResponse,\n  EvConfigureAgentOptions,\n  EvDirectAgentListResponse,\n  EvDispositionCallOptions,\n  EvDispositionManualPassOptions,\n  EvLogoutAgentResponse,\n  EvMessageRes,\n  EvOpenSocketResult,\n  EvRequeueCallResponse,\n  EvRequeueOption,\n  EvScriptResponse,\n  EvTokenType,\n  EvWarmTransferCallResponse,\n  EvWarmTransferIntlCallResponse,\n  PauseRecord,\n  PauseRecordResponse,\n  RawEvAuthenticateAgentWithRcAccessTokenRes,\n  RecordResponse,\n} from './interfaces';\n\ntype ListenerType = typeof EvCallbackTypes['OPEN_SOCKET' | 'CLOSE_SOCKET'];\n\ntype Listener<\n  T extends keyof EvClientCallMapping,\n  U extends EvClientCallMapping = EvClientCallMapping,\n> = (res: U[T]) => void;\n\nexport type EvClientTransferParams = {\n  dialDest: string;\n  callerId?: string;\n  sipHeaders?: string[];\n  countryId?: string;\n};\n\nexport type EvClientHandUpParams = {\n  sessionId: string;\n  resetPendingDisp?: boolean;\n};\n\nexport type EvClientHoldSessionParams = {\n  state: boolean;\n  sessionId: string;\n};\n\nexport type EvClientManualOutdialParams = {\n  destination: string;\n  callerId: string;\n  ringTime: number;\n  queueId: string;\n  countryId: string;\n};\n\n@Module({\n  name: 'EvClient',\n  deps: ['EvClientOptions'],\n})\nclass EvClient extends RcModuleV2<Deps> {\n  /** SDK instance */\n  private _sdk: any;\n\n  private _onOpen: (response: EvClientCallMapping['openResponse']) => void;\n\n  private _onClose: () => void;\n\n  private _Sdk = AgentLibrary;\n\n  private _options: EvAgentOptions;\n\n  private _eventEmitter = new EventEmitter();\n\n  private _callbacks: Record<string, Function> = {};\n\n  @state\n  appStatus: string = evStatus.START;\n\n  constructor(deps: Deps) {\n    super({ deps });\n    this._options = this._deps.evClientOptions.options;\n    const { closeResponse, openResponse } =\n      this._deps.evClientOptions.callbacks;\n    this._onOpen = (res) => {\n      this.setAppStatus(evStatus.CONNECTED);\n      openResponse(res);\n      this._eventEmitter.emit(EvCallbackTypes.OPEN_SOCKET, res);\n      // ensure for WebSocket keep-alive connection\n      this._sdk.terminateStats();\n    };\n    this._onClose = () => {\n      console.log('EvCallbackTypes.CLOSE_SOCKET~');\n      this.setAppStatus(evStatus.CLOSED);\n      closeResponse();\n      this._eventEmitter.emit(EvCallbackTypes.CLOSE_SOCKET);\n    };\n    // Used for toggle auth host about Engage Voice backend.\n    if (window.localStorage) {\n      const authHost = window.localStorage.getItem('__authHost__');\n      if (authHost) {\n        this._options.authHost = authHost;\n      }\n    }\n  }\n\n  addListener<T extends ListenerType>(type: T, listener: Listener<T>) {\n    this._eventEmitter.addListener(type, listener);\n  }\n\n  addListenerOnce<T extends ListenerType>(type: T, listener: Listener<T>) {\n    this._eventEmitter.once(type, listener);\n  }\n\n  removeListener<T extends ListenerType>(\n    type: ListenerType,\n    listener: Listener<T>,\n  ) {\n    this._eventEmitter.removeListener(type, listener);\n  }\n\n  loadCurrentCall() {\n    return new Promise<EvBaseCall | void>((resolve) => {\n      this._sdk.loadCurrentCall(resolve);\n    });\n  }\n\n  get currentCall(): EvBaseCall {\n    return this._sdk.getCurrentCall();\n  }\n\n  @action\n  setAppStatus(status: string) {\n    this.appStatus = status;\n  }\n\n  setEnv(authHost: string) {\n    if (window.localStorage) {\n      window.localStorage.setItem('__authHost__', authHost);\n      window.location.reload();\n    }\n  }\n\n  setSIPNoLog(authHost: string) {\n    if (window.localStorage) {\n      window.localStorage.setItem('__SIP_NO_LOG__', authHost);\n      window.location.reload();\n    }\n  }\n\n  override onInitOnce() {\n    this.initSDK();\n  }\n\n  initSDK() {\n    console.log('initSDK');\n    const { _Sdk: Sdk } = this;\n    this._sdk = new Sdk({\n      callbacks: {\n        ...this._callbacks,\n        [EvCallbackTypes.CLOSE_SOCKET]: this._onClose,\n        [EvCallbackTypes.OPEN_SOCKET]: this._onOpen,\n        [EvCallbackTypes.ACK]: (res: EvACKResponse) => {\n          this._eventEmitter.emit(EvCallbackTypes.ACK, res);\n        },\n      },\n      ...this._options,\n    });\n  }\n\n  on(eventType: string, callback: (...args: any[]) => void) {\n    const _callback = {\n      [eventType]: (...args: any[]) => callback(...args),\n    };\n\n    this._sdk.setCallbacks(_callback);\n    this._callbacks = {\n      ...this._callbacks,\n      ..._callback,\n    };\n  }\n\n  getEventCallback(eventType: string) {\n    return this._sdk.getCallback(eventType);\n  }\n\n  getRefreshedToken() {\n    this._sdk.getRefreshedToken();\n  }\n\n  authenticateAgentWithEngageAccessToken(engageAccessToken: string) {\n    return new Promise<EvAuthenticateAgentWithEngageAccessTokenRes>(\n      (resolve) => {\n        this.setAppStatus(evStatus.LOGIN);\n        this._sdk.authenticateAgentWithEngageAccessToken(\n          engageAccessToken,\n          (response: EvAuthenticateAgentWithEngageAccessTokenRes) => {\n            resolve(response);\n          },\n        );\n      },\n    );\n  }\n\n  configureAgent({\n    dialDest,\n    queueIds,\n    chatIds,\n    skillProfileId,\n    dialGroupId,\n    updateFromAdminUI = false,\n    isForce = false,\n  }: EvConfigureAgentOptions) {\n    return new Promise<EvMessageRes>((resolve) => {\n      this._sdk.loginAgent(\n        dialDest,\n        queueIds,\n        chatIds,\n        skillProfileId,\n        dialGroupId,\n        updateFromAdminUI,\n        isForce,\n        (res: any) => {\n          resolve({\n            type: messageTypes.CONFIGURE_AGENT,\n            data: res,\n          });\n        },\n      );\n    });\n  }\n\n  dispositionManualPass({\n    dispId,\n    notes,\n    callbackDTS,\n    leadId,\n    requestId,\n    externId,\n  }: EvDispositionManualPassOptions) {\n    return new Promise<EvDispositionManualPassOptions>((resolve) => {\n      this._sdk.dispositionManualPass(\n        dispId,\n        notes,\n        (response: EvDispositionManualPassOptions) => {\n          resolve(response);\n        },\n        callbackDTS,\n        leadId,\n        requestId,\n        externId,\n      );\n    });\n  }\n\n  dispositionCall({\n    uii,\n    dispId = '',\n    notes = '',\n    callback,\n    callbackDTS,\n    contactForwardNumber,\n    survey,\n    externId,\n    leadId,\n    requestId = '',\n  }: EvDispositionCallOptions) {\n    return this._sdk.dispositionCall(\n      this.decodeUii(uii),\n      dispId,\n      notes,\n      callback,\n      callbackDTS,\n      contactForwardNumber,\n      survey,\n      externId,\n      leadId,\n      requestId,\n    );\n  }\n\n  authenticateAgent(rcAccessToken: string, tokenType: EvTokenType) {\n    return new Promise<EvAuthenticateAgentWithRcAccessTokenRes>((resolve) => {\n      this.setAppStatus(evStatus.LOGIN);\n      this._sdk.authenticateAgentWithRcAccessToken(\n        rcAccessToken,\n        tokenType,\n        async (res: RawEvAuthenticateAgentWithRcAccessTokenRes) => {\n          // here just auth with engage access token, not need handle response data, that handle by Agent SDK.\n          await this.authenticateAgentWithEngageAccessToken(res.accessToken);\n\n          this.setAppStatus(evStatus.LOGINED);\n          const _agents = (res || {}).agents || [];\n          const agents = _agents.map((agent) => ({\n            ...agent,\n            agentId: agent && agent.agentId ? `${agent.agentId}` : '',\n            agentType: AGENT_TYPES[agent.agentType],\n          }));\n          resolve({\n            ...res,\n            agents,\n          });\n        },\n      );\n    });\n  }\n\n  openSocket(agentId: string) {\n    const hasSupportWebSocket = 'WebSocket' in window;\n\n    if (!hasSupportWebSocket) {\n      throw new EvTypeError({\n        type: messageTypes.INVALID_BROWSER,\n      });\n    }\n\n    return new Promise<EvOpenSocketResult>((resolve) => {\n      this.addListenerOnce(EvCallbackTypes.OPEN_SOCKET, (res) => {\n        resolve(res);\n      });\n      this._sdk.openSocket(agentId);\n    });\n  }\n\n  getAgentConfig() {\n    return new Promise<EvAgentConfig>((resolve) => {\n      this._sdk.getAgentConfig((res: EvAgentConfig) => {\n        resolve(res);\n      });\n    });\n  }\n\n  async getAndHandleAuthenticateResponse(\n    rcAccessToken: string,\n    tokenType: EvTokenType,\n  ) {\n    const authenticateResponse = await waitUntilTo(\n      () => {\n        return this.authenticateAgent(rcAccessToken, tokenType);\n      },\n      {\n        interval: 0,\n        timeout: 120 * 1000,\n      },\n    ).catch(() => {\n      throw new EvTypeError({\n        type: messageTypes.CONNECT_TIMEOUT,\n      });\n    });\n\n    if (\n      authenticateResponse.type === 'Authenticate Error' ||\n      authenticateResponse.message\n    ) {\n      throw new EvTypeError({\n        type: messageTypes.CONNECT_ERROR,\n        data: authenticateResponse.message,\n      });\n    }\n    if (\n      !authenticateResponse ||\n      !authenticateResponse.agents ||\n      !authenticateResponse.agents.length\n    ) {\n      throw new EvTypeError({\n        type: messageTypes.NO_AGENT,\n      });\n    }\n    if (\n      !authenticateResponse.agents[0] ||\n      !authenticateResponse.agents[0].agentId\n    ) {\n      throw new EvTypeError({\n        type: messageTypes.UNEXPECTED_AGENT,\n      });\n    }\n    return authenticateResponse;\n  }\n\n  /**\n   * when manual close socket, that closeSocket will auto reconnected by agent SDK\n   */\n  closeSocket() {\n    this._sdk.closeSocket();\n  }\n\n  get ifSocketExist() {\n    return !!this._sdk.socket;\n  }\n\n  hangup({ sessionId, resetPendingDisp = false }: EvClientHandUpParams) {\n    return this._sdk.hangup(sessionId, resetPendingDisp);\n  }\n\n  logoutAgent(agentId: string) {\n    return new Promise<EvLogoutAgentResponse>((resolve) => {\n      this._sdk.logoutAgent(agentId, (result: EvLogoutAgentResponse) => {\n        resolve(result);\n      });\n    });\n  }\n\n  manualOutdial({\n    destination,\n    callerId,\n    ringTime,\n    countryId,\n    queueId,\n  }: EvClientManualOutdialParams) {\n    return this._sdk.manualOutdial(\n      destination,\n      callerId,\n      ringTime,\n      countryId,\n      queueId,\n    );\n  }\n\n  manualOutdialCancel(uii: string) {\n    this._sdk.manualOutdialCancel(uii);\n  }\n\n  offhookInit() {\n    // we using EvCallbackTypes.OFFHOOK_INIT to catch data, do not pass callback,\n    // that will make the message not come back\n    this._sdk.offhookInit();\n  }\n\n  offhookTerm() {\n    this._sdk.offhookTerm();\n  }\n\n  hold(holdState: boolean) {\n    this._sdk.hold(holdState);\n  }\n\n  pauseRecord(isRecord: boolean) {\n    return new Promise<PauseRecord>((resolve, reject) => {\n      return this._sdk.pauseRecord(\n        isRecord,\n        (response: PauseRecordResponse) => {\n          const formattedResponse = {\n            ...response,\n            pause: response.pause ? Number(response.pause) : null,\n          };\n          if (response.status === 'OK') {\n            resolve(formattedResponse);\n          } else {\n            reject(formattedResponse);\n          }\n        },\n      );\n    });\n  }\n\n  // toggle call recording on/off base on true|false boolean\n  record(state: boolean) {\n    return new Promise<RecordResponse>((resolve, reject) => {\n      return this._sdk.record(state, (response: RecordResponse) => {\n        if (response.status === 'OK') {\n          resolve(response);\n        } else {\n          reject(response);\n        }\n      });\n    });\n  }\n\n  holdSession({ state, sessionId }: EvClientHoldSessionParams) {\n    this._sdk.holdSession(state, sessionId);\n  }\n\n  coldTransferCall({\n    dialDest,\n    callerId = '',\n    sipHeaders = [],\n  }: EvClientTransferParams) {\n    return new Promise<EvColdTransferCallResponse>((resolve, reject) => {\n      this._sdk.coldXfer(\n        dialDest,\n        callerId,\n        sipHeaders,\n        (data: EvColdTransferCallResponse) => {\n          if (data.status === 'OK') {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        },\n      );\n    });\n  }\n\n  warmTransferCall({\n    dialDest,\n    callerId = '',\n    sipHeaders = [],\n  }: EvClientTransferParams) {\n    return new Promise<EvWarmTransferCallResponse>((resolve, reject) => {\n      this._sdk.warmXfer(\n        dialDest,\n        callerId,\n        sipHeaders,\n        (data: EvWarmTransferCallResponse) => {\n          if (data.status === 'OK') {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        },\n      );\n    });\n  }\n\n  coldTransferIntlCall({\n    dialDest,\n    callerId = '',\n    sipHeaders = [],\n    countryId = '',\n  }: EvClientTransferParams) {\n    return new Promise<EvColdTransferIntlCallResponse>((resolve, reject) => {\n      this._sdk.internationalColdXfer(\n        dialDest,\n        callerId,\n        sipHeaders,\n        countryId,\n        (data: EvColdTransferIntlCallResponse) => {\n          if (data.status === 'OK') {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        },\n      );\n    });\n  }\n\n  warmTransferIntlCall({\n    dialDest,\n    callerId = '',\n    sipHeaders = [],\n    countryId = '',\n  }: EvClientTransferParams) {\n    return new Promise<EvWarmTransferIntlCallResponse>((resolve, reject) => {\n      this._sdk.internationalWarmXfer(\n        dialDest,\n        callerId,\n        sipHeaders,\n        countryId,\n        (data: EvWarmTransferIntlCallResponse) => {\n          if (data.status === 'OK') {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        },\n      );\n    });\n  }\n\n  cancelWarmTransferCall(dialDest: string) {\n    this._sdk.warmXferCancel(dialDest);\n  }\n\n  requeueCall({ queueId, skillId = '', maintain = false }: EvRequeueOption) {\n    return new Promise<EvRequeueCallResponse>((resolve, reject) => {\n      this._sdk.requeueCall(\n        queueId,\n        skillId,\n        maintain,\n        (data: EvRequeueCallResponse) => {\n          if (data.status === 'OK') {\n            resolve(data);\n          } else {\n            reject(data);\n          }\n        },\n      );\n    });\n  }\n\n  fetchDirectAgentList() {\n    return new Promise<EvDirectAgentListResponse>((resolve) => {\n      this._sdk.directAgentXferList((data: EvDirectAgentListResponse) => {\n        resolve(data);\n      });\n    });\n  }\n\n  encodeUii({ uii, sessionId }: Partial<EvAddSessionNotification>) {\n    return `${uii}${_encodeSymbol}${sessionId}`;\n  }\n\n  /**\n   * replace sessionId with _encodeSymbol when ringing\n   * @param _encodeSymbol '$'\n   */\n  encodeRingingUii({ uii }: EvBaseCall) {\n    return this.encodeUii({\n      uii: this.decodeUii(uii),\n      sessionId: _encodeSymbol,\n    });\n  }\n\n  decodeUii(uii: string) {\n    return uii.split(_encodeSymbol)[0];\n  }\n\n  /**\n   * get a main call session in some call session with some uii\n   * @param uii call uii\n   */\n  getMainId(uii: string) {\n    return this.encodeUii({\n      sessionId: '1',\n      uii,\n    });\n  }\n\n  rejectDirectAgentTransferCall(uii: string) {\n    this._sdk.rejectDirectAgentXfer(this.decodeUii(uii));\n  }\n\n  coldDirectAgentTransfer(targetAgentId: string) {\n    this._sdk.coldDirectAgentXfer(targetAgentId);\n  }\n\n  warmDirectAgentTransfer(targetAgentId: string) {\n    this._sdk.warmDirectAgentXfer(targetAgentId);\n  }\n\n  sendVoicemailDirectAgentTransfer(targetAgentId: string) {\n    this._sdk.voicemailDirectAgentXfer(targetAgentId);\n  }\n\n  cancelDirectAgentTransfer(targetAgentId: string) {\n    this._sdk.cancelDirectAgentXfer(targetAgentId);\n  }\n\n  setAgentState(agentState: string, agentAuxState: string) {\n    return this._sdk.setAgentState(agentState, agentAuxState);\n  }\n\n  private _multiLoginRequest() {\n    return new Promise<any>((resolve, reject) => {\n      this._sdk.multiLoginRequest();\n      this.on(EvCallbackTypes.LOGIN, (data) => {\n        if (data.status === 'SUCCESS') {\n          resolve(data);\n        } else {\n          reject(data);\n        }\n      });\n      this.on(EvCallbackTypes.GENERIC_NOTIFICATION, (data) => {\n        if (data.messageCode === '-99') {\n          reject(data);\n        }\n      });\n    });\n  }\n\n  async multiLoginRequest() {\n    // temp solution, and wait for ev backend enhancement.\n    try {\n      await waitUntilTo(() => this._multiLoginRequest(), { timeout: 30000 });\n    } catch (error) {\n      throw new Error('_multiLoginRequest fail or 30s timeout');\n    }\n  }\n\n  /**\n   * WebRTC related method\n   */\n  sipInit() {\n    this._sdk.sipInit();\n  }\n\n  sipAnswer() {\n    this._sdk.sipAnswer();\n  }\n\n  sipRegister() {\n    this._sdk.sipRegister();\n  }\n\n  sipTerminate() {\n    this._sdk.sipTerminate();\n  }\n\n  sipHangUp() {\n    this._sdk.sipHangUp();\n  }\n\n  sipReject() {\n    this._sdk.sipReject();\n  }\n\n  sipSendDTMF(dtmf: string) {\n    this._sdk.sipSendDTMF(dtmf);\n  }\n\n  sipToggleMute(state: boolean) {\n    this._sdk.sipToggleMute(state);\n  }\n\n  /**\n   * AgentScript related method\n   */\n  getScript(scriptId: string, version: string) {\n    return new Promise<EvScriptResponse>((resolve, reject) => {\n      this._sdk.getScript(scriptId, version, (res: EvScriptResponse) => {\n        if (res.status) {\n          resolve(res);\n        }\n      });\n    });\n  }\n\n  async saveScriptResult(\n    uii: string,\n    scriptId: string,\n    jsonResult: EvAgentScriptResult,\n  ) {\n    this._sdk.saveScriptResult(uii, scriptId, jsonResult);\n\n    return jsonResult;\n  }\n\n  /**\n   * GET - /voice/api/v1/agent/:accountId/knowledgeBaseGroups\n      params:\n      accountId: AgentSvc.agentSettings.accountId,\n      guid: AgentSvc.agentSettings.guid,\n      knowledgeBaseGroupIds: knowledgeBaseGroupIds\n\n      knowledgeBaseGroupIds = comma list of all groups you care about\n   */\n  async getKnowledgeBaseGroups(knowledgeBaseGroupIds: number[]) {\n    this.getRefreshedToken();\n\n    const uiModel = this._sdk._getUIModel().getInstance();\n    const HttpService = this._sdk._HttpService;\n\n    const agentSettings: EvAgentSettings = this._sdk.getAgentSettings();\n    const engageAccessToken = `Bearer ${uiModel.authenticateRequest.engageAccessToken}`;\n\n    try {\n      const { status, response } = await new HttpService(\n        `${uiModel.authHost}/voice/api/v1/`,\n      ).httpGet(`agent/${agentSettings.accountId}/knowledgeBaseGroups`, {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: engageAccessToken,\n        },\n        queryParams: {\n          guid: agentSettings.guid,\n          knowledgeBaseGroupIds,\n        },\n      });\n\n      if (status === 200) {\n        return JSON.parse(response);\n      }\n    } catch (error) {\n      console.log('getKnowledgeBaseGroups fail');\n    }\n    return null;\n  }\n}\n\nexport { EvClient };\n"],"mappings":"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"}