{"version":3,"sources":["lib/time.ts"],"names":["polling","fn","interval","waitWithCheck","timeout","Promise","race","_","reject","setTimeout","Error","waitForSubscribe"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;AAEO,IAAMA,OAAO;AAAA,qEAAG,iBACrBC,EADqB,EAErBC,QAFqB;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIjB,OAAOD,EAAP,KAAc,UAJG;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAKXA,EAAE,EALS;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAMf,uBAAMC,QAAN,CANe;;AAAA;AAAA;AAAA,mBAOfF,OAAO,CAACC,EAAD,EAAKC,QAAL,CAPQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAPF,OAAO;AAAA;AAAA;AAAA,GAAb;;;;AAUA,IAAMG,aAAa;AAAA,sEAAG,kBAC3BF,EAD2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,+EAEc,EAFd,yBAEzBC,QAFyB,EAEzBA,QAFyB,+BAEd,GAFc,yCAETE,OAFS,EAETA,OAFS,8BAEC,OAAO,CAFR;;AAAA,kBAIvB,OAAOH,EAAP,KAAc,UAJS;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAKrBI,OAAO,CAACC,IAAR,CAAmB,CACvBN,OAAO,CAACC,EAAD,EAAKC,QAAL,CADgB,EAEvB,IAAIG,OAAJ,CAAkB,UAACE,CAAD,EAAIC,MAAJ;AAAA,qBAChBC,UAAU,CAAC,YAAM;AACfD,gBAAAA,MAAM,CAAC,IAAIE,KAAJ,WAAaN,OAAb,uBAAD,CAAN;AACD,eAFS,EAEPA,OAFO,CADM;AAAA,aAAlB,CAFuB,CAAnB,CALqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbD,aAAa;AAAA;AAAA;AAAA,GAAnB;;;;AAeA,IAAMQ,gBAAgB;AAAA,sEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACxB,uBAAM,MAAM,IAAZ,CADwB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAhBA,gBAAgB;AAAA;AAAA;AAAA,GAAtB","sourcesContent":["import sleep from './sleep';\n\nexport const polling = async (\n  fn: () => boolean | Promise<boolean>,\n  interval: number,\n) => {\n  if (typeof fn !== 'function') return;\n  if (await fn()) return;\n  await sleep(interval);\n  await polling(fn, interval);\n};\n\nexport const waitWithCheck = async (\n  fn: () => boolean | Promise<boolean>,\n  { interval = 100, timeout = 1000 * 5 } = {},\n) => {\n  if (typeof fn !== 'function') return;\n  await Promise.race<void>([\n    polling(fn, interval),\n    new Promise<void>((_, reject) =>\n      setTimeout(() => {\n        reject(new Error(`${timeout} ms timeout error`));\n      }, timeout),\n    ),\n  ]);\n};\n\nexport const waitForSubscribe = async () => {\n  await sleep(2.5 * 1000);\n};\n"],"file":"time.js"}