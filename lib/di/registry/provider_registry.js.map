{"version":3,"sources":["lib/di/registry/provider_registry.ts"],"names":["ProviderRegistry","_map","Map","token","has","get","providers","set","resolved","clear"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;AAEA;AACA;AACA;AACA;IACqBA,gB;AACnB,8BAAc;AAAA;;AACZ,SAAKC,IAAL,GAAY,IAAIC,GAAJ,EAAZ;AACD;;;;wBAEGC,K,EAAO;AACT,UAAI,CAAC,KAAKF,IAAL,CAAUG,GAAV,CAAcD,KAAd,CAAL,EAA2B;AACzB,cAAM,kDAA+BA,KAA/B,2BAAN;AACD;;AACD,aAAO,KAAKF,IAAL,CAAUI,GAAV,CAAcF,KAAd,EAAqBG,SAA5B;AACD;;;wBAEGH,K,EAAOG,S,EAAW;AACpB,UAAI,KAAKL,IAAL,CAAUG,GAAV,CAAcD,KAAd,CAAJ,EAA0B;AACxB,cAAM,iDAA8BA,KAA9B,YAAN;AACD;;AACD,aAAO,KAAKF,IAAL,CAAUM,GAAV,CAAcJ,KAAd,EAAqB;AAAEG,QAAAA,SAAS,EAATA,SAAF;AAAaE,QAAAA,QAAQ,EAAE;AAAvB,OAArB,CAAP;AACD;;;6BAEQL,K,EAAO;AACd,aAAO,CAAC,CAAC,KAAKF,IAAL,CAAUI,GAAV,CAAcF,KAAd,EAAqBK,QAA9B;AACD;;;4BAEOL,K,EAAOG,S,EAAW;AACxB,UAAI,CAAC,KAAKL,IAAL,CAAUG,GAAV,CAAcD,KAAd,CAAL,EAA2B;AACzB,cAAM,gEACiCA,KADjC,+BAAN;AAGD;;AACD,WAAKF,IAAL,CAAUM,GAAV,CAAcJ,KAAd,EAAqB;AAAEG,QAAAA,SAAS,EAATA,SAAF;AAAaE,QAAAA,QAAQ,EAAE;AAAvB,OAArB;AACD;;;wBAEGL,K,EAAO;AACT,aAAO,KAAKF,IAAL,CAAUG,GAAV,CAAcD,KAAd,CAAP;AACD;;;4BAEO;AACN,WAAKF,IAAL,CAAUQ,KAAV;AACD","sourcesContent":["import { DIError } from '../utils/error';\n\n/**\n * ProviderRegistry is a centralized structure for storing provider metadata.\n * It's a map data structure mapping Token to Provider.\n */\nexport default class ProviderRegistry {\n  constructor() {\n    this._map = new Map();\n  }\n\n  get(token) {\n    if (!this._map.has(token)) {\n      throw DIError(`Can not find token [${token}] in ProviderRegistry`);\n    }\n    return this._map.get(token).providers;\n  }\n\n  set(token, providers) {\n    if (this._map.has(token)) {\n      throw DIError(`Can only register [${token}] once`);\n    }\n    return this._map.set(token, { providers, resolved: false });\n  }\n\n  resolved(token) {\n    return !!this._map.get(token).resolved;\n  }\n\n  resolve(token, providers) {\n    if (!this._map.has(token)) {\n      throw DIError(\n        `Cannot resolve provider metadata [${token}]: providers is not found`,\n      );\n    }\n    this._map.set(token, { providers, resolved: true });\n  }\n\n  has(token) {\n    return this._map.has(token);\n  }\n\n  reset() {\n    this._map.clear();\n  }\n}\n"],"file":"provider_registry.js"}