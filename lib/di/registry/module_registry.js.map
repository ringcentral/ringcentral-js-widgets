{"version":3,"file":"module_registry.js","names":["_error","require","_typeof","o","Symbol","iterator","constructor","prototype","_classCallCheck","a","n","TypeError","_defineProperties","e","r","t","length","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","i","_toPrimitive","toPrimitive","call","String","Number","ModuleRegistry","_map","Map","value","get","moduleRef","has","DIError","concat","name","metadata","resolved","set","resolve","entries","keys","reset","clear","exports"],"sources":["lib/di/registry/module_registry.ts"],"sourcesContent":["// @ts-nocheck\nimport { DIError } from '../utils/error';\n\n/**\n * Module registry is used to store module metadata.\n */\nexport default class ModuleRegistry {\n  constructor() {\n    // class reference -> metadata\n    this._map = new Map();\n  }\n\n  get(moduleRef) {\n    if (!this._map.has(moduleRef)) {\n      throw DIError(`Cannot find module [${moduleRef.name}] in ModuleRegistry`);\n    }\n    return this._map.get(moduleRef).metadata;\n  }\n\n  resolved(moduleRef) {\n    return this._map.get(moduleRef).resolved;\n  }\n\n  set(moduleRef, metadata) {\n    if (this._map.has(moduleRef)) {\n      throw DIError(`Can only register module [${moduleRef.name}] once`);\n    }\n    return this._map.set(moduleRef, { metadata, resolved: false });\n  }\n\n  resolve(moduleRef, metadata) {\n    if (!this._map.has(moduleRef)) {\n      throw DIError(\n        `Cannot resolve module metadata [${moduleRef}]: module is not found`,\n      );\n    }\n    this._map.set(moduleRef, {\n      metadata,\n      resolved: true,\n    });\n  }\n\n  has(moduleRef) {\n    return this._map.has(moduleRef);\n  }\n\n  entries() {\n    return this._map.entries();\n  }\n\n  keys() {\n    return this._map.keys();\n  }\n\n  reset() {\n    this._map.clear();\n  }\n}\n"],"mappings":"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","ignoreList":[]}