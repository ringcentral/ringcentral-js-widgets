{"version":3,"file":"index.js","names":["findLocaleFiles","folderPath","filter","isLocaleFile","fs","readdirSync","compileData","sourceLocale","translationLocales","reduce","data","file","locale","formatLocale","replace","indexOf","rawContent","readFileSync","path","resolve","files","parseLocaleFile","compileLocaleData","sourceFolder","dirname","findLoaderFiles"],"sources":["lib/compileLocaleData/index.js"],"sourcesContent":["import fs from 'fs-extra';\nimport path from 'path';\nimport { filter, reduce } from 'ramda';\nimport formatLocale from '@ringcentral-integration/i18n/lib/formatLocale';\nimport isLocaleFile from '../isLocaleFile';\nimport findLoaderFiles from '../findLoaderFiles';\nimport parseLocaleFile from '../parseLocaleFile';\n\nexport function findLocaleFiles(folderPath) {\n  return filter(isLocaleFile, fs.readdirSync(folderPath));\n}\n\nexport function compileData({ folderPath, sourceLocale, translationLocales }) {\n  return reduce(\n    (data, file) => {\n      const locale = formatLocale(file.replace(/\\.(js|ts|json)$/i, ''));\n      if (locale === sourceLocale || translationLocales.indexOf(locale) > -1) {\n        const rawContent = fs.readFileSync(\n          path.resolve(folderPath, file),\n          'utf8',\n        );\n        data.files[locale] = {\n          file,\n          locale,\n          rawContent,\n          ...parseLocaleFile(rawContent),\n        };\n      }\n      return data;\n    },\n    {\n      path: folderPath,\n      files: {},\n    },\n    findLocaleFiles(folderPath),\n  );\n}\n\nexport default function compileLocaleData({\n  sourceFolder,\n  sourceLocale,\n  translationLocales,\n}) {\n  return reduce(\n    (data, file) => {\n      const folderPath = path.resolve(path.dirname(file));\n      data[folderPath] = compileData({\n        folderPath,\n        sourceLocale,\n        translationLocales,\n      });\n      return data;\n    },\n    {},\n    findLoaderFiles(sourceFolder),\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;AAEO,SAASA,eAAT,CAAyBC,UAAzB,EAAqC;EAC1C,OAAO,IAAAC,aAAA,EAAOC,wBAAP,EAAqBC,mBAAA,CAAGC,WAAH,CAAeJ,UAAf,CAArB,CAAP;AACD;;AAEM,SAASK,WAAT,OAAuE;EAAA,IAAhDL,UAAgD,QAAhDA,UAAgD;EAAA,IAApCM,YAAoC,QAApCA,YAAoC;EAAA,IAAtBC,kBAAsB,QAAtBA,kBAAsB;EAC5E,OAAO,IAAAC,aAAA,EACL,UAACC,IAAD,EAAOC,IAAP,EAAgB;IACd,IAAMC,MAAM,GAAG,IAAAC,wBAAA,EAAaF,IAAI,CAACG,OAAL,CAAa,kBAAb,EAAiC,EAAjC,CAAb,CAAf;;IACA,IAAIF,MAAM,KAAKL,YAAX,IAA2BC,kBAAkB,CAACO,OAAnB,CAA2BH,MAA3B,IAAqC,CAAC,CAArE,EAAwE;MACtE,IAAMI,UAAU,GAAGZ,mBAAA,CAAGa,YAAH,CACjBC,gBAAA,CAAKC,OAAL,CAAalB,UAAb,EAAyBU,IAAzB,CADiB,EAEjB,MAFiB,CAAnB;;MAIAD,IAAI,CAACU,KAAL,CAAWR,MAAX;QACED,IAAI,EAAJA,IADF;QAEEC,MAAM,EAANA,MAFF;QAGEI,UAAU,EAAVA;MAHF,GAIK,IAAAK,2BAAA,EAAgBL,UAAhB,CAJL;IAMD;;IACD,OAAON,IAAP;EACD,CAhBI,EAiBL;IACEQ,IAAI,EAAEjB,UADR;IAEEmB,KAAK,EAAE;EAFT,CAjBK,EAqBLpB,eAAe,CAACC,UAAD,CArBV,CAAP;AAuBD;;AAEc,SAASqB,iBAAT,QAIZ;EAAA,IAHDC,YAGC,SAHDA,YAGC;EAAA,IAFDhB,YAEC,SAFDA,YAEC;EAAA,IADDC,kBACC,SADDA,kBACC;EACD,OAAO,IAAAC,aAAA,EACL,UAACC,IAAD,EAAOC,IAAP,EAAgB;IACd,IAAMV,UAAU,GAAGiB,gBAAA,CAAKC,OAAL,CAAaD,gBAAA,CAAKM,OAAL,CAAab,IAAb,CAAb,CAAnB;;IACAD,IAAI,CAACT,UAAD,CAAJ,GAAmBK,WAAW,CAAC;MAC7BL,UAAU,EAAVA,UAD6B;MAE7BM,YAAY,EAAZA,YAF6B;MAG7BC,kBAAkB,EAAlBA;IAH6B,CAAD,CAA9B;IAKA,OAAOE,IAAP;EACD,CATI,EAUL,EAVK,EAWL,IAAAe,2BAAA,EAAgBF,YAAhB,CAXK,CAAP;AAaD"}