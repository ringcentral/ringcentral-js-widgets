{"version":3,"file":"index.js","names":["module","exports","localeLoader","content","callback","async","options","loaderUtils","getOptions","supportedLocales","isLoaderFile","fs","readdir","context","files","filter","f","isLocaleFile","localeFilter","generateLoaderContent","chunk","noChunks"],"sources":["lib/localeLoader/index.js"],"sourcesContent":["import fs from 'fs-extra';\nimport loaderUtils from 'loader-utils';\nimport generateLoaderContent from '../generateLoaderContent';\nimport isLocaleFile, { localeFilter } from '../isLocaleFile';\nimport isLoaderFile, { noChunks } from '../isLoaderFile';\n\nmodule.exports = function localeLoader(content) {\n  const callback = this.async();\n  const options = loaderUtils.getOptions(this) || {};\n  const supportedLocales = options.supportedLocales || [];\n  if (isLoaderFile(content)) {\n    (async () => {\n      const files = (await fs.readdir(this.context))\n        .filter((f) => isLocaleFile(f))\n        .filter(localeFilter(supportedLocales));\n      callback(\n        null,\n        generateLoaderContent({\n          files,\n          chunk: !noChunks(content),\n          supportedLocales,\n        }),\n      );\n    })();\n  } else {\n    callback(null, content);\n  }\n};\n"],"mappings":";;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,SAASC,YAAT,CAAsBC,OAAtB,EAA+B;EAAA;;EAC9C,IAAMC,QAAQ,GAAG,KAAKC,KAAL,EAAjB;EACA,IAAMC,OAAO,GAAGC,uBAAA,CAAYC,UAAZ,CAAuB,IAAvB,KAAgC,EAAhD;EACA,IAAMC,gBAAgB,GAAGH,OAAO,CAACG,gBAAR,IAA4B,EAArD;;EACA,IAAI,IAAAC,wBAAA,EAAaP,OAAb,CAAJ,EAA2B;IACzB,wDAAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACsBQ,mBAAA,CAAGC,OAAH,CAAW,KAAI,CAACC,OAAhB,CADtB;;YAAA;cACOC,KADP,iBAEIC,MAFJ,CAEW,UAACC,CAAD;gBAAA,OAAO,IAAAC,wBAAA,EAAaD,CAAb,CAAP;cAAA,CAFX,EAGID,MAHJ,CAGW,IAAAG,0BAAA,EAAaT,gBAAb,CAHX;cAICL,QAAQ,CACN,IADM,EAEN,IAAAe,iCAAA,EAAsB;gBACpBL,KAAK,EAALA,KADoB;gBAEpBM,KAAK,EAAE,CAAC,IAAAC,sBAAA,EAASlB,OAAT,CAFY;gBAGpBM,gBAAgB,EAAhBA;cAHoB,CAAtB,CAFM,CAAR;;YAJD;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAD;EAaD,CAdD,MAcO;IACLL,QAAQ,CAAC,IAAD,EAAOD,OAAP,CAAR;EACD;AACF,CArBD"}