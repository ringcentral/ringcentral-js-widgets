{"version":3,"file":"index.js","names":["_fsExtra","_interopRequireDefault","require","_loaderUtils","_generateLoaderContent","_isLocaleFile","_interopRequireWildcard","_isLoaderFile","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","module","exports","localeLoader","content","_options$chunk","_this","callback","async","options","loaderUtils","getOptions","supportedLocales","chunk","noChunks","isLoaderFile","regeneratorRuntime","mark","_callee","files","wrap","_callee$","_context","prev","next","fs","readdir","context","sent","filter","f","isLocaleFile","localeFilter","generateLoaderContent","stop"],"sources":["lib/localeLoader/index.js"],"sourcesContent":["import fs from 'fs-extra';\nimport loaderUtils from 'loader-utils';\nimport generateLoaderContent from '../generateLoaderContent';\nimport isLocaleFile, { localeFilter } from '../isLocaleFile';\nimport isLoaderFile, { noChunks } from '../isLoaderFile';\n\n/**\n *\n * locale loader can work with options like below\n * ```\n * {\n *   loader: '@ringcentral-integration/locale-loader',\n *   options: {\n *     supportedLocales,\n *     chunk,\n *   },\n * }\n * ```\n *\n * - `supportedLocales` to support locales\n * * `chunk`\n *   * be `boolean` will toggle that chunk mode.\n *   * be `function` can be method with `(locale: string) => boolean`, provide you a way to specify which language be chunked.\n *\n * @example\n * ```ts\n * chunk: (local: string) => {\n *   return local !== 'en-US'; // en-US will not be chunked, that will be package into main script directly\n * }\n * ```\n */\nmodule.exports = function localeLoader(content) {\n  const callback = this.async();\n  const options = loaderUtils.getOptions(this) || {};\n  const supportedLocales = options.supportedLocales || [];\n  const chunk = !noChunks(content) && (options.chunk ?? true);\n\n  if (isLoaderFile(content)) {\n    (async () => {\n      const files = (await fs.readdir(this.context))\n        .filter((f) => isLocaleFile(f))\n        .filter(localeFilter(supportedLocales));\n      callback(\n        null,\n        generateLoaderContent({\n          files,\n          chunk,\n          supportedLocales,\n        }),\n      );\n    })();\n  } else {\n    callback(null, content);\n  }\n};\n"],"mappings":"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"}