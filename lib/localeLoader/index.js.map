{"version":3,"file":"index.js","names":["_fsExtra","_interopRequireDefault","require","_loaderUtils","_generateLoaderContent","_isLoaderFile","_interopRequireWildcard","_isLocaleFile","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","asyncGeneratorStep","o","c","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","module","exports","localeLoader","content","_options$chunk","_this","callback","async","options","loaderUtils","getOptions","supportedLocales","chunk","noChunks","isLoaderFile","regeneratorRuntime","mark","_callee","files","wrap","_callee$","_context","prev","next","fs","readdir","context","sent","filter","f","isLocaleFile","localeFilter","generateLoaderContent","stop"],"sources":["lib/localeLoader/index.js"],"sourcesContent":["import fs from 'fs-extra';\nimport loaderUtils from 'loader-utils';\n\nimport generateLoaderContent from '../generateLoaderContent';\nimport isLoaderFile, { noChunks } from '../isLoaderFile';\nimport isLocaleFile, { localeFilter } from '../isLocaleFile';\n\n/**\n *\n * locale loader can work with options like below\n * ```\n * {\n *   loader: '@ringcentral-integration/locale-loader',\n *   options: {\n *     supportedLocales,\n *     chunk,\n *   },\n * }\n * ```\n *\n * - `supportedLocales` to support locales\n * * `chunk`\n *   * be `boolean` will toggle that chunk mode.\n *   * be `function` can be method with `(locale: string) => boolean`, provide you a way to specify which language be chunked.\n *\n * @example\n * ```ts\n * chunk: (local: string) => {\n *   return local !== 'en-US'; // en-US will not be chunked, that will be package into main script directly\n * }\n * ```\n */\nmodule.exports = function localeLoader(content) {\n  const callback = this.async();\n  const options = loaderUtils.getOptions(this) || {};\n  const supportedLocales = options.supportedLocales || [];\n  const chunk = !noChunks(content) && (options.chunk ?? true);\n\n  if (isLoaderFile(content)) {\n    (async () => {\n      const files = (await fs.readdir(this.context))\n        .filter((f) => isLocaleFile(f))\n        .filter(localeFilter(supportedLocales));\n      callback(\n        null,\n        generateLoaderContent({\n          files,\n          chunk,\n          supportedLocales,\n        }),\n      );\n    })();\n  } else {\n    callback(null, content);\n  }\n};\n"],"mappings":"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","ignoreList":[]}