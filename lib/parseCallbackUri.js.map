{"version":3,"file":"parseCallbackUri.js","names":["parseCallbackUri","callbackUri","urlObj","URL","searchParams","URLSearchParams","search","hashParams","hash","replace","get","error","Error","forEach","value","key","query","Object","fromEntries","entries","hashObject","_objectSpread"],"sources":["lib/parseCallbackUri.ts"],"sourcesContent":["/**\n * Parses the callback URI and extracts the query parameters and hash parameters.\n * If the callback URI contains an 'error' parameter, it throws an error with the error message and additional parameters.\n *\n * @param callbackUri - The callback URI to parse.\n * @returns An object containing the query parameters and hash parameters.\n * @throws An error if the callback URI contains an 'error' parameter.\n */\nexport default function parseCallbackUri(callbackUri: string) {\n  const urlObj = new URL(callbackUri);\n  const searchParams = new URLSearchParams(urlObj.search);\n  const hashParams = new URLSearchParams(urlObj.hash.replace(/^#/, ''));\n\n  if (searchParams.get('error')) {\n    const error = new Error(searchParams.get('error')!);\n    searchParams.forEach((value, key) => {\n      (error as any)[key] = value;\n    });\n    throw error;\n  }\n\n  const query = Object.fromEntries(searchParams.entries());\n  const hashObject = Object.fromEntries(hashParams.entries());\n\n  return {\n    ...query,\n    ...hashObject,\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,gBAAgBA,CAACC,WAAmB,EAAE;EAC5D,IAAMC,MAAM,GAAG,IAAIC,GAAG,CAACF,WAAW,CAAC;EACnC,IAAMG,YAAY,GAAG,IAAIC,eAAe,CAACH,MAAM,CAACI,MAAM,CAAC;EACvD,IAAMC,UAAU,GAAG,IAAIF,eAAe,CAACH,MAAM,CAACM,IAAI,CAACC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;EAErE,IAAIL,YAAY,CAACM,GAAG,CAAC,OAAO,CAAC,EAAE;IAC7B,IAAMC,KAAK,GAAG,IAAIC,KAAK,CAACR,YAAY,CAACM,GAAG,CAAC,OAAO,CAAE,CAAC;IACnDN,YAAY,CAACS,OAAO,CAAC,UAACC,KAAK,EAAEC,GAAG,EAAK;MAClCJ,KAAK,CAASI,GAAG,CAAC,GAAGD,KAAK;IAC7B,CAAC,CAAC;IACF,MAAMH,KAAK;EACb;EAEA,IAAMK,KAAK,GAAGC,MAAM,CAACC,WAAW,CAACd,YAAY,CAACe,OAAO,CAAC,CAAC,CAAC;EACxD,IAAMC,UAAU,GAAGH,MAAM,CAACC,WAAW,CAACX,UAAU,CAACY,OAAO,CAAC,CAAC,CAAC;EAE3D,OAAAE,aAAA,CAAAA,aAAA,KACKL,KAAK,GACLI,UAAU;AAEjB","ignoreList":[]}