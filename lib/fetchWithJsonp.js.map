{"version":3,"sources":["lib/fetchWithJsonp.ts"],"names":["callback","fetchWithJsonp","url","Promise","resolve","reject","script","document","createElement","src","onerror","Error","body","removeChild","window","data","appendChild"],"mappings":";;;;;;;;;;;;;AAAA,IAAMA,QAAQ,GAAG,6BAAjB;;AAEO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAIC,GAAJ,EAAoB;AAChD,SAAO,IAAIC,OAAJ,CAAe,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACzC,QAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAF,IAAAA,MAAM,CAACG,GAAP,GAAaP,GAAb;;AACAI,IAAAA,MAAM,CAACI,OAAP,GAAiB,YAAM;AACrBL,MAAAA,MAAM,CAAC,IAAIM,KAAJ,YAAcT,GAAd,0BAAD,CAAN;AACAK,MAAAA,QAAQ,CAACK,IAAT,CAAcC,WAAd,CAA0BP,MAA1B;AACD,KAHD,CAHyC,CAOzC;;;AACCQ,IAAAA,MAAD,CAAgBd,QAAhB,IAA4B,UAACe,IAAD,EAAa;AACvCX,MAAAA,OAAO,CAACW,IAAD,CAAP;AACAR,MAAAA,QAAQ,CAACK,IAAT,CAAcC,WAAd,CAA0BP,MAA1B;AACD,KAHD;;AAIAC,IAAAA,QAAQ,CAACK,IAAT,CAAcI,WAAd,CAA0BV,MAA1B;AACD,GAbM,CAAP;AAcD,CAfM","sourcesContent":["const callback = '__rc_config_data_callback__';\n\nexport const fetchWithJsonp = <T>(url: string) => {\n  return new Promise<T>((resolve, reject) => {\n    const script = document.createElement('script');\n    script.src = url;\n    script.onerror = () => {\n      reject(new Error(`'${url}' jsonp fetch failed`));\n      document.body.removeChild(script);\n    };\n    // TODO: add type\n    (window as any)[callback] = (data: T) => {\n      resolve(data);\n      document.body.removeChild(script);\n    };\n    document.body.appendChild(script);\n  });\n};\n"],"file":"fetchWithJsonp.js"}