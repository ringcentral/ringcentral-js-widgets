{"version":3,"file":"getProxyClientReducer.js","names":["_redux","require","_handleProxyAction","getLastActionReducer","_ref","types","state","arguments","length","undefined","_ref2","type","action","lastAction","dropStates","sync","getActionNumberReducer","_ref3","_ref4","actionNumber","getTargetReducer","_ref5","targetReducer","initModule","_ref6","target","getProxyClientReducer","_ref7","proxyReducer","combineReducers","proxy"],"sources":["lib/proxy/getProxyClientReducer.ts"],"sourcesContent":["import { combineReducers } from 'redux';\n\nimport { dropStates } from './handleProxyAction';\n\nexport function getLastActionReducer({ types }: any) {\n  return (state = null, { type, action, lastAction }: any) => {\n    switch (type) {\n      case types.action:\n        return dropStates(action);\n      case types.sync:\n        return dropStates(lastAction);\n      default:\n        return state;\n    }\n  };\n}\nexport function getActionNumberReducer({ types }: any) {\n  return (state = -1, { type, actionNumber }: any) => {\n    switch (type) {\n      case types.action:\n      case types.sync:\n        return actionNumber ?? state;\n      default:\n        return state;\n    }\n  };\n}\nexport function getTargetReducer({ targetReducer, types }: any) {\n  return (\n    state = targetReducer(undefined, { type: types.initModule }),\n    { type, target, action }: any,\n  ) => {\n    switch (type) {\n      case types.action:\n        return targetReducer(state, action);\n      case types.sync:\n        return target;\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getProxyClientReducer({\n  targetReducer,\n  proxyReducer,\n  types,\n}: any) {\n  return combineReducers({\n    target: getTargetReducer({ targetReducer, types }),\n    proxy: proxyReducer,\n    lastAction: getLastActionReducer({ types }),\n    actionNumber: getActionNumberReducer({ types }),\n  });\n}\n"],"mappings":"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","ignoreList":[]}