{"version":3,"sources":["lib/proxy/getProxyClientReducer.ts"],"names":["getLastActionReducer","types","state","type","action","lastAction","sync","getActionNumberReducer","actionNumber","getTargetReducer","targetReducer","undefined","initModule","target","getProxyClientReducer","proxyReducer","proxy"],"mappings":";;;;;;;;;;;;AAAA;;AACA;;AAEO,SAASA,oBAAT,OAAyC;AAAA,MAATC,KAAS,QAATA,KAAS;AAC9C,SAAO,YAAgD;AAAA,QAA/CC,KAA+C,uEAAvC,IAAuC;;AAAA;AAAA,QAA/BC,IAA+B,SAA/BA,IAA+B;AAAA,QAAzBC,MAAyB,SAAzBA,MAAyB;AAAA,QAAjBC,UAAiB,SAAjBA,UAAiB;;AACrD,YAAQF,IAAR;AACE,WAAKF,KAAK,CAACG,MAAX;AACE,eAAO,mCAAWA,MAAX,CAAP;;AACF,WAAKH,KAAK,CAACK,IAAX;AACE,eAAO,mCAAWD,UAAX,CAAP;;AACF;AACE,eAAOH,KAAP;AANJ;AAQD,GATD;AAUD;;AACM,SAASK,sBAAT,QAA2C;AAAA,MAATN,KAAS,SAATA,KAAS;AAChD,SAAO,YAAwC;AAAA,QAAvCC,KAAuC,uEAA/B,CAAC,CAA8B;;AAAA;AAAA,QAAzBC,IAAyB,SAAzBA,IAAyB;AAAA,QAAnBK,YAAmB,SAAnBA,YAAmB;;AAC7C,YAAQL,IAAR;AACE,WAAKF,KAAK,CAACG,MAAX;AACA,WAAKH,KAAK,CAACK,IAAX;AACE,eAAOE,YAAP,aAAOA,YAAP,cAAOA,YAAP,GAAuBN,KAAvB;;AACF;AACE,eAAOA,KAAP;AALJ;AAOD,GARD;AASD;;AACM,SAASO,gBAAT,QAAoD;AAAA,MAAxBC,aAAwB,SAAxBA,aAAwB;AAAA,MAATT,KAAS,SAATA,KAAS;AACzD,SAAO,YAGF;AAAA,QAFHC,KAEG,uEAFKQ,aAAa,CAACC,SAAD,EAAY;AAAER,MAAAA,IAAI,EAAEF,KAAK,CAACW;AAAd,KAAZ,CAElB;;AAAA;AAAA,QADDT,IACC,SADDA,IACC;AAAA,QADKU,MACL,SADKA,MACL;AAAA,QADaT,MACb,SADaA,MACb;;AACH,YAAQD,IAAR;AACE,WAAKF,KAAK,CAACG,MAAX;AACE,eAAOM,aAAa,CAACR,KAAD,EAAQE,MAAR,CAApB;;AACF,WAAKH,KAAK,CAACK,IAAX;AACE,eAAOO,MAAP;;AACF;AACE,eAAOX,KAAP;AANJ;AAQD,GAZD;AAaD;;AAEc,SAASY,qBAAT,QAIZ;AAAA,MAHDJ,aAGC,SAHDA,aAGC;AAAA,MAFDK,YAEC,SAFDA,YAEC;AAAA,MADDd,KACC,SADDA,KACC;AACD,SAAO,4BAAgB;AACrBY,IAAAA,MAAM,EAAEJ,gBAAgB,CAAC;AAAEC,MAAAA,aAAa,EAAbA,aAAF;AAAiBT,MAAAA,KAAK,EAALA;AAAjB,KAAD,CADH;AAErBe,IAAAA,KAAK,EAAED,YAFc;AAGrBV,IAAAA,UAAU,EAAEL,oBAAoB,CAAC;AAAEC,MAAAA,KAAK,EAALA;AAAF,KAAD,CAHX;AAIrBO,IAAAA,YAAY,EAAED,sBAAsB,CAAC;AAAEN,MAAAA,KAAK,EAALA;AAAF,KAAD;AAJf,GAAhB,CAAP;AAMD","sourcesContent":["import { combineReducers } from 'redux';\nimport { dropStates } from './handleProxyAction';\n\nexport function getLastActionReducer({ types }) {\n  return (state = null, { type, action, lastAction }) => {\n    switch (type) {\n      case types.action:\n        return dropStates(action);\n      case types.sync:\n        return dropStates(lastAction);\n      default:\n        return state;\n    }\n  };\n}\nexport function getActionNumberReducer({ types }) {\n  return (state = -1, { type, actionNumber }) => {\n    switch (type) {\n      case types.action:\n      case types.sync:\n        return actionNumber ?? state;\n      default:\n        return state;\n    }\n  };\n}\nexport function getTargetReducer({ targetReducer, types }) {\n  return (\n    state = targetReducer(undefined, { type: types.initModule }),\n    { type, target, action },\n  ) => {\n    switch (type) {\n      case types.action:\n        return targetReducer(state, action);\n      case types.sync:\n        return target;\n      default:\n        return state;\n    }\n  };\n}\n\nexport default function getProxyClientReducer({\n  targetReducer,\n  proxyReducer,\n  types,\n}) {\n  return combineReducers({\n    target: getTargetReducer({ targetReducer, types }),\n    proxy: proxyReducer,\n    lastAction: getLastActionReducer({ types }),\n    actionNumber: getActionNumberReducer({ types }),\n  });\n}\n"],"file":"getProxyClientReducer.js"}