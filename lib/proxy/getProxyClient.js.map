{"version":3,"file":"getProxyClient.js","names":["uuid","_interopRequireWildcard","require","_RcModule2","_interopRequireDefault","_ensureExist","_baseActionTypes","_getProxyClientReducer","_handleProxyAction","e","__esModule","_getRequireWildcardCache","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","asyncGeneratorStep","o","c","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","_objectSpread","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","configurable","writable","_objectWithoutProperties","_objectWithoutPropertiesLoose","s","includes","propertyIsEnumerable","_classCallCheck","TypeError","_defineProperties","key","_createClass","prototype","_toPrimitive","Symbol","toPrimitive","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","defaultVerifyModuleFunc","module","RcModule","getProxyClient","createTarget","verifyModuleFunc","undefined","_RcModule","_class2","_super","_ref","_this","transport","options","actionTypes","baseActionTypes","_id","_syncPromise","_target","_transport","v4","_getState","state","target","_getProxyState","proxy","ensureExist","_setTransport","_loop","subModule","_getStateV2","_reducer","getProxyClientReducer","targetReducer","reducer","proxyReducer","types","_proxyActionTypes","_suppressInit","_sync2","regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","request","payload","type","sync","actionNumber","sent","store","dispatch","t0","stop","_sync","_initialize","initializeProxy","_proxyInitialized","_initialize2","_callee3","_this2","_callee3$","_context3","on","events","_ref2","_callee2","action","_callee2$","_context2","pushStates","_x","initialize"],"sources":["lib/proxy/getProxyClient.ts"],"sourcesContent":["import * as uuid from 'uuid';\n\nimport RcModule from '../RcModule';\nimport ensureExist from '../ensureExist';\n\nimport baseActionTypes from './baseActionTypes';\nimport getProxyClientReducer from './getProxyClientReducer';\nimport { pushStates } from './handleProxyAction';\n\nconst defaultVerifyModuleFunc = (module: any) => module instanceof RcModule;\n\nexport default function getProxyClient(\n  createTarget: any,\n  verifyModuleFunc = defaultVerifyModuleFunc,\n) {\n  return class extends RcModule {\n    _id: any;\n    _syncPromise: any;\n    _target: any;\n    _transport: any;\n    constructor({ transport, ...options }: any) {\n      super({\n        ...options,\n        actionTypes: baseActionTypes,\n      });\n      this._id = uuid.v4();\n      this._target = createTarget({\n        ...options,\n      });\n      // Used by client to dispatch action.\n      // this._target.__proxyAction__ = this.actionTypes.action;\n      this._target._getState = () => this.state.target;\n      this._target._getProxyState = () => this.state.proxy;\n      // this._target = new Target({\n      //   ...options,\n      //   getState: () => this.state.target,\n      //   getProxyState: () => this.state.proxy,\n      // });\n      // @ts-expect-error TS(2345): Argument of type 'string' is not assignable to par... Remove this comment to see the full error message\n      this._transport = ensureExist.call(this, transport, 'transport');\n      this._setTransport(this._target);\n      for (const subModule in this._target) {\n        if (\n          Object.prototype.hasOwnProperty.call(this._target, subModule) &&\n          verifyModuleFunc(this._target[subModule])\n        ) {\n          Object.defineProperty(this, subModule, {\n            configurable: false,\n            enumerable: true,\n            get() {\n              return this._target[subModule];\n            },\n          });\n          // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          this[subModule]._getStateV2 = (state: any, key: any) =>\n            state.target[key];\n        }\n      }\n\n      this._reducer = getProxyClientReducer({\n        targetReducer: this._target.reducer,\n        proxyReducer: this._target.proxyReducer,\n        transport,\n        types: this.actionTypes,\n      });\n    }\n\n    _setTransport(target: any) {\n      target._transport = this._transport;\n      target._proxyActionTypes = this.actionTypes;\n      target._suppressInit = true;\n      for (const subModule in target) {\n        if (\n          Object.prototype.hasOwnProperty.call(target, subModule) &&\n          verifyModuleFunc(target[subModule])\n        ) {\n          target[subModule]._transport = this._transport;\n          target[subModule]._proxyActionTypes = this.actionTypes;\n          target[subModule]._suppressInit = true;\n        }\n      }\n    }\n\n    async _sync() {\n      try {\n        const result = await this._transport.request({\n          payload: {\n            type: this.actionTypes.sync,\n            actionNumber: this.state.actionNumber,\n          },\n        });\n        this.store.dispatch({\n          ...result,\n          type: this.actionTypes.sync,\n        });\n      } catch (_) {\n        /* Ignore */\n      }\n      this._syncPromise = null;\n    }\n\n    sync() {\n      if (!this._syncPromise) {\n        this._syncPromise = this._sync();\n      }\n      return this._syncPromise;\n    }\n\n    _initialize(target: any) {\n      if (\n        typeof target.initializeProxy === 'function' &&\n        !target._proxyInitialized\n      ) {\n        target._proxyInitialized = true;\n        target.initializeProxy();\n      }\n      for (const subModule in target) {\n        if (\n          Object.prototype.hasOwnProperty.call(target, subModule) &&\n          verifyModuleFunc(target[subModule]) &&\n          typeof target[subModule].initializeProxy === 'function' &&\n          !target[subModule]._proxyInitialized\n        ) {\n          target[subModule]._proxyInitialized = true;\n          target[subModule].initializeProxy();\n        }\n      }\n    }\n\n    // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n    async initialize() {\n      // initialize the instance before sync to avoid history object from\n      // becoming out of sync\n      this._initialize(this._target);\n      this._transport.on(this._transport.events.push, async (payload: any) => {\n        if (payload.type === this.actionTypes.action) {\n          if (this._syncPromise) await this._syncPromise;\n          if (payload.actionNumber === this.state.actionNumber + 1) {\n            const action = pushStates(this._target, payload.action);\n            this.store.dispatch({\n              ...payload,\n              action,\n              type: this.actionTypes.action,\n            });\n          } else {\n            await this.sync();\n          }\n        }\n      });\n      await this.sync();\n    }\n  };\n}\n"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,IAAA,GAAAC,uBAAA,CAAAC,OAAA;AAEA,IAAAC,UAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,YAAA,GAAAD,sBAAA,CAAAF,OAAA;AAEA,IAAAI,gBAAA,GAAAF,sBAAA,CAAAF,OAAA;AACA,IAAAK,sBAAA,GAAAH,sBAAA,CAAAF,OAAA;AACA,IAAAM,kBAAA,GAAAN,OAAA;AAAiD,SAAAE,uBAAAK,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAAA,SAAAE,yBAAAF,CAAA,6BAAAG,OAAA,mBAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAD,wBAAA,YAAAA,yBAAAF,CAAA,WAAAA,CAAA,GAAAK,CAAA,GAAAD,CAAA,KAAAJ,CAAA;AAAA,SAAAR,wBAAAQ,CAAA,EAAAI,CAAA,SAAAA,CAAA,IAAAJ,CAAA,IAAAA,CAAA,CAAAC,UAAA,SAAAD,CAAA,eAAAA,CAAA,gBAAAM,OAAA,CAAAN,CAAA,0BAAAA,CAAA,sBAAAA,CAAA,QAAAK,CAAA,GAAAH,wBAAA,CAAAE,CAAA,OAAAC,CAAA,IAAAA,CAAA,CAAAE,GAAA,CAAAP,CAAA,UAAAK,CAAA,CAAAG,GAAA,CAAAR,CAAA,OAAAS,CAAA,KAAAC,SAAA,UAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,CAAA,IAAAf,CAAA,sBAAAe,CAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAjB,CAAA,EAAAe,CAAA,SAAAG,CAAA,GAAAP,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAd,CAAA,EAAAe,CAAA,UAAAG,CAAA,KAAAA,CAAA,CAAAV,GAAA,IAAAU,CAAA,CAAAC,GAAA,IAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAG,CAAA,IAAAT,CAAA,CAAAM,CAAA,IAAAf,CAAA,CAAAe,CAAA,cAAAN,CAAA,cAAAT,CAAA,EAAAK,CAAA,IAAAA,CAAA,CAAAc,GAAA,CAAAnB,CAAA,EAAAS,CAAA,GAAAA,CAAA;AAAA,SAAAW,mBAAAX,CAAA,EAAAJ,CAAA,EAAAL,CAAA,EAAAI,CAAA,EAAAiB,CAAA,EAAAV,CAAA,EAAAW,CAAA,cAAAJ,CAAA,GAAAT,CAAA,CAAAE,CAAA,EAAAW,CAAA,GAAAP,CAAA,GAAAG,CAAA,CAAAK,KAAA,WAAAd,CAAA,gBAAAT,CAAA,CAAAS,CAAA,KAAAS,CAAA,CAAAM,IAAA,GAAAnB,CAAA,CAAAU,CAAA,IAAAU,OAAA,CAAAC,OAAA,CAAAX,CAAA,EAAAY,IAAA,CAAAvB,CAAA,EAAAiB,CAAA;AAAA,SAAAO,kBAAAnB,CAAA,6BAAAJ,CAAA,SAAAL,CAAA,GAAA6B,SAAA,aAAAJ,OAAA,WAAArB,CAAA,EAAAiB,CAAA,QAAAV,CAAA,GAAAF,CAAA,CAAAqB,KAAA,CAAAzB,CAAA,EAAAL,CAAA,YAAA+B,MAAAtB,CAAA,IAAAW,kBAAA,CAAAT,CAAA,EAAAP,CAAA,EAAAiB,CAAA,EAAAU,KAAA,EAAAC,MAAA,UAAAvB,CAAA,cAAAuB,OAAAvB,CAAA,IAAAW,kBAAA,CAAAT,CAAA,EAAAP,CAAA,EAAAiB,CAAA,EAAAU,KAAA,EAAAC,MAAA,WAAAvB,CAAA,KAAAsB,KAAA;AAAA,SAAAE,QAAAjC,CAAA,EAAAI,CAAA,QAAAC,CAAA,GAAAO,MAAA,CAAAsB,IAAA,CAAAlC,CAAA,OAAAY,MAAA,CAAAuB,qBAAA,QAAAd,CAAA,GAAAT,MAAA,CAAAuB,qBAAA,CAAAnC,CAAA,GAAAI,CAAA,KAAAiB,CAAA,GAAAA,CAAA,CAAAe,MAAA,WAAAhC,CAAA,WAAAQ,MAAA,CAAAE,wBAAA,CAAAd,CAAA,EAAAI,CAAA,EAAAiC,UAAA,OAAAhC,CAAA,CAAAiC,IAAA,CAAAR,KAAA,CAAAzB,CAAA,EAAAgB,CAAA,YAAAhB,CAAA;AAAA,SAAAkC,cAAAvC,CAAA,aAAAI,CAAA,MAAAA,CAAA,GAAAyB,SAAA,CAAAW,MAAA,EAAApC,CAAA,UAAAC,CAAA,WAAAwB,SAAA,CAAAzB,CAAA,IAAAyB,SAAA,CAAAzB,CAAA,QAAAA,CAAA,OAAA6B,OAAA,CAAArB,MAAA,CAAAP,CAAA,OAAAoC,OAAA,WAAArC,CAAA,IAAAsC,eAAA,CAAA1C,CAAA,EAAAI,CAAA,EAAAC,CAAA,CAAAD,CAAA,SAAAQ,MAAA,CAAA+B,yBAAA,GAAA/B,MAAA,CAAAgC,gBAAA,CAAA5C,CAAA,EAAAY,MAAA,CAAA+B,yBAAA,CAAAtC,CAAA,KAAA4B,OAAA,CAAArB,MAAA,CAAAP,CAAA,GAAAoC,OAAA,WAAArC,CAAA,IAAAQ,MAAA,CAAAC,cAAA,CAAAb,CAAA,EAAAI,CAAA,EAAAQ,MAAA,CAAAE,wBAAA,CAAAT,CAAA,EAAAD,CAAA,iBAAAJ,CAAA;AAAA,SAAA0C,gBAAA1C,CAAA,EAAAI,CAAA,EAAAC,CAAA,YAAAD,CAAA,GAAAyC,cAAA,CAAAzC,CAAA,MAAAJ,CAAA,GAAAY,MAAA,CAAAC,cAAA,CAAAb,CAAA,EAAAI,CAAA,IAAAmB,KAAA,EAAAlB,CAAA,EAAAgC,UAAA,MAAAS,YAAA,MAAAC,QAAA,UAAA/C,CAAA,CAAAI,CAAA,IAAAC,CAAA,EAAAL,CAAA;AAAA,SAAAgD,yBAAAhD,CAAA,EAAAK,CAAA,gBAAAL,CAAA,iBAAAqB,CAAA,EAAAjB,CAAA,EAAAc,CAAA,GAAA+B,6BAAA,CAAAjD,CAAA,EAAAK,CAAA,OAAAO,MAAA,CAAAuB,qBAAA,QAAAe,CAAA,GAAAtC,MAAA,CAAAuB,qBAAA,CAAAnC,CAAA,QAAAI,CAAA,MAAAA,CAAA,GAAA8C,CAAA,CAAAV,MAAA,EAAApC,CAAA,MAAAiB,CAAA,GAAA6B,CAAA,CAAA9C,CAAA,GAAAC,CAAA,CAAA8C,QAAA,CAAA9B,CAAA,QAAA+B,oBAAA,CAAAnC,IAAA,CAAAjB,CAAA,EAAAqB,CAAA,MAAAH,CAAA,CAAAG,CAAA,IAAArB,CAAA,CAAAqB,CAAA,eAAAH,CAAA;AAAA,SAAA+B,8BAAA7C,CAAA,EAAAJ,CAAA,gBAAAI,CAAA,iBAAAC,CAAA,gBAAAI,CAAA,IAAAL,CAAA,WAAAY,cAAA,CAAAC,IAAA,CAAAb,CAAA,EAAAK,CAAA,SAAAT,CAAA,CAAAmD,QAAA,CAAA1C,CAAA,aAAAJ,CAAA,CAAAI,CAAA,IAAAL,CAAA,CAAAK,CAAA,cAAAJ,CAAA;AAAA,SAAAgD,gBAAA1C,CAAA,EAAAF,CAAA,UAAAE,CAAA,YAAAF,CAAA,aAAA6C,SAAA;AAAA,SAAAC,kBAAAvD,CAAA,EAAAI,CAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAD,CAAA,CAAAoC,MAAA,EAAAnC,CAAA,UAAAgB,CAAA,GAAAjB,CAAA,CAAAC,CAAA,GAAAgB,CAAA,CAAAgB,UAAA,GAAAhB,CAAA,CAAAgB,UAAA,QAAAhB,CAAA,CAAAyB,YAAA,kBAAAzB,CAAA,KAAAA,CAAA,CAAA0B,QAAA,QAAAnC,MAAA,CAAAC,cAAA,CAAAb,CAAA,EAAA6C,cAAA,CAAAxB,CAAA,CAAAmC,GAAA,GAAAnC,CAAA;AAAA,SAAAoC,aAAAzD,CAAA,EAAAI,CAAA,EAAAC,CAAA,WAAAD,CAAA,IAAAmD,iBAAA,CAAAvD,CAAA,CAAA0D,SAAA,EAAAtD,CAAA,GAAAC,CAAA,IAAAkD,iBAAA,CAAAvD,CAAA,EAAAK,CAAA,GAAAO,MAAA,CAAAC,cAAA,CAAAb,CAAA,iBAAA+C,QAAA,SAAA/C,CAAA;AAAA,SAAA6C,eAAAxC,CAAA,QAAAa,CAAA,GAAAyC,YAAA,CAAAtD,CAAA,gCAAAC,OAAA,CAAAY,CAAA,IAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAyC,aAAAtD,CAAA,EAAAD,CAAA,oBAAAE,OAAA,CAAAD,CAAA,MAAAA,CAAA,SAAAA,CAAA,MAAAL,CAAA,GAAAK,CAAA,CAAAuD,MAAA,CAAAC,WAAA,kBAAA7D,CAAA,QAAAkB,CAAA,GAAAlB,CAAA,CAAAiB,IAAA,CAAAZ,CAAA,EAAAD,CAAA,gCAAAE,OAAA,CAAAY,CAAA,UAAAA,CAAA,YAAAoC,SAAA,yEAAAlD,CAAA,GAAA0D,MAAA,GAAAC,MAAA,EAAA1D,CAAA;AAAA,SAAA2D,UAAA3D,CAAA,EAAAL,CAAA,6BAAAA,CAAA,aAAAA,CAAA,YAAAsD,SAAA,wDAAAjD,CAAA,CAAAqD,SAAA,GAAA9C,MAAA,CAAAqD,MAAA,CAAAjE,CAAA,IAAAA,CAAA,CAAA0D,SAAA,IAAAQ,WAAA,IAAA3C,KAAA,EAAAlB,CAAA,EAAA0C,QAAA,MAAAD,YAAA,WAAAlC,MAAA,CAAAC,cAAA,CAAAR,CAAA,iBAAA0C,QAAA,SAAA/C,CAAA,IAAAmE,eAAA,CAAA9D,CAAA,EAAAL,CAAA;AAAA,SAAAmE,gBAAA9D,CAAA,EAAAL,CAAA,WAAAmE,eAAA,GAAAvD,MAAA,CAAAwD,cAAA,GAAAxD,MAAA,CAAAwD,cAAA,CAAAC,IAAA,eAAAhE,CAAA,EAAAL,CAAA,WAAAK,CAAA,CAAAK,SAAA,GAAAV,CAAA,EAAAK,CAAA,KAAA8D,eAAA,CAAA9D,CAAA,EAAAL,CAAA;AAAA,SAAAsE,aAAAjE,CAAA,QAAAD,CAAA,GAAAmE,yBAAA,6BAAAvE,CAAA,EAAAqB,CAAA,GAAAmD,eAAA,CAAAnE,CAAA,OAAAD,CAAA,QAAA8C,CAAA,GAAAsB,eAAA,OAAAN,WAAA,EAAAlE,CAAA,GAAAyE,OAAA,CAAAC,SAAA,CAAArD,CAAA,EAAAQ,SAAA,EAAAqB,CAAA,UAAAlD,CAAA,GAAAqB,CAAA,CAAAS,KAAA,OAAAD,SAAA,UAAA8C,0BAAA,OAAA3E,CAAA;AAAA,SAAA2E,2BAAAtE,CAAA,EAAAL,CAAA,QAAAA,CAAA,iBAAAM,OAAA,CAAAN,CAAA,0BAAAA,CAAA,UAAAA,CAAA,iBAAAA,CAAA,YAAAsD,SAAA,qEAAAsB,sBAAA,CAAAvE,CAAA;AAAA,SAAAuE,uBAAA5E,CAAA,mBAAAA,CAAA,YAAA6E,cAAA,sEAAA7E,CAAA;AAAA,SAAAuE,0BAAA,cAAAlE,CAAA,IAAAyE,OAAA,CAAApB,SAAA,CAAAqB,OAAA,CAAA9D,IAAA,CAAAwD,OAAA,CAAAC,SAAA,CAAAI,OAAA,iCAAAzE,CAAA,aAAAkE,yBAAA,YAAAA,0BAAA,aAAAlE,CAAA;AAAA,SAAAmE,gBAAAnE,CAAA,WAAAmE,eAAA,GAAA5D,MAAA,CAAAwD,cAAA,GAAAxD,MAAA,CAAAoE,cAAA,CAAAX,IAAA,eAAAhE,CAAA,WAAAA,CAAA,CAAAK,SAAA,IAAAE,MAAA,CAAAoE,cAAA,CAAA3E,CAAA,MAAAmE,eAAA,CAAAnE,CAAA;AAEjD,IAAM4E,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAIC,MAAW;EAAA,OAAKA,MAAM,YAAYC,qBAAQ;AAAA;AAE5D,SAASC,cAAcA,CACpCC,YAAiB,EAEjB;EAAA,IADAC,gBAAgB,GAAAzD,SAAA,CAAAW,MAAA,QAAAX,SAAA,QAAA0D,SAAA,GAAA1D,SAAA,MAAGoD,uBAAuB;EAE1C,8BAAAO,SAAA;IAAAxB,SAAA,CAAAyB,OAAA,EAAAD,SAAA;IAAA,IAAAE,MAAA,GAAApB,YAAA,CAAAmB,OAAA;IAKE,SAAAA,QAAAE,IAAA,EAA4C;MAAA,IAAAC,KAAA;MAAA,IAA9BC,SAAS,GAAAF,IAAA,CAATE,SAAS;QAAKC,OAAO,GAAA9C,wBAAA,CAAA2C,IAAA;MAAAtC,eAAA,OAAAoC,OAAA;MACjCG,KAAA,GAAAF,MAAA,CAAAzE,IAAA,OAAAsB,aAAA,CAAAA,aAAA,KACKuD,OAAO;QACVC,WAAW,EAAEC;MAAe;MAC3BJ,KAAA,CARLK,GAAG;MAAAL,KAAA,CACHM,YAAY;MAAAN,KAAA,CACZO,OAAO;MAAAP,KAAA,CACPQ,UAAU;MAMRR,KAAA,CAAKK,GAAG,GAAG1G,IAAI,CAAC8G,EAAE,CAAC,CAAC;MACpBT,KAAA,CAAKO,OAAO,GAAGd,YAAY,CAAA9C,aAAA,KACtBuD,OAAO,CACX,CAAC;MACF;MACA;MACAF,KAAA,CAAKO,OAAO,CAACG,SAAS,GAAG;QAAA,OAAMV,KAAA,CAAKW,KAAK,CAACC,MAAM;MAAA;MAChDZ,KAAA,CAAKO,OAAO,CAACM,cAAc,GAAG;QAAA,OAAMb,KAAA,CAAKW,KAAK,CAACG,KAAK;MAAA;MACpD;MACA;MACA;MACA;MACA;MACA;MACAd,KAAA,CAAKQ,UAAU,GAAGO,uBAAW,CAAC1F,IAAI,CAAA2D,sBAAA,CAAAgB,KAAA,GAAOC,SAAS,EAAE,WAAW,CAAC;MAChED,KAAA,CAAKgB,aAAa,CAAChB,KAAA,CAAKO,OAAO,CAAC;MAAC,IAAAU,KAAA,YAAAA,MACtBC,SAAS;QAClB,IACElG,MAAM,CAAC8C,SAAS,CAAC1C,cAAc,CAACC,IAAI,CAAC2E,KAAA,CAAKO,OAAO,EAAEW,SAAS,CAAC,IAC7DxB,gBAAgB,CAACM,KAAA,CAAKO,OAAO,CAACW,SAAS,CAAC,CAAC,EACzC;UACAlG,MAAM,CAACC,cAAc,CAAA+D,sBAAA,CAAAgB,KAAA,GAAOkB,SAAS,EAAE;YACrChE,YAAY,EAAE,KAAK;YACnBT,UAAU,EAAE,IAAI;YAChB7B,GAAG,WAAAA,IAAA,EAAG;cACJ,OAAO,IAAI,CAAC2F,OAAO,CAACW,SAAS,CAAC;YAChC;UACF,CAAC,CAAC;UACF;UACAlB,KAAA,CAAKkB,SAAS,CAAC,CAACC,WAAW,GAAG,UAACR,KAAU,EAAE/C,GAAQ;YAAA,OACjD+C,KAAK,CAACC,MAAM,CAAChD,GAAG,CAAC;UAAA;QACrB;MAAC;MAfH,KAAK,IAAMsD,SAAS,IAAIlB,KAAA,CAAKO,OAAO,EAAE;QAAAU,KAAA,CAA3BC,SAAS;MAgBpB;MAEAlB,KAAA,CAAKoB,QAAQ,GAAG,IAAAC,iCAAqB,EAAC;QACpCC,aAAa,EAAEtB,KAAA,CAAKO,OAAO,CAACgB,OAAO;QACnCC,YAAY,EAAExB,KAAA,CAAKO,OAAO,CAACiB,YAAY;QACvCvB,SAAS,EAATA,SAAS;QACTwB,KAAK,EAAEzB,KAAA,CAAKG;MACd,CAAC,CAAC;MAAC,OAAAH,KAAA;IACL;IAACnC,YAAA,CAAAgC,OAAA;MAAAjC,GAAA;MAAAjC,KAAA,WAAAqF,cAEaJ,MAAW,EAAE;QACzBA,MAAM,CAACJ,UAAU,GAAG,IAAI,CAACA,UAAU;QACnCI,MAAM,CAACc,iBAAiB,GAAG,IAAI,CAACvB,WAAW;QAC3CS,MAAM,CAACe,aAAa,GAAG,IAAI;QAC3B,KAAK,IAAMT,SAAS,IAAIN,MAAM,EAAE;UAC9B,IACE5F,MAAM,CAAC8C,SAAS,CAAC1C,cAAc,CAACC,IAAI,CAACuF,MAAM,EAAEM,SAAS,CAAC,IACvDxB,gBAAgB,CAACkB,MAAM,CAACM,SAAS,CAAC,CAAC,EACnC;YACAN,MAAM,CAACM,SAAS,CAAC,CAACV,UAAU,GAAG,IAAI,CAACA,UAAU;YAC9CI,MAAM,CAACM,SAAS,CAAC,CAACQ,iBAAiB,GAAG,IAAI,CAACvB,WAAW;YACtDS,MAAM,CAACM,SAAS,CAAC,CAACS,aAAa,GAAG,IAAI;UACxC;QACF;MACF;IAAC;MAAA/D,GAAA;MAAAjC,KAAA;QAAA,IAAAiG,MAAA,GAAA5F,iBAAA,eAAA6F,kBAAA,CAAAC,IAAA,UAAAC,QAAA;UAAA,IAAAC,MAAA;UAAA,OAAAH,kBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA;YAAA;cAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;gBAAA;kBAAAF,QAAA,CAAAC,IAAA;kBAAAD,QAAA,CAAAE,IAAA;kBAAA,OAIwB,IAAI,CAAC7B,UAAU,CAAC8B,OAAO,CAAC;oBAC3CC,OAAO,EAAE;sBACPC,IAAI,EAAE,IAAI,CAACrC,WAAW,CAACsC,IAAI;sBAC3BC,YAAY,EAAE,IAAI,CAAC/B,KAAK,CAAC+B;oBAC3B;kBACF,CAAC,CAAC;gBAAA;kBALIV,MAAM,GAAAG,QAAA,CAAAQ,IAAA;kBAMZ,IAAI,CAACC,KAAK,CAACC,QAAQ,CAAAlG,aAAA,CAAAA,aAAA,KACdqF,MAAM;oBACTQ,IAAI,EAAE,IAAI,CAACrC,WAAW,CAACsC;kBAAI,EAC5B,CAAC;kBAACN,QAAA,CAAAE,IAAA;kBAAA;gBAAA;kBAAAF,QAAA,CAAAC,IAAA;kBAAAD,QAAA,CAAAW,EAAA,GAAAX,QAAA;gBAAA;kBAIL,IAAI,CAAC7B,YAAY,GAAG,IAAI;gBAAC;gBAAA;kBAAA,OAAA6B,QAAA,CAAAY,IAAA;cAAA;YAAA;UAAA,GAAAhB,OAAA;QAAA;QAAA,SAAAiB,MAAA;UAAA,OAAApB,MAAA,CAAA1F,KAAA,OAAAD,SAAA;QAAA;QAAA,OAAA+G,KAAA;MAAA;IAAA;MAAApF,GAAA;MAAAjC,KAAA,WAAA8G,KAAA,EAGpB;QACL,IAAI,CAAC,IAAI,CAACnC,YAAY,EAAE;UACtB,IAAI,CAACA,YAAY,GAAG,IAAI,CAAC0C,KAAK,CAAC,CAAC;QAClC;QACA,OAAO,IAAI,CAAC1C,YAAY;MAC1B;IAAC;MAAA1C,GAAA;MAAAjC,KAAA,WAAAsH,YAEWrC,MAAW,EAAE;QACvB,IACE,OAAOA,MAAM,CAACsC,eAAe,KAAK,UAAU,IAC5C,CAACtC,MAAM,CAACuC,iBAAiB,EACzB;UACAvC,MAAM,CAACuC,iBAAiB,GAAG,IAAI;UAC/BvC,MAAM,CAACsC,eAAe,CAAC,CAAC;QAC1B;QACA,KAAK,IAAMhC,SAAS,IAAIN,MAAM,EAAE;UAC9B,IACE5F,MAAM,CAAC8C,SAAS,CAAC1C,cAAc,CAACC,IAAI,CAACuF,MAAM,EAAEM,SAAS,CAAC,IACvDxB,gBAAgB,CAACkB,MAAM,CAACM,SAAS,CAAC,CAAC,IACnC,OAAON,MAAM,CAACM,SAAS,CAAC,CAACgC,eAAe,KAAK,UAAU,IACvD,CAACtC,MAAM,CAACM,SAAS,CAAC,CAACiC,iBAAiB,EACpC;YACAvC,MAAM,CAACM,SAAS,CAAC,CAACiC,iBAAiB,GAAG,IAAI;YAC1CvC,MAAM,CAACM,SAAS,CAAC,CAACgC,eAAe,CAAC,CAAC;UACrC;QACF;MACF,CAAC,CAED;IAAA;MAAAtF,GAAA;MAAAjC,KAAA;QAAA,IAAAyH,YAAA,GAAApH,iBAAA,eAAA6F,kBAAA,CAAAC,IAAA,UAAAuB,SAAA;UAAA,IAAAC,MAAA;UAAA,OAAAzB,kBAAA,CAAAI,IAAA,UAAAsB,UAAAC,SAAA;YAAA;cAAA,QAAAA,SAAA,CAAApB,IAAA,GAAAoB,SAAA,CAAAnB,IAAA;gBAAA;kBAEE;kBACA;kBACA,IAAI,CAACY,WAAW,CAAC,IAAI,CAAC1C,OAAO,CAAC;kBAC9B,IAAI,CAACC,UAAU,CAACiD,EAAE,CAAC,IAAI,CAACjD,UAAU,CAACkD,MAAM,CAAChH,IAAI;oBAAA,IAAAiH,KAAA,GAAA3H,iBAAA,eAAA6F,kBAAA,CAAAC,IAAA,CAAE,SAAA8B,SAAOrB,OAAY;sBAAA,IAAAsB,MAAA;sBAAA,OAAAhC,kBAAA,CAAAI,IAAA,UAAA6B,UAAAC,SAAA;wBAAA;0BAAA,QAAAA,SAAA,CAAA3B,IAAA,GAAA2B,SAAA,CAAA1B,IAAA;4BAAA;8BAAA,MAC7DE,OAAO,CAACC,IAAI,KAAKc,MAAI,CAACnD,WAAW,CAAC0D,MAAM;gCAAAE,SAAA,CAAA1B,IAAA;gCAAA;8BAAA;8BAAA,KACtCiB,MAAI,CAAChD,YAAY;gCAAAyD,SAAA,CAAA1B,IAAA;gCAAA;8BAAA;8BAAA0B,SAAA,CAAA1B,IAAA;8BAAA,OAAQiB,MAAI,CAAChD,YAAY;4BAAA;8BAAA,MAC1CiC,OAAO,CAACG,YAAY,KAAKY,MAAI,CAAC3C,KAAK,CAAC+B,YAAY,GAAG,CAAC;gCAAAqB,SAAA,CAAA1B,IAAA;gCAAA;8BAAA;8BAChDwB,MAAM,GAAG,IAAAG,6BAAU,EAACV,MAAI,CAAC/C,OAAO,EAAEgC,OAAO,CAACsB,MAAM,CAAC;8BACvDP,MAAI,CAACV,KAAK,CAACC,QAAQ,CAAAlG,aAAA,CAAAA,aAAA,KACd4F,OAAO;gCACVsB,MAAM,EAANA,MAAM;gCACNrB,IAAI,EAAEc,MAAI,CAACnD,WAAW,CAAC0D;8BAAM,EAC9B,CAAC;8BAACE,SAAA,CAAA1B,IAAA;8BAAA;4BAAA;8BAAA0B,SAAA,CAAA1B,IAAA;8BAAA,OAEGiB,MAAI,CAACb,IAAI,CAAC,CAAC;4BAAA;4BAAA;8BAAA,OAAAsB,SAAA,CAAAhB,IAAA;0BAAA;wBAAA;sBAAA,GAAAa,QAAA;oBAAA,CAGtB;oBAAA,iBAAAK,EAAA;sBAAA,OAAAN,KAAA,CAAAzH,KAAA,OAAAD,SAAA;oBAAA;kBAAA,IAAC;kBAACuH,SAAA,CAAAnB,IAAA;kBAAA,OACG,IAAI,CAACI,IAAI,CAAC,CAAC;gBAAA;gBAAA;kBAAA,OAAAe,SAAA,CAAAT,IAAA;cAAA;YAAA;UAAA,GAAAM,QAAA;QAAA;QAAA,SAAAa,WAAA;UAAA,OAAAd,YAAA,CAAAlH,KAAA,OAAAD,SAAA;QAAA;QAAA,OAAAiI,UAAA;MAAA;IAAA;IAAA,OAAArE,OAAA;EAAA,EAtIAN,qBAAQ;AAyI/B","ignoreList":[]}