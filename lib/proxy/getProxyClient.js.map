{"version":3,"file":"getProxyClient.js","names":["_uuid","require","_RcModule2","_interopRequireDefault","_ensureExist","_baseActionTypes","_getProxyClientReducer","_handleProxyAction","_excluded","e","__esModule","_regenerator","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_objectWithoutProperties","_objectWithoutPropertiesLoose","indexOf","propertyIsEnumerable","hasOwnProperty","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","defaultVerifyModuleFunc","module","RcModule","getProxyClient","createTarget","verifyModuleFunc","undefined","_RcModule","_class","_ref","_this","transport","options","actionTypes","baseActionTypes","_id","_syncPromise","_target","_transport","v4","_getState","state","target","_getProxyState","proxy","ensureExist","_setTransport","_loop","subModule","get","_getStateV2","_reducer","getProxyClientReducer","targetReducer","reducer","proxyReducer","types","_proxyActionTypes","_suppressInit","_sync2","_callee","result","_t","_context","request","payload","type","sync","actionNumber","store","dispatch","_sync","_initialize","initializeProxy","_proxyInitialized","_initialize2","_callee3","_this2","_context3","on","events","_ref2","_callee2","action","_context2","pushStates","_x","initialize"],"sources":["lib/proxy/getProxyClient.ts"],"sourcesContent":["import { v4 } from 'uuid';\n\nimport RcModule from '../RcModule';\nimport ensureExist from '../ensureExist';\n\nimport baseActionTypes from './baseActionTypes';\nimport getProxyClientReducer from './getProxyClientReducer';\nimport { pushStates } from './handleProxyAction';\n\nconst defaultVerifyModuleFunc = (module: any) => module instanceof RcModule;\n\nexport default function getProxyClient(\n  createTarget: any,\n  verifyModuleFunc = defaultVerifyModuleFunc,\n) {\n  return class extends RcModule {\n    _id: any;\n    _syncPromise: any;\n    _target: any;\n    _transport: any;\n    constructor({ transport, ...options }: any) {\n      super({\n        ...options,\n        actionTypes: baseActionTypes,\n      });\n      this._id = v4();\n      this._target = createTarget({\n        ...options,\n      });\n      // Used by client to dispatch action.\n      // this._target.__proxyAction__ = this.actionTypes.action;\n      this._target._getState = () => this.state.target;\n      this._target._getProxyState = () => this.state.proxy;\n      // this._target = new Target({\n      //   ...options,\n      //   getState: () => this.state.target,\n      //   getProxyState: () => this.state.proxy,\n      // });\n      // @ts-expect-error TS(2345): Argument of type 'string' is not assignable to par... Remove this comment to see the full error message\n      this._transport = ensureExist.call(this, transport, 'transport');\n      this._setTransport(this._target);\n      for (const subModule in this._target) {\n        if (\n          Object.prototype.hasOwnProperty.call(this._target, subModule) &&\n          verifyModuleFunc(this._target[subModule])\n        ) {\n          Object.defineProperty(this, subModule, {\n            configurable: false,\n            enumerable: true,\n            get() {\n              return this._target[subModule];\n            },\n          });\n          // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          this[subModule]._getStateV2 = (state: any, key: any) =>\n            state.target[key];\n        }\n      }\n\n      this._reducer = getProxyClientReducer({\n        targetReducer: this._target.reducer,\n        proxyReducer: this._target.proxyReducer,\n        transport,\n        types: this.actionTypes,\n      });\n    }\n\n    _setTransport(target: any) {\n      target._transport = this._transport;\n      target._proxyActionTypes = this.actionTypes;\n      target._suppressInit = true;\n      for (const subModule in target) {\n        if (\n          Object.prototype.hasOwnProperty.call(target, subModule) &&\n          verifyModuleFunc(target[subModule])\n        ) {\n          target[subModule]._transport = this._transport;\n          target[subModule]._proxyActionTypes = this.actionTypes;\n          target[subModule]._suppressInit = true;\n        }\n      }\n    }\n\n    async _sync() {\n      try {\n        const result = await this._transport.request({\n          payload: {\n            type: this.actionTypes.sync,\n            actionNumber: this.state.actionNumber,\n          },\n        });\n        this.store.dispatch({\n          ...result,\n          type: this.actionTypes.sync,\n        });\n      } catch (_) {\n        /* Ignore */\n      }\n      this._syncPromise = null;\n    }\n\n    sync() {\n      if (!this._syncPromise) {\n        this._syncPromise = this._sync();\n      }\n      return this._syncPromise;\n    }\n\n    _initialize(target: any) {\n      if (\n        typeof target.initializeProxy === 'function' &&\n        !target._proxyInitialized\n      ) {\n        target._proxyInitialized = true;\n        target.initializeProxy();\n      }\n      for (const subModule in target) {\n        if (\n          Object.prototype.hasOwnProperty.call(target, subModule) &&\n          verifyModuleFunc(target[subModule]) &&\n          typeof target[subModule].initializeProxy === 'function' &&\n          !target[subModule]._proxyInitialized\n        ) {\n          target[subModule]._proxyInitialized = true;\n          target[subModule].initializeProxy();\n        }\n      }\n    }\n\n    // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n    async initialize() {\n      // initialize the instance before sync to avoid history object from\n      // becoming out of sync\n      this._initialize(this._target);\n      this._transport.on(this._transport.events.push, async (payload: any) => {\n        if (payload.type === this.actionTypes.action) {\n          if (this._syncPromise) await this._syncPromise;\n          if (payload.actionNumber === this.state.actionNumber + 1) {\n            const action = pushStates(this._target, payload.action);\n            this.store.dispatch({\n              ...payload,\n              action,\n              type: this.actionTypes.action,\n            });\n          } else {\n            await this.sync();\n          }\n        }\n      });\n      await this.sync();\n    }\n  };\n}\n"],"mappings":"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","ignoreList":[]}