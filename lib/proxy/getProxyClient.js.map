{"version":3,"file":"getProxyClient.js","names":["_uuid","require","_RcModule2","_interopRequireDefault","_ensureExist","_baseActionTypes","_getProxyClientReducer","_handleProxyAction","e","__esModule","asyncGeneratorStep","n","t","r","o","a","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","ownKeys","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","configurable","writable","_objectWithoutProperties","_objectWithoutPropertiesLoose","indexOf","propertyIsEnumerable","call","hasOwnProperty","_classCallCheck","TypeError","_defineProperties","key","_createClass","prototype","_toPrimitive","_typeof","Symbol","toPrimitive","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","__proto__","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","defaultVerifyModuleFunc","module","RcModule","getProxyClient","createTarget","verifyModuleFunc","undefined","_RcModule","_class2","_super","_ref","_this","transport","options","actionTypes","baseActionTypes","_id","_syncPromise","_target","_transport","v4","_getState","state","target","_getProxyState","proxy","ensureExist","_setTransport","_loop","subModule","get","_getStateV2","_reducer","getProxyClientReducer","targetReducer","reducer","proxyReducer","types","_proxyActionTypes","_suppressInit","_sync2","regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","request","payload","type","sync","actionNumber","sent","store","dispatch","t0","stop","_sync","_initialize","initializeProxy","_proxyInitialized","_initialize2","_callee3","_this2","_callee3$","_context3","on","events","_ref2","_callee2","action","_callee2$","_context2","pushStates","_x","initialize"],"sources":["lib/proxy/getProxyClient.ts"],"sourcesContent":["import { v4 } from 'uuid';\n\nimport RcModule from '../RcModule';\nimport ensureExist from '../ensureExist';\n\nimport baseActionTypes from './baseActionTypes';\nimport getProxyClientReducer from './getProxyClientReducer';\nimport { pushStates } from './handleProxyAction';\n\nconst defaultVerifyModuleFunc = (module: any) => module instanceof RcModule;\n\nexport default function getProxyClient(\n  createTarget: any,\n  verifyModuleFunc = defaultVerifyModuleFunc,\n) {\n  return class extends RcModule {\n    _id: any;\n    _syncPromise: any;\n    _target: any;\n    _transport: any;\n    constructor({ transport, ...options }: any) {\n      super({\n        ...options,\n        actionTypes: baseActionTypes,\n      });\n      this._id = v4();\n      this._target = createTarget({\n        ...options,\n      });\n      // Used by client to dispatch action.\n      // this._target.__proxyAction__ = this.actionTypes.action;\n      this._target._getState = () => this.state.target;\n      this._target._getProxyState = () => this.state.proxy;\n      // this._target = new Target({\n      //   ...options,\n      //   getState: () => this.state.target,\n      //   getProxyState: () => this.state.proxy,\n      // });\n      // @ts-expect-error TS(2345): Argument of type 'string' is not assignable to par... Remove this comment to see the full error message\n      this._transport = ensureExist.call(this, transport, 'transport');\n      this._setTransport(this._target);\n      for (const subModule in this._target) {\n        if (\n          Object.prototype.hasOwnProperty.call(this._target, subModule) &&\n          verifyModuleFunc(this._target[subModule])\n        ) {\n          Object.defineProperty(this, subModule, {\n            configurable: false,\n            enumerable: true,\n            get() {\n              return this._target[subModule];\n            },\n          });\n          // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n          this[subModule]._getStateV2 = (state: any, key: any) =>\n            state.target[key];\n        }\n      }\n\n      this._reducer = getProxyClientReducer({\n        targetReducer: this._target.reducer,\n        proxyReducer: this._target.proxyReducer,\n        transport,\n        types: this.actionTypes,\n      });\n    }\n\n    _setTransport(target: any) {\n      target._transport = this._transport;\n      target._proxyActionTypes = this.actionTypes;\n      target._suppressInit = true;\n      for (const subModule in target) {\n        if (\n          Object.prototype.hasOwnProperty.call(target, subModule) &&\n          verifyModuleFunc(target[subModule])\n        ) {\n          target[subModule]._transport = this._transport;\n          target[subModule]._proxyActionTypes = this.actionTypes;\n          target[subModule]._suppressInit = true;\n        }\n      }\n    }\n\n    async _sync() {\n      try {\n        const result = await this._transport.request({\n          payload: {\n            type: this.actionTypes.sync,\n            actionNumber: this.state.actionNumber,\n          },\n        });\n        this.store.dispatch({\n          ...result,\n          type: this.actionTypes.sync,\n        });\n      } catch (_) {\n        /* Ignore */\n      }\n      this._syncPromise = null;\n    }\n\n    sync() {\n      if (!this._syncPromise) {\n        this._syncPromise = this._sync();\n      }\n      return this._syncPromise;\n    }\n\n    _initialize(target: any) {\n      if (\n        typeof target.initializeProxy === 'function' &&\n        !target._proxyInitialized\n      ) {\n        target._proxyInitialized = true;\n        target.initializeProxy();\n      }\n      for (const subModule in target) {\n        if (\n          Object.prototype.hasOwnProperty.call(target, subModule) &&\n          verifyModuleFunc(target[subModule]) &&\n          typeof target[subModule].initializeProxy === 'function' &&\n          !target[subModule]._proxyInitialized\n        ) {\n          target[subModule]._proxyInitialized = true;\n          target[subModule].initializeProxy();\n        }\n      }\n    }\n\n    // @ts-expect-error TS(4114): This member must have an 'override' modifier becau... Remove this comment to see the full error message\n    async initialize() {\n      // initialize the instance before sync to avoid history object from\n      // becoming out of sync\n      this._initialize(this._target);\n      this._transport.on(this._transport.events.push, async (payload: any) => {\n        if (payload.type === this.actionTypes.action) {\n          if (this._syncPromise) await this._syncPromise;\n          if (payload.actionNumber === this.state.actionNumber + 1) {\n            const action = pushStates(this._target, payload.action);\n            this.store.dispatch({\n              ...payload,\n              action,\n              type: this.actionTypes.action,\n            });\n          } else {\n            await this.sync();\n          }\n        }\n      });\n      await this.sync();\n    }\n  };\n}\n"],"mappings":"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","ignoreList":[]}