{"version":3,"file":"getProxyClient.js","names":["uuid","_interopRequireWildcard","require","_ensureExist","_interopRequireDefault","_RcModule2","_baseActionTypes","_getProxyClientReducer","_handleProxyAction","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","_objectSpread","target","i","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","configurable","writable","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","defaultVerifyModuleFunc","module","RcModule","getProxyClient","createTarget","verifyModuleFunc","_RcModule","_class","_super","_ref","_this","transport","options","actionTypes","baseActionTypes","_id","v4","_target","_getState","state","_getProxyState","proxy","_transport","ensureExist","_setTransport","_loop","subModule","_getStateV2","_reducer","getProxyClientReducer","targetReducer","reducer","proxyReducer","types","_proxyActionTypes","_suppressInit","_sync2","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","request","payload","type","sync","actionNumber","sent","store","dispatch","t0","_syncPromise","stop","_sync","_initialize","initializeProxy","_proxyInitialized","_initialize2","_callee3","_this2","_callee3$","_context3","on","events","_ref2","_callee2","action","_callee2$","_context2","pushStates","_x","initialize"],"sources":["lib/proxy/getProxyClient.ts"],"sourcesContent":["import * as uuid from 'uuid';\n\nimport ensureExist from '../ensureExist';\nimport RcModule from '../RcModule';\nimport baseActionTypes from './baseActionTypes';\nimport getProxyClientReducer from './getProxyClientReducer';\nimport { pushStates } from './handleProxyAction';\n\nconst defaultVerifyModuleFunc = (module) => module instanceof RcModule;\n\nexport default function getProxyClient(\n  createTarget,\n  verifyModuleFunc = defaultVerifyModuleFunc,\n) {\n  return class extends RcModule {\n    constructor({ transport, ...options }) {\n      super({\n        ...options,\n        actionTypes: baseActionTypes,\n      });\n      this._id = uuid.v4();\n      this._target = createTarget({\n        ...options,\n      });\n      // Used by client to dispatch action.\n      // this._target.__proxyAction__ = this.actionTypes.action;\n      this._target._getState = () => this.state.target;\n      this._target._getProxyState = () => this.state.proxy;\n      // this._target = new Target({\n      //   ...options,\n      //   getState: () => this.state.target,\n      //   getProxyState: () => this.state.proxy,\n      // });\n      this._transport = ensureExist.call(this, transport, 'transport');\n      this._setTransport(this._target);\n      for (const subModule in this._target) {\n        if (\n          Object.prototype.hasOwnProperty.call(this._target, subModule) &&\n          verifyModuleFunc(this._target[subModule])\n        ) {\n          Object.defineProperty(this, subModule, {\n            configurable: false,\n            enumerable: true,\n            get() {\n              return this._target[subModule];\n            },\n          });\n          this[subModule]._getStateV2 = (state, key) => state.target[key];\n        }\n      }\n\n      this._reducer = getProxyClientReducer({\n        targetReducer: this._target.reducer,\n        proxyReducer: this._target.proxyReducer,\n        transport,\n        types: this.actionTypes,\n      });\n    }\n\n    _setTransport(target) {\n      target._transport = this._transport;\n      target._proxyActionTypes = this.actionTypes;\n      target._suppressInit = true;\n      for (const subModule in target) {\n        if (\n          Object.prototype.hasOwnProperty.call(target, subModule) &&\n          verifyModuleFunc(target[subModule])\n        ) {\n          target[subModule]._transport = this._transport;\n          target[subModule]._proxyActionTypes = this.actionTypes;\n          target[subModule]._suppressInit = true;\n        }\n      }\n    }\n\n    async _sync() {\n      try {\n        const result = await this._transport.request({\n          payload: {\n            type: this.actionTypes.sync,\n            actionNumber: this.state.actionNumber,\n          },\n        });\n        this.store.dispatch({\n          ...result,\n          type: this.actionTypes.sync,\n        });\n      } catch (_) {\n        /* Ignore */\n      }\n      this._syncPromise = null;\n    }\n\n    sync() {\n      if (!this._syncPromise) {\n        this._syncPromise = this._sync();\n      }\n      return this._syncPromise;\n    }\n\n    _initialize(target) {\n      if (\n        typeof target.initializeProxy === 'function' &&\n        !target._proxyInitialized\n      ) {\n        target._proxyInitialized = true;\n        target.initializeProxy();\n      }\n      for (const subModule in target) {\n        if (\n          Object.prototype.hasOwnProperty.call(target, subModule) &&\n          verifyModuleFunc(target[subModule]) &&\n          typeof target[subModule].initializeProxy === 'function' &&\n          !target[subModule]._proxyInitialized\n        ) {\n          target[subModule]._proxyInitialized = true;\n          target[subModule].initializeProxy();\n        }\n      }\n    }\n\n    async initialize() {\n      // initialize the instance before sync to avoid history object from\n      // becoming out of sync\n      this._initialize(this._target);\n      this._transport.on(this._transport.events.push, async (payload) => {\n        if (payload.type === this.actionTypes.action) {\n          if (this._syncPromise) await this._syncPromise;\n          if (payload.actionNumber === this.state.actionNumber + 1) {\n            const action = pushStates(this._target, payload.action);\n            this.store.dispatch({\n              ...payload,\n              action,\n              type: this.actionTypes.action,\n            });\n          } else {\n            await this.sync();\n          }\n        }\n      });\n      await this.sync();\n    }\n  };\n}\n"],"mappings":"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"}