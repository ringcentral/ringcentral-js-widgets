{"version":3,"file":"getProxyServerReducer.js","names":["_ObjectMap","require","_baseActionTypes","_handleProxyAction","getProxyServerReducer","_ref","moduleReducer","transport","prefix","actionTypes","ObjectMap","prefixValues","baseActionTypes","state","arguments","length","undefined","target","type","initModule","lastAction","actionNumber","action","nextActionNumber","push","payload","dropStates"],"sources":["lib/proxy/getProxyServerReducer.ts"],"sourcesContent":["import { ObjectMap } from '@ringcentral-integration/core/lib/ObjectMap';\n\nimport { baseActionTypes } from './baseActionTypes';\nimport { dropStates } from './handleProxyAction';\n\nexport default function getProxyServerReducer({\n  moduleReducer,\n  transport,\n  prefix,\n}: any) {\n  const actionTypes = ObjectMap.prefixValues(baseActionTypes, prefix);\n  return (\n    state = {\n      target: moduleReducer(undefined, {\n        type: actionTypes.initModule,\n      }),\n      lastAction: null,\n      actionNumber: -1,\n    },\n    action: any,\n  ) => {\n    if (!action) return state;\n    const nextActionNumber = state.actionNumber + 1;\n    transport.push({\n      payload: {\n        type: actionTypes.action,\n        action: dropStates(action),\n        actionNumber: nextActionNumber,\n      },\n    });\n    return {\n      target: moduleReducer(state.target, action),\n      lastAction: dropStates(action),\n      actionNumber: nextActionNumber,\n    };\n  };\n}\n"],"mappings":";;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AAEA,IAAAC,gBAAA,GAAAD,OAAA;AACA,IAAAE,kBAAA,GAAAF,OAAA;AAEe,SAASG,qBAAqBA,CAAAC,IAAA,EAIrC;EAAA,IAHNC,aAAa,GAAAD,IAAA,CAAbC,aAAa;IACbC,SAAS,GAAAF,IAAA,CAATE,SAAS;IACTC,MAAM,GAAAH,IAAA,CAANG,MAAM;EAEN,IAAMC,WAAW,GAAGC,oBAAS,CAACC,YAAY,CAACC,gCAAe,EAAEJ,MAAM,CAAC;EACnE,OAAO,YASF;IAAA,IARHK,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG;MACNG,MAAM,EAAEX,aAAa,CAACU,SAAS,EAAE;QAC/BE,IAAI,EAAET,WAAW,CAACU;MACpB,CAAC,CAAC;MACFC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,CAAC;IACjB,CAAC;IAAA,IACDC,MAAW,GAAAR,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;IAEX,IAAI,CAACM,MAAM,EAAE,OAAOT,KAAK;IACzB,IAAMU,gBAAgB,GAAGV,KAAK,CAACQ,YAAY,GAAG,CAAC;IAC/Cd,SAAS,CAACiB,IAAI,CAAC;MACbC,OAAO,EAAE;QACPP,IAAI,EAAET,WAAW,CAACa,MAAM;QACxBA,MAAM,EAAE,IAAAI,6BAAU,EAACJ,MAAM,CAAC;QAC1BD,YAAY,EAAEE;MAChB;IACF,CAAC,CAAC;IACF,OAAO;MACLN,MAAM,EAAEX,aAAa,CAACO,KAAK,CAACI,MAAM,EAAEK,MAAM,CAAC;MAC3CF,UAAU,EAAE,IAAAM,6BAAU,EAACJ,MAAM,CAAC;MAC9BD,YAAY,EAAEE;IAChB,CAAC;EACH,CAAC;AACH","ignoreList":[]}