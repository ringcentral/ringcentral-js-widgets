{"version":3,"sources":["lib/proxy/getProxyServerReducer.ts"],"names":["getProxyServerReducer","moduleReducer","transport","prefix","actionTypes","ObjectMap","prefixValues","baseActionTypes","state","target","undefined","type","initModule","lastAction","actionNumber","action","nextActionNumber","push","payload"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEe,SAASA,qBAAT,OAIZ;AAAA,MAHDC,aAGC,QAHDA,aAGC;AAAA,MAFDC,SAEC,QAFDA,SAEC;AAAA,MADDC,MACC,QADDA,MACC;;AACD,MAAMC,WAAW,GAAGC,qBAAUC,YAAV,CAAuBC,gCAAvB,EAAwCJ,MAAxC,CAApB;;AACA,SAAO,YASF;AAAA,QARHK,KAQG,uEARK;AACNC,MAAAA,MAAM,EAAER,aAAa,CAACS,SAAD,EAAY;AAC/BC,QAAAA,IAAI,EAAEP,WAAW,CAACQ;AADa,OAAZ,CADf;AAINC,MAAAA,UAAU,EAAE,IAJN;AAKNC,MAAAA,YAAY,EAAE,CAAC;AALT,KAQL;AAAA,QADHC,MACG;AACH,QAAI,CAACA,MAAL,EAAa,OAAOP,KAAP;AACb,QAAMQ,gBAAgB,GAAGR,KAAK,CAACM,YAAN,GAAqB,CAA9C;AACAZ,IAAAA,SAAS,CAACe,IAAV,CAAe;AACbC,MAAAA,OAAO,EAAE;AACPP,QAAAA,IAAI,EAAEP,WAAW,CAACW,MADX;AAEPA,QAAAA,MAAM,EAAE,mCAAWA,MAAX,CAFD;AAGPD,QAAAA,YAAY,EAAEE;AAHP;AADI,KAAf;AAOA,WAAO;AACLP,MAAAA,MAAM,EAAER,aAAa,CAACO,KAAK,CAACC,MAAP,EAAeM,MAAf,CADhB;AAELF,MAAAA,UAAU,EAAE,mCAAWE,MAAX,CAFP;AAGLD,MAAAA,YAAY,EAAEE;AAHT,KAAP;AAKD,GAxBD;AAyBD","sourcesContent":["import { ObjectMap } from '@ringcentral-integration/core/lib/ObjectMap';\nimport { baseActionTypes } from './baseActionTypes';\nimport { dropStates } from './handleProxyAction';\n\nexport default function getProxyServerReducer({\n  moduleReducer,\n  transport,\n  prefix,\n}) {\n  const actionTypes = ObjectMap.prefixValues(baseActionTypes, prefix);\n  return (\n    state = {\n      target: moduleReducer(undefined, {\n        type: actionTypes.initModule,\n      }),\n      lastAction: null,\n      actionNumber: -1,\n    },\n    action,\n  ) => {\n    if (!action) return state;\n    const nextActionNumber = state.actionNumber + 1;\n    transport.push({\n      payload: {\n        type: actionTypes.action,\n        action: dropStates(action),\n        actionNumber: nextActionNumber,\n      },\n    });\n    return {\n      target: moduleReducer(state.target, action),\n      lastAction: dropStates(action),\n      actionNumber: nextActionNumber,\n    };\n  };\n}\n"],"file":"getProxyServerReducer.js"}