{"version":3,"file":"formatDateFromNow.js","names":["_dayjs","_interopRequireDefault","require","_duration","_localizedFormat","e","__esModule","dayjs","extend","duration","localizedFormat","defaultTimeFormat","formatDateFromNow","dateTime","_ref","yesterday","baseTime","_ref$timePresentation","timePresentationMode","withoutTime","date","baseTimeDate","isSame","format","subtract","concat","exports"],"sources":["lib/formatDuration/formatDateFromNow.ts"],"sourcesContent":["import dayjs from 'dayjs';\nimport duration from 'dayjs/plugin/duration';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\n\ndayjs.extend(duration);\ndayjs.extend(localizedFormat);\n\nconst defaultTimeFormat = 'LT';\n\n/**\n * return from now day format\n *\n * If the date is today, it returns the time in the default format.\n * If the date is yesterday, it returns 'yesterday' or 'yesterday, time' based on the startTimeMode.\n * If the date is within the current week, it returns the day of the week or 'day of the week, time' based on the startTimeMode.\n * If the date is within the current year, it returns the date in 'M/D' format or 'M/D, time' based on the startTimeMode.\n * Otherwise, it returns the date in localized format or 'localized format, time' based on the startTimeMode.\n *\n * @param date\n * @returns\n */\nexport const formatDateFromNow = (\n  dateTime: number | undefined | null,\n  {\n    yesterday,\n    baseTime,\n    timePresentationMode = 'withTime',\n  }: {\n    /**\n     * yesterday text for render\n     */\n    yesterday: string;\n    /**\n     * base time for compare\n     *\n     * @default Date.now()\n     */\n    baseTime?: number;\n    /**\n     * how to display the startTime\n     *\n     * @default 'withTime'\n     */\n    timePresentationMode?: 'withoutTime' | 'withTime';\n  },\n) => {\n  const withoutTime = timePresentationMode === 'withoutTime';\n\n  if (!dateTime) return '';\n  const date = dayjs(dateTime);\n  const baseTimeDate = dayjs(baseTime);\n\n  if (date.isSame(baseTimeDate, 'day')) return date.format(defaultTimeFormat);\n\n  if (date.isSame(baseTimeDate.subtract(1, 'day'), 'day'))\n    return withoutTime\n      ? yesterday\n      : `${yesterday}, ${date.format(defaultTimeFormat)}`;\n\n  if (date.isSame(baseTimeDate, 'week'))\n    return date.format(withoutTime ? 'ddd' : `ddd, ${defaultTimeFormat}`);\n\n  if (date.isSame(baseTimeDate, 'year'))\n    return date.format(withoutTime ? 'M/D' : `M/D ${defaultTimeFormat}`);\n\n  return date.format(withoutTime ? 'l' : `l ${defaultTimeFormat}`);\n};\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,SAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,gBAAA,GAAAH,sBAAA,CAAAC,OAAA;AAA2D,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAE3DE,iBAAK,CAACC,MAAM,CAACC,oBAAQ,CAAC;AACtBF,iBAAK,CAACC,MAAM,CAACE,2BAAe,CAAC;AAE7B,IAAMC,iBAAiB,GAAG,IAAI;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAC5BC,QAAmC,EAAAC,IAAA,EAuBhC;EAAA,IArBDC,SAAS,GAAAD,IAAA,CAATC,SAAS;IACTC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;IAAAC,qBAAA,GAAAH,IAAA,CACRI,oBAAoB;IAApBA,oBAAoB,GAAAD,qBAAA,cAAG,UAAU,GAAAA,qBAAA;EAoBnC,IAAME,WAAW,GAAGD,oBAAoB,KAAK,aAAa;EAE1D,IAAI,CAACL,QAAQ,EAAE,OAAO,EAAE;EACxB,IAAMO,IAAI,GAAG,IAAAb,iBAAK,EAACM,QAAQ,CAAC;EAC5B,IAAMQ,YAAY,GAAG,IAAAd,iBAAK,EAACS,QAAQ,CAAC;EAEpC,IAAII,IAAI,CAACE,MAAM,CAACD,YAAY,EAAE,KAAK,CAAC,EAAE,OAAOD,IAAI,CAACG,MAAM,CAACZ,iBAAiB,CAAC;EAE3E,IAAIS,IAAI,CAACE,MAAM,CAACD,YAAY,CAACG,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EACrD,OAAOL,WAAW,GACdJ,SAAS,MAAAU,MAAA,CACNV,SAAS,QAAAU,MAAA,CAAKL,IAAI,CAACG,MAAM,CAACZ,iBAAiB,CAAC,CAAE;EAEvD,IAAIS,IAAI,CAACE,MAAM,CAACD,YAAY,EAAE,MAAM,CAAC,EACnC,OAAOD,IAAI,CAACG,MAAM,CAACJ,WAAW,GAAG,KAAK,WAAAM,MAAA,CAAWd,iBAAiB,CAAE,CAAC;EAEvE,IAAIS,IAAI,CAACE,MAAM,CAACD,YAAY,EAAE,MAAM,CAAC,EACnC,OAAOD,IAAI,CAACG,MAAM,CAACJ,WAAW,GAAG,KAAK,UAAAM,MAAA,CAAUd,iBAAiB,CAAE,CAAC;EAEtE,OAAOS,IAAI,CAACG,MAAM,CAACJ,WAAW,GAAG,GAAG,QAAAM,MAAA,CAAQd,iBAAiB,CAAE,CAAC;AAClE,CAAC;AAACe,OAAA,CAAAd,iBAAA,GAAAA,iBAAA","ignoreList":[]}