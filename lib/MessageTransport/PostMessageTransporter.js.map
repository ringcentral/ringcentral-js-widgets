{"version":3,"file":"PostMessageTransporter.js","names":["_BasicTransporter2","_interopRequireDefault","require","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","writable","configurable","defineProperty","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","call","_typeof","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","PostMessageTransporter","_BasicTransporter","_super","_this","_len","length","args","Array","_key","concat","addReceiver","receiveMessage","_ref","undefined","_ref$useCapture","useCapture","window","addEventListener","dispose","removeEventListener","createEmitter","sendTarget","message","_ref2","_ref2$targetOrigin","targetOrigin","callback","postMessage","BasicTransporter","exports"],"sources":["lib/MessageTransport/PostMessageTransporter.ts"],"sourcesContent":["import BasicTransporter from './BasicTransporter';\n\nexport class PostMessageTransporter extends BasicTransporter {\n  addReceiver = (receiveMessage: any, { useCapture = false } = {}) => {\n    window.addEventListener('message', receiveMessage, useCapture);\n  };\n\n  dispose = (receiveMessage: any) => {\n    window.removeEventListener('message', receiveMessage);\n  };\n\n  createEmitter = (sendTarget: Window) => {\n    // Always specify an exact target origin, not *,\n    // when you use postMessage to send data to other windows.\n    // A malicious site can change the location of the window without your knowledge,\n    // and therefore it can intercept the data sent using postMessage.\n    return (message: string, { targetOrigin = '*', callback } = {} as any) => {\n      sendTarget.postMessage(message, targetOrigin);\n      if (typeof callback === 'function') callback();\n    };\n  };\n}\n"],"mappings":"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"}