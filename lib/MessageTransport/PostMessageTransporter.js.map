{"version":3,"file":"PostMessageTransporter.js","names":["_BasicTransporter2","_interopRequireDefault","require","e","__esModule","_defineProperties","r","t","length","o","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","prototype","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","TypeError","String","Number","_classCallCheck","a","n","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","value","_setPrototypeOf","PostMessageTransporter","exports","_BasicTransporter","_this","_len","arguments","args","Array","_key","concat","addReceiver","receiveMessage","_ref","undefined","_ref$useCapture","useCapture","window","addEventListener","dispose","removeEventListener","createEmitter","sendTarget","message","_ref2","_ref2$targetOrigin","targetOrigin","callback","postMessage","BasicTransporter"],"sources":["lib/MessageTransport/PostMessageTransporter.ts"],"sourcesContent":["import BasicTransporter from './BasicTransporter';\n\nexport class PostMessageTransporter extends BasicTransporter {\n  addReceiver = (receiveMessage: any, { useCapture = false } = {}) => {\n    window.addEventListener('message', receiveMessage, useCapture);\n  };\n\n  dispose = (receiveMessage: any) => {\n    window.removeEventListener('message', receiveMessage);\n  };\n\n  createEmitter = (sendTarget: Window) => {\n    // Always specify an exact target origin, not *,\n    // when you use postMessage to send data to other windows.\n    // A malicious site can change the location of the window without your knowledge,\n    // and therefore it can intercept the data sent using postMessage.\n    return (message: string, { targetOrigin = '*', callback } = {} as any) => {\n      sendTarget.postMessage(message, targetOrigin);\n      if (typeof callback === 'function') callback();\n    };\n  };\n}\n"],"mappings":"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","ignoreList":[]}