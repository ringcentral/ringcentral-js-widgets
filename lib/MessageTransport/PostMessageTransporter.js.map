{"version":3,"file":"PostMessageTransporter.js","names":["_BasicTransporter2","_interopRequireDefault","require","e","__esModule","_classCallCheck","a","n","TypeError","_inherits","t","prototype","Object","create","constructor","value","writable","configurable","defineProperty","_setPrototypeOf","setPrototypeOf","bind","__proto__","_createSuper","r","_isNativeReflectConstruct","o","_getPrototypeOf","s","Reflect","construct","arguments","apply","_possibleConstructorReturn","_typeof","_assertThisInitialized","ReferenceError","Boolean","valueOf","call","getPrototypeOf","PostMessageTransporter","_BasicTransporter","_super","_this","_len","length","args","Array","_key","concat","addReceiver","receiveMessage","_ref","undefined","_ref$useCapture","useCapture","window","addEventListener","dispose","removeEventListener","createEmitter","sendTarget","message","_ref2","_ref2$targetOrigin","targetOrigin","callback","postMessage","BasicTransporter","exports"],"sources":["lib/MessageTransport/PostMessageTransporter.ts"],"sourcesContent":["import BasicTransporter from './BasicTransporter';\n\nexport class PostMessageTransporter extends BasicTransporter {\n  addReceiver = (receiveMessage: any, { useCapture = false } = {}) => {\n    window.addEventListener('message', receiveMessage, useCapture);\n  };\n\n  dispose = (receiveMessage: any) => {\n    window.removeEventListener('message', receiveMessage);\n  };\n\n  createEmitter = (sendTarget: Window) => {\n    // Always specify an exact target origin, not *,\n    // when you use postMessage to send data to other windows.\n    // A malicious site can change the location of the window without your knowledge,\n    // and therefore it can intercept the data sent using postMessage.\n    return (message: string, { targetOrigin = '*', callback } = {} as any) => {\n      sendTarget.postMessage(message, targetOrigin);\n      if (typeof callback === 'function') callback();\n    };\n  };\n}\n"],"mappings":"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","ignoreList":[]}