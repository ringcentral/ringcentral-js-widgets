{"version":3,"file":"LocalForageStorage.js","names":["_events","require","_localforage","_interopRequireDefault","_uuid","_MemoryStorage","e","__esModule","asyncGeneratorStep","n","t","r","o","a","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_classCallCheck","TypeError","_defineProperties","length","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","prototype","_toPrimitive","_typeof","Symbol","toPrimitive","call","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","__proto__","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","LocalForageStorage","_EventEmitter","_super","_ref","_this","storageKey","_storageKey","_storageSyncKey","_ready","_id","_tabSyncHandler","Error","concat","v4","localStorage","window","localforage","config","name","createInstance","_ref2","regeneratorRuntime","mark","_callee","event","_JSON$parse","setter","wrap","_callee$","_context","prev","next","substring","JSON","parse","newValue","id","abrupt","getItem","sent","emit","t0","stop","_x","addEventListener","MemoryStorage","_updateStorageSyncData","syncKey","setItem","stringify","timestamp","Date","now","_getLocalStorageKeys","_callee2","keys","_callee2$","_context2","getLocalStorageKeys","_getData","_callee3","_this2","output","promises","_callee3$","_context3","ready","map","data","all","getData","_getItem","_callee4","originalData","_callee4$","_context4","undefined","_x2","_setItem","_callee5","_callee5$","_context5","error","console","_x3","_x4","_removeItem","_callee6","_callee6$","_context6","removeItem","_x5","destroy","removeEventListener","_callee7","_callee7$","_context7","get","driver","WEBSQL","INDEXEDDB","LOCALSTORAGE","EventEmitter","exports"],"sources":["lib/LocalForageStorage.ts"],"sourcesContent":["// @ts-nocheck\nimport { EventEmitter } from 'events';\nimport localforage from 'localforage';\nimport { v4 } from 'uuid';\n\nimport type {\n  AsyncStorage,\n  StorageItem,\n} from '../interfaces/GenericStorage.interface';\n\nimport { MemoryStorage } from './MemoryStorage';\n\nexport class LocalForageStorage extends EventEmitter implements AsyncStorage {\n  private _storageKey: string;\n  private _storageSyncKey: string;\n  private _ready: boolean;\n  private _id: string;\n  private _localforage: LocalForage | MemoryStorage<any>;\n  private _tabSyncHandler: (this: Window, ev: StorageEvent) => any;\n\n  constructor({ storageKey }: { storageKey: string }) {\n    super();\n    if (!storageKey) {\n      throw Error('LocalforageStorage must be created with a storage key');\n    }\n    this._storageKey = storageKey;\n    this._storageSyncKey = `${storageKey}-sync`;\n    this._ready = false;\n    this._id = v4();\n    if (typeof localStorage !== 'undefined' && typeof window !== 'undefined') {\n      localforage.config({ name: this._storageKey });\n      this._localforage = localforage.createInstance({\n        name: this._storageKey,\n      });\n      this._tabSyncHandler = async (event) => {\n        if (\n          event.key !== null &&\n          typeof event.key !== 'undefined' &&\n          event.key.substring(0, this._storageSyncKey.length) ===\n            this._storageSyncKey\n        ) {\n          try {\n            const { setter } = JSON.parse(event.newValue);\n            if (!setter || setter === this.id) {\n              return;\n            }\n            const key = event.key.substring(this._storageSyncKey.length + 1);\n            const value = await this.getItem(key);\n            this.emit('storage', {\n              key,\n              value,\n            });\n          } catch (e: any /** TODO: confirm with instanceof */) {\n            /* ignore error */\n          }\n        }\n      };\n      window.addEventListener('storage', this._tabSyncHandler);\n    } else {\n      this._localforage = new MemoryStorage();\n    }\n  }\n\n  _updateStorageSyncData(key: string) {\n    if (typeof localStorage !== 'undefined') {\n      const syncKey = `${this._storageSyncKey}-${key}`;\n      localStorage.setItem(\n        syncKey,\n        JSON.stringify({\n          timestamp: Date.now(),\n          setter: this.id,\n        }),\n      );\n    }\n  }\n\n  async getLocalStorageKeys() {\n    const keys = await this._localforage.keys();\n    return keys;\n  }\n\n  async getData() {\n    await this.ready();\n    const output: Record<string, StorageItem['value']> = {};\n    const keys = await this.getLocalStorageKeys();\n    const promises = keys.map((key) =>\n      this.getItem(key).then((data) => {\n        output[key] = data;\n      }),\n    );\n    await Promise.all(promises);\n    return output;\n  }\n\n  async getItem(key: string) {\n    // TODO: fix MemoryStorage set value with `string`;\n    const originalData: StorageItem = await this._localforage.getItem(key);\n    try {\n      const { value } = originalData;\n      return value;\n    } catch (error: any /** TODO: confirm with instanceof */) {\n      return undefined;\n    }\n  }\n\n  async setItem(key: string, value: StorageItem['value']) {\n    // TODO: fix MemoryStorage get value with `string`;\n    await this._localforage.setItem<StorageItem>(key, {\n      value,\n      setter: this.id,\n    });\n    try {\n      this._updateStorageSyncData(key);\n    } catch (error: any /** TODO: confirm with instanceof */) {\n      console.error(error);\n    }\n  }\n\n  async removeItem(key: string) {\n    await this._localforage.removeItem(key);\n  }\n\n  destroy() {\n    if (this._tabSyncHandler) {\n      window.removeEventListener('storage', this._tabSyncHandler);\n    }\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  async ready(): Promise<void | boolean> {\n    if (this._ready) {\n      return;\n    }\n    if (typeof this._localforage.ready === 'function') {\n      await this._localforage.ready();\n    }\n    this._ready = true;\n  }\n\n  get driver() {\n    if (this._localforage instanceof MemoryStorage) {\n      return 'MEMORYSTORAGE';\n    }\n    switch (this._localforage.driver()) {\n      case localforage.WEBSQL:\n        return 'WEBSQL';\n      case localforage.INDEXEDDB:\n        return 'INDEXEDDB';\n      case localforage.LOCALSTORAGE:\n        return 'LOCALSTORAGE';\n      default:\n        return null;\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]}