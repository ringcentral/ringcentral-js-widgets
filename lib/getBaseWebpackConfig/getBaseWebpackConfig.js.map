{"version":3,"file":"getBaseWebpackConfig.js","names":["_autoprefixer","_interopRequireDefault","require","_crypto","_path","_threadLoader","_webpack","_webpackBundleAnalyzer","e","__esModule","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","Symbol","iterator","isArray","length","n","hash","input","crypto","createHash","update","digest","getBaseWebpackConfig","_ref","_ref$analyzeBundle","analyzeBundle","_ref$inlineFont","inlineFont","_ref$enableHash","enableHash","_ref$hashPrefix","hashPrefix","_ref$mode","mode","_ref$prefixSvgId","prefixSvgId","_ref$supportedLocales","supportedLocales","themeFolder","_ref$threadLoaderOpti","threadLoaderOptions","_ref$useThreadLoader","useThreadLoader","_ref$preferredDevtool","preferredDevtool","_ref$useDevtool","useDevtool","_ref$sourceMapLoaderE","sourceMapLoaderExcludes","_ref$babelLoaderExclu","babelLoaderExcludes","_ref$chunkLocale","chunkLocale","_ref$useStyleTransfor","useStyleTransform","devtool","threadLoader","process","env","NODE_ENV","warmup","push","loader","options","plugins","ProvidePlugin","Buffer","setImmediate","clearImmediate","DefinePlugin","JSON","stringify","console","log","BundleAnalyzerPlugin","analyzerMode","openAnalyzer","rules","resolve","fullySpecified","use","search","replace","enforce","exclude","concat","cacheDirectory","chunk","styleLoaderOptions","injectType","insert","element","globalThis","window","document","head","appendChild","globalTest","modules","localIdentName","postcssOptions","autoprefixer","sassOptions","includePaths","path","cwd","outputStyle","resourceQuery","not","type","generator","filename","_ref2","resource","jsx","svgo","removeViewBox","cleanupIDs","prefix","basename","fallback","vm","stream","events","extensions","module","exports"],"sources":["lib/getBaseWebpackConfig/getBaseWebpackConfig.ts"],"sourcesContent":["import autoprefixer from 'autoprefixer';\nimport crypto from 'crypto';\nimport path from 'path';\nimport { warmup } from 'thread-loader';\nimport type {\n  Configuration,\n  RuleSetRule,\n  RuleSetUseItem,\n  WebpackPluginInstance,\n} from 'webpack';\nimport { DefinePlugin, ProvidePlugin } from 'webpack';\nimport { BundleAnalyzerPlugin } from 'webpack-bundle-analyzer';\n\nfunction hash(input: string) {\n  return crypto.createHash('sha256').update(input).digest('hex').slice(0, 20);\n}\n\nexport interface BaseWebpackConfigOptions {\n  analyzeBundle?: boolean;\n  hashPrefix?: string;\n\n  /**\n   * by default font will be assets mode, if set to true, font will be inline as base64 data url\n   *\n   * that may be useful when your meet cors issue when load font from cdn\n   *\n   * ### if use inline mode, that will increase bundle size when you import font in multiple files, should consider to use it\n   */\n  inlineFont?: boolean;\n  enableHash?: boolean;\n  mode?: Configuration['mode'];\n  prefixSvgId?: boolean;\n  supportedLocales?: string[];\n  themeFolder: string;\n  threadLoaderOptions?: Record<string, any>;\n  useThreadLoader?: boolean;\n  preferredDevtool?: Configuration['devtool'];\n  useDevtool?: boolean;\n  sourceMapLoaderExcludes?: RuleSetRule['exclude'];\n  babelLoaderExcludes?: RuleSetRule['exclude'];\n  /**\n   * enable chunk mode, also can use function when you need custom chunk with different language\n   *\n   * @default true\n   */\n  chunkLocale?: boolean | ((locale: string) => boolean);\n  /**\n   * enable style transform for shared worker mode\n   */\n  useStyleTransform?: boolean;\n}\n\nexport const getBaseWebpackConfig = ({\n  analyzeBundle = false,\n  inlineFont = false,\n  enableHash = true,\n  hashPrefix = '',\n  mode = 'production',\n  prefixSvgId = false,\n  supportedLocales = [],\n  themeFolder,\n  threadLoaderOptions = {},\n  useThreadLoader = false,\n  preferredDevtool = 'eval-source-map',\n  useDevtool = mode === 'development',\n  sourceMapLoaderExcludes = /node_modules/,\n  babelLoaderExcludes = /node_modules/,\n  chunkLocale = true,\n  useStyleTransform = false,\n}: BaseWebpackConfigOptions): Configuration => {\n  const devtool = useDevtool ? preferredDevtool : false;\n  const threadLoader: RuleSetUseItem[] = [];\n  // set process.env.NODE_ENV to mode to make sure the same as webpack mode\n  process.env.NODE_ENV = mode;\n\n  if (useThreadLoader) {\n    warmup(threadLoaderOptions, [\n      'postcss-loader',\n      'sass-loader',\n      'source-map-loader',\n      'babel-loader',\n      'style-loader',\n      'css-loader',\n      'react-svg-loader',\n      // TODO: locale-loader not able to use thread-loader\n      // '@ringcentral-integration/locale-loader',\n    ]);\n    threadLoader.push({\n      loader: 'thread-loader',\n      options: threadLoaderOptions,\n    });\n  }\n  const plugins: WebpackPluginInstance[] = [\n    new ProvidePlugin({\n      process: 'process/browser.js',\n      Buffer: ['buffer', 'Buffer'],\n      setImmediate: ['setimmediate', 'setImmedate'],\n      clearImmediate: ['setimmediate', 'clearImmedate'],\n    }),\n    new DefinePlugin({\n      'process.env.NODE_ENV': JSON.stringify(mode),\n    }),\n  ];\n\n  if (analyzeBundle) {\n    // eslint-disable-next-line no-console\n    console.log('Analyze bundle will be open after completed...');\n    plugins.push(\n      new BundleAnalyzerPlugin({\n        analyzerMode: 'static',\n        openAnalyzer: true,\n      }),\n    );\n  }\n\n  const rules: RuleSetRule[] = [\n    {\n      test: /\\.m?js/,\n      resolve: {\n        fullySpecified: false,\n      },\n    },\n    // material-ui v4.0 issue:\n    // Multiple modules with names that only differ in casing in Popper module.\n    // https://github.com/mui-org/material-ui/issues/14711\n    {\n      test: /node_modules\\/@material-ui\\/core\\/esm\\/Popper\\/Popper\\.js$/,\n      use: {\n        loader: 'string-replace-loader',\n        options: {\n          search: \"import PopperJS from 'popper.js';\",\n          replace:\n            'import PopperJS from \"../../../../popper.js/dist/esm/popper\";',\n        },\n      },\n    },\n    // some setImmediate ployfill issue\n    // https://github.com/Stuk/jszip/issues/909\n    {\n      test: /node_modules\\/jszip\\/dist\\/jszip\\.min\\.js$/,\n      use: {\n        loader: 'string-replace-loader',\n        options: {\n          search: '{setImmediate(',\n          replace: '{window.setImmediate(',\n        },\n      },\n    },\n    // Some setTimeout issue in SIP.js v0.13.5:\n    // https://github.com/onsip/SIP.js/issues/1071\n    {\n      test: /node_modules\\/sip.js\\/lib\\/RegisterContext\\.js$/,\n      use: {\n        loader: 'string-replace-loader',\n        options: {\n          search: '_this.registrationTimer = setTimeout',\n          replace:\n            '_this.registrationTimer = (globalThis.externalSetTimeout || setTimeout)',\n        },\n      },\n    },\n    {\n      test: /node_modules\\/sip.js\\/lib\\/RegisterContext\\.js$/,\n      use: {\n        loader: 'string-replace-loader',\n        options: {\n          search: 'clearTimeout(_this.registrationTimer)',\n          replace:\n            '(globalThis.externalClearTimeout || clearTimeout)(_this.registrationTimer)',\n        },\n      },\n    },\n    {\n      test: /node_modules\\/sip.js\\/lib\\/RegisterContext\\.js$/,\n      use: {\n        loader: 'string-replace-loader',\n        options: {\n          search: '_this.registrationExpiredTimer = setTimeout',\n          replace:\n            '_this.registrationExpiredTimer = (globalThis.externalSetTimeout || setTimeout)',\n        },\n      },\n    },\n    {\n      test: /node_modules\\/sip.js\\/lib\\/RegisterContext\\.js$/,\n      use: {\n        loader: 'string-replace-loader',\n        options: {\n          search: 'clearTimeout(_this.registrationExpiredTimer)',\n          replace:\n            '(globalThis.externalClearTimeout || clearTimeout)(_this.registrationExpiredTimer)',\n        },\n      },\n    },\n  ];\n\n  // source-map-loader\n  if (useDevtool) {\n    rules.push({\n      enforce: 'pre',\n      test: /\\.(js|jsx|ts|tsx)$/,\n      exclude: sourceMapLoaderExcludes,\n      use: [\n        // ! https://github.com/webpack-contrib/thread-loader?tab=readme-ov-file#examples\n        // thread-loader must be the first loader in the loaders array\n        // Put this loader in front of other loaders. The following loaders run in a worker pool.\n        ...threadLoader,\n        'source-map-loader',\n      ],\n    });\n  }\n  // babel-loader\n  rules.push({\n    test: /\\.(js|jsx|ts|tsx)$/,\n    use: [\n      // TODO: locale-loader not able to use thread-loader\n      // ...threadLoader,\n      {\n        loader: 'babel-loader',\n        options: {\n          // in production mode, not use cache\n          cacheDirectory: mode !== 'production',\n        },\n      },\n      {\n        loader: '@ringcentral-integration/locale-loader',\n        options: {\n          supportedLocales,\n          chunk: chunkLocale,\n        },\n      },\n      // TODO: we put at last for still be use thread-loader with babel-loader, but it's not work, we should make can support locale-loader\n      // Put at last for make thread-loader warmup can be end\n      ...threadLoader,\n    ],\n    exclude: babelLoaderExcludes,\n  });\n\n  const styleLoaderOptions = useStyleTransform\n    ? {\n        injectType: 'styleTag',\n        insert: (element: HTMLElement) => {\n          if (!globalThis.window) return;\n\n          document.head.appendChild(element);\n        },\n      }\n    : {};\n\n  const globalTest = /(\\.global)\\.(sass|scss)/;\n  // css\n  rules.push({\n    test: /\\.css$/i,\n    use: [\n      ...threadLoader,\n      {\n        loader: 'style-loader',\n        options: styleLoaderOptions,\n      },\n      'css-loader',\n    ],\n  });\n\n  // sass & scss\n  rules.push({\n    test: /\\.sass|\\.scss/,\n    exclude: globalTest,\n    use: [\n      ...threadLoader,\n      {\n        loader: 'style-loader',\n        options: styleLoaderOptions,\n      },\n      {\n        loader: 'css-loader',\n        options: {\n          modules: {\n            localIdentName: `${hashPrefix}_[path]_[name]_[local]_[hash:base64:5]`,\n          },\n        },\n      },\n      {\n        loader: 'postcss-loader',\n        options: {\n          postcssOptions: {\n            plugins: () => [autoprefixer],\n          },\n        },\n      },\n      {\n        loader: 'sass-loader',\n        options: {\n          sassOptions: {\n            includePaths: [\n              themeFolder,\n              path.resolve(process.cwd(), 'node_modules'),\n              path.resolve(process.cwd(), '../../node_modules'),\n            ],\n            outputStyle: 'expanded',\n          },\n        },\n      },\n    ],\n  });\n\n  // use global should not have any css module with localIdentName\n  // global sass & scss\n  rules.push({\n    test: globalTest,\n    use: [\n      ...threadLoader,\n      {\n        loader: 'style-loader',\n        options: styleLoaderOptions,\n      },\n      {\n        loader: 'css-loader',\n      },\n      {\n        loader: 'postcss-loader',\n        options: {\n          postcssOptions: {\n            plugins: () => [autoprefixer],\n          },\n        },\n      },\n      {\n        loader: 'sass-loader',\n        options: {\n          sassOptions: {\n            includePaths: [\n              themeFolder,\n              path.resolve(process.cwd(), 'node_modules'),\n              path.resolve(process.cwd(), '../../node_modules'),\n            ],\n            outputStyle: 'expanded',\n          },\n        },\n      },\n    ],\n  });\n\n  // audio\n  rules.push({\n    test: /\\.ogg$|\\.wav$|\\.mp3$/,\n    resourceQuery: { not: [/url|raw/] },\n    type: 'asset/resource',\n    generator: {\n      filename: `audio/[name]${enableHash ? '_[hash]' : ''}[ext]`,\n    },\n  });\n\n  // images and svg font\n  rules.push({\n    test: /\\.png|\\.jpg|\\.gif|fonts(\\/|\\\\).*\\.svg/,\n    resourceQuery: { not: [/url|raw/] },\n    type: 'asset/resource',\n    generator: {\n      filename: `images/[name]${enableHash ? '_[hash]' : ''}[ext]`,\n    },\n  });\n\n  // svg\n  rules.push({\n    test: /\\.svg$/,\n    resourceQuery: { not: [/url|raw/] },\n    exclude: /fonts/,\n    use: ({ resource }: { resource: string }) => [\n      ...threadLoader,\n      'babel-loader',\n      {\n        loader: 'react-svg-loader',\n        options: {\n          jsx: true,\n          svgo: {\n            plugins: [\n              {\n                removeViewBox: false,\n              },\n              ...(prefixSvgId\n                ? [\n                    {\n                      cleanupIDs: {\n                        prefix: `${hash(path.basename(resource, '.svg'))}-`,\n                      },\n                    },\n                  ]\n                : []),\n            ],\n          },\n        },\n      },\n    ],\n  });\n\n  if (inlineFont) {\n    // font\n    rules.push({\n      test: /\\.woff|\\.woff2|.eot|\\.ttf/,\n      type: 'asset/inline',\n    });\n  } else {\n    // font\n    rules.push({\n      test: /\\.woff|\\.woff2|.eot|\\.ttf/,\n      resourceQuery: { not: [/url|raw/] },\n      type: 'asset/resource',\n      generator: {\n        filename: `fonts/[name]${enableHash ? '_[hash]' : ''}[ext]`,\n      },\n    });\n  }\n\n  rules.push(\n    // https://webpack.js.org/guides/asset-modules/#replacing-inline-loader-syntax\n    {\n      resourceQuery: /raw/,\n      type: 'asset/source',\n    },\n    {\n      resourceQuery: /url/,\n      type: 'asset/inline',\n    },\n  );\n\n  return {\n    mode,\n    devtool,\n    plugins,\n    resolve: {\n      // webpack < 5 used to include polyfills for node.js core modules by default.\n      // This is no longer the case. Verify if you need this module and configure a polyfill for it.\n      //\n      // more doc: https://webpack.js.org/configuration/resolve/#resolvefallback\n      //\n      fallback: {\n        // * ringcentral cdk need\n        vm: require.resolve('vm-browserify'),\n        crypto: require.resolve('crypto-browserify'),\n        stream: require.resolve('stream-browserify'),\n        events: require.resolve('events'),\n        // * react-markdown need that polyfill, can be remove after we not need\n        path: require.resolve('path-browserify'),\n      },\n      extensions: ['.ts', '.tsx', '.js', '.jsx'],\n    },\n    module: {\n      rules,\n    },\n  };\n};\n"],"mappings":"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","ignoreList":[]}