{"version":3,"file":"readJsonData.js","names":["_fsExtra","_interopRequireDefault","require","_path","_ramda","e","__esModule","readJsonData","_ref","localizationFolder","translationLocales","sourceLocale","rawData","reduce","acc","locale","fileName","concat","filePath","path","resolve","fs","existsSync","statSync","isFile","content","readFileSync","JSON","parse","result","fileData","folderPath","dirname","targetFile","extname","targetFilePath","join","key","value","source","Object","keys"],"sources":["lib/readJsonData.js"],"sourcesContent":["import fs from 'fs-extra';\nimport path from 'path';\nimport { reduce } from 'ramda';\n\nexport function readJsonData({\n  localizationFolder,\n  translationLocales,\n  sourceLocale,\n  rawData,\n}) {\n  if (!rawData) {\n    rawData = reduce(\n      (acc, locale) => {\n        const fileName = `${locale}.json`;\n        const filePath = path.resolve(localizationFolder, fileName);\n        if (fs.existsSync(filePath) && fs.statSync(filePath).isFile()) {\n          const content = fs.readFileSync(filePath, 'utf8');\n          acc[locale] = JSON.parse(content);\n        }\n        return acc;\n      },\n      {},\n      translationLocales,\n    );\n  }\n\n  return reduce(\n    (result, locale) => {\n      if (locale !== sourceLocale) {\n        result[locale] = reduce(\n          (fileData, filePath) => {\n            const folderPath = path.dirname(filePath);\n            const targetFile = `${locale}${path.extname(filePath)}`;\n            const targetFilePath = path.join(folderPath, targetFile);\n            fileData[targetFilePath] = reduce(\n              (acc, key) => {\n                const value = rawData[locale][filePath][key];\n                const source = rawData[sourceLocale][filePath][key];\n                if (source && value) {\n                  acc[key] = {\n                    source,\n                    value,\n                  };\n                }\n                return acc;\n              },\n              {},\n              Object.keys(rawData[locale][filePath]),\n            );\n            return fileData;\n          },\n          {},\n          Object.keys(rawData[locale]),\n        );\n      }\n      return result;\n    },\n    {},\n    translationLocales,\n  );\n}\n"],"mappings":";;;;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,MAAA,GAAAF,OAAA;AAA+B,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAExB,SAASE,YAAYA,CAAAC,IAAA,EAKzB;EAAA,IAJDC,kBAAkB,GAAAD,IAAA,CAAlBC,kBAAkB;IAClBC,kBAAkB,GAAAF,IAAA,CAAlBE,kBAAkB;IAClBC,YAAY,GAAAH,IAAA,CAAZG,YAAY;IACZC,OAAO,GAAAJ,IAAA,CAAPI,OAAO;EAEP,IAAI,CAACA,OAAO,EAAE;IACZA,OAAO,GAAG,IAAAC,aAAM,EACd,UAACC,GAAG,EAAEC,MAAM,EAAK;MACf,IAAMC,QAAQ,MAAAC,MAAA,CAAMF,MAAM,UAAO;MACjC,IAAMG,QAAQ,GAAGC,gBAAI,CAACC,OAAO,CAACX,kBAAkB,EAAEO,QAAQ,CAAC;MAC3D,IAAIK,mBAAE,CAACC,UAAU,CAACJ,QAAQ,CAAC,IAAIG,mBAAE,CAACE,QAAQ,CAACL,QAAQ,CAAC,CAACM,MAAM,CAAC,CAAC,EAAE;QAC7D,IAAMC,OAAO,GAAGJ,mBAAE,CAACK,YAAY,CAACR,QAAQ,EAAE,MAAM,CAAC;QACjDJ,GAAG,CAACC,MAAM,CAAC,GAAGY,IAAI,CAACC,KAAK,CAACH,OAAO,CAAC;MACnC;MACA,OAAOX,GAAG;IACZ,CAAC,EACD,CAAC,CAAC,EACFJ,kBACF,CAAC;EACH;EAEA,OAAO,IAAAG,aAAM,EACX,UAACgB,MAAM,EAAEd,MAAM,EAAK;IAClB,IAAIA,MAAM,KAAKJ,YAAY,EAAE;MAC3BkB,MAAM,CAACd,MAAM,CAAC,GAAG,IAAAF,aAAM,EACrB,UAACiB,QAAQ,EAAEZ,QAAQ,EAAK;QACtB,IAAMa,UAAU,GAAGZ,gBAAI,CAACa,OAAO,CAACd,QAAQ,CAAC;QACzC,IAAMe,UAAU,MAAAhB,MAAA,CAAMF,MAAM,EAAAE,MAAA,CAAGE,gBAAI,CAACe,OAAO,CAAChB,QAAQ,CAAC,CAAE;QACvD,IAAMiB,cAAc,GAAGhB,gBAAI,CAACiB,IAAI,CAACL,UAAU,EAAEE,UAAU,CAAC;QACxDH,QAAQ,CAACK,cAAc,CAAC,GAAG,IAAAtB,aAAM,EAC/B,UAACC,GAAG,EAAEuB,GAAG,EAAK;UACZ,IAAMC,KAAK,GAAG1B,OAAO,CAACG,MAAM,CAAC,CAACG,QAAQ,CAAC,CAACmB,GAAG,CAAC;UAC5C,IAAME,MAAM,GAAG3B,OAAO,CAACD,YAAY,CAAC,CAACO,QAAQ,CAAC,CAACmB,GAAG,CAAC;UACnD,IAAIE,MAAM,IAAID,KAAK,EAAE;YACnBxB,GAAG,CAACuB,GAAG,CAAC,GAAG;cACTE,MAAM,EAANA,MAAM;cACND,KAAK,EAALA;YACF,CAAC;UACH;UACA,OAAOxB,GAAG;QACZ,CAAC,EACD,CAAC,CAAC,EACF0B,MAAM,CAACC,IAAI,CAAC7B,OAAO,CAACG,MAAM,CAAC,CAACG,QAAQ,CAAC,CACvC,CAAC;QACD,OAAOY,QAAQ;MACjB,CAAC,EACD,CAAC,CAAC,EACFU,MAAM,CAACC,IAAI,CAAC7B,OAAO,CAACG,MAAM,CAAC,CAC7B,CAAC;IACH;IACA,OAAOc,MAAM;EACf,CAAC,EACD,CAAC,CAAC,EACFnB,kBACF,CAAC;AACH","ignoreList":[]}