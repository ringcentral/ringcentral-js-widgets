{"version":3,"file":"OAuthBase.js","names":["_url","_interopRequireDefault","require","_di","_proxify","_required","_Auth","_core","_parseCallbackUri","_dec","_class","_class2","_descriptor","obj","__esModule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","initializer","call","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","i","length","_toPropertyKey","_createClass","protoProps","staticProps","prototype","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","Number","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","decorators","desc","keys","forEach","slice","reverse","reduce","decorator","_initializerWarningHelper","Error","DEFAULT_UI_OPTIONS","OAuthBase","Module","deps","dep","optional","_RcModuleV","_super","_this","_redirectUri","setOAuthReady","val","oAuthReady","_handleCallbackUri2","regeneratorRuntime","mark","_callee","callbackUri","refresh","query","message","_args","wrap","_callee$","_context","prev","next","parseCallbackUri","_refreshWithCallbackQuery","_loginWithCallbackQuery","t0","console","t1","authMessages","accessDenied","abrupt","internalError","_deps","alert","danger","payload","stop","_handleCallbackUri","_x","_loginWithCallbackQuery2","_callee2","_callee2$","_context2","code","access_token","auth","login","accessToken","expiresIn","expires_in","endpointId","endpoint_id","redirectUri","tokenType","token_type","scope","tokenUri","token_uri","discoveryUri","discovery_uri","_x2","_refreshWithCallbackQuery2","_callee3","_callee3$","_context3","refreshImplicitToken","_x3","_destroyOAuth","_callee4","_callee4$","_context4","destroyOAuth","_openOAuthPage","_callee5","_callee5$","_context5","openOAuthPage","get","_this$_deps$oAuthOpti","oAuthOptions","_this$_deps$oAuthOpti2","uiOptions","getLoginUrl","brandId","brand","id","state","authState","display","localeId","locale","currentLocale","_uiOptions","implicit","isImplicit","force","prompt","btoa","concat","Date","now","url","window","location","href","RcModuleV2","action","getOwnPropertyDescriptor","required","proxify","exports"],"sources":["lib/OAuthBase/OAuthBase.ts"],"sourcesContent":["import url from 'url';\n\nimport { Module } from '@ringcentral-integration/commons/lib/di';\nimport { proxify } from '@ringcentral-integration/commons/lib/proxy/proxify';\nimport required from '@ringcentral-integration/commons/lib/required';\nimport { authMessages } from '@ringcentral-integration/commons/modules/Auth';\nimport { action, RcModuleV2, state } from '@ringcentral-integration/core';\n\nimport parseCallbackUri from '../parseCallbackUri';\nimport type { Deps } from './OAuthBase.interface';\n\nconst DEFAULT_UI_OPTIONS = ['hide_remember_me', 'hide_tos'];\n\ntype RefreshWithCallbackQueryParams = {\n  access_token?: string;\n  token_type?: string;\n  expires_in?: number;\n  endpoint_id?: string;\n  code?: string;\n  scope?: string;\n  token_uri?: string;\n  discovery_uri?: string;\n};\n\n@Module({\n  deps: [\n    'Auth',\n    'Alert',\n    'Locale',\n    'Brand',\n    { dep: 'TabManager', optional: true },\n    { dep: 'OAuthOptions', optional: true },\n  ],\n})\nexport class OAuthBase<T extends Deps = Deps> extends RcModuleV2<T> {\n  constructor(deps: T) {\n    super({\n      deps,\n    });\n\n    if (!this._redirectUri) {\n      throw new Error('redirectUri is required');\n    }\n  }\n\n  @state\n  oAuthReady = false;\n\n  @action\n  setOAuthReady(val: boolean) {\n    this.oAuthReady = val;\n  }\n\n  @required\n  get name(): string {\n    /* require implementation in descendent */\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'string'.\n    return null;\n  }\n\n  @proxify\n  protected async _handleCallbackUri(callbackUri: string, refresh = false) {\n    try {\n      const query = parseCallbackUri(callbackUri);\n      if (refresh) {\n        await this._refreshWithCallbackQuery(query);\n      } else {\n        await this._loginWithCallbackQuery(query);\n      }\n    } catch (error: any) {\n      console.error('oauth error: ', error);\n      let message;\n      // Error handling standard in callback uri\n      // https://openid.net/specs/openid-connect-core-1_0.html#AuthError\n      // Error handling standard in api response\n      // https://tools.ietf.org/html/rfc6749#section-4.1.2\n      switch (error.message) {\n        case 'invalid_request':\n        case 'unauthorized_client':\n        case 'access_denied':\n        case 'unsupported_response_type':\n        case 'invalid_scope':\n        case 'interaction_required':\n        case 'login_required':\n          message = authMessages.accessDenied;\n          break;\n        case 'server_error':\n        case 'temporarily_unavailable':\n        default:\n          message = authMessages.internalError;\n          break;\n      }\n      this._deps.alert.danger({\n        message,\n        payload: error,\n      });\n    }\n  }\n\n  protected async _loginWithCallbackQuery(\n    query: RefreshWithCallbackQueryParams,\n  ) {\n    if (!(query.code || query.access_token)) {\n      return;\n    }\n    await this._deps.auth.login({\n      code: query.code,\n      accessToken: query.access_token,\n      expiresIn: query.expires_in,\n      endpointId: query.endpoint_id,\n      redirectUri: this.redirectUri,\n      tokenType: query.token_type,\n      scope: query.scope,\n      tokenUri: query.token_uri,\n      discoveryUri: query.discovery_uri,\n    });\n  }\n\n  protected async _refreshWithCallbackQuery(\n    query: RefreshWithCallbackQueryParams,\n  ) {\n    if (!query.access_token) {\n      return;\n    }\n    await this._deps.auth.refreshImplicitToken({\n      tokenType: query.token_type,\n      accessToken: query.access_token,\n      expiresIn: query.expires_in,\n      endpointId: query.endpoint_id,\n    });\n  }\n\n  protected get _redirectUri() {\n    return this._deps.oAuthOptions?.redirectUri;\n  }\n\n  protected get _uiOptions() {\n    return this._deps.oAuthOptions?.uiOptions || DEFAULT_UI_OPTIONS;\n  }\n\n  @required\n  async destroyOAuth() {}\n\n  @required\n  async openOAuthPage() {}\n\n  get oAuthUri() {\n    return this._deps.auth.getLoginUrl({\n      redirectUri: this.redirectUri,\n      brandId: this._deps.brand.id,\n      state: this.authState,\n      display: 'page',\n      localeId: this._deps.locale.currentLocale,\n      uiOptions: this._uiOptions,\n      implicit: this._deps.auth.isImplicit,\n      force: true,\n    });\n  }\n\n  get implicitRefreshOAuthUri() {\n    return this._deps.auth.getLoginUrl({\n      redirectUri: this.redirectUri,\n      brandId: this._deps.brand.id,\n      state: this.authState,\n      display: 'page',\n      prompt: 'none',\n      implicit: this._deps.auth.isImplicit,\n    });\n  }\n\n  get authState() {\n    return btoa(`${Date.now()}`);\n  }\n\n  get redirectUri() {\n    // @ts-expect-error TS(2345): Argument of type 'string | undefined' is not assig... Remove this comment to see the full error message\n    return url.resolve(window.location.href, this._redirectUri);\n  }\n}\n"],"mappings":"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"}