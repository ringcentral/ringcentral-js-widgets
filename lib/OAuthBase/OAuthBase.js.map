{"version":3,"file":"OAuthBase.js","names":["_di","require","_proxify","_required","_interopRequireDefault","_Auth","_core","_parseCallbackUri","_dec","_class","_class2","_descriptor","e","__esModule","asyncGeneratorStep","n","t","r","o","a","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","l","Object","defineProperty","enumerable","configurable","writable","initializer","call","_classCallCheck","TypeError","_defineProperties","length","_toPropertyKey","key","_createClass","prototype","_toPrimitive","_typeof","Symbol","toPrimitive","String","Number","_inherits","create","constructor","_setPrototypeOf","setPrototypeOf","bind","__proto__","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","s","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","Boolean","valueOf","getPrototypeOf","_applyDecoratedDescriptor","keys","forEach","slice","reverse","reduce","_initializerWarningHelper","Error","DEFAULT_UI_OPTIONS","OAuthBase","Module","deps","dep","optional","_RcModuleV","_super","_this","_redirectUri","setOAuthReady","val","oAuthReady","_handleCallbackUri2","regeneratorRuntime","mark","_callee","callbackUri","refresh","query","message","_args","wrap","_callee$","_context","prev","next","undefined","parseCallbackUri","_refreshWithCallbackQuery","_loginWithCallbackQuery","t0","console","error","t1","authMessages","accessDenied","abrupt","internalError","_deps","alert","danger","payload","stop","_handleCallbackUri","_x","_loginWithCallbackQuery2","_callee2","_callee2$","_context2","code","access_token","auth","login","accessToken","expiresIn","expires_in","endpointId","endpoint_id","redirectUri","tokenType","token_type","scope","tokenUri","token_uri","discoveryUri","discovery_uri","_x2","_refreshWithCallbackQuery2","_callee3","_callee3$","_context3","refreshImplicitToken","_x3","_destroyOAuth","_callee4","_callee4$","_context4","destroyOAuth","_openOAuthPage","_callee5","_callee5$","_context5","openOAuthPage","get","_this$_deps$oAuthOpti","oAuthOptions","_this$_deps$oAuthOpti2","uiOptions","getLoginUrl","brandId","brand","defaultConfig","id","state","authState","display","localeId","locale","currentLocale","_uiOptions","implicit","isImplicit","force","prompt","btoa","concat","Date","now","URL","global","location","href","RcModuleV2","action","getOwnPropertyDescriptor","required","proxify","exports"],"sources":["lib/OAuthBase/OAuthBase.ts"],"sourcesContent":["import { Module } from '@ringcentral-integration/commons/lib/di';\nimport { proxify } from '@ringcentral-integration/commons/lib/proxy/proxify';\nimport required from '@ringcentral-integration/commons/lib/required';\nimport { authMessages } from '@ringcentral-integration/commons/modules/Auth';\nimport { action, RcModuleV2, state } from '@ringcentral-integration/core';\n\nimport parseCallbackUri from '../parseCallbackUri';\n\nimport type { Deps } from './OAuthBase.interface';\n\nconst DEFAULT_UI_OPTIONS: string[] = [];\n\ntype RefreshWithCallbackQueryParams = {\n  access_token?: string;\n  token_type?: string;\n  expires_in?: number;\n  endpoint_id?: string;\n  code?: string;\n  scope?: string;\n  token_uri?: string;\n  discovery_uri?: string;\n};\n\n@Module({\n  deps: [\n    'Auth',\n    'Alert',\n    'Locale',\n    'Brand',\n    { dep: 'TabManager', optional: true },\n    { dep: 'OAuthOptions', optional: true },\n  ],\n})\nexport class OAuthBase<T extends Deps = Deps> extends RcModuleV2<T> {\n  constructor(deps: T) {\n    super({\n      deps,\n    });\n\n    if (!this._redirectUri) {\n      throw new Error('redirectUri is required');\n    }\n  }\n\n  @state\n  oAuthReady = false;\n\n  @action\n  setOAuthReady(val: boolean) {\n    this.oAuthReady = val;\n  }\n\n  @required\n  get name(): string {\n    /* require implementation in descendent */\n    // @ts-expect-error TS(2322): Type 'null' is not assignable to type 'string'.\n    return null;\n  }\n\n  @proxify\n  protected async _handleCallbackUri(callbackUri: string, refresh = false) {\n    try {\n      const query = parseCallbackUri(callbackUri);\n      if (refresh) {\n        await this._refreshWithCallbackQuery(query);\n      } else {\n        await this._loginWithCallbackQuery(query);\n      }\n    } catch (error: any) {\n      console.error('oauth error: ', error);\n      let message;\n      // Error handling standard in callback uri\n      // https://openid.net/specs/openid-connect-core-1_0.html#AuthError\n      // Error handling standard in api response\n      // https://tools.ietf.org/html/rfc6749#section-4.1.2\n      switch (error.message) {\n        case 'invalid_request':\n        case 'unauthorized_client':\n        case 'access_denied':\n        case 'unsupported_response_type':\n        case 'invalid_scope':\n        case 'interaction_required':\n        case 'login_required':\n          message = authMessages.accessDenied;\n          break;\n        case 'server_error':\n        case 'temporarily_unavailable':\n        default:\n          message = authMessages.internalError;\n          break;\n      }\n      this._deps.alert.danger({\n        message,\n        payload: error,\n      });\n    }\n  }\n\n  protected async _loginWithCallbackQuery(\n    query: RefreshWithCallbackQueryParams,\n  ) {\n    if (!(query.code || query.access_token)) {\n      return;\n    }\n    await this._deps.auth.login({\n      code: query.code,\n      accessToken: query.access_token,\n      expiresIn: query.expires_in,\n      endpointId: query.endpoint_id,\n      redirectUri: this.redirectUri,\n      tokenType: query.token_type,\n      scope: query.scope,\n      tokenUri: query.token_uri,\n      discoveryUri: query.discovery_uri,\n    });\n  }\n\n  protected async _refreshWithCallbackQuery(\n    query: RefreshWithCallbackQueryParams,\n  ) {\n    if (!query.access_token) {\n      return;\n    }\n    await this._deps.auth.refreshImplicitToken({\n      tokenType: query.token_type,\n      accessToken: query.access_token,\n      expiresIn: query.expires_in,\n      endpointId: query.endpoint_id,\n    });\n  }\n\n  protected get _redirectUri() {\n    return this._deps.oAuthOptions?.redirectUri;\n  }\n\n  protected get _uiOptions() {\n    return this._deps.oAuthOptions?.uiOptions || DEFAULT_UI_OPTIONS;\n  }\n\n  @required\n  async destroyOAuth() {}\n\n  @required\n  async openOAuthPage() {}\n\n  get oAuthUri() {\n    return this._deps.auth.getLoginUrl({\n      redirectUri: this.redirectUri,\n      brandId: this._deps.brand.defaultConfig.id,\n      state: this.authState,\n      display: 'page',\n      localeId: this._deps.locale.currentLocale,\n      uiOptions: this._uiOptions,\n      implicit: this._deps.auth.isImplicit,\n      force: true,\n    });\n  }\n\n  get implicitRefreshOAuthUri() {\n    return this._deps.auth.getLoginUrl({\n      redirectUri: this.redirectUri,\n      brandId: this._deps.brand.id,\n      state: this.authState,\n      display: 'page',\n      prompt: 'none',\n      implicit: this._deps.auth.isImplicit,\n    });\n  }\n\n  get authState() {\n    return btoa(`${Date.now()}`);\n  }\n\n  get redirectUri() {\n    return new URL(this._redirectUri!, global.location.href).href;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;AAAA,IAAAA,GAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,SAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,KAAA,GAAAJ,OAAA;AACA,IAAAK,KAAA,GAAAL,OAAA;AAEA,IAAAM,iBAAA,GAAAH,sBAAA,CAAAH,OAAA;AAAmD,IAAAO,IAAA,EAAAC,MAAA,EAAAC,OAAA,EAAAC,WAAA;AAAA,SAAAP,uBAAAQ,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAAA,SAAAE,mBAAAC,CAAA,EAAAC,CAAA,EAAAJ,CAAA,EAAAK,CAAA,EAAAC,CAAA,EAAAC,CAAA,EAAAC,CAAA,cAAAC,CAAA,GAAAN,CAAA,CAAAI,CAAA,EAAAC,CAAA,GAAAE,CAAA,GAAAD,CAAA,CAAAE,KAAA,WAAAR,CAAA,gBAAAH,CAAA,CAAAG,CAAA,KAAAM,CAAA,CAAAG,IAAA,GAAAR,CAAA,CAAAM,CAAA,IAAAG,OAAA,CAAAC,OAAA,CAAAJ,CAAA,EAAAK,IAAA,CAAAV,CAAA,EAAAC,CAAA;AAAA,SAAAU,kBAAAb,CAAA,6BAAAC,CAAA,SAAAJ,CAAA,GAAAiB,SAAA,aAAAJ,OAAA,WAAAR,CAAA,EAAAC,CAAA,QAAAC,CAAA,GAAAJ,CAAA,CAAAe,KAAA,CAAAd,CAAA,EAAAJ,CAAA,YAAAmB,MAAAhB,CAAA,IAAAD,kBAAA,CAAAK,CAAA,EAAAF,CAAA,EAAAC,CAAA,EAAAa,KAAA,EAAAC,MAAA,UAAAjB,CAAA,cAAAiB,OAAAjB,CAAA,IAAAD,kBAAA,CAAAK,CAAA,EAAAF,CAAA,EAAAC,CAAA,EAAAa,KAAA,EAAAC,MAAA,WAAAjB,CAAA,KAAAgB,KAAA;AAAA,SAAAE,2BAAArB,CAAA,EAAAS,CAAA,EAAAJ,CAAA,EAAAiB,CAAA,IAAAjB,CAAA,IAAAkB,MAAA,CAAAC,cAAA,CAAAxB,CAAA,EAAAS,CAAA,IAAAgB,UAAA,EAAApB,CAAA,CAAAoB,UAAA,EAAAC,YAAA,EAAArB,CAAA,CAAAqB,YAAA,EAAAC,QAAA,EAAAtB,CAAA,CAAAsB,QAAA,EAAAhB,KAAA,EAAAN,CAAA,CAAAuB,WAAA,GAAAvB,CAAA,CAAAuB,WAAA,CAAAC,IAAA,CAAAP,CAAA;AAAA,SAAAQ,gBAAAvB,CAAA,EAAAJ,CAAA,UAAAI,CAAA,YAAAJ,CAAA,aAAA4B,SAAA;AAAA,SAAAC,kBAAAhC,CAAA,EAAAK,CAAA,aAAAD,CAAA,MAAAA,CAAA,GAAAC,CAAA,CAAA4B,MAAA,EAAA7B,CAAA,UAAAE,CAAA,GAAAD,CAAA,CAAAD,CAAA,GAAAE,CAAA,CAAAmB,UAAA,GAAAnB,CAAA,CAAAmB,UAAA,QAAAnB,CAAA,CAAAoB,YAAA,kBAAApB,CAAA,KAAAA,CAAA,CAAAqB,QAAA,QAAAJ,MAAA,CAAAC,cAAA,CAAAxB,CAAA,EAAAkC,cAAA,CAAA5B,CAAA,CAAA6B,GAAA,GAAA7B,CAAA;AAAA,SAAA8B,aAAApC,CAAA,EAAAK,CAAA,EAAAD,CAAA,WAAAC,CAAA,IAAA2B,iBAAA,CAAAhC,CAAA,CAAAqC,SAAA,EAAAhC,CAAA,GAAAD,CAAA,IAAA4B,iBAAA,CAAAhC,CAAA,EAAAI,CAAA,GAAAmB,MAAA,CAAAC,cAAA,CAAAxB,CAAA,iBAAA2B,QAAA,SAAA3B,CAAA;AAAA,SAAAkC,eAAA9B,CAAA,QAAAK,CAAA,GAAA6B,YAAA,CAAAlC,CAAA,gCAAAmC,OAAA,CAAA9B,CAAA,IAAAA,CAAA,GAAAA,CAAA;AAAA,SAAA6B,aAAAlC,CAAA,EAAAC,CAAA,oBAAAkC,OAAA,CAAAnC,CAAA,MAAAA,CAAA,SAAAA,CAAA,MAAAJ,CAAA,GAAAI,CAAA,CAAAoC,MAAA,CAAAC,WAAA,kBAAAzC,CAAA,QAAAS,CAAA,GAAAT,CAAA,CAAA6B,IAAA,CAAAzB,CAAA,EAAAC,CAAA,gCAAAkC,OAAA,CAAA9B,CAAA,UAAAA,CAAA,YAAAsB,SAAA,yEAAA1B,CAAA,GAAAqC,MAAA,GAAAC,MAAA,EAAAvC,CAAA;AAAA,SAAAwC,UAAAxC,CAAA,EAAAJ,CAAA,6BAAAA,CAAA,aAAAA,CAAA,YAAA+B,SAAA,wDAAA3B,CAAA,CAAAiC,SAAA,GAAAd,MAAA,CAAAsB,MAAA,CAAA7C,CAAA,IAAAA,CAAA,CAAAqC,SAAA,IAAAS,WAAA,IAAAnC,KAAA,EAAAP,CAAA,EAAAuB,QAAA,MAAAD,YAAA,WAAAH,MAAA,CAAAC,cAAA,CAAApB,CAAA,iBAAAuB,QAAA,SAAA3B,CAAA,IAAA+C,eAAA,CAAA3C,CAAA,EAAAJ,CAAA;AAAA,SAAA+C,gBAAA3C,CAAA,EAAAJ,CAAA,WAAA+C,eAAA,GAAAxB,MAAA,CAAAyB,cAAA,GAAAzB,MAAA,CAAAyB,cAAA,CAAAC,IAAA,eAAA7C,CAAA,EAAAJ,CAAA,WAAAI,CAAA,CAAA8C,SAAA,GAAAlD,CAAA,EAAAI,CAAA,KAAA2C,eAAA,CAAA3C,CAAA,EAAAJ,CAAA;AAAA,SAAAmD,aAAA/C,CAAA,QAAAC,CAAA,GAAA+C,yBAAA,6BAAApD,CAAA,EAAAM,CAAA,GAAA+C,eAAA,CAAAjD,CAAA,OAAAC,CAAA,QAAAiD,CAAA,GAAAD,eAAA,OAAAP,WAAA,EAAA9C,CAAA,GAAAuD,OAAA,CAAAC,SAAA,CAAAlD,CAAA,EAAAW,SAAA,EAAAqC,CAAA,UAAAtD,CAAA,GAAAM,CAAA,CAAAY,KAAA,OAAAD,SAAA,UAAAwC,0BAAA,OAAAzD,CAAA;AAAA,SAAAyD,2BAAArD,CAAA,EAAAJ,CAAA,QAAAA,CAAA,iBAAAuC,OAAA,CAAAvC,CAAA,0BAAAA,CAAA,UAAAA,CAAA,iBAAAA,CAAA,YAAA+B,SAAA,qEAAA2B,sBAAA,CAAAtD,CAAA;AAAA,SAAAsD,uBAAA1D,CAAA,mBAAAA,CAAA,YAAA2D,cAAA,sEAAA3D,CAAA;AAAA,SAAAoD,0BAAA,cAAAhD,CAAA,IAAAwD,OAAA,CAAAvB,SAAA,CAAAwB,OAAA,CAAAhC,IAAA,CAAA0B,OAAA,CAAAC,SAAA,CAAAI,OAAA,iCAAAxD,CAAA,aAAAgD,yBAAA,YAAAA,0BAAA,aAAAhD,CAAA;AAAA,SAAAiD,gBAAAjD,CAAA,WAAAiD,eAAA,GAAA9B,MAAA,CAAAyB,cAAA,GAAAzB,MAAA,CAAAuC,cAAA,CAAAb,IAAA,eAAA7C,CAAA,WAAAA,CAAA,CAAA8C,SAAA,IAAA3B,MAAA,CAAAuC,cAAA,CAAA1D,CAAA,MAAAiD,eAAA,CAAAjD,CAAA;AAAA,SAAA2D,0BAAAtD,CAAA,EAAAT,CAAA,EAAAK,CAAA,EAAAF,CAAA,EAAAmB,CAAA,QAAAf,CAAA,cAAAgB,MAAA,CAAAyC,IAAA,CAAA7D,CAAA,EAAA8D,OAAA,WAAAxD,CAAA,IAAAF,CAAA,CAAAE,CAAA,IAAAN,CAAA,CAAAM,CAAA,OAAAF,CAAA,CAAAkB,UAAA,KAAAlB,CAAA,CAAAkB,UAAA,EAAAlB,CAAA,CAAAmB,YAAA,KAAAnB,CAAA,CAAAmB,YAAA,cAAAnB,CAAA,IAAAA,CAAA,CAAAqB,WAAA,MAAArB,CAAA,CAAAoB,QAAA,QAAApB,CAAA,GAAAF,CAAA,CAAA6D,KAAA,GAAAC,OAAA,GAAAC,MAAA,WAAA/D,CAAA,EAAAF,CAAA,WAAAA,CAAA,CAAAM,CAAA,EAAAT,CAAA,EAAAK,CAAA,KAAAA,CAAA,KAAAE,CAAA,GAAAe,CAAA,eAAAf,CAAA,CAAAqB,WAAA,KAAArB,CAAA,CAAAI,KAAA,GAAAJ,CAAA,CAAAqB,WAAA,GAAArB,CAAA,CAAAqB,WAAA,CAAAC,IAAA,CAAAP,CAAA,YAAAf,CAAA,CAAAqB,WAAA,uBAAArB,CAAA,CAAAqB,WAAA,IAAAL,MAAA,CAAAC,cAAA,CAAAf,CAAA,EAAAT,CAAA,EAAAO,CAAA,WAAAA,CAAA;AAAA,SAAA8D,0BAAAhE,CAAA,EAAAL,CAAA,UAAAsE,KAAA;AAInD,IAAMC,kBAA4B,GAAG,EAAE;AAAC,IAuB3BC,SAAS,IAAA5E,IAAA,GAVrB,IAAA6E,UAAM,EAAC;EACNC,IAAI,EAAE,CACJ,MAAM,EACN,OAAO,EACP,QAAQ,EACR,OAAO,EACP;IAAEC,GAAG,EAAE,YAAY;IAAEC,QAAQ,EAAE;EAAK,CAAC,EACrC;IAAED,GAAG,EAAE,cAAc;IAAEC,QAAQ,EAAE;EAAK,CAAC;AAE3C,CAAC,CAAC,EAAAhF,IAAA,CAAAC,MAAA,IAAAC,OAAA,0BAAA+E,UAAA;EAAAjC,SAAA,CAAA4B,SAAA,EAAAK,UAAA;EAAA,IAAAC,MAAA,GAAA3B,YAAA,CAAAqB,SAAA;EAEA,SAAAA,UAAYE,IAAO,EAAE;IAAA,IAAAK,KAAA;IAAAjD,eAAA,OAAA0C,SAAA;IACnBO,KAAA,GAAAD,MAAA,CAAAjD,IAAA,OAAM;MACJ6C,IAAI,EAAJA;IACF,CAAC;IAAErD,0BAAA,CAAA0D,KAAA,gBAAAhF,WAAA,EAAA2D,sBAAA,CAAAqB,KAAA;IAEH,IAAI,CAACA,KAAA,CAAKC,YAAY,EAAE;MACtB,MAAM,IAAIV,KAAK,CAAC,yBAAyB,CAAC;IAC5C;IAAC,OAAAS,KAAA;EACH;EAAC3C,YAAA,CAAAoC,SAAA;IAAArC,GAAA;IAAAxB,KAAA,WAAAsE,cAMaC,GAAY,EAAE;MAC1B,IAAI,CAACC,UAAU,GAAGD,GAAG;IACvB;EAAC;IAAA/C,GAAA;IAAAxB,KAAA;MAAA,IAAAyE,mBAAA,GAAApE,iBAAA,eAAAqE,kBAAA,CAAAC,IAAA,UAAAC,QAUkCC,WAAmB;QAAA,IAAAC,OAAA;UAAAC,KAAA;UAAAC,OAAA;UAAAC,KAAA,GAAA3E,SAAA;QAAA,OAAAoE,kBAAA,CAAAQ,IAAA,UAAAC,SAAAC,QAAA;UAAA;YAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;cAAA;gBAAER,OAAO,GAAAG,KAAA,CAAA3D,MAAA,QAAA2D,KAAA,QAAAM,SAAA,GAAAN,KAAA,MAAG,KAAK;gBAAAG,QAAA,CAAAC,IAAA;gBAE7DN,KAAK,GAAG,IAAAS,4BAAgB,EAACX,WAAW,CAAC;gBAAA,KACvCC,OAAO;kBAAAM,QAAA,CAAAE,IAAA;kBAAA;gBAAA;gBAAAF,QAAA,CAAAE,IAAA;gBAAA,OACH,IAAI,CAACG,yBAAyB,CAACV,KAAK,CAAC;cAAA;gBAAAK,QAAA,CAAAE,IAAA;gBAAA;cAAA;gBAAAF,QAAA,CAAAE,IAAA;gBAAA,OAErC,IAAI,CAACI,uBAAuB,CAACX,KAAK,CAAC;cAAA;gBAAAK,QAAA,CAAAE,IAAA;gBAAA;cAAA;gBAAAF,QAAA,CAAAC,IAAA;gBAAAD,QAAA,CAAAO,EAAA,GAAAP,QAAA;gBAG3CQ,OAAO,CAACC,KAAK,CAAC,eAAe,EAAAT,QAAA,CAAAO,EAAO,CAAC;gBAACP,QAAA,CAAAU,EAAA,GAM9BV,QAAA,CAAAO,EAAA,CAAMX,OAAO;gBAAAI,QAAA,CAAAE,IAAA,GAAAF,QAAA,CAAAU,EAAA,KACd,iBAAiB,QAAAV,QAAA,CAAAU,EAAA,KACjB,qBAAqB,QAAAV,QAAA,CAAAU,EAAA,KACrB,eAAe,QAAAV,QAAA,CAAAU,EAAA,KACf,2BAA2B,QAAAV,QAAA,CAAAU,EAAA,KAC3B,eAAe,QAAAV,QAAA,CAAAU,EAAA,KACf,sBAAsB,QAAAV,QAAA,CAAAU,EAAA,KACtB,gBAAgB,QAAAV,QAAA,CAAAU,EAAA,KAGhB,cAAc,QAAAV,QAAA,CAAAU,EAAA,KACd,yBAAyB;gBAAA;cAAA;gBAH5Bd,OAAO,GAAGe,kBAAY,CAACC,YAAY;gBAAC,OAAAZ,QAAA,CAAAa,MAAA;cAAA;gBAKpCjB,OAAO,GAAGe,kBAAY,CAACG,aAAa;gBAAC,OAAAd,QAAA,CAAAa,MAAA;cAAA;gBAGzC,IAAI,CAACE,KAAK,CAACC,KAAK,CAACC,MAAM,CAAC;kBACtBrB,OAAO,EAAPA,OAAO;kBACPsB,OAAO,EAAAlB,QAAA,CAAAO;gBACT,CAAC,CAAC;cAAC;cAAA;gBAAA,OAAAP,QAAA,CAAAmB,IAAA;YAAA;UAAA;QAAA,GAAA3B,OAAA;MAAA;MAAA,SAAA4B,mBAAAC,EAAA;QAAA,OAAAhC,mBAAA,CAAAlE,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAkG,kBAAA;IAAA;EAAA;IAAAhF,GAAA;IAAAxB,KAAA;MAAA,IAAA0G,wBAAA,GAAArG,iBAAA,eAAAqE,kBAAA,CAAAC,IAAA,UAAAgC,SAKL5B,KAAqC;QAAA,OAAAL,kBAAA,CAAAQ,IAAA,UAAA0B,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAAxB,IAAA,GAAAwB,SAAA,CAAAvB,IAAA;cAAA;gBAAA,IAE/BP,KAAK,CAAC+B,IAAI,IAAI/B,KAAK,CAACgC,YAAY;kBAAAF,SAAA,CAAAvB,IAAA;kBAAA;gBAAA;gBAAA,OAAAuB,SAAA,CAAAZ,MAAA;cAAA;gBAAAY,SAAA,CAAAvB,IAAA;gBAAA,OAGhC,IAAI,CAACa,KAAK,CAACa,IAAI,CAACC,KAAK,CAAC;kBAC1BH,IAAI,EAAE/B,KAAK,CAAC+B,IAAI;kBAChBI,WAAW,EAAEnC,KAAK,CAACgC,YAAY;kBAC/BI,SAAS,EAAEpC,KAAK,CAACqC,UAAU;kBAC3BC,UAAU,EAAEtC,KAAK,CAACuC,WAAW;kBAC7BC,WAAW,EAAE,IAAI,CAACA,WAAW;kBAC7BC,SAAS,EAAEzC,KAAK,CAAC0C,UAAU;kBAC3BC,KAAK,EAAE3C,KAAK,CAAC2C,KAAK;kBAClBC,QAAQ,EAAE5C,KAAK,CAAC6C,SAAS;kBACzBC,YAAY,EAAE9C,KAAK,CAAC+C;gBACtB,CAAC,CAAC;cAAA;cAAA;gBAAA,OAAAjB,SAAA,CAAAN,IAAA;YAAA;UAAA;QAAA,GAAAI,QAAA;MAAA;MAAA,SAAAjB,wBAAAqC,GAAA;QAAA,OAAArB,wBAAA,CAAAnG,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAoF,uBAAA;IAAA;EAAA;IAAAlE,GAAA;IAAAxB,KAAA;MAAA,IAAAgI,0BAAA,GAAA3H,iBAAA,eAAAqE,kBAAA,CAAAC,IAAA,UAAAsD,SAIFlD,KAAqC;QAAA,OAAAL,kBAAA,CAAAQ,IAAA,UAAAgD,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAA9C,IAAA,GAAA8C,SAAA,CAAA7C,IAAA;cAAA;gBAAA,IAEhCP,KAAK,CAACgC,YAAY;kBAAAoB,SAAA,CAAA7C,IAAA;kBAAA;gBAAA;gBAAA,OAAA6C,SAAA,CAAAlC,MAAA;cAAA;gBAAAkC,SAAA,CAAA7C,IAAA;gBAAA,OAGjB,IAAI,CAACa,KAAK,CAACa,IAAI,CAACoB,oBAAoB,CAAC;kBACzCZ,SAAS,EAAEzC,KAAK,CAAC0C,UAAU;kBAC3BP,WAAW,EAAEnC,KAAK,CAACgC,YAAY;kBAC/BI,SAAS,EAAEpC,KAAK,CAACqC,UAAU;kBAC3BC,UAAU,EAAEtC,KAAK,CAACuC;gBACpB,CAAC,CAAC;cAAA;cAAA;gBAAA,OAAAa,SAAA,CAAA5B,IAAA;YAAA;UAAA;QAAA,GAAA0B,QAAA;MAAA;MAAA,SAAAxC,0BAAA4C,GAAA;QAAA,OAAAL,0BAAA,CAAAzH,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAmF,yBAAA;IAAA;EAAA;IAAAjE,GAAA;IAAAxB,KAAA;MAAA,IAAAsI,aAAA,GAAAjI,iBAAA,eAAAqE,kBAAA,CAAAC,IAAA,UAAA4D,SAAA;QAAA,OAAA7D,kBAAA,CAAAQ,IAAA,UAAAsD,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAApD,IAAA,GAAAoD,SAAA,CAAAnD,IAAA;cAAA;cAAA;gBAAA,OAAAmD,SAAA,CAAAlC,IAAA;YAAA;UAAA;QAAA,GAAAgC,QAAA;MAAA;MAAA,SAAAG,aAAA;QAAA,OAAAJ,aAAA,CAAA/H,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAoI,YAAA;IAAA;EAAA;IAAAlH,GAAA;IAAAxB,KAAA;MAAA,IAAA2I,cAAA,GAAAtI,iBAAA,eAAAqE,kBAAA,CAAAC,IAAA,UAAAiE,SAAA;QAAA,OAAAlE,kBAAA,CAAAQ,IAAA,UAAA2D,UAAAC,SAAA;UAAA;YAAA,QAAAA,SAAA,CAAAzD,IAAA,GAAAyD,SAAA,CAAAxD,IAAA;cAAA;cAAA;gBAAA,OAAAwD,SAAA,CAAAvC,IAAA;YAAA;UAAA;QAAA,GAAAqC,QAAA;MAAA;MAAA,SAAAG,cAAA;QAAA,OAAAJ,cAAA,CAAApI,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAAyI,aAAA;IAAA;EAAA;IAAAvH,GAAA;IAAAwH,GAAA,WAAAA,IAAA,EA3Ee;MACjB;MACA;MACA,OAAO,IAAI;IACb;EAAC;IAAAxH,GAAA;IAAAwH,GAAA,WAAAA,IAAA,EA0E4B;MAAA,IAAAC,qBAAA;MAC3B,QAAAA,qBAAA,GAAO,IAAI,CAAC9C,KAAK,CAAC+C,YAAY,cAAAD,qBAAA,uBAAvBA,qBAAA,CAAyB1B,WAAW;IAC7C;EAAC;IAAA/F,GAAA;IAAAwH,GAAA,WAAAA,IAAA,EAE0B;MAAA,IAAAG,sBAAA;MACzB,OAAO,EAAAA,sBAAA,OAAI,CAAChD,KAAK,CAAC+C,YAAY,cAAAC,sBAAA,uBAAvBA,sBAAA,CAAyBC,SAAS,KAAIxF,kBAAkB;IACjE;EAAC;IAAApC,GAAA;IAAAwH,GAAA,WAAAA,IAAA,EAQc;MACb,OAAO,IAAI,CAAC7C,KAAK,CAACa,IAAI,CAACqC,WAAW,CAAC;QACjC9B,WAAW,EAAE,IAAI,CAACA,WAAW;QAC7B+B,OAAO,EAAE,IAAI,CAACnD,KAAK,CAACoD,KAAK,CAACC,aAAa,CAACC,EAAE;QAC1CC,KAAK,EAAE,IAAI,CAACC,SAAS;QACrBC,OAAO,EAAE,MAAM;QACfC,QAAQ,EAAE,IAAI,CAAC1D,KAAK,CAAC2D,MAAM,CAACC,aAAa;QACzCX,SAAS,EAAE,IAAI,CAACY,UAAU;QAC1BC,QAAQ,EAAE,IAAI,CAAC9D,KAAK,CAACa,IAAI,CAACkD,UAAU;QACpCC,KAAK,EAAE;MACT,CAAC,CAAC;IACJ;EAAC;IAAA3I,GAAA;IAAAwH,GAAA,WAAAA,IAAA,EAE6B;MAC5B,OAAO,IAAI,CAAC7C,KAAK,CAACa,IAAI,CAACqC,WAAW,CAAC;QACjC9B,WAAW,EAAE,IAAI,CAACA,WAAW;QAC7B+B,OAAO,EAAE,IAAI,CAACnD,KAAK,CAACoD,KAAK,CAACE,EAAE;QAC5BC,KAAK,EAAE,IAAI,CAACC,SAAS;QACrBC,OAAO,EAAE,MAAM;QACfQ,MAAM,EAAE,MAAM;QACdH,QAAQ,EAAE,IAAI,CAAC9D,KAAK,CAACa,IAAI,CAACkD;MAC5B,CAAC,CAAC;IACJ;EAAC;IAAA1I,GAAA;IAAAwH,GAAA,WAAAA,IAAA,EAEe;MACd,OAAOqB,IAAI,IAAAC,MAAA,CAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE,CAAC;IAC9B;EAAC;IAAAhJ,GAAA;IAAAwH,GAAA,WAAAA,IAAA,EAEiB;MAChB,OAAO,IAAIyB,GAAG,CAAC,IAAI,CAACpG,YAAY,EAAGqG,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC,CAACA,IAAI;IAC/D;EAAC;EAAA,OAAA/G,SAAA;AAAA,EA9ImDgH,gBAAU,IAAAzL,WAAA,GAAAgE,yBAAA,CAAAjE,OAAA,CAAAuC,SAAA,iBAW7DgI,WAAK;EAAA3I,YAAA;EAAAD,UAAA;EAAAE,QAAA;EAAAC,WAAA,WAAAA,YAAA;IAAA,OACO,KAAK;EAAA;AAAA,IAAAmC,yBAAA,CAAAjE,OAAA,CAAAuC,SAAA,oBAEjBoJ,YAAM,GAAAlK,MAAA,CAAAmK,wBAAA,CAAA5L,OAAA,CAAAuC,SAAA,oBAAAvC,OAAA,CAAAuC,SAAA,GAAA0B,yBAAA,CAAAjE,OAAA,CAAAuC,SAAA,WAKNsJ,oBAAQ,GAAApK,MAAA,CAAAmK,wBAAA,CAAA5L,OAAA,CAAAuC,SAAA,WAAAvC,OAAA,CAAAuC,SAAA,GAAA0B,yBAAA,CAAAjE,OAAA,CAAAuC,SAAA,yBAORuJ,gBAAO,GAAArK,MAAA,CAAAmK,wBAAA,CAAA5L,OAAA,CAAAuC,SAAA,yBAAAvC,OAAA,CAAAuC,SAAA,GAAA0B,yBAAA,CAAAjE,OAAA,CAAAuC,SAAA,mBAgFPsJ,oBAAQ,GAAApK,MAAA,CAAAmK,wBAAA,CAAA5L,OAAA,CAAAuC,SAAA,mBAAAvC,OAAA,CAAAuC,SAAA,GAAA0B,yBAAA,CAAAjE,OAAA,CAAAuC,SAAA,oBAGRsJ,oBAAQ,GAAApK,MAAA,CAAAmK,wBAAA,CAAA5L,OAAA,CAAAuC,SAAA,oBAAAvC,OAAA,CAAAuC,SAAA,IAAAvC,OAAA,MAAAD,MAAA;AAAAgM,OAAA,CAAArH,SAAA,GAAAA,SAAA","ignoreList":[]}