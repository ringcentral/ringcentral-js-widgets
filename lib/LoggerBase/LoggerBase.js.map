{"version":3,"file":"LoggerBase.js","names":["_core","require","_proxify","_loggerBaseHelper","_dec","_class","_descriptor","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","keys","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_initializerDefineProperty","property","descriptor","context","defineProperty","enumerable","configurable","writable","initializer","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","obj","_toPropertyKey","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","_createClass","protoProps","staticProps","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","res","Number","_get","Reflect","get","bind","receiver","base","_superPropBase","desc","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","decorators","slice","reverse","reduce","decorator","_initializerWarningHelper","Error","LoggerBase","computed","that","loggingList","_RcModuleV","_super","deps","options","_this","_identityFunction","defaultIdentityFunction","_logFunction","_readyCheckFunction","_logPromises","Map","setLoggingList","id","filterLoggingListById","item","resetLoggingList","_shouldInit","_shouldReset","ready","onReset","_log2","regeneratorRuntime","mark","_callee","_ref","promise","wrap","_callee$","_context","prev","next","concat","name","has","set","t0","stop","_log","_x","_log3","_callee2","_ref2","_callee2$","_context2","log","_x2","convertListToMap","RcModuleV2","state","action","proxify","exports"],"sources":["lib/LoggerBase/LoggerBase.ts"],"sourcesContent":["import {\n  action,\n  computed,\n  RcModuleV2,\n  state,\n} from '@ringcentral-integration/core';\n\nimport { proxify } from '../proxy/proxify';\nimport type { Deps, LogOptions, Options } from './LoggerBase.interface';\nimport { convertListToMap, defaultIdentityFunction } from './loggerBaseHelper';\n\nexport abstract class LoggerBase<T extends Deps = Deps> extends RcModuleV2<T> {\n  protected _identityFunction: (...args: any) => string =\n    defaultIdentityFunction;\n\n  abstract _logFunction: <P, S>(options: LogOptions<P, S>) => Promise<void>;\n\n  abstract _readyCheckFunction: () => boolean;\n\n  protected _logPromises = new Map<string, Promise<void>>();\n\n  constructor(deps: T, options: Options) {\n    super({\n      deps,\n      ...options,\n    });\n  }\n\n  @state\n  loggingList: string[] = [];\n\n  @action\n  setLoggingList(id: string) {\n    if (this.loggingList.indexOf(id) === -1) {\n      this.loggingList.push(id);\n    }\n  }\n\n  @action\n  filterLoggingListById(id: string) {\n    this.loggingList = this.loggingList.filter((item) => item !== id);\n  }\n\n  @action\n  resetLoggingList() {\n    this.loggingList = [];\n  }\n\n  override _shouldInit() {\n    return !!(super._shouldInit() && this._readyCheckFunction());\n  }\n\n  override _shouldReset() {\n    return !!(\n      super._shouldReset() ||\n      (this.ready && !this._readyCheckFunction())\n    );\n  }\n\n  override onReset() {\n    this.resetLoggingList();\n  }\n\n  @proxify\n  async _log<P, S>({ item, ...options }: LogOptions<P, S>) {\n    if (!this.ready) {\n      throw new Error(`${this.constructor.name}._log: module is not ready.`);\n    }\n    if (!item) {\n      throw new Error(\n        `${this.constructor.name}._log: options.item is undefined.`,\n      );\n    }\n\n    const id = this._identityFunction(item);\n    // wait for the previous log action to finish\n    if (this._logPromises.has(id)) {\n      await this._logPromises.get(id);\n    }\n    try {\n      this.setLoggingList(id);\n      const promise = this._logFunction({ item, ...options });\n      this._logPromises.set(id, promise);\n      await promise;\n      this._logPromises.delete(id);\n      this.filterLoggingListById(id);\n    } catch (error: any /** TODO: confirm with instanceof */) {\n      this._logPromises.delete(id);\n      this.filterLoggingListById(id);\n      throw error;\n    }\n  }\n\n  @proxify\n  async log<P, S>({ item, ...options }: LogOptions<P, S>) {\n    if (!this.ready) {\n      throw new Error(`${this.constructor.name}.log: module is not ready.`);\n    }\n    if (!item) {\n      throw new Error(\n        `${this.constructor.name}.log: options.item is undefined.`,\n      );\n    }\n    await this._log({ item, ...options });\n  }\n\n  @computed((that: LoggerBase) => [that.loggingList])\n  get loggingMap() {\n    return convertListToMap(this.loggingList);\n  }\n}\n"],"mappings":"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"}