{"version":3,"sources":["lib/IframeMessageTransport/index.ts"],"names":["IframeMessageTransport","targetIframe","targetWindow","_onMessage","msg","data","_distributeMessage","_targetIframe","_targetWindow","window","addEventListener","removeEventListener","target","contentWindow","postMessage","MessageTransportCore"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;IAEqBA,sB;;;;;AACnB,wCAA4C;AAAA;;AAAA,QAA9BC,YAA8B,QAA9BA,YAA8B;AAAA,QAAhBC,YAAgB,QAAhBA,YAAgB;;AAAA;;AAC1C;;AAD0C,UAM5CC,UAN4C,GAM/B,UAACC,GAAD,EAAS;AACpB,UAAIA,GAAG,IAAIA,GAAG,CAACC,IAAf,EAAqB;AACnB,cAAKC,kBAAL,CAAwBF,GAAG,CAACC,IAA5B;AACD;AACF,KAV2C;;AAE1C,UAAKE,aAAL,GAAqBN,YAArB;AACA,UAAKO,aAAL,GAAqBN,YAArB;AACAO,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,MAAKP,UAAxC;AAJ0C;AAK3C;;;;8BAOS;AACRM,MAAAA,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsC,KAAKR,UAA3C;AACD;;;gCACWC,G,EAAK;AACf,UAAMQ,MAAM,GACV,KAAKJ,aAAL,IACC,KAAKD,aAAL,IAAsB,KAAKA,aAAL,CAAmBM,aAF5C;;AAGA,UAAID,MAAJ,EAAY;AACVA,QAAAA,MAAM,CAACE,WAAP,CAAmBV,GAAnB,EAAwB,GAAxB;AACD;AACF;;;;EAvBiDW,iC","sourcesContent":["import MessageTransportCore from '../MessageTransportCore';\n\nexport default class IframeMessageTransport extends MessageTransportCore {\n  constructor({ targetIframe, targetWindow }) {\n    super();\n    this._targetIframe = targetIframe;\n    this._targetWindow = targetWindow;\n    window.addEventListener('message', this._onMessage);\n  }\n  _onMessage = (msg) => {\n    if (msg && msg.data) {\n      this._distributeMessage(msg.data);\n    }\n  };\n\n  dispose() {\n    window.removeEventListener('message', this._onMessage);\n  }\n  postMessage(msg) {\n    const target =\n      this._targetWindow ||\n      (this._targetIframe && this._targetIframe.contentWindow);\n    if (target) {\n      target.postMessage(msg, '*');\n    }\n  }\n}\n"],"file":"index.js"}