{"version":3,"file":"decorators.js","names":["_RcModule","require","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","Symbol","iterator","isArray","length","e","n","globalStorage","target","key","descriptor","_target$globalStorage","stateKey","Error","concat","globalStorageStateKey","exports","storage","_target$storageStateK","storageStateKey"],"sources":["lib/RcModule/decorators.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport type { RcModuleV2 } from './RcModule';\nimport { storageStateKey, globalStorageStateKey, stateKey } from './RcModule';\n\nexport interface Descriptor<T> extends TypedPropertyDescriptor<T> {\n  initializer?(): T;\n}\n\n/**\n * decorate global storage state with `GlobalStorage` Module\n */\nexport const globalStorage = (\n  target: RcModuleV2,\n  key: string,\n  descriptor?: Descriptor<unknown>,\n) => {\n  if (!(key in target[stateKey])) {\n    throw new Error(\n      `The ${key} must be decorated with '@state' first, and it must be a Redux state to be a persistent state`,\n    );\n  }\n  target[globalStorageStateKey] = [\n    ...(target[globalStorageStateKey] ?? []),\n    key,\n  ];\n};\n\n/**\n * decorate storage state with `Storage` Module\n */\nexport const storage = (\n  target: RcModuleV2,\n  key: string,\n  descriptor?: Descriptor<unknown>,\n) => {\n  if (!(key in target[stateKey])) {\n    throw new Error(\n      `The ${key} must be decorated with '@state' first, and it must be a Redux state to be a persistent state`,\n    );\n  }\n  target[storageStateKey] = [...(target[storageStateKey] ?? []), key];\n};\n"],"mappings":";;;;;;;AAEA,IAAAA,SAAA,GAAAC,OAAA;AAA8E,SAAAC,mBAAAC,CAAA,WAAAC,kBAAA,CAAAD,CAAA,KAAAE,gBAAA,CAAAF,CAAA,KAAAG,2BAAA,CAAAH,CAAA,KAAAI,kBAAA;AAAA,SAAAA,mBAAA,cAAAC,SAAA;AAAA,SAAAF,4BAAAH,CAAA,EAAAM,CAAA,QAAAN,CAAA,2BAAAA,CAAA,SAAAO,iBAAA,CAAAP,CAAA,EAAAM,CAAA,OAAAE,CAAA,MAAAC,QAAA,CAAAC,IAAA,CAAAV,CAAA,EAAAW,KAAA,6BAAAH,CAAA,IAAAR,CAAA,CAAAY,WAAA,KAAAJ,CAAA,GAAAR,CAAA,CAAAY,WAAA,CAAAC,IAAA,aAAAL,CAAA,cAAAA,CAAA,GAAAM,KAAA,CAAAC,IAAA,CAAAf,CAAA,oBAAAQ,CAAA,+CAAAQ,IAAA,CAAAR,CAAA,IAAAD,iBAAA,CAAAP,CAAA,EAAAM,CAAA;AAAA,SAAAJ,iBAAAF,CAAA,8BAAAiB,MAAA,YAAAjB,CAAA,CAAAiB,MAAA,CAAAC,QAAA,aAAAlB,CAAA,uBAAAc,KAAA,CAAAC,IAAA,CAAAf,CAAA;AAAA,SAAAC,mBAAAD,CAAA,QAAAc,KAAA,CAAAK,OAAA,CAAAnB,CAAA,UAAAO,iBAAA,CAAAP,CAAA;AAAA,SAAAO,kBAAAP,CAAA,EAAAM,CAAA,aAAAA,CAAA,IAAAA,CAAA,GAAAN,CAAA,CAAAoB,MAAA,MAAAd,CAAA,GAAAN,CAAA,CAAAoB,MAAA,YAAAC,CAAA,MAAAC,CAAA,GAAAR,KAAA,CAAAR,CAAA,GAAAe,CAAA,GAAAf,CAAA,EAAAe,CAAA,MAAAC,CAAA,CAAAD,CAAA,IAAArB,CAAA,CAAAqB,CAAA,YAAAC,CAAA,IAF9E;AAQA;AACA;AACA;AACO,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CACxBC,MAAkB,EAClBC,GAAW,EACXC,UAAgC,EAC7B;EAAA,IAAAC,qBAAA;EACH,IAAI,EAAEF,GAAG,IAAID,MAAM,CAACI,kBAAQ,CAAC,CAAC,EAAE;IAC9B,MAAM,IAAIC,KAAK,QAAAC,MAAA,CACNL,GAAG,kGACZ,CAAC;EACH;EACAD,MAAM,CAACO,+BAAqB,CAAC,MAAAD,MAAA,CAAA/B,kBAAA,EAAA4B,qBAAA,GACvBH,MAAM,CAACO,+BAAqB,CAAC,cAAAJ,qBAAA,cAAAA,qBAAA,GAAI,EAAE,IACvCF,GAAG,EACJ;AACH,CAAC;;AAED;AACA;AACA;AAFAO,OAAA,CAAAT,aAAA,GAAAA,aAAA;AAGO,IAAMU,OAAO,GAAG,SAAVA,OAAOA,CAClBT,MAAkB,EAClBC,GAAW,EACXC,UAAgC,EAC7B;EAAA,IAAAQ,qBAAA;EACH,IAAI,EAAET,GAAG,IAAID,MAAM,CAACI,kBAAQ,CAAC,CAAC,EAAE;IAC9B,MAAM,IAAIC,KAAK,QAAAC,MAAA,CACNL,GAAG,kGACZ,CAAC;EACH;EACAD,MAAM,CAACW,yBAAe,CAAC,MAAAL,MAAA,CAAA/B,kBAAA,EAAAmC,qBAAA,GAAQV,MAAM,CAACW,yBAAe,CAAC,cAAAD,qBAAA,cAAAA,qBAAA,GAAI,EAAE,IAAGT,GAAG,EAAC;AACrE,CAAC;AAACO,OAAA,CAAAC,OAAA,GAAAA,OAAA","ignoreList":[]}