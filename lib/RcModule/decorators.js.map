{"version":3,"file":"decorators.js","names":["globalStorage","target","key","descriptor","stateKey","Error","globalStorageStateKey","storage","storageStateKey"],"sources":["lib/RcModule/decorators.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport {\n  storageStateKey,\n  globalStorageStateKey,\n  RcModuleV2,\n  stateKey,\n} from './RcModule';\n\nexport interface Descriptor<T> extends TypedPropertyDescriptor<T> {\n  initializer?(): T;\n}\n\n/**\n * decorate global storage state with `GlobalStorage` Module\n */\nexport const globalStorage = (\n  target: RcModuleV2,\n  key: string,\n  descriptor?: Descriptor<unknown>,\n) => {\n  if (!(key in target[stateKey])) {\n    throw new Error(\n      `The ${key} must be decorated with '@state' first, and it must be a Redux state to be a persistent state`,\n    );\n  }\n  target[globalStorageStateKey] = [\n    ...(target[globalStorageStateKey] ?? []),\n    key,\n  ];\n};\n\n/**\n * decorate storage state with `Storage` Module\n */\nexport const storage = (\n  target: RcModuleV2,\n  key: string,\n  descriptor?: Descriptor<unknown>,\n) => {\n  if (!(key in target[stateKey])) {\n    throw new Error(\n      `The ${key} must be decorated with '@state' first, and it must be a Redux state to be a persistent state`,\n    );\n  }\n  target[storageStateKey] = [...(target[storageStateKey] ?? []), key];\n};\n"],"mappings":";;;;;;;;;AACA;;;;;;;;;;;;;;AAWA;AACA;AACA;AACO,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,CAC3BC,MAD2B,EAE3BC,GAF2B,EAG3BC,UAH2B,EAIxB;EAAA;;EACH,IAAI,EAAED,GAAG,IAAID,MAAM,CAACG,kBAAD,CAAf,CAAJ,EAAgC;IAC9B,MAAM,IAAIC,KAAJ,eACGH,GADH,mGAAN;EAGD;;EACDD,MAAM,CAACK,+BAAD,CAAN,yDACML,MAAM,CAACK,+BAAD,CADZ,yEACuC,EADvC,IAEEJ,GAFF;AAID,CAdM;AAgBP;AACA;AACA;;;;;AACO,IAAMK,OAAO,GAAG,SAAVA,OAAU,CACrBN,MADqB,EAErBC,GAFqB,EAGrBC,UAHqB,EAIlB;EAAA;;EACH,IAAI,EAAED,GAAG,IAAID,MAAM,CAACG,kBAAD,CAAf,CAAJ,EAAgC;IAC9B,MAAM,IAAIC,KAAJ,eACGH,GADH,mGAAN;EAGD;;EACDD,MAAM,CAACO,yBAAD,CAAN,yDAA+BP,MAAM,CAACO,yBAAD,CAArC,yEAA0D,EAA1D,IAA+DN,GAA/D;AACD,CAXM"}