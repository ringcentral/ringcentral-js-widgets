{"version":3,"file":"decorators.js","names":["_RcModule","require","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","globalStorage","target","key","descriptor","_target$globalStorage","stateKey","Error","concat","globalStorageStateKey","exports","storage","_target$storageStateK","storageStateKey"],"sources":["lib/RcModule/decorators.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport type { RcModuleV2 } from './RcModule';\nimport { storageStateKey, globalStorageStateKey, stateKey } from './RcModule';\n\nexport interface Descriptor<T> extends TypedPropertyDescriptor<T> {\n  initializer?(): T;\n}\n\n/**\n * decorate global storage state with `GlobalStorage` Module\n */\nexport const globalStorage = (\n  target: RcModuleV2,\n  key: string,\n  descriptor?: Descriptor<unknown>,\n) => {\n  if (!(key in target[stateKey])) {\n    throw new Error(\n      `The ${key} must be decorated with '@state' first, and it must be a Redux state to be a persistent state`,\n    );\n  }\n  target[globalStorageStateKey] = [\n    ...(target[globalStorageStateKey] ?? []),\n    key,\n  ];\n};\n\n/**\n * decorate storage state with `Storage` Module\n */\nexport const storage = (\n  target: RcModuleV2,\n  key: string,\n  descriptor?: Descriptor<unknown>,\n) => {\n  if (!(key in target[stateKey])) {\n    throw new Error(\n      `The ${key} must be decorated with '@state' first, and it must be a Redux state to be a persistent state`,\n    );\n  }\n  target[storageStateKey] = [...(target[storageStateKey] ?? []), key];\n};\n"],"mappings":";;;;;;;AAEA,IAAAA,SAAA,GAAAC,OAAA;AAA8E,SAAAC,mBAAAC,GAAA,WAAAC,kBAAA,CAAAD,GAAA,KAAAE,gBAAA,CAAAF,GAAA,KAAAG,2BAAA,CAAAH,GAAA,KAAAI,kBAAA;AAAA,SAAAA,mBAAA,cAAAC,SAAA;AAAA,SAAAF,4BAAAG,CAAA,EAAAC,MAAA,SAAAD,CAAA,qBAAAA,CAAA,sBAAAE,iBAAA,CAAAF,CAAA,EAAAC,MAAA,OAAAE,CAAA,GAAAC,MAAA,CAAAC,SAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAP,CAAA,EAAAQ,KAAA,aAAAL,CAAA,iBAAAH,CAAA,CAAAS,WAAA,EAAAN,CAAA,GAAAH,CAAA,CAAAS,WAAA,CAAAC,IAAA,MAAAP,CAAA,cAAAA,CAAA,mBAAAQ,KAAA,CAAAC,IAAA,CAAAZ,CAAA,OAAAG,CAAA,+DAAAU,IAAA,CAAAV,CAAA,UAAAD,iBAAA,CAAAF,CAAA,EAAAC,MAAA;AAAA,SAAAL,iBAAAkB,IAAA,eAAAC,MAAA,oBAAAD,IAAA,CAAAC,MAAA,CAAAC,QAAA,aAAAF,IAAA,+BAAAH,KAAA,CAAAC,IAAA,CAAAE,IAAA;AAAA,SAAAnB,mBAAAD,GAAA,QAAAiB,KAAA,CAAAM,OAAA,CAAAvB,GAAA,UAAAQ,iBAAA,CAAAR,GAAA;AAAA,SAAAQ,kBAAAR,GAAA,EAAAwB,GAAA,QAAAA,GAAA,YAAAA,GAAA,GAAAxB,GAAA,CAAAyB,MAAA,EAAAD,GAAA,GAAAxB,GAAA,CAAAyB,MAAA,WAAAC,CAAA,MAAAC,IAAA,OAAAV,KAAA,CAAAO,GAAA,GAAAE,CAAA,GAAAF,GAAA,EAAAE,CAAA,MAAAC,IAAA,CAAAD,CAAA,IAAA1B,GAAA,CAAA0B,CAAA,YAAAC,IAAA,IAF9E;AAQA;AACA;AACA;AACO,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CACxBC,MAAkB,EAClBC,GAAW,EACXC,UAAgC,EAC7B;EAAA,IAAAC,qBAAA;EACH,IAAI,EAAEF,GAAG,IAAID,MAAM,CAACI,kBAAQ,CAAC,CAAC,EAAE;IAC9B,MAAM,IAAIC,KAAK,QAAAC,MAAA,CACNL,GAAG,kGACZ,CAAC;EACH;EACAD,MAAM,CAACO,+BAAqB,CAAC,MAAAD,MAAA,CAAApC,kBAAA,EAAAiC,qBAAA,GACvBH,MAAM,CAACO,+BAAqB,CAAC,cAAAJ,qBAAA,cAAAA,qBAAA,GAAI,EAAE,IACvCF,GAAG,EACJ;AACH,CAAC;;AAED;AACA;AACA;AAFAO,OAAA,CAAAT,aAAA,GAAAA,aAAA;AAGO,IAAMU,OAAO,GAAG,SAAVA,OAAOA,CAClBT,MAAkB,EAClBC,GAAW,EACXC,UAAgC,EAC7B;EAAA,IAAAQ,qBAAA;EACH,IAAI,EAAET,GAAG,IAAID,MAAM,CAACI,kBAAQ,CAAC,CAAC,EAAE;IAC9B,MAAM,IAAIC,KAAK,QAAAC,MAAA,CACNL,GAAG,kGACZ,CAAC;EACH;EACAD,MAAM,CAACW,yBAAe,CAAC,MAAAL,MAAA,CAAApC,kBAAA,EAAAwC,qBAAA,GAAQV,MAAM,CAACW,yBAAe,CAAC,cAAAD,qBAAA,cAAAA,qBAAA,GAAI,EAAE,IAAGT,GAAG,EAAC;AACrE,CAAC;AAACO,OAAA,CAAAC,OAAA,GAAAA,OAAA"}