{"version":3,"file":"batchApiHelper.js","names":["uuid","_interopRequireWildcard","require","_Client","_interopRequireDefault","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","batchPutApi","_x","_batchPutApi","regeneratorRuntime","mark","_callee","_ref","platform","url","query","body","boundary","options","_body","result","wrap","_callee$","_context","prev","next","concat","v4","headers","Client","_contentType","_multipartContentType","reduce","data","item","_jsonContentType","JSON","stringify","put","sent","abrupt","_client","toMultipart","stop","batchGetApi","_x2","_batchGetApi","_callee2","_ref2","_callee2$","_context2"],"sources":["lib/batchApiHelper.ts"],"sourcesContent":["import * as uuid from 'uuid';\n\nimport Client from '@ringcentral/sdk/lib/http/Client';\nimport type Platform from '@ringcentral/sdk/lib/platform/Platform';\n\ninterface Options {\n  headers: Record<string, string>;\n}\n\nexport async function batchPutApi({\n  platform,\n  url,\n  query,\n  body,\n}: {\n  platform: Platform;\n  url: string;\n  query?: Record<string, any>;\n  body: any[];\n}) {\n  const boundary = `Boundary_${uuid.v4()}`;\n  const options: Options = { headers: {} };\n  options.headers[\n    Client._contentType\n  ] = `${Client._multipartContentType}; boundary=${boundary}`;\n  let _body = body.reduce<string>((data, item) => {\n    data += `--${boundary}\\r\\n`;\n    data += `${Client._contentType}: ${Client._jsonContentType}\\r\\n\\r\\n`;\n    data += `${JSON.stringify(item.body)}\\r\\n`;\n    return data;\n  }, '');\n  _body += `--${boundary}--`;\n  const result = await platform.put(url, _body, query, options);\n  // TODO: fix modifier issue about SDK.\n  return (platform as any)._client.toMultipart(result);\n}\n\nexport async function batchGetApi({\n  platform,\n  url,\n  query,\n}: {\n  platform: Platform;\n  url: string;\n  query?: Record<string, any>;\n}) {\n  const boundary = `Boundary_${uuid.v4()}`;\n  const options: Options = { headers: {} };\n  options.headers[\n    Client._contentType\n  ] = `${Client._multipartContentType}; boundary=${boundary}`;\n  const result = await platform.get(url, query, options);\n  // TODO: fix modifier issue about SDK.\n  return (platform as any)._client.toMultipart(result);\n}\n"],"mappings":"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"}