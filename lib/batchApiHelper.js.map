{"version":3,"file":"batchApiHelper.js","names":["_Client","_interopRequireDefault","require","_uuid","e","__esModule","asyncGeneratorStep","n","t","r","o","a","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","batchPutApi","_x","_batchPutApi","regeneratorRuntime","mark","_callee","_ref","platform","url","query","body","boundary","options","_body","result","wrap","_callee$","_context","prev","next","concat","v4","headers","Client","_contentType","_multipartContentType","reduce","data","item","_jsonContentType","JSON","stringify","put","sent","abrupt","_client","toMultipart","stop","batchGetApi","_x2","_batchGetApi","_callee2","_ref2","_callee2$","_context2","get"],"sources":["lib/batchApiHelper.ts"],"sourcesContent":["import Client from '@ringcentral/sdk/lib/http/Client';\nimport type Platform from '@ringcentral/sdk/lib/platform/Platform';\nimport { v4 } from 'uuid';\n\ninterface Options {\n  headers: Record<string, string>;\n}\n\nexport async function batchPutApi({\n  platform,\n  url,\n  query,\n  body,\n}: {\n  platform: Platform;\n  url: string;\n  query?: Record<string, any>;\n  body: any[];\n}) {\n  const boundary = `Boundary_${v4()}`;\n  const options: Options = { headers: {} };\n  options.headers[\n    Client._contentType\n  ] = `${Client._multipartContentType}; boundary=${boundary}`;\n  let _body = body.reduce<string>((data, item) => {\n    data += `--${boundary}\\r\\n`;\n    data += `${Client._contentType}: ${Client._jsonContentType}\\r\\n\\r\\n`;\n    data += `${JSON.stringify(item.body)}\\r\\n`;\n    return data;\n  }, '');\n  _body += `--${boundary}--`;\n  const result = await platform.put(url, _body, query, options);\n  // TODO: fix modifier issue about SDK.\n  return (platform as any)._client.toMultipart(result);\n}\n\nexport async function batchGetApi({\n  platform,\n  url,\n  query,\n}: {\n  platform: Platform;\n  url: string;\n  query?: Record<string, any>;\n}) {\n  const boundary = `Boundary_${v4()}`;\n  const options: Options = { headers: {} };\n  options.headers[\n    Client._contentType\n  ] = `${Client._multipartContentType}; boundary=${boundary}`;\n  const result = await platform.get(url, query, options);\n  // TODO: fix modifier issue about SDK.\n  return (platform as any)._client.toMultipart(result);\n}\n"],"mappings":"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","ignoreList":[]}