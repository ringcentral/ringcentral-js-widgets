{"version":3,"file":"batchApiHelper.js","names":["_Client","_interopRequireDefault","require","uuid","_interopRequireWildcard","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","asyncGeneratorStep","o","c","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","batchPutApi","_x","_batchPutApi","regeneratorRuntime","mark","_callee","_ref","platform","url","query","body","boundary","options","_body","result","wrap","_callee$","_context","prev","next","concat","v4","headers","Client","_contentType","_multipartContentType","reduce","data","item","_jsonContentType","JSON","stringify","put","sent","abrupt","_client","toMultipart","stop","batchGetApi","_x2","_batchGetApi","_callee2","_ref2","_callee2$","_context2"],"sources":["lib/batchApiHelper.ts"],"sourcesContent":["import Client from '@ringcentral/sdk/lib/http/Client';\nimport type Platform from '@ringcentral/sdk/lib/platform/Platform';\nimport * as uuid from 'uuid';\n\ninterface Options {\n  headers: Record<string, string>;\n}\n\nexport async function batchPutApi({\n  platform,\n  url,\n  query,\n  body,\n}: {\n  platform: Platform;\n  url: string;\n  query?: Record<string, any>;\n  body: any[];\n}) {\n  const boundary = `Boundary_${uuid.v4()}`;\n  const options: Options = { headers: {} };\n  options.headers[\n    Client._contentType\n  ] = `${Client._multipartContentType}; boundary=${boundary}`;\n  let _body = body.reduce<string>((data, item) => {\n    data += `--${boundary}\\r\\n`;\n    data += `${Client._contentType}: ${Client._jsonContentType}\\r\\n\\r\\n`;\n    data += `${JSON.stringify(item.body)}\\r\\n`;\n    return data;\n  }, '');\n  _body += `--${boundary}--`;\n  const result = await platform.put(url, _body, query, options);\n  // TODO: fix modifier issue about SDK.\n  return (platform as any)._client.toMultipart(result);\n}\n\nexport async function batchGetApi({\n  platform,\n  url,\n  query,\n}: {\n  platform: Platform;\n  url: string;\n  query?: Record<string, any>;\n}) {\n  const boundary = `Boundary_${uuid.v4()}`;\n  const options: Options = { headers: {} };\n  options.headers[\n    Client._contentType\n  ] = `${Client._multipartContentType}; boundary=${boundary}`;\n  const result = await platform.get(url, query, options);\n  // TODO: fix modifier issue about SDK.\n  return (platform as any)._client.toMultipart(result);\n}\n"],"mappings":"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","ignoreList":[]}