{"version":3,"sources":["lib/createModal/index.js"],"names":["createModal","Comp","props","_container","document","createElement","root","appendDOM","context","modalRoot","current","body","appendChild","parentNode","removeChild","className","maskClassName","modalClassName","show","onClose","clickOutToClose","onClick","styles","container","containerHidden","mask","maskHidden","undefined","modal","modalHidden","ReactDOM","createPortal","renderDialog","Component","propTypes","string","bool","func","object","defaultProps","contextTypes"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport propTypes from 'prop-types';\nimport classnames from 'classnames';\n\nimport styles from './styles.scss';\n\n// TODO: consider refactoring onClose + clickOutToClose to onOverlayClick\nexport default function createModal(Comp) {\n  return class KModal extends Component {\n    static propTypes = {\n      className: propTypes.string,\n      modalClassName: propTypes.string,\n      show: propTypes.bool,\n      onClose: propTypes.func,\n      clickOutToClose: propTypes.bool,\n      appendDOM: propTypes.object,\n      maskClassName: propTypes.string,\n    };\n    static defaultProps = {\n      className: '',\n      modalClassName: '',\n      show: false,\n      onClose: undefined,\n      clickOutToClose: false,\n      appendDOM: undefined,\n      maskClassName: undefined,\n    };\n    static contextTypes = {\n      modalRoot: propTypes.object,\n    };\n    constructor(props) {\n      super(props);\n      this._container = document.createElement('div');\n    }\n    componentDidMount() {\n      const root =\n        this.props.appendDOM ||\n        (this.context.modalRoot && this.context.modalRoot.current) ||\n        document.body;\n      root.appendChild(this._container);\n    }\n    componentWillUnmount() {\n      if (this._container.parentNode) {\n        this._container.parentNode.removeChild(this._container);\n      }\n    }\n    renderDialog() {\n      const {\n        className,\n        maskClassName,\n        modalClassName,\n        show,\n        onClose,\n        clickOutToClose,\n        ...props\n      } = this.props;\n      const onClick = clickOutToClose ? onClose : () => {};\n      return (\n        <div\n          className={\n            show\n              ? classnames(styles.container, className)\n              : styles.containerHidden\n          }\n        >\n          <div\n            className={\n              show ? classnames(styles.mask, maskClassName) : styles.maskHidden\n            }\n            onClick={onClick}\n          />\n          <div\n            data-sign={show ? 'deleteModal' : undefined}\n            className={\n              show\n                ? classnames(styles.modal, modalClassName)\n                : styles.modalHidden\n            }\n          >\n            <Comp {...props} />\n          </div>\n        </div>\n      );\n    }\n    render() {\n      return ReactDOM.createPortal(this.renderDialog(), this._container);\n    }\n  };\n}\n"],"file":"index.js"}