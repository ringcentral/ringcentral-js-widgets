{"version":3,"file":"index.js","names":["transformLoader","noChunk","supportedLocales","through","obj","file","enc","done","content","contents","toString","isLoaderFile","folderPath","path","dirname","fs","readdir","files","filter","isLocaleFile","loader","generateLoaderContent","noChunks","Buffer","from","push","transform"],"sources":["lib/transformLoader/index.js"],"sourcesContent":["import through from 'through2';\nimport fs from 'fs-extra';\nimport path from 'path';\nimport generateLoaderContent from '../generateLoaderContent';\nimport isLocaleFile from '../isLocaleFile';\nimport isLoaderFile, { noChunks } from '../isLoaderFile';\n\nexport default function transformLoader({\n  noChunk = false,\n  supportedLocales = [],\n} = {}) {\n  return through.obj(async function transform(file, enc, done) {\n    const content = file.contents.toString(enc);\n    if (isLoaderFile(content)) {\n      const folderPath = path.dirname(file.path);\n      const files = (await fs.readdir(folderPath)).filter(isLocaleFile);\n      const loader = generateLoaderContent({\n        files,\n        noChunk: noChunk || noChunks(content),\n        supportedLocales,\n      });\n      file.contents = Buffer.from(loader, 'utf8');\n    }\n    this.push(file);\n    done();\n  });\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;AAEe,SAASA,eAAT,GAGP;EAAA,+EAAJ,EAAI;EAAA,wBAFNC,OAEM;EAAA,IAFNA,OAEM,6BAFI,KAEJ;EAAA,iCADNC,gBACM;EAAA,IADNA,gBACM,sCADa,EACb;;EACN,OAAOC,mBAAA,CAAQC,GAAR;IAAA,yEAAY,iBAAyBC,IAAzB,EAA+BC,GAA/B,EAAoCC,IAApC;MAAA;MAAA;QAAA;UAAA;YAAA;cACXC,OADW,GACDH,IAAI,CAACI,QAAL,CAAcC,QAAd,CAAuBJ,GAAvB,CADC;;cAAA,KAEb,IAAAK,wBAAA,EAAaH,OAAb,CAFa;gBAAA;gBAAA;cAAA;;cAGTI,UAHS,GAGIC,gBAAA,CAAKC,OAAL,CAAaT,IAAI,CAACQ,IAAlB,CAHJ;cAAA;cAAA,OAIME,mBAAA,CAAGC,OAAH,CAAWJ,UAAX,CAJN;;YAAA;cAITK,KAJS,iBAI8BC,MAJ9B,CAIqCC,wBAJrC;cAKTC,MALS,GAKA,IAAAC,iCAAA,EAAsB;gBACnCJ,KAAK,EAALA,KADmC;gBAEnChB,OAAO,EAAEA,OAAO,IAAI,IAAAqB,sBAAA,EAASd,OAAT,CAFe;gBAGnCN,gBAAgB,EAAhBA;cAHmC,CAAtB,CALA;cAUfG,IAAI,CAACI,QAAL,GAAgBc,MAAM,CAACC,IAAP,CAAYJ,MAAZ,EAAoB,MAApB,CAAhB;;YAVe;cAYjB,KAAKK,IAAL,CAAUpB,IAAV;cACAE,IAAI;;YAba;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAZ;;IAAA,SAA2BmB,SAA3B;MAAA;IAAA;;IAAA,OAA2BA,SAA3B;EAAA,IAAP;AAeD"}