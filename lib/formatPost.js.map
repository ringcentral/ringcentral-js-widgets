{"version":3,"file":"formatPost.js","names":["_isPicture","_interopRequireDefault","require","e","__esModule","fomatFistLineWithMentions","text","mentions","undefined","firstLine","split","length","forEach","mention","replace","concat","type","id","name","getPostAbstract","post","members","formatedText","attachments","attachment","isPicture","contentUri","addedPersons","addedPersonIds","map","member","find","m","firstName","lastName","join"],"sources":["lib/formatPost.js"],"sourcesContent":["import isPicture from './isPicture';\n\nexport function fomatFistLineWithMentions(text, mentions) {\n  if (text === undefined || text === null) {\n    return null;\n  }\n  let firstLine = text.split('\\n')[0];\n  if (mentions && mentions.length > 0) {\n    mentions.forEach((mention) => {\n      firstLine = firstLine.replace(\n        `![:${mention.type}](${mention.id})`,\n        `@${mention.name}`,\n      );\n    });\n  }\n  return firstLine;\n}\n\nexport function getPostAbstract(post, members) {\n  if (!post) {\n    return null;\n  }\n  let formatedText;\n  if (post.attachments && post.attachments.length > 0) {\n    const attachment = post.attachments[0];\n    if (isPicture(attachment.contentUri)) {\n      formatedText = 'shared a picture';\n    } else {\n      formatedText = 'shared a file';\n    }\n  }\n  if (post.type === 'PersonJoined') {\n    formatedText = 'joined the team';\n  }\n  if (post.type === 'PersonsAdded') {\n    const addedPersons = post.addedPersonIds.map((id) => {\n      const member = members.find((m) => m.id === id);\n      let name = id;\n      if (member) {\n        name = `${member.firstName}${\n          member.lastName ? ` ${member.lastName}` : ''\n        }`;\n      }\n      return `@${name}`;\n    });\n    formatedText = `added ${addedPersons.join(' ')} to the team`;\n  }\n  if (!formatedText) {\n    formatedText = fomatFistLineWithMentions(post.text, post.mentions);\n  }\n  return formatedText;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAoC,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAE7B,SAASE,yBAAyBA,CAACC,IAAI,EAAEC,QAAQ,EAAE;EACxD,IAAID,IAAI,KAAKE,SAAS,IAAIF,IAAI,KAAK,IAAI,EAAE;IACvC,OAAO,IAAI;EACb;EACA,IAAIG,SAAS,GAAGH,IAAI,CAACI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;EACnC,IAAIH,QAAQ,IAAIA,QAAQ,CAACI,MAAM,GAAG,CAAC,EAAE;IACnCJ,QAAQ,CAACK,OAAO,CAAC,UAACC,OAAO,EAAK;MAC5BJ,SAAS,GAAGA,SAAS,CAACK,OAAO,OAAAC,MAAA,CACrBF,OAAO,CAACG,IAAI,QAAAD,MAAA,CAAKF,OAAO,CAACI,EAAE,YAAAF,MAAA,CAC7BF,OAAO,CAACK,IAAI,CAClB,CAAC;IACH,CAAC,CAAC;EACJ;EACA,OAAOT,SAAS;AAClB;AAEO,SAASU,eAAeA,CAACC,IAAI,EAAEC,OAAO,EAAE;EAC7C,IAAI,CAACD,IAAI,EAAE;IACT,OAAO,IAAI;EACb;EACA,IAAIE,YAAY;EAChB,IAAIF,IAAI,CAACG,WAAW,IAAIH,IAAI,CAACG,WAAW,CAACZ,MAAM,GAAG,CAAC,EAAE;IACnD,IAAMa,UAAU,GAAGJ,IAAI,CAACG,WAAW,CAAC,CAAC,CAAC;IACtC,IAAI,IAAAE,qBAAS,EAACD,UAAU,CAACE,UAAU,CAAC,EAAE;MACpCJ,YAAY,GAAG,kBAAkB;IACnC,CAAC,MAAM;MACLA,YAAY,GAAG,eAAe;IAChC;EACF;EACA,IAAIF,IAAI,CAACJ,IAAI,KAAK,cAAc,EAAE;IAChCM,YAAY,GAAG,iBAAiB;EAClC;EACA,IAAIF,IAAI,CAACJ,IAAI,KAAK,cAAc,EAAE;IAChC,IAAMW,YAAY,GAAGP,IAAI,CAACQ,cAAc,CAACC,GAAG,CAAC,UAACZ,EAAE,EAAK;MACnD,IAAMa,MAAM,GAAGT,OAAO,CAACU,IAAI,CAAC,UAACC,CAAC;QAAA,OAAKA,CAAC,CAACf,EAAE,KAAKA,EAAE;MAAA,EAAC;MAC/C,IAAIC,IAAI,GAAGD,EAAE;MACb,IAAIa,MAAM,EAAE;QACVZ,IAAI,MAAAH,MAAA,CAAMe,MAAM,CAACG,SAAS,EAAAlB,MAAA,CACxBe,MAAM,CAACI,QAAQ,OAAAnB,MAAA,CAAOe,MAAM,CAACI,QAAQ,IAAK,EAAE,CAC5C;MACJ;MACA,WAAAnB,MAAA,CAAWG,IAAI;IACjB,CAAC,CAAC;IACFI,YAAY,YAAAP,MAAA,CAAYY,YAAY,CAACQ,IAAI,CAAC,GAAG,CAAC,iBAAc;EAC9D;EACA,IAAI,CAACb,YAAY,EAAE;IACjBA,YAAY,GAAGjB,yBAAyB,CAACe,IAAI,CAACd,IAAI,EAAEc,IAAI,CAACb,QAAQ,CAAC;EACpE;EACA,OAAOe,YAAY;AACrB","ignoreList":[]}