{"version":3,"file":"StorageBase.js","names":["_core","require","_ObjectMap","_redux","_SynchronizedStorage","_di","_actionTypesBase","_getStorageReducer","_dec","_class","_class2","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","l","Symbol","iterator","n","i","u","a","f","call","next","done","Array","isArray","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","_arrayLikeToArray","toString","slice","constructor","name","from","test","_classCallCheck","_defineProperties","key","_createClass","prototype","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","_setPrototypeOf","_applyDecoratedDescriptor","initializer","reverse","reduce","StorageBase","exports","Module","deps","dep","optional","_RcModuleV","storageBaseOptions","_storageBaseOptions$S","_this","_storage","_storageReducers","_storageReducer","_StorageProvider","_storageActionTypes","Error","StorageProvider","SynchronizedStorage","ObjectMap","prefixKeys","actionTypesBase","getDataReducer","types","reducers","syncData","data","setData","resetData","_this2","entries","_ref","_ref2","reducer","undefined","get","_reducers","combineReducers","spawnStorageReducersKey","spawnReducersKey","stateKey","set","registerReducer","_ref3","concat","getItem","ready","driver","_deps","prefix","RcModuleV2","action"],"sources":["lib/StorageBase/StorageBase.ts"],"sourcesContent":["import {\n  action,\n  RcModuleV2,\n  spawnReducersKey,\n  spawnStorageReducersKey,\n  stateKey,\n} from '@ringcentral-integration/core';\nimport { ObjectMap } from '@ringcentral-integration/core/lib/ObjectMap';\nimport type { Action, Reducer, ReducersMapObject } from 'redux';\nimport { combineReducers } from 'redux';\n\nimport { SynchronizedStorage } from '../SynchronizedStorage';\nimport { Module } from '../di';\n\nimport type {\n  Deps,\n  IStorage,\n  IStorageBaseOptions,\n  StorageBaseOptions,\n} from './StorageBase.interface';\nimport type { ActionTypesBase } from './actionTypesBase';\nimport { actionTypesBase } from './actionTypesBase';\nimport { getDataReducer } from './getStorageReducer';\n\n@Module({\n  name: 'StorageBase',\n  deps: [{ dep: 'Prefix', optional: true }],\n})\nexport abstract class StorageBase<T extends Deps = Deps> extends RcModuleV2<T> {\n  protected abstract _storage: IStorage;\n  protected _storageReducers: ReducersMapObject = {};\n  protected _storageReducer: Reducer;\n  protected _StorageProvider: IStorageBaseOptions['StorageProvider'];\n  protected _storageActionTypes: ActionTypesBase;\n\n  constructor(deps: T, storageBaseOptions: StorageBaseOptions) {\n    super({\n      deps,\n    });\n    if (!storageBaseOptions.name) {\n      throw new Error('name must be defined');\n    }\n    this._StorageProvider =\n      storageBaseOptions.StorageProvider ?? SynchronizedStorage;\n    this._storageActionTypes = ObjectMap.prefixKeys(\n      [...ObjectMap.keys(actionTypesBase)],\n      storageBaseOptions.name,\n    );\n    this._storageReducer = getDataReducer({\n      types: this._storageActionTypes,\n      reducers: this._storageReducers,\n    });\n  }\n\n  @action\n  syncData(key: string, value: any) {\n    this.data[key] = value;\n  }\n\n  @action\n  setData(data: Record<string, any>) {\n    this.data = data;\n  }\n\n  @action\n  resetData() {\n    Object.entries(this._storageReducers).forEach(([key, reducer]) => {\n      this.data[key] = reducer(undefined, {} as Action<any>);\n    });\n  }\n\n  override get reducer() {\n    if (this._reducers)\n      return combineReducers({\n        ...this._reducers,\n        data: this._storageReducer,\n      });\n    this[spawnStorageReducersKey]();\n    this[spawnReducersKey]();\n    return combineReducers({\n      ...this._reducers!,\n      data: this._storageReducer,\n    }) as Reducer<any, Action>;\n  }\n\n  get data() {\n    return this[stateKey].data;\n  }\n\n  set data(value: Record<string, any>) {\n    this[stateKey].data = value;\n  }\n\n  /**\n   * register storage reducer\n   */\n  registerReducer({ key, reducer }: { key: string; reducer: Reducer }) {\n    if (this._storageReducers[key]) {\n      throw new Error(`Reducer of key: '${key}' already exists`);\n    }\n    this._storageReducers[key] = reducer;\n  }\n\n  getItem(key: string) {\n    return this.data[key];\n  }\n\n  get driver() {\n    if (this.ready) {\n      return this._storage.driver;\n    }\n    return null;\n  }\n\n  get prefix() {\n    return this._deps.prefix;\n  }\n}\n"],"mappings":"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","ignoreList":[]}