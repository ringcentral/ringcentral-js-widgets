{"version":3,"file":"StorageBase.js","names":["_redux","require","_core","_ObjectMap","_di","_SynchronizedStorage","_actionTypesBase","_getStorageReducer","_dec","_class","_class2","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","_toPropertyKey","configurable","writable","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","call","next","done","err","Array","isArray","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","o","minLen","_arrayLikeToArray","n","prototype","toString","slice","constructor","name","from","test","iter","len","arr2","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","arg","_toPrimitive","_typeof","String","input","hint","prim","toPrimitive","undefined","res","Number","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_applyDecoratedDescriptor","property","decorators","context","desc","initializer","reverse","reduce","decorator","StorageBase","Module","deps","dep","optional","_RcModuleV","_super","storageBaseOptions","_storageBaseOptions$S","_this","_storage","_storageReducers","_storageReducer","_StorageProvider","_storageActionTypes","Error","StorageProvider","SynchronizedStorage","ObjectMap","prefixKeys","actionTypesBase","getDataReducer","types","reducers","syncData","data","setData","resetData","_this2","entries","_ref","_ref2","reducer","registerReducer","_ref3","concat","getItem","get","_reducers","combineReducers","spawnStorageReducersKey","spawnReducersKey","stateKey","set","ready","driver","_deps","prefix","RcModuleV2","action","exports"],"sources":["lib/StorageBase/StorageBase.ts"],"sourcesContent":["import type { Action, Reducer, ReducersMapObject } from 'redux';\nimport { combineReducers } from 'redux';\n\nimport {\n  action,\n  RcModuleV2,\n  spawnReducersKey,\n  spawnStorageReducersKey,\n  stateKey,\n} from '@ringcentral-integration/core';\nimport { ObjectMap } from '@ringcentral-integration/core/lib/ObjectMap';\n\nimport { Module } from '../di';\nimport { SynchronizedStorage } from '../SynchronizedStorage';\nimport type { ActionTypesBase } from './actionTypesBase';\nimport { actionTypesBase } from './actionTypesBase';\nimport { getDataReducer } from './getStorageReducer';\nimport type {\n  Deps,\n  IStorage,\n  IStorageBaseOptions,\n  StorageBaseOptions,\n} from './StorageBase.interface';\n\n@Module({\n  name: 'StorageBase',\n  deps: [{ dep: 'Prefix', optional: true }],\n})\nexport abstract class StorageBase<T extends Deps = Deps> extends RcModuleV2<T> {\n  protected abstract _storage: IStorage;\n  protected _storageReducers: ReducersMapObject = {};\n  protected _storageReducer: Reducer;\n  protected _StorageProvider: IStorageBaseOptions['StorageProvider'];\n  protected _storageActionTypes: ActionTypesBase;\n\n  constructor(deps: T, storageBaseOptions: StorageBaseOptions) {\n    super({\n      deps,\n    });\n    if (!storageBaseOptions.name) {\n      throw new Error('name must be defined');\n    }\n    this._StorageProvider =\n      storageBaseOptions.StorageProvider ?? SynchronizedStorage;\n    this._storageActionTypes = ObjectMap.prefixKeys(\n      [...ObjectMap.keys(actionTypesBase)],\n      storageBaseOptions.name,\n    );\n    this._storageReducer = getDataReducer({\n      types: this._storageActionTypes,\n      reducers: this._storageReducers,\n    });\n  }\n\n  @action\n  syncData(key: string, value: any) {\n    this.data[key] = value;\n  }\n\n  @action\n  setData(data: Record<string, any>) {\n    this.data = data;\n  }\n\n  @action\n  resetData() {\n    Object.entries(this._storageReducers).forEach(([key, reducer]) => {\n      this.data[key] = reducer(undefined, {} as Action<any>);\n    });\n  }\n\n  override get reducer() {\n    if (this._reducers)\n      return combineReducers({\n        ...this._reducers,\n        data: this._storageReducer,\n      });\n    this[spawnStorageReducersKey]();\n    this[spawnReducersKey]();\n    return combineReducers({\n      ...this._reducers!,\n      data: this._storageReducer,\n    }) as Reducer<any, Action>;\n  }\n\n  get data() {\n    return this[stateKey].data;\n  }\n\n  set data(value: Record<string, any>) {\n    this[stateKey].data = value;\n  }\n\n  /**\n   * register storage reducer\n   */\n  registerReducer({ key, reducer }: { key: string; reducer: Reducer }) {\n    if (this._storageReducers[key]) {\n      throw new Error(`Reducer of key: '${key}' already exists`);\n    }\n    this._storageReducers[key] = reducer;\n  }\n\n  getItem(key: string) {\n    return this.data[key];\n  }\n\n  get driver() {\n    if (this.ready) {\n      return this._storage.driver;\n    }\n    return null;\n  }\n\n  get prefix() {\n    return this._deps.prefix;\n  }\n}\n"],"mappings":"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"}