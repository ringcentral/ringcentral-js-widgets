{"version":3,"sources":["lib/selector/index.ts"],"names":["SELECTORS","Symbol","selector","prototype","property","initializer","configurable","enumerable","get","Map","has","set","proto","targetSymbol","createSelector","call"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;AAEA,IAAMA,SAAS,GAAGC,MAAM,CAAC,WAAD,CAAxB;AAEA;AACA;AACA;AACA;;AACO,SAASC,QAAT,CAAkBC,SAAlB,EAA6BC,QAA7B,QAAwD;AAAA,MAAfC,WAAe,QAAfA,WAAe;AAC7D,SAAO;AACLC,IAAAA,YAAY,EAAE,IADT;AAELC,IAAAA,UAAU,EAAE,IAFP;AAGLC,IAAAA,GAHK,iBAGC;AAAA;;AACJ,UAAI,CAAC,KAAKR,SAAL,CAAL,EAAsB;AACpB,aAAKA,SAAL,IAAkB,IAAIS,GAAJ,EAAlB;AACD;;AACD,UAAI,CAAC,KAAKT,SAAL,EAAgBU,GAAhB,CAAoBP,SAApB,CAAL,EAAqC;AACnC,aAAKH,SAAL,EAAgBW,GAAhB,CAAoBR,SAApB,EAA+B,IAAIM,GAAJ,EAA/B;AACD;;AACD,UAAMG,KAAK,GAAG,KAAKZ,SAAL,EAAgBQ,GAAhB,CAAoBL,SAApB,CAAd;;AACA,UAAI,CAACS,KAAK,CAACF,GAAN,CAAUN,QAAV,CAAL,EAA0B;AACxB,YAAMS,YAAY,GAAGZ,MAAM,WAAIG,QAAJ,aAA3B;AACA,aAAKS,YAAL,IAAqBC,0DAAkBT,WAAW,CAACU,IAAZ,CAAiB,IAAjB,CAAlB,EAArB;AACAH,QAAAA,KAAK,CAACD,GAAN,CAAUP,QAAV,EAAoB;AAAA,iBAAM,KAAI,CAACS,YAAD,CAAJ,EAAN;AAAA,SAApB;AACD;;AACD,aAAOD,KAAK,CAACJ,GAAN,CAAUJ,QAAV,GAAP;AACD;AAjBI,GAAP;AAmBD","sourcesContent":["import { createSelector } from 'reselect';\n\nconst SELECTORS = Symbol('selectors');\n\n/**\n * @function\n * @description Decorator function that convert a class method to a getter\n */\nexport function selector(prototype, property, { initializer }) {\n  return {\n    configurable: true,\n    enumerable: true,\n    get() {\n      if (!this[SELECTORS]) {\n        this[SELECTORS] = new Map();\n      }\n      if (!this[SELECTORS].has(prototype)) {\n        this[SELECTORS].set(prototype, new Map());\n      }\n      const proto = this[SELECTORS].get(prototype);\n      if (!proto.has(property)) {\n        const targetSymbol = Symbol(`${property}-target`);\n        this[targetSymbol] = createSelector(...initializer.call(this));\n        proto.set(property, () => this[targetSymbol]());\n      }\n      return proto.get(property)();\n    },\n  };\n}\n"],"file":"index.js"}