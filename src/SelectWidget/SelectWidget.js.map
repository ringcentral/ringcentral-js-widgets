{"version":3,"file":"SelectWidget.js","names":["_springUi","require","_utils","_react","_interopRequireDefault","_excluded","e","__esModule","_extends","Object","assign","bind","n","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutProperties","o","i","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","SelectWidget","_ref","schema","id","name","options","label","hideLabel","required","disabled","readonly","placeholder","value","multiple","autofocus","onChange","onBlur","onFocus","_ref$rawErrors","rawErrors","registry","uiSchema","hideError","formContext","textFieldProps","enumOptions","enumDisabled","optEmptyVal","emptyValue","isEmpty","_onBlur","_ref2","target","enumOptionsValueForIndex","_onFocus","_ref3","selectedIndexes","enumOptionsIndexForValue","createElement","Select","variant","labelValue","focused","error","_ref4","renderValue","_enumOptions$find","find","_","String","size","ariaDescribedByIds","Array","isArray","map","_ref5","Option","key","MenuItemText"],"sources":["src/SelectWidget/SelectWidget.tsx"],"sourcesContent":["import {\n  Option,\n  MenuItemText,\n  Select,\n  SelectProps,\n} from '@ringcentral/spring-ui';\nimport {\n  ariaDescribedByIds,\n  enumOptionsIndexForValue,\n  enumOptionsValueForIndex,\n  FormContextType,\n  labelValue,\n  RJSFSchema,\n  StrictRJSFSchema,\n  WidgetProps,\n} from '@rjsf/utils';\nimport React, { ChangeEvent, FocusEvent } from 'react';\n\n/** The `SelectWidget` is a widget for rendering dropdowns.\n *  It is typically used with string properties constrained with enum options.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function SelectWidget<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any,\n>({\n  schema,\n  id,\n  name, // remove this from textFieldProps\n  options,\n  label,\n  hideLabel,\n  required,\n  disabled,\n  readonly,\n  placeholder,\n  value,\n  multiple,\n  autofocus,\n  onChange,\n  onBlur,\n  onFocus,\n  rawErrors = [],\n  registry,\n  uiSchema,\n  hideError,\n  formContext,\n  ...textFieldProps\n}: WidgetProps<T, S, F>) {\n  const { enumOptions, enumDisabled, emptyValue: optEmptyVal } = options;\n\n  multiple = typeof multiple === 'undefined' ? false : !!multiple;\n\n  const emptyValue = multiple ? [] : '';\n  const isEmpty =\n    typeof value === 'undefined' ||\n    (multiple && value.length < 1) ||\n    (!multiple && value === emptyValue);\n\n  const _onBlur = ({ target: { value } }: FocusEvent<HTMLInputElement>) =>\n    onBlur(id, enumOptionsValueForIndex<S>(value, enumOptions, optEmptyVal));\n  const _onFocus = ({ target: { value } }: FocusEvent<HTMLInputElement>) =>\n    onFocus(id, enumOptionsValueForIndex<S>(value, enumOptions, optEmptyVal));\n  const selectedIndexes = enumOptionsIndexForValue<S>(\n    value,\n    enumOptions,\n    multiple,\n  );\n\n  return (\n    <Select\n      variant=\"outlined\"\n      data-sign={name}\n      id={id}\n      name={id}\n      label={labelValue(label, hideLabel || !label, false)}\n      value={\n        !isEmpty && typeof selectedIndexes !== 'undefined'\n          ? selectedIndexes\n          : emptyValue\n      }\n      required={required}\n      disabled={disabled || readonly}\n      focused={autofocus}\n      placeholder={placeholder}\n      error={rawErrors.length > 0}\n      onChange={({ target: { value } }) =>\n        onChange(\n          enumOptionsValueForIndex<S>(value as any, enumOptions, optEmptyVal),\n        )\n      }\n      renderValue={(value) => {\n        return enumOptions?.find((_, i: number) => value === String(i))?.label;\n      }}\n      onBlur={_onBlur}\n      onFocus={_onFocus}\n      size=\"medium\"\n      {...(textFieldProps as SelectProps)}\n      aria-describedby={ariaDescribedByIds<T>(id)}\n    >\n      {Array.isArray(enumOptions) &&\n        enumOptions.map(({ value, label }, i: number) => {\n          const disabled: boolean =\n            Array.isArray(enumDisabled) && enumDisabled.indexOf(value) !== -1;\n          return (\n            <Option key={i} value={String(i)} disabled={disabled}>\n              <MenuItemText>{label}</MenuItemText>\n            </Option>\n          );\n        })}\n    </Select>\n  );\n}\n"],"mappings":"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","ignoreList":[]}