{"version":3,"file":"Gallery.view.js","names":["_nextCore","require","_reactHooks","_utils","_Avatar","_IconButton","_IconButtonGroup","_Slide","_Text","_ZoomFrom","_Close","_interopRequireDefault","_clsx","_react","_interopRequireWildcard","_DownloadButton","_TextMiddleEllipsis","_ModalView","_styles","_dec","_dec2","_dec3","_dec4","_class","_class2","_descriptor","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","_initializerDefineProperty","enumerable","configurable","writable","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","prototype","_toPrimitive","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","apply","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","_inherits","create","_setPrototypeOf","_applyDecoratedDescriptor","keys","forEach","reverse","reduce","_initializerWarningHelper","Error","_extends","assign","arguments","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","gapHeight","exports","Img","forwardRef","_ref","ref","$draggable","nodeRef","props","createElement","className","clsx","width","height","ContentProps","style","overflow","TransitionProps","timeout","BackdropProps","opacity","minScaleRate","maxScaleRate","GalleryView","injectable","target","optional","undefined","metadata","Function","ModalView","GalleryViewOptions","_RcViewModule","_modalView","_galleryViewOptions","_this","sourceElement","header","_useModalItemView","useModalItemView","action","open","payload","_ref2","info","_ref3","downloadUrl","subject","description","AvatarProps","primary","secondary","RcSlide","ExportType","size","RcText","color","variant","TextMiddleEllipsis","RcIconButtonGroup","DownloadButton","url","RcIconButton","symbol","Close","onClick","close","footer","_ref4","alt","result","_gallery","getHostElement","current","component","_useModalItemView2","_ref5","_useState","useState","_useState2","draggable","setDraggable","zoomRef","useRef","imgRef","containerRef","zoomActions","useHammerZoom","container","min","max","onScale","scale","_zoomRef$current","setRate","onDragChange","state","elementRef","imgContainerRef","img","src","reset","stopPropagation","RcZoomFrom","ZoomAction","onZoom","zoom","RcViewModule","portal","_this2","view","fullScreen","disableEscapeKeyDown","onExited"],"sources":["src/app/views/SpringGalleryView/Gallery.view.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/no-static-element-interactions */\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport {\n  injectable,\n  optional,\n  portal,\n  RcViewModule,\n  UIProps,\n} from '@ringcentral-integration/next-core';\nimport { useHammerZoom } from '@ringcentral-integration/react-hooks';\nimport { stopPropagation } from '@ringcentral-integration/utils';\nimport {\n  RcAvatar,\n  RcAvatarProps,\n  RcIconButton,\n  RcIconButtonGroup,\n  RcSlide,\n  RcText,\n  RcZoomFrom,\n} from '@ringcentral/juno';\nimport { Close } from '@ringcentral/juno-icon';\nimport clsx from 'clsx';\nimport React, { forwardRef, useRef, useState } from 'react';\n\nimport { DownloadButton } from '../../components/DownloadButton';\nimport { TextMiddleEllipsis } from '../../components/TextMiddleEllipsis';\nimport { ModalRef, ModalView, useModalItemView } from '../ModalView';\n\nimport type { GalleryViewOptions } from './Gallery.view.interface';\nimport { ZoomAction, ZoomActionType } from './styles';\n\ntype ImgProps = {\n  $draggable: boolean;\n} & React.DetailedHTMLProps<\n  React.ImgHTMLAttributes<HTMLImageElement>,\n  HTMLImageElement\n> & {\n    // TODO: fix in juno\n    nodeRef?: any;\n  };\n\nexport const gapHeight = 40;\n\nconst Img = forwardRef<HTMLImageElement, ImgProps>(\n  ({ $draggable, nodeRef, ...props }, ref) => (\n    // eslint-disable-next-line jsx-a11y/alt-text\n    <img\n      data-sign=\"gallery-image\"\n      {...props}\n      ref={ref}\n      className={clsx(\n        $draggable ? 'cursor-move' : 'cursor-default',\n        'shadow-lg select-none max-w-full max-h-[calc(100vh-104px)] object-contain',\n      )}\n      width={600}\n      height={400}\n    />\n  ),\n);\n\nconst ContentProps = {\n  style: { overflow: 'hidden' },\n};\nconst TransitionProps = {\n  timeout: 450,\n};\nconst BackdropProps = { style: { opacity: 0 } };\n\nconst minScaleRate = 0.1;\nconst maxScaleRate = 20;\n\nexport type GalleryOpenInfo = {\n  subject?: string;\n  description?: string;\n  primary?: string;\n  secondary?: string;\n  AvatarProps?: UIProps<RcAvatarProps>;\n  downloadUrl?: string;\n};\n\nexport type GalleryPayload = {\n  url: string;\n  alt?: string;\n  info?: GalleryOpenInfo;\n};\n\nexport type GalleryOpenOptions = {\n  alt?: string;\n  sourceElement?: HTMLElement;\n  info?: GalleryOpenInfo;\n};\n\n@injectable({\n  name: 'GalleryView',\n})\nexport class GalleryView extends RcViewModule implements ModalRef {\n  private sourceElement: HTMLElement | null = null;\n\n  @portal\n  private _gallery = this._modalView.create<GalleryPayload>({\n    view: this,\n    props: () => ({\n      fullScreen: true,\n      ContentProps,\n      BackdropProps,\n      disableEscapeKeyDown: false,\n      TransitionProps,\n      onExited: () => {\n        this.sourceElement = null;\n      },\n    }),\n  });\n\n  constructor(\n    private _modalView: ModalView,\n    @optional('GalleryViewOptions')\n    protected _galleryViewOptions?: GalleryViewOptions,\n  ) {\n    super();\n  }\n\n  /**\n   * open image gallery from source element\n   */\n  open(url: string, { alt, sourceElement, info }: GalleryOpenOptions) {\n    if (sourceElement) {\n      this.sourceElement = sourceElement;\n    }\n\n    const result = this._modalView.open(this._gallery, {\n      url,\n      alt,\n      info,\n    });\n\n    return result;\n  }\n\n  private getHostElement() {\n    return {\n      current: this.sourceElement || null,\n    };\n  }\n\n  header = () => {\n    const { props, action } = useModalItemView<GalleryPayload>();\n    const { open, payload } = props;\n    const { info } = payload || {};\n\n    const {\n      downloadUrl,\n      subject,\n      description,\n      AvatarProps,\n      primary,\n      secondary,\n    } = info || {};\n\n    return (\n      <RcSlide in={open}>\n        <header className=\"bg-neutral-b4 flex items-center p-6 border-b border-neutral-b3 h-16\">\n          <div className=\"flex w-1/4 items-center justify-start pr-2 gap-2\">\n            <RcAvatar size=\"xsmall\" {...AvatarProps} />\n            <div>\n              {primary && <RcText color=\"neutral.f06\">{primary}</RcText>}\n              {secondary && (\n                <RcText color=\"neutral.f04\" variant=\"caption1\">\n                  {secondary}\n                </RcText>\n              )}\n            </div>\n          </div>\n          <div className=\"flex w-1/2 items-center justify-center gap-2\">\n            {subject && (\n              <RcText color=\"neutral.f06\">\n                <TextMiddleEllipsis>{subject}</TextMiddleEllipsis>\n              </RcText>\n            )}\n            {description && <RcText color=\"neutral.f04\">{description}</RcText>}\n          </div>\n          <div className=\"flex w-1/4 items-center justify-end\">\n            <RcIconButtonGroup className=\"-mr-2\">\n              {downloadUrl && (\n                <DownloadButton\n                  size=\"medium\"\n                  data-sign=\"gallery-download\"\n                  url={downloadUrl}\n                  variant=\"round\"\n                  name={subject}\n                />\n              )}\n              <RcIconButton\n                data-sign=\"gallery-close\"\n                symbol={Close}\n                onClick={() => action?.close()}\n              />\n            </RcIconButtonGroup>\n          </div>\n        </header>\n      </RcSlide>\n    );\n  };\n\n  footer = null;\n\n  component() {\n    const { props, action } = useModalItemView<GalleryPayload>();\n    const { open, payload } = props;\n    const { url, alt } = payload || {};\n    const [draggable, setDraggable] = useState(false);\n\n    const zoomRef = useRef<ZoomActionType>(null);\n    const imgRef = useRef<HTMLImageElement>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    const zoomActions = useHammerZoom(imgRef, {\n      container: containerRef,\n      min: minScaleRate,\n      max: maxScaleRate,\n      onScale: (scale) => {\n        zoomRef.current?.setRate(scale);\n      },\n      onDragChange: (state) => {\n        setDraggable(state);\n      },\n    });\n\n    const elementRef = this.getHostElement();\n    const imgContainerRef = useRef<HTMLDivElement>(null);\n    const img = (\n      <Img\n        ref={imgRef}\n        $draggable={draggable}\n        src={url}\n        alt={alt}\n        draggable=\"false\"\n      />\n    );\n\n    return (\n      <div\n        ref={containerRef}\n        data-sign=\"gallery-container\"\n        className=\"bg-neutral-b5 relative flex items-center justify-center overflow-hidden h-full\"\n        onClick={() => {\n          zoomActions.reset();\n          action?.close();\n        }}\n      >\n        <div\n          ref={imgContainerRef}\n          data-sign=\"gallery-image-container\"\n          onClick={(e) => {\n            // when click on container, close modal\n            if (e.target === imgContainerRef.current) return;\n\n            // when click on img, stop propagation\n            stopPropagation(e);\n          }}\n        >\n          {elementRef.current ? (\n            <RcZoomFrom from={elementRef} in={open} timeout={450}>\n              {img}\n            </RcZoomFrom>\n          ) : (\n            img\n          )}\n        </div>\n        <ZoomAction\n          ref={zoomRef}\n          min={minScaleRate}\n          max={maxScaleRate}\n          onZoom={(scale) => {\n            zoomActions?.zoom(scale);\n          }}\n        />\n      </div>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}