{"version":3,"file":"PresenceSetting.js","names":["_Presence","require","_components","_springIcon","_springUi","_react","_interopRequireWildcard","_i18n","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","PresenceSetting","exports","_ref","_ref$showPresenceSett","showPresenceSettings","toggleAcceptCallQueueCalls","isCallQueueMember","dndStatusProp","dndStatus","presenceStatus","setAvailable","setBusy","setDoNotDisturb","setInvisible","enableAcceptQueueCallsControl","onCallQueueManagementClick","_useState","useState","_useState2","showSelects","setShowSelects","_useState3","_useState4","statusAnchor","setStatusAnchor","iconRef","useRef","toggleShow","prev","onCallQueueChange","acceptQueueCalls","createElement","Line","endAdornment","Switch","disabled","doNotAcceptAnyCalls","checked","takeAllCalls","onChange","Tooltip","color","placement","title","Icon","size","symbol","InfoMd","showCallQueueManagement","doNotAcceptDepartmentCalls","callQueueManagement","LinkLine","onClick","currentStatus","usePresenceText","_usePresenceItems","usePresenceItems","divider","type","presenceElements","elements","selectedItem","Fragment","classes","className","StatusIndicator","variant","ref","CaretUpMd","CaretDownMd","current","Menu","open","Boolean","anchorEl","onClose"],"sources":["src/app/views/SettingsView/SettingsPanel/PresenceSetting/PresenceSetting.tsx"],"sourcesContent":["import type { DNDStatusValueType } from '@ringcentral-integration/commons/modules/Presence';\nimport { dndStatus } from '@ringcentral-integration/commons/modules/Presence';\nimport {\n  Line,\n  LinkLine,\n  usePresenceItems,\n  usePresenceText,\n} from '@ringcentral-integration/next-widgets/components';\nimport { CaretDownMd, CaretUpMd, InfoMd } from '@ringcentral/spring-icon';\nimport {\n  Icon,\n  Menu,\n  StatusIndicator,\n  Switch,\n  Tooltip,\n} from '@ringcentral/spring-ui';\nimport type { FunctionComponent } from 'react';\nimport React, { useRef, useState } from 'react';\n\nimport { t } from './i18n';\n\ntype PresenceSettingProps = {\n  dndStatus: DNDStatusValueType;\n  presenceStatus: string;\n  isCallQueueMember: boolean;\n  setAvailable: (...args: any[]) => any;\n  setBusy: (...args: any[]) => any;\n  setDoNotDisturb: (...args: any[]) => any;\n  setInvisible: (...args: any[]) => any;\n  toggleAcceptCallQueueCalls: (...args: any[]) => any;\n  showPresenceSettings: boolean;\n  enableAcceptQueueCallsControl: boolean;\n  onCallQueueManagementClick?: () => void;\n};\n\nexport const PresenceSetting: FunctionComponent<PresenceSettingProps> = ({\n  showPresenceSettings = false,\n  toggleAcceptCallQueueCalls,\n  isCallQueueMember,\n  dndStatus: dndStatusProp,\n  presenceStatus,\n  setAvailable,\n  setBusy,\n  setDoNotDisturb,\n  setInvisible,\n  enableAcceptQueueCallsControl,\n  onCallQueueManagementClick,\n}) => {\n  const [showSelects, setShowSelects] = useState(showPresenceSettings);\n  const [statusAnchor, setStatusAnchor] = useState<HTMLDivElement | null>(null);\n  const iconRef = useRef<HTMLDivElement>(null);\n\n  const toggleShow = () => {\n    setShowSelects((prev) => !prev);\n  };\n\n  const onCallQueueChange = () => {\n    toggleAcceptCallQueueCalls();\n  };\n\n  const acceptQueueCalls = isCallQueueMember ? (\n    <Line\n      data-sign=\"acceptQueueSwitch\"\n      endAdornment={\n        <Switch\n          data-sign=\"switch\"\n          disabled={\n            dndStatusProp === dndStatus.doNotAcceptAnyCalls ||\n            !enableAcceptQueueCallsControl\n          }\n          checked={dndStatusProp === dndStatus.takeAllCalls}\n          onChange={onCallQueueChange}\n        />\n      }\n    >\n      {t('acceptQueueCalls')}\n      {!enableAcceptQueueCallsControl ? (\n        <Tooltip\n          color=\"neutral\"\n          placement=\"bottom\"\n          title={t('callQueueDisabledReason')}\n        >\n          <Icon size=\"small\" symbol={InfoMd} data-sign={`call-queue-info`} />\n        </Tooltip>\n      ) : null}\n    </Line>\n  ) : null;\n\n  // don't show the management if dnd or do not accept department calls\n  const showCallQueueManagement =\n    enableAcceptQueueCallsControl &&\n    onCallQueueManagementClick &&\n    dndStatusProp !== dndStatus.doNotAcceptAnyCalls &&\n    dndStatusProp !== dndStatus.doNotAcceptDepartmentCalls;\n  const callQueueManagement = showCallQueueManagement ? (\n    <LinkLine\n      data-sign=\"callQueueManagement\"\n      onClick={onCallQueueManagementClick}\n    >\n      {t('callQueueManagement')}\n    </LinkLine>\n  ) : null;\n\n  const currentStatus = usePresenceText({\n    presenceStatus,\n    dndStatus: dndStatusProp,\n  });\n\n  const { elements: presenceElements, selectedItem } = usePresenceItems({\n    presenceStatus,\n    dndStatus: dndStatusProp,\n    divider: false,\n    onChange: (type) => {\n      switch (type) {\n        case 'available':\n          setAvailable();\n          break;\n        case 'busy':\n          setBusy();\n          break;\n        case 'DND':\n          setDoNotDisturb();\n          break;\n        case 'offline':\n          setInvisible();\n          break;\n        default:\n          break;\n      }\n      setStatusAnchor(null);\n      setShowSelects(false);\n    },\n  });\n\n  return (\n    <>\n      <Line\n        data-sign=\"statusToggleShow\"\n        classes={{\n          endAdornment: 'max-w-max',\n        }}\n        endAdornment={\n          <span className=\"flex gap-2 items-center\">\n            <StatusIndicator size=\"medium\" variant={selectedItem?.variant} />\n            <span\n              data-sign=\"status\"\n              className=\"typography-mainText text-nowrap\"\n            >\n              {currentStatus}\n            </span>\n            <Icon\n              data-sign=\"dropdownIcon\"\n              ref={iconRef}\n              symbol={showSelects ? CaretUpMd : CaretDownMd}\n            />\n          </span>\n        }\n        onClick={() => {\n          setStatusAnchor(showSelects ? null : iconRef.current);\n          toggleShow();\n        }}\n        className=\"cursor-pointer gap-2\"\n      >\n        <div data-sign=\"label\" className=\"text-neutral-b1 truncate\">\n          {t('status')}\n        </div>\n      </Line>\n      <Menu\n        open={Boolean(statusAnchor)}\n        anchorEl={statusAnchor}\n        onClose={() => {\n          setStatusAnchor(null);\n          setShowSelects(false);\n        }}\n      >\n        {presenceElements}\n      </Menu>\n      {acceptQueueCalls}\n      {callQueueManagement}\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]}