{"version":3,"file":"useThreadInfoDisplay.js","names":["_components","require","_hooks","_components2","_springIcon","_springUi","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_i18n","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","AlertBanner","_ref","_ref$severity","severity","title","actions","createElement","Alert","className","useThreadInfoDisplay","exports","_ref2","_metadata$loading","_metadata$reopen","_threadState$showInpu","_threadInfo$owner","threadInfo","info","extensionId","onAction","metadata","_useLocale","useLocale","i18n","isLoading","loading","isReopened","reopen","threadState","useMemo","_threadInfo$assignee","_threadInfo$assignee2","_threadInfo$assignee3","_threadInfo$assignee4","_threadInfo$assignee5","isResolved","status","isAssigned","assignee","currentExtensionId","toString","isAssignedToMe","showInput","assigneeBadge","assigneeName","name","assigneeBadgeTooltip","children","getAvatarLetter","color","variant","isExpired","statusReason","Icon","symbol","CheckMd","size","Fragment","ClockMd","showResolvedBanner","showUnassignedBanner","showAssignedToOtherBanner","bannerDisplay","lastActionRef","useRef","ThreadBanner","useCallback","current","Button","disabled","onClick","undefined","assignToMeLoading","FormattedMessage","message","values","ThreadStatus","tooltipTitle","tagElement","Tag","clsx","Tooltip","queueName","owner"],"sources":["src/app/views/MessageThreadsView/useThreadInfoDisplay.tsx"],"sourcesContent":["import { getAvatarLetter } from '@ringcentral-integration/micro-contacts/src/app/components';\nimport { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport {\n  FormattedMessage,\n  HistoryActionType,\n} from '@ringcentral-integration/next-widgets/components';\nimport { CheckMd, ClockMd } from '@ringcentral/spring-icon';\nimport {\n  Alert,\n  Button,\n  Icon,\n  Tag,\n  Tooltip,\n  type TagProps,\n} from '@ringcentral/spring-ui';\nimport clsx from 'clsx';\nimport React, { useCallback, useMemo, useRef } from 'react';\n\nimport type { ThreadInfoRecord, ThreadMetaData } from '../../services';\nimport type { OnConversationsActionsType } from '../ConversationsViewSpring';\n\nimport i18n from './i18n';\n\nexport type UseThreadInfoDisplayProps = {\n  extensionId?: number;\n  info?: ThreadInfoRecord;\n  metadata?: ThreadMetaData;\n  onAction?: OnConversationsActionsType;\n};\n\nconst AlertBanner: React.FC<{\n  severity?: 'info' | 'warning' | 'error';\n  title: React.ReactNode;\n  actions: React.ReactNode;\n}> = ({ severity = 'info', title, actions }) => {\n  return (\n    <Alert severity={severity} className=\"m-4\">\n      <div className=\"flex flex-col gap-2\">\n        <h4>{title}</h4>\n        <div className=\"flex gap-3\">{actions}</div>\n      </div>\n    </Alert>\n  );\n};\n\nexport const useThreadInfoDisplay = ({\n  info: threadInfo,\n  extensionId,\n  onAction,\n  metadata,\n}: UseThreadInfoDisplayProps) => {\n  const { t } = useLocale(i18n);\n\n  const isLoading = metadata?.loading ?? false;\n  const isReopened = metadata?.reopen ?? false;\n\n  const threadState = useMemo(() => {\n    if (!threadInfo) {\n      return null;\n    }\n\n    const isResolved = threadInfo.status === 'Resolved';\n    const isAssigned = !!threadInfo.assignee;\n    const currentExtensionId = extensionId?.toString();\n    const isAssignedToMe =\n      threadInfo.assignee?.extensionId === currentExtensionId;\n\n    const showInput = (!isResolved && isAssignedToMe) || isReopened;\n\n    // Get assignee badge info\n    let assigneeBadge: TagProps | null = null;\n\n    const assigneeName = threadInfo.assignee?.name;\n    // Get tooltip text for assignee badge\n    let assigneeBadgeTooltip: string | undefined;\n\n    if (isAssigned && !isResolved && threadInfo.assignee?.name) {\n      assigneeBadge = {\n        children: getAvatarLetter(assigneeName),\n        color: isAssignedToMe ? 'warning' : 'primary',\n        variant: isAssignedToMe ? 'filled' : 'outlined',\n        className: isAssignedToMe ? 'border-none' : '',\n      };\n    } else if (isResolved) {\n      const isExpired = threadInfo.statusReason === 'ThreadExpired';\n\n      if (!isExpired) {\n        assigneeBadge = {\n          children: <Icon symbol={CheckMd} size=\"xsmall\" />,\n          color: 'primary',\n        };\n        assigneeBadgeTooltip = t('resolved');\n      } else {\n        assigneeBadge = {\n          children: (\n            <>\n              <Icon symbol={ClockMd} size=\"xsmall\" />\n              <Icon className=\"ml-0.5\" symbol={CheckMd} size=\"xsmall\" />\n            </>\n          ),\n          color: 'primary',\n          className: 'border-none',\n        };\n        assigneeBadgeTooltip = t('autoResolved');\n      }\n    }\n\n    if (isAssigned && !isResolved && threadInfo.assignee?.name) {\n      if (isAssignedToMe) {\n        assigneeBadgeTooltip = t('assignedToYouTooltip');\n      } else {\n        assigneeBadgeTooltip = t('assignedToOtherTooltip', {\n          name: assigneeName || '',\n        });\n      }\n    }\n\n    return {\n      isResolved,\n      isAssigned,\n      isAssignedToMe,\n      assigneeName: threadInfo.assignee?.name,\n      assigneeBadge,\n      assigneeBadgeTooltip,\n      showInput,\n      showResolvedBanner: isResolved,\n      showUnassignedBanner: !isAssigned && !isResolved,\n      showAssignedToOtherBanner: isAssigned && !isAssignedToMe && !isResolved,\n    };\n  }, [threadInfo, extensionId, isReopened, t]);\n\n  const bannerDisplay = useMemo(() => {\n    if (!threadState) return false;\n    return (\n      threadState.showResolvedBanner ||\n      threadState.showUnassignedBanner ||\n      threadState.showAssignedToOtherBanner\n    );\n  }, [threadState]);\n\n  const lastActionRef = useRef<HistoryActionType | null>(null);\n\n  const showInput = threadState?.showInput ?? true;\n  const ThreadBanner = useCallback(() => {\n    if (!threadState || !bannerDisplay) {\n      return null;\n    }\n\n    if (threadState.showResolvedBanner) {\n      const loading = isLoading && lastActionRef.current === 'assignToMe';\n      return (\n        <AlertBanner\n          title={t('resolvedBanner')}\n          actions={\n            !showInput ? (\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                size=\"medium\"\n                loading={loading}\n                disabled={isLoading && !loading}\n                onClick={() => {\n                  lastActionRef.current = 'assignToMe';\n                  return onAction?.('assignToMe');\n                }}\n              >\n                {t('reply')}\n              </Button>\n            ) : undefined\n          }\n        />\n      );\n    }\n\n    if (threadState.showUnassignedBanner) {\n      const loading = isLoading && lastActionRef.current === 'assignThread';\n      const assignToMeLoading =\n        isLoading && lastActionRef.current === 'assignToMe';\n      return (\n        <AlertBanner\n          severity=\"info\"\n          title={t('unassignedBannerText')}\n          actions={\n            <>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                size=\"medium\"\n                loading={assignToMeLoading}\n                disabled={isLoading && !assignToMeLoading}\n                onClick={() => {\n                  lastActionRef.current = 'assignToMe';\n                  return onAction?.('assignToMe');\n                }}\n              >\n                {t('reply')}\n              </Button>\n              <Button\n                variant=\"text\"\n                color=\"secondary\"\n                size=\"medium\"\n                loading={loading}\n                disabled={isLoading && !loading}\n                onClick={() => {\n                  lastActionRef.current = 'assignThread';\n                  return onAction?.('assignThread');\n                }}\n              >\n                {t('assign')}\n              </Button>\n            </>\n          }\n        />\n      );\n    }\n\n    if (threadState.showAssignedToOtherBanner) {\n      const loading = isLoading && lastActionRef.current === 'assignToMe';\n\n      return (\n        <AlertBanner\n          title={\n            <FormattedMessage\n              message={t('assignedToOtherBanner')}\n              values={{\n                name: threadState.assigneeName || '',\n              }}\n            />\n          }\n          actions={\n            <>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                size=\"medium\"\n                loading={loading}\n                disabled={isLoading && !loading}\n                onClick={() => {\n                  lastActionRef.current = 'assignToMe';\n                  return onAction?.('assignToMe');\n                }}\n              >\n                {t('assignToMeText')}\n              </Button>\n            </>\n          }\n        />\n      );\n    }\n\n    return null;\n  }, [threadState, bannerDisplay, isLoading, t, showInput, onAction]);\n\n  const ThreadStatus = useCallback(() => {\n    const assigneeBadge = threadState?.assigneeBadge;\n    if (!assigneeBadge) {\n      return null;\n    }\n\n    const tooltipTitle = threadState?.assigneeBadgeTooltip;\n\n    const tagElement = (\n      <Tag\n        {...assigneeBadge}\n        className={clsx(\n          'flex items-center justify-center rounded-full',\n          assigneeBadge.className,\n        )}\n        variant={assigneeBadge.variant || 'filled'}\n        data-sign=\"thread-status\"\n      />\n    );\n\n    if (tooltipTitle) {\n      return <Tooltip title={tooltipTitle}>{tagElement}</Tooltip>;\n    }\n\n    return tagElement;\n  }, [threadState]);\n\n  const queueName = threadInfo?.owner?.name;\n\n  return {\n    bannerDisplay,\n    ThreadBanner,\n    ThreadStatus,\n    showInput,\n    queueName,\n  };\n};\n"],"mappings":"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","ignoreList":[]}