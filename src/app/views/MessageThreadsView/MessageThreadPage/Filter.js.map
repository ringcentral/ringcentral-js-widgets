{"version":3,"file":"Filter.js","names":["_hooks","require","_reactHooks","_springIcon","_springUi","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_rxjs","_components","_i18n","_FilterPopper","_i18n2","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","l","iterator","u","next","done","isArray","filterStyle","Filter","exports","_ref","className","form","_ref$onSharedSearchFo","onSharedSearchFormUpdate","noop","_ref$callQueues","callQueues","assignmentOptions","_useLocale","useLocale","i18n","conversationsI18n","_useState","useState","_useState2","filterPopperOpen","setFilterPopperOpen","_useState3","_useState4","searchExpanded","setSearchExpanded","filterIconRef","useRef","debouncedOnSearchInputChange","useDebounce","searchInput","_useAsyncState","useAsyncState","_useAsyncState2","setSearchInput","handleFilterIconClick","prev","statusFilter","selectedAssignees","selectedCallQueues","activeFilterCount","useMemo","count","hasActiveFilters","prevFilter","usePrevious","rightButtonState","isActive","filterValue","handleAllClick","handleRightButtonClick","allText","allButton","createElement","clsx","title","type","onClick","rightText","rightButton","Fragment","SearchInputToggle","onSearchInputChange","currentTarget","expanded","onExpandedChange","placeholder","IconButton","ref","variant","size","color","Icon","symbol","FilterMd","FilterPopper","anchorEl","current","open","onClose"],"sources":["src/app/views/MessageThreadsView/MessageThreadPage/Filter.tsx"],"sourcesContent":["import { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport { type CallQueueInfo } from '@ringcentral-integration/micro-phone/src/app/services';\nimport { useAsyncState } from '@ringcentral-integration/react-hooks';\nimport { FilterMd } from '@ringcentral/spring-icon';\nimport {\n  Icon,\n  IconButton,\n  useDebounce,\n  usePrevious,\n} from '@ringcentral/spring-ui';\nimport clsx from 'clsx';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { noop } from 'rxjs';\n\nimport { SearchInputToggle } from '../../../components';\nimport conversationsI18n from '../../ConversationsViewSpring/ConversationsPage/i18n';\nimport type {\n  SharedFilterType,\n  SharedSearchForm,\n} from '../MessageThreads.view.interface';\nimport type { AssignmentOption } from '../utils/constants';\n\nimport { FilterPopper } from './FilterPopper';\nimport i18n from './i18n';\n\nconst filterStyle = 'sui-filter-button sui-filter-button-root max-w-[120px]';\n\ntype FilterProps = {\n  form: SharedSearchForm;\n  onSharedSearchFormUpdate?: (\n    updates: Partial<SharedSearchForm> | 'reset',\n  ) => void;\n  className?: string;\n  callQueues?: CallQueueInfo[];\n  assignmentOptions: readonly AssignmentOption[];\n};\n\nexport const Filter: React.FC<FilterProps> = ({\n  className,\n  form,\n  onSharedSearchFormUpdate = noop,\n  callQueues = [],\n  assignmentOptions,\n}) => {\n  const { t } = useLocale(i18n, conversationsI18n);\n  const [filterPopperOpen, setFilterPopperOpen] = useState(false);\n  const [searchExpanded, setSearchExpanded] = useState(false);\n  const filterIconRef = useRef<HTMLButtonElement>(null);\n\n  const debouncedOnSearchInputChange = useDebounce((value: string) => {\n    onSharedSearchFormUpdate({ searchInput: value });\n  }, 500);\n\n  const [searchInput, setSearchInput] = useAsyncState(\n    form.searchInput,\n    (value) => {\n      debouncedOnSearchInputChange(value);\n    },\n  );\n\n  const handleFilterIconClick = () => {\n    setFilterPopperOpen((prev) => !prev);\n  };\n\n  const { filter, statusFilter, selectedAssignees, selectedCallQueues } = form;\n\n  const activeFilterCount = useMemo(() => {\n    let count = 0;\n    // If not all statuses are selected (meaning some are filtered out)\n    if (statusFilter.length < 2) {\n      count += 1;\n    }\n    // If selectedAssignees length equals max possible (assignmentOptions.length), treat as 0 (all selected)\n    count +=\n      selectedAssignees.length === assignmentOptions.length\n        ? 0\n        : selectedAssignees.length;\n    // If selectedCallQueues length equals max possible (callQueues.length), treat as 0 (all selected)\n    count +=\n      selectedCallQueues.length === callQueues.length && callQueues.length > 0\n        ? 0\n        : selectedCallQueues.length;\n    return count;\n  }, [\n    statusFilter,\n    selectedAssignees,\n    selectedCallQueues,\n    callQueues,\n    assignmentOptions,\n  ]);\n\n  const hasActiveFilters = activeFilterCount > 0;\n\n  const prevFilter = usePrevious(() => filter);\n\n  // Determine which filter to show on the right button and if it's active\n  const rightButtonState = useMemo(() => {\n    // When search is expanded, show only active filter\n    const isActive = filter === 'Unread' || filter === 'AssignedToMe';\n\n    const filterValue: SharedFilterType =\n      filter === 'All' ? prevFilter ?? 'AssignedToMe' : filter;\n    return {\n      filter: filterValue,\n      isActive,\n    };\n  }, [filter, prevFilter]);\n\n  const handleAllClick = () => {\n    // All is an independent action that clears all filters\n    onSharedSearchFormUpdate('reset');\n  };\n\n  const handleRightButtonClick = (filter: SharedFilterType) => {\n    // Toggle between AssignedToMe and Unread\n    onSharedSearchFormUpdate({\n      filter,\n      ...(filter === 'AssignedToMe'\n        ? { selectedAssignees: ['__CURRENT_USER__'] }\n        : {}),\n    });\n  };\n\n  const allText = t('all');\n  const allButton = (\n    <button\n      className={clsx(\n        filterStyle,\n        !rightButtonState.isActive && 'sui-selected',\n      )}\n      title={allText}\n      aria-current={!rightButtonState.isActive}\n      type=\"button\"\n      onClick={handleAllClick}\n      data-sign=\"filterAllButton\"\n    >\n      {allText}\n    </button>\n  );\n\n  const rightText =\n    rightButtonState.filter === 'Unread' ? t('unread') : t('assignedToMe');\n  const rightButton = (\n    <button\n      className={clsx(filterStyle, rightButtonState.isActive && 'sui-selected')}\n      title={rightText}\n      aria-current={rightButtonState.isActive}\n      type=\"button\"\n      onClick={() =>\n        handleRightButtonClick(\n          rightButtonState.filter === 'Unread' ? 'Unread' : 'AssignedToMe',\n        )\n      }\n      data-sign=\"filterToggleButton\"\n    >\n      {rightText}\n    </button>\n  );\n\n  return (\n    <>\n      <div className={clsx('flex px-3 py-1 items-center gap-2', className)}>\n        <div className=\"flex-auto\">\n          <SearchInputToggle\n            data-sign=\"sharedThreadSearch\"\n            searchInput={searchInput}\n            onSearchInputChange={(e) => setSearchInput(e.currentTarget.value)}\n            expanded={searchExpanded}\n            onExpandedChange={setSearchExpanded}\n            placeholder={t('searchText')}\n          />\n        </div>\n        <div className=\"flex items-center flex-shrink-0 gap-1\">\n          {/* When search is expanded, only show active filter */}\n          {searchExpanded ? (\n            rightButtonState.isActive ? (\n              <div className=\"sui-single-filter sui-single-filter-root\">\n                {rightButton}\n              </div>\n            ) : (\n              <div className=\"sui-single-filter sui-single-filter-root\">\n                {allButton}\n              </div>\n            )\n          ) : (\n            <div className=\"sui-single-filter sui-single-filter-root\">\n              {allButton}\n              {rightButton}\n            </div>\n          )}\n          <div className=\"relative flex items-center\">\n            <IconButton\n              ref={filterIconRef}\n              variant=\"icon\"\n              size=\"small\"\n              className=\"flex items-center flex-row\"\n              color={hasActiveFilters ? 'primary' : 'secondary'}\n              onClick={handleFilterIconClick}\n              data-sign=\"messageThreadFilterIcon\"\n            >\n              <Icon symbol={FilterMd} size=\"small\" />\n              {hasActiveFilters && (\n                <span className=\"typography-descriptor\">\n                  ({activeFilterCount})\n                </span>\n              )}\n            </IconButton>\n          </div>\n        </div>\n      </div>\n      <FilterPopper\n        anchorEl={filterIconRef.current}\n        open={filterPopperOpen}\n        onClose={() => setFilterPopperOpen(false)}\n        selectedAssignees={selectedAssignees}\n        statusFilter={statusFilter}\n        callQueues={callQueues}\n        selectedCallQueues={form.selectedCallQueues}\n        filter={filter}\n        onSharedSearchFormUpdate={onSharedSearchFormUpdate}\n      />\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]}