{"version":3,"file":"MessageThreadList.js","names":["_reactHooks","require","_no_text","_interopRequireDefault","_springUi","_react","_ConversationsListItem","e","__esModule","Footer","createElement","SkeletonContainer","Array","from","length","map","_","i","Fragment","key","className","Skeleton","variant","Divider","MessageThreadList","exports","_ref","threadConversations","lastPosition","loading","setLastPosition","useConversationItemInfo","useActionsHandler","useItemRender","showLogPopover","createNewEntityTooltip","notFoundMessage","onEndReached","_useVirtuosoScrollPos","useVirtuosoScrollPosition","snapshot","virtuosoActionsRef","scrollerRef","components","undefined","VirtualizedList","data","virtuosoActions","restoreStateFrom","increaseViewportBy","endReached","index","conversation","ConversationsListItem","conversationId","typeFilter"],"sources":["src/app/views/MessageThreadsView/MessageThreadPage/MessageThreadList.tsx"],"sourcesContent":["import { useVirtuosoScrollPosition } from '@ringcentral-integration/react-hooks';\nimport NoText from '@ringcentral-integration/next-core/assets/no_text.svg';\nimport {\n  Skeleton,\n  SkeletonContainer,\n  VirtualizedList,\n  Divider,\n} from '@ringcentral/spring-ui';\nimport React from 'react';\nimport type { StateSnapshot } from 'react-virtuoso';\n\nimport type { MessageThread } from '../../../services';\nimport type { ConversationsPanelSpringProps } from '../../ConversationsViewSpring/Conversations.view.interface';\nimport { ConversationsListItem } from '../../ConversationsViewSpring/ConversationsPage/ConversationsListItem';\n\nexport type MessageThreadListProps = {\n  threadConversations: MessageThread['threadConversationsInfo']['conversations'];\n  className?: string;\n  lastPosition?: StateSnapshot;\n  loading?: boolean;\n  setLastPosition: (page: string, val?: StateSnapshot) => void;\n  useConversationItemInfo: ConversationsPanelSpringProps['useConversationItemInfo'];\n  useActionsHandler: ConversationsPanelSpringProps['useActionsHandler'];\n  useItemRender?: ConversationsPanelSpringProps['useItemRender'];\n  showLogPopover?: ConversationsPanelSpringProps['showLogPopover'];\n  createNewEntityTooltip?: ConversationsPanelSpringProps['createNewEntityTooltip'];\n  notFoundMessage?: React.ReactNode;\n  onEndReached: () => void;\n};\n\nconst Footer = () => {\n  return (\n    <SkeletonContainer>\n      {Array.from({ length: 5 }).map((_, i) => (\n        <React.Fragment key={i}>\n          <div className=\"px-4\">\n            <div className=\"flex gap-3 items-center py-3\">\n              <Skeleton variant=\"circular\" className=\"size-9\" />\n              <div className=\"flex flex-col flex-1\">\n                <Skeleton\n                  variant=\"text\"\n                  className=\"w-3/4 typography-subtitle\"\n                />\n                <Skeleton\n                  variant=\"text\"\n                  className=\"w-1/2 typography-descriptor\"\n                />\n              </div>\n            </div>\n            <Divider />\n          </div>\n        </React.Fragment>\n      ))}\n    </SkeletonContainer>\n  );\n};\n\nexport const MessageThreadList: React.FC<MessageThreadListProps> = ({\n  threadConversations,\n  className,\n  lastPosition,\n  loading,\n  setLastPosition,\n  useConversationItemInfo,\n  useActionsHandler,\n  useItemRender,\n  showLogPopover,\n  createNewEntityTooltip,\n  notFoundMessage,\n  onEndReached,\n}) => {\n  const { virtuosoActionsRef, scrollerRef } = useVirtuosoScrollPosition(\n    (snapshot) => setLastPosition('shared', snapshot),\n  );\n\n  if (threadConversations.length === 0 && !loading) {\n    return (\n      <div className=\"flex-auto flex justify-center items-center overflow-y-auto overflow-x-hidden\">\n        <div className=\"flex-col flex justify-center items-center gpa-4\">\n          {notFoundMessage ? (\n            <>\n              <NoText />\n              <div className=\"text-center text-14 text-gray-500 mt-4\">\n                {notFoundMessage}\n              </div>\n            </>\n          ) : (\n            <NoText />\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  const components = loading\n    ? {\n        Footer,\n      }\n    : undefined;\n\n  return (\n    <VirtualizedList\n      key=\"shared\"\n      className={className}\n      data={threadConversations}\n      data-sign=\"sharedMessageThreadList\"\n      virtuosoActions={virtuosoActionsRef}\n      scrollerRef={scrollerRef}\n      restoreStateFrom={lastPosition || undefined}\n      increaseViewportBy={200}\n      endReached={onEndReached}\n      components={components}\n    >\n      {(index, conversation) => (\n        <ConversationsListItem\n          key={conversation.conversationId}\n          conversation={conversation}\n          index={index}\n          useActionsHandler={useActionsHandler}\n          useConversationItemInfo={useConversationItemInfo}\n          useItemRender={useItemRender}\n          showLogPopover={showLogPopover}\n          typeFilter=\"Text\"\n          createNewEntityTooltip={createNewEntityTooltip}\n        />\n      )}\n    </VirtualizedList>\n  );\n};\n"],"mappings":"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","ignoreList":[]}