{"version":3,"file":"AppRoot.view.js","names":["_nextCore","require","_utils","_react","_interopRequireDefault","_services","_ModalView","_ToastView","_globalStyle","_uiErrorIgnorer","_dec","_dec2","_dec3","_class","e","__esModule","_classCallCheck","a","n","TypeError","_defineProperties","r","t","length","o","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","prototype","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","value","_setPrototypeOf","AppRootView","exports","injectable","name","metadata","Function","ModalView","ToastView","EnsureAudio","_RcViewModule","_modalView","_toastView","_ensureAudio","_this","isSafari","ensure","isSharedWorker","uiErrorIgnorer","component","_ref","children","ModalViewProps","ToastViewProps","_ref$usingGlobalStyle","usingGlobalStyle","createElement","Fragment","GlobalStyle","RcViewModule"],"sources":["src/app/views/AppRootView/AppRoot.view.tsx"],"sourcesContent":["import {\n  injectable,\n  isSharedWorker,\n  RcViewModule,\n} from '@ringcentral-integration/next-core';\nimport { isSafari } from '@ringcentral-integration/utils';\nimport React, { PropsWithChildren } from 'react';\n\nimport { EnsureAudio } from '../../services';\nimport { ModalView, ModalViewProps } from '../ModalView';\nimport { ToastView, ToastViewProps } from '../ToastView';\nimport { GlobalStyle } from '../globalStyle';\n\nimport { uiErrorIgnorer } from './uiErrorIgnorer';\n\ntype AppRootProps = {\n  ModalViewProps?: ModalViewProps;\n  ToastViewProps?: ToastViewProps;\n  usingGlobalStyle?: boolean;\n};\n\n@injectable({\n  name: 'AppRootView',\n})\nexport class AppRootView extends RcViewModule {\n  constructor(\n    private _modalView: ModalView,\n    private _toastView: ToastView,\n    private _ensureAudio: EnsureAudio,\n  ) {\n    super();\n\n    // only safari need to ensure audio permission\n    // safari not allow non any user interaction to play audio\n    if (isSafari()) {\n      this._ensureAudio.ensure();\n    }\n\n    if (!isSharedWorker) {\n      uiErrorIgnorer();\n    }\n  }\n\n  component({\n    children,\n    ModalViewProps,\n    ToastViewProps,\n    usingGlobalStyle = true,\n  }: PropsWithChildren<AppRootProps>) {\n    return (\n      <>\n        {usingGlobalStyle && <GlobalStyle />}\n        {children}\n        <this._modalView.component {...ModalViewProps} />\n        <this._toastView.component {...ToastViewProps} />\n      </>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}