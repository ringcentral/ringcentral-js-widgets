{"version":3,"file":"ConversationLogPopover.js","names":["_ReferenceWidgetSpring","require","_nextCore","_reactHooks","_springIcon","_springUi","_react","_interopRequireWildcard","_reactUse","_i18n","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_regenerator","Symbol","iterator","toStringTag","c","prototype","Generator","u","create","_regeneratorDefine2","p","y","G","v","a","d","bind","length","l","TypeError","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","displayName","w","m","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","from","isArray","_arrayLikeToArray","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","toString","slice","constructor","name","test","next","push","ConversationLogPopover","exports","_ref","anchorEl","onClose","opened","conversation","onCreateEntity","createNewEntityTooltip","conversationLogPopoverOptions","useContainer","mounted","usePromise","integrationConfig","handleCreateEntity","_ref2","_ref3","maxLogRecordsCount","conversationMatches","matches","correspondentMatches","conversationId","conversationLogId","thirdPartyMatches","useMemo","filter","_ref4","resourceType","allDisplayList","label","values","formKey","_useState","useState","_useState2","inputValue","setInputValue","_useAsyncState","useAsyncState","_useAsyncState2","selectedEntities","setSelectedEntities","_useState3","_useState4","saving","setSaving","_useState5","_useState6","searchOpened","setSearchOpened","openSearchPage","useCallback","closeSearchPage","selectedMap","reduce","acc","item","id","onSelectContact","referenceItemClickHandler","isSelected","newSelectedEntities","concat","entity","reachMaxSelectCount","onPressEnter","key","createElement","Fragment","Popover","open","placement","shadow","variant","bordered","onClick","stopPropagation","className","TextField","fullWidth","size","inputProps","onKeyDown","onChange","target","placeholder","IconButton","TooltipProps","title","symbol","PlusMd","color","ReferenceMainContent","filterTerm","currentValue","onItemClick","searchFn","errorHint","count","useMenuList","getIcon","Button","disabled","loading","_callee","promise","_t","_context","onSave","console","error","ReferenceSearchPanel","closePageFn","onBack","searchThirdPartyRecord","initValue","addEntityTooltip"],"sources":["src/app/views/ConversationsViewSpring/useConversationActionButtons/ConversationLogPopover.tsx"],"sourcesContent":["import {\n  type SimpleCrmObject,\n  type ReferenceItemClickHandler,\n  type SelectedIdMap,\n  ReferenceMainContent,\n  ReferenceSearchPanel,\n} from '@ringcentral-integration/micro-phone/src/app/components/ReferenceWidgetSpring';\nimport type { IntegrationConfig } from '@ringcentral-integration/micro-setting/src/app/services';\nimport { useContainer } from '@ringcentral-integration/next-core';\nimport { useAsyncState } from '@ringcentral-integration/react-hooks';\nimport { PlusMd } from '@ringcentral/spring-icon';\nimport {\n  Button,\n  Popover,\n  TextField,\n  IconButton,\n  PopoverProps,\n} from '@ringcentral/spring-ui';\nimport type { FunctionComponent } from 'react';\nimport React, { useState, useMemo, useCallback } from 'react';\nimport { usePromise } from 'react-use';\n\nimport {\n  ConversationMatch,\n  type FilteredConversation,\n} from '../../../services';\n\nimport { t } from './i18n';\n\nexport interface ConversationLogPopoverProps {\n  anchorEl: PopoverProps['anchorEl'];\n  opened: boolean;\n  onClose: () => void;\n  conversation: FilteredConversation;\n  onCreateEntity?: () => void;\n  createNewEntityTooltip?: string;\n}\n\nexport interface ConversationLogPopoverOptions {\n  maxLogRecordsCount?: number;\n  searchThirdPartyRecord?: (\n    searchString: string,\n  ) => Promise<SimpleCrmObject[] | undefined>;\n  onSelectContact?: (conversationLogId: string, item: SimpleCrmObject) => void;\n  onSave: (\n    conversationId: string,\n    selectedEntities: SimpleCrmObject[],\n  ) => Promise<void>;\n  useMenuList?: boolean;\n  getIcon?: (item: SimpleCrmObject) => React.ReactNode;\n}\n\nexport const ConversationLogPopover: FunctionComponent<\n  ConversationLogPopoverProps\n> = ({\n  anchorEl,\n  onClose,\n  opened,\n  conversation,\n  onCreateEntity,\n  createNewEntityTooltip,\n}) => {\n  const conversationLogPopoverOptions = useContainer<\n    ConversationLogPopoverOptions,\n    true\n  >('ConversationLogPopoverOptions');\n  const mounted = usePromise();\n\n  const integrationConfig =\n    useContainer<IntegrationConfig>('IntegrationConfig');\n\n  const handleCreateEntity = () => {\n    (onCreateEntity || integrationConfig.onCreateEntity)?.();\n  };\n\n  const { maxLogRecordsCount } = conversationLogPopoverOptions || {};\n\n  const {\n    conversationMatches,\n    correspondentMatches: matches,\n    conversationId,\n    conversationLogId,\n  } = conversation;\n\n  const thirdPartyMatches = useMemo(\n    () => matches.filter(({ resourceType }) => resourceType),\n    [matches],\n  );\n\n  const allDisplayList = [\n    {\n      label: t('suggested'),\n      values: thirdPartyMatches,\n    },\n  ];\n\n  const formKey = 'conversationDetailViewPopover';\n\n  const [inputValue, setInputValue] = useState('');\n  const [selectedEntities, setSelectedEntities] =\n    useAsyncState(conversationMatches);\n  const [saving, setSaving] = useState(false);\n  const [searchOpened, setSearchOpened] = useState(false);\n  const openSearchPage = useCallback(() => {\n    setSearchOpened(true);\n  }, []);\n  const closeSearchPage = useCallback(() => {\n    setSearchOpened(false);\n  }, []);\n\n  const selectedMap = useMemo(\n    () =>\n      (selectedEntities as SimpleCrmObject[]).reduce((acc, item) => {\n        acc[item.id!] = true;\n        return acc;\n      }, {} as SelectedIdMap),\n    [selectedEntities],\n  );\n\n  const onSelectContact = conversationLogPopoverOptions?.onSelectContact;\n\n  const referenceItemClickHandler = useCallback<ReferenceItemClickHandler>(\n    (item, isSelected) => {\n      const newSelectedEntities = isSelected\n        ? [...selectedEntities, item as ConversationMatch]\n        : selectedEntities.filter((entity) => entity.id !== item.id);\n      setSelectedEntities([...newSelectedEntities]);\n      onSelectContact?.(conversationLogId, item);\n    },\n    [selectedEntities, setSelectedEntities, onSelectContact, conversationLogId],\n  );\n\n  const reachMaxSelectCount =\n    maxLogRecordsCount && selectedEntities.length > maxLogRecordsCount;\n\n  const onPressEnter = useCallback(\n    (e: React.KeyboardEvent) => {\n      if (e.key === 'Enter') {\n        if (inputValue.length < 3 || searchOpened) return;\n        openSearchPage();\n      }\n    },\n    [inputValue, searchOpened, openSearchPage],\n  );\n\n  return (\n    <>\n      <Popover\n        anchorEl={anchorEl}\n        open={opened && !searchOpened}\n        onClose={onClose}\n        placement=\"bottom\"\n        shadow\n        variant=\"standard\"\n        bordered\n        data-sign=\"smsLogPopover\"\n        onClick={(e) => {\n          // TODO: spring-ui issue, click event will trigger the host item click event\n          e.stopPropagation();\n        }}\n      >\n        <div>\n          <div className=\"flex items-center gap-2 p-2 pl-3\">\n            <TextField\n              fullWidth\n              value={inputValue}\n              size=\"medium\"\n              inputProps={{\n                'data-sign': 'smsSearchInput',\n              }}\n              onKeyDown={onPressEnter}\n              onChange={(e) => {\n                e.stopPropagation();\n                setInputValue(e.target.value);\n              }}\n              placeholder={t('search')}\n            />\n            <IconButton\n              TooltipProps={{\n                title: createNewEntityTooltip,\n              }}\n              data-sign=\"addEntity\"\n              symbol={PlusMd}\n              color=\"secondary\"\n              variant=\"icon\"\n              onClick={handleCreateEntity}\n            />\n          </div>\n\n          <ReferenceMainContent\n            filterTerm={inputValue}\n            formKey={formKey}\n            allDisplayList={allDisplayList}\n            currentValue={selectedEntities}\n            onItemClick={referenceItemClickHandler}\n            searchFn={openSearchPage}\n            errorHint={\n              reachMaxSelectCount\n                ? t('logConversationMaxRecords', { count: maxLogRecordsCount })\n                : ''\n            }\n            useMenuList={conversationLogPopoverOptions?.useMenuList}\n            getIcon={conversationLogPopoverOptions?.getIcon}\n          />\n          <div className=\"flex justify-between px-3 py-4\">\n            <div className=\"w-[135px]\">\n              <Button\n                variant=\"text\"\n                size=\"medium\"\n                fullWidth\n                data-sign=\"cancel-button\"\n                onClick={onClose}\n              >\n                {t('cancel')}\n              </Button>\n            </div>\n            <div className=\"w-[135px]\">\n              <Button\n                size=\"medium\"\n                fullWidth\n                data-sign=\"save-button\"\n                disabled={\n                  reachMaxSelectCount || selectedEntities.length === 0 || saving\n                }\n                loading={saving}\n                onClick={async () => {\n                  try {\n                    setSaving(true);\n\n                    const promise = conversationLogPopoverOptions?.onSave(\n                      conversationId!,\n                      selectedEntities as SimpleCrmObject[],\n                    );\n\n                    if (promise) await mounted(promise);\n                    onClose();\n                  } catch (error) {\n                    console.error('save error');\n                  } finally {\n                    setSaving(false);\n                  }\n                }}\n              >\n                {t('save')}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </Popover>\n      {searchOpened && (\n        <ReferenceSearchPanel\n          closePageFn={closeSearchPage}\n          onCreateEntity={handleCreateEntity}\n          onBack={() => {\n            setInputValue('');\n          }}\n          onItemClick={referenceItemClickHandler}\n          selectedMap={selectedMap}\n          searchFn={conversationLogPopoverOptions?.searchThirdPartyRecord}\n          initValue={inputValue}\n          useMenuList={conversationLogPopoverOptions?.useMenuList}\n          getIcon={conversationLogPopoverOptions?.getIcon}\n          addEntityTooltip={createNewEntityTooltip}\n        />\n      )}\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]}