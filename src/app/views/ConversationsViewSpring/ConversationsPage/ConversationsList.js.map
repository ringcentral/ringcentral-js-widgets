{"version":3,"file":"ConversationsList.js","names":["_hooks","require","_reactHooks","_no_fax","_interopRequireDefault","_no_text","_no_voicemail","_springUi","_react","_ConversationsListItem","_i18n","e","__esModule","noDataComponentMap","All","SMS","Pager","Text","_ref","message","createElement","Fragment","className","Fax","_ref2","VoiceMail","_ref3","noDataHintMap","Read","Unread","ConversationsList","exports","props","conversations","notFoundMessage","useActionsHandler","useConversationItemInfo","useItemRender","lastPosition","setLastPosition","showLogPopover","typeFilter","readStatusFilter","createNewEntityTooltip","_useLocale","useLocale","i18n","t","_useVirtuosoScrollPos","useVirtuosoScrollPosition","snapshot","concat","virtuosoActionsRef","scrollerRef","length","NoComponent","VirtualizedList","key","data","virtuosoActions","restoreStateFrom","undefined","index","conversation","ConversationsListItem","conversationId"],"sources":["src/app/views/ConversationsViewSpring/ConversationsPage/ConversationsList.tsx"],"sourcesContent":["import { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport { useVirtuosoScrollPosition } from '@ringcentral-integration/react-hooks';\nimport NoFax from '@ringcentral-integration/next-core/assets/no_fax.svg';\nimport NoText from '@ringcentral-integration/next-core/assets/no_text.svg';\nimport NoVoiceMail from '@ringcentral-integration/next-core/assets/no_voicemail.svg';\nimport { VirtualizedList } from '@ringcentral/spring-ui';\nimport React, { ComponentType } from 'react';\n\nimport { ConversationsPanelSpringProps } from '../Conversations.view.interface';\n\nimport { ConversationsListItem } from './ConversationsListItem';\nimport i18n, { type I18nKey } from './i18n';\n\nexport type ConversationsListProps = Omit<\n  ConversationsPanelSpringProps,\n  | 'onSearchInputChange'\n  | 'goToComposeText'\n  | 'initTypeFilter'\n  | 'updateReadStatusFilterMap'\n  | 'searchInput'\n> & {\n  className?: string;\n};\n\nconst noDataComponentMap: Record<\n  'All' | 'Fax' | 'SMS' | 'VoiceMail' | 'Pager' | 'Text',\n  ComponentType<{ message?: React.ReactNode }>\n> = {\n  All: () => null,\n  SMS: () => null,\n  Pager: () => null,\n  Text: ({ message }) => (\n    <>\n      <NoText />\n      <div className=\"text-center text-14 text-gray-500 mt-2\">{message}</div>\n    </>\n  ),\n  Fax: ({ message }) => (\n    <>\n      <NoFax />\n      <div className=\"text-center text-14 text-gray-500 mt-2\">{message}</div>\n    </>\n  ),\n  VoiceMail: ({ message }) => (\n    <>\n      <NoVoiceMail />\n      <div className=\"text-center text-14 text-gray-500 mt-2\">{message}</div>\n    </>\n  ),\n};\n\nconst noDataHintMap = {\n  All: {\n    Read: 'noMessages',\n    Unread: 'noMessages',\n    All: 'noMessages',\n  },\n  Fax: {\n    Read: 'noFaxes',\n    Unread: 'noUnreadFaxes',\n    All: 'noFaxes',\n  },\n  SMS: {\n    Read: 'noMessages',\n    Unread: 'noMessages',\n    All: 'noMessages',\n  },\n  VoiceMail: {\n    Read: 'noVoicemail',\n    Unread: 'noVoicemail',\n    All: 'noVoicemail',\n  },\n  Pager: {\n    Read: 'noMessages',\n    Unread: 'noMessages',\n    All: 'noMessages',\n  },\n  Text: {\n    Read: 'noText',\n    Unread: 'noUnreadText',\n    All: 'noText',\n  },\n};\n\nexport const ConversationsList: React.FC<\n  ConversationsListProps & {\n    notFoundMessage?: React.ReactNode;\n  }\n> = (props) => {\n  const {\n    conversations,\n    className,\n    notFoundMessage,\n    useActionsHandler,\n    useConversationItemInfo,\n    useItemRender,\n    lastPosition,\n    setLastPosition,\n    showLogPopover,\n    typeFilter,\n    readStatusFilter,\n    createNewEntityTooltip,\n    // ...rest\n  } = props;\n  const { t } = useLocale(i18n);\n\n  const { virtuosoActionsRef, scrollerRef } = useVirtuosoScrollPosition(\n    (snapshot) =>\n      setLastPosition(`${typeFilter}-${readStatusFilter}`, snapshot),\n  );\n\n  if (conversations.length === 0) {\n    const NoComponent = noDataComponentMap[typeFilter];\n\n    return (\n      <div className=\"flex-auto flex justify-center items-center overflow-y-auto overflow-x-hidden\">\n        <div className=\"flex-col flex justify-center items-center gpa-4\">\n          {NoComponent ? (\n            <NoComponent\n              message={\n                notFoundMessage ??\n                t(noDataHintMap[typeFilter][readStatusFilter] as I18nKey)\n              }\n            />\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <VirtualizedList\n      key={`${typeFilter}-${readStatusFilter}`}\n      className={className}\n      data={conversations}\n      data-sign=\"conversationList\"\n      virtuosoActions={virtuosoActionsRef}\n      scrollerRef={scrollerRef}\n      // null is not a valid type for restoreStateFrom, if lastPosition is null, it should use undefined\n      restoreStateFrom={lastPosition || undefined}\n    >\n      {(index, conversation) => (\n        <ConversationsListItem\n          key={conversation.conversationId}\n          conversation={conversation}\n          index={index}\n          useActionsHandler={useActionsHandler}\n          useConversationItemInfo={useConversationItemInfo}\n          useItemRender={useItemRender}\n          showLogPopover={showLogPopover}\n          typeFilter={typeFilter}\n          createNewEntityTooltip={createNewEntityTooltip}\n        />\n      )}\n    </VirtualizedList>\n  );\n};\n"],"mappings":"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","ignoreList":[]}