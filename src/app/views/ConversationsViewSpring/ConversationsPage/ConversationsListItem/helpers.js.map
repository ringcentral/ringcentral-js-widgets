{"version":3,"file":"helpers.js","names":["_messageDirection","require","_messageTypes","_formatDuration","_springIcon","_i18n","getIconInfo","exports","conversation","type","messageTypes","voiceMail","icon","VoicemailMd","fax","FaxMd","Smsmd","getDetail","messageIsTextMessage","mmsAttachments","length","count","t","subject","voicemailAttachment","duration","concat","formatDurationWithLocale","day","hr","min","sec","messageIsFax","pageCount","faxPageCount","pageUnit","pageSuffix","direction","messageDirection","inbound","messageStatus","getPhoneNumber","correspondents","phoneNumber","extensionNumber","undefined","message","messageIsVoicemail"],"sources":["src/app/views/ConversationsViewSpring/ConversationsPage/ConversationsListItem/helpers.tsx"],"sourcesContent":["import { messageDirection } from '@ringcentral-integration/commons/enums/messageDirection';\nimport { messageTypes } from '@ringcentral-integration/commons/enums/messageTypes';\nimport type { Message } from '@ringcentral-integration/commons/interfaces/MessageStore.model';\nimport { formatDurationWithLocale } from '@ringcentral-integration/commons/lib/formatDuration';\nimport { FaxMd, Smsmd, VoicemailMd } from '@ringcentral/spring-icon';\n\nimport { t } from './i18n';\n\nexport const getIconInfo = (conversation: Message) => {\n  switch (conversation.type) {\n    case messageTypes.voiceMail:\n      return { icon: VoicemailMd };\n    case messageTypes.fax:\n      return { icon: FaxMd };\n    default:\n      return { icon: Smsmd };\n  }\n};\n\n// ringcentral-js-widgets/ringcentral-widgets/components/MessageItem/index.tsx\n// getDetail\nexport const getDetail = (conversation: Message) => {\n  if (messageIsTextMessage(conversation)) {\n    if (conversation.mmsAttachments && conversation.mmsAttachments.length > 0) {\n      const count = conversation.mmsAttachments.length;\n      if (count === 1) {\n        return t('mmsWithOneAttachment');\n      }\n      return t('mmsWithAttachments', {\n        count,\n      });\n    }\n    return conversation.subject;\n  }\n\n  if (conversation.voicemailAttachment) {\n    const { duration } = conversation.voicemailAttachment;\n    return `${formatDurationWithLocale(duration, {\n      day: t('day'),\n      hr: t('hour'),\n      min: t('min'),\n      sec: t('sec'),\n    })}`;\n  }\n\n  if (messageIsFax(conversation)) {\n    const pageCount = conversation?.faxPageCount || 0;\n    const pageUnit = t(pageCount === 1 ? 'page' : 'pages');\n    const pageSuffix = `: ${pageCount} ${pageUnit}`;\n    if (conversation.direction === messageDirection.inbound) {\n      return `${t('faxReceived')}${pageSuffix}`;\n    }\n    const messageStatus = conversation.messageStatus;\n\n    switch (messageStatus) {\n      case 'SendingFailed':\n      case 'DeliveryFailed':\n        return t('faxSendFailed');\n      case 'Queued':\n        return pageCount === 0\n          ? t('faxProcessing')\n          : `${t('faxSubmitted')}${pageSuffix}`;\n      default:\n        break;\n    }\n\n    return `${t('faxSent')}${pageSuffix}`;\n  }\n  return '';\n};\n\n// ringcentral-js-widgets/ringcentral-widgets/components/MessageItem/index.tsx\n// getPhoneNumber\nexport const getPhoneNumber = (conversation: Message) => {\n  const { correspondents } = conversation;\n  return (\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    (correspondents.length === 1 &&\n      // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n      correspondents[0] &&\n      // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n      (correspondents[0].phoneNumber || correspondents[0].extensionNumber)) ||\n    undefined\n  );\n};\n\n// ringcentral-js-widgets/ringcentral-integration/lib/messageHelper/messageHelper.ts\nexport function messageIsTextMessage(message: Message) {\n  return (\n    message.type !== messageTypes.fax && message.type !== messageTypes.voiceMail\n  );\n}\n\nexport function messageIsFax(message: Message) {\n  return message.type === messageTypes.fax;\n}\n\nexport function messageIsVoicemail(message: Message) {\n  return message.type === messageTypes.voiceMail;\n}\n"],"mappings":"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","ignoreList":[]}