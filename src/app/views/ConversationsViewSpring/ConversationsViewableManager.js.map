{"version":3,"file":"ConversationsViewableManager.js","names":["_services","require","_nextCore","_rxjs","_dec","_dec2","_dec3","_dec4","_class","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","Symbol","iterator","Array","from","isArray","_arrayLikeToArray","_slicedToArray","e","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","a","t","toString","call","slice","constructor","name","test","length","n","l","i","u","f","o","next","Object","done","push","value","_defineProperties","enumerable","configurable","writable","defineProperty","_toPropertyKey","key","_createClass","prototype","_toPrimitive","_typeof","toPrimitive","String","Number","_classCallCheck","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","apply","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","_setPrototypeOf","ConversationsViewableManager","exports","injectable","target","inject","undefined","metadata","Function","PortManager","ConversationsViewableManagerOptions","_ViewableManager","_portManager","_conversationsViewableManagerOptions","_this","viewableManagerOptions","ttl","groupKey","itemKey","maxBatchRequestCount","onViewable","distinctMap","obs$","map","_ref","_ref2","conversationIds","defer","of","pipe","concatAll","ViewableManager"],"sources":["src/app/views/ConversationsViewSpring/ConversationsViewableManager.tsx"],"sourcesContent":["import { ViewableManager } from '@ringcentral-integration/micro-core/src/app/services';\nimport {\n  inject,\n  injectable,\n  PortManager,\n} from '@ringcentral-integration/next-core';\nimport { concatAll, defer, map, Observable, of } from 'rxjs';\n\nimport type { FilteredConversation } from '../../services';\n\ninterface ConversationsViewableManagerOptions {\n  onViewable: (\n    groupKey: string,\n    ids: string[],\n  ) => Observable<void> | Promise<void>;\n}\n\n@injectable({\n  name: 'ConversationsViewableManager',\n})\nexport class ConversationsViewableManager extends ViewableManager<FilteredConversation> {\n  constructor(\n    protected override _portManager: PortManager,\n    @inject('ConversationsViewableManagerOptions')\n    private _conversationsViewableManagerOptions: ConversationsViewableManagerOptions,\n  ) {\n    super(_portManager, {\n      viewableManagerOptions: {\n        ttl: 'never',\n        groupKey: 'type',\n        itemKey: 'conversationId',\n        maxBatchRequestCount: 10,\n      },\n      onViewable: (distinctMap) => {\n        const obs$ = distinctMap.map(([groupKey, conversationIds]) =>\n          defer(() =>\n            this._conversationsViewableManagerOptions.onViewable(\n              groupKey,\n              conversationIds,\n            ),\n          ),\n        );\n\n        return of(...obs$)\n          .pipe(concatAll())\n          .pipe(map(() => [] as string[]));\n      },\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]}