{"version":3,"file":"Header.js","names":["_springUi","require","_react","_interopRequireWildcard","_rxjs","_components","_hooks","_i18n","_interopRequireDefault","e","__esModule","t","WeakMap","r","n","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","Header","exports","_ref","title","children","menu","menuHeader","menuList","_ref$onActionClick","onActionClick","noop","action","_useAppHeader","useAppHeader","defaultNav","createElement","Fragment","nav","override","appTitle","_useState","useState","_useState2","fullMenuAnchor","setFullMenuAnchor","_useLocale","useLocale","i18n","avatarRoot","useMemo","React","isValidElement","Children","count","cloneElement","onClick","currentTarget","useImperativeHandle","closeMenu","menuOpened","Boolean","className","Text","process","env","NODE_ENV","Menu","PopperProps","role","variant","open","autoFocus","anchorEl","onClose","MenuList","MenuDivider","MenuItem","classes","container","root"],"sources":["src/app/views/HeaderView/HeaderPanel/Header.tsx"],"sourcesContent":["import {\n  Menu,\n  MenuDivider,\n  MenuItem,\n  MenuList,\n  Text,\n} from '@ringcentral/spring-ui';\nimport React, {\n  ComponentProps,\n  FunctionComponent,\n  Ref,\n  useImperativeHandle,\n  useMemo,\n  useState,\n} from 'react';\nimport { noop } from 'rxjs';\n\nimport { useAppHeader } from '../../../components';\nimport { useLocale } from '../../../hooks';\nimport type { HeaderViewProps } from '../Header.view.interface';\n\nimport i18n from './i18n';\n\nexport type HeaderAction = {\n  closeMenu: () => void;\n};\n\nexport type HeaderProps = {\n  title: string;\n  menuHeader: React.ReactNode;\n  menuList: React.ReactNode;\n  action?: Ref<HeaderAction>;\n} & Pick<HeaderViewProps, 'onActionClick'>;\n\nexport const Header: FunctionComponent<HeaderProps> = ({\n  title,\n  children,\n  menuHeader: menu,\n  menuList,\n  onActionClick = noop,\n  action,\n}) => {\n  const {\n    nav,\n    override,\n    title: appTitle,\n  } = useAppHeader({\n    // we not have any default element to render, but keep that here to avoid user want set null\n    defaultNav: <></>,\n  });\n\n  const [fullMenuAnchor, setFullMenuAnchor] =\n    useState<HTMLButtonElement | null>(null);\n\n  const { t } = useLocale(i18n);\n\n  const avatarRoot = useMemo(() => {\n    if (\n      React.isValidElement(children) &&\n      React.Children.count(children) === 1\n    ) {\n      return React.cloneElement(children, {\n        onClick: (e) => {\n          setFullMenuAnchor(e.currentTarget);\n        },\n      } as ComponentProps<'button'>);\n    }\n    return children;\n  }, [children]);\n\n  useImperativeHandle(\n    action,\n    () => ({\n      closeMenu() {\n        setFullMenuAnchor(null);\n      },\n    }),\n    [],\n  );\n\n  const menuOpened = Boolean(fullMenuAnchor);\n\n  return (\n    <header className=\"flex-none\">\n      {override ? (\n        nav\n      ) : (\n        <>\n          <div className=\"flex relative gap-10 justify-center items-center px-3 w-full bg-neutral-base h-9\">\n            <div className=\"flex gap-3 justify-center items-center\">\n              {avatarRoot}\n              <Text\n                className=\"typography-subtitle text-neutral-b0\"\n                data-sign=\"title\"\n              >\n                {appTitle ?? title}\n              </Text>\n            </div>\n            <i className=\"flex-auto\" />\n            <nav className=\"flex gap-3 justify-center items-center\">{nav}</nav>\n          </div>\n\n          {\n            // TODO: spring-ui Menu in test show how never close, so we hide that in test\n            ((process.env.NODE_ENV === 'test' && menuOpened) ||\n              process.env.NODE_ENV !== 'test') && (\n              <Menu\n                PopperProps={{\n                  role: 'menu',\n                  'aria-label': 'user information',\n                }}\n                variant=\"pointed\"\n                open={menuOpened}\n                // eslint-disable-next-line jsx-a11y/no-autofocus\n                autoFocus={false}\n                anchorEl={fullMenuAnchor}\n                onClose={() => {\n                  setFullMenuAnchor(null);\n                }}\n              >\n                {menu}\n                <MenuList>\n                  {menuList}\n                  <MenuDivider />\n                  <MenuItem\n                    onClick={() => {\n                      onActionClick('logout');\n                    }}\n                    classes={{\n                      container: 'justify-center gap-3 p-0 min-h-4',\n                      root: 'px-3 py-2 h-8',\n                    }}\n                  >\n                    {t('logout')}\n                  </MenuItem>\n                </MenuList>\n              </Menu>\n            )\n          }\n        </>\n      )}\n    </header>\n  );\n};\n"],"mappings":"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","ignoreList":[]}