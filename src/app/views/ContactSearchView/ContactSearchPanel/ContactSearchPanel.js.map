{"version":3,"file":"ContactSearchPanel.js","names":["_hooks","require","_reactHooks","_springUi","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_helper","_i18n","_useContactSearchView2","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","_extends","assign","bind","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","l","iterator","u","next","done","isArray","ContactSearchPanel","exports","_ref","openProp","open","defaultTab","maxRecipients","inputValue","_ref$source","source","toNumbers","thirdPartySourceName","companyContacts","personalContacts","otherContacts","thirdPartyContacts","showOtherContacts","isThirdPartySearching","placeholder","ThirdPartyAvatar","_ref$keyToTags","keyToTags","changeTabTrack","onSelect","onInputValueChange","onRemove","setFilterString","onExpanded","helperText","_useLocale","useLocale","i18n","_useAsyncState","useAsyncState","_useAsyncState2","_setValue","renderTags","values","getTagProps","map","item","index","tagProps","_ref2","id","profileImageUrl","phoneNumber","createElement","Chip","concat","startSlot","Avatar","src","size","undefined","key","color","error","label","onDelete","truncate","setValue","v","closeMenu","_useContactSearchView","useContactSearchView","multiple","onChange","onOpen","onClose","onContactSelected","option","freeSolo","validateValidChars","openMenu","inputRef","component","InputProps","inputProps","useEffect","_inputRef$current","current","setAttribute","_inputRef$current2","removeAttribute","useEventListener","_e$clipboardData$getD","_e$clipboardData","pasteText","clipboardData","getData","trim","validValues","split","stringArrToRegExp","replace","Boolean","hasAddFreeSolo","preventDefault","stopPropagation","selectedValues","reduce","acc","val","useMemo","some","toNumber","className","clsx","Autocomplete","clearBtn","ClearButtonProps","PopperProps","classes","paper","inputVariant","RootProps","maxLength","onClick","onInputChange","options"],"sources":["src/app/views/ContactSearchView/ContactSearchPanel/ContactSearchPanel.tsx"],"sourcesContent":["import { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport type { ToNumber } from '@ringcentral-integration/micro-message/src/app/services';\nimport { useAsyncState } from '@ringcentral-integration/react-hooks';\nimport {\n  Autocomplete,\n  Chip,\n  Avatar,\n  GetTagProps,\n  useEventListener,\n  stringArrToRegExp,\n} from '@ringcentral/spring-ui';\nimport type { SuggestionListItemData as BaseSuggestionListItemData } from '@ringcentral/spring-ui';\nimport clsx from 'clsx';\nimport React, { useEffect, useMemo } from 'react';\n\nimport type {\n  ContactSearchPanelProps as BaseContactSearchPanelProps,\n  SuggestionListItemData,\n} from '../ContactSearch.view.interface';\n\nimport { validateValidChars } from './helper';\nimport i18n from './i18n';\nimport { useContactSearchView } from './useContactSearchView';\n\nexport interface ContactSearchPanelProps extends BaseContactSearchPanelProps {\n  open: boolean;\n  maxRecipients?: number;\n  inputValue: string;\n  source?: 'message' | 'fax';\n  thirdPartySourceName?: string;\n  toNumbers: ToNumber[];\n  placeholder?: string;\n  keyToTags?: string[];\n  onExpanded: (expanded: boolean) => void;\n  onSelect?: (contact: unknown[]) => void;\n  onInputValueChange: (value: string) => void;\n  onRemove: (phoneNumber: string) => void;\n  setFilterString: (filterString: string) => void;\n}\n\nexport const ContactSearchPanel: React.FunctionComponent<\n  ContactSearchPanelProps\n> = ({\n  open: openProp,\n  defaultTab,\n  maxRecipients,\n  inputValue,\n  source = 'message',\n  toNumbers,\n  thirdPartySourceName,\n  companyContacts,\n  personalContacts,\n  otherContacts,\n  thirdPartyContacts,\n  showOtherContacts,\n  isThirdPartySearching,\n  placeholder,\n  ThirdPartyAvatar,\n  keyToTags = ['â†µ', ',', ';'],\n  changeTabTrack,\n  onSelect,\n  onInputValueChange,\n  onRemove,\n  setFilterString,\n  onExpanded,\n  helperText,\n}) => {\n  const { t } = useLocale(i18n);\n  const [value, _setValue] = useAsyncState(inputValue, (value) => {\n    onInputValueChange(value);\n    setFilterString(value);\n  });\n\n  const renderTags = (\n    values: BaseSuggestionListItemData[],\n    getTagProps: (\n      selectedItem: BaseSuggestionListItemData,\n      index: number,\n    ) => Omit<\n      GetTagProps<BaseSuggestionListItemData>,\n      'children' | 'index' | 'selectedItem'\n    > & {\n      onDelete?: React.EventHandler<any>;\n    },\n  ) =>\n    values.map((item: BaseSuggestionListItemData, index: number) => {\n      const tagProps = getTagProps(item, index);\n      const { id, profileImageUrl, phoneNumber, name } =\n        item as SuggestionListItemData;\n\n      return (\n        <Chip\n          data-sign={`chip-${id ?? index}`}\n          startSlot={\n            profileImageUrl ? (\n              <Avatar src={profileImageUrl} size=\"small\" />\n            ) : undefined\n          }\n          key={index}\n          {...tagProps}\n          color={item.error ? 'error' : 'default'}\n          label={name || phoneNumber}\n          onDelete={() => {\n            onRemove(phoneNumber);\n          }}\n          truncate\n        />\n      );\n    });\n\n  const setValue = (v: string) => {\n    if (v === '') {\n      // spring-ui need to set full props to trigger onClose event\n      closeMenu({} as any, 'escape');\n    }\n    _setValue(v);\n  };\n\n  const { closeMenu, openMenu, inputRef, component, InputProps, inputProps } =\n    useContactSearchView({\n      value,\n      multiple: true,\n      onChange: () => {\n        // do nothing, we handle the Autocomplete onInputChange event\n      },\n      source,\n      keyToTags,\n      changeTabTrack,\n      defaultTab,\n      thirdPartySourceName,\n      companyContacts,\n      personalContacts,\n      otherContacts,\n      ThirdPartyAvatar,\n      thirdPartyContacts: thirdPartyContacts || [],\n      showOtherContacts,\n      isThirdPartySearching,\n      onOpen: () => onExpanded(true),\n      onClose: () => onExpanded(false),\n      onContactSelected: (option: any) => {\n        // for freeSolo option, only number is acceptable\n        if (option.freeSolo && validateValidChars(option.label)) {\n          onSelect?.([\n            {\n              phoneNumber: option.label,\n              name: option.label,\n              freeSolo: true,\n            },\n          ]);\n          return;\n        }\n        onSelect?.([\n          {\n            ...option,\n            phoneNumber: option.phoneNumber,\n            name: option.name || option.label,\n          },\n        ]);\n      },\n    });\n\n  // TODO: should use Autocomplete inputProps to control readonly when issue: UXSYS-3822 fixed\n  useEffect(() => {\n    if (maxRecipients && toNumbers.length >= maxRecipients) {\n      inputRef.current?.setAttribute('readonly', 'true');\n    } else {\n      inputRef.current?.removeAttribute('readonly');\n    }\n  }, [toNumbers, inputRef, maxRecipients]);\n\n  useEventListener(inputRef.current, 'paste', (e: ClipboardEvent) => {\n    const pasteText = e.clipboardData?.getData('text/plain') ?? '';\n    if (pasteText.trim().length) {\n      const validValues = pasteText\n        .split(stringArrToRegExp(keyToTags))\n        .map((item) => item.replace(/\\r?\\n|\\r/g, ' ').trim())\n        .filter(Boolean);\n      let hasAddFreeSolo = false;\n      e.preventDefault();\n      e.stopPropagation();\n\n      const selectedValues = validValues.reduce((acc, val) => {\n        if (validateValidChars(val)) {\n          acc.push({\n            phoneNumber: val,\n            name: val,\n            freeSolo: true,\n          });\n        }\n        return acc;\n      }, [] as any[]);\n\n      if (selectedValues.length > 0) {\n        onSelect?.(selectedValues);\n        hasAddFreeSolo = true;\n      }\n\n      if (!hasAddFreeSolo) {\n        // should only set string before first keyToTags\n        _setValue(validValues[0]);\n      }\n    }\n  });\n\n  useEffect(() => {\n    if (openProp && value.trim().length) {\n      openMenu({} as any);\n    } else {\n      // spring-ui need to set full props to trigger onClose event\n      closeMenu({} as any, 'escape');\n    }\n  }, [openProp, value, openMenu, closeMenu]);\n\n  const error = useMemo(\n    () => toNumbers.some((toNumber) => toNumber.error),\n    [toNumbers],\n  );\n\n  return (\n    <div className={clsx('flex flex-col gap-2', openProp && 'flex-auto')}>\n      <Autocomplete\n        multiple\n        size=\"medium\"\n        clearBtn={!!value.length}\n        ClearButtonProps={\n          {\n            'data-sign': 'removeBtn',\n            // TODO: spring-ui issue with data-props miss, so must as any\n          } as any\n        }\n        PopperProps={{\n          classes: {\n            paper: 'hidden',\n          },\n        }}\n        error={error}\n        inputRef={inputRef}\n        inputValue={value}\n        inputVariant=\"outlined\"\n        RootProps={InputProps}\n        inputProps={{\n          ...inputProps,\n          'data-sign': 'recipientsInput',\n          maxLength: 30,\n        }}\n        label={t('to')}\n        value={toNumbers}\n        helperText={error ? helperText || t('invalidPhoneNumber') : helperText}\n        renderTags={renderTags}\n        onClick={(e) => {\n          if (value.length) {\n            openMenu(e);\n          }\n        }}\n        placeholder={placeholder || t('enterNameOrNumber')}\n        onInputChange={(val) => {\n          setValue(val);\n        }}\n        options={[]}\n      />\n      {openProp && (\n        <main className=\"relative flex flex-col flex-auto overflow-hidden\">\n          {component}\n        </main>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}