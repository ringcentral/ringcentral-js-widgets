{"version":3,"file":"RegionSettingsPanel.js","names":["_components","require","_hooks","_components2","_reactHooks","_countryNames","_interopRequireDefault","_springUi","_react","_interopRequireWildcard","_i18n","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","formatCountryDisplay","callingCode","countryName","concat","RegionSettingsPanel","exports","_ref","onBackButtonClick","availableCountries","countryCode","areaCode","onSave","canAreaCodeShow","_useAsyncState","useAsyncState","_useAsyncState2","countryCodeValue","setCountryCodeValue","canAreaCodeShowResult","_useAsyncState3","_useAsyncState4","areaCodeValue","setAreaCodeValue","_useLocale","useLocale","i18n","countryNamesI18n","onAreaCodeChange","target","replace","renderValue","selectedOption","find","country","isoCode","hasNA","useMemo","c","message","undefined","createElement","Fragment","AppHeaderNav","override","PageHeader","onBackClick","className","Select","label","size","variant","onChange","map","option","Option","key","TextField","fullWidth","inputProps","placeholder","AppFooterNav"],"sources":["src/app/views/RegionSettingsView/RegionSettingsPanel/RegionSettingsPanel.tsx"],"sourcesContent":["import {\n  AppFooterNav,\n  AppHeaderNav,\n} from '@ringcentral-integration/micro-core/src/app/components';\nimport { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport { PageHeader } from '@ringcentral-integration/next-widgets/components';\nimport { useAsyncState } from '@ringcentral-integration/react-hooks';\nimport countryNamesI18n from '@ringcentral-integration/widgets/lib/countryNames';\nimport { Option, Select, TextField } from '@ringcentral/spring-ui';\nimport React, { useMemo } from 'react';\n\nimport type { RegionSettingsViewPanelProps } from '../RegionSettings.view.interface';\n\nimport i18n from './i18n';\n\nexport function formatCountryDisplay(callingCode: string, countryName: string) {\n  return `(+${callingCode}) ${countryName}`;\n}\n\nexport const RegionSettingsPanel: React.FC<RegionSettingsViewPanelProps> = ({\n  onBackButtonClick,\n  availableCountries,\n  countryCode,\n  areaCode,\n  onSave,\n  canAreaCodeShow,\n}) => {\n  const [countryCodeValue, setCountryCodeValue] = useAsyncState(\n    countryCode,\n    (value) =>\n      onSave?.({\n        countryCode: value,\n        // when areaCode is change, always reset areaCode to empty\n        areaCode: '',\n      }),\n  );\n  const canAreaCodeShowResult = canAreaCodeShow?.(countryCodeValue) || false;\n\n  const [areaCodeValue, setAreaCodeValue] = useAsyncState(areaCode, (value) =>\n    onSave?.({\n      areaCode: value,\n    }),\n  );\n  const { t } = useLocale(i18n, countryNamesI18n);\n\n  const onAreaCodeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/[^\\d]/g, '');\n    setAreaCodeValue(value);\n  };\n\n  const renderValue = (value: any) => {\n    const selectedOption = availableCountries.find(\n      (country) => country.isoCode === value,\n    );\n    if (!selectedOption) return '';\n\n    return formatCountryDisplay(\n      selectedOption.callingCode!,\n      t(selectedOption.isoCode as any),\n    );\n  };\n\n  const hasNA = useMemo(\n    () =>\n      !!availableCountries.find((c) => c.isoCode === 'US') ||\n      !!availableCountries.find((c) => c.isoCode === 'CA'),\n    [availableCountries],\n  );\n\n  const message = useMemo(() => {\n    if (availableCountries.length > 1) {\n      return t(hasNA ? 'MultiWithNAMessage' : 'MultiWithoutNAMessage');\n    }\n\n    if (hasNA) {\n      return t('NAOnlyMessage');\n    }\n\n    return undefined;\n  }, [availableCountries.length, hasNA, t]);\n\n  return (\n    <>\n      <AppHeaderNav override>\n        <PageHeader onBackClick={onBackButtonClick}>{t('title')}</PageHeader>\n      </AppHeaderNav>\n      <div className=\"flex-auto overflow-y-auto overflow-x-hidden px-4 py-2\">\n        <div data-sign=\"countryCodeHint\" className=\"pb-2 typography-subtitle\">\n          {message}\n        </div>\n        <Select\n          label={t('country')}\n          value={countryCodeValue}\n          renderValue={renderValue}\n          size=\"large\"\n          data-sign=\"countryCodeSelect\"\n          variant=\"outlined\"\n          onChange={(e: any) => setCountryCodeValue(e.target.value)}\n        >\n          {availableCountries.map((option) => (\n            <Option\n              data-sign=\"selectMenuItem\"\n              data-value={option.isoCode}\n              key={option.isoCode}\n              value={option.isoCode}\n            >\n              {formatCountryDisplay(\n                option.callingCode!,\n                t(option.isoCode as any),\n              )}\n            </Option>\n          ))}\n        </Select>\n        {canAreaCodeShowResult && (\n          <TextField\n            label={t('areaCode')}\n            fullWidth\n            size=\"medium\"\n            variant=\"outlined\"\n            inputProps={{\n              'data-sign': 'areaCodeInputField',\n            }}\n            placeholder={t('areaCodePlaceholder')}\n            value={areaCodeValue}\n            onChange={onAreaCodeChange}\n          />\n        )}\n      </div>\n      <AppFooterNav />\n    </>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA;AAIA,IAAAC,MAAA,GAAAD,OAAA;AACA,IAAAE,YAAA,GAAAF,OAAA;AACA,IAAAG,WAAA,GAAAH,OAAA;AACA,IAAAI,aAAA,GAAAC,sBAAA,CAAAL,OAAA;AACA,IAAAM,SAAA,GAAAN,OAAA;AACA,IAAAO,MAAA,GAAAC,uBAAA,CAAAR,OAAA;AAIA,IAAAS,KAAA,GAAAJ,sBAAA,CAAAL,OAAA;AAA0B,SAAAQ,wBAAAE,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAJ,uBAAA,YAAAA,wBAAAE,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,mBAAAT,CAAA,iBAAAA,CAAA,gBAAAU,OAAA,CAAAV,CAAA,0BAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,cAAAM,EAAA,IAAAd,CAAA,gBAAAc,EAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,EAAA,OAAAP,CAAA,IAAAD,CAAA,GAAAW,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAnB,CAAA,EAAAc,EAAA,OAAAP,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAM,EAAA,EAAAP,CAAA,IAAAC,CAAA,CAAAM,EAAA,IAAAd,CAAA,CAAAc,EAAA,WAAAN,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAAA,SAAAN,uBAAAK,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAK,UAAA,GAAAL,CAAA,gBAAAA,CAAA;AAAA,SAAAoB,eAAAjB,CAAA,EAAAH,CAAA,WAAAqB,eAAA,CAAAlB,CAAA,KAAAmB,qBAAA,CAAAnB,CAAA,EAAAH,CAAA,KAAAuB,2BAAA,CAAApB,CAAA,EAAAH,CAAA,KAAAwB,gBAAA;AAAA,SAAAA,iBAAA,cAAAC,SAAA;AAAA,SAAAF,4BAAApB,CAAA,EAAAuB,CAAA,QAAAvB,CAAA,2BAAAA,CAAA,SAAAwB,iBAAA,CAAAxB,CAAA,EAAAuB,CAAA,OAAAzB,CAAA,MAAA2B,QAAA,CAAAZ,IAAA,CAAAb,CAAA,EAAA0B,KAAA,6BAAA5B,CAAA,IAAAE,CAAA,CAAA2B,WAAA,KAAA7B,CAAA,GAAAE,CAAA,CAAA2B,WAAA,CAAAC,IAAA,aAAA9B,CAAA,cAAAA,CAAA,GAAA+B,KAAA,CAAAC,IAAA,CAAA9B,CAAA,oBAAAF,CAAA,+CAAAiC,IAAA,CAAAjC,CAAA,IAAA0B,iBAAA,CAAAxB,CAAA,EAAAuB,CAAA;AAAA,SAAAC,kBAAAxB,CAAA,EAAAuB,CAAA,aAAAA,CAAA,IAAAA,CAAA,GAAAvB,CAAA,CAAAgC,MAAA,MAAAT,CAAA,GAAAvB,CAAA,CAAAgC,MAAA,YAAAnC,CAAA,MAAAI,CAAA,GAAA4B,KAAA,CAAAN,CAAA,GAAA1B,CAAA,GAAA0B,CAAA,EAAA1B,CAAA,IAAAI,CAAA,CAAAJ,CAAA,IAAAG,CAAA,CAAAH,CAAA,UAAAI,CAAA;AAAA,SAAAkB,sBAAAnB,CAAA,EAAAiC,CAAA,QAAAnC,CAAA,WAAAE,CAAA,gCAAAkC,MAAA,IAAAlC,CAAA,CAAAkC,MAAA,CAAAC,QAAA,KAAAnC,CAAA,4BAAAF,CAAA,QAAAD,CAAA,EAAAI,CAAA,EAAAG,CAAA,EAAAgC,CAAA,EAAAb,CAAA,OAAAlB,CAAA,OAAAF,CAAA,iBAAAC,CAAA,IAAAN,CAAA,GAAAA,CAAA,CAAAe,IAAA,CAAAb,CAAA,GAAAqC,IAAA,QAAAJ,CAAA,QAAAnB,MAAA,CAAAhB,CAAA,MAAAA,CAAA,UAAAO,CAAA,uBAAAA,CAAA,IAAAR,CAAA,GAAAO,CAAA,CAAAS,IAAA,CAAAf,CAAA,GAAAwC,IAAA,MAAAf,CAAA,CAAAgB,IAAA,CAAA1C,CAAA,CAAA2C,KAAA,GAAAjB,CAAA,CAAAS,MAAA,KAAAC,CAAA,GAAA5B,CAAA,iBAAAL,CAAA,IAAAG,CAAA,OAAAF,CAAA,GAAAD,CAAA,yBAAAK,CAAA,YAAAP,CAAA,eAAAsC,CAAA,GAAAtC,CAAA,cAAAgB,MAAA,CAAAsB,CAAA,MAAAA,CAAA,2BAAAjC,CAAA,QAAAF,CAAA,aAAAsB,CAAA;AAAA,SAAAL,gBAAAlB,CAAA,QAAA6B,KAAA,CAAAY,OAAA,CAAAzC,CAAA,UAAAA,CAAA;AAEnB,SAAS0C,oBAAoBA,CAACC,WAAmB,EAAEC,WAAmB,EAAE;EAC7E,YAAAC,MAAA,CAAYF,WAAW,QAAAE,MAAA,CAAKD,WAAW;AACzC;AAEO,IAAME,mBAA2D,GAAAC,OAAA,CAAAD,mBAAA,GAAG,SAA9DA,mBAA2DA,CAAAE,IAAA,EAOlE;EAAA,IANJC,iBAAiB,GAAAD,IAAA,CAAjBC,iBAAiB;IACjBC,kBAAkB,GAAAF,IAAA,CAAlBE,kBAAkB;IAClBC,WAAW,GAAAH,IAAA,CAAXG,WAAW;IACXC,QAAQ,GAAAJ,IAAA,CAARI,QAAQ;IACRC,MAAM,GAAAL,IAAA,CAANK,MAAM;IACNC,eAAe,GAAAN,IAAA,CAAfM,eAAe;EAEf,IAAAC,cAAA,GAAgD,IAAAC,yBAAa,EAC3DL,WAAW,EACX,UAACX,KAAK;MAAA,OACJa,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG;QACPF,WAAW,EAAEX,KAAK;QAClB;QACAY,QAAQ,EAAE;MACZ,CAAC,CAAC;IAAA,CACN,CAAC;IAAAK,eAAA,GAAAxC,cAAA,CAAAsC,cAAA;IARMG,gBAAgB,GAAAD,eAAA;IAAEE,mBAAmB,GAAAF,eAAA;EAS5C,IAAMG,qBAAqB,GAAG,CAAAN,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAGI,gBAAgB,CAAC,KAAI,KAAK;EAE1E,IAAAG,eAAA,GAA0C,IAAAL,yBAAa,EAACJ,QAAQ,EAAE,UAACZ,KAAK;MAAA,OACtEa,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG;QACPD,QAAQ,EAAEZ;MACZ,CAAC,CAAC;IAAA,CACJ,CAAC;IAAAsB,eAAA,GAAA7C,cAAA,CAAA4C,eAAA;IAJME,aAAa,GAAAD,eAAA;IAAEE,gBAAgB,GAAAF,eAAA;EAKtC,IAAAG,UAAA,GAAc,IAAAC,gBAAS,EAACC,gBAAI,EAAEC,wBAAgB,CAAC;IAAvCtE,CAAC,GAAAmE,UAAA,CAADnE,CAAC;EAET,IAAMuE,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIxE,CAAsC,EAAK;IACnE,IAAM2C,KAAK,GAAG3C,CAAC,CAACyE,MAAM,CAAC9B,KAAK,CAAC+B,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;IAClDP,gBAAgB,CAACxB,KAAK,CAAC;EACzB,CAAC;EAED,IAAMgC,WAAW,GAAG,SAAdA,WAAWA,CAAIhC,KAAU,EAAK;IAClC,IAAMiC,cAAc,GAAGvB,kBAAkB,CAACwB,IAAI,CAC5C,UAACC,OAAO;MAAA,OAAKA,OAAO,CAACC,OAAO,KAAKpC,KAAK;IAAA,CACxC,CAAC;IACD,IAAI,CAACiC,cAAc,EAAE,OAAO,EAAE;IAE9B,OAAO/B,oBAAoB,CACzB+B,cAAc,CAAC9B,WAAW,EAC1B7C,CAAC,CAAC2E,cAAc,CAACG,OAAc,CACjC,CAAC;EACH,CAAC;EAED,IAAMC,KAAK,GAAG,IAAAC,cAAO,EACnB;IAAA,OACE,CAAC,CAAC5B,kBAAkB,CAACwB,IAAI,CAAC,UAACK,CAAC;MAAA,OAAKA,CAAC,CAACH,OAAO,KAAK,IAAI;IAAA,EAAC,IACpD,CAAC,CAAC1B,kBAAkB,CAACwB,IAAI,CAAC,UAACK,CAAC;MAAA,OAAKA,CAAC,CAACH,OAAO,KAAK,IAAI;IAAA,EAAC;EAAA,GACtD,CAAC1B,kBAAkB,CACrB,CAAC;EAED,IAAM8B,OAAO,GAAG,IAAAF,cAAO,EAAC,YAAM;IAC5B,IAAI5B,kBAAkB,CAAClB,MAAM,GAAG,CAAC,EAAE;MACjC,OAAOlC,CAAC,CAAC+E,KAAK,GAAG,oBAAoB,GAAG,uBAAuB,CAAC;IAClE;IAEA,IAAIA,KAAK,EAAE;MACT,OAAO/E,CAAC,CAAC,eAAe,CAAC;IAC3B;IAEA,OAAOmF,SAAS;EAClB,CAAC,EAAE,CAAC/B,kBAAkB,CAAClB,MAAM,EAAE6C,KAAK,EAAE/E,CAAC,CAAC,CAAC;EAEzC,oBACEJ,MAAA,YAAAwF,aAAA,CAAAxF,MAAA,YAAAyF,QAAA,qBACEzF,MAAA,YAAAwF,aAAA,CAAChG,WAAA,CAAAkG,YAAY;IAACC,QAAQ;EAAA,gBACpB3F,MAAA,YAAAwF,aAAA,CAAC7F,YAAA,CAAAiG,UAAU;IAACC,WAAW,EAAEtC;EAAkB,GAAEnD,CAAC,CAAC,OAAO,CAAc,CACxD,CAAC,eACfJ,MAAA,YAAAwF,aAAA;IAAKM,SAAS,EAAC;EAAuD,gBACpE9F,MAAA,YAAAwF,aAAA;IAAK,aAAU,iBAAiB;IAACM,SAAS,EAAC;EAA0B,GAClER,OACE,CAAC,eACNtF,MAAA,YAAAwF,aAAA,CAACzF,SAAA,CAAAgG,MAAM;IACLC,KAAK,EAAE5F,CAAC,CAAC,SAAS,CAAE;IACpB0C,KAAK,EAAEkB,gBAAiB;IACxBc,WAAW,EAAEA,WAAY;IACzBmB,IAAI,EAAC,OAAO;IACZ,aAAU,mBAAmB;IAC7BC,OAAO,EAAC,UAAU;IAClBC,QAAQ,EAAE,SAAVA,QAAQA,CAAGhG,CAAM;MAAA,OAAK8D,mBAAmB,CAAC9D,CAAC,CAACyE,MAAM,CAAC9B,KAAK,CAAC;IAAA;EAAC,GAEzDU,kBAAkB,CAAC4C,GAAG,CAAC,UAACC,MAAM;IAAA,oBAC7BrG,MAAA,YAAAwF,aAAA,CAACzF,SAAA,CAAAuG,MAAM;MACL,aAAU,gBAAgB;MAC1B,cAAYD,MAAM,CAACnB,OAAQ;MAC3BqB,GAAG,EAAEF,MAAM,CAACnB,OAAQ;MACpBpC,KAAK,EAAEuD,MAAM,CAACnB;IAAQ,GAErBlC,oBAAoB,CACnBqD,MAAM,CAACpD,WAAW,EAClB7C,CAAC,CAACiG,MAAM,CAACnB,OAAc,CACzB,CACM,CAAC;EAAA,CACV,CACK,CAAC,EACRhB,qBAAqB,iBACpBlE,MAAA,YAAAwF,aAAA,CAACzF,SAAA,CAAAyG,SAAS;IACRR,KAAK,EAAE5F,CAAC,CAAC,UAAU,CAAE;IACrBqG,SAAS;IACTR,IAAI,EAAC,QAAQ;IACbC,OAAO,EAAC,UAAU;IAClBQ,UAAU,EAAE;MACV,WAAW,EAAE;IACf,CAAE;IACFC,WAAW,EAAEvG,CAAC,CAAC,qBAAqB,CAAE;IACtC0C,KAAK,EAAEuB,aAAc;IACrB8B,QAAQ,EAAExB;EAAiB,CAC5B,CAEA,CAAC,eACN3E,MAAA,YAAAwF,aAAA,CAAChG,WAAA,CAAAoH,YAAY,MAAE,CACf,CAAC;AAEP,CAAC","ignoreList":[]}