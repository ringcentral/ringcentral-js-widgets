{"version":3,"file":"PersonalConversation.view.js","names":["_trackEvents","require","_services","_services2","_views","_services3","_nextCore","_react","_interopRequireWildcard","_services4","_ConversationsViewSpring","_SmsOptOutView","_SmsTemplateView","_ConversationAlert","_ConversationPanel","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_class","_class2","_descriptor","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","value","configurable","writable","_regenerator","Symbol","iterator","toStringTag","c","prototype","Generator","u","create","_regeneratorDefine2","p","y","G","v","a","d","l","TypeError","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","displayName","w","m","_regeneratorDefine","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","slice","reverse","reduce","_initializerWarningHelper","Error","sortByCreationTimeDesc","b","creationTime","PersonalConversationViewSpring","exports","injectable","name","target","optional","undefined","metadata","Function","SmsTemplateView","PortManager","MessageStore","AppFeatures","RegionSettings","Conversations","RateLimiter","ConnectivityMonitor","RouterPlugin","IntegrationConfig","SmsConversations","ConversationsViewSpring","ConversationAlert","ConversationLogger","ContactMatcher","ConversationViewSpringOptions","SmsConversationsOptions","SmsOptOutView","dynamic","Theme","_RcViewModule","_smsTemplateView","_portManager","_messageStore","_appFeatures","_regionSettings","_conversations","_rateLimiter","_connectivityMonitor","_router","_integrationConfig","_smsConversations","_conversationsViewSpring","_conversationAlert","_conversationLogger","_contactMatcher","_conversationViewOptions","_smsConversationsOptions","_smsOptOutView","_this","conversationId","currentConversationId","getMessages","sort","getUIProps","_","_this$_conversationVi","disableLinks","restricted","connectivity","showSpinner","ready","hasInputContent","messageText","attachments","conversation","formattedConversationsMap","_this$_conversationAl","getAlertInfo","showAlert","alertProps","messages","acceptFileTypes","createNewEntityTooltip","showLogPopover","sendButtonDisabled","pushing","displayLogStatus","checkIsSupportLog","supportAttachment","hasSendMMSPermission","getUIFunctions","_this2","useConversationItemInfo","pageType","useActionsHandler","replyToReceivers","_replyToReceivers","_callee","text","sendPromise","_context","_this2$_smsConversati","_this2$_smsConversati2","_this2$_smsConversati3","_this2$_smsConversati4","checkDncStatusOfConversation","autoLogTaskIfEnabled","error","logger","_x","_x2","updateMessageText","_updateMessageText","_callee2","_context2","_x3","addAttachments","removeAttachment","attachment","onLinkClick","href","linkType","startsWith","trackEvent","trackEvents","clickConversationHyperlink","goBack","_goBack","_callee3","_this2$_theme","_context3","slideOutViewTransition","_theme","reducedMotion","component","props","_this3","_this$_conversationVi2","useParams","params","_loadConversation","shared","isMainTab","loadConversation","useEffect","unloadConversation","inputRef","useRef","_useRef","uiFunctions","current","_props","useConnector","uiProps","readMessages","Component","ConversationPanel","createElement","toolbar","Fragment","targetInputRef","endAdornment","Chip","RcViewModule","computed"],"sources":["src/app/views/ConversationViewSpring/PersonalConversation.view.tsx"],"sourcesContent":["import { trackEvents } from '@ringcentral-integration/commons/enums/trackEvents';\nimport {\n  AppFeatures,\n  ConnectivityMonitor,\n  RateLimiter,\n  RegionSettings,\n  trackEvent,\n} from '@ringcentral-integration/micro-auth/src/app/services';\nimport { ContactMatcher } from '@ringcentral-integration/micro-contacts/src/app/services';\nimport { type Theme } from '@ringcentral-integration/micro-core/src/app/services';\nimport { slideOutViewTransition } from '@ringcentral-integration/micro-core/src/app/views';\nimport { IntegrationConfig } from '@ringcentral-integration/micro-setting/src/app/services';\nimport {\n  computed,\n  dynamic,\n  injectable,\n  optional,\n  PortManager,\n  RcViewModule,\n  RouterPlugin,\n  type UIFunctions,\n  type UIProps,\n  useConnector,\n} from '@ringcentral-integration/next-core';\nimport React, { useEffect, useRef } from 'react';\n\nimport {\n  ConversationLogger,\n  Conversations,\n  MessageStore,\n  SmsConversations,\n  type SmsConversationsOptions,\n} from '../../services';\nimport { ConversationsViewSpring } from '../ConversationsViewSpring';\nimport { SmsOptOutView } from '../SmsOptOutView';\nimport { SmsTemplateView } from '../SmsTemplateView';\n\nimport type {\n  ConversationViewSpringOptions,\n  ConversationViewSpringPanelProps,\n  ConversationViewSpringProps,\n} from './Conversation.view.interface';\nimport { ConversationAlert } from './ConversationAlert';\nimport { ConversationPanel } from './ConversationPanel';\n\nfunction sortByCreationTimeDesc<T extends { creationTime?: number }>(\n  a: T,\n  b: T,\n) {\n  if (!a.creationTime || !b.creationTime || a.creationTime === b.creationTime)\n    return 0;\n  return a.creationTime > b.creationTime ? 1 : -1;\n}\n\n@injectable({\n  name: 'PersonalConversationViewSpring',\n})\nexport class PersonalConversationViewSpring extends RcViewModule {\n  @dynamic('Theme')\n  private _theme?: Theme;\n\n  @computed\n  get messages() {\n    const conversationId = this._conversations.currentConversationId;\n    if (!conversationId) {\n      return [];\n    }\n\n    return this._conversations\n      .getMessages(conversationId)\n      .sort((a, b) => sortByCreationTimeDesc(a, b));\n  }\n\n  constructor(\n    private _smsTemplateView: SmsTemplateView,\n    private _portManager: PortManager,\n    private _messageStore: MessageStore,\n    private _appFeatures: AppFeatures,\n    private _regionSettings: RegionSettings,\n    private _conversations: Conversations,\n    private _rateLimiter: RateLimiter,\n    private _connectivityMonitor: ConnectivityMonitor,\n    private _router: RouterPlugin,\n    private _integrationConfig: IntegrationConfig,\n    private _smsConversations: SmsConversations,\n    private _conversationsViewSpring: ConversationsViewSpring,\n    private _conversationAlert: ConversationAlert,\n    @optional() private _conversationLogger?: ConversationLogger,\n    @optional() private _contactMatcher?: ContactMatcher,\n    @optional('ConversationViewOptions')\n    private _conversationViewOptions?: ConversationViewSpringOptions,\n    @optional('SmsConversationsOptions')\n    private _smsConversationsOptions?: SmsConversationsOptions,\n    @optional() private _smsOptOutView?: SmsOptOutView,\n  ) {\n    super();\n  }\n\n  getUIProps(\n    _: ConversationViewSpringProps,\n  ): UIProps<ConversationViewSpringPanelProps> {\n    const disableLinks =\n      this._rateLimiter.restricted || !this._connectivityMonitor.connectivity;\n    const conversationId = this._conversations.currentConversationId!;\n    const showSpinner = !(\n      (!this._contactMatcher || this._contactMatcher.ready) &&\n      this._regionSettings.ready &&\n      this._conversations.ready &&\n      this._rateLimiter.ready &&\n      this._connectivityMonitor.ready &&\n      (!this._conversationLogger || this._conversationLogger.ready)\n    );\n\n    const hasInputContent =\n      (this._conversations.messageText &&\n        this._conversations.messageText.length > 0) ||\n      (this._conversations.attachments &&\n        this._conversations.attachments.length > 0);\n\n    const conversation =\n      this._conversations.formattedConversationsMap.get(conversationId)!;\n\n    const { showAlert, alertProps } =\n      this._conversationAlert.getAlertInfo(conversation);\n\n    return {\n      messages: this.messages,\n      attachments: this._conversations.attachments,\n      acceptFileTypes: this._conversations.acceptFileTypes,\n      createNewEntityTooltip: this._integrationConfig.createNewEntityTooltip,\n      showLogPopover: this._conversationViewOptions?.showLogPopover,\n      conversation,\n      messageText: this._conversations.messageText,\n      sendButtonDisabled:\n        this._conversations.pushing ||\n        disableLinks ||\n        !hasInputContent ||\n        showSpinner,\n      displayLogStatus: this._smsConversations.checkIsSupportLog(conversation),\n      supportAttachment: this._appFeatures.hasSendMMSPermission,\n      showAlert,\n      alertProps,\n    };\n  }\n\n  getUIFunctions(\n    _: ConversationViewSpringProps,\n  ): UIFunctions<ConversationViewSpringPanelProps> {\n    return {\n      useConversationItemInfo: (conversation) =>\n        this._conversationsViewSpring.useConversationItemInfo(conversation, {\n          pageType: 'text',\n        }),\n      useActionsHandler: this._conversationsViewSpring.useActionsHandler,\n      replyToReceivers: async (text, attachments) => {\n        const currentConversationId = this._conversations.currentConversationId;\n        if (!currentConversationId) return;\n\n        const sendPromise = this._conversations.replyToReceivers(\n          text,\n          attachments,\n        );\n\n        sendPromise\n          .then(() => {\n            this._smsConversationsOptions?.checkDncStatusOfConversation?.(\n              currentConversationId,\n            );\n            this._smsConversationsOptions?.autoLogTaskIfEnabled?.(\n              currentConversationId,\n            );\n          })\n          .catch((error) => {\n            this.logger.error('[SMS] auto-log failed', error);\n          });\n      },\n      updateMessageText: async (text) => {\n        return !!(await this._conversations.updateMessageText(text));\n      },\n      addAttachments: (attachments) =>\n        this._conversations.addAttachments(attachments),\n      removeAttachment: (attachment) =>\n        this._conversations.removeAttachment(attachment),\n      onLinkClick: (href: string) => {\n        let linkType = 'website';\n        if (href.startsWith('mailto:')) {\n          linkType = 'email';\n        }\n\n        trackEvent<any>(trackEvents.clickConversationHyperlink, {\n          'Hyperlink type': linkType,\n        });\n      },\n      goBack: async () => {\n        await slideOutViewTransition(\n          () => this._router.push('/messages'),\n          this._theme?.reducedMotion,\n        );\n      },\n    };\n  }\n\n  component(props: ConversationViewSpringProps) {\n    this._router.useParams<{ conversationId: string }>((params) => {\n      // use sync method to avoid the data not conversationId when into the conversation view\n      this._conversations._loadConversation(params.conversationId);\n\n      // also sync state to server in worker mode to avoid state sync back with empty data\n      if (this._portManager.shared && this._portManager.isMainTab) {\n        this._conversations.loadConversation(params.conversationId);\n      }\n    });\n\n    useEffect(() => {\n      return () => {\n        if (this._portManager.shared) {\n          if (this._portManager.isMainTab) {\n            this._conversations.unloadConversation();\n          }\n        } else {\n          this._conversations.unloadConversation();\n        }\n      };\n    }, []);\n\n    const inputRef = useRef<HTMLTextAreaElement>(null);\n\n    const { current: uiFunctions } = useRef(this.getUIFunctions(props));\n\n    const _props = useConnector(() => {\n      const uiProps = this.getUIProps(props);\n\n      return {\n        ...props,\n        ...uiProps,\n      };\n    });\n\n    const { conversation, messages } = _props;\n\n    const conversationId = conversation?.conversationId;\n\n    // when enter this page, mark all messages as read\n    useEffect(() => {\n      if (!conversationId || messages.length === 0) return;\n\n      if (this._portManager.shared) {\n        if (this._portManager.isMainTab) {\n          this._messageStore.readMessages(conversationId);\n        }\n      } else {\n        this._messageStore.readMessages(conversationId);\n      }\n    }, [conversationId, messages]);\n\n    if (!conversation) {\n      return null;\n    }\n\n    const Component =\n      this._conversationViewOptions?.component || ConversationPanel;\n    return (\n      <Component\n        {..._props}\n        {...uiFunctions}\n        inputRef={inputRef}\n        toolbar={\n          <>\n            <this._smsTemplateView.component targetInputRef={inputRef} />\n            {this._smsOptOutView && (\n              <this._smsOptOutView.component conversation={conversation} />\n            )}\n          </>\n        }\n        endAdornment={\n          this._smsOptOutView ? (\n            <this._smsOptOutView.Chip conversation={conversation} />\n          ) : undefined\n        }\n      />\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}