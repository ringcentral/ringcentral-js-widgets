{"version":3,"file":"SmsOptOut.view.js","names":["_hooks","require","_i18n","_interopRequireDefault","_nextCore","_components","_reactHooks","_springUi","_react","_interopRequireWildcard","_services","_i18n2","_SMSMD","_i18n3","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_class","_class2","_descriptor","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_regenerator","Symbol","iterator","toStringTag","c","prototype","Generator","u","create","_regeneratorDefine2","p","y","G","v","a","d","bind","length","l","TypeError","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","displayName","w","m","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","keys","forEach","slice","reverse","reduce","_initializerWarningHelper","Error","SmsOptOutView","exports","injectable","name","metadata","Function","SmsOptOut","StoragePlugin","delegate","SmsOptOutViewProps","_RcViewModule","_smsOptOut","_storage","_this","enable","_setHasSeenPopover","hasSeenPopover","_setHasSeenPopover2","_callee","_context","setHasSeenPopover","_x","Chip","_ref","_this2","conversation","_useConnector","useConnector","enabled","getOptOut","conversationId","label","getStopHint","_useLocale","useLocale","conversationPanelI18n","createElement","onDelete","setOptOut","classes","root","DeleteIconProps","TooltipProps","title","truncate","ActionButton","_ref2","_this3","_useConnector2","showPopover","_useLocale2","i18nCore","i18n","_useGuidePopover","useGuidePopover","anchorRef","popoverOpen","open","close","handleButtonClick","Fragment","GuideAnchor","ref","closePopover","showHint","IconButton","disabled","size","variant","color","symbol","smsMdIcon","className","onClick","GuidePopover","Button","component","props","_this4","correspondentMatchesList","hasMatches","useMemo","_correspondentMatches","some","matches","match","entityType","type","isCompose","COMPOSE_TEXT_CONVERSATION","notShowOptOut","showOptOut","prevShowOptOut","usePrevious","useEffectOnDocumentFocus","RcViewModule","userStorage","state","action","autobind"],"sources":["src/app/views/SmsOptOutView/SmsOptOut.view.tsx"],"sourcesContent":["import { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport i18nCore from '@ringcentral-integration/micro-core/src/app/views/ModalView/ModalItemView/ModalItemPanel/i18n';\nimport {\n  action,\n  autobind,\n  delegate,\n  injectable,\n  RcViewModule,\n  state,\n  StoragePlugin,\n  useConnector,\n  userStorage,\n} from '@ringcentral-integration/next-core';\nimport {\n  GuideAnchor,\n  GuidePopover,\n  useGuidePopover,\n} from '@ringcentral-integration/next-widgets/components';\nimport { useEffectOnDocumentFocus } from '@ringcentral-integration/react-hooks';\nimport { Button, Chip, IconButton, usePrevious } from '@ringcentral/spring-ui';\nimport React, { useMemo } from 'react';\n\nimport {\n  COMPOSE_TEXT_CONVERSATION,\n  type FilteredConversation,\n  SmsOptOut,\n} from '../../services';\nimport conversationPanelI18n from '../ConversationViewSpring/ConversationPanel/i18n';\n\n// TODO: wait spring-ui release a new version to get the icon component\nimport smsMdIcon from './SMSMD.svg';\nimport i18n from './i18n';\n\nexport interface SmsOptOutViewProps {\n  conversation: FilteredConversation;\n}\n\n@injectable({\n  name: 'SmsOptOutView',\n})\nexport class SmsOptOutView extends RcViewModule {\n  constructor(private _smsOptOut: SmsOptOut, private _storage: StoragePlugin) {\n    super();\n    this._storage.enable(this);\n  }\n\n  @userStorage\n  @state\n  private hasSeenPopover = false;\n\n  @action\n  private _setHasSeenPopover(value: boolean) {\n    this.hasSeenPopover = value;\n  }\n\n  @delegate('server')\n  async setHasSeenPopover(value: boolean) {\n    this._setHasSeenPopover(value);\n  }\n\n  @autobind\n  Chip({ conversation }: SmsOptOutViewProps) {\n    const { enabled, label } = useConnector(() => ({\n      enabled: this._smsOptOut.getOptOut(conversation.conversationId!),\n      label: this._smsOptOut.getStopHint(),\n    }));\n\n    const { t } = useLocale(conversationPanelI18n);\n\n    if (!enabled) return null;\n\n    return (\n      <Chip\n        label={label}\n        onDelete={() => {\n          this._smsOptOut.setOptOut(conversation.conversationId!, false);\n        }}\n        data-sign=\"optOutChip\"\n        classes={{\n          label: 'max-w-[200px]',\n          root: 'rounded-none h-auto p-0 mb-1',\n        }}\n        DeleteIconProps={{\n          TooltipProps: {\n            title: t('removeOptOut'),\n          },\n        }}\n        truncate={false}\n      />\n    );\n  }\n\n  @autobind\n  private ActionButton({ conversation }: SmsOptOutViewProps) {\n    const { enabled, showPopover } = useConnector(() => {\n      return {\n        enabled: this._smsOptOut.getOptOut(conversation.conversationId!),\n        showPopover: !this.hasSeenPopover,\n      };\n    });\n\n    const { t } = useLocale(conversationPanelI18n, i18nCore, i18n);\n\n    const { anchorRef, popoverOpen, open, close } = useGuidePopover({});\n\n    const handleButtonClick = () => {\n      if (showPopover) {\n        open();\n        this.setHasSeenPopover(true);\n      } else {\n        this._smsOptOut.setOptOut(conversation.conversationId!, !enabled);\n      }\n    };\n\n    return (\n      <>\n        <GuideAnchor\n          ref={anchorRef}\n          popoverOpen={popoverOpen}\n          closePopover={close}\n          showHint={showPopover}\n        >\n          <IconButton\n            TooltipProps={{\n              title: t('insertOptOut'),\n            }}\n            disabled={enabled}\n            size=\"large\"\n            variant=\"icon\"\n            color=\"secondary\"\n            symbol={smsMdIcon}\n            className=\"text-neutral-b2\"\n            onClick={handleButtonClick}\n            data-sign=\"optOutButton\"\n          />\n        </GuideAnchor>\n        <GuidePopover anchorRef={anchorRef} popoverOpen={popoverOpen}>\n          <div className=\"mb-3\">\n            <div className=\"typography-subtitleBold text-neutral-b0 mb-2\">\n              {t('optOutPopoverTitle')}\n            </div>\n            <div className=\"typography-descriptor text-neutral-b1\">\n              {t('optOutPopoverDescription')}\n            </div>\n          </div>\n          <div className=\"flex justify-end w-full\">\n            <Button\n              onClick={close}\n              data-sign=\"optOutPopoverGotIt\"\n              size=\"medium\"\n            >\n              {t('ok')}\n            </Button>\n          </div>\n        </GuidePopover>\n      </>\n    );\n  }\n\n  component(props: SmsOptOutViewProps) {\n    const { conversation } = props;\n    const conversationId = conversation.conversationId!;\n    const correspondentMatchesList = conversation?.correspondentMatchesList;\n\n    const hasMatches = useMemo(() => {\n      const hasMatches =\n        correspondentMatchesList?.some(\n          (matches) =>\n            matches.length > 0 &&\n            matches.some(\n              (match) =>\n                match.entityType === 'rcContact' && match.type === 'company',\n            ),\n        ) ?? false;\n\n      return hasMatches;\n    }, [correspondentMatchesList]);\n\n    const isCompose =\n      conversation.conversationId === COMPOSE_TEXT_CONVERSATION.conversationId;\n\n    const notShowOptOut =\n      // if be internal, we don't need to show the opt out button\n      hasMatches ||\n      // in compose text, always have the opt out button\n      (!isCompose &&\n        // if there is not one to one conversation, we don't need to show the opt out button\n        correspondentMatchesList &&\n        correspondentMatchesList?.length !== 1);\n    const showOptOut = !notShowOptOut;\n\n    const prevShowOptOut = usePrevious(() => showOptOut);\n\n    useEffectOnDocumentFocus(() => {\n      if (\n        // when prev is showing, now is not showing, and the conversation is opt out, set the conversation to not opt out\n        prevShowOptOut &&\n        !showOptOut &&\n        this._smsOptOut.getOptOut(conversationId) &&\n        conversationId\n      ) {\n        this._smsOptOut.setOptOut(conversationId, false);\n      }\n    }, [conversationId, notShowOptOut, prevShowOptOut, showOptOut]);\n\n    if (notShowOptOut) return null;\n\n    return <this.ActionButton {...props} />;\n  }\n}\n"],"mappings":"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","ignoreList":[]}