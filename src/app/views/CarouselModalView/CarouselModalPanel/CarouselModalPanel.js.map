{"version":3,"file":"CarouselModalPanel.js","names":["_react","_interopRequireDefault","require","_ModalView","_CarouselModalItem","_styles","e","__esModule","CarouselModalPanel","exports","_ref","activeIndex","getContainerSize","setActiveIndex","onLoadFail","invisible","_useModalItemView","useModalItemView","action","props","payload","data","showLoading","totalLength","length","moreThenHalf","_useKeyboardMoveFocus","useKeyboardMoveFocus","options","columns","focusedIndexRef","current","infinite","onFocusedIndexChange","event","toIndex","preventDefault","onKeyFocusedIndexHandle","useEventListener","global","document","createElement","Fragment","CarouselModalDialogInvisibleGlobalStyle","DialogContentReset","CloseWrap","_IconButton","RcIconButton","symbol","Close","variant","radius","size","color","onClick","close","ButtonWrap","direction","ArrowLeft2","map","_ref2","i","url","CarouselModalItem","key","show","ArrowRight","DotWrap","DotItem","active"],"sources":["src/app/views/CarouselModalView/CarouselModalPanel/CarouselModalPanel.tsx"],"sourcesContent":["import {\n  RcIconButton,\n  useEventListener,\n  useKeyboardMoveFocus,\n} from '@ringcentral/juno';\nimport { ArrowLeft2, ArrowRight, Close } from '@ringcentral/juno-icon';\nimport type { FunctionComponent, HTMLAttributes } from 'react';\nimport React from 'react';\n\nimport { DialogContentReset, useModalItemView } from '../../ModalView';\n\nimport { CarouselModalItem, CarouselModalItemProps } from './CarouselModalItem';\nimport {\n  ButtonWrap,\n  CarouselModalDialogInvisibleGlobalStyle,\n  CloseWrap,\n  DotItem,\n  DotWrap,\n} from './styles';\n\nexport type CarouselModalPanelProps = {\n  activeIndex: number;\n  setActiveIndex: (activeIndex: number) => void;\n  invisible?: boolean;\n} & HTMLAttributes<HTMLDivElement> &\n  Pick<CarouselModalItemProps, 'onLoadFail' | 'getContainerSize'>;\n\nexport type CarouselModalItemInfo = {\n  url: string;\n  size?: {\n    width: number;\n    height: number;\n  };\n};\n\nexport type CarouselModalPayload = {\n  data: CarouselModalItemInfo[];\n  /**\n   * when open init carousel index\n   *\n   * @default 0\n   */\n  initIndex?: number;\n} & Pick<\n  CarouselModalItemProps,\n  'showLoading' | 'LoadingBackdropProps' | 'LoadingSpinnerProps'\n>;\n\nexport const CarouselModalPanel: FunctionComponent<CarouselModalPanelProps> = ({\n  activeIndex,\n  getContainerSize,\n  setActiveIndex,\n  onLoadFail,\n  invisible,\n}) => {\n  const { action, props } = useModalItemView<CarouselModalPayload>();\n\n  const payload = props.payload!;\n\n  const { data, showLoading } = payload;\n  const totalLength = data.length;\n  const moreThenHalf = activeIndex >= totalLength / 2;\n\n  const { onKeyFocusedIndexHandle } = useKeyboardMoveFocus({\n    options: data,\n    columns: totalLength,\n    focusedIndexRef: { current: activeIndex },\n    infinite: false,\n    onFocusedIndexChange: (event, toIndex) => {\n      setActiveIndex(toIndex);\n\n      event?.preventDefault();\n    },\n  });\n\n  useEventListener(global.document, 'keydown', (e: React.KeyboardEvent) => {\n    onKeyFocusedIndexHandle(e);\n  });\n\n  return (\n    <>\n      {invisible ? <CarouselModalDialogInvisibleGlobalStyle /> : null}\n      <DialogContentReset>\n        <CloseWrap>\n          <RcIconButton\n            symbol={Close}\n            variant=\"outline\"\n            radius=\"circle\"\n            size=\"small\"\n            color=\"neutral.f06\"\n            onClick={() => {\n              action?.close();\n            }}\n          />\n        </CloseWrap>\n        {activeIndex !== 0 ? (\n          <ButtonWrap direction=\"left\">\n            <RcIconButton\n              symbol={ArrowLeft2}\n              variant=\"inverse\"\n              size=\"xlarge\"\n              color=\"neutral.f11\"\n              onClick={() => {\n                setActiveIndex(activeIndex - 1);\n              }}\n            />\n          </ButtonWrap>\n        ) : null}\n        {data.map(({ url, size }, i) => (\n          <CarouselModalItem\n            // here index never be change, so use i is find\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            url={url}\n            show={i === activeIndex}\n            size={size}\n            showLoading={showLoading}\n            onLoadFail={onLoadFail}\n            getContainerSize={getContainerSize}\n          />\n        ))}\n        {activeIndex !== totalLength - 1 ? (\n          <ButtonWrap direction=\"right\">\n            <RcIconButton\n              symbol={ArrowRight}\n              variant=\"inverse\"\n              size=\"xlarge\"\n              color=\"neutral.f11\"\n              onClick={() => {\n                setActiveIndex(activeIndex + 1);\n              }}\n            />\n          </ButtonWrap>\n        ) : null}\n        {totalLength > 1 ? (\n          <DotWrap>\n            <DotItem\n              active={!moreThenHalf}\n              onClick={() => {\n                setActiveIndex(0);\n              }}\n            />\n            <DotItem\n              active={moreThenHalf}\n              onClick={() => {\n                setActiveIndex(totalLength - 1);\n              }}\n            />\n          </DotWrap>\n        ) : null}\n      </DialogContentReset>\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]}