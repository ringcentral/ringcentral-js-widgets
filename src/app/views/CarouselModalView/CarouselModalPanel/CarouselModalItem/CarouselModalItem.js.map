{"version":3,"file":"CarouselModalItem.js","names":["_nextCore","require","_Backdrop","_CircularProgress","_Portal","_spacing","_styledComponents","_interopRequireDefault","_zIndex","_react","_interopRequireWildcard","_styles","_excluded","_templateObject","_templateObject2","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","l","Symbol","iterator","u","next","done","push","value","isArray","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","_taggedTemplateLiteral","freeze","defineProperties","raw","TopRcBackdrop","styled","RcBackdrop","zIndex","_CarouselModalItem","props","url","title","show","forceSize","size","_props$showLoading","showLoading","LoadingBackdropProps","LoadingSpinnerProps","getContainerSize","onLoadFail","rest","_useState","useState","width","document","body","clientWidth","height","clientHeight","_useState2","setSize","_useState3","_useState4","loading","setLoading","handleLoad","iframe","target","contentDocument","logger","warn","handleError","createElement","Fragment","RcPortal","open","RcCircularProgress","CarouselModalDialogGlobalStyle","key","tabIndex","onLoad","onError","src","CarouselModalItem","exports","_ref","outOfViewStyle","spacing"],"sources":["src/app/views/CarouselModalView/CarouselModalPanel/CarouselModalItem/CarouselModalItem.tsx"],"sourcesContent":["import { logger } from '@ringcentral-integration/next-core';\nimport {\n  RcBackdrop,\n  RcBackdropProps,\n  RcCircularProgress,\n  RcCircularProgressProps,\n  RcPortal,\n  spacing,\n  styled,\n  zIndex,\n} from '@ringcentral/juno';\nimport type { FunctionComponent, HTMLAttributes } from 'react';\nimport React, { useState } from 'react';\n\nimport { CarouselModalDialogGlobalStyle, outOfViewStyle } from './styles';\n\ntype CarouselModalItemDialogSize = {\n  width: number;\n  height: number;\n};\n\nexport type CarouselModalItemProps = {\n  url: string;\n  show: boolean;\n  /**\n   * before iframe be loaded, is show loading for user\n   *\n   * @default false\n   */\n  showLoading?: boolean;\n  /**\n   * backdrop props when loading\n   */\n  LoadingBackdropProps?: RcBackdropProps;\n  /**\n   * spinner props when loading\n   */\n  LoadingSpinnerProps?: RcCircularProgressProps;\n  /**\n   * emit when not found inner container\n   */\n  onLoadFail?: (e: React.SyntheticEvent<HTMLIFrameElement, Event>) => void;\n  /**\n   * container getter that be call after iframe loaded to find the root container\n   */\n  getContainerSize: (\n    contentDocument: Document | null,\n  ) => CarouselModalItemDialogSize | undefined;\n  /**\n   * that container size, if have set will force use that size instead of `getContainer` return size\n   */\n  size?: CarouselModalItemDialogSize;\n} & HTMLAttributes<HTMLDivElement>;\n\nconst TopRcBackdrop = styled(RcBackdrop)`\n  z-index: ${zIndex('modal')};\n`;\n\nconst _CarouselModalItem: FunctionComponent<CarouselModalItemProps> = (\n  props,\n) => {\n  const {\n    url,\n    title,\n    show,\n    size: forceSize,\n    showLoading = false,\n    LoadingBackdropProps,\n    LoadingSpinnerProps,\n    getContainerSize,\n    onLoadFail,\n    ...rest\n  } = props;\n  const [size, setSize] = useState(\n    forceSize || {\n      width: document.body.clientWidth,\n      height: document.body.clientHeight,\n    },\n  );\n  const [loading, setLoading] = useState(true);\n\n  const handleLoad = (\n    e: React.SyntheticEvent<HTMLIFrameElement, Event>,\n  ): void => {\n    if (forceSize) {\n      setLoading(false);\n      return;\n    }\n\n    const iframe = e.target as HTMLIFrameElement;\n    const size = getContainerSize(iframe.contentDocument);\n\n    if (!size) {\n      logger.warn('[CarouselModalItem]', 'getContainerSize not found size');\n\n      onLoadFail?.(e);\n      return;\n    }\n\n    setSize(size);\n    setLoading(false);\n  };\n\n  const handleError = (\n    e: React.SyntheticEvent<HTMLIFrameElement, Event>,\n  ): void => {\n    onLoadFail?.(e);\n  };\n\n  return (\n    <>\n      {showLoading && show ? (\n        <RcPortal>\n          <TopRcBackdrop {...LoadingBackdropProps} open={loading}>\n            <RcCircularProgress size={32} {...LoadingSpinnerProps} />\n          </TopRcBackdrop>\n        </RcPortal>\n      ) : null}\n      {show && <CarouselModalDialogGlobalStyle {...size} loading={loading} />}\n      <div key={url} {...rest}>\n        <iframe\n          key={url}\n          tabIndex={-1}\n          onLoad={handleLoad}\n          onError={handleError}\n          width={size.width}\n          height={size.height}\n          src={url}\n          title={title}\n        />\n      </div>\n    </>\n  );\n};\n\nexport const CarouselModalItem = styled(_CarouselModalItem)`\n  ${({ show }) => !show && outOfViewStyle};\n\n  iframe {\n    display: block;\n    line-height: 0;\n    border-radius: ${spacing(3)};\n  }\n`;\n"],"mappings":"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","ignoreList":[]}