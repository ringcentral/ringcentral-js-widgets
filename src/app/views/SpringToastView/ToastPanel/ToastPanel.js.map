{"version":3,"file":"ToastPanel.js","names":["_reactHooks","require","_ClickAwayListener","_Fade","_Portal","_Slide","_useChange","_useEventCallback","_useEventListener2","_useRefState3","_useResultRef","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_components","_hooks","_ToastPanel","_ToastItemPanel","_excluded","_excluded2","_excluded3","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","_extends","assign","bind","arguments","apply","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","MemoToastItem","memo","props","id","payload","timestamp","message","level","ttl","loading","action","backdrop","brand","inProp","_props$getRenderer","getRenderer","DEFAULT_TOAST_GET_RENDERER","dismiss","onExited","_props$component","component","Component","ToastItemPanel","rest","alertItem","Message","_useLocale","useLocale","currentLocale","createElement","RcSlide","key","direction","className","ToastPanel","exports","_ref","messages","_ref$size","size","_ref$messageAlign","messageAlign","_ref$position","position","_ref$fullWidth","fullWidth","_ref$disableBackdropC","disableBackdropClick","_ref$disableEscapeKey","disableEscapeKeyDown","_useRefState","useRefState","_useRefState2","currentMessagesRef","setCurrentMessages","listening","useRef","deleteMapRef","useResultRef","Map","useChange","prev","prevLength","nextLength","deleteMap","current","nextSet","Set","map","msg","forEach","x","currentMessages","handleClickAway","useEventCallback","_currentMessages$slic","_currentMessages$slic2","lastOne","_lastOne$disableBackd","itemDisabled","_useEventListener","useEventListener","document","_messages$slice","_messages$slice2","_lastOne$disableEscap","preventDefault","stopPropagation","startImmediately","listen","remove","handleExited","nonElement","useEffect","footerHeight","useFooterHeight","renderHeight","useViewTransitionState","showBackdrop","some","RcPortal","clsx","RcFade","ClickAwayListener","onClickAway","_ref2","style","height"],"sources":["src/app/views/SpringToastView/ToastPanel/ToastPanel.tsx"],"sourcesContent":["import { useViewTransitionState } from '@ringcentral-integration/react-hooks';\nimport {\n  ClickAwayListener,\n  RcFade,\n  RcPortal,\n  RcSlide,\n  RcSlideProps,\n  useChange,\n  useEventCallback,\n  useEventListener,\n  useRefState,\n  useResultRef,\n} from '@ringcentral/juno';\nimport clsx from 'clsx';\nimport React, { FunctionComponent, memo, useEffect, useRef } from 'react';\n\nimport { useFooterHeight } from '../../../components';\nimport { useLocale } from '../../../hooks';\nimport type { ToastItem, ToastItemPanelProps } from '../../../services';\nimport {\n  DEFAULT_TOAST_GET_RENDERER,\n  type ToastPanelProps,\n} from '../../ToastView/ToastPanel';\nimport { ToastItemPanel } from '../ToastItemView/ToastItemPanel/ToastItemPanel';\n\ntype MemoItemProps = ToastItemPanelProps &\n  Pick<RcSlideProps, 'in'> &\n  Pick<ToastPanelProps, 'getRenderer' | 'brand'> & {\n    onExited: (id: string) => void;\n  };\n\nconst MemoToastItem: FunctionComponent<\n  MemoItemProps & {\n    component?: any;\n  }\n> = memo((props) => {\n  const {\n    id,\n    payload,\n    timestamp,\n    message,\n    level,\n    ttl,\n    loading,\n    action,\n    backdrop,\n    brand,\n    in: inProp,\n    getRenderer = DEFAULT_TOAST_GET_RENDERER,\n    dismiss,\n    onExited,\n    component: Component = ToastItemPanel,\n    ...rest\n  } = props;\n\n  const alertItem: ToastItem = {\n    id,\n    message,\n    payload,\n    timestamp,\n    level,\n    ttl,\n    loading,\n    action,\n    backdrop,\n  };\n\n  const Message = getRenderer(alertItem);\n  const { currentLocale } = useLocale();\n\n  return (\n    <RcSlide key={id} in={inProp} onExited={() => onExited(id)} direction=\"up\">\n      <div\n        className=\"flex bg-neutral-base rounded-sui-sm\"\n        // below view transition api may cause the toast item be opacity background, so we need to set the background color to that to avoid that\n      >\n        <Component {...rest} {...alertItem} dismiss={dismiss}>\n          <Message\n            message={alertItem}\n            currentLocale={currentLocale}\n            brand={brand}\n            payload={payload}\n          />\n        </Component>\n      </div>\n    </RcSlide>\n  );\n});\n\nexport const ToastPanel: FunctionComponent<ToastPanelProps> = ({\n  className,\n  messages,\n  size = 'small',\n  messageAlign = 'left',\n  position = 'bottom',\n  fullWidth = true,\n  backdrop,\n  disableBackdropClick = true,\n  disableEscapeKeyDown = true,\n  dismiss,\n  component,\n  ...rest\n}) => {\n  const [currentMessagesRef, setCurrentMessages] = useRefState(messages);\n  const listening = useRef(false);\n\n  const deleteMapRef = useResultRef(() => new Map<string, boolean>());\n\n  useChange(\n    (prev, next) => {\n      if (prev) {\n        const prevLength = prev.length;\n        const nextLength = next.length;\n        const { current: deleteMap } = deleteMapRef;\n\n        if (prevLength !== nextLength) {\n          const nextSet = new Set(next.map((msg) => msg.id));\n\n          if (nextLength < prevLength) {\n            prev.forEach((x) => {\n              if (!nextSet.has(x.id)) {\n                deleteMap.set(x.id, true);\n              }\n            });\n            return;\n          }\n        }\n      }\n      // find need remove messages\n      setCurrentMessages(next, false);\n    },\n    () => messages,\n  );\n\n  const { current: currentMessages } = currentMessagesRef;\n  const { current: deleteMap } = deleteMapRef;\n\n  const handleClickAway = useEventCallback(() => {\n    const [lastOne] = currentMessages.slice(-1);\n\n    const { disableBackdropClick: itemDisabled = disableBackdropClick } =\n      lastOne;\n\n    if (!itemDisabled) {\n      dismiss(lastOne.id, 'backdropClick');\n    }\n  });\n\n  // TODO: work with mui modal manager, otherwise modal and Toast esc will got error behaviors when open at same time\n  const { listen, remove } = useEventListener(\n    document,\n    'keydown',\n    (e: KeyboardEvent) => {\n      if (e.key !== 'Escape') return;\n\n      // using current message\n      const [lastOne] = messages.slice(-1);\n\n      const { disableEscapeKeyDown: itemDisabled = disableEscapeKeyDown } =\n        lastOne;\n\n      if (!itemDisabled) {\n        dismiss(lastOne.id, 'escapeKeyDown');\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    },\n    {\n      startImmediately: false,\n    },\n  );\n\n  const handleExited = useEventCallback((id: string) => {\n    deleteMap.delete(id);\n    setCurrentMessages(messages);\n  });\n\n  const nonElement = currentMessages.length === 0;\n\n  useEffect(() => {\n    if (nonElement) {\n      if (listening.current) {\n        remove();\n        listening.current = false;\n      }\n      return;\n    }\n\n    listen();\n    listening.current = true;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [nonElement]);\n\n  const footerHeight = useFooterHeight();\n  const renderHeight = useViewTransitionState(footerHeight);\n\n  if (nonElement) {\n    return null;\n  }\n\n  const showBackdrop =\n    backdrop ||\n    currentMessages.some((msg) => !deleteMap.get(msg.id) && msg.backdrop);\n\n  return (\n    <RcPortal>\n      <div\n        data-sign=\"toast-container\"\n        className={clsx(\n          'fixed top-0 left-0 w-full h-full z-snackbar pointer-events-none pt-3 flex flex-col',\n          className,\n          position === 'top' ? 'justify-start' : 'justify-end',\n        )}\n      >\n        <RcFade in={showBackdrop}>\n          <div className=\"absolute left-0 top-0 w-full h-full bg-neutral-100 bg-opacity-40 z-[-1] pointer-events-auto\" />\n        </RcFade>\n        <ClickAwayListener onClickAway={handleClickAway}>\n          <section\n            className={clsx(\n              'inline-flex flex-col justify-end gap-3 px-5 mb-4 items-center [view-transition-name:toast]',\n              fullWidth && 'w-full',\n            )}\n          >\n            {currentMessages.map(\n              ({ disableBackdropClick, disableEscapeKeyDown, ...message }) => (\n                <MemoToastItem\n                  key={message.id}\n                  fullWidth={fullWidth}\n                  size={size}\n                  component={component}\n                  messageAlign={messageAlign}\n                  onExited={handleExited}\n                  in={!deleteMap.get(message.id)}\n                  dismiss={dismiss}\n                  {...message}\n                  {...rest}\n                />\n              ),\n            )}\n          </section>\n        </ClickAwayListener>\n        {renderHeight ? <div style={{ height: renderHeight }}></div> : null}\n      </div>\n    </RcPortal>\n  );\n};\n"],"mappings":"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","ignoreList":[]}