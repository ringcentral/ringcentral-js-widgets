{"version":3,"file":"ToastPanel.js","names":["_react","_interopRequireWildcard","require","_hooks","_ToastItemPanel","_excluded","_excluded2","_excluded3","_templateObject","_templateObject2","_templateObject3","_templateObject4","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_interopRequireDefault","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","_extends","assign","bind","arguments","apply","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","_taggedTemplateLiteral","freeze","defineProperties","raw","ToastPanelHost","styled","div","zIndex","spacing","backdropColor","setOpacity","palette2","ToastBackdrop","ToastList","section","_ref","fullWidth","AnimationHost","DefaultContent","_ref2","message","createElement","Fragment","DEFAULT_TOAST_GET_RENDERER","exports","MemoToastItem","memo","props","id","payload","timestamp","level","ttl","loading","action","backdrop","brand","inProp","_props$getRenderer","getRenderer","dismiss","onExited","_props$component","component","Component","ToastItemPanel","rest","alertItem","Message","_useLocale","useLocale","currentLocale","_Slide","RcSlide","key","ToastPanel","_ref3","className","messages","_ref3$size","size","_ref3$messageAlign","messageAlign","_ref3$fullWidth","_ref3$position","position","_ref3$disableBackdrop","disableBackdropClick","_ref3$disableEscapeKe","disableEscapeKeyDown","_useRefState","useRefState","_useRefState2","currentMessagesRef","setCurrentMessages","listening","useRef","deleteMapRef","useResultRef","Map","useChange","prev","prevLength","nextLength","deleteMap","current","nextSet","Set","map","msg","forEach","x","currentMessages","handleClickAway","useEventCallback","_currentMessages$slic","_currentMessages$slic2","lastOne","_lastOne$disableBackd","itemDisabled","_useEventListener","useEventListener","document","_messages$slice","_messages$slice2","_lastOne$disableEscap","preventDefault","stopPropagation","startImmediately","listen","remove","handleExited","nonElement","useEffect","showBackdrop","some","_Portal","RcPortal","_Fade","RcFade","_ClickAwayListener","ClickAwayListener","onClickAway","_ref4"],"sources":["src/app/views/ToastView/ToastPanel/ToastPanel.tsx"],"sourcesContent":["import {\n  ClickAwayListener,\n  palette2,\n  RcFade,\n  RcPortal,\n  RcSlide,\n  RcSlideProps,\n  setOpacity,\n  spacing,\n  styled,\n  useChange,\n  useEventCallback,\n  useEventListener,\n  useRefState,\n  useResultRef,\n  zIndex,\n} from '@ringcentral/juno';\nimport React, { FunctionComponent, memo, useEffect, useRef } from 'react';\n\nimport { useLocale } from '../../../hooks';\nimport type { ToastItem, ToastItemPanelProps } from '../../../services';\nimport { ToastItemPanel } from '../ToastItemView/ToastItemPanel/ToastItemPanel';\n\nconst ToastPanelHost = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: ${zIndex('snackbar')};\n  pointer-events: none;\n  padding-top: ${spacing(3)};\n  display: flex;\n  justify-content: center;\n`;\n\nconst backdropColor = setOpacity(palette2('neutral', 'b01'), '40');\nconst ToastBackdrop = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: ${backdropColor};\n  z-index: -1;\n  pointer-events: auto;\n`;\n\ntype ToastListProps = {\n  fullWidth: boolean;\n};\n\nconst ToastList = styled.section<ToastListProps>`\n  pointer-events: auto;\n  display: inline-flex;\n  flex-direction: column;\n  pointer-events: none;\n  width: ${({ fullWidth }) => fullWidth && '100%'};\n  gap: ${spacing(2, 0)};\n  padding: ${spacing(0, 5)};\n`;\n\nconst AnimationHost = styled.div`\n  display: flex;\n`;\n\nexport type ToastRendererProps = {\n  message: ToastItem;\n  /**\n   * addition payload data pass to message\n   */\n  payload?: any;\n  /**\n   * @deprecated please use `useLocale` instead.\n   */\n  currentLocale?: string;\n  /**\n   * @deprecated please use module view system to get that.\n   */\n  brand?: string;\n};\n\nexport type ToastPanelProps = {\n  messages: ToastItem[];\n  className?: string;\n  getRenderer?: (type: ToastItem) => FunctionComponent<ToastRendererProps>;\n} & Omit<ToastItemPanelProps, keyof ToastItem> &\n  Pick<\n    ToastItem,\n    'backdrop' | 'disableBackdropClick' | 'disableEscapeKeyDown'\n  > &\n  Pick<ToastRendererProps, 'brand'> & {\n    // TODO: Workaround with old alert view\n    component?: any;\n\n    /**\n     * set the position of the entire toast container, \"bottom\" by default.\n     */\n    position?: 'top' | 'bottom';\n  };\n\ntype MemoItemProps = ToastItemPanelProps &\n  Pick<RcSlideProps, 'in'> &\n  Pick<ToastPanelProps, 'getRenderer' | 'brand'> & {\n    onExited: (id: string) => void;\n  };\n\nconst DefaultContent: FunctionComponent<ToastRendererProps> = ({ message }) => {\n  // eslint-disable-next-line react/jsx-no-useless-fragment\n  return <>{message.message}</>;\n};\nexport const DEFAULT_TOAST_GET_RENDERER = () => DefaultContent;\n\nconst MemoToastItem: FunctionComponent<\n  MemoItemProps & {\n    // TODO: Workaround with old alert view\n    component?: any;\n  }\n> = memo((props) => {\n  const {\n    id,\n    payload,\n    timestamp,\n    message,\n    level,\n    ttl,\n    loading,\n    action,\n    backdrop,\n    brand,\n    in: inProp,\n    getRenderer = DEFAULT_TOAST_GET_RENDERER,\n    dismiss,\n    onExited,\n    component: Component = ToastItemPanel,\n    ...rest\n  } = props;\n\n  const alertItem: ToastItem = {\n    id,\n    message,\n    payload,\n    timestamp,\n    level,\n    ttl,\n    loading,\n    action,\n    backdrop,\n  };\n\n  const Message = getRenderer(alertItem);\n  const { currentLocale } = useLocale();\n\n  return (\n    <RcSlide key={id} in={inProp} onExited={() => onExited(id)}>\n      <AnimationHost>\n        <Component {...rest} {...alertItem} dismiss={dismiss}>\n          <Message\n            message={alertItem}\n            currentLocale={currentLocale}\n            brand={brand}\n            payload={payload}\n          />\n        </Component>\n      </AnimationHost>\n    </RcSlide>\n  );\n});\n\nexport const ToastPanel: FunctionComponent<ToastPanelProps> = ({\n  className,\n  messages,\n  size = 'small',\n  messageAlign = 'left',\n  fullWidth = true,\n  position = 'bottom',\n  backdrop,\n  disableBackdropClick = true,\n  disableEscapeKeyDown = true,\n  dismiss,\n  component,\n  ...rest\n}) => {\n  const [currentMessagesRef, setCurrentMessages] = useRefState(messages);\n  const listening = useRef(false);\n\n  const deleteMapRef = useResultRef(() => new Map<string, boolean>());\n\n  useChange(\n    (prev, next) => {\n      if (prev) {\n        const prevLength = prev.length;\n        const nextLength = next.length;\n        const { current: deleteMap } = deleteMapRef;\n\n        if (prevLength !== nextLength) {\n          const nextSet = new Set(next.map((msg) => msg.id));\n\n          if (nextLength < prevLength) {\n            prev.forEach((x) => {\n              if (!nextSet.has(x.id)) {\n                deleteMap.set(x.id, true);\n              }\n            });\n            return;\n          }\n        }\n      }\n      // find need remove messages\n      setCurrentMessages(next, false);\n    },\n    () => messages,\n  );\n\n  const { current: currentMessages } = currentMessagesRef;\n  const { current: deleteMap } = deleteMapRef;\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const handleClickAway = useEventCallback((e: React.MouseEvent<any>) => {\n    const [lastOne] = currentMessages.slice(-1);\n\n    const { disableBackdropClick: itemDisabled = disableBackdropClick } =\n      lastOne;\n\n    if (!itemDisabled) {\n      dismiss(lastOne.id, 'backdropClick');\n    }\n  });\n\n  // TODO: work with mui modal manager, otherwise modal and Toast esc will got error behaviors when open at same time\n  const { listen, remove } = useEventListener(\n    document,\n    'keydown',\n    (e: KeyboardEvent) => {\n      if (e.key !== 'Escape') return;\n\n      // using current message\n      const [lastOne] = messages.slice(-1);\n\n      const { disableEscapeKeyDown: itemDisabled = disableEscapeKeyDown } =\n        lastOne;\n\n      if (!itemDisabled) {\n        dismiss(lastOne.id, 'escapeKeyDown');\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    },\n    {\n      startImmediately: false,\n    },\n  );\n\n  const handleExited = useEventCallback((id: string) => {\n    deleteMap.delete(id);\n    setCurrentMessages(messages);\n  });\n\n  const nonElement = currentMessages.length === 0;\n\n  useEffect(() => {\n    if (nonElement) {\n      if (listening.current) {\n        remove();\n        listening.current = false;\n      }\n      return;\n    }\n\n    listen();\n    listening.current = true;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [nonElement]);\n\n  if (nonElement) {\n    return null;\n  }\n\n  const showBackdrop =\n    backdrop ||\n    currentMessages.some((msg) => !deleteMap.get(msg.id) && msg.backdrop);\n\n  return (\n    <RcPortal>\n      <ToastPanelHost data-sign=\"toast-container\" className={className}>\n        <RcFade in={showBackdrop}>\n          <ToastBackdrop />\n        </RcFade>\n        <ClickAwayListener onClickAway={handleClickAway}>\n          <ToastList fullWidth={fullWidth}>\n            {currentMessages.map(\n              ({ disableBackdropClick, disableEscapeKeyDown, ...message }) => (\n                <MemoToastItem\n                  key={message.id}\n                  fullWidth={fullWidth}\n                  size={size}\n                  component={component}\n                  messageAlign={messageAlign}\n                  onExited={handleExited}\n                  in={!deleteMap.get(message.id)}\n                  dismiss={dismiss}\n                  {...message}\n                  {...rest}\n                />\n              ),\n            )}\n          </ToastList>\n        </ClickAwayListener>\n      </ToastPanelHost>\n    </RcPortal>\n  );\n};\n"],"mappings":"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","ignoreList":[]}