{"version":3,"file":"HiddenMagic.js","names":["_clsx","_interopRequireDefault","require","_observableHooks","_react","_interopRequireWildcard","_rxjs","_excluded","_excluded2","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","_HiddenMagic","_ref","onShowChange","_ref$times","times","rest","hiddenRef","useRef","click$","useObservable","defer","fromEvent","current","pipe","scan","acc","mergeMap","x","timer","tap","Error","of","filter","retry","useSubscription","createElement","ref","HiddenMagic","exports","_ref2","className","clsx"],"sources":["src/app/views/SecretDevToolView/HiddenMagic.tsx"],"sourcesContent":["import clsx from 'clsx';\nimport { useObservable, useSubscription } from 'observable-hooks';\nimport React, { FunctionComponent, useRef } from 'react';\nimport {\n  defer,\n  filter,\n  fromEvent,\n  mergeMap,\n  of,\n  retry,\n  scan,\n  tap,\n  timer,\n} from 'rxjs';\n\nexport interface HiddenMagicProps {\n  className?: string;\n  /**\n   * the times that you need to click inside 3s\n   */\n  times?: number;\n  onShowChange: () => void;\n}\n\nconst _HiddenMagic: FunctionComponent<HiddenMagicProps> = ({\n  onShowChange,\n  times = 5,\n  ...rest\n}) => {\n  const hiddenRef = useRef<HTMLDivElement>(null);\n\n  const click$ = useObservable(\n    () =>\n      defer(() =>\n        fromEvent(hiddenRef.current!, 'click').pipe(\n          scan((acc) => acc + 1, 0),\n          mergeMap((x, i) =>\n            i === 0\n              ? timer(2000).pipe(\n                  tap(() => {\n                    throw new Error();\n                  }),\n                )\n              : of(x),\n          ),\n          filter((x) => x === times),\n          tap(() => {\n            onShowChange();\n            // throw error to end inner timer\n            throw new Error();\n          }),\n          retry(),\n        ),\n      ),\n    [],\n  );\n\n  useSubscription(click$);\n\n  return <div {...rest} ref={hiddenRef} />;\n};\n\n/**\n * that hiddenMagic to show something in viewport,\n */\nexport const HiddenMagic: FunctionComponent<HiddenMagicProps> = ({\n  className,\n  ...rest\n}) => {\n  return (\n    <_HiddenMagic\n      {...rest}\n      className={clsx(className, 'fixed right-0 bottom-0 size-8 z-tooltip')}\n    />\n  );\n};\n"],"mappings":"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","ignoreList":[]}