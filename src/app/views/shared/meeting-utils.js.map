{"version":3,"file":"meeting-utils.js","names":["_constants","require","_utils","_constants2","_i18n","_interopRequireDefault","e","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","ownKeys","r","t","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","i","_toPrimitive","toPrimitive","call","TypeError","String","Number","getTranslateFn","i18n","calculateWhoCanJoinUpdates","currentSettings","whoCanJoinValue","settingLock","undefined","preferences","isOnlyCoworkersJoin","WHO_CAN_JOIN_OPTIONS","ONLY_MY_COWORKERS","isOnlyAuthUserJoin","ONLY_RINGCENTRAL_ACCOUNTS","updates","currentWaitingRoomMode","waitingRoomMode","newWaitingRoomMode","shouldUpdateWaitingRoomMode","WAITING_ROOM_MODE","NOT_COWORKER","waiting_room","waiting_room_guests_only","RCV_WAITING_ROOM_MODE","off","OFF","ALL","GUESTS","shouldUpdateAllowJoinBeforeHost","newAllowJoinBeforeHost","allowJoinBeforeHost","join_before_host","calculateUseWaitingRoomUpdates","use","calculateWaitingRoomParticipantsUpdates","WAITING_ROOM_PARTICIPANTS_OPTIONS","ALL_PARTICIPANTS","FOR_ANYONE_OUTSIDE_MY_COMPANY","FOR_ANYONE_NOT_SIGNED_IN","getWhoCanJoinValue","meeting","ANYONE_WITH_LINK","getWhoCanJoinDisplayText","exports","brandConfig","shortName","getWaitingRoomValue","getWhoCanJoinOptions","brand","label","getWaitingRoomOptions","calculateDisabledStates","genericMeeting","enableWaitingRoom","ready","showE2EE","enableE2EE","isE2eeRelatedOptionsDisabled","Boolean","e2ee","isWaitingRoomDisabled","isUpdating","isJoinBeforeHostDisabled","isWaitingRoomTypeDisabled","isAuthenticatedCanJoinDisabled","isAuthUserTypeDisabled","isRequirePasswordDisabled","isRequirePasswordLocked","isMeetingSecret","isJoinBeforeHostLocked","isWaitingRoomLocked","isAuthUserTypeLocked","createRequirePasswordChangeHandler","getSettings","settings","updatedSettings","updateMeetingSettings","updateHasSettingsChanged","createPasswordChangeHandler","password","meetingPassword","createWhoCanJoinChangeHandler","createUseWaitingRoomChangeHandler","createWaitingRoomParticipantsChangeHandler","createStartMeetingAfterJoinChangeHandler","start"],"sources":["src/app/views/shared/meeting-utils.ts"],"sourcesContent":["import type { RcVPreferencesGET } from '@ringcentral-integration/commons/interfaces/Rcv.model';\nimport { RCV_WAITING_ROOM_MODE } from '@ringcentral-integration/commons/modules/RcVideo/constants';\nimport {\n  BrandConfig,\n  type Brand,\n} from '@ringcentral-integration/micro-core/src/app/services';\nimport { getTranslateFn } from '@ringcentral-integration/utils';\n\nimport { GenericMeeting } from '../../services';\nimport {\n  WAITING_ROOM_MODE,\n  WHO_CAN_JOIN_OPTIONS,\n  WAITING_ROOM_PARTICIPANTS_OPTIONS,\n} from '../GenericMeetingViewSpring/constants';\nimport i18n from '../GenericMeetingViewSpring/i18n';\n\nconst t = getTranslateFn(i18n);\n\n/**\n * Core logic for calculating who can join related updates\n * Returns the updates that should be applied to settings\n */\nexport function calculateWhoCanJoinUpdates(\n  currentSettings: any,\n  whoCanJoinValue: string,\n  settingLock: any = {},\n  preferences: RcVPreferencesGET,\n): Partial<any> {\n  const isOnlyCoworkersJoin =\n    whoCanJoinValue === WHO_CAN_JOIN_OPTIONS.ONLY_MY_COWORKERS;\n  const isOnlyAuthUserJoin =\n    whoCanJoinValue === WHO_CAN_JOIN_OPTIONS.ONLY_RINGCENTRAL_ACCOUNTS ||\n    whoCanJoinValue === WHO_CAN_JOIN_OPTIONS.ONLY_MY_COWORKERS;\n\n  const updates: any = {\n    isOnlyCoworkersJoin,\n    isOnlyAuthUserJoin,\n  };\n\n  /* Handle waiting room mode logic */\n  const currentWaitingRoomMode = currentSettings?.waitingRoomMode;\n  let newWaitingRoomMode = currentWaitingRoomMode;\n  let shouldUpdateWaitingRoomMode = false;\n\n  if (currentWaitingRoomMode === undefined || currentWaitingRoomMode === null) {\n    newWaitingRoomMode = WAITING_ROOM_MODE.NOT_COWORKER;\n    shouldUpdateWaitingRoomMode = true;\n  }\n\n  // If waiting room mode is locked, use preferences value at first\n  if (settingLock.waitingRoomMode) {\n    newWaitingRoomMode =\n      preferences.waiting_room && preferences.waiting_room_guests_only\n        ? RCV_WAITING_ROOM_MODE[preferences.waiting_room_guests_only]\n        : RCV_WAITING_ROOM_MODE.off;\n    shouldUpdateWaitingRoomMode = true;\n  }\n\n  // whoCanJoinValue would affect waiting room mode\n  if (isOnlyCoworkersJoin /* Only my coworkers */) {\n    if (\n      newWaitingRoomMode !== WAITING_ROOM_MODE.OFF &&\n      newWaitingRoomMode !== WAITING_ROOM_MODE.ALL\n    ) {\n      newWaitingRoomMode = WAITING_ROOM_MODE.ALL;\n      shouldUpdateWaitingRoomMode = true;\n    }\n  } else if (isOnlyAuthUserJoin /* Only {brand} accounts */) {\n    if (newWaitingRoomMode === WAITING_ROOM_MODE.GUESTS) {\n      newWaitingRoomMode = WAITING_ROOM_MODE.NOT_COWORKER;\n      shouldUpdateWaitingRoomMode = true;\n    }\n  }\n\n  // Update regardless of lock status (linkage changed)\n  if (shouldUpdateWaitingRoomMode) {\n    updates.waitingRoomMode = newWaitingRoomMode;\n  }\n\n  /* Handle allowJoinBeforeHost logic */\n  let shouldUpdateAllowJoinBeforeHost = false;\n  let newAllowJoinBeforeHost: boolean | undefined;\n\n  // If allowJoinBeforeHost is locked, use preferences value at first\n  if (settingLock.allowJoinBeforeHost) {\n    newAllowJoinBeforeHost = preferences.join_before_host;\n    shouldUpdateAllowJoinBeforeHost = true;\n  }\n\n  // waitingRoomMode would affect allowJoinBeforeHost\n  if (updates.waitingRoomMode === WAITING_ROOM_MODE.ALL) {\n    newAllowJoinBeforeHost = false;\n    shouldUpdateAllowJoinBeforeHost = true;\n  }\n\n  // Update regardless of lock status (linkage changed)\n  if (shouldUpdateAllowJoinBeforeHost) {\n    updates.allowJoinBeforeHost = newAllowJoinBeforeHost;\n  }\n\n  return updates;\n}\n\n/**\n * Core logic for calculating waiting room toggle updates\n * Returns the updates that should be applied to settings\n */\nexport function calculateUseWaitingRoomUpdates(use: boolean): Partial<any> {\n  return {\n    waitingRoomMode: use\n      ? WAITING_ROOM_MODE.NOT_COWORKER\n      : WAITING_ROOM_MODE.OFF,\n  };\n}\n\n/**\n * Core logic for calculating waiting room participants updates\n * Returns the updates that should be applied to settings\n */\nexport function calculateWaitingRoomParticipantsUpdates(\n  value: string,\n  settingLock: any = {},\n  preferences: RcVPreferencesGET,\n): Partial<any> {\n  // Map string values back to numeric waiting room modes\n  let waitingRoomMode: number;\n  switch (value) {\n    case WAITING_ROOM_PARTICIPANTS_OPTIONS.ALL_PARTICIPANTS:\n      waitingRoomMode = WAITING_ROOM_MODE.ALL;\n      break;\n    case WAITING_ROOM_PARTICIPANTS_OPTIONS.FOR_ANYONE_OUTSIDE_MY_COMPANY:\n      waitingRoomMode = WAITING_ROOM_MODE.NOT_COWORKER;\n      break;\n    case WAITING_ROOM_PARTICIPANTS_OPTIONS.FOR_ANYONE_NOT_SIGNED_IN:\n      waitingRoomMode = WAITING_ROOM_MODE.GUESTS;\n      break;\n    default:\n      waitingRoomMode = WAITING_ROOM_MODE.NOT_COWORKER;\n  }\n\n  const updates: any = {\n    waitingRoomMode,\n  };\n\n  /* Handle allowJoinBeforeHost logic */\n  let shouldUpdateAllowJoinBeforeHost = false;\n  let newAllowJoinBeforeHost: boolean | undefined;\n\n  // If allowJoinBeforeHost is locked, use preferences value at first\n  if (settingLock.allowJoinBeforeHost) {\n    newAllowJoinBeforeHost = preferences.join_before_host;\n    shouldUpdateAllowJoinBeforeHost = true;\n  }\n\n  if (waitingRoomMode === WAITING_ROOM_MODE.ALL) {\n    newAllowJoinBeforeHost = false;\n    shouldUpdateAllowJoinBeforeHost = true;\n  }\n\n  // Update regardless of lock status (linkage changed)\n  if (shouldUpdateAllowJoinBeforeHost) {\n    updates.allowJoinBeforeHost = newAllowJoinBeforeHost;\n  }\n\n  return updates;\n}\n\n/**\n * Determines the \"Who can join\" display value based on meeting settings\n */\nexport function getWhoCanJoinValue(meeting: any): string {\n  if ((meeting as any)?.isOnlyCoworkersJoin)\n    return WHO_CAN_JOIN_OPTIONS.ONLY_MY_COWORKERS;\n  if ((meeting as any)?.isOnlyAuthUserJoin)\n    return WHO_CAN_JOIN_OPTIONS.ONLY_RINGCENTRAL_ACCOUNTS;\n  return WHO_CAN_JOIN_OPTIONS.ANYONE_WITH_LINK;\n}\n\nexport const getWhoCanJoinDisplayText = (\n  value: string,\n  brandConfig: BrandConfig,\n) => {\n  const shortName = brandConfig.shortName as string;\n  switch (value) {\n    case WHO_CAN_JOIN_OPTIONS.ANYONE_WITH_LINK:\n      return t('anyoneWithLink');\n    case WHO_CAN_JOIN_OPTIONS.ONLY_MY_COWORKERS:\n      return t('onlyMyCoworkers');\n    case WHO_CAN_JOIN_OPTIONS.ONLY_RINGCENTRAL_ACCOUNTS:\n      return t('onlyRingCentralAccounts', { shortName });\n    default:\n      return value;\n  }\n};\n\n/**\n * Determines the waiting room participants display value based on meeting settings\n * This function only displays the current value, business logic is handled in calculateWhoCanJoinUpdates\n */\nexport function getWaitingRoomValue(meeting: any): string {\n  const waitingRoomMode = (meeting as any)?.waitingRoomMode;\n  const isOnlyCoworkersJoin = (meeting as any)?.isOnlyCoworkersJoin;\n\n  // Map numeric waiting room modes to option values\n  switch (waitingRoomMode) {\n    case WAITING_ROOM_MODE.OFF:\n      return WAITING_ROOM_PARTICIPANTS_OPTIONS.FOR_ANYONE_OUTSIDE_MY_COMPANY;\n    case WAITING_ROOM_MODE.ALL:\n      return WAITING_ROOM_PARTICIPANTS_OPTIONS.ALL_PARTICIPANTS;\n    case WAITING_ROOM_MODE.GUESTS:\n      // If \"Only my coworkers\" is selected, \"Anyone not signed in\" is not available\n      // So we should return a valid option instead\n      if (isOnlyCoworkersJoin) {\n        return WAITING_ROOM_PARTICIPANTS_OPTIONS.ALL_PARTICIPANTS;\n      }\n      return WAITING_ROOM_PARTICIPANTS_OPTIONS.FOR_ANYONE_NOT_SIGNED_IN;\n    case WAITING_ROOM_MODE.NOT_COWORKER: // notcoworker - only people outside company go to waiting room\n      return WAITING_ROOM_PARTICIPANTS_OPTIONS.FOR_ANYONE_OUTSIDE_MY_COMPANY;\n    default:\n      if (isOnlyCoworkersJoin) {\n        return WAITING_ROOM_PARTICIPANTS_OPTIONS.ALL_PARTICIPANTS;\n      }\n      return WAITING_ROOM_PARTICIPANTS_OPTIONS.FOR_ANYONE_OUTSIDE_MY_COMPANY;\n  }\n}\n\n/**\n * Returns the standard set of \"Who can join\" options for dropdowns\n */\nexport function getWhoCanJoinOptions(brand: Brand) {\n  const shortName = brand.brandConfig.shortName as string;\n  return [\n    {\n      label: t('anyoneWithLink'),\n      value: WHO_CAN_JOIN_OPTIONS.ANYONE_WITH_LINK,\n    },\n    {\n      label: t('onlyRingCentralAccounts', { shortName }),\n      value: WHO_CAN_JOIN_OPTIONS.ONLY_RINGCENTRAL_ACCOUNTS,\n    },\n    {\n      label: t('onlyMyCoworkers'),\n      value: WHO_CAN_JOIN_OPTIONS.ONLY_MY_COWORKERS,\n    },\n  ];\n}\n\n/**\n * Returns appropriate waiting room options based on meeting settings\n */\nexport function getWaitingRoomOptions(meeting: any) {\n  const isOnlyCoworkersJoin = (meeting as any)?.isOnlyCoworkersJoin;\n  const isOnlyAuthUserJoin = (meeting as any)?.isOnlyAuthUserJoin;\n\n  // When \"Only my coworkers\" is selected, only show \"For all participants\" and \"Off\"\n  if (isOnlyCoworkersJoin) {\n    return [\n      {\n        label: t('allParticipants'),\n        value: WAITING_ROOM_PARTICIPANTS_OPTIONS.ALL_PARTICIPANTS,\n      },\n    ];\n  }\n\n  // When \"Only RingCentral accounts\" is selected, \"For anyone not signed in\" is not available\n  if (isOnlyAuthUserJoin) {\n    return [\n      {\n        label: t('allParticipants'),\n        value: WAITING_ROOM_PARTICIPANTS_OPTIONS.ALL_PARTICIPANTS,\n      },\n      {\n        label: t('forAnyoneOutsideMyCompany'),\n        value: WAITING_ROOM_PARTICIPANTS_OPTIONS.FOR_ANYONE_OUTSIDE_MY_COMPANY,\n      },\n    ];\n  }\n\n  // Default options for \"Anyone with link\"\n  return [\n    {\n      label: t('allParticipants'),\n      value: WAITING_ROOM_PARTICIPANTS_OPTIONS.ALL_PARTICIPANTS,\n    },\n    {\n      label: t('forAnyoneOutsideMyCompany'),\n      value: WAITING_ROOM_PARTICIPANTS_OPTIONS.FOR_ANYONE_OUTSIDE_MY_COMPANY,\n    },\n    {\n      label: t('forAnyoneNotSignedIn'),\n      value: WAITING_ROOM_PARTICIPANTS_OPTIONS.FOR_ANYONE_NOT_SIGNED_IN,\n    },\n  ];\n}\n\n/**\n * Calculate disabled states for UI components\n */\nexport function calculateDisabledStates(\n  genericMeeting: GenericMeeting,\n  meeting: any,\n) {\n  // Calculate disabled states based on dependencies\n  const waitingRoomMode = (meeting as any)?.waitingRoomMode;\n  const enableWaitingRoom =\n    genericMeeting.ready && genericMeeting.enableWaitingRoom;\n  const showE2EE = genericMeeting.ready && genericMeeting.enableE2EE;\n  const isE2eeRelatedOptionsDisabled =\n    showE2EE && Boolean((meeting as any)?.e2ee);\n  const isWaitingRoomDisabled =\n    genericMeeting.isUpdating || isE2eeRelatedOptionsDisabled;\n  const settingLock = (meeting as any)?.settingLock || {};\n\n  return {\n    // Join before host is disabled when waiting room is set to \"all\" (mode 1)\n    isJoinBeforeHostDisabled:\n      genericMeeting.isUpdating ||\n      (enableWaitingRoom && waitingRoomMode === WAITING_ROOM_MODE.ALL),\n\n    // Waiting room is disabled when E2EE is enabled and active\n    isWaitingRoomDisabled: isWaitingRoomDisabled,\n\n    // Waiting room type dropdown is disabled when general disabled or waiting room disabled\n    isWaitingRoomTypeDisabled:\n      genericMeeting.isUpdating || isWaitingRoomDisabled,\n\n    // \"Who can join\" options are disabled when E2EE is enabled and active\n    isAuthenticatedCanJoinDisabled:\n      genericMeeting.isUpdating || isE2eeRelatedOptionsDisabled,\n\n    // \"Who can join\" dropdown is disabled when general disabled or authenticated can join disabled\n    isAuthUserTypeDisabled:\n      genericMeeting.isUpdating || isE2eeRelatedOptionsDisabled,\n\n    // Require password is disabled when E2EE is enabled and active\n    isRequirePasswordDisabled:\n      genericMeeting.isUpdating || isE2eeRelatedOptionsDisabled,\n\n    // Locked states from admin settings\n    isRequirePasswordLocked: Boolean(settingLock.isMeetingSecret),\n    isJoinBeforeHostLocked: Boolean(settingLock.allowJoinBeforeHost),\n    isWaitingRoomLocked: Boolean(settingLock.waitingRoomMode),\n    isAuthUserTypeLocked: Boolean(settingLock.isOnlyAuthUserJoin),\n  };\n}\n\n/**\n * Creates a handler for requiring password changes\n */\nexport function createRequirePasswordChangeHandler(\n  genericMeeting: GenericMeeting,\n  getSettings: () => any,\n) {\n  return (require: boolean) => {\n    // Get current settings at the time of the update\n    const settings = getSettings();\n    const settingLock = settings?.settingLock || {};\n\n    // If isMeetingSecret is locked, don't allow changes\n    if (settingLock.isMeetingSecret) {\n      return;\n    }\n\n    const updatedSettings = {\n      ...settings,\n      isMeetingSecret: require,\n    };\n\n    genericMeeting.updateMeetingSettings(updatedSettings);\n\n    genericMeeting.updateHasSettingsChanged(true);\n  };\n}\n\n/**\n * Creates a handler for password changes\n */\nexport function createPasswordChangeHandler(\n  genericMeeting: GenericMeeting,\n  getSettings: () => any,\n) {\n  return (password: string) => {\n    const settings = getSettings();\n\n    const updatedSettings = {\n      ...settings,\n      meetingPassword: password,\n    };\n\n    genericMeeting.updateMeetingSettings(updatedSettings);\n\n    genericMeeting.updateHasSettingsChanged(true);\n  };\n}\n\n/**\n * Creates a handler for \"who can join\" changes\n */\nexport function createWhoCanJoinChangeHandler(\n  genericMeeting: GenericMeeting,\n  getSettings: () => any,\n) {\n  return (value: string) => {\n    // Get current settings at the time of the update\n    const settings = getSettings();\n    const settingLock = settings?.settingLock || {};\n\n    // Use the core logic to calculate updates\n    const updates = calculateWhoCanJoinUpdates(\n      settings,\n      value,\n      settingLock,\n      genericMeeting.preferences,\n    );\n\n    const updatedSettings = {\n      ...settings,\n      ...updates,\n    };\n\n    genericMeeting.updateMeetingSettings(updatedSettings);\n\n    genericMeeting.updateHasSettingsChanged(true);\n  };\n}\n\n/**\n * Creates a handler for waiting room toggle\n */\nexport function createUseWaitingRoomChangeHandler(\n  genericMeeting: GenericMeeting,\n  getSettings: () => any,\n) {\n  return (use: boolean) => {\n    // Get current settings at the time of the update\n    const settings = getSettings();\n    const settingLock = settings?.settingLock || {};\n\n    // If waitingRoomMode is locked, don't allow changes\n    if (settingLock.waitingRoomMode) {\n      return;\n    }\n\n    // Use the core logic to calculate updates\n    const updates = calculateUseWaitingRoomUpdates(use);\n\n    const updatedSettings = {\n      ...settings,\n      ...updates,\n    };\n\n    genericMeeting.updateMeetingSettings(updatedSettings);\n\n    genericMeeting.updateHasSettingsChanged(true);\n  };\n}\n\n/**\n * Creates a handler for waiting room participants changes\n */\nexport function createWaitingRoomParticipantsChangeHandler(\n  genericMeeting: GenericMeeting,\n  getSettings: () => any,\n) {\n  return (value: string) => {\n    // Get current settings at the time of the update\n    const settings = getSettings();\n    const settingLock = settings?.settingLock || {};\n\n    // If waitingRoomMode is locked, don't allow changes\n    if (settingLock.waitingRoomMode) {\n      return;\n    }\n\n    // Use the core logic to calculate updates\n    const updates = calculateWaitingRoomParticipantsUpdates(\n      value,\n      settingLock,\n      genericMeeting.preferences,\n    );\n\n    const updatedSettings = {\n      ...settings,\n      ...updates,\n    };\n\n    genericMeeting.updateMeetingSettings(updatedSettings);\n\n    genericMeeting.updateHasSettingsChanged(true);\n  };\n}\n\n/**\n * Creates a handler for \"start meeting after join\" changes\n */\nexport function createStartMeetingAfterJoinChangeHandler(\n  genericMeeting: GenericMeeting,\n  getSettings: () => any,\n) {\n  return (start: boolean) => {\n    // Get current settings at the time of the update\n    const settings = getSettings();\n    const settingLock = settings?.settingLock || {};\n\n    // If allowJoinBeforeHost is locked, don't allow changes\n    if (settingLock.allowJoinBeforeHost) {\n      return;\n    }\n\n    const currentWaitingRoomMode = settings?.waitingRoomMode;\n\n    // If waiting room is set to \"all\" (mode 1), don't allow enabling join before host\n    if (currentWaitingRoomMode === WAITING_ROOM_MODE.ALL && !start) {\n      // Cannot enable join before host when waiting room is \"all\"\n      return;\n    }\n\n    const updatedSettings = {\n      ...settings,\n      allowJoinBeforeHost: !start,\n    };\n\n    genericMeeting.updateMeetingSettings(updatedSettings);\n\n    genericMeeting.updateHasSettingsChanged(true);\n  };\n}\n"],"mappings":"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","ignoreList":[]}