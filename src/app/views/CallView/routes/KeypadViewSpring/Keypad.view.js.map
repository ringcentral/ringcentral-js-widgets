{"version":3,"file":"Keypad.view.js","names":["_nextCore","require","_react","_interopRequireWildcard","_services","_services2","_KeypadPanel","_dec","_dec2","_dec3","_dec4","_dec5","_class","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","value","configurable","writable","_classCallCheck","a","TypeError","_defineProperties","key","_createClass","prototype","_toPrimitive","Symbol","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","_inherits","create","_setPrototypeOf","KeypadView","exports","injectable","name","target","optional","undefined","metadata","Function","CallAction","Root","Call","CallViewState","AudioSettings","KeypadViewOptions","_RcViewModule","_callAction","_root","_call","_callViewState","_audioSettings","_keypadViewOptions","_this","getUIProps","_ref","_this$_audioSettings$","_this$_audioSettings","_this$_audioSettings$2","_this$_audioSettings2","actionsDisabled","state","getCallViewState","telephonySessionId","expanded","toNumber","keypadToNumber","callVolume","outputDeviceId","actionButtonDisabled","isIdle","getUIFunctions","_ref2","_this2","toggleExpanded","onToNumberChange","val","setCallViewState","onAction","handlers","createActionsHandler","onExpand","component","props","_this3","_this$_keypadViewOpti","_useRef","useRef","uiFunctions","current","_props","useConnector","uiProps","Component","KeypadPage","createElement","RcViewModule"],"sources":["src/app/views/CallView/routes/KeypadViewSpring/Keypad.view.tsx"],"sourcesContent":["import {\n  injectable,\n  optional,\n  RcViewModule,\n  Root,\n  type UIFunctions,\n  type UIProps,\n  useConnector,\n} from '@ringcentral-integration/next-core';\nimport React, { useRef } from 'react';\n\nimport { AudioSettings, Call, CallAction } from '../../../../services';\nimport { CallViewState } from '../../services';\n\nimport type {\n  KeypadViewOptions,\n  KeypadViewPanelProps,\n  KeypadViewProps,\n} from './Keypad.view.interface';\nimport { KeypadPage } from './KeypadPanel';\n\n@injectable({\n  name: 'KeypadView',\n})\nexport class KeypadView extends RcViewModule {\n  constructor(\n    private _callAction: CallAction,\n    private _root: Root,\n    private _call: Call,\n    private _callViewState: CallViewState,\n    @optional() private _audioSettings?: AudioSettings,\n    @optional('KeypadViewOptions')\n    private _keypadViewOptions?: KeypadViewOptions,\n  ) {\n    super();\n  }\n\n  getUIProps({\n    call,\n    actionsDisabled,\n  }: KeypadViewProps): UIProps<KeypadViewPanelProps> {\n    const state = this._callViewState.getCallViewState(\n      call.telephonySessionId!,\n    );\n    return {\n      call,\n      expanded: this._root.expanded,\n      toNumber: state.keypadToNumber,\n      callVolume: this._audioSettings?.callVolume ?? 1,\n      outputDeviceId: this._audioSettings?.outputDeviceId ?? '',\n      actionButtonDisabled: actionsDisabled || !this._call.isIdle,\n    };\n  }\n\n  getUIFunctions({ call }: KeypadViewProps): UIFunctions<KeypadViewPanelProps> {\n    const telephonySessionId = call.telephonySessionId!;\n    const toggleExpanded = this._callAction.toggleExpanded;\n\n    return {\n      onToNumberChange: (val: string) =>\n        this._callViewState.setCallViewState(telephonySessionId, {\n          keypadToNumber: val,\n        }),\n      onAction: (...args) => {\n        const handlers =\n          this._callAction.createActionsHandler(telephonySessionId);\n        return handlers(...args);\n      },\n      onExpand: toggleExpanded\n        ? () => toggleExpanded(telephonySessionId)\n        : undefined,\n    };\n  }\n\n  component(props: KeypadViewProps) {\n    const { current: uiFunctions } = useRef(this.getUIFunctions(props));\n\n    const _props = useConnector(() => {\n      const uiProps = this.getUIProps(props);\n\n      return {\n        ...props,\n        ...uiProps,\n      };\n    });\n\n    const Component = this._keypadViewOptions?.component || KeypadPage;\n\n    return <Component {..._props} {...uiFunctions} />;\n  }\n}\n"],"mappings":"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","ignoreList":[]}