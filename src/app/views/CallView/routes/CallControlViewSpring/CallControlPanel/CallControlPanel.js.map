{"version":3,"file":"CallControlPanel.js","names":["_components","require","_springUi","_react","_interopRequireWildcard","_hooks","_AiNoteTip","_CallCtrlButton","_TransferringCall","_useCallControlLayout","_excluded","_excluded2","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","CallControlPanel","exports","props","flipNumbers","actions","transferringCalls","onAction","AudioCard","AudioCardComponent","isConferenceCall","Boolean","callActions","useCallActionButtons","renderActions","useMemo","slice","actionButtons","createElement","className","map","_ref","actionType","iconSize","size","rest","CallCtrlButton","key","menuPlacement","undefined","menuList","MenuList","onChange","value","item","index","Option","flipNumber","MenuItemText","label","FormattedPhoneNumber","phoneNumber","process","env","NODE_ENV","b","join","Component","TransferringCall","NormalCallControlPanel","_ref2","expanded","onExpand","aiNoteTipType","viewAiNote","onCloseAiNoteTip","children","hungUpActionProps","Error","aiNoteTip","AiNoteTip","onView","lastActionType","end","useCallControlLayout","main","footer","CallButton","variant","TooltipProps","title","tooltip","onBack","onConferenceClick"],"sources":["src/app/views/CallView/routes/CallControlViewSpring/CallControlPanel/CallControlPanel.tsx"],"sourcesContent":["import { FormattedPhoneNumber } from '@ringcentral-integration/micro-auth/src/app/components';\nimport {\n  CallButton,\n  MenuItemText,\n  MenuList,\n  Option,\n} from '@ringcentral/spring-ui';\nimport React, { type FC, useMemo } from 'react';\n\nimport { useCallActionButtons } from '../../../../../hooks';\nimport { CallControlViewPanelProps } from '../CallControl.view.interface';\n\nimport { AiNoteTip } from './AiNoteTip';\nimport { CallCtrlButton } from './CallCtrlButton';\nimport { TransferringCall } from './TransferringCall';\nimport { useCallControlLayout } from './useCallControlLayout';\n\nexport const CallControlPanel: React.FC<CallControlViewPanelProps> = (\n  props,\n) => {\n  const {\n    flipNumbers,\n    actions,\n    call,\n    transferringCalls,\n    onAction,\n    AudioCardComponent: AudioCard,\n  } = props;\n  const isConferenceCall = Boolean(call.isConferenceCall);\n  const callActions = useCallActionButtons(actions, onAction, {\n    isConferenceCall,\n  });\n\n  const renderActions = useMemo(() => callActions.slice(0, -1), [callActions]);\n\n  const actionButtons = useMemo(\n    () => (\n      <div\n        className=\"flex flex-wrap gap-4 justify-center px-10\"\n        data-sign=\"actionButtons\"\n      >\n        {renderActions.map(\n          ({\n            actionType,\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            iconSize,\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            size,\n            ...rest\n          }) => {\n            return (\n              <CallCtrlButton\n                key={actionType}\n                menuPlacement={actionType === 'audio' ? 'right' : undefined}\n                menuList={\n                  actionType === 'flip' ? (\n                    <MenuList\n                      onChange={(value: string) => onAction('flip', value)}\n                    >\n                      {flipNumbers.map((item, index) => (\n                        <Option key={index} value={item.flipNumber}>\n                          <MenuItemText>\n                            <div className=\"text-neutral-b1\">{item.label}</div>\n                            <div className=\"text-neutral-b2\">\n                              <FormattedPhoneNumber\n                                phoneNumber={item.phoneNumber}\n                              />\n                            </div>\n                          </MenuItemText>\n                        </Option>\n                      ))}\n                    </MenuList>\n                  ) : actionType === 'audio' ? (\n                    AudioCard\n                  ) : undefined\n                }\n                data-sign={actionType}\n                {...rest}\n                value=\"\"\n              />\n            );\n          },\n        )}\n        {process.env.NODE_ENV === 'test' && (\n          <span data-sign=\"actionTypes\">\n            {renderActions.map((b) => b.actionType).join(',')}\n          </span>\n        )}\n      </div>\n    ),\n    [flipNumbers, onAction, renderActions, AudioCard],\n  );\n\n  const Component = transferringCalls\n    ? TransferringCall\n    : NormalCallControlPanel;\n\n  return <Component {...props}>{actionButtons}</Component>;\n};\n\nconst NormalCallControlPanel: FC<CallControlViewPanelProps> = ({\n  actions,\n  call,\n  expanded,\n  onAction,\n  onExpand,\n  aiNoteTipType,\n  viewAiNote,\n  onCloseAiNoteTip,\n  children,\n}) => {\n  const isConferenceCall = Boolean(call.isConferenceCall);\n  const callActions = useCallActionButtons(actions, onAction, {\n    isConferenceCall,\n  });\n  const hungUpActionProps = useMemo(\n    () => callActions[callActions.length - 1],\n    [callActions],\n  );\n\n  if (\n    process.env.NODE_ENV !== 'production' &&\n    (!hungUpActionProps || hungUpActionProps.actionType !== 'hangUp')\n  ) {\n    throw new Error(\n      'The last action should be hangUp, you may have a bug, please check the CallControl.view',\n    );\n  }\n\n  const aiNoteTip = aiNoteTipType ? (\n    <AiNoteTip\n      aiNoteTipType={aiNoteTipType}\n      onView={viewAiNote}\n      onCloseAiNoteTip={onCloseAiNoteTip}\n    />\n  ) : undefined;\n\n  const {\n    // just omit the actionType from the end\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    actionType: lastActionType,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    label,\n    ...end\n  } = hungUpActionProps;\n\n  return useCallControlLayout(call, {\n    main: children,\n    footer: (\n      <CallButton\n        {...end}\n        variant=\"end\"\n        TooltipProps={{ title: end.tooltip }}\n        size=\"medium\"\n        data-sign=\"hangUp\"\n      />\n    ),\n    onBack: () => {\n      onAction('back');\n    },\n    onConferenceClick: () => {\n      onAction('viewConferenceList');\n    },\n    aiNoteTip,\n    expanded,\n    onExpand,\n  });\n};\n"],"mappings":"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","ignoreList":[]}