{"version":3,"file":"useCallControlLayout.js","names":["_hooks","require","_components","_springIcon","_springUi","_react","_interopRequireDefault","_components2","_hooks2","_i18n","_services","_i18n2","e","__esModule","useCallControlLayout","exports","call","_ref","_call$conferenceParti","main","expanded","onExpand","footer","onBack","onConferenceClick","aiNoteTip","_useContactRenderInfo","useContactRenderInfoFromCall","phoneNumberDisplayMode","hideBlockedFromInfo","DisplayName","displayPhoneNumber","Avatar","duration","myCallerId","callQueueName","direction","OnOtherDevice","_useLocale","useLocale","i18n","contactRenderI18n","t","connecting","isPreinsertCall","conferenceParticipantsCount","conferenceParticipants","length","isInbound","displayName","createElement","displayControl","maybe","viewable","matchCounts","Fragment","className","ExpandLogButton","PageHeaderBackButton","onClick","size","isConferenceCall","Tooltip","title","concat","IconButton","color","Icon","symbol","TeamMd"],"sources":["src/app/views/CallView/routes/CallControlViewSpring/CallControlPanel/useCallControlLayout.tsx"],"sourcesContent":["import { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport { PageHeaderBackButton } from '@ringcentral-integration/next-widgets/components';\nimport { TeamMd } from '@ringcentral/spring-icon';\nimport { Icon, IconButton, Tooltip } from '@ringcentral/spring-ui';\nimport React from 'react';\n\nimport { ExpandLogButton } from '../../../../../components';\nimport { useContactRenderInfoFromCall } from '../../../../../hooks';\nimport contactRenderI18n from '../../../../../hooks/useContactRenderInfo/i18n';\nimport { isPreinsertCall } from '../../../../../services';\nimport { CallControlViewPanelProps } from '../CallControl.view.interface';\n\nimport i18n from './i18n';\n\nexport const useCallControlLayout = (\n  call: CallControlViewPanelProps['call'],\n  {\n    main,\n    expanded,\n    onExpand,\n    footer,\n    onBack,\n    onConferenceClick,\n    aiNoteTip,\n  }: {\n    main: React.ReactNode;\n    footer: React.ReactNode;\n    aiNoteTip?: React.ReactNode;\n    onBack: () => void;\n    onConferenceClick: () => void;\n  } & Pick<CallControlViewPanelProps, 'expanded' | 'onExpand'>,\n) => {\n  const {\n    DisplayName,\n    displayPhoneNumber,\n    Avatar,\n    duration,\n    myCallerId,\n    callQueueName,\n    direction,\n    OnOtherDevice,\n  } = useContactRenderInfoFromCall(call, {\n    phoneNumberDisplayMode: 'unknown',\n    hideBlockedFromInfo: true,\n  });\n  const { t } = useLocale(i18n, contactRenderI18n);\n  const connecting = isPreinsertCall(call);\n\n  const conferenceParticipantsCount = call.conferenceParticipants?.length;\n  const isInbound = direction === 'Inbound';\n\n  const displayName = (\n    <DisplayName\n      displayControl={{\n        maybe: true,\n        viewable: true,\n        matchCounts: true,\n      }}\n    />\n  );\n\n  return (\n    <>\n      <div className=\"h-5 flex items-center ml-4 mr-3 mt-3\">\n        {connecting ? t('connecting') : duration}\n        <i className=\"flex-auto\" />\n        {onExpand && typeof expanded === 'boolean' ? (\n          <ExpandLogButton expanded={expanded} onExpand={onExpand} />\n        ) : null}\n      </div>\n\n      <div\n        data-sign=\"activeCallPanel\"\n        className=\"flex-auto flex flex-col gap-8\"\n      >\n        <div\n          data-sign=\"call-information\"\n          className=\"w-full py-2 pl-2 pr-4 flex\"\n        >\n          <PageHeaderBackButton onClick={onBack} />\n          <Avatar size=\"large\" />\n\n          <div className=\"flex-auto ml-2 w-1\">\n            {call.isConferenceCall ? (\n              <>\n                <h3\n                  className=\"truncate text-neutral-b0 typography-title w-full flex flex-col\"\n                  data-sign=\"userDisplayName\"\n                >\n                  {displayName}\n                </h3>\n                <p\n                  className=\"typography-descriptorMini text-neutral-b2 mt-1\"\n                  data-sign=\"userPhoneNumber\"\n                >\n                  {t('conferenceCall')}\n                </p>\n                {OnOtherDevice && <OnOtherDevice />}\n                <div className=\"mt-2\">\n                  <Tooltip\n                    title={`${t(\n                      'participants',\n                    )} (${conferenceParticipantsCount})`}\n                  >\n                    <IconButton\n                      data-sign=\"conferenceCallParticipantsIcon\"\n                      size=\"xsmall\"\n                      color=\"secondary\"\n                      className=\"flex flex-row p-1 size-auto typography-descriptor px-2 gap-1.5 h-6\"\n                      onClick={onConferenceClick}\n                    >\n                      <Icon size=\"xsmall\" symbol={TeamMd} />\n                      <span>{conferenceParticipantsCount}</span>\n                    </IconButton>\n                  </Tooltip>\n                </div>\n              </>\n            ) : (\n              <>\n                <h3\n                  className=\"typography-title text-neutral-b0 truncate w-full flex flex-col\"\n                  data-sign=\"userDisplayName\"\n                >\n                  {displayName}\n                </h3>\n                {displayPhoneNumber && (\n                  <p\n                    className=\"typography-descriptorMini text-neutral-b0\"\n                    data-sign=\"userPhoneNumber\"\n                  >\n                    {displayPhoneNumber}\n                  </p>\n                )}\n                {OnOtherDevice && <OnOtherDevice />}\n                {!callQueueName && myCallerId && (\n                  <p\n                    className=\"typography-descriptorMini text-neutral-b2\"\n                    data-sign=\"userCallerId\"\n                  >\n                    {t(isInbound ? 'to' : 'myCallerId')}: {myCallerId}\n                  </p>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n\n        <div className=\"flex flex-col items-center\">{main}</div>\n\n        <div className=\"flex justify-center items-center relative -mt-2\">\n          {footer}\n        </div>\n\n        {aiNoteTip && <div className=\"relative mx-3 mb-3\">{aiNoteTip}</div>}\n      </div>\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]}