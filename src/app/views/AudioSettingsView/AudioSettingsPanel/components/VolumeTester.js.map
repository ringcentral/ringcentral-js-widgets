{"version":3,"file":"VolumeTester.js","names":["_VolumeInspector","require","_springUi","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_i18n","_VolumeGauge","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","VolumeTester","exports","props","type","audioType","handleButtonClick","_props$gaugeSize","gaugeSize","volume","testState","countDown","isRecording","disabled","isInactive","useMemo","convertVolumeForGauge","Math","floor","buttonText","defaultText","TEST_TYPE","microphone","TEST_STATE","RECORDS_AUDIO","PLAYS_AUDIO","hintText","createElement","className","Text","concat","clsx","component","Button","size","variant","onClick","VolumeGauge"],"sources":["src/app/views/AudioSettingsView/AudioSettingsPanel/components/VolumeTester.tsx"],"sourcesContent":["import {\n  AUDIO_TYPE,\n  TEST_STATE,\n  TEST_TYPE,\n} from '@ringcentral-integration/micro-phone/src/app/services/VolumeInspector';\nimport { Text, Button } from '@ringcentral/spring-ui';\nimport clsx from 'clsx';\nimport React, { useMemo } from 'react';\n\nimport { t } from '../i18n';\n\nimport { VolumeGauge } from './VolumeGauge';\n\ntype VolumeTesterProps = {\n  type: AUDIO_TYPE | null;\n  audioType: AUDIO_TYPE;\n  volume: number;\n  testState: number;\n  gaugeSize?: number;\n  handleButtonClick: (...args: any[]) => any;\n  isRecording?: boolean;\n  countDown?: number;\n  disabled?: boolean;\n};\n\nexport const VolumeTester = (props: VolumeTesterProps) => {\n  const {\n    type,\n    audioType,\n    handleButtonClick,\n    gaugeSize = 16,\n    volume,\n    testState,\n    countDown,\n    isRecording,\n    disabled,\n  } = props;\n\n  const isInactive = useMemo(() => {\n    return type && audioType !== type;\n  }, [audioType, type]);\n\n  const convertVolumeForGauge = useMemo(() => {\n    if (isInactive) {\n      return 0;\n    }\n    return Math.floor(gaugeSize * volume) * (100 / gaugeSize);\n  }, [gaugeSize, volume, isInactive]);\n\n  const buttonText = useMemo(() => {\n    const defaultText = t(\n      audioType === TEST_TYPE.microphone\n        ? 'startRecordButton'\n        : 'startTestButton',\n    );\n    if (isInactive) {\n      return defaultText;\n    }\n    switch (testState) {\n      case TEST_STATE.RECORDS_AUDIO:\n        return t('stopRecordButton');\n      case TEST_STATE.PLAYS_AUDIO:\n        return t('stopPlaybackButton');\n      default:\n        return defaultText;\n    }\n  }, [testState, audioType, isInactive]);\n\n  const hintText = useMemo(() => {\n    if (isInactive) {\n      return null;\n    }\n    if (testState === TEST_STATE.RECORDS_AUDIO && countDown) {\n      return t('stopRecordDescription', {\n        countDown,\n      });\n    }\n    if (testState === TEST_STATE.PLAYS_AUDIO) {\n      return t(\n        audioType === TEST_TYPE.microphone\n          ? 'stopPlaybackDescription'\n          : 'stopTestDescription',\n      );\n    }\n    return null;\n  }, [countDown, testState, audioType, isInactive]);\n\n  return (\n    <div className=\"flex flex-col gap-4 mb-4\">\n      {hintText ? (\n        <Text\n          data-sign={`test-${audioType}-hint`}\n          className={clsx(\n            'text-xs block',\n            isRecording ? 'text-danger' : 'text-success',\n          )}\n          component=\"p\"\n        >\n          {hintText}\n        </Text>\n      ) : null}\n      <div>\n        <Button\n          size=\"small\"\n          variant=\"outlined\"\n          data-sign={`test-${audioType}-button`}\n          disabled={isInactive || disabled}\n          onClick={handleButtonClick}\n        >\n          {buttonText}\n        </Button>\n      </div>\n      <VolumeGauge\n        data-sign={`test-${audioType}-volume-gauge`}\n        volume={convertVolumeForGauge}\n        size={gaugeSize}\n        isRecording={isRecording}\n      />\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}