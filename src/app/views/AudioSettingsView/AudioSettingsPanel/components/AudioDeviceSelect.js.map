{"version":3,"file":"AudioDeviceSelect.js","names":["_springUi","require","_react","_interopRequireDefault","_i18n","_excluded","_excluded2","e","__esModule","_extends","Object","assign","bind","n","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutProperties","o","i","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","SelectDevice","exports","_ref","children","label","props","createElement","className","Text","component","Select","size","classes","content","getFallbackLabel","device","fallbackLabel","deviceId","concat","slice","getDeviceOptionRenderer","AudioDeviceSelect","_ref2","_ref2$availableDevice","availableDevices","onChange","isDisabled","rest","allDevicesAreEmpty","every","item","value","disabled","renderValue","Option","key","ListItemText","primary","target","id","selected","find","option","render","title","map"],"sources":["src/app/views/AudioSettingsView/AudioSettingsPanel/components/AudioDeviceSelect.tsx"],"sourcesContent":["/* eslint-disable react/destructuring-assignment */\nimport { type OmitFunctions } from '@ringcentral-integration/utils/src/typeFunctions/OmitFunctions';\nimport {\n  Select,\n  Option,\n  ListItemText,\n  type SelectProps,\n  Text,\n} from '@ringcentral/spring-ui';\nimport React from 'react';\nimport type { FC } from 'react';\n\nimport { t } from '../i18n';\n\nexport const SelectDevice = ({ children, label, ...props }: SelectProps) => (\n  <div className=\"mb-4\">\n    <Text component=\"p\" className=\"typography-mainText text-neutral-b0 mb-2\">\n      {label}\n    </Text>\n    <Select\n      size=\"medium\"\n      classes={{\n        content: 'border-none',\n      }}\n      className=\"w-full [&_.sui-form-field-focus-effect]:border-none\"\n      {...props}\n    >\n      {children}\n    </Select>\n  </div>\n);\n\nexport const getFallbackLabel = (device: OmitFunctions<MediaDeviceInfo>) => {\n  const fallbackLabel = t('noLabel');\n  const deviceId = device.deviceId ? `(${device.deviceId.slice(-4)})` : '';\n  return `${fallbackLabel}${deviceId}`;\n};\n\nexport const getDeviceOptionRenderer = (\n  device: OmitFunctions<MediaDeviceInfo>,\n) => {\n  let label;\n  if (device && device.label) {\n    label = device.label;\n  } else if (device && device.deviceId === 'off') {\n    label = t('off');\n  } else {\n    label = getFallbackLabel(device);\n  }\n  return label;\n};\n\nexport const AudioDeviceSelect: FC<{\n  availableDevices: OmitFunctions<MediaDeviceInfo>[];\n  isDisabled?: boolean;\n  deviceId: string;\n  onChange: (deviceId: string) => void;\n  label: string;\n}> = ({\n  availableDevices = [],\n  onChange,\n  isDisabled,\n  deviceId,\n  label,\n  ...rest\n}) => {\n  const allDevicesAreEmpty = availableDevices.every(\n    (item) =>\n      (item.label === '' && item.deviceId === '') ||\n      (item.label === '' && item.deviceId === 'off'),\n  );\n\n  if (!availableDevices.length || allDevicesAreEmpty) {\n    return (\n      <SelectDevice\n        label={label}\n        value=\"default\"\n        disabled\n        renderValue={() => t('noDevices')}\n        {...rest}\n      >\n        <Option value=\"default\" key=\"default\">\n          <ListItemText primary={t('noDevices')} />\n        </Option>\n      </SelectDevice>\n    );\n  }\n\n  return (\n    <SelectDevice\n      {...rest}\n      value={deviceId}\n      onChange={(e) => {\n        const deviceId = e.target.value;\n        onChange(deviceId as string);\n      }}\n      renderValue={(id) => {\n        const selected = availableDevices.find(\n          (option) => option.deviceId === id,\n        );\n        if (!selected) return '';\n\n        const render = getDeviceOptionRenderer(selected);\n        return (\n          <span\n            title={render}\n            className=\"text-neutral-b2 typography-descriptor\"\n          >\n            {render}\n          </span>\n        );\n      }}\n      disabled={isDisabled}\n      label={label}\n    >\n      {availableDevices.map((device) => {\n        const render = getDeviceOptionRenderer(device);\n        return (\n          <Option key={device.deviceId} value={device.deviceId}>\n            <ListItemText title={render} primary={render} />\n          </Option>\n        );\n      })}\n    </SelectDevice>\n  );\n};\n"],"mappings":"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","ignoreList":[]}