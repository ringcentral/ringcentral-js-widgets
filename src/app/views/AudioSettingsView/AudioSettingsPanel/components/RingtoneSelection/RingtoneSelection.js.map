{"version":3,"file":"RingtoneSelection.js","names":["_RingtoneConfiguration","require","_hooks","_springIcon","_springUi","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_RemoveRingtoneDialog","_RingtoneUploadButton","_i18n","_styles","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_regenerator","Symbol","iterator","toStringTag","c","prototype","Generator","u","create","_regeneratorDefine2","p","y","G","v","a","d","bind","length","l","TypeError","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","displayName","w","m","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","next","push","isArray","RingtoneSelection","exports","_ref","label","volume","isDisabled","ringtoneList","ringtoneDeviceId","selectedRingtoneId","enableCustomRingtone","isUploadRingtoneDisabled","updateCurrentRingtone","uploadCustomRingtone","removeCustomRingtone","showAlert","_useLocale","useLocale","i18n","_useState","useState","_useState2","playing","setPlaying","_useState3","_useState4","playingId","setPlayingId","ref","useRef","_useState5","_useState6","audioUrl","setAudioUrl","inputElRef","_useState7","id","_useState8","ringtonePlanToRemoved","setRingtonePlanToRemoved","audio","useAudio","resetPlaying","onplay","onpause","onended","onerror","undefined","src","_audio$setSinkId","setSinkId","turnOffAudio","useCallback","pause","currentTime","customRingtoneNameList","useMemo","customRingtoneList","filter","ringtone","type","map","useEffect","_audio$setSinkId2","createElement","className","styles","ringtoneContainer","RemoveRingtoneDialog","getFileNameWithoutExt","open","onCancel","onConfirm","Text","component","Select","displayEmpty","size","classes","content","disabled","MenuProps","onExitComplete","focused","renderValue","selected","find","Fragment","MenuItem","key","clsx","addRingtoneItem","onClick","stopPropagation","current","click","container","Icon","symbol","PlusMd","Divider","tabIndex","addRingtoneDivider","url","isDefaultRingtone","Option","ringtoneItem","ListItemText","IconButton","TrashMd","TooltipProps","title","variant","color","preventDefault","PlayMd","_ref2","_callee","_t","_context","play","console","log","_x","RingtoneUploadButton","message","onUploadRingtone","info"],"sources":["src/app/views/AudioSettingsView/AudioSettingsPanel/components/RingtoneSelection/RingtoneSelection.tsx"],"sourcesContent":["import {\n  getFileNameWithoutExt,\n  type RINGS_TYPE,\n  type RingtoneItem,\n} from '@ringcentral-integration/commons/modules/RingtoneConfiguration';\nimport { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport { PlayMd, PlusMd, TrashMd } from '@ringcentral/spring-icon';\nimport {\n  Divider,\n  Icon,\n  IconButton,\n  ListItemText,\n  MenuItem,\n  Option,\n  Select,\n  Text,\n  useAudio,\n} from '@ringcentral/spring-ui';\nimport clsx from 'clsx';\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport { RemoveRingtoneDialog } from './components/RemoveRingtoneDialog';\nimport { RingtoneUploadButton } from './components/RingtoneUploadButton';\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nexport interface RingtoneSelectionProps {\n  ringtoneList: RingtoneItem[];\n  selectedRingtoneId: string;\n  ringtoneDeviceId?: string;\n  enableCustomRingtone?: boolean;\n  volume?: number;\n  label?: string;\n  isDisabled?: boolean;\n  isUploadRingtoneDisabled?: boolean;\n  updateCurrentRingtone: (id: string) => void;\n  removeCustomRingtone: (id: string) => void;\n  uploadCustomRingtone: (props: any) => void;\n  showAlert: (message: string) => void;\n}\n\nexport const RingtoneSelection = ({\n  label,\n  volume,\n  isDisabled,\n  ringtoneList,\n  ringtoneDeviceId,\n  selectedRingtoneId,\n  enableCustomRingtone,\n  isUploadRingtoneDisabled,\n  updateCurrentRingtone,\n  uploadCustomRingtone,\n  removeCustomRingtone,\n  showAlert,\n}: RingtoneSelectionProps) => {\n  const { t } = useLocale(i18n);\n  const [playing, setPlaying] = useState(false);\n  const [playingId, setPlayingId] = useState('');\n  const ref = useRef<HTMLDivElement>(null);\n  const [audioUrl, setAudioUrl] = useState('');\n  const inputElRef = useRef<HTMLInputElement>(null);\n  const [ringtonePlanToRemoved, setRingtonePlanToRemoved] = useState<{\n    id: string;\n    name: string;\n  }>({\n    id: '',\n    name: '',\n  });\n\n  const audio = useAudio((audio) => {\n    const resetPlaying = () => {\n      setPlaying(false);\n      setPlayingId('');\n    };\n    audio.onplay = () => setPlaying(true);\n    audio.onpause = resetPlaying;\n    audio.onended = resetPlaying;\n    audio.onerror = resetPlaying;\n    if (volume !== undefined) {\n      audio.volume = volume;\n    }\n\n    if (audioUrl) {\n      audio.src = audioUrl;\n    }\n    if (ringtoneDeviceId) {\n      audio.setSinkId?.(ringtoneDeviceId);\n    }\n  });\n\n  const turnOffAudio = useCallback(() => {\n    if (playing) {\n      audio.pause();\n      audio.currentTime = 0;\n    }\n  }, [audio, playing]);\n\n  const customRingtoneNameList = useMemo(() => {\n    const customRingtoneList = ringtoneList.filter(\n      (ringtone) => ringtone.type === 'custom',\n    );\n    return customRingtoneList.map((ringtone) => ringtone.name!);\n  }, [ringtoneList]);\n\n  useEffect(() => {\n    if (volume !== undefined) {\n      audio.volume = volume;\n    }\n    if (ringtoneDeviceId) {\n      audio.setSinkId?.(ringtoneDeviceId);\n    }\n  }, [audio, volume, ringtoneDeviceId]);\n\n  return (\n    <div\n      className={styles.ringtoneContainer}\n      data-sign=\"ringtoneSelectionContainer\"\n    >\n      {enableCustomRingtone && (\n        <RemoveRingtoneDialog\n          name={getFileNameWithoutExt(ringtonePlanToRemoved.name)}\n          open={!!(ringtonePlanToRemoved.id && ringtonePlanToRemoved.name)}\n          onCancel={() => setRingtonePlanToRemoved({ id: '', name: '' })}\n          onConfirm={() => {\n            setRingtonePlanToRemoved({ id: '', name: '' });\n            removeCustomRingtone(ringtonePlanToRemoved.id);\n          }}\n        />\n      )}\n      {label ? (\n        <Text\n          data-sign=\"ringtoneSelectionLabel\"\n          className=\"text-neutral-b0 typography-mainText\"\n          component=\"p\"\n        >\n          {label}\n        </Text>\n      ) : null}\n      <Select\n        displayEmpty\n        size=\"medium\"\n        className=\"w-full [&_.sui-form-field-focus-effect]:border-none\"\n        classes={{\n          content: 'border-none',\n        }}\n        disabled={isDisabled}\n        MenuProps={{\n          onExitComplete: () => {\n            turnOffAudio();\n          },\n        }}\n        focused={false}\n        ref={ref}\n        data-sign=\"ringtoneSelection\"\n        value={selectedRingtoneId}\n        renderValue={(id: string) => {\n          let label;\n          const selected = ringtoneList.find((ringtone) => ringtone.id === id);\n          if (!selected) {\n            label = '';\n          } else {\n            const { type, name } = selected;\n            label =\n              type === 'default'\n                ? t(id as RINGS_TYPE)\n                : getFileNameWithoutExt(name!);\n          }\n          return <span className=\"text-neutral-b2\">{label}</span>;\n        }}\n      >\n        {enableCustomRingtone && (\n          <>\n            <MenuItem\n              key=\"add\"\n              data-sign=\"addRingtone\"\n              className={clsx(styles.addRingtoneItem, 'py-0')}\n              onClick={(e) => {\n                turnOffAudio();\n                e.stopPropagation();\n                if (inputElRef.current) {\n                  inputElRef.current.click();\n                }\n              }}\n              disabled={isUploadRingtoneDisabled}\n              classes={{\n                container: 'w-full gap-3',\n              }}\n            >\n              <Icon symbol={PlusMd} size=\"small\" />\n              <Text className=\"flex-1\">{t('add')}</Text>\n            </MenuItem>\n            <Divider\n              aria-hidden={true}\n              tabIndex={-1}\n              className={styles.addRingtoneDivider}\n            />\n          </>\n        )}\n        <div className=\"max-h-60 overflow-y-auto overflow-x-hidden\">\n          {ringtoneList.map((ringtone) => {\n            const { id, type, name, url } = ringtone;\n            const isDefaultRingtone = type === 'default';\n            return (\n              <Option\n                key={id}\n                className={styles.ringtoneItem}\n                classes={{\n                  container: 'w-full flex',\n                }}\n                value={id}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  if (selectedRingtoneId !== id) {\n                    updateCurrentRingtone(id);\n                  }\n                }}\n              >\n                <ListItemText>\n                  {isDefaultRingtone\n                    ? t(id as RINGS_TYPE)\n                    : getFileNameWithoutExt(name!)}\n                </ListItemText>\n                <i className=\"flex-auto\" />\n                {url && (\n                  <div className=\"flex items-center gap-1\">\n                    {!isDefaultRingtone && (\n                      <IconButton\n                        symbol={TrashMd}\n                        TooltipProps={{ title: t('delete') }}\n                        size=\"small\"\n                        variant=\"icon\"\n                        data-sign=\"delete\"\n                        className=\"text-neutral-b2\"\n                        color=\"secondary\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          e.preventDefault();\n                          setRingtonePlanToRemoved({ id, name: name! });\n                        }}\n                      />\n                    )}\n                    <IconButton\n                      symbol={PlayMd}\n                      data-sign=\"play\"\n                      TooltipProps={{ title: t('play') }}\n                      size=\"small\"\n                      variant=\"icon\"\n                      className=\"text-neutral-b2\"\n                      color={\n                        playing && id === playingId ? 'primary' : 'secondary'\n                      }\n                      onClick={async (e) => {\n                        e.stopPropagation();\n                        try {\n                          turnOffAudio();\n                          if (ringtoneDeviceId === 'off' || !ringtoneDeviceId) {\n                            return;\n                          }\n                          setPlayingId(id);\n                          audio.src = url;\n                          setAudioUrl(url);\n                          audio.play();\n                        } catch (err) {\n                          console.log(err);\n                        }\n                      }}\n                    />\n                  </div>\n                )}\n              </Option>\n            );\n          })}\n        </div>\n      </Select>\n      {enableCustomRingtone && (\n        <RingtoneUploadButton\n          ref={inputElRef}\n          customRingtoneNameList={customRingtoneNameList}\n          showAlert={(message) => {\n            showAlert(message);\n          }}\n          onUploadRingtone={(info) => {\n            uploadCustomRingtone(info);\n          }}\n        />\n      )}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}