{"version":3,"file":"CallDetailPage.js","names":["_components","require","_hooks","_components2","_springUi","_react","_interopRequireDefault","_i18n","e","__esModule","useCallDetailPageContent","exports","_ref","currentCallLog","goBack","useCallHistoryItemInfo","useActionsHandler","_useLocale","useLocale","i18n","t","_useCallHistoryItemIn","selectIndex","variant","info","actions","onAction","DisplayName","displayPhoneNumber","formattedPhoneNumber","myCallerIdTitle","myCallerId","Avatar","startTime","Status","callQueueName","isConferenceCall","buttons","useHistoryActionButtons","type","meLabel","concat","header","createElement","className","PageHeaderBackButton","onClick","size","displayControl","maybe","matchCounts","title","CopyIconButtonSpring","text","ActionMenuList","displayCount","propsMap","all","moreButtonProps","Block","BlockHeader","CallDetailPage","props","children","footer","_useCallDetailPageCon","AppHeaderNav","override","resetImmediately","AppFooterNav","displayName"],"sources":["src/app/views/CallDetailView/CallDetailPage/CallDetailPage.tsx"],"sourcesContent":["import {\n  AppFooterNav,\n  AppHeaderNav,\n  CopyIconButtonSpring,\n} from '@ringcentral-integration/micro-core/src/app/components';\nimport { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport {\n  ActionMenuList,\n  PageHeaderBackButton,\n  useHistoryActionButtons,\n} from '@ringcentral-integration/next-widgets/components';\nimport { Block, BlockHeader } from '@ringcentral/spring-ui';\nimport type { FunctionComponent } from 'react';\nimport React from 'react';\n\nimport type { CallDetailViewPanelProps } from '../CallDetail.view.interface';\n\nimport i18n from './i18n';\n\nexport const useCallDetailPageContent = ({\n  currentCallLog,\n  goBack,\n  useCallHistoryItemInfo,\n  useActionsHandler,\n}: CallDetailViewPanelProps) => {\n  const { t } = useLocale(i18n);\n  const { info, actions } = useCallHistoryItemInfo(currentCallLog, {\n    // TODO: support select contact\n    selectIndex: 0,\n    variant: 'detail',\n  });\n  const onAction = useActionsHandler(\n    currentCallLog,\n    info,\n    'Call history detail page',\n  );\n\n  const {\n    DisplayName,\n    displayPhoneNumber,\n    formattedPhoneNumber,\n    myCallerIdTitle,\n    myCallerId,\n    Avatar,\n    startTime,\n    Status,\n    callQueueName,\n    isConferenceCall,\n  } = info;\n  const buttons = useHistoryActionButtons(actions, (type) => {\n    onAction(type);\n  });\n  const meLabel = callQueueName ? '' : `(${t('me')})`;\n\n  return {\n    header: (\n      <div className=\"h-[72px] flex items-center px-2 gap-1 pt-2\">\n        <PageHeaderBackButton onClick={goBack} className=\"flex-none\" />\n\n        <div\n          className=\"flex gap-2 items-center flex-auto overflow-hidden\"\n          data-sign=\"contactDetail\"\n        >\n          <Avatar size=\"large\" />\n\n          <div className=\"ml-1 flex flex-col flex-auto overflow-hidden\">\n            <h2\n              className=\"text-neutral-b0 truncate typography-subtitle flex items-center gap-1\"\n              data-sign=\"displayName\"\n            >\n              <DisplayName\n                displayControl={{\n                  maybe: true,\n                  matchCounts: true,\n                }}\n              />\n            </h2>\n\n            {!isConferenceCall && (\n              <div\n                className=\"flex gap-1 items-center\"\n                data-sign=\"displayNumber\"\n              >\n                <p\n                  className=\"typography-descriptor text-neutral-b2 truncate\"\n                  title={displayPhoneNumber}\n                >\n                  {displayPhoneNumber}\n                </p>\n                {formattedPhoneNumber && (\n                  <CopyIconButtonSpring text={formattedPhoneNumber} />\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"flex gap-1 items-center flex-none\">\n          <ActionMenuList\n            buttons={buttons}\n            displayCount={2}\n            variant=\"plain\"\n            propsMap={{\n              all: { variant: 'contained' },\n            }}\n            moreButtonProps={{ variant: 'contained' }}\n          />\n        </div>\n      </div>\n    ),\n    info: (\n      <div className=\"px-4 py-2\" data-sign=\"callDetailInfo\">\n        <Block className=\"mb-2\">\n          <BlockHeader>\n            <span className=\"typography-descriptorMini\">{myCallerIdTitle}</span>\n            <div className=\"text-neutral-b2 typography-mainText\">\n              {myCallerId} {meLabel}\n            </div>\n          </BlockHeader>\n        </Block>\n        <Block className=\"mb-2\">\n          <BlockHeader data-sign=\"time-and-status\">\n            <p className=\"typography-descriptorMini\">{startTime}</p>\n            {Status && (\n              <div className=\"typography-mainText\">\n                <Status />\n              </div>\n            )}\n          </BlockHeader>\n        </Block>\n      </div>\n    ),\n  };\n};\n\nexport const CallDetailPage: FunctionComponent<CallDetailViewPanelProps> = (\n  props,\n) => {\n  const { children, footer } = props;\n\n  const { header, info } = useCallDetailPageContent(props);\n\n  return (\n    <div data-sign=\"CallDetailPage\" className=\"flex flex-col h-full\">\n      <AppHeaderNav override resetImmediately>\n        {header}\n      </AppHeaderNav>\n      {/* clear the footer nav by default */}\n      {info}\n      <div\n        data-sign=\"log-notes-transcript-section\"\n        className=\"flex-1 flex flex-col\"\n      >\n        {children}\n      </div>\n      <AppFooterNav>{footer}</AppFooterNav>\n    </div>\n  );\n};\n\nCallDetailPage.displayName = 'CallDetailPage';\n"],"mappings":"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","ignoreList":[]}