{"version":3,"file":"AccountContacts.js","names":["_phoneSources","require","_batchApiHelper","_contactHelper","_isBlank","_services","_nextCore","_ramda","_rxjs","_CompanyContacts","_AccountContactsViewableManager","_helper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_dec32","_dec33","_class","_class2","_descriptor","_descriptor2","_descriptor3","_createForOfIteratorHelper","r","e","t","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","_n","F","s","n","done","value","f","TypeError","o","a","u","call","next","_regenerator","toStringTag","i","c","prototype","Generator","Object","create","_regeneratorDefine2","p","y","G","v","d","bind","l","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arrayLikeToArray","toString","slice","constructor","name","from","test","push","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","reverse","reduce","_initializerWarningHelper","Error","PRESENCE_ENQUEUE_DELAY","exports","MAXIMUM_BATCH_GET_PRESENCE","DEFAULT_PRESENCE_TTL","process","env","THEME_SYSTEM","AccountContactsSourceName","PRESENCE_DATA_KEY","AccountContacts","injectable","target","optional","undefined","metadata","Function","Auth","Client","PortManager","ExtensionInfo","AppFeatures","AccountInfo","CompanyContacts","AccountContactsOptions","dynamic","Presence","Record","delegate","computed","that","_companyContacts","filteredContacts","contacts","ProfileImages","IContact","_RcModule","_auth","_client","_portManager","_extensionInfo","_appFeatures","_accountInfo","_accountContactsOptions","_this","_viewableManager","AccountContactsViewableManager","onViewable","distinctMap","handlePresenceUpdate","presenceTtl","_presenceTtl","_getPresenceContexts","Map","_enqueueTimeoutId","presences","afterLogout$","pipe","tap","clear","takeUntilAppDestroy","subscribe","get","_this$_presence","data","_presence","id","_presenceMap","pick","_updatePresenceMap","_this2","entries","_ref","_ref2","assign","updatePresence","responseList","successList","response","errorCode","console","warn","_ref3","extension","presence","extensionId","_handlePresenceUpdate","_callee2","_this3","_t","_context2","all","map","_ref5","_callee","_ref4","_ref6","accountId","extensionIdList","ids","result","_context","join","batchGetApi","concat","_x2","logger","error","_x","_batchGetApi","_callee3","url","_context3","multipart","batch","_x3","getProfileImageSync","contact","size","profileImage","getPresenceSync","_contact$account","_this$presenceMap$ext","type","account","link","presenceMap","unlinkPresence","_contact$account2","unlink","onReset","clearTimeout","_this$_accountContact","_this$_accountContact2","_this$_appFeatures","isCDCEnabled","_shouldInit","ready","pending","_shouldReset","findContact","contactId","find","x","filterContacts","searchFilter","getFilterContacts","searchForPhoneNumbers","searchString","_this$_extensionInfo","isMultipleSiteEnabled","site","getSearchForPhoneNumbers","entityType","phoneSources","rcContact","options","siteCode","code","matchContactsByPhoneNumber","phoneNumber","_this$_extensionInfo2","directoryContacts","ivrContacts","shouldMatchExtension","isAnExtension","maxExtensionNumberLength","getMatchContactsByPhoneNumber","findPhoneNumber","getFindPhoneNumber","maxExtensionLength","_this4","item","isBlank","extensionNumber","produceContact","profileImages","sourceName","hidden","_contact$phoneNumbers","cdcContact","phoneNumbers","number","cdc","rcCompanyMapping","setProfileImages","batchFetchPresenceSuccess","_ref7","_this5","_ref7$presenceMap","ttl","isUpdated","isExpired","Date","now","timestamp","_getProfileImage","_callee4","_t2","_t3","_context4","hasProfileImage","URL","blob","createObjectURL","identifier","getProfileImage","_x4","getPresence","_this6","useCache","_contact$account3","contextKey","context","callbacks","set","startProcessing","contexts","values","_fetchPresences","setTimeout","_fetchPresences2","_callee5","_this7","responses","_context5","_batchFetchPresences","acc","_ref8","dndStatus","presenceStatus","telephonyStatus","userStatus","meetingStatus","_ref9","_iterator","_step","ex","err","_x5","_batchFetchPresences2","_callee8","_this8","presenceSet","accountExtensionMap","batchResponses","_t6","_context8","_ref0","_acc$accountId","extensionIds","includes","_ref1","_callee7","_t4","_t5","_context7","platform","service","_ref10","_callee6","resp","_context6","json","_x8","_x7","_data","_ref11","_x6","RcModule","state","action"],"sources":["src/app/services/AccountContacts/AccountContacts.ts"],"sourcesContent":["import type PresenceInfoResponse from '@rc-ex/core/lib/definitions/PresenceInfoResponse';\nimport type ValidationError from '@rc-ex/core/lib/definitions/ValidationError';\nimport { phoneSources } from '@ringcentral-integration/commons/enums/phoneSources';\nimport type {\n  ContactAvatarSize,\n  ContactPresence,\n  ContactSource,\n  IContact,\n} from '@ringcentral-integration/commons/interfaces/Contact.model';\nimport { batchGetApi } from '@ringcentral-integration/commons/lib/batchApiHelper';\nimport {\n  getFilterContacts,\n  getFindPhoneNumber,\n  getMatchContactsByPhoneNumber,\n  getSearchForPhoneNumbers,\n  isAnExtension,\n} from '@ringcentral-integration/commons/lib/contactHelper';\nimport { isBlank } from '@ringcentral-integration/commons/lib/isBlank';\nimport {\n  AccountInfo,\n  AppFeatures,\n  Auth,\n  Client,\n  ExtensionInfo,\n  type Presence,\n} from '@ringcentral-integration/micro-auth/src/app/services';\nimport {\n  action,\n  computed,\n  delegate,\n  dynamic,\n  injectable,\n  logger,\n  optional,\n  PortManager,\n  RcModule,\n  state,\n  takeUntilAppDestroy,\n} from '@ringcentral-integration/next-core';\nimport { join, keys, pick, reduce } from 'ramda';\nimport { tap } from 'rxjs';\n\nimport { CompanyContacts } from '../CompanyContacts';\n\nimport type {\n  AccountContactsOptions,\n  ContactPresenceStatus,\n  DirectoryContacts,\n  GetPresenceContext,\n  PresenceMap,\n  Presences,\n  ProfileImages,\n} from './AccountContacts.interface';\nimport { AccountContactsViewableManager } from './AccountContactsViewableManager';\nimport { produceContact } from './helper';\n\n// one second to ensure after ttl the presence can become expired\nexport const PRESENCE_ENQUEUE_DELAY = 1 * 1000; // 1 second\nconst MAXIMUM_BATCH_GET_PRESENCE = 30;\nexport const DEFAULT_PRESENCE_TTL =\n  // TODO: in spring-ui, the viewable presence refetch every 10s\n  process.env.THEME_SYSTEM === 'spring-ui' ? 10 * 1000 : 30 * 1000; // 30 seconds\nexport const AccountContactsSourceName = 'company';\n\nconst PRESENCE_DATA_KEY = [\n  'dndStatus',\n  'presenceStatus',\n  'telephonyStatus',\n  'userStatus',\n  'meetingStatus',\n];\n\n@injectable({\n  name: 'AccountContacts',\n})\nexport class AccountContacts extends RcModule implements ContactSource {\n  @dynamic('Presence')\n  private _presence?: Presence;\n\n  private _viewableManager = new AccountContactsViewableManager(\n    this._portManager,\n    this._extensionInfo,\n    {\n      onViewable: (distinctMap) => this.handlePresenceUpdate(distinctMap),\n      presenceTtl: this._presenceTtl,\n    },\n  );\n\n  @computed\n  private get presenceMap() {\n    const data = this._presence?.data;\n    // own presence use the presence data from presence service\n    if (this._extensionInfo.id && data) {\n      return {\n        ...this._presenceMap,\n        [this._extensionInfo.id]: pick(PRESENCE_DATA_KEY, data),\n      };\n    }\n\n    return this._presenceMap;\n  }\n\n  @state\n  private _presenceMap: Record<string, ContactPresenceStatus> = {};\n\n  @action\n  private _updatePresenceMap(data: Record<string, ContactPresenceStatus>) {\n    Object.entries(data).forEach(([key, value]) => {\n      if (this._presenceMap[key]) {\n        // for ensure patch the smallest data\n        Object.assign(this._presenceMap[key], value);\n      } else {\n        this._presenceMap[key] = value;\n      }\n    });\n  }\n\n  private updatePresence(responseList: PresenceInfoResponse[][]) {\n    const successList: string[] = [];\n    const _presenceMap: Record<string, ContactPresenceStatus> = {};\n    responseList.forEach((response) => {\n      response.forEach((data) => {\n        if ((data as ValidationError).errorCode) {\n          // eslint-disable-next-line no-console\n          console.warn(data);\n        } else {\n          const { id } = data.extension!;\n          const presence = pick(PRESENCE_DATA_KEY, data);\n          const extensionId = id!;\n          _presenceMap[extensionId] = presence;\n\n          successList.push(extensionId.toString());\n        }\n      });\n    });\n    this._updatePresenceMap(_presenceMap);\n\n    return successList;\n  }\n\n  @action\n  private clear() {\n    this._presenceMap = {};\n    this._viewableManager.clear();\n  }\n\n  constructor(\n    private _auth: Auth,\n    private _client: Client,\n    private _portManager: PortManager,\n    private _extensionInfo: ExtensionInfo,\n    private _appFeatures: AppFeatures,\n    private _accountInfo: AccountInfo,\n    private _companyContacts: CompanyContacts,\n    @optional('AccountContactsOptions')\n    private _accountContactsOptions?: AccountContactsOptions,\n  ) {\n    super();\n\n    this._auth.afterLogout$\n      .pipe(\n        tap(() => {\n          this.clear();\n        }),\n        takeUntilAppDestroy,\n      )\n      .subscribe();\n  }\n\n  async handlePresenceUpdate(\n    distinctMap: [string, string[]][],\n  ): Promise<string[]> {\n    try {\n      const responseList = await Promise.all(\n        distinctMap.map(async ([accountId, extensionIdList]) => {\n          const ids = extensionIdList.join(',');\n\n          const result = await this.batchGetApi(\n            `/restapi/v1.0/account/${accountId}/extension/${ids}/presence`,\n          );\n\n          return result;\n        }),\n      );\n\n      return this.updatePresence(responseList);\n    } catch (error) {\n      logger.error('batchGetApi error', error);\n      return [];\n    }\n  }\n\n  @delegate('server')\n  private async batchGetApi(url: string) {\n    const result: PresenceInfoResponse[] = await this._client.multipart.get(\n      url,\n      {\n        batch: true,\n      },\n    );\n\n    return result;\n  }\n\n  getProfileImageSync(contact: IContact, size?: ContactAvatarSize) {\n    if (!contact.profileImage) return undefined;\n\n    return this._auth.getProfileImageSync(contact.profileImage, size);\n  }\n\n  getPresenceSync(contact: IContact): ContactPresence | null {\n    if (!contact || !contact.id || contact.type !== 'company') {\n      return null;\n    }\n\n    const extensionId = contact.id;\n    const accountId = contact.account?.id;\n    if (!accountId || !extensionId) return null;\n\n    this._viewableManager.link({\n      accountId,\n      extensionId,\n    });\n\n    return this.presenceMap[extensionId] ?? null;\n  }\n\n  unlinkPresence(contact: IContact) {\n    if (!contact || !contact.id || contact.type !== 'company') {\n      return null;\n    }\n\n    const extensionId = contact.id;\n    const accountId = contact.account?.id;\n    if (!accountId || !extensionId) return null;\n\n    this._viewableManager.unlink({\n      accountId,\n      extensionId,\n    });\n  }\n\n  // URL.revokeObjectURL\n  @action\n  override onReset() {\n    this.presences = {};\n    clearTimeout(this._enqueueTimeoutId);\n    this._getPresenceContexts.clear();\n  }\n\n  get _presenceTtl() {\n    return this._accountContactsOptions?.presenceTtl ?? DEFAULT_PRESENCE_TTL;\n  }\n\n  get isCDCEnabled() {\n    // TODO: default to true when cdc feature is ready for production.\n    return this._appFeatures?.isCDCEnabled;\n  }\n\n  override _shouldInit() {\n    return this._companyContacts.ready && this.pending;\n  }\n\n  override _shouldReset() {\n    return !this._companyContacts.ready && this.ready;\n  }\n\n  // interface of ContactSource\n  findContact(contactId: string) {\n    return this.contacts.find((x) => x.id === contactId)!;\n  }\n\n  // interface of ContactSource\n  filterContacts(searchFilter: string) {\n    return getFilterContacts(this.contacts, searchFilter);\n  }\n\n  // interface of ContactSource\n  searchForPhoneNumbers(searchString: string) {\n    const { isMultipleSiteEnabled, site } = this._extensionInfo;\n    return getSearchForPhoneNumbers({\n      contacts: this.contacts,\n      searchString,\n      entityType: phoneSources.rcContact,\n      options: { isMultipleSiteEnabled, siteCode: site?.code },\n    });\n  }\n\n  // interface of ContactSource\n  matchContactsByPhoneNumber(phoneNumber: string) {\n    const { isMultipleSiteEnabled, site } = this._extensionInfo;\n    const contacts = ([] as IContact[]).concat(\n      process.env.THEME_SYSTEM === 'spring-ui'\n        ? this.contacts\n        : // TODO: this is old logic(wrong), should be removed after we full migrate to spring-ui in all projects\n          this.directoryContacts.all,\n      this._companyContacts.ivrContacts as IContact[],\n    );\n    const shouldMatchExtension = isAnExtension(\n      phoneNumber,\n      this._accountInfo.maxExtensionNumberLength,\n    );\n    return getMatchContactsByPhoneNumber({\n      contacts,\n      phoneNumber,\n      entityType: phoneSources.rcContact,\n      findPhoneNumber: getFindPhoneNumber({\n        phoneNumber,\n        shouldMatchExtension,\n        options: {\n          isMultipleSiteEnabled,\n          siteCode: site?.code,\n          maxExtensionLength: this._accountInfo.maxExtensionNumberLength,\n        },\n      }),\n    });\n  }\n\n  // interface of ContactSource\n  get sourceName() {\n    return AccountContactsSourceName;\n  }\n\n  // interface of ContactSource\n  @computed\n  get directoryContacts(): DirectoryContacts {\n    return reduce(\n      (result, item) => {\n        if (!isBlank(item.extensionNumber)) {\n          const contact = produceContact({\n            item,\n            profileImages: this.profileImages,\n            presences: this.presences,\n            sourceName: this.sourceName,\n          });\n          // TODO: fix type in DirectoryContacts\n          result.all.push(contact as any);\n          if (!contact.hidden) {\n            const cdcContact = {\n              ...contact,\n              phoneNumbers: (contact.phoneNumbers ?? []).filter(\n                (number) => !number.hidden,\n              ),\n            };\n            // TODO: fix type in DirectoryContacts\n            result.cdc.push(cdcContact as any);\n          }\n        }\n        return result;\n      },\n      {\n        all: [],\n        cdc: [],\n      } as DirectoryContacts,\n      this._companyContacts.filteredContacts,\n    );\n  }\n\n  // interface of ContactSource\n  get contacts() {\n    return this.isCDCEnabled\n      ? this.directoryContacts.cdc\n      : this.directoryContacts.all;\n  }\n\n  // interface of ContactSource\n  @computed((that: AccountContacts) => [that._companyContacts.filteredContacts])\n  get rawContacts() {\n    return this._companyContacts.filteredContacts;\n  }\n\n  @computed((that: AccountContacts) => [that.contacts])\n  get rcCompanyMapping() {\n    const rcCompanyMapping: any = {};\n    this.contacts.forEach((item: any) => {\n      rcCompanyMapping[item.id] = item;\n    });\n    return rcCompanyMapping;\n  }\n\n  // interface of ContactSource\n  get sourceReady() {\n    return this.ready;\n  }\n\n  /**\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   * # All Code Below is Deprecated\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   *\n   */\n\n  /**\n   * @deprecated\n   */\n  protected _getPresenceContexts: Map<string, GetPresenceContext> = new Map();\n  /**\n   * @deprecated\n   */\n  protected _enqueueTimeoutId?: NodeJS.Timeout;\n  /**\n   * @deprecated\n   *\n   * TODO: spring-ui will be removed after all projects switch to spring-ui, should use presenceMap redux state instead\n   */\n  presences: Presences = {};\n\n  /**\n   * @deprecated\n   */\n  @state\n  profileImages: ProfileImages = {};\n\n  /**\n   * @deprecated\n   */\n  @action\n  setProfileImages(id: string, url: string) {\n    this.profileImages[id] = {\n      url,\n    };\n  }\n  /**\n   * @deprecated\n   *\n   * 1. presence should not store in redux, which will make the CTI rerender once it has some changes and dispatch some action\n   * 2. make sure this.presences's changes is immutable\n   * 3. If the Record feature is stable, then we should use the below implementation to make sure change is immutable\n   * ```\n   *  data = {\n   *      ...data,\n   *      [key]: this.presences[key]\n   *  }\n   * ```\n   */\n  batchFetchPresenceSuccess({\n    presenceMap = {},\n    ttl,\n  }: {\n    presenceMap?: PresenceMap;\n    ttl: number;\n  }) {\n    const data: Presences = {};\n    let isUpdated = false;\n    // TODO: refactor without side effect.\n    Object.keys(this.presences).forEach((key) => {\n      const isExpired = Date.now() - this.presences[key].timestamp >= ttl;\n      if (!isExpired) {\n        // new key: use new reference: immutable\n        data[key] = this.presences[key];\n      } else {\n        isUpdated = true;\n      }\n    });\n    Object.keys(presenceMap).forEach((key) => {\n      isUpdated = true;\n      data[key] = { presence: presenceMap[key], timestamp: Date.now() };\n    });\n    // need to make sure this.presences is immutable\n    this.presences = isUpdated ? data : this.presences;\n  }\n\n  /**\n   * @deprecated should use sync way `getProfileImageSync` instead, always get url in sync way to avoid the blank image a moment\n   *\n   * TODO: spring-ui will be removed after all projects switch to spring-ui\n   */\n  @delegate('server')\n  async getProfileImage(contact: IContact) {\n    if (\n      !contact ||\n      !contact.id ||\n      contact.type !== 'company' ||\n      !contact.hasProfileImage\n    ) {\n      return null;\n    }\n\n    try {\n      const response = await this._client\n        .account(contact.account!.id)\n        .extension(contact.id)\n        .profileImage('195x195')\n        .get();\n      const value = URL.createObjectURL(await response.blob());\n\n      /**\n       * due to we get the profile image with cache at top Contact service, we can set the profile image directly\n       */\n      this.setProfileImages(contact.id, value);\n\n      return value;\n    } catch (e) {\n      logger.error(`[${this.identifier}] getProfileImage fail`, e, contact);\n    }\n\n    return null;\n  }\n\n  /**\n   * @deprecated\n   */\n  // interface of ContactSource\n  @delegate('server')\n  getPresence(\n    contact: IContact,\n    useCache = true,\n  ): Promise<ContactPresence | null> {\n    return new Promise((resolve) => {\n      if (!contact || !contact.id || contact.type !== 'company') {\n        resolve(null);\n        return;\n      }\n\n      const extensionId = contact.id;\n      if (\n        useCache &&\n        this.presences[extensionId] &&\n        Date.now() - this.presences[extensionId].timestamp < this._presenceTtl\n      ) {\n        const { presence } = this.presences[extensionId];\n        resolve(presence);\n        return;\n      }\n\n      const accountId = contact.account?.id;\n      if (!accountId) {\n        resolve(null);\n        return;\n      }\n\n      const contextKey = `${accountId}-${extensionId}`;\n      const context = this._getPresenceContexts.get(contextKey);\n      if (context) {\n        context.callbacks.push(resolve);\n      } else {\n        this._getPresenceContexts.set(contextKey, {\n          accountId,\n          extensionId,\n          callbacks: [resolve],\n        });\n      }\n\n      const startProcessing = () => {\n        const contexts = Array.from(this._getPresenceContexts.values());\n        this._getPresenceContexts.clear();\n        this._fetchPresences(contexts);\n      };\n\n      clearTimeout(this._enqueueTimeoutId!);\n      if (this._getPresenceContexts.size === MAXIMUM_BATCH_GET_PRESENCE) {\n        startProcessing();\n      } else {\n        this._enqueueTimeoutId = setTimeout(\n          startProcessing,\n          PRESENCE_ENQUEUE_DELAY,\n        );\n      }\n    });\n  }\n\n  /**\n   * @deprecated\n   */\n  async _fetchPresences(contexts: GetPresenceContext[]) {\n    // request\n    const responses = await this._batchFetchPresences(contexts);\n    // response\n    const presenceMap = reduce(\n      (acc, { extensionId }) => {\n        const response = responses[extensionId];\n        if (response) {\n          const {\n            dndStatus,\n            presenceStatus,\n            telephonyStatus,\n            userStatus,\n            meetingStatus,\n          } = response;\n          acc[extensionId] = {\n            dndStatus,\n            presenceStatus,\n            telephonyStatus,\n            userStatus,\n            meetingStatus,\n          };\n        } else if (this.presences[extensionId]) {\n          // Should keep the previous state when fail to fetch\n          acc[extensionId] = this.presences[extensionId].presence;\n        }\n        return acc;\n      },\n      {} as PresenceMap,\n      contexts,\n    );\n    // update state\n    this.batchFetchPresenceSuccess({\n      presenceMap,\n      ttl: this._presenceTtl,\n    });\n    // callback\n    contexts.forEach(({ extensionId, callbacks }) => {\n      const presence = presenceMap[extensionId];\n      for (const resolve of callbacks) {\n        try {\n          resolve(presence);\n        } catch (ex) {\n          console.error(ex);\n        }\n      }\n    });\n  }\n\n  /**\n   * @deprecated\n   */\n  async _batchFetchPresences(contexts: GetPresenceContext[]) {\n    const presenceSet: Record<string, PresenceInfoResponse> = {};\n    try {\n      const accountExtensionMap = reduce(\n        (acc, { accountId, extensionId }) => {\n          const extensionIds = acc[accountId] ?? [];\n          if (!extensionIds.includes(extensionId)) {\n            extensionIds.push(extensionId);\n          }\n          acc[accountId] = extensionIds;\n          return acc;\n        },\n        {} as Record<string, string[]>,\n        contexts,\n      );\n      const batchResponses = await Promise.all<\n        (PresenceInfoResponse | ValidationError)[]\n      >(\n        keys(accountExtensionMap).map(async (accountId): Promise<any> => {\n          if (accountExtensionMap[accountId].length > 1) {\n            const extensionIds = join(',', accountExtensionMap[accountId]);\n            // extract json data now so the data appears in the same format\n            // as single requests\n            return Promise.all(\n              (\n                await batchGetApi({\n                  platform: this._client.service.platform(),\n                  url: `/restapi/v1.0/account/${accountId}/extension/${extensionIds}/presence`,\n                })\n              ).map(async (resp: any) => resp.json()),\n            );\n          }\n          // wrap single request response data in array to keep the same\n          // format as batch requests\n          const extensionId = accountExtensionMap[accountId][0];\n          return [\n            await this._client\n              .account(accountId)\n              .extension(extensionId)\n              .presence()\n              .get(),\n          ];\n        }),\n      );\n\n      // treat all data as batch since the data is normalized\n      batchResponses.forEach((batch) =>\n        batch.forEach((data) => {\n          if ((data as ValidationError).errorCode) {\n            console.warn(data);\n            return;\n          }\n          const _data: PresenceInfoResponse = data;\n          const { id } = _data.extension!;\n          presenceSet[id!] = _data;\n        }),\n      );\n    } catch (e) {\n      console.error(e);\n    }\n    return presenceSet;\n  }\n}\n"],"mappings":"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","ignoreList":[]}