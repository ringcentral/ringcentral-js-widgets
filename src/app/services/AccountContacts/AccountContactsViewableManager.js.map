{"version":3,"file":"AccountContactsViewableManager.js","names":["_services","require","_classCallCheck","a","n","TypeError","_defineProperties","e","r","t","length","o","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","prototype","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","value","_setPrototypeOf","AccountContactsViewableManager","exports","_ViewableManager","_portManager","_extensionInfo","options","_this","viewableManagerOptions","ttl","presenceTtl","groupKey","itemKey","maxBatchRequestCount","validate","data","extensionId","id","onViewable","distinctMap","result","link","contact","viewableManager","unlink","clear","ViewableManager"],"sources":["src/app/services/AccountContacts/AccountContactsViewableManager.tsx"],"sourcesContent":["import { ExtensionInfo } from '@ringcentral-integration/micro-auth/src/app/services';\nimport { ViewableManager } from '@ringcentral-integration/micro-core/src/app/services';\nimport { PortManager } from '@ringcentral-integration/next-core';\n\ninterface AccountContactDetails {\n  accountId: string;\n  extensionId: string;\n}\n\ninterface AccountContactsViewableManagerOptions {\n  onViewable: (distinctMap: [string, string[]][]) => Promise<string[]>;\n  presenceTtl: number;\n}\n\nexport class AccountContactsViewableManager extends ViewableManager<AccountContactDetails> {\n  constructor(\n    protected override _portManager: PortManager,\n    private _extensionInfo: ExtensionInfo,\n    private options: AccountContactsViewableManagerOptions,\n  ) {\n    super(_portManager, {\n      viewableManagerOptions: {\n        ttl: options.presenceTtl,\n        groupKey: 'accountId',\n        itemKey: 'extensionId',\n        maxBatchRequestCount: 30,\n        validate: (data) => +data.extensionId !== this._extensionInfo.id,\n      },\n      onViewable: (distinctMap) => {\n        const result = this.options.onViewable(distinctMap);\n\n        return result;\n      },\n    });\n  }\n\n  link(contact: AccountContactDetails) {\n    return this.viewableManager.link(contact);\n  }\n\n  unlink(contact: AccountContactDetails) {\n    return this.viewableManager.unlink(contact);\n  }\n\n  clear() {\n    return this.viewableManager.clear();\n  }\n}\n"],"mappings":"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","ignoreList":[]}