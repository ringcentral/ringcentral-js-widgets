{"version":3,"file":"AddressBook.js","names":["_availabilityTypes","require","_phoneSources","_contactHelper","_services","_nextCore","_utils","_ramda","_helpers","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_class","_class2","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","initializer","slice","reverse","reduce","DEFAULT_FETCH_INTERVAL","exports","DEFAULT_CONTACTS_PER_PAGE","AddressBookSourceName","AddressBook","injectable","name","target","optional","undefined","metadata","Function","Client","ExtensionFeatures","DataFetcher","AddressBookOptions","delegate","computed","_ref","data","_ref2","that","contacts","_ref3","_client","_extensionFeatures","_dataFetcher","_addressBookOptions","_this$_addressBookOpt","_this","_ref4","_ref4$polling","polling","_source","DataSource","cleanOnReset","permissionCheckFunction","_this$_extensionFeatu","_this$_extensionFeatu2","_this$_extensionFeatu3","features","ReadPersonalContacts","available","readyCheckFunction","ready","fetchFunction","_sync","register","get","_this$_addressBookOpt2","_this$_addressBookOpt3","fetchInterval","_this$_addressBookOpt4","_this$_addressBookOpt5","perPage","_this$data","syncToken","_fetch2","_callee","pageId","params","_t","_context","getSyncParams","processAddressBookResponse","account","extension","addressBookSync","list","_fetch","_x","_x2","_x3","_processISyncData","records","_this$data$records2","_this$data3","_this$data$records","_this$data2","updatedRecords","processedIDMap","record","availability","availabilityTypes","alive","id","_sync2","_callee2","_response$records","response","_response$records2","_response","_t2","_context2","_perPage","concat","nextPageId","sleep","_fetchInterval","syncInfo","syncType","status","console","error","_sync3","_callee3","_context3","fetchData","sync","findContact","contactId","find","x","filterContacts","searchFilter","getFilterContacts","searchForPhoneNumbers","searchString","getSearchForPhoneNumbers","entityType","phoneSources","contact","matchContactsByPhoneNumber","phoneNumber","getMatchContactsByPhoneNumber","rcContact","_this2","_this$data$records3","_this$data4","map","rawContact","_rawContact$firstName","_rawContact$lastName","type","sourceName","phoneNumbers","emails","firstName","lastName","email","email2","email3","test","addPhoneToContact","_this$data$records4","_this$data5","rcPersonalMapping","item","DataFetcherConsumer"],"sources":["src/app/services/AddressBook/AddressBook.ts"],"sourcesContent":["import type AddressBookSync from '@rc-ex/core/lib/definitions/AddressBookSync';\nimport { availabilityTypes } from '@ringcentral-integration/commons/enums/availabilityTypes';\nimport { phoneSources } from '@ringcentral-integration/commons/enums/phoneSources';\nimport type {\n  ContactModel,\n  ContactSource,\n} from '@ringcentral-integration/commons/interfaces/Contact.model';\nimport {\n  addPhoneToContact,\n  getFilterContacts,\n  getMatchContactsByPhoneNumber,\n  getSearchForPhoneNumbers,\n} from '@ringcentral-integration/commons/lib/contactHelper';\nimport {\n  Client,\n  ExtensionFeatures,\n  DataFetcher,\n  DataFetcherConsumer,\n  DataSource,\n} from '@ringcentral-integration/micro-auth/src/app/services';\nimport {\n  computed,\n  injectable,\n  optional,\n  delegate,\n} from '@ringcentral-integration/next-core';\nimport { sleep } from '@ringcentral-integration/utils';\nimport type { ApiError } from '@ringcentral/sdk';\nimport { forEach, map } from 'ramda';\nimport type { ListQuery } from 'ringcentral-client/build/paths/MessageSync';\n\nimport type {\n  AddressBookData,\n  AddressBookOptions,\n  PersonalContactResource,\n} from './AddressBook.interface';\nimport { getSyncParams, processAddressBookResponse } from './helpers';\n\nexport const DEFAULT_FETCH_INTERVAL = 1000;\nexport const DEFAULT_CONTACTS_PER_PAGE = 250;\nexport const AddressBookSourceName = 'personal';\n@injectable({\n  name: 'AddressBook',\n})\nexport class AddressBook\n  extends DataFetcherConsumer<Partial<AddressBookData>>\n  implements ContactSource\n{\n  constructor(\n    protected _client: Client,\n    protected _extensionFeatures: ExtensionFeatures,\n    protected override _dataFetcher: DataFetcher,\n    @optional('AddressBookOptions')\n    protected _addressBookOptions?: AddressBookOptions,\n  ) {\n    super(_dataFetcher);\n\n    const { polling = true } = this._addressBookOptions ?? {};\n    this._source = new DataSource({\n      ...this._addressBookOptions,\n      key: 'addressBook',\n      polling,\n      cleanOnReset: true,\n      permissionCheckFunction: () =>\n        this._extensionFeatures.features?.ReadPersonalContacts?.available ??\n        false,\n      readyCheckFunction: () => this._extensionFeatures.ready,\n      fetchFunction: () => this._sync(),\n    });\n    this._dataFetcher.register(this._source);\n  }\n\n  protected get _fetchInterval() {\n    return this._addressBookOptions?.fetchInterval ?? DEFAULT_FETCH_INTERVAL;\n  }\n\n  protected get _perPage() {\n    return this._addressBookOptions?.perPage ?? DEFAULT_CONTACTS_PER_PAGE;\n  }\n\n  get syncToken() {\n    return this.data?.syncToken;\n  }\n\n  protected async _fetch(perPage: number, syncToken: string, pageId?: number) {\n    const params = getSyncParams({\n      perPage,\n      syncToken,\n      pageId,\n    }) as ListQuery;\n    return processAddressBookResponse(\n      (await this._client\n        .account()\n        .extension()\n        .addressBookSync()\n        .list(params)) as AddressBookSync,\n    );\n  }\n\n  protected _processISyncData(records: PersonalContactResource[]) {\n    if (records?.length > 0) {\n      const updatedRecords: PersonalContactResource[] = [];\n      const processedIDMap: Record<number, true> = {};\n      forEach((record) => {\n        if (record.availability === availabilityTypes.alive) {\n          // Only keep entries that is 'alive', omit 'purged' and 'deleted'\n          updatedRecords.push(record);\n        }\n        processedIDMap[record.id!] = true;\n      }, records);\n      forEach((record) => {\n        if (!processedIDMap[record.id!]) {\n          // record has no updates\n          updatedRecords.push(record);\n        }\n      }, this.data?.records ?? []);\n      return updatedRecords;\n    }\n    return this.data?.records ?? [];\n  }\n\n  protected async _sync(): Promise<AddressBookData> {\n    try {\n      const syncToken = this.syncToken;\n      const perPage = this._perPage;\n      let records: PersonalContactResource[] = [];\n      let response = await this._fetch(perPage, syncToken!);\n      records = records.concat(response.records ?? []);\n      while (response.nextPageId) {\n        await sleep(this._fetchInterval);\n        response = await this._fetch(perPage, syncToken!, response.nextPageId);\n        records = records.concat(response.records ?? []);\n      }\n      if (response.syncInfo!.syncType === 'ISync') {\n        records = this._processISyncData(records);\n      }\n      return {\n        syncToken: response.syncInfo!.syncToken,\n        records,\n      };\n    } catch (error) {\n      if ((error as ApiError)?.response?.status === 403) {\n        return {} as AddressBookData;\n      }\n      console.error('[AddressBook] > _sync', error);\n      throw error;\n    }\n  }\n\n  // interface of ContactSource\n  @delegate('server')\n  async sync() {\n    await this._dataFetcher.fetchData(this._source);\n  }\n\n  // interface of ContactSource\n  findContact(contactId: string) {\n    return this.contacts.find((x) => x.id === contactId);\n  }\n\n  // interface of ContactSource\n  filterContacts(searchFilter: string) {\n    return getFilterContacts(this.contacts, searchFilter);\n  }\n\n  // interface of ContactSource\n  searchForPhoneNumbers(searchString: string) {\n    return getSearchForPhoneNumbers({\n      contacts: this.contacts,\n      searchString,\n      entityType: phoneSources.contact,\n    });\n  }\n\n  // interface of ContactSource\n  matchContactsByPhoneNumber(phoneNumber: string) {\n    return getMatchContactsByPhoneNumber({\n      contacts: this.contacts,\n      phoneNumber,\n      entityType: phoneSources.rcContact,\n    });\n  }\n\n  // interface of ContactSource\n  get sourceName() {\n    return AddressBookSourceName;\n  }\n\n  // interface of ContactSource\n  @computed(({ data }: AddressBook) => [data])\n  get contacts() {\n    return map((rawContact) => {\n      const contact: ContactModel = {\n        ...rawContact,\n        type: this.sourceName,\n        phoneNumbers: [],\n        emails: [],\n        id: `${rawContact.id}`,\n        name: `${rawContact.firstName ?? ''} ${rawContact.lastName ?? ''}`,\n      };\n      if (rawContact.email) {\n        contact.emails.push(rawContact.email);\n      }\n      if (rawContact.email2) {\n        contact.emails.push(rawContact.email2);\n      }\n      if (rawContact.email3) {\n        contact.emails.push(rawContact.email3);\n      }\n      forEach((key) => {\n        if (/Phone|Fax/.test(key) && typeof contact[key] === 'string') {\n          addPhoneToContact(contact, contact[key] as string, key);\n        }\n      }, Object.keys(contact) as (keyof typeof contact)[]);\n      return contact;\n    }, this.data?.records ?? []);\n  }\n\n  // interface of ContactSource\n  @computed(({ data }: AddressBook) => [data])\n  get rawContacts() {\n    return this.data?.records ?? [];\n  }\n\n  @computed((that: AddressBook) => [that.contacts])\n  get rcPersonalMapping() {\n    const rcPersonalMapping: any = {};\n    this.contacts.forEach((item: any) => {\n      rcPersonalMapping[item.id] = item;\n    });\n    return rcPersonalMapping;\n  }\n\n  // interface of ContactSource\n  get sourceReady() {\n    return this.ready;\n  }\n}\n"],"mappings":"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","ignoreList":[]}