{"version":3,"file":"helpers.js","names":["_syncTypes","require","_ramda","REGX_DECODE","DECODE","decodeName","str","replace","$0","handleText","processAddressBookResponse","data","Array","isArray","records","forEach","record","firstName","lastName","uri","getSyncParams","_ref","perPage","syncToken","pageId","params","syncType","syncTypes","iSync","fSync"],"sources":["src/app/services/AddressBook/helpers.ts"],"sourcesContent":["import type AddressBookSync from '@rc-ex/core/lib/definitions/AddressBookSync';\nimport { syncTypes } from '@ringcentral-integration/commons/enums/syncTypes';\nimport { forEach } from 'ramda';\n\nimport type { SyncParameters } from './AddressBook.interface';\n\nconst REGX_DECODE = /&\\w+;/g;\nconst DECODE: Record<string, string> = {\n  '&amp;': '&',\n  '&bsol;': '\\\\',\n  '&sol;': '/',\n  '&apos;': \"'\",\n};\n\nexport function decodeName(str: string) {\n  return str.replace(REGX_DECODE, ($0: string) => {\n    let handleText = $0;\n    if (DECODE[$0]) {\n      handleText = DECODE[$0];\n    }\n    return handleText;\n  });\n}\n\nexport function processAddressBookResponse(data: AddressBookSync) {\n  if (Array.isArray(data?.records)) {\n    forEach((record) => {\n      if (record.firstName) {\n        record.firstName = decodeName(record.firstName);\n      }\n      if (record.lastName) {\n        record.lastName = decodeName(record.lastName);\n      }\n      // remove uri from record to reduce size\n      delete record.uri;\n    }, data.records);\n  }\n  return data;\n}\nexport function getSyncParams({\n  perPage,\n  syncToken,\n  pageId,\n}: SyncParameters): SyncParameters /* SyncAddressBookParameters */ {\n  const params: SyncParameters = {\n    perPage,\n  };\n  if (syncToken) {\n    params.syncToken = syncToken;\n    params.syncType = syncTypes.iSync;\n  } else {\n    params.syncType = syncTypes.fSync;\n  }\n  if (pageId) {\n    params.pageId = pageId;\n  }\n  return params;\n}\n"],"mappings":";;;;;;;;;;;;;;;AACA,IAAAA,UAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAIA,IAAME,WAAW,GAAG,QAAQ;AAC5B,IAAMC,MAA8B,GAAG;EACrC,OAAO,EAAE,GAAG;EACZ,QAAQ,EAAE,IAAI;EACd,OAAO,EAAE,GAAG;EACZ,QAAQ,EAAE;AACZ,CAAC;AAEM,SAASC,UAAUA,CAACC,GAAW,EAAE;EACtC,OAAOA,GAAG,CAACC,OAAO,CAACJ,WAAW,EAAE,UAACK,EAAU,EAAK;IAC9C,IAAIC,UAAU,GAAGD,EAAE;IACnB,IAAIJ,MAAM,CAACI,EAAE,CAAC,EAAE;MACdC,UAAU,GAAGL,MAAM,CAACI,EAAE,CAAC;IACzB;IACA,OAAOC,UAAU;EACnB,CAAC,CAAC;AACJ;AAEO,SAASC,0BAA0BA,CAACC,IAAqB,EAAE;EAChE,IAAIC,KAAK,CAACC,OAAO,CAACF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,OAAO,CAAC,EAAE;IAChC,IAAAC,cAAO,EAAC,UAACC,MAAM,EAAK;MAClB,IAAIA,MAAM,CAACC,SAAS,EAAE;QACpBD,MAAM,CAACC,SAAS,GAAGZ,UAAU,CAACW,MAAM,CAACC,SAAS,CAAC;MACjD;MACA,IAAID,MAAM,CAACE,QAAQ,EAAE;QACnBF,MAAM,CAACE,QAAQ,GAAGb,UAAU,CAACW,MAAM,CAACE,QAAQ,CAAC;MAC/C;MACA;MACA,OAAOF,MAAM,CAACG,GAAG;IACnB,CAAC,EAAER,IAAI,CAACG,OAAO,CAAC;EAClB;EACA,OAAOH,IAAI;AACb;AACO,SAASS,aAAaA,CAAAC,IAAA,EAIM,+BAAgC;EAAA,IAHjEC,OAAO,GAAAD,IAAA,CAAPC,OAAO;IACPC,SAAS,GAAAF,IAAA,CAATE,SAAS;IACTC,MAAM,GAAAH,IAAA,CAANG,MAAM;EAEN,IAAMC,MAAsB,GAAG;IAC7BH,OAAO,EAAPA;EACF,CAAC;EACD,IAAIC,SAAS,EAAE;IACbE,MAAM,CAACF,SAAS,GAAGA,SAAS;IAC5BE,MAAM,CAACC,QAAQ,GAAGC,oBAAS,CAACC,KAAK;EACnC,CAAC,MAAM;IACLH,MAAM,CAACC,QAAQ,GAAGC,oBAAS,CAACE,KAAK;EACnC;EACA,IAAIL,MAAM,EAAE;IACVC,MAAM,CAACD,MAAM,GAAGA,MAAM;EACxB;EACA,OAAOC,MAAM;AACf","ignoreList":[]}