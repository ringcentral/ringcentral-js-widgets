{"version":3,"file":"WebSocketSubscription.js","names":["_debounceThrottle","require","_nextCore","_rxjs","_Client","_RingCentralExtensions","_webSocketReadyStates","_normalizeEventFilter","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_dec32","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","Symbol","iterator","isArray","length","e","n","_regenerator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","d","bind","l","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","keys","forEach","reverse","reduce","_initializerWarningHelper","Error","DEFAULT_REFRESH_DELAY","process","env","NODE_ENV","DEFAULT_RECOVERY_BUFFER_SIZE","WebSocketSubscription","exports","injectable","target","optional","undefined","metadata","Function","Client","StoragePlugin","RingCentralExtensions","WebSocketSubscriptionOptions","dynamic","BrowserLogger","SubscriptionInfo","delegate","_RcModule","_client","_storage","_ringCentralExtensions","_webSocketSubscriptionOptions","_this","_wsSubscription","_subscriberMap","Map","_subscribersAreReady","_debouncedUpdateSubscription","promisedDebounce","fn","_updateSubscription","threshold","message$","fromWatch","message","pipe","share","enable","_onInitOnce","_callee","_context","_bindEvents","onInitOnce","_onInitSuccess","_callee2","_context2","_debouncedUpdateSubscriptionCatchCancel","onInitSuccess","_onReset","_callee3","_context3","cancel","_removeSubscription","onReset","_bindEvents2","_callee5","_this2","_context5","watch","webSocketReadyState","_ref","_callee4","wsState","_context4","ready","webSocketReadyStates","closing","_revokeSubscription","_x","_setSubscriptionReady","subscriptionReady","_setTokens","subscriptionInfo","subscriptionChannel","_saveTokens","_this$_wsSubscription","webSocketExtension","ws","url","_clearTokens","_obtainSubscription2","_callee6","eventFilters","_this3","_subscription$subscri","isNewChannel","subscription","isNewSubscription","_context6","isTheSameWebSocket","logger","log","concat","identifier","subscribe","_this3$_browserLogger","_browserLogger","_notifyMessage","_dispatchMessage","id","_obtainSubscription","_x2","_refreshSubscription2","_callee7","_context7","refresh","_refreshSubscription","_x3","_revokeSubscription2","_callee8","_t","_context8","revoke","service","platform","uri","warn","_removeSubscription2","_callee9","_context9","remove","ex","_updateSubscription2","_callee0","_this$_wsSubscription2","_this$_wsSubscription3","_context0","isWebSocketReady","getFilters","isTheSameEventFilters","_debouncedUpdateSubscriptionCatchCancel2","_callee1","_t2","_context1","register","module","_this4","subscriber","set","_updateSubscriberReady","unwatch","unregister","get","filters","values","acc","_ref2","filterSet","Set","_this5","messageBuffer","_dispatchModuleMessage","getRef","every","x","_clearMessageBuffer","_this6","_pushMessageBuffer","_","handler","error","_this$_ringCentralExt","_this$_ringCentralExt2","_this$_ringCentralExt3","bufferSize","connectionDetails","recoveryBufferSize","shift","push","_subscribe","_callee10","oldLength","_args10","_context10","_addFilters","_unsubscribe","_callee11","_args11","_context11","_removeFilters","unsubscribe","filter","index","array","indexOf","includes","fromMessage$","eventType","matchRegex","RegExp","map","RcModule","storage","state","action","getOwnPropertyDescriptor"],"sources":["src/app/services/WebSocketSubscription/WebSocketSubscription.ts"],"sourcesContent":["import type SubscriptionInfo from '@rc-ex/core/lib/definitions/SubscriptionInfo';\nimport type Subscription from '@rc-ex/ws/lib/subscription';\nimport type { SubscriptionFilter } from '@ringcentral-integration/commons/enums/subscriptionFilters';\nimport { promisedDebounce } from '@ringcentral-integration/commons/lib/debounce-throttle';\nimport { type BrowserLogger } from '@ringcentral-integration/micro-core/src/app/services';\nimport {\n  action,\n  delegate,\n  dynamic,\n  fromWatch,\n  getRef,\n  injectable,\n  logger,\n  optional,\n  RcModule,\n  state,\n  storage,\n  StoragePlugin,\n  watch,\n} from '@ringcentral-integration/next-core';\nimport { filter, map, share } from 'rxjs';\n\nimport { Client } from '../Client';\nimport { RingCentralExtensions } from '../RingCentralExtensions';\nimport { webSocketReadyStates } from '../RingCentralExtensions/webSocketReadyStates';\n\nimport type {\n  SubscriberInfo,\n  SubscriptionMetadata,\n  WebSocketSubscriptionOptions,\n} from './WebSocketSubscription.interface';\nimport {\n  isTheSameEventFilters,\n  isTheSameWebSocket,\n} from './normalizeEventFilter';\n\nconst DEFAULT_REFRESH_DELAY = process.env.NODE_ENV === 'test' ? 0 : 1000;\nconst DEFAULT_RECOVERY_BUFFER_SIZE = 100;\n\n/**\n * Service for managing WebSocket subscriptions\n * Handles subscription registration, messaging and cleanup\n *\n * @class\n */\n@injectable({\n  name: 'WebSocketSubscription',\n})\nexport class WebSocketSubscription extends RcModule {\n  private _wsSubscription?: Subscription;\n  private _subscriberMap = new Map<RcModule, SubscriberInfo>();\n  private _subscribersAreReady = false;\n\n  constructor(\n    protected _client: Client,\n    protected _storage: StoragePlugin,\n    protected _ringCentralExtensions: RingCentralExtensions,\n    @optional('WebSocketSubscriptionOptions')\n    protected _webSocketSubscriptionOptions?: WebSocketSubscriptionOptions,\n  ) {\n    super();\n    this._storage.enable(this);\n  }\n\n  override async onInitOnce() {\n    await this._bindEvents();\n  }\n\n  override async onInitSuccess() {\n    await this._debouncedUpdateSubscriptionCatchCancel();\n  }\n\n  override async onReset() {\n    this._debouncedUpdateSubscription.cancel();\n    await this._removeSubscription();\n  }\n\n  private async _bindEvents() {\n    watch(\n      this,\n      () => this._ringCentralExtensions.webSocketReadyState,\n      async (wsState) => {\n        if (!this.ready || !wsState) {\n          return;\n        }\n        this._debouncedUpdateSubscription.cancel();\n        if (wsState === webSocketReadyStates.ready) {\n          await this._updateSubscription();\n        } else if (wsState === webSocketReadyStates.closing) {\n          // when websocket is going to close, revoke subscription beforehand\n          await this._revokeSubscription();\n        } else {\n          await this._removeSubscription();\n        }\n      },\n    );\n  }\n\n  @dynamic('BrowserLogger')\n  protected _browserLogger?: BrowserLogger;\n\n  @storage\n  @state\n  subscriptionInfo?: SubscriptionInfo | null = null;\n\n  @storage\n  @state\n  subscriptionChannel?: string | null = null;\n\n  @state\n  subscriptionReady = false;\n\n  @action\n  private _setSubscriptionReady(ready: boolean) {\n    this.subscriptionReady = ready;\n  }\n\n  @action\n  private _setTokens(\n    subscriptionInfo?: SubscriptionInfo | null,\n    subscriptionChannel?: string | null,\n  ) {\n    this.subscriptionInfo = subscriptionInfo ?? null;\n    this.subscriptionChannel = subscriptionChannel ?? null;\n  }\n\n  private _saveTokens() {\n    this._setTokens(\n      this._wsSubscription?.subscriptionInfo,\n      this._ringCentralExtensions.webSocketExtension.ws.url,\n    );\n  }\n\n  private _clearTokens() {\n    this._setTokens(null, null);\n  }\n\n  private async _obtainSubscription(eventFilters: SubscriptionFilter[]) {\n    const isNewChannel =\n      !this.subscriptionChannel ||\n      !isTheSameWebSocket(\n        this.subscriptionChannel,\n        this._ringCentralExtensions.webSocketExtension.ws.url,\n      );\n    if (process.env.NODE_ENV !== 'test') {\n      logger.log(\n        `[${this.identifier}] > _obtainSubscription > isNewChannel: ${isNewChannel}`,\n      );\n    }\n\n    // For reduce the total number of subscriptions (ttl 24 hours, limited number 20),\n    // Revoke existing subscription before creating new.\n    if (isNewChannel) {\n      await this._revokeSubscription();\n      if (process.env.NODE_ENV !== 'test') {\n        logger.log(\n          `[${this.identifier}] > _obtainSubscription > existing subscription revoked`,\n        );\n      }\n    }\n\n    // Create or recover subscription\n    const subscription =\n      await this._ringCentralExtensions.webSocketExtension.subscribe(\n        eventFilters,\n        (message) => {\n          // only log message in production to avoid log flooding\n          if (process.env.NODE_ENV === 'production') {\n            this._browserLogger?.log('WebSocketSubscription', message);\n          }\n          this._notifyMessage(message);\n          this._dispatchMessage(message);\n        },\n        isNewChannel ? null : this.subscriptionInfo,\n      );\n\n    const isNewSubscription =\n      !this.subscriptionInfo ||\n      this.subscriptionInfo.id !== subscription.subscriptionInfo?.id;\n    if (isNewSubscription) {\n      if (process.env.NODE_ENV !== 'test') {\n        logger.log(\n          `[${this.identifier}] > _obtainSubscription > subscription created`,\n        );\n      }\n    } else {\n      if (process.env.NODE_ENV !== 'test') {\n        logger.log(\n          `[${this.identifier}] > _obtainSubscription > subscription recovered`,\n        );\n      }\n    }\n\n    this._wsSubscription = subscription;\n    this._saveTokens();\n    this._setSubscriptionReady(true);\n  }\n\n  private async _refreshSubscription(eventFilters: SubscriptionFilter[]) {\n    if (this._wsSubscription) {\n      this._wsSubscription.eventFilters = eventFilters;\n      await this._wsSubscription.refresh();\n      this._saveTokens();\n    }\n  }\n\n  private async _revokeSubscription() {\n    try {\n      // Prior using ws channel for revoking, it is faster\n      if (this._wsSubscription) {\n        await this._wsSubscription.revoke();\n      }\n      // Try to revoke over RESTful API\n      // When page reload we do have cached subscriptionInfo but not _wsSubscription object\n      else if (this.subscriptionInfo) {\n        await this._client.service.platform().delete(this.subscriptionInfo.uri);\n      }\n    } catch (ex) {\n      // ignore error of revoke request\n      if (process.env.NODE_ENV !== 'test') {\n        logger.warn(`[${this.identifier}] > _revokeSubscription > ${ex}`);\n      }\n    }\n    this._wsSubscription = undefined;\n    this._clearTokens(); // once subscription is revoked, all tokens are expired\n    this._setSubscriptionReady(false);\n  }\n\n  // Remove client side subscription object only\n  private async _removeSubscription() {\n    if (this._wsSubscription) {\n      try {\n        this._wsSubscription.remove();\n      } catch (ex) {\n        // ignore error of remove request\n        if (process.env.NODE_ENV !== 'test') {\n          logger.warn(`[${this.identifier}] > _removeSubscription > ${ex}`);\n        }\n      }\n      this._wsSubscription = undefined;\n    }\n    this._setSubscriptionReady(false);\n  }\n\n  @delegate('server')\n  private async _updateSubscription() {\n    // only when websocket is ready for create/refresh/revoke subscription\n    if (!this._ringCentralExtensions.isWebSocketReady) {\n      return;\n    }\n\n    const eventFilters = this.getFilters();\n    if (!eventFilters.length) {\n      await this._revokeSubscription();\n      return;\n    }\n\n    if (!this._wsSubscription) {\n      await this._obtainSubscription(eventFilters);\n      return;\n    }\n\n    if (\n      !isTheSameEventFilters(\n        eventFilters,\n        this._wsSubscription.subscriptionInfo?.eventFilters ?? [],\n      )\n    ) {\n      await this._refreshSubscription(eventFilters);\n      return;\n    }\n  }\n\n  private _debouncedUpdateSubscription = promisedDebounce({\n    fn: this._updateSubscription,\n    threshold: DEFAULT_REFRESH_DELAY,\n  });\n\n  private async _debouncedUpdateSubscriptionCatchCancel() {\n    try {\n      await this._debouncedUpdateSubscription();\n    } catch (error: any /** TODO: confirm with instanceof */) {\n      if (error.message !== 'cancelled') {\n        throw error;\n      }\n    }\n  }\n\n  /**\n   * Registers a module to receive WebSocket subscription events\n   * @param {RcModule} module - The module to register\n   * @param {SubscriptionMetadata} metadata - Metadata containing filters and handlers\n   */\n  register(module: RcModule, metadata: SubscriptionMetadata) {\n    // Register subscriber\n    const subscriber: SubscriberInfo = { metadata };\n    this._subscriberMap.set(module, subscriber);\n    // Monitor subscriber ready state\n    this._updateSubscriberReady(module);\n    subscriber.unwatch = watch(\n      module,\n      () => module.ready,\n      () => {\n        this._updateSubscriberReady(module);\n      },\n    );\n  }\n\n  unregister(module: RcModule) {\n    const subscriber = this._subscriberMap.get(module);\n    if (subscriber?.unwatch) {\n      subscriber.unwatch();\n      subscriber.unwatch = undefined;\n      this._subscriberMap.delete(module);\n    }\n  }\n\n  private getFilters() {\n    // Registered filters\n    const filters = Array.from(this._subscriberMap.values()).reduce<\n      SubscriptionFilter[]\n    >((acc, { metadata }) => acc.concat(metadata.filters), []);\n\n    // Merge with subscribed filters\n    const filterSet = new Set([...filters, ...this.filters]);\n\n    return [...filterSet];\n  }\n\n  _updateSubscriberReady(module: RcModule) {\n    // Send buffered messages to the current ready subscriber\n    if (module.ready) {\n      this.messageBuffer.forEach((message) => {\n        this._dispatchModuleMessage(module, message);\n      });\n      if (process.env.NODE_ENV !== 'test') {\n        logger.log(\n          `[${this.identifier}] > ${getRef(module).identifier} ready with ${\n            this.messageBuffer.length\n          } buffered messages`,\n        );\n      }\n    }\n\n    // Check if all subscribers are ready\n    this._subscribersAreReady = Array.from(this._subscriberMap.keys()).every(\n      (x) => x.ready,\n    );\n\n    // Clear message buffer when all subscribers are ready\n    if (this._subscribersAreReady) {\n      this._clearMessageBuffer();\n    }\n  }\n\n  _dispatchMessage(message: unknown) {\n    if (!this._subscribersAreReady) {\n      this._pushMessageBuffer(message);\n    }\n    this._subscriberMap.forEach((_, module) => {\n      if (!module.ready) return;\n      this._dispatchModuleMessage(module, message);\n    });\n  }\n\n  _dispatchModuleMessage(module: RcModule, message: unknown) {\n    const subscriber = this._subscriberMap.get(module);\n    if (!subscriber?.metadata.handler) return;\n    try {\n      subscriber.metadata.handler.apply(module, [message]);\n    } catch (ex) {\n      logger.error(`[${this.identifier}] > _dispatchMessage error`, ex);\n    }\n  }\n\n  @action\n  _pushMessageBuffer(message: unknown) {\n    const bufferSize =\n      this._ringCentralExtensions.webSocketExtension?.connectionDetails\n        ?.recoveryBufferSize ?? DEFAULT_RECOVERY_BUFFER_SIZE;\n\n    if (this.messageBuffer.length > bufferSize) {\n      this.messageBuffer.shift();\n    }\n\n    this.messageBuffer.push(message);\n  }\n\n  @action\n  _clearMessageBuffer() {\n    this.messageBuffer = [];\n  }\n\n  @state\n  messageBuffer: unknown[] = [];\n\n  /**\n   * @deprecated\n   * Use \"register\" instead\n   */\n  @delegate('server')\n  async subscribe(eventFilters: SubscriptionFilter[] = []) {\n    if (!this.ready) {\n      return;\n    }\n    const oldLength = this.filters.length;\n    this._addFilters(eventFilters);\n    if (oldLength !== this.filters.length) {\n      await this._debouncedUpdateSubscriptionCatchCancel();\n    }\n  }\n\n  @delegate('server')\n  async unsubscribe(eventFilters: SubscriptionFilter[] = []) {\n    if (!this.ready) {\n      return;\n    }\n    const oldLength = this.filters.length;\n    this._removeFilters(eventFilters);\n    if (oldLength !== this.filters.length) {\n      await this._debouncedUpdateSubscriptionCatchCancel();\n    }\n  }\n\n  @action\n  private _addFilters(eventFilters: SubscriptionFilter[]) {\n    this.filters = this.filters\n      .concat(eventFilters)\n      .filter((x, index, array) => array.indexOf(x) === index); // remove duplicates\n  }\n\n  @action\n  private _removeFilters(eventFilters: SubscriptionFilter[]) {\n    this.filters = this.filters.filter((x) => !eventFilters.includes(x));\n  }\n\n  /**\n   * Notifies subscribers about a received message\n   * @param {any} message - The message received from WebSocket\n   * @returns {void}\n   */\n  @action\n  private _notifyMessage(message: any) {\n    this.message = message ?? null;\n  }\n\n  @state\n  filters: SubscriptionFilter[] = [];\n\n  @state\n  message?: unknown = null;\n\n  message$ = fromWatch(this, () => this.message).pipe(share());\n\n  /**\n   * filter message by event type\n   *\n   * @param eventType event type end of the event name, or a regex to match the event name\n   */\n  fromMessage$<T>(eventType: string | RegExp) {\n    const matchRegex =\n      eventType instanceof RegExp ? eventType : new RegExp(`${eventType}$`);\n\n    return this.message$.pipe(\n      filter((message: any) => matchRegex.test(message['event'])),\n      map((message: any) => message['body'] as T),\n      filter(Boolean),\n      share(),\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}