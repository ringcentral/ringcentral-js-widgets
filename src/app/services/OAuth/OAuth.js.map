{"version":3,"file":"OAuth.js","names":["_services","require","_nextCore","_utils","_popWindow","_uuid","_Auth","_Client","_OAuthBase2","_dec","_dec2","_dec3","_dec4","_dec5","_class","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","OAuth","exports","injectable","name","target","optional","undefined","metadata","Function","Client","RouterPlugin","PortManager","Auth","Toast","Locale","Brand","OAuthOptions","_OAuthBase","_client","_router","_portManager","_auth","_toast","_locale","_brand","_tabManager","_oAuthOptions","_oAuthOptions2","_this","_oAuthOptions$loginPa","_oAuthOptions$redirec","_oAuthOptions$restric","loginPath","redirectUri","concat","global","origin","restrictSameOriginRedirectUri","v4","_loginWindow","_redirectCheckTimeout","_isInElectron","isElectron","isSharedWorker","isWebWorker","shared","isWorkerMode","onClient","initialize","get","_this$_oAuthOptions","prefix","_this$_oAuthOptions2","indexOf","combinedState","_this$_oAuthOptions3","json","JSON","stringify","now","Date","uuid","extraStateProps","encoded","btoa","prefixedUuidState","encodeURIComponent","_this2","window","addEventListener","close","error","_ref","_ref$data","data","callbackUri","_clearRedirectCheckTimeout","handleCallbackLogin","callbackUriStorageKey","newValue","localStorage","removeItem","watchOAuth","watch","ready","loggedIn","currentPath","oAuthReady","multiple","_this$_oAuthOptions4","atLoginPage","setupOAuth","destroyOAuth","oAuthCallback","_setupOAuth","_callee","_this3","_context","setOAuthReady","_destroyOAuth","_callee2","_context2","_openOAuthPage","_callee3","_context3","openOAuthPageInOtherRouter","openOAuthPage","_openOAuthPageInOtherRouter","_callee4","uri","_context4","checkLoginUrlWithDiscovery","getOAuthUri","popWindow","logger","log","isRedirectUriSameOrigin","_setupRedirectCheckTimeout","clearTimeout","_setupRedirectCheckTimeout2","_callee5","_this4","_context5","setTimeout","closed","location","href","OAuthBase"],"sources":["src/app/services/OAuth/OAuth.ts"],"sourcesContent":["import {\n  Brand,\n  Locale,\n  Toast,\n} from '@ringcentral-integration/micro-core/src/app/services';\nimport {\n  injectable,\n  isSharedWorker,\n  isWebWorker,\n  optional,\n  PortManager,\n  RouterPlugin,\n  watch,\n  logger,\n} from '@ringcentral-integration/next-core';\nimport { isElectron } from '@ringcentral-integration/utils';\nimport { popWindow } from '@ringcentral-integration/widgets/lib/popWindow';\nimport { v4 } from 'uuid';\n\nimport { Auth } from '../Auth';\nimport { Client } from '../Client';\nimport { OAuthBase } from '../OAuthBase';\n\nimport type { CombinedAuthState, OAuthOptions } from './OAuth.interface';\n\n@injectable({\n  name: 'OAuth',\n})\nexport class OAuth extends OAuthBase {\n  private _uuid = v4();\n  private _loginWindow: Window | null = null;\n  private _redirectCheckTimeout: NodeJS.Timeout | null = null;\n  private _isInElectron = isElectron();\n\n  constructor(\n    protected _client: Client,\n    protected _router: RouterPlugin,\n    protected _portManager: PortManager,\n    protected override _auth: Auth,\n    protected override _toast: Toast,\n    protected override _locale: Locale,\n    protected override _brand: Brand,\n    @optional('TabManager')\n    protected override _tabManager?: any,\n    @optional('OAuthOptions')\n    protected override _oAuthOptions?: OAuthOptions,\n  ) {\n    _oAuthOptions = _oAuthOptions ?? {};\n    if (_oAuthOptions) {\n      _oAuthOptions.loginPath = _oAuthOptions.loginPath ?? '/';\n      _oAuthOptions.redirectUri =\n        _oAuthOptions.redirectUri ?? `${global.origin}/redirect.html`;\n      _oAuthOptions.restrictSameOriginRedirectUri =\n        _oAuthOptions.restrictSameOriginRedirectUri ?? true;\n    }\n    super(_auth, _toast, _locale, _brand, _tabManager, _oAuthOptions);\n    if (!isSharedWorker && !isWebWorker) {\n      if (this._portManager.shared && this._portManager.isWorkerMode) {\n        this._portManager.onClient(() => {\n          // execute this code when client is opened\n          this.initialize();\n        });\n      } else {\n        this.initialize();\n      }\n    }\n  }\n\n  get prefix() {\n    return this._oAuthOptions?.prefix;\n  }\n\n  get restrictSameOriginRedirectUri() {\n    return this._oAuthOptions?.restrictSameOriginRedirectUri;\n  }\n\n  get isRedirectUriSameOrigin() {\n    return this.restrictSameOriginRedirectUri\n      ? this.redirectUri.indexOf(global.origin) === 0\n      : true;\n  }\n\n  protected combinedState() {\n    const json = JSON.stringify({\n      now: Date.now(),\n      uuid: this._uuid,\n      prefix: this.prefix,\n      origin: global.origin,\n      ...this._oAuthOptions?.extraStateProps,\n    } satisfies CombinedAuthState);\n    const encoded = global.btoa(json);\n    return encoded;\n  }\n\n  protected prefixedUuidState() {\n    return `${this.prefix}-${encodeURIComponent(btoa(this._uuid))}`;\n  }\n\n  override get authState() {\n    return `${this.combinedState()}-${this.prefixedUuidState()}`;\n  }\n\n  initialize() {\n    // close login window when unload and login window exist\n    window.addEventListener('beforeunload', () => {\n      if (this._loginWindow) {\n        try {\n          this._loginWindow.close();\n        } catch (error) {\n          /* ignore error */\n        }\n      }\n    });\n\n    // listen callback uri from redirect page, works with coss origin redirect page\n    window.addEventListener('message', ({ data = {} }) => {\n      if (!data) {\n        return;\n      }\n      const { callbackUri } = data;\n      if (callbackUri) {\n        this._clearRedirectCheckTimeout();\n        this.handleCallbackLogin(callbackUri);\n      }\n    });\n\n    // listen callback uri from storage, works only with same origin\n    window.addEventListener('storage', (e) => {\n      const callbackUriStorageKey = `${this.prefixedUuidState()}-callbackUri`;\n      if (e.key === callbackUriStorageKey && e.newValue) {\n        const callbackUri = e.newValue;\n        localStorage.removeItem(callbackUriStorageKey);\n        this._clearRedirectCheckTimeout();\n        this.handleCallbackLogin(callbackUri);\n      }\n    });\n\n    // When a new tab is opened, there may be no dispatch running at this time.\n    // So watch is not checking at the time and needs to be checked once manually.\n    this.watchOAuth();\n\n    watch(\n      this,\n      () =>\n        [\n          this.ready,\n          this._auth.loggedIn,\n          this._router.currentPath,\n          this.oAuthReady,\n        ] as const,\n      () => this.watchOAuth(),\n      { multiple: true },\n    );\n  }\n\n  watchOAuth() {\n    const atLoginPage =\n      this._router.currentPath === this._oAuthOptions?.loginPath;\n\n    if (this.ready && !this._auth.loggedIn && atLoginPage && !this.oAuthReady) {\n      this.setupOAuth();\n    } else if (this._auth.loggedIn || !atLoginPage) {\n      this.destroyOAuth();\n    }\n    // Make sure that window.oAuthCallback is set in every client.\n    if (this.oAuthReady && !window.oAuthCallback) {\n      this.setupOAuth();\n    }\n  }\n\n  async setupOAuth() {\n    if (this.oAuthReady && window.oAuthCallback) return;\n\n    window.oAuthCallback = (callbackUri) => {\n      this._clearRedirectCheckTimeout();\n      this.handleCallbackLogin(callbackUri);\n    };\n\n    this.setOAuthReady(true);\n  }\n\n  async destroyOAuth() {\n    if (!this.oAuthReady && !window.oAuthCallback) return;\n    window.oAuthCallback = null;\n    this.setOAuthReady(false);\n  }\n\n  async openOAuthPage() {\n    if (!this.oAuthReady) return;\n    await this.openOAuthPageInOtherRouter();\n  }\n\n  async openOAuthPageInOtherRouter() {\n    await this._client.checkLoginUrlWithDiscovery();\n\n    const uri = await this.getOAuthUri();\n    this._loginWindow = popWindow(uri, 'rc-oauth', 700, 700);\n\n    logger.log('setup redirect check timeout', this.isRedirectUriSameOrigin);\n    if (this.isRedirectUriSameOrigin) {\n      this._setupRedirectCheckTimeout();\n    }\n  }\n\n  private _clearRedirectCheckTimeout() {\n    if (this._redirectCheckTimeout === null) return;\n\n    clearTimeout(this._redirectCheckTimeout);\n  }\n\n  private async _setupRedirectCheckTimeout() {\n    this._clearRedirectCheckTimeout();\n    this._redirectCheckTimeout = setTimeout(() => {\n      this._redirectCheckTimeout = null;\n\n      if (\n        !this._loginWindow ||\n        this._loginWindow.closed ||\n        // for electron, the .window is always undefined\n        (!this._isInElectron && !this._loginWindow.window)\n      ) {\n        this._loginWindow = null;\n        logger.log('no login window or electron, closed');\n        return;\n      }\n\n      try {\n        const callbackUri = this._loginWindow.location.href;\n        if (callbackUri.indexOf(this.redirectUri) !== -1) {\n          this._loginWindow.close();\n          this._loginWindow = null;\n          this.handleCallbackLogin(callbackUri);\n          logger.log('get call back uri, closed');\n          return;\n        }\n      } catch (e) {\n        // ignore e\n        // console.log('checking redirect uri');\n      }\n      this._setupRedirectCheckTimeout();\n    }, 1000);\n  }\n}\n"],"mappings":"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","ignoreList":[]}