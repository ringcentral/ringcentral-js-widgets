{"version":3,"file":"EnsureAudio.js","names":["_nextCore","require","_rxjs","_ensureAudioSoundPermission","_dec","_class","_classCallCheck","a","n","TypeError","_defineProperties","e","r","t","length","o","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","prototype","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","String","Number","EnsureAudio","exports","injectable","name","audioSoundPermission","ensureAudioSoundPermission","value","ensure","_this","global","document","events$","merge","fromEvent","pipe","switchMap","filter","Boolean","take","subscribe"],"sources":["src/app/services/EnsureAudio/EnsureAudio.ts"],"sourcesContent":["import { injectable } from '@ringcentral-integration/next-core';\nimport { filter, fromEvent, merge, switchMap, take } from 'rxjs';\n\nimport { ensureAudioSoundPermission } from './ensureAudioSoundPermission';\n\n@injectable({\n  name: 'EnsureAudio',\n})\nexport class EnsureAudio {\n  private audioSoundPermission = ensureAudioSoundPermission();\n\n  /**\n   * ensure audio sound permission when user interact with document\n   */\n  ensure() {\n    if (global.document) {\n      const events$ = merge(\n        fromEvent(document, 'click'),\n        fromEvent(document, 'keydown'),\n      );\n\n      events$\n        .pipe(\n          switchMap(() => this.audioSoundPermission.ensure()),\n          filter(Boolean),\n          take(1),\n        )\n        .subscribe();\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAEA,IAAAE,2BAAA,GAAAF,OAAA;AAA0E,IAAAG,IAAA,EAAAC,MAAA;AAAA,SAAAC,gBAAAC,CAAA,EAAAC,CAAA,UAAAD,CAAA,YAAAC,CAAA,aAAAC,SAAA;AAAA,SAAAC,kBAAAC,CAAA,EAAAC,CAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAD,CAAA,CAAAE,MAAA,EAAAD,CAAA,UAAAE,CAAA,GAAAH,CAAA,CAAAC,CAAA,GAAAE,CAAA,CAAAC,UAAA,GAAAD,CAAA,CAAAC,UAAA,QAAAD,CAAA,CAAAE,YAAA,kBAAAF,CAAA,KAAAA,CAAA,CAAAG,QAAA,QAAAC,MAAA,CAAAC,cAAA,CAAAT,CAAA,EAAAU,cAAA,CAAAN,CAAA,CAAAO,GAAA,GAAAP,CAAA;AAAA,SAAAQ,aAAAZ,CAAA,EAAAC,CAAA,EAAAC,CAAA,WAAAD,CAAA,IAAAF,iBAAA,CAAAC,CAAA,CAAAa,SAAA,EAAAZ,CAAA,GAAAC,CAAA,IAAAH,iBAAA,CAAAC,CAAA,EAAAE,CAAA,GAAAM,MAAA,CAAAC,cAAA,CAAAT,CAAA,iBAAAO,QAAA,SAAAP,CAAA;AAAA,SAAAU,eAAAR,CAAA,QAAAY,CAAA,GAAAC,YAAA,CAAAb,CAAA,gCAAAc,OAAA,CAAAF,CAAA,IAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAC,aAAAb,CAAA,EAAAD,CAAA,oBAAAe,OAAA,CAAAd,CAAA,MAAAA,CAAA,SAAAA,CAAA,MAAAF,CAAA,GAAAE,CAAA,CAAAe,MAAA,CAAAC,WAAA,kBAAAlB,CAAA,QAAAc,CAAA,GAAAd,CAAA,CAAAmB,IAAA,CAAAjB,CAAA,EAAAD,CAAA,gCAAAe,OAAA,CAAAF,CAAA,UAAAA,CAAA,YAAAhB,SAAA,yEAAAG,CAAA,GAAAmB,MAAA,GAAAC,MAAA,EAAAnB,CAAA;AAAA,IAK7DoB,WAAW,GAAAC,OAAA,CAAAD,WAAA,IAAA7B,IAAA,GAHvB,IAAA+B,oBAAU,EAAC;EACVC,IAAI,EAAE;AACR,CAAC,CAAC,EAAAhC,IAAA,CAAAC,MAAA;EAAA,SAAA4B,YAAA;IAAA3B,eAAA,OAAA2B,WAAA;IAAA,KAEQI,oBAAoB,GAAG,IAAAC,sDAA0B,EAAC,CAAC;EAAA;EAAA,OAAAf,YAAA,CAAAU,WAAA;IAAAX,GAAA;IAAAiB,KAAA;IAE3D;AACF;AACA;IACE,SAAAC,MAAMA,CAAA,EAAG;MAAA,IAAAC,KAAA;MACP,IAAIC,MAAM,CAACC,QAAQ,EAAE;QACnB,IAAMC,OAAO,GAAG,IAAAC,WAAK,EACnB,IAAAC,eAAS,EAACH,QAAQ,EAAE,OAAO,CAAC,EAC5B,IAAAG,eAAS,EAACH,QAAQ,EAAE,SAAS,CAC/B,CAAC;QAEDC,OAAO,CACJG,IAAI,CACH,IAAAC,eAAS,EAAC;UAAA,OAAMP,KAAI,CAACJ,oBAAoB,CAACG,MAAM,CAAC,CAAC;QAAA,EAAC,EACnD,IAAAS,YAAM,EAACC,OAAO,CAAC,EACf,IAAAC,UAAI,EAAC,CAAC,CACR,CAAC,CACAC,SAAS,CAAC,CAAC;MAChB;IACF;EAAC;AAAA,QAAA/C,MAAA","ignoreList":[]}