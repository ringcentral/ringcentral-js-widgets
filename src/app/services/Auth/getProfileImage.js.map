{"version":3,"file":"getProfileImage.js","names":["CONTACT_AVATAR_SIZE_MAP","exports","xsmall","small","large","original","getProfileImage","_ref","profileImage","accessToken","size","uri","etag","undefined","url","URL","pathname","concat","searchParams","append","toString","error","console","warn"],"sources":["src/app/services/Auth/getProfileImage.ts"],"sourcesContent":["import type AccountDirectoryProfileImageResource from '@rc-ex/core/lib/definitions/AccountDirectoryProfileImageResource';\nimport type { ContactAvatarSize } from '@ringcentral-integration/commons/interfaces/Contact.model';\n\nexport const CONTACT_AVATAR_SIZE_MAP = {\n  xsmall: '90x90',\n  small: '195x195',\n  large: '584x584',\n  original: 'original',\n} as const;\n\ntype GetProfileImageOptions = {\n  profileImage: AccountDirectoryProfileImageResource;\n  accessToken?: string;\n  size?: ContactAvatarSize;\n};\n\nexport const getProfileImage = ({\n  profileImage,\n  accessToken,\n  size,\n}: GetProfileImageOptions) => {\n  const uri = profileImage?.uri;\n  const etag = profileImage.etag;\n\n  if (\n    !accessToken ||\n    !uri ||\n    // in platform must have etag means that the image is valid and exist, not have may not have image due to the backend sync image issue\n    !etag\n  )\n    return undefined;\n\n  try {\n    const url = new URL(uri);\n\n    // add size to pathname\n    if (size) {\n      url.pathname = `${url.pathname}/${CONTACT_AVATAR_SIZE_MAP[size]}`;\n    }\n\n    url.searchParams.append('access_token', accessToken);\n    url.searchParams.append('etag', etag);\n\n    return url.toString();\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.warn(`[getProfileImage] getProfileImageSync error`);\n\n    return undefined;\n  }\n};\n"],"mappings":";;;;;;;;;;;;;;;;;AAGO,IAAMA,uBAAuB,GAAAC,OAAA,CAAAD,uBAAA,GAAG;EACrCE,MAAM,EAAE,OAAO;EACfC,KAAK,EAAE,SAAS;EAChBC,KAAK,EAAE,SAAS;EAChBC,QAAQ,EAAE;AACZ,CAAU;AAQH,IAAMC,eAAe,GAAAL,OAAA,CAAAK,eAAA,GAAG,SAAlBA,eAAeA,CAAAC,IAAA,EAIE;EAAA,IAH5BC,YAAY,GAAAD,IAAA,CAAZC,YAAY;IACZC,WAAW,GAAAF,IAAA,CAAXE,WAAW;IACXC,IAAI,GAAAH,IAAA,CAAJG,IAAI;EAEJ,IAAMC,GAAG,GAAGH,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEG,GAAG;EAC7B,IAAMC,IAAI,GAAGJ,YAAY,CAACI,IAAI;EAE9B,IACE,CAACH,WAAW,IACZ,CAACE,GAAG;EACJ;EACA,CAACC,IAAI,EAEL,OAAOC,SAAS;EAElB,IAAI;IACF,IAAMC,GAAG,GAAG,IAAIC,GAAG,CAACJ,GAAG,CAAC;;IAExB;IACA,IAAID,IAAI,EAAE;MACRI,GAAG,CAACE,QAAQ,MAAAC,MAAA,CAAMH,GAAG,CAACE,QAAQ,OAAAC,MAAA,CAAIjB,uBAAuB,CAACU,IAAI,CAAC,CAAE;IACnE;IAEAI,GAAG,CAACI,YAAY,CAACC,MAAM,CAAC,cAAc,EAAEV,WAAW,CAAC;IACpDK,GAAG,CAACI,YAAY,CAACC,MAAM,CAAC,MAAM,EAAEP,IAAI,CAAC;IAErC,OAAOE,GAAG,CAACM,QAAQ,CAAC,CAAC;EACvB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd;IACAC,OAAO,CAACC,IAAI,8CAA8C,CAAC;IAE3D,OAAOV,SAAS;EAClB;AACF,CAAC","ignoreList":[]}