{"version":3,"file":"Environment.js","names":["_nextCore","require","_nextMicro","_sdk","_Client","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","call","slice","constructor","name","Array","from","test","n","l","Symbol","iterator","i","u","f","next","done","isArray","_regenerator","toStringTag","c","prototype","Generator","create","_regeneratorDefine2","p","y","G","v","d","bind","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","_regeneratorDefine","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","reverse","reduce","_initializerWarningHelper","Error","DEFAULT_RECORDING_HOST","TWO_HOURS_IN_MILLISECONDS","Environment","exports","injectable","target","inject","undefined","optional","metadata","Function","Client","StoragePlugin","SDKConfig","PortManager","EnvironmentOptions","MfeDeps","delegate","SetDataOptions","_RcModule","_client","_storage","_sdkConfig","_portManager","_environmentOptions","_this","enable","whitelist","recordingHostState","_defaultRecordingHost","globalThis","localStorage","mfeName","onUpdateEntry","newValue","_newValue$meta","meta","local","updateStorageMfeInfo","shared","onMainTab","watchMfeDepsInfo","get","getMfeDeps","getMeta","data","main","_onInit","_callee","_context","enabled","changeEnvironment","onInit","_this2","unsubscribe","subscribe","mfeDepsInfo","mfeDeps","setMfeDepsInfo","entries","map","_ref","_ref2","entry","stopWatching","watch","_ref3","updateStorageEntry","version","_setMfeDepsInfo","_setMfeDepsInfo2","_callee2","_context2","_x","_setEnvData","_ref4","server","recordingHost","allowDataTracking","JSON","parse","_toggleEnableAnalytics","enabledDataTrackingTimestamp","Date","now","updateChangeCounter","changeCounter","_changeEnvironment","_callee3","sdkConfig","discovery","_discovery$removeExte","_discovery$removeInit","_context3","_getSdkConfig","enableDiscovery","service","platform","removeExternalData","removeInitialData","setService","newConfig","discoveryServer","_setData","_callee4","_ref5","_ref5$allowDataTracki","_ref5$environmentChan","environmentChanged","isEnvChanged","_context4","setData","_x2","_toggleAnalytics","_callee5","_args5","_context5","toggleAnalytics","debugDataTrackingEnable","timestamp","isWithinTwoHours","process","env","NODE_ENV","BUILD_ENVIRONMENT","includes","_this$_environmentOpt","_this$_environmentOpt2","defaultRecordingHost","RcModule","globalStorage","state","action","SDK","sandbox"],"sources":["src/app/services/Environment/Environment.ts"],"sourcesContent":["import type { SDKConfig } from '@ringcentral-integration/commons/lib/createSdkConfig';\nimport {\n  action,\n  inject,\n  injectable,\n  optional,\n  delegate,\n  RcModule,\n  state,\n  StoragePlugin,\n  watch,\n  PortManager,\n  globalStorage,\n  subscribe,\n} from '@ringcentral-integration/next-core';\nimport {\n  onUpdateEntry,\n  updateStorageEntry,\n  getMeta,\n  getMfeDeps,\n} from '@ringcentral-integration/next-micro';\nimport { SDK } from '@ringcentral/sdk';\n\nimport { Client } from '../Client';\n\nimport type {\n  EnvironmentOptions,\n  MfeDeps,\n  SetDataOptions,\n} from './Environment.interface';\n\nconst DEFAULT_RECORDING_HOST =\n  'https://apps.ringcentral.com/integrations/recording/v3.0/rc/index.html';\nconst TWO_HOURS_IN_MILLISECONDS = 2 * 60 * 60 * 1000;\n\n@injectable({\n  name: 'Environment',\n})\nexport class Environment extends RcModule {\n  constructor(\n    protected _client: Client,\n    protected _storage: StoragePlugin,\n    @inject('SdkConfig') protected _sdkConfig: SDKConfig,\n    private _portManager: PortManager,\n    @optional('EnvironmentOptions')\n    protected _environmentOptions?: EnvironmentOptions,\n  ) {\n    super();\n    this._storage.enable(this, {\n      whitelist: ['server', 'recordingHostState', 'enabled', 'mfeDepsInfo'],\n    });\n    this.recordingHostState = this._defaultRecordingHost;\n    if (globalThis.localStorage && this.mfeName) {\n      onUpdateEntry((name, newValue) => {\n        if (newValue.meta?.local) return;\n        this.updateStorageMfeInfo();\n      });\n      if (this._portManager.shared) {\n        this._portManager.onMainTab(() => {\n          this.watchMfeDepsInfo();\n        });\n      } else {\n        this.watchMfeDepsInfo();\n      }\n    }\n  }\n\n  get mfeDeps() {\n    return getMfeDeps();\n  }\n\n  get mfeName() {\n    const meta = getMeta();\n    return meta?.data.main;\n  }\n\n  override async onInit() {\n    if (this.enabled) {\n      await this.changeEnvironment();\n    }\n  }\n\n  watchMfeDepsInfo() {\n    const unsubscribe = subscribe(this, () => {\n      if (this.mfeDepsInfo.length < Object.keys(this.mfeDeps).length) {\n        this.setMfeDepsInfo(\n          Object.entries(this.mfeDeps).map(([name, { entry }]) => ({\n            name,\n            entry,\n          })),\n        );\n      }\n    });\n    const stopWatching = watch(\n      this,\n      () => this.mfeDepsInfo,\n      () => {\n        this.updateStorageMfeInfo();\n      },\n    );\n    return () => {\n      unsubscribe();\n      stopWatching();\n    };\n  }\n\n  updateStorageMfeInfo() {\n    if (this.enabled) {\n      this.mfeDepsInfo.forEach(({ name, entry }) => {\n        updateStorageEntry(name, {\n          entry,\n          version: '*',\n          meta: { local: true },\n        });\n      });\n    }\n  }\n\n  @globalStorage\n  @state\n  mfeDepsInfo: MfeDeps = [];\n\n  @action\n  _setMfeDepsInfo(mfeDeps: MfeDeps) {\n    this.mfeDepsInfo = mfeDeps;\n  }\n\n  @delegate('server')\n  async setMfeDepsInfo(mfeDeps: MfeDeps) {\n    this._setMfeDepsInfo(mfeDeps);\n  }\n\n  @globalStorage\n  @state\n  server: SDKConfig['server'] = SDK.server.sandbox;\n\n  @globalStorage\n  @state\n  recordingHostState: string | null = null;\n\n  @globalStorage\n  @state\n  enabled = false;\n\n  @globalStorage\n  @state\n  enabledDataTrackingTimestamp: number | null = null;\n\n  @state\n  changeCounter = 0;\n\n  @action\n  private _setEnvData({\n    server,\n    recordingHost,\n    enabled,\n    allowDataTracking,\n    mfeDepsInfo,\n  }: SetDataOptions) {\n    this.server = server;\n    this.recordingHostState = recordingHost;\n    this.enabled = enabled;\n    this.mfeDepsInfo = JSON.parse(mfeDepsInfo || '[]');\n    this._toggleEnableAnalytics(allowDataTracking);\n  }\n\n  @action\n  private _toggleEnableAnalytics(allowDataTracking: boolean | undefined) {\n    this.enabledDataTrackingTimestamp = allowDataTracking ? Date.now() : null;\n  }\n\n  @action\n  updateChangeCounter() {\n    this.changeCounter++;\n  }\n\n  async changeEnvironment() {\n    const sdkConfig = this._getSdkConfig();\n    if (sdkConfig.enableDiscovery) {\n      // Clear discovery data before switching to new env\n      const discovery = this._client.service.platform().discovery();\n      if (discovery) {\n        await discovery.removeExternalData?.();\n        await discovery.removeInitialData?.();\n      }\n    }\n    await this._client.setService(sdkConfig);\n  }\n\n  private _getSdkConfig() {\n    const newConfig = {\n      ...this._sdkConfig,\n    };\n    if (this.enabled) {\n      newConfig.server = this.server;\n      newConfig.discoveryServer = this.server;\n    }\n    return newConfig;\n  }\n\n  @delegate('server')\n  async setData({\n    server,\n    recordingHost,\n    enabled,\n    allowDataTracking = false,\n    environmentChanged = false,\n    mfeDepsInfo,\n  }: SetDataOptions) {\n    // `recordingHost` change no need to set to SDK\n    const isEnvChanged =\n      environmentChanged ||\n      this.enabled !== enabled ||\n      (enabled && this.server !== server);\n\n    this._setEnvData({\n      server,\n      recordingHost,\n      enabled,\n      allowDataTracking,\n      mfeDepsInfo,\n    });\n\n    if (isEnvChanged) {\n      // apply changes\n      await this.changeEnvironment();\n      // notify change at last\n      this.updateChangeCounter();\n    }\n  }\n\n  @delegate('server')\n  async toggleAnalytics(enable = false) {\n    this._toggleEnableAnalytics(enable);\n  }\n\n  get allowDataTracking() {\n    if (!this.debugDataTrackingEnable) return true;\n\n    const timestamp = this.enabledDataTrackingTimestamp;\n    if (!timestamp) return false;\n\n    const isWithinTwoHours = Date.now() - timestamp < TWO_HOURS_IN_MILLISECONDS;\n\n    return isWithinTwoHours;\n  }\n\n  get recordingHost() {\n    return this.enabled ? this.recordingHostState : this._defaultRecordingHost;\n  }\n\n  /**\n   * when that be true, the data tracking will not auto be tracked, will base on `allowDataTracking` setting to decide whether to track data\n   */\n  get debugDataTrackingEnable() {\n    return Boolean(\n      // in production mode, use data tracking setting to avoid data tracking in those test environment\n      ((process.env.NODE_ENV === 'production' ||\n        // also in test mode same as production to able to test that\n        process.env.NODE_ENV === 'test') &&\n        process.env.BUILD_ENVIRONMENT &&\n        ['dev', 'local', 'reg'].includes(process.env.BUILD_ENVIRONMENT)) ||\n        // in development mode always use data tracking setting, to avoid data tracking in dev mode\n        process.env.NODE_ENV === 'development',\n    );\n  }\n\n  protected get _defaultRecordingHost() {\n    return (\n      this._environmentOptions?.defaultRecordingHost ?? DEFAULT_RECORDING_HOST\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}