{"version":3,"file":"RecentMessages.js","names":["_concurrentExecute","_interopRequireDefault","require","_getDateFrom","_messageHelper","_services","_nextCore","_MessageStore","_messageStatus","_recentMessagesHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_class","_class2","_descriptor","_descriptor2","_descriptor3","e","__esModule","ownKeys","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_regenerator","Symbol","n","iterator","toStringTag","i","c","prototype","Generator","u","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","_regeneratorDefine","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","slice","reverse","reduce","_initializerWarningHelper","Error","RecentMessages","exports","injectable","name","metadata","Function","Client","MessageStore","Record","MessageStatus","LoadSuccessOptions","LoadResetOptions","computed","that","messages","delegate","GetMessagesOptions","_RcModule","_client","_messageStore","_this","onInitOnce","_this2","watch","timestamp","ready","_i","_Object$keys","contacts","getMessages","currentContact","sessionId","indexOf","split","fromLocal","forceUpdate","initLoad","messageStatus","loading","loadSuccess","_ref","contact","loaded","contactId","id","concat","loadReset","_ref2","get","_this3","unreadCounts","acc","cur","readStatus","_getMessages","_callee","_ref3","_ref3$sessionId","_ref3$fromLocal","_ref3$forceUpdate","_context","_getRecentMessages","textConversations","_x","cleanUpMessages","_ref4","_ref4$sessionId","_getRecentMessages2","_callee2","conversations","daySpan","dateFrom","recentMessages","dateTo","_args2","_t","_t2","_context2","undefined","getDateFrom","_getLocalRecentMessages","Date","creationTime","_fetchRemoteRecentMessages","toISOString","console","error","dedup","_x2","_ref5","phoneNumbers","matches","conversation","messageList","conversationStore","conversationId","find","filterPhoneNumber","sort","sortByDate","_fetchRemoteRecentMessages2","_callee3","_ref6","_this4","params","recentMessagesPromise","allMessages","messageRecords","remoteMessage","_args3","_context3","messageType","perPage","_ref7","phoneNumber","promise","_fetchMessageList","concurrentExecute","delay","flattenToMessageRecords","markAsRemoteMessage","sortMessages","_x3","_x4","_this5","account","extension","messageStore","list","RcModule","state","action"],"sources":["src/app/services/RecentMessages/RecentMessages.ts"],"sourcesContent":["import type GetMessageList from '@rc-ex/core/lib/definitions/GetMessageList';\nimport type { Entity } from '@ringcentral-integration/commons/interfaces/Entity.interface';\nimport type {\n  Message,\n  Messages,\n} from '@ringcentral-integration/commons/interfaces/MessageStore.model';\nimport concurrentExecute from '@ringcentral-integration/commons/lib/concurrentExecute';\nimport getDateFrom from '@ringcentral-integration/commons/lib/getDateFrom';\nimport { sortByDate } from '@ringcentral-integration/commons/lib/messageHelper';\nimport { Client } from '@ringcentral-integration/micro-auth/src/app/services';\nimport {\n  action,\n  computed,\n  delegate,\n  injectable,\n  RcModule,\n  state,\n  watch,\n} from '@ringcentral-integration/next-core';\n\nimport type { MessageStoreConversations } from '../MessageStore';\nimport { MessageStore } from '../MessageStore';\n\nimport type {\n  CleanUpMessagesOptions,\n  FetchMessageListOptions,\n  GetMessagesOptions,\n  LoadResetOptions,\n  LoadSuccessOptions,\n  RecentMessage,\n} from './RecentMessages.interface';\nimport { MessageStatus } from './messageStatus';\nimport {\n  dedup,\n  filterPhoneNumber,\n  flattenToMessageRecords,\n  markAsRemoteMessage,\n  sortMessages,\n} from './recentMessagesHelper';\n\n@injectable({\n  name: 'RecentMessages',\n})\nexport class RecentMessages extends RcModule {\n  constructor(\n    protected _client: Client,\n    protected _messageStore: MessageStore,\n  ) {\n    super();\n  }\n\n  override onInitOnce() {\n    watch(\n      this,\n      () => this._messageStore.timestamp,\n      () => {\n        if (this.ready && Object.keys(this.messages).length > 0) {\n          for (const key of Object.keys(this.contacts)) {\n            this.getMessages({\n              currentContact: this.contacts[key],\n              sessionId: key.indexOf('-') > -1 ? key.split('-')[1] : null,\n              fromLocal: false,\n              forceUpdate: true,\n            });\n          }\n        }\n      },\n    );\n  }\n\n  @state\n  contacts: Record<string, Entity> = {};\n\n  @state\n  messages: Record<string, (Message | RecentMessage)[]> = {};\n\n  @state\n  messageStatus: MessageStatus | null = null;\n\n  @action\n  initLoad() {\n    this.messageStatus = MessageStatus.loading;\n  }\n\n  @action\n  loadSuccess({ contact, messages, sessionId }: LoadSuccessOptions) {\n    this.messageStatus = MessageStatus.loaded;\n    const contactId = String(contact && contact.id);\n    const id = sessionId ? `${contactId}-${sessionId}` : contactId;\n    this.contacts[id] = contact;\n    this.messages[id] = messages;\n  }\n\n  @action\n  loadReset({ contact, sessionId }: LoadResetOptions) {\n    const contactId = String(contact && contact.id);\n    const id = sessionId ? `${contactId}-${sessionId}` : contactId;\n    delete this.contacts[id];\n    delete this.messages[id];\n  }\n\n  @computed((that: RecentMessages) => [that.messages])\n  get unreadMessageCounts() {\n    return Object.keys(this.messages).reduce((unreadCounts, contactId) => {\n      unreadCounts[contactId] = this.messages[contactId].reduce(\n        (acc, cur) => acc + (cur.readStatus !== 'Read' ? 1 : 0),\n        0,\n      );\n      return unreadCounts;\n    }, {} as Record<string, number>);\n  }\n\n  get isMessagesLoaded() {\n    return this.messageStatus === MessageStatus.loaded;\n  }\n\n  @delegate('server')\n  async getMessages({\n    currentContact,\n    sessionId = null,\n    fromLocal = false,\n    forceUpdate = false,\n  }: GetMessagesOptions) {\n    // No need to calculate recent messages of the same contact repeatly\n    if (!currentContact) {\n      return;\n    }\n    const contactId = currentContact.id;\n    if (\n      !forceUpdate &&\n      !!this.messages[sessionId ? `${contactId}-${sessionId}` : contactId]\n    ) {\n      return;\n    }\n    this.initLoad();\n    const messages = await this._getRecentMessages(\n      currentContact,\n      this._messageStore.textConversations,\n      fromLocal,\n    );\n    this.loadSuccess({\n      messages,\n      contact: currentContact,\n      sessionId,\n    });\n  }\n\n  cleanUpMessages({ contact, sessionId = null }: CleanUpMessagesOptions) {\n    this.loadReset({\n      contact,\n      sessionId,\n    });\n  }\n\n  /**\n   * Searching for recent messages of specific contact.\n   * @param currentContact - Current contact\n   * @param messages - Messages in messageStore\n   * @param fromLocal - Only get recent messages locally\n   * @param daySpan - Find messages within certain days\n   * @param length - Maximum length of recent messages\n   * @return\n   * @private\n   */\n  async _getRecentMessages(\n    currentContact: Entity,\n    conversations: MessageStoreConversations = [],\n    fromLocal: boolean,\n    daySpan = 60,\n    length = 5,\n  ) {\n    const dateFrom = getDateFrom(daySpan);\n    let recentMessages: (Message | RecentMessage)[] =\n      this._getLocalRecentMessages(\n        currentContact,\n        conversations,\n        dateFrom,\n        length,\n      );\n\n    // If we could not find enough recent messages,\n    // we need to search for messages on server.\n    if (!fromLocal && recentMessages.length < length) {\n      const dateTo =\n        recentMessages.length > 0\n          ? new Date(recentMessages[recentMessages.length - 1].creationTime!)\n          : undefined;\n\n      try {\n        // This will always be sorted\n        recentMessages = recentMessages.concat(\n          await this._fetchRemoteRecentMessages(\n            currentContact,\n            dateFrom.toISOString(),\n            dateTo && dateTo.toISOString(),\n            length,\n          ),\n        );\n      } catch (error) {\n        console.error(error);\n      }\n    }\n\n    recentMessages = dedup(recentMessages);\n    return recentMessages.length > length\n      ? recentMessages.slice(0, length)\n      : recentMessages;\n  }\n\n  /**\n   * Get recent messages from messageStore.\n   */\n  _getLocalRecentMessages(\n    { phoneNumbers }: Entity,\n    conversations: MessageStoreConversations,\n    dateFrom: Date,\n    length: number,\n  ) {\n    // Get all messages related to this contact\n    let recentMessages: Messages = [];\n    let matches;\n    for (let i = conversations.length - 1; i >= 0; i -= 1) {\n      const conversation = conversations[i];\n      const messageList =\n        this._messageStore.conversationStore[conversation.conversationId!] ||\n        [];\n      matches = phoneNumbers!.find(filterPhoneNumber(conversation));\n      // Check if message is within certain days\n      if (!!matches && new Date(conversation.creationTime!) > dateFrom) {\n        recentMessages = recentMessages.concat(messageList);\n      }\n      if (recentMessages.length >= length) break;\n    }\n    return recentMessages.sort(sortByDate).slice(0, length);\n  }\n\n  /**\n   * Fetch recent messages from server by given current contact.\n   */\n  async _fetchRemoteRecentMessages(\n    { phoneNumbers }: Entity,\n    dateFrom: string,\n    dateTo = new Date().toISOString(),\n    length: number,\n  ) {\n    const params = {\n      dateTo,\n      dateFrom,\n      messageType: ['SMS', 'Text', 'Pager'],\n      perPage: length,\n    };\n    const recentMessagesPromise = phoneNumbers!.reduce(\n      (acc, { phoneNumber }) => {\n        if (phoneNumber) {\n          const promise = this._fetchMessageList({\n            ...params,\n            phoneNumber,\n          });\n          return acc.concat(promise);\n        }\n        return acc;\n      },\n      [] as (() => Promise<GetMessageList>)[],\n    );\n\n    // TODO: Because we need to navigate to the message page,\n    // So we may need to push new messages to messageStore\n    const allMessages = await concurrentExecute(recentMessagesPromise, 5, {\n      delay: 500,\n    });\n    const messageRecords = flattenToMessageRecords(allMessages);\n    const remoteMessage = markAsRemoteMessage(messageRecords);\n    return sortMessages(remoteMessage);\n  }\n\n  _fetchMessageList(params: FetchMessageListOptions) {\n    // TODO: Fix type\n    return () =>\n      this._client\n        .account()\n        .extension()\n        .messageStore()\n        .list(params as any) as Promise<GetMessageList>;\n  }\n}\n"],"mappings":"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","ignoreList":[]}