{"version":3,"file":"Locale.js","names":["_detectBrowserLocale","_interopRequireWildcard","require","_i18n","_i18nDayjs","_nextCore","_rxjs","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_class","_class2","_descriptor","_descriptor2","_descriptor3","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t2","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_regenerator","Symbol","iterator","toStringTag","c","prototype","Generator","u","create","_regeneratorDefine2","p","y","G","v","a","d","bind","length","l","TypeError","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","displayName","w","m","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_initializerWarningHelper","Error","_applyDecoratedDescriptor","keys","forEach","slice","reverse","reduce","Locale","exports","injectable","name","target","optional","undefined","metadata","Function","PortManager","BrandConfig","LocaleOptions","Record","delegate","_RcModule","_portManager","_brandConfig","_localeOptions","_this","I18n","setDefaultLocale","defaultLocale","setGetTranslateLocale","currentLocale","shared","onClient","_listenServerToClientLocaleLoad","_detectBrowser","onMainTab","_listenBrowserLocaleChange","_ref","_this$_localeOptions$","_this$_localeOptions","_this$_brandConfig","DEFAULT_LOCALE","_this$_localeOptions$2","_this$_localeOptions2","detectBrowser","_ref2","_this$_localeOptions$3","_this$_localeOptions3","_this$_brandConfig2","supportedLocales","getAcceptLocaleMap","initLocale","browserLocale","_setClientLocaleSuccess","clientId","locale","clientLocales","_setClientLocaleSuccess2","_callee","_context","setClientLocaleSuccess","_x","_x2","_toggleDebugMode","debugMode","setLocale","PSEUDO_LOCALE","_setLocaleSuccess","_onInit","_callee2","_context2","logger","log","onInit","_this2","initClientLocale$","defer","_innerSetAndLoadLocale","pipe","take","switchMap","ready$","fromWatchValue","filter","concatMap","_ref3","_callee3","_context3","clientLocale","_x3","distinctUntilChanged","subscribe","_listenBrowserLocaleChange2","_callee5","_this3","_context5","isSharedWorker","EMPTY","info","fromEvent","globalThis","window","_callee4","_context4","getBrowserLocale","normalizedBrowserLocale","takeUntilAppDestroy","_innerSetAndLoadLocale2","_callee6","_context6","setDayjsLocale","_x4","normalizeLocale","_inputLocale","inputLocale","formatLocale","acceptLocaleMap","languageOnly","split","_ref5","isClient","detectBrowserLocale","_toggleDebugMode2","_callee7","_context7","toggleDebugMode","_setLocale","_callee8","normalize","_locale","_args8","_t","_context8","error","_x5","RcModule","computed","state","action"],"sources":["src/app/services/Locale/Locale.ts"],"sourcesContent":["import detectBrowserLocale, {\n  getBrowserLocale,\n} from '@ringcentral-integration/commons/lib/detectBrowserLocale';\nimport I18n, {\n  DEFAULT_LOCALE,\n  formatLocale,\n  getAcceptLocaleMap,\n  PSEUDO_LOCALE,\n} from '@ringcentral-integration/i18n';\nimport { setDayjsLocale } from '@ringcentral-integration/i18n-dayjs';\nimport {\n  action,\n  computed,\n  delegate,\n  fromWatchValue,\n  injectable,\n  isSharedWorker,\n  optional,\n  PortManager,\n  RcModule,\n  state,\n  takeUntilAppDestroy,\n} from '@ringcentral-integration/next-core';\nimport {\n  concatMap,\n  defer,\n  distinctUntilChanged,\n  EMPTY,\n  filter,\n  fromEvent,\n  switchMap,\n  take,\n} from 'rxjs';\n\nimport type { BrandConfig } from '../Brand';\n\nimport type { LocaleOptions } from './Locale.interface';\n\n@injectable({\n  name: 'Locale',\n})\nexport class Locale extends RcModule {\n  constructor(\n    protected _portManager: PortManager,\n    @optional('BrandConfig') protected _brandConfig?: BrandConfig,\n    @optional('LocaleOptions') protected _localeOptions?: LocaleOptions,\n  ) {\n    super();\n    I18n.setDefaultLocale(this.defaultLocale);\n    I18n.setGetTranslateLocale(() => this.currentLocale);\n\n    if (this._portManager.shared) {\n      this._portManager.onClient(() => {\n        this._listenServerToClientLocaleLoad();\n      });\n    }\n\n    if (this._detectBrowser && this._detectBrowser !== 'once') {\n      if (this._portManager.shared) {\n        this._portManager.onMainTab(() => {\n          this._listenBrowserLocaleChange();\n        });\n      } else {\n        this._listenBrowserLocaleChange();\n      }\n    }\n  }\n\n  get defaultLocale() {\n    return (\n      this._localeOptions?.defaultLocale ??\n      this._brandConfig?.defaultLocale ??\n      DEFAULT_LOCALE\n    );\n  }\n\n  protected get _detectBrowser() {\n    return this._localeOptions?.detectBrowser ?? true;\n  }\n\n  @computed\n  get supportedLocales() {\n    return (\n      this._localeOptions?.supportedLocales ??\n      this._brandConfig?.supportedLocales ?? [this.defaultLocale]\n    );\n  }\n\n  @computed\n  get acceptLocaleMap() {\n    return getAcceptLocaleMap(this.supportedLocales);\n  }\n\n  @computed\n  get initLocale() {\n    const initLocale = this._detectBrowser\n      ? this.browserLocale\n      : this.defaultLocale;\n\n    return initLocale;\n  }\n\n  @state\n  locale: string | null = null;\n\n  @state\n  clientLocales: Record<string, string | null> = {};\n\n  @action\n  _setClientLocaleSuccess(clientId: string, locale: string | null) {\n    this.clientLocales[clientId] = locale;\n  }\n\n  get clientLocale() {\n    if (!this._portManager.clientId) return null;\n    return this.clientLocales[this._portManager.clientId];\n  }\n\n  @delegate('server')\n  async setClientLocaleSuccess(clientId: string, locale: string | null) {\n    if (this.clientLocales[clientId] !== locale) {\n      this._setClientLocaleSuccess(clientId, locale);\n    }\n  }\n\n  @state\n  debugMode = false;\n\n  @action\n  _toggleDebugMode() {\n    this.debugMode = !this.debugMode;\n    // TODO: refactor without side effect.\n    if (this.debugMode) {\n      this.setLocale(PSEUDO_LOCALE, false);\n    }\n  }\n\n  @action\n  _setLocaleSuccess(locale: string) {\n    this.locale = locale;\n  }\n\n  override async onInit() {\n    const initLocale = this._detectBrowser\n      ? this.browserLocale\n      : this.defaultLocale;\n    this.logger.log('initLocale', initLocale);\n\n    await this.setLocale(initLocale, false);\n  }\n\n  private _listenServerToClientLocaleLoad() {\n    const initClientLocale$ = defer(() => {\n      const initLocale = this.initLocale;\n\n      this.logger.log('client initLocale', initLocale);\n\n      return this._innerSetAndLoadLocale(initLocale);\n    }).pipe(\n      take(1),\n      switchMap((locale) => {\n        // set local state async to make we can get the locale client state as soon as possible\n        this._setClientLocaleSuccess(this._portManager.clientId!, locale);\n\n        // also sync to server\n        return this.setClientLocaleSuccess(this._portManager.clientId!, locale);\n      }),\n    );\n\n    // wait server ready, then set the locale state to load the locale\n    initClientLocale$\n      .pipe(\n        switchMap(() => this.ready$),\n        take(1),\n        switchMap(() => fromWatchValue(this, () => this.locale)),\n        filter(Boolean),\n        concatMap(async (locale) => {\n          if (locale !== this.clientLocale) {\n            await this._innerSetAndLoadLocale(locale);\n            await this.setClientLocaleSuccess(\n              this._portManager.clientId!,\n              locale,\n            );\n          }\n        }),\n        distinctUntilChanged(),\n      )\n      .subscribe();\n  }\n\n  private async _listenBrowserLocaleChange() {\n    // shared worker not support languagechange event\n    if (isSharedWorker) return;\n    this.ready$\n      .pipe(\n        switchMap(() => fromWatchValue(this, () => this.debugMode)),\n        switchMap((debugMode) => {\n          if (debugMode) return EMPTY;\n\n          this.logger.info('listen browser locale change');\n          // https://developer.mozilla.org/en-US/docs/Web/API/Window/languagechange_event\n          return fromEvent(globalThis.window, 'languagechange');\n        }),\n        distinctUntilChanged(),\n        switchMap(async () => {\n          const browserLocale = this.browserLocale;\n          const currentLocale = this.currentLocale;\n\n          this.logger.info('browser locale change', {\n            browserLocale: getBrowserLocale(),\n            normalizedBrowserLocale: browserLocale,\n            currentLocale,\n          });\n\n          if (browserLocale !== currentLocale) {\n            await this.setLocale(browserLocale, false);\n          }\n        }),\n        takeUntilAppDestroy,\n      )\n      .subscribe();\n  }\n\n  protected async _innerSetAndLoadLocale(locale: string) {\n    await I18n.setLocale(locale);\n    setDayjsLocale(locale || this.defaultLocale);\n    return locale;\n  }\n\n  normalizeLocale(_inputLocale: string | null) {\n    if (_inputLocale === null) return this.defaultLocale;\n\n    const inputLocale = formatLocale(_inputLocale);\n\n    // Try exact match first, then language-only match\n    if (this.acceptLocaleMap.has(inputLocale)) {\n      return this.acceptLocaleMap.get(inputLocale)!;\n    }\n\n    // Try language-only match\n    const languageOnly = inputLocale.split('-')[0];\n    if (this.acceptLocaleMap.has(languageOnly)) {\n      return this.acceptLocaleMap.get(languageOnly)!;\n    }\n\n    return this.defaultLocale;\n  }\n\n  get currentLocale(): string {\n    return (\n      (this._portManager.isClient ? this.clientLocale : this.locale) ??\n      this.defaultLocale\n    );\n  }\n\n  get browserLocale() {\n    const locale = detectBrowserLocale(this.defaultLocale);\n    return this.normalizeLocale(locale);\n  }\n\n  @delegate('server')\n  async toggleDebugMode() {\n    this._toggleDebugMode();\n  }\n\n  /**\n   * Sets the desired locale as the current locale.\n   *\n   * by default that will normalize the locale to the supported locales, if you already normalized the locale, you can set `normalize` to false\n   * @param locale - The desired locale to set.\n   * @param normalize - Whether to normalize the locale to the supported locales.\n   */\n  @delegate('server')\n  async setLocale(locale: string, normalize = true) {\n    try {\n      const _locale = normalize ? this.normalizeLocale(locale) : locale;\n\n      await this._innerSetAndLoadLocale(_locale);\n      this._setLocaleSuccess(_locale);\n    } catch (error) {\n      this.logger.error('load locale fail', error);\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]}