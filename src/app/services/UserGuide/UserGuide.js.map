{"version":3,"file":"UserGuide.js","names":["_trackEvents","require","_services","_services2","_nextCore","_ramda","_excluded","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_dec32","_dec33","_dec34","_dec35","_dec36","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","hasOwnProperty","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_superPropGet","_get","get","_superPropBase","getOwnPropertyDescriptor","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","keys","forEach","slice","reverse","reduce","_initializerWarningHelper","Error","SUPPORTED_LOCALES","exports","getFileName","fileUrl","_fileUrl$split$pop","split","pop","anyFileDiff","urls1","urls2","files1","map","url","files2","JSON","stringify","UserGuide","injectable","name","target","optional","undefined","metadata","Function","Auth","Locale","StoragePlugin","AppFeatures","Brand","UserGuideOptions","dynamic","Webphone","CarouselState","Guides","track","that","options","curIdx","playing","trackEvents","whatsNew","Required","delegate","CarouselOptions","computed","_locale","ready","allGuides","_brand","code","currentLocale","_RcModule","_auth","_storage","_appFeatures","_userGuideOptions","_this","enable","setPreLoadImageStatus","preLoadImageStatus","setGuides","guides","_this$allGuides$this$","oldGuides","_i","_Object$keys","locale","start","firstLogin","_migrateGuides","_this2","setCarousel","_ref","carouselState","_onInitSuccess","_callee","_context","hasPermission","initUserGuide","onInitSuccess","_shouldInit","loggedIn","_shouldReset","onInitOnce","_this3","watch","_this3$_webphone","_webphone","ringSession","_this3$_webphone2","dismiss","brandConfig","_callee2","_context2","_preLoadImage2","_callee3","_context3","reject","img","Image","src","onload","onerror","_preLoadImage","_x","_preLoadImage3","_callee4","_t","_context4","console","warn","preLoadImage","resolveGuides","_this$_brand$brandCon","images","assets","locales","acc","curr","includes","push","_dismiss","_callee5","_context5","entered","updateCarousel","_updateCarousel","_callee6","_ref3","_ref3$firstLogin","_context6","_x2","isCallingEnabled","hasReadMessagesPermission","_initUserGuide","_callee7","_context7","_start","_callee8","_ref4","_ref4$firstLogin","_args8","_context8","brandGuides","currentGuides","RcModule","storage","state","action"],"sources":["src/app/services/UserGuide/UserGuide.ts"],"sourcesContent":["import { trackEvents } from '@ringcentral-integration/commons/enums/trackEvents';\nimport {\n  AppFeatures,\n  Auth,\n  track,\n} from '@ringcentral-integration/micro-auth/src/app/services';\nimport {\n  Brand,\n  Locale,\n} from '@ringcentral-integration/micro-core/src/app/services';\nimport type { Webphone } from '@ringcentral-integration/micro-phone/src/app/services';\nimport {\n  action,\n  computed,\n  delegate,\n  dynamic,\n  injectable,\n  optional,\n  RcModule,\n  state,\n  storage,\n  StoragePlugin,\n  watch,\n} from '@ringcentral-integration/next-core';\nimport { includes } from 'ramda';\n\nimport type {\n  CarouselOptions,\n  CarouselState,\n  Guides,\n  UserGuideOptions,\n} from './UserGuide.interface';\n\nexport const SUPPORTED_LOCALES = {\n  'en-US': 'en-US',\n  'fr-CA': 'fr-CA',\n};\n\nfunction getFileName(fileUrl: string) {\n  return fileUrl.split('\\\\').pop()?.split('/').pop();\n}\n\n// Since file name has included file MD5, any file name change means file change\nfunction anyFileDiff(urls1: string[], urls2: string[]) {\n  const files1 = (urls1 ?? []).map((url) => getFileName(url));\n  const files2 = (urls2 ?? []).map((url) => getFileName(url));\n  return JSON.stringify(files1) !== JSON.stringify(files2);\n}\n\n@injectable({\n  name: 'UserGuide',\n})\nexport class UserGuide extends RcModule {\n  constructor(\n    protected _auth: Auth,\n    protected _locale: Locale,\n    protected _storage: StoragePlugin,\n    protected _appFeatures: AppFeatures,\n    protected _brand: Brand,\n    @optional('UserGuideOptions')\n    protected _userGuideOptions?: UserGuideOptions,\n  ) {\n    super();\n    this._storage.enable(this);\n  }\n\n  @dynamic('Webphone')\n  protected readonly _webphone?: Webphone;\n\n  @storage\n  @state\n  allGuides: { [key: string]: Guides } = {};\n\n  @state\n  carouselState: CarouselState = {\n    curIdx: 0,\n    entered: false,\n    playing: false,\n  };\n\n  @state\n  preLoadImageStatus = false;\n\n  @state\n  firstLogin = false;\n\n  @action\n  setPreLoadImageStatus() {\n    this.preLoadImageStatus = true;\n  }\n\n  @action\n  setGuides(guides: Guides) {\n    const oldGuides = this.allGuides[this._brand.code] ?? {};\n    this.allGuides[this._brand.code] = guides;\n    for (const locale of Object.keys(SUPPORTED_LOCALES)) {\n      if (anyFileDiff(guides[locale], oldGuides[locale])) {\n        this.start({ firstLogin: true });\n        break;\n      }\n    }\n  }\n\n  @action\n  _migrateGuides() {\n    if (!this.allGuides[this._brand.code]) {\n      this.allGuides[this._brand.code] = {};\n    }\n    Object.keys(SUPPORTED_LOCALES).forEach((locale) => {\n      const allGuides: Guides = this.allGuides as any;\n      if (allGuides[locale]) {\n        this.allGuides[this._brand.code][locale] = allGuides[locale];\n        delete allGuides[locale];\n      }\n    });\n  }\n\n  @track((that: UserGuide, options: Required<CarouselOptions>) => {\n    if (options.curIdx === 0 && options.playing) {\n      return [trackEvents.whatsNew];\n    }\n  })\n  @action\n  setCarousel({ firstLogin, ...carouselState }: Required<CarouselOptions>) {\n    this.carouselState = carouselState;\n    this.firstLogin = firstLogin;\n  }\n\n  override async onInitSuccess() {\n    if (this.hasPermission) {\n      await this.initUserGuide();\n    }\n  }\n\n  override _shouldInit() {\n    return !!(super._shouldInit() && this._auth.loggedIn);\n  }\n\n  override _shouldReset() {\n    return !!(super._shouldReset() || (this.ready && !this._auth.loggedIn));\n  }\n\n  override onInitOnce() {\n    this._migrateGuides();\n    // When there is an incoming call,\n    // the guide should be dismissed\n    watch(\n      this,\n      () => this._webphone?.ringSession,\n      (ringSession) => {\n        if (this._webphone?.ready && ringSession) {\n          this.dismiss();\n        }\n      },\n    );\n    watch(\n      this,\n      () => this._brand.brandConfig,\n      async () => {\n        if (this.hasPermission) {\n          await this.initUserGuide();\n        }\n      },\n    );\n  }\n\n  @delegate('server')\n  async _preLoadImage(url: string) {\n    await new Promise((resolve, reject) => {\n      const img = new Image();\n      img.src = url;\n      img.onload = resolve;\n      img.onerror = reject;\n    });\n  }\n\n  @delegate('server')\n  async preLoadImage() {\n    const url = this.guides[0];\n    if (url) {\n      try {\n        await this._preLoadImage(url);\n      } catch (ex) {\n        console.warn('[UserGuide] Preload image failed', ex);\n      }\n    }\n    this.setPreLoadImageStatus();\n  }\n\n  resolveGuides(): Record<string, string[]> {\n    const images = (this._brand.brandConfig.assets?.guides as string[]) || [];\n\n    const locales = Object.keys(SUPPORTED_LOCALES);\n    return images.reduce<Record<string, string[]>>((acc, curr: string) => {\n      locales.forEach((locale) => {\n        if (!acc[locale]) {\n          acc[locale] = [];\n        }\n        if (includes(locale, curr)) {\n          acc[locale].push(curr);\n        }\n      });\n      return acc;\n    }, {});\n  }\n\n  @delegate('server')\n  async dismiss() {\n    if (\n      this.carouselState.curIdx !== 0 ||\n      this.carouselState.playing ||\n      this.carouselState.entered ||\n      this.firstLogin\n    ) {\n      this.updateCarousel({\n        curIdx: 0,\n        entered: false,\n        playing: false,\n        firstLogin: false,\n      });\n    }\n  }\n\n  @delegate('server')\n  async updateCarousel({\n    curIdx,\n    entered,\n    playing,\n    firstLogin = this.firstLogin,\n  }: CarouselOptions) {\n    this.setCarousel({\n      curIdx,\n      entered,\n      playing,\n      firstLogin,\n    });\n  }\n\n  get hasPermission() {\n    // For extensions without calling or read message permissions, most of the content in\n    // the user guide is not applicable to them. So we should not show the user guide for\n    // these extensions.\n    return (\n      this._appFeatures.isCallingEnabled ||\n      this._appFeatures.hasReadMessagesPermission\n    );\n  }\n\n  @delegate('server')\n  async initUserGuide() {\n    const guides = this.resolveGuides();\n    // Determine if it needs to be displayed when first log in,\n    // the principles behind this is to use webpack's file hash,\n    // i.e. if any of the guide files is changed, the file name hash\n    // will be changed as well, in this case, it will be displayed.\n    if (guides) {\n      this.setGuides(guides);\n      await this.preLoadImage();\n    }\n  }\n\n  @delegate('server')\n  async start({ firstLogin = false } = {}) {\n    // Start guides only when images are ready\n    this.setCarousel({\n      curIdx: 0,\n      entered: true,\n      playing: true,\n      firstLogin,\n    });\n  }\n\n  @computed((that: UserGuide) => [\n    that._locale.ready,\n    that.allGuides[that._brand.code],\n    that._locale.currentLocale,\n  ])\n  get guides() {\n    if (!this._locale.ready || !this._auth.loggedIn) {\n      return [];\n    }\n    const brandGuides = this.allGuides[this._brand.code];\n    if (brandGuides) {\n      const currentGuides = brandGuides[this._locale.currentLocale];\n      if (currentGuides && currentGuides.length > 0) {\n        return currentGuides;\n      }\n      return brandGuides[SUPPORTED_LOCALES['en-US']] || [];\n    }\n    return [];\n  }\n\n  get started() {\n    return this.carouselState.entered && this.carouselState.playing;\n  }\n}\n"],"mappings":"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","ignoreList":[]}