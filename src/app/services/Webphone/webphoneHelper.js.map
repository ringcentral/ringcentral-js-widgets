{"version":3,"file":"webphoneHelper.js","names":["_callDirections","require","_camelCase","_interopRequireDefault","_recordStatus","_sessionStatus","e","__esModule","_slicedToArray","r","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","length","n","l","Symbol","iterator","i","u","f","o","next","Object","done","push","value","isArray","environment","window","global","isChrome","navigator","browserUa","userAgent","toLowerCase","match","isFirefox","indexOf","isEnableMidLinesInSDP","_navigator$userAgent$","version","parseInt","isWebSocketSupport","WebSocket","isWebRTCSupport","MediaStream","RTCPeerConnection","mediaDevices","getUserMedia","isBrowserSupport","readPartyDataFromHeaders","headers","_headers$PRcApiIds","_headers$PRcApiIds$","rawValue","raw","data","split","map","sub","reduce","acc","_ref","_ref2","key","camelCase","keys","readCallIdFromHeaders","_headers$CallID","_headers$CallID$","extractHeadersData","session","partyData","__rc_partyData","callId","__rc_callId","getCallQueueName","_ref3","direction","callDirection","outbound","normalizeSession","_session$request","_session$request$to","_session$request2","_session$request2$fro","_session$request3","_session$request3$to","_session$request3$to$","_session$request4","_session$request4$fro","_session$request4$fro2","toUserName","request","to","displayName","fromUserName","id","__rc_direction","callStatus","__rc_callStatus","uri","user","fromNumber","__rc_fromNumber","fromTag","toTag","startTime","Date","getTime","creationTime","__rc_creationTime","isOnHold","localHold","isOnMute","__rc_isOnMute","isOnFlip","__rc_isOnFlip","isOnTransfer","__rc_isOnTransfer","isToVoicemail","__rc_isToVoicemail","isForwarded","__rc_isForwarded","isReplied","__rc_isReplied","recordStatus","__rc_recordStatus","idle","contactMatch","__rc_contactMatch","minimized","__rc_minimized","lastActiveTime","__rc_lastActiveTime","cached","removed","callQueueName","warmTransferSessionId","__rc_transferSessionId","isRing","inbound","sessionStatus","connecting","sortByLastActiveTimeDesc","isPickupReason","_e$data","_e$data$includes","Boolean","includes","getWebphoneSessionStartTime"],"sources":["src/app/services/Webphone/webphoneHelper.ts"],"sourcesContent":["import { callDirection } from '@ringcentral-integration/commons/enums/callDirections';\nimport type {\n  NormalizedSession,\n  PartyData,\n  WebphoneSession,\n} from '@ringcentral-integration/commons/interfaces/Webphone.interface';\nimport camelCase from 'lodash/camelCase';\n\nimport type {\n  IncomingRequest,\n  WebphoneSessionRequestHeaders,\n} from './Webphone.interface';\nimport { recordStatus } from './recordStatus';\nimport { sessionStatus } from './sessionStatus';\n\nlet environment: Window & typeof globalThis;\nif (typeof window !== 'undefined') {\n  environment = window;\n}\nif (typeof global !== 'undefined') {\n  environment = global.window || global;\n}\n\nexport function isChrome() {\n  if (!environment.navigator) {\n    return false;\n  }\n  const browserUa = environment.navigator.userAgent.toLowerCase();\n  return !!browserUa.match(/chrom(e|ium)/);\n}\n\nexport function isFirefox() {\n  if (!environment.navigator) {\n    return false;\n  }\n  const browserUa = environment.navigator.userAgent.toLowerCase();\n  return browserUa.indexOf('firefox') > -1 && !isChrome();\n}\n\nexport function isEnableMidLinesInSDP() {\n  if (!isFirefox()) {\n    return false;\n  }\n  const version = parseInt(\n    navigator.userAgent.toLowerCase().match(/firefox\\/([0-9]+)/)?.[1]!,\n    10,\n  );\n  return version >= 63;\n}\n\nexport function isWebSocketSupport() {\n  return !!(environment && environment.WebSocket);\n}\n\nexport function isWebRTCSupport() {\n  if (!environment.navigator) {\n    return false;\n  }\n  return !!(\n    environment.MediaStream &&\n    environment.RTCPeerConnection &&\n    environment.navigator.mediaDevices.getUserMedia\n  );\n}\n\nexport function isBrowserSupport() {\n  return isWebSocketSupport() && isWebRTCSupport();\n}\n\nexport function readPartyDataFromHeaders(\n  headers: WebphoneSessionRequestHeaders,\n) {\n  const rawValue = headers?.['P-Rc-Api-Ids']?.[0]?.raw;\n  if (rawValue) {\n    /**\n     * interface PartyData {\n     *  \"partyId\": String,\n     *  \"sessionId\": String\n     * }\n     *\n     * INFO: partyId is ID of the participant in current Session. Mostly it represents User on the call,\n     * it could be active participant (talking right now) or already disconnected User,\n     * e.g. who made a transfer to another person.\n     * To identify the User who owns the party you need to find owner.extensionId within party.\n     */\n    const data = rawValue\n      .split(';')\n      .map((sub) => sub.split('='))\n      .reduce((acc, [key, value]) => {\n        acc[camelCase(key)] = value;\n        return acc;\n      }, {} as { [key: string]: string });\n\n    if (Object.keys(data).length) {\n      return data as unknown as PartyData;\n    }\n  }\n}\n\nexport function readCallIdFromHeaders(headers: WebphoneSessionRequestHeaders) {\n  return headers?.['Call-ID']?.[0]?.raw;\n}\n\nexport function extractHeadersData(\n  session: WebphoneSession,\n  headers: WebphoneSessionRequestHeaders,\n) {\n  const partyData = readPartyDataFromHeaders(headers);\n  if (partyData) {\n    session.__rc_partyData = partyData;\n  }\n\n  const callId = readCallIdFromHeaders(headers);\n  if (callId) {\n    session.__rc_callId = callId;\n  }\n}\nexport interface WebphoneHeaders {\n  'P-Rc-Api-Ids'?: Array<{ raw: string }>;\n  'Call-ID'?: Array<{ raw: string }>;\n  'P-Rc-Api-Call-Info'?: Array<{ raw: string }>;\n  'P-Asserted-Identity'?: Array<{ raw: string }>;\n}\n\nexport function getCallQueueName({\n  direction,\n  headers,\n}: {\n  direction: 'Inbound' | 'Outbound';\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  headers: WebphoneHeaders;\n}) {\n  if (\n    direction === callDirection.outbound ||\n    !headers ||\n    !headers['P-Rc-Api-Call-Info'] ||\n    !headers['P-Rc-Api-Call-Info'][0] ||\n    !headers['P-Rc-Api-Call-Info'][0].raw ||\n    !headers['P-Asserted-Identity'] ||\n    !headers['P-Asserted-Identity'][0] ||\n    !headers['P-Asserted-Identity'][0].raw\n  ) {\n    return null;\n  }\n  if (headers['P-Rc-Api-Call-Info'][0].raw.indexOf('queue-call') === -1) {\n    return null;\n  }\n  const name = headers['P-Asserted-Identity'][0].raw.split('\"')[1];\n  return name || null;\n}\n\nexport function normalizeSession(\n  session?: WebphoneSession,\n): NormalizedSession | undefined {\n  if (!session) {\n    return session;\n  }\n  const toUserName = session.request?.to?.displayName;\n  const fromUserName = session.request?.from?.displayName;\n  return {\n    id: session.id,\n    callId: session.__rc_callId,\n    direction: session.__rc_direction,\n    callStatus: session.__rc_callStatus,\n    to: session.request?.to?.uri?.user!,\n    toUserName,\n    from: session.request?.from?.uri?.user!,\n    fromNumber: session.__rc_fromNumber,\n    fromUserName,\n    fromTag: session.fromTag,\n    toTag: session.toTag,\n    startTime: session.startTime! && new Date(session.startTime).getTime(),\n    creationTime: session.__rc_creationTime,\n    isOnHold: !!session.localHold,\n    isOnMute: !!session.__rc_isOnMute,\n    isOnFlip: !!session.__rc_isOnFlip,\n    isOnTransfer: !!session.__rc_isOnTransfer,\n    isToVoicemail: !!session.__rc_isToVoicemail,\n    isForwarded: !!session.__rc_isForwarded,\n    isReplied: !!session.__rc_isReplied,\n    recordStatus: session.__rc_recordStatus || recordStatus.idle,\n    // TODO: fix type\n    // @ts-ignore\n    contactMatch: session.__rc_contactMatch,\n    minimized: !!session.__rc_minimized,\n    partyData: session.__rc_partyData || null,\n    lastActiveTime: session.__rc_lastActiveTime,\n    cached: false,\n    removed: false,\n    callQueueName: getCallQueueName({\n      direction: session.__rc_direction,\n      headers: session.request && session.request.headers,\n    })!,\n    warmTransferSessionId: session.__rc_transferSessionId || '',\n  };\n}\n\nexport function isRing(session: NormalizedSession) {\n  return !!(\n    session &&\n    session.direction === callDirection.inbound &&\n    session.callStatus === sessionStatus.connecting\n  );\n}\n\nexport function isOnHold(session: NormalizedSession) {\n  return !!(session && session.isOnHold);\n}\n\nexport function sortByLastActiveTimeDesc(\n  l: NormalizedSession,\n  r: NormalizedSession,\n) {\n  if (!l || !r) {\n    return 0;\n  }\n  if (r.lastActiveTime !== l.lastActiveTime) {\n    return r.lastActiveTime - l.lastActiveTime;\n  }\n  return r.startTime - l.startTime;\n}\n\nexport function isPickupReason(e: IncomingRequest | undefined): boolean {\n  return Boolean(e?.data?.includes?.('p-rc-reason: Pickup'));\n}\n\nexport function getWebphoneSessionStartTime(session: NormalizedSession) {\n  if (session.direction === callDirection.inbound) {\n    return session.creationTime;\n  }\n\n  return session.startTime || session.creationTime;\n}\n"],"mappings":"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","ignoreList":[]}