{"version":3,"file":"PreinsertCall.js","names":["_telephonyStatus2","require","_ContactMatcher","_services","_nextCore","_rxjs","_helpers","_Webphone","_webphoneHelper","_utils","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_class","_class2","_descriptor","_descriptor2","_slicedToArray","r","e","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","length","n","l","Symbol","iterator","i","u","f","o","next","Object","done","push","value","isArray","_regenerator","toStringTag","c","prototype","Generator","create","_regeneratorDefine2","p","y","G","v","d","bind","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","keys","forEach","reverse","reduce","_initializerWarningHelper","Error","PreinsertCall","exports","injectable","target","optional","undefined","metadata","Function","Webphone","NumberFormatter","ContactMatcher","dynamic","CallMonitor","Record","PreinsertCallStatus","delegate","_RcModule","_webphone","_numberFormatter","_contactMatcher","_this","preinsertStatusMap$","fromWatchValue","preinsertStatusMap","_setPreinsert","telephonySessionId","status","cleanPreinsert","telephonySessionIds","_this2","_setPreinsert2","_callee","_context","setPreinsert","_x","_x2","_removePreinsert","_removePreinsert2","_callee2","_context2","removePreinsert","_x3","get","_this3","sessions","acc","session","_session$partyData","partyData","sessionId","callMonitor","callsInfo","telephonySessionIdCallMap","isPreinsertStatusEnd","direction","_session$partyData2","_this3$_contactMatche","_this3$_contactMatche2","_session$partyData3","fromNumber","normalizeNumber","toNumber","to","toName","fromName","partyId","contactMapping","dataMapping","fromMatches","toMatches","getPreinsertFakeId","id","callItem","phoneNumber","webphoneSession","startTime","getWebphoneSessionStartTime","telephonyStatus","callStatus","sessionStatus","connected","callConnected","ringing","activityMatches","listenPreinsertFromWebphone","_this4","merge","invite$","pipe","concatMap","_session$__rc_partyDa","__rc_partyData","defer","value$","Observable","subscriber","set","val","map","_session$__rc_partyDa2","filter","of","take","end$","_ref","_callee3","_session$__rc_partyDa3","_context3","logger","log","concat","identifier","_x4","takeUntilAppDestroy","subscribe","listenPreinsertServerHandler","sessionsMap$","_this5","clearPreinsertStatus$","tap","sessionsMap","clearIds","source","_parseConferenceParti","parseConferenceParticipantRemovalId","connectInOtherDevice$","combineLatest","_ref2","_ref3","preinsertEndSessionStatusMap","entries","_ref4","_ref5","_session$party","_session$party$status","mapTelephonyStatus","party","code","pairwise","_ref6","_ref7","prev","current","_ref8","_ref9","currTelephonyStatus","prevTelephonyStatus","currStatus","isPreinsertStatusIgnored","isBringInPartyPreinsertStatus","checkParticipantStillExist","participantStatus","createConferenceParticipantRemovalId","RcModule","state","action","getOwnPropertyDescriptor","computed"],"sources":["src/app/services/PreinsertCall/PreinsertCall.tsx"],"sourcesContent":["import { telephonyStatus } from '@ringcentral-integration/commons/enums/telephonyStatus';\nimport { Call } from '@ringcentral-integration/commons/interfaces/Call.interface';\nimport { ContactMatcher } from '@ringcentral-integration/commons/modules/ContactMatcher';\nimport { NumberFormatter } from '@ringcentral-integration/micro-auth/src/app/services';\nimport {\n  action,\n  computed,\n  delegate,\n  dynamic,\n  fromWatchValue,\n  injectable,\n  logger,\n  optional,\n  RcModule,\n  state,\n  takeUntilAppDestroy,\n} from '@ringcentral-integration/next-core';\nimport { Session as TelephonySession } from 'ringcentral-call-control/lib/Session';\nimport {\n  combineLatest,\n  concatMap,\n  defer,\n  delay,\n  EMPTY,\n  filter,\n  firstValueFrom,\n  map,\n  merge,\n  Observable,\n  of,\n  pairwise,\n  take,\n  tap,\n} from 'rxjs';\n\nimport { ActiveCallControlSessionData } from '../ActiveCallControl/ActiveCallControl.interface';\nimport { mapTelephonyStatus } from '../ActiveCallControl/helpers';\nimport type { CallMonitor } from '../CallMonitor';\nimport { sessionStatus, Webphone } from '../Webphone';\nimport { getWebphoneSessionStartTime } from '../Webphone/webphoneHelper';\n\nimport type { PreinsertCallStatus } from './PreinsertCall.interface';\nimport {\n  createConferenceParticipantRemovalId,\n  getPreinsertFakeId,\n  isPreinsertCallByTelephoneSessionId,\n  parseConferenceParticipantRemovalId,\n} from './utils';\n\n@injectable({\n  name: 'PreinsertCall',\n})\nexport class PreinsertCall extends RcModule {\n  @dynamic('CallMonitor')\n  callMonitor!: CallMonitor;\n\n  @state\n  preinsertStatusMap: Record<string, PreinsertCallStatus> = {};\n\n  preinsertStatusMap$ = fromWatchValue(this, () => this.preinsertStatusMap);\n\n  @action\n  private _setPreinsert(\n    telephonySessionId: string,\n    status: PreinsertCallStatus,\n  ) {\n    this.preinsertStatusMap[telephonySessionId] = status;\n  }\n\n  @action\n  private cleanPreinsert(telephonySessionIds: string[]) {\n    telephonySessionIds.forEach((telephonySessionId) => {\n      delete this.preinsertStatusMap[telephonySessionId];\n    });\n  }\n\n  @delegate('server')\n  async setPreinsert(telephonySessionId: string, status: PreinsertCallStatus) {\n    if (this.preinsertStatusMap[telephonySessionId] !== status) {\n      this._setPreinsert(telephonySessionId, status);\n    }\n  }\n\n  @action\n  private _removePreinsert(telephonySessionId: string) {\n    delete this.preinsertStatusMap[telephonySessionId];\n  }\n\n  @delegate('server')\n  async removePreinsert(telephonySessionId: string) {\n    if (this.preinsertStatusMap[telephonySessionId]) {\n      this._removePreinsert(telephonySessionId);\n    }\n  }\n\n  @computed\n  get preinsertCalls() {\n    return this._webphone.sessions.reduce((acc, session) => {\n      const telephonySessionId = session.partyData?.sessionId;\n      if (\n        // non have telephonySessionId should preinsert\n        !telephonySessionId ||\n        // have id but not in activeCallControl.sessions, should preinsert\n        (telephonySessionId &&\n          !this.callMonitor.callsInfo.telephonySessionIdCallMap[\n            telephonySessionId\n          ] &&\n          !this.isPreinsertStatusEnd(telephonySessionId) &&\n          // only outbound call should preinsert, inbound currently not want that, that will got a blank call when inbound call\n          session.direction === 'Outbound')\n      ) {\n        // normalize number for ensure the number is matcher mapping with same key\n        const fromNumber = this._numberFormatter.normalizeNumber(session.from);\n        const toNumber = this._numberFormatter.normalizeNumber(session.to);\n\n        const direction = session.direction;\n        const toName = '';\n        const fromName = '';\n        const partyId = session.partyData?.partyId;\n\n        const contactMapping = this._contactMatcher?.dataMapping ?? {};\n\n        const fromMatches = (fromNumber && contactMapping[fromNumber]) || [];\n        const toMatches = (toNumber && contactMapping[toNumber]) || [];\n\n        const sessionId = getPreinsertFakeId(session.id);\n        const callItem: Call = {\n          partyId,\n          direction,\n          telephonySessionId: session.partyData?.sessionId || sessionId,\n          toName,\n          fromName,\n          from: {\n            phoneNumber: fromNumber,\n          },\n          to: {\n            phoneNumber: toNumber,\n          },\n          webphoneSession: session,\n          startTime: getWebphoneSessionStartTime(session),\n          sessionId,\n          telephonyStatus:\n            session.callStatus === sessionStatus.connected\n              ? telephonyStatus.callConnected\n              : telephonyStatus.ringing,\n          fromMatches,\n          toMatches,\n          activityMatches: [],\n        };\n\n        acc.push(callItem);\n      }\n\n      return acc;\n    }, [] as Call[]);\n  }\n\n  constructor(\n    private _webphone: Webphone,\n    protected _numberFormatter: NumberFormatter,\n    @optional() protected _contactMatcher?: ContactMatcher,\n  ) {\n    super();\n  }\n\n  listenPreinsertFromWebphone() {\n    merge(\n      this._webphone.invite$.pipe(\n        concatMap((session) => {\n          const telephonySessionId = session.__rc_partyData?.sessionId;\n\n          return defer(() => {\n            // when not get telephonySessionId, need to wait for that have value\n            if (!telephonySessionId) {\n              const value$ = new Observable((subscriber) => {\n                let value: any = undefined;\n                // Create property descriptor to track changes\n                Object.defineProperty(session, '__rc_partyData', {\n                  get() {\n                    return value;\n                  },\n                  set(val) {\n                    value = val;\n                    subscriber.next(val);\n                  },\n                });\n\n                return () => {\n                  // recover property descriptor\n                  Object.defineProperty(session, '__rc_partyData', {\n                    value,\n                    writable: true,\n                  });\n                };\n              });\n\n              return value$.pipe(\n                // wait partyData have value\n                map(() => session.__rc_partyData?.sessionId),\n                filter(Boolean),\n              );\n            }\n\n            return of(telephonySessionId);\n          }).pipe(\n            take(1),\n            concatMap((telephonySessionId) =>\n              this.removePreinsert(telephonySessionId),\n            ),\n          );\n        }),\n      ),\n      this._webphone.end$.pipe(\n        concatMap(async (session) => {\n          const telephonySessionId = session.__rc_partyData?.sessionId;\n\n          logger.log(`[${this.identifier}] end call trigger`, {\n            session,\n            telephonySessionId,\n          });\n\n          if (\n            !telephonySessionId ||\n            // only when client side not have that data need to set end status, otherwise, use keep the current status, like ignore also trigger that, but that should keep as ignore, and switch should not trigger that\n            this.preinsertStatusMap[telephonySessionId]\n          ) {\n            return;\n          }\n\n          logger.log(\n            `[${this.identifier}] set client call status`,\n            telephonySessionId,\n          );\n          return this.setPreinsert(telephonySessionId, 'end');\n        }),\n      ),\n    )\n      .pipe(takeUntilAppDestroy)\n      .subscribe();\n  }\n\n  listenPreinsertServerHandler(\n    sessionsMap$: Observable<\n      Record<string, ActiveCallControlSessionData | undefined>\n    >,\n  ) {\n    // clear not exist session id in preinsertStatusMap\n    const clearPreinsertStatus$ = sessionsMap$.pipe(\n      tap((sessionsMap) => {\n        const clearIds = Object.keys(this.preinsertStatusMap).reduce(\n          (acc, source) => {\n            // the source is {telephonySessionId}_____{removedPartyId}, so need to split to get the telephonySessionId to ensure that the session is exist\n            const { telephonySessionId } =\n              parseConferenceParticipantRemovalId(source);\n            // when not exist in sessionsMap, should remove that\n            if (!sessionsMap[telephonySessionId]) {\n              acc.push(source);\n            }\n\n            return acc;\n          },\n          [] as string[],\n        );\n        if (clearIds.length > 0) {\n          this.cleanPreinsert(clearIds);\n        }\n      }),\n    );\n\n    // when from not connected to connected, should remove the preinsert call status, because that be connect in other device\n    const connectInOtherDevice$ = combineLatest([\n      this.preinsertStatusMap$,\n      sessionsMap$,\n    ]).pipe(\n      map(([preinsertStatusMap, sessionsMap]) => {\n        const preinsertEndSessionStatusMap = Object.entries(\n          preinsertStatusMap,\n        ).reduce((acc, [telephonySessionId, status]) => {\n          if (status === 'end') {\n            const session = sessionsMap[telephonySessionId];\n\n            const telephonyStatus = mapTelephonyStatus(\n              session?.party?.status?.code!,\n            );\n\n            acc[telephonySessionId] = telephonyStatus;\n          }\n\n          return acc;\n        }, {} as Record<string, ReturnType<typeof mapTelephonyStatus>>);\n        return preinsertEndSessionStatusMap;\n      }),\n      pairwise(),\n      tap(([prev, current]) => {\n        Object.entries(current).forEach(\n          ([telephonySessionId, currTelephonyStatus]) => {\n            const prevTelephonyStatus = prev[telephonySessionId];\n\n            // when from not connected to connected, should remove the preinsert call status, because that be connect in other device\n            if (\n              prevTelephonyStatus &&\n              currTelephonyStatus &&\n              prevTelephonyStatus !== 'CallConnected' &&\n              currTelephonyStatus === 'CallConnected'\n            ) {\n              logger.log(\n                `[${this.identifier}] connected in other device, show that`,\n                telephonySessionId,\n              );\n\n              this._removePreinsert(telephonySessionId);\n            }\n          },\n        );\n      }),\n    );\n\n    merge(clearPreinsertStatus$, connectInOtherDevice$)\n      .pipe(takeUntilAppDestroy)\n      .subscribe();\n  }\n\n  isPreinsertStatusEnd(telephonySessionId: string) {\n    const currStatus = this.preinsertStatusMap[telephonySessionId];\n\n    return (\n      currStatus === 'end' ||\n      // currStatus === 'forceTerminate' ||\n      currStatus === 'partyRemoved'\n    );\n  }\n\n  isPreinsertStatusIgnored(telephonySessionId: string) {\n    const currStatus = this.preinsertStatusMap[telephonySessionId];\n\n    return currStatus === 'ignore';\n  }\n\n  isBringInPartyPreinsertStatus(telephonySessionId: string) {\n    const currStatus = this.preinsertStatusMap[telephonySessionId];\n\n    return currStatus === 'bringInParty';\n  }\n\n  checkParticipantStillExist(session: TelephonySession, partyId: string) {\n    const participantStatus =\n      this.preinsertStatusMap[\n        createConferenceParticipantRemovalId(session.id, partyId)\n      ];\n\n    if (participantStatus === 'partyRemoved') {\n      return false;\n    }\n\n    return true;\n  }\n\n  // TODO: outbound call still not completed\n  // async isPreinsertCallBySessionId(telephonySessionId: string) {\n  //   if (isPreinsertCallByTelephoneSessionId(telephonySessionId)) {\n  //     this.setPreinsert(telephonySessionId, 'forceTerminate');\n  //     // wait preinsert call telephonySessionId ready\n  //     const readyPartyCall = await firstValueFrom(\n  //       fromWatchValue(this, () => this.preinsertCalls).pipe(\n  //         map((preinsertCalls) => {\n  //           const partyReadyPreinsertItem = preinsertCalls.find((call) => {\n  //             return Boolean(\n  //               call.sessionId === telephonySessionId &&\n  //                 // when that have party id and be connected\n  //                 !isPreinsertCallByTelephoneSessionId(\n  //                   call.telephonySessionId,\n  //                 ) &&\n  //                 // must wait that become connected then can hung up, otherwise server will emit error\n  //                 call.telephonyStatus === telephonyStatus.callConnected,\n  //             );\n  //           });\n\n  //           return partyReadyPreinsertItem;\n  //         }),\n  //         filter(Boolean),\n  //         delay(0),\n  //       ),\n  //     );\n\n  //     telephonySessionId = readyPartyCall.telephonySessionId!;\n  //   }\n  // }\n}\n"],"mappings":"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","ignoreList":[]}