{"version":3,"file":"useTracking.js","names":["_core","require","_nextCore","_execTracking","useTracking","exports","trackCallback","analytics","useContainer","trackEvent","useEventCallback","_len","arguments","length","args","Array","_key","toTrackEvent","execTracking","concat"],"sources":["src/app/services/Analytics/useTracking.ts"],"sourcesContent":["import { useEventCallback } from '@material-ui/core';\nimport { useContainer } from '@ringcentral-integration/next-core';\n\nimport { Analytics } from './Analytics';\nimport { IAnalytics } from './Analytics.interface';\nimport { execTracking } from './execTracking';\n\ntype Args<T extends unknown[], A extends IAnalytics = IAnalytics> = [\n  ...T,\n  Omit<A, 'track'>,\n];\n\n/**\n *\n * Provide you can use track hook inside component\n *\n * #### - when you just need trackEvent directly, `useTracking` without any callback\n\n * ```ts\n * const trackEvent = useTracking();\n *\n * const onClick = () => {\n *   // track that event directly\n *   trackEvent('come events');\n * };\n * ```\n *\n * #### - when you need use analytics module methods\n *\n * ```ts\n * const trackEvent2 = useTracking<[number, string], Analytics>(\n *   (times, message, analytics) => {\n *     const info = analytics.getAccountInfo?.();\n *\n *     return [\n *       'EventName',\n *       {\n *         info,\n *         times,\n *         message,\n *       },\n *     ];\n *   },\n * );\n *\n * const onClick2 = () => {\n *   const times = 1;\n *   const message = 'login';\n *   trackEvent2(times, message);\n * };\n * ```\n *\n * #### - also can track with object parameters\n * ```ts\n * const trackEvent3 = useTracking<[{ userId: string }]>(({ userId }) => {\n *   return [\n *     'EventName',\n *     {\n *       userId,\n *     },\n *   ];\n * });\n *\n * const onClick3 = () => {\n *   // track event with object\n *   trackEvent3({ userId: 'example user' });\n * };\n * ```\n */\nexport const useTracking = <\n  T extends unknown[] = [string],\n  A extends IAnalytics = IAnalytics,\n>(\n  trackCallback?: (...args: Args<T, A>) => [string, object?],\n) => {\n  const analytics = useContainer<Analytics, true>('Analytics');\n\n  const trackEvent = useEventCallback((...args: unknown[]) => {\n    // when not have track module, do nothing return directly\n    if (!analytics) return;\n\n    const toTrackEvent = trackCallback ?? (args[0] as string);\n    execTracking(analytics, toTrackEvent, [...args, analytics]);\n  });\n  return trackEvent as unknown as (...args: T) => void;\n};\n"],"mappings":";;;;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AAIA,IAAAE,aAAA,GAAAF,OAAA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAMG,WAAW,GAAAC,OAAA,CAAAD,WAAA,GAAG,SAAdA,WAAWA,CAItBE,aAA0D,EACvD;EACH,IAAMC,SAAS,GAAG,IAAAC,sBAAY,EAAkB,WAAW,CAAC;EAE5D,IAAMC,UAAU,GAAG,IAAAC,sBAAgB,EAAC,YAAwB;IAC1D;IACA,IAAI,CAACH,SAAS,EAAE;IAAO,SAAAI,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAFeC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAJF,IAAI,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;IAAA;IAI1C,IAAMC,YAAY,GAAGX,aAAa,aAAbA,aAAa,cAAbA,aAAa,GAAKQ,IAAI,CAAC,CAAC,CAAY;IACzD,IAAAI,0BAAY,EAACX,SAAS,EAAEU,YAAY,KAAAE,MAAA,CAAML,IAAI,GAAEP,SAAS,EAAC,CAAC;EAC7D,CAAC,CAAC;EACF,OAAOE,UAAU;AACnB,CAAC","ignoreList":[]}