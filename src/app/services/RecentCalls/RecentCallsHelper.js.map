{"version":3,"file":"RecentCallsHelper.js","names":["filterPhoneNumber","exports","call","_ref","phoneNumber","from","to","extensionNumber","flattenToRecords","items","reduce","acc","_ref2","records","concat","sortByTime","a","b","Date","startTime","getTime","dedup","calls","hash","cur","id"],"sources":["src/app/services/RecentCalls/RecentCallsHelper.ts"],"sourcesContent":["import type CallLogRecord from '@rc-ex/core/lib/definitions/CallLogRecord';\nimport type CallLogResponse from '@rc-ex/core/lib/definitions/CallLogResponse';\n\nimport type { HistoryCall } from '../CallHistory';\n\nexport const filterPhoneNumber =\n  (call: HistoryCall) =>\n  ({ phoneNumber }: { phoneNumber: string }) =>\n    phoneNumber === call.from!.phoneNumber ||\n    phoneNumber === call.to!.phoneNumber ||\n    phoneNumber === call.from!.extensionNumber ||\n    phoneNumber === call.to!.extensionNumber;\n\nexport const flattenToRecords = (items: CallLogResponse[]) =>\n  items.reduce(\n    (acc, { records }) => acc.concat(records as CallLogRecord[]),\n    [] as CallLogRecord[],\n  );\n\n// Sort by time in descending order\n// TODO: fix type optional in `@rc-ex/core/definitions`\nexport const sortByTime = (\n  a: { startTime?: number },\n  b: { startTime?: number },\n) => new Date(b.startTime!).getTime() - new Date(a.startTime!).getTime();\n\nexport const dedup = (calls: HistoryCall[]) => {\n  const hash: Record<string, boolean> = {};\n  return calls.reduce((acc, cur) => {\n    if (hash[cur.id!]) return acc;\n    hash[cur.id!] = true;\n    return acc.concat(cur);\n  }, [] as HistoryCall[]);\n};\n"],"mappings":";;;;;;;;;;;AAKO,IAAMA,iBAAiB,GAAAC,OAAA,CAAAD,iBAAA,GAC5B,SADWA,iBAAiBA,CAC3BE,IAAiB;EAAA,OAClB,UAAAC,IAAA;IAAA,IAAGC,WAAW,GAAAD,IAAA,CAAXC,WAAW;IAAA,OACZA,WAAW,KAAKF,IAAI,CAACG,IAAI,CAAED,WAAW,IACtCA,WAAW,KAAKF,IAAI,CAACI,EAAE,CAAEF,WAAW,IACpCA,WAAW,KAAKF,IAAI,CAACG,IAAI,CAAEE,eAAe,IAC1CH,WAAW,KAAKF,IAAI,CAACI,EAAE,CAAEC,eAAe;EAAA;AAAA;AAErC,IAAMC,gBAAgB,GAAAP,OAAA,CAAAO,gBAAA,GAAG,SAAnBA,gBAAgBA,CAAIC,KAAwB;EAAA,OACvDA,KAAK,CAACC,MAAM,CACV,UAACC,GAAG,EAAAC,KAAA;IAAA,IAAIC,OAAO,GAAAD,KAAA,CAAPC,OAAO;IAAA,OAAOF,GAAG,CAACG,MAAM,CAACD,OAA0B,CAAC;EAAA,GAC5D,EACF,CAAC;AAAA;;AAEH;AACA;AACO,IAAME,UAAU,GAAAd,OAAA,CAAAc,UAAA,GAAG,SAAbA,UAAUA,CACrBC,CAAyB,EACzBC,CAAyB;EAAA,OACtB,IAAIC,IAAI,CAACD,CAAC,CAACE,SAAU,CAAC,CAACC,OAAO,CAAC,CAAC,GAAG,IAAIF,IAAI,CAACF,CAAC,CAACG,SAAU,CAAC,CAACC,OAAO,CAAC,CAAC;AAAA;AAEjE,IAAMC,KAAK,GAAApB,OAAA,CAAAoB,KAAA,GAAG,SAARA,KAAKA,CAAIC,KAAoB,EAAK;EAC7C,IAAMC,IAA6B,GAAG,CAAC,CAAC;EACxC,OAAOD,KAAK,CAACZ,MAAM,CAAC,UAACC,GAAG,EAAEa,GAAG,EAAK;IAChC,IAAID,IAAI,CAACC,GAAG,CAACC,EAAE,CAAE,EAAE,OAAOd,GAAG;IAC7BY,IAAI,CAACC,GAAG,CAACC,EAAE,CAAE,GAAG,IAAI;IACpB,OAAOd,GAAG,CAACG,MAAM,CAACU,GAAG,CAAC;EACxB,CAAC,EAAE,EAAmB,CAAC;AACzB,CAAC","ignoreList":[]}