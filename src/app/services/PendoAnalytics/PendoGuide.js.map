{"version":3,"file":"PendoGuide.js","names":["_services","require","_nextCore","_rxjs","_Auth","_PendoAnalytics","_i18n","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_class","_class2","_descriptor","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","keys","forEach","slice","reverse","reduce","_initializerWarningHelper","Error","pendoTemplateStyles","exports","TEN_MIN","PendoGuide","injectable","name","target","optional","undefined","metadata","Function","Auth","Brand","PendoAnalytics","Toast","PortManager","PendoGuideOptions","Record","delegate","_RcModule","_auth","_brand","_pendoAnalytics","_toast","_portManager","_pendoGuideOptions","_this","everDisplayedTimestamp","positiveRating","experienceFeedback","guideEvent$","defer","enable","fromEvent","document","pipe","map","data","detail","eventName","filter","EMPTY","share","tap","event","logger","info","track","concat","showToast","success","message","process","env","NODE_ENV","warn","takeUntilAppDestroy","subscribe","beforeLogout$","shared","onMainTab","loadOurPendoGuides","_setGuidesExistence","guides","assign","guidesExistence","_setGuidesExistence2","_callee","_context","setGuidesExistence","_x","_setEverDisplayed","_callee2","guideName","_context2","Date","now","setEverDisplayed","_x2","_this2","guidesLoaded$","syncGuidesExistence","_this$_pendoGuideOpti","_this3","checkGuideNames","acc","getPendoGuideExistence","genPendoNamePrefix","appName","defaultConfig","genPendoGuideName","_this$_pendoAnalytics","_this$_pendoAnalytics2","pendo","findGuideByName","_showGuide2","_callee3","guide","result","_t","_context3","hasFocus","showGuideById","id","showGuideByName","error","_showGuide","_x3","_experienceGuideProcess","_callee4","_context4","refreshGuides","showPositiveRatingGuide","showExperienceFeedbackGuide","experienceGuideProcess","_showGuideByNameWithPrefix","_callee5","_context5","showGuideByNameWithPrefix","_x4","_refreshGuides","_callee6","_context6","_showPositiveRatingGuide","_callee7","_context7","_showExperienceFeedbackGuide","_callee8","_context8","_showSettingsRatingGuide","_callee9","_context9","showSettingsRatingGuide","RcModule","userStorage","state","action","getOwnPropertyDescriptor"],"sources":["src/app/services/PendoAnalytics/PendoGuide.ts"],"sourcesContent":["import {\n  Brand,\n  Toast,\n} from '@ringcentral-integration/micro-core/src/app/services';\nimport {\n  action,\n  delegate,\n  injectable,\n  optional,\n  PortManager,\n  RcModule,\n  state,\n  takeUntilAppDestroy,\n  userStorage,\n} from '@ringcentral-integration/next-core';\nimport { defer, EMPTY, filter, fromEvent, map, share, tap } from 'rxjs';\n\nimport { Auth } from '../Auth';\n\nimport { PendoAnalytics } from './PendoAnalytics';\nimport { type PendoGuideOptions } from './PendoGuide.interface';\nimport { t } from './i18n';\n\n/**\n * For use data in pendo, use below methods\napp.modules.PendoAnalytics.track('Int_settings-rating-display')\napp.modules.PendoAnalytics.track('Int_settings-rating-submit')\napp.modules.PendoAnalytics.track('Int_positive-rating-show')\napp.modules.PendoAnalytics.track('Int_positive-rating-dismiss')\napp.modules.PendoAnalytics.track('Int_positive-rating-submit')\napp.modules.PendoAnalytics.track('Int_experience-feedback-show')\napp.modules.PendoAnalytics.track('Int_experience-feedback-dismiss')\napp.modules.PendoAnalytics.track('Int_experience-feedback-submit-great')\napp.modules.PendoAnalytics.track('Int_experience-feedback-submit-can-be-better')\napp.modules.PendoAnalytics.flushNow()\n */\nexport type PendoGuideEvent =\n  // settings rating\n  | {\n      eventName: 'settings-rating-display';\n      metadata: {\n        guideId: string;\n      };\n    }\n  | {\n      eventName: 'settings-rating-submit';\n      metadata: {\n        feedbackText: string;\n        selectedTags: string[];\n        currentRating: number;\n        showToast: boolean;\n      };\n    }\n  // positive rating (auto rating)\n  | {\n      eventName: 'positive-rating-show';\n      metadata: {\n        guideId: string;\n      };\n    }\n  | {\n      eventName: 'positive-rating-dismiss';\n      metadata: {\n        guideId: string;\n      };\n    }\n  | {\n      eventName: 'positive-rating-submit';\n      metadata: {\n        feedbackText: string;\n        selectedTags: string[];\n        currentRating: number;\n        showToast: boolean;\n      };\n    }\n  // experience feedback\n  | {\n      eventName: 'experience-feedback-show';\n      metadata: {\n        guideId: string;\n      };\n    }\n  | {\n      eventName: 'experience-feedback-dismiss';\n      metadata: {\n        guideId: string;\n      };\n    }\n  | {\n      eventName: 'experience-feedback-submit-great';\n      metadata: {\n        showToast: boolean;\n      };\n    }\n  | {\n      eventName: 'experience-feedback-submit-can-be-better';\n      metadata: {\n        showToast: boolean;\n      };\n    };\n\n// for tailwind can scan the template styles\nexport const pendoTemplateStyles = 'top-0 right-1';\nconst TEN_MIN = 1000 * 60 * 10;\n\n@injectable({\n  name: 'PendoGuide',\n})\nexport class PendoGuide extends RcModule {\n  /**\n   * the state of the guides, the key is the guide name, the value is the existence of the guide\n   *\n   * the guide name is the name of the guide in the pendo, which is the same as the name of the guide in the pendo guide list\n   *\n   * the loaded names define in the `_pendoGuideOptions.checkGuideNames`\n   *\n   * which will be useful when you need check does the user have the ability to show the guide without trigger the guide display\n   */\n  @userStorage\n  @state\n  guidesExistence: Record<string, boolean> = {};\n\n  @action\n  private _setGuidesExistence(guides: Record<string, boolean>) {\n    Object.assign(this.guidesExistence, guides);\n  }\n\n  @delegate('server')\n  async setGuidesExistence(guides: Record<string, boolean>) {\n    this._setGuidesExistence(guides);\n  }\n\n  /**\n   * only save the value inside memory is fine, because the guide need complex behavior to display, we just want a small period of time to avoid display the same guide again due to the pendo events still not be processed and accumulated\n   */\n  private everDisplayedTimestamp = {\n    positiveRating: 0,\n    experienceFeedback: 0,\n  };\n\n  @delegate('clients')\n  private async setEverDisplayed(\n    guideName: keyof typeof this.everDisplayedTimestamp,\n  ) {\n    this.everDisplayedTimestamp[guideName] = Date.now();\n  }\n  /**\n   * Observable that emits Pendo guide events, the event will send from our custom pendo template\n   *\n   * libs/pendo-guides-template/templates/rating.html\n   */\n  guideEvent$ = defer(() => {\n    if (this._pendoAnalytics.enable) {\n      return fromEvent(document, 'pendo-event').pipe(\n        map((e) => {\n          const data = (e as CustomEvent).detail as PendoGuideEvent;\n\n          if (data.eventName && data.metadata) {\n            return data;\n          }\n\n          return null;\n        }),\n        filter(Boolean),\n      );\n    }\n\n    return EMPTY;\n  }).pipe(share());\n\n  constructor(\n    private _auth: Auth,\n    private _brand: Brand,\n    private _pendoAnalytics: PendoAnalytics,\n    private _toast: Toast,\n    private _portManager: PortManager,\n    @optional('PendoGuideOptions')\n    private _pendoGuideOptions: PendoGuideOptions,\n  ) {\n    super();\n\n    this.guideEvent$\n      .pipe(\n        tap((event) => {\n          const { eventName, metadata } = event;\n          this.logger.info('receive pendo event', event);\n\n          switch (eventName) {\n            case 'experience-feedback-submit-great':\n            case 'experience-feedback-submit-can-be-better':\n              this._pendoAnalytics.track(`Int_${eventName}`);\n\n              if (metadata.showToast) {\n                this._toast.success({\n                  message: t('submitFeedbackSuccess'),\n                });\n              }\n              break;\n            case 'settings-rating-submit':\n            case 'positive-rating-submit':\n              if (metadata.showToast) {\n                this._toast.success({\n                  message: t('submitFeedbackSuccess'),\n                });\n              }\n\n              break;\n            case 'settings-rating-display':\n            case 'positive-rating-show':\n            case 'positive-rating-dismiss':\n            case 'experience-feedback-show':\n            case 'experience-feedback-dismiss':\n              this._pendoAnalytics.track(`Int_${eventName}`);\n              break;\n            default:\n              if (process.env.NODE_ENV !== 'production') {\n                this.logger.warn(\n                  'unknown pendo event, although we also track the event to pendo, but that will be better to have a record here, add the type above and add case to handle it will be better',\n                  eventName,\n                );\n              }\n              // rest of events also submit to pendo analytics for we can change events name dynamically without change the code and wait deploy\n              this._pendoAnalytics.track(`Int_${eventName}`);\n              break;\n          }\n        }),\n        takeUntilAppDestroy,\n      )\n      .subscribe();\n\n    // when logout, clear the everDisplayedTimestamp\n    this._auth.beforeLogout$\n      .pipe(\n        tap(() => {\n          this.everDisplayedTimestamp = {\n            positiveRating: 0,\n            experienceFeedback: 0,\n          };\n        }),\n        takeUntilAppDestroy,\n      )\n      .subscribe();\n\n    if (this._portManager.shared) {\n      this._portManager.onMainTab(() => {\n        this.loadOurPendoGuides();\n      });\n    } else {\n      this.loadOurPendoGuides();\n    }\n  }\n\n  private loadOurPendoGuides() {\n    this._pendoAnalytics.guidesLoaded$\n      .pipe(\n        tap(() => {\n          this.syncGuidesExistence();\n        }),\n        takeUntilAppDestroy,\n      )\n      .subscribe();\n  }\n\n  private syncGuidesExistence() {\n    if (this._pendoGuideOptions?.checkGuideNames) {\n      const guidesExistence = this._pendoGuideOptions.checkGuideNames.reduce(\n        (acc, guideName) => {\n          acc[guideName] = this.getPendoGuideExistence(guideName);\n          return acc;\n        },\n        {} as Record<string, boolean>,\n      );\n      this.setGuidesExistence(guidesExistence);\n    }\n  }\n\n  private genPendoNamePrefix() {\n    const appName = this._brand.defaultConfig.appName;\n    return `[Int]: (${appName})`;\n  }\n\n  private genPendoGuideName(name: string) {\n    return `${this.genPendoNamePrefix()} ${name}`;\n  }\n\n  private getPendoGuideExistence(guideName: string) {\n    return Boolean(\n      this._pendoAnalytics.pendo?.findGuideByName?.(\n        this.genPendoGuideName(guideName),\n      ),\n    );\n  }\n\n  /**\n   * Refresh Pendo guides and show a guide by its ID\n   * @param guide Object containing guide id and name\n   * @returns Promise that resolves to boolean indicating success\n   */\n  private async _showGuide(guide: { id: string } | { name: string }) {\n    // when the guide not be focus state, skip that guide display until next time trigger (one of tab is focus will be display)\n    if (!document.hasFocus()) {\n      this.logger.info('Document not be focus, skip that guide display');\n      return false;\n    }\n\n    try {\n      // Check if Pendo is available\n      const pendo = this._pendoAnalytics.pendo;\n      if (!pendo) return false;\n\n      this.logger.info('trigger opened guide', guide);\n\n      const result = ('id' in guide\n        ? pendo.showGuideById(guide.id)\n        : pendo.showGuideByName(guide.name)) as unknown as boolean;\n\n      this.logger.info('Guide opened result', result);\n\n      return result;\n    } catch (error) {\n      this.logger.error('Failed to open Pendo guide', {\n        guide,\n        error,\n      });\n    }\n\n    return false;\n  }\n\n  @delegate('clients')\n  async experienceGuideProcess() {\n    await this.refreshGuides();\n    this.showPositiveRatingGuide();\n    this.showExperienceFeedbackGuide();\n  }\n\n  async showGuideByNameWithPrefix(name: string) {\n    return this._showGuide({ name: this.genPendoGuideName(name) });\n  }\n\n  async refreshGuides() {\n    await this._pendoAnalytics.refreshGuides();\n    // after refresh guides, we need to sync the guides existence to the guidesState\n    this.syncGuidesExistence();\n  }\n\n  /**\n   * * we use static guide name here, for different project can use the same name without add additional guide id config settings\n   */\n\n  /**\n   * @link https://app.pendo.io/s/6255039312297984/guides/yzDNMrhXW3KaBZ4xfx12yNvaN58\n   */\n  async showPositiveRatingGuide() {\n    const positiveRating = this.everDisplayedTimestamp.positiveRating;\n    if (positiveRating && positiveRating > Date.now() - TEN_MIN) {\n      this.logger.info(\n        'Positive rating guide ever displayed, not display again in 10 minutes',\n      );\n      return false;\n    }\n\n    const result = await this.showGuideByNameWithPrefix('positive-rating');\n\n    if (result) this.setEverDisplayed('positiveRating');\n\n    return result;\n  }\n\n  /**\n   * Show the experience feedback guide\n   *\n   * @link https://app.pendo.io/s/6255039312297984/guides/hnIXRpoFTY4rI0yzdmGnhHqkpsQ\n   */\n  async showExperienceFeedbackGuide() {\n    const experienceFeedback = this.everDisplayedTimestamp.experienceFeedback;\n    if (experienceFeedback && experienceFeedback > Date.now() - TEN_MIN) {\n      this.logger.info(\n        'Experience feedback guide ever displayed, not display again in 10 minutes',\n      );\n      return false;\n    }\n\n    const result = await this.showGuideByNameWithPrefix('experience-feedback');\n\n    if (result) this.setEverDisplayed('experienceFeedback');\n\n    return result;\n  }\n\n  /**\n   * Show the experience feedback guide\n   *\n   * @link https://app.pendo.io/s/6255039312297984/guides/hnIXRpoFTY4rI0yzdmGnhHqkpsQ\n   */\n  async showSettingsRatingGuide() {\n    return this.showGuideByNameWithPrefix('settings-rating');\n  }\n}\n"],"mappings":"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","ignoreList":[]}