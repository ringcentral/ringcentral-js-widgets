{"version":3,"file":"CallLogTasks.js","names":["_callLogHelpers","require","_services","_views","_nextCore","_springUi","_react","_interopRequireDefault","_rxjs","_Call","_CallHistory","_CallMonitor","_i18n","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_class","_class2","_descriptor","_descriptor2","e","__esModule","ownKeys","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_regenerator","Symbol","n","iterator","toStringTag","i","c","prototype","Generator","u","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","_regeneratorDefine","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","slice","reverse","reduce","_initializerWarningHelper","Error","DEFAULT_ISSUE_TACKING_SETTINGS_URL","CallLogTasks","exports","injectable","name","metadata","Function","RouterPlugin","Toast","ToastManager","StoragePlugin","CallMonitor","CallHistory","DialerView","Call","PortManager","CallsMapping","Partial","delegate","Array","_RcModule","_router","_toast","_toastManager","_storage","_callMonitor","_callHistory","_dialerView","_call","_portManager","_this","uniqueManager","createUniqueManager","_outboundCallEntityIdMapping","enable","shared","onServer","bindC2DListeners","_bindC2DListeners","_callee","_this2","newCallProcess$","_context","addListener","pipe","tap","identify","sessionId","to","outboundCall","isOutbound","toNumber","phoneNumber","logger","error","isCallFromCurrentDevice","entity","lastRecipient","log","resourceType","thirdPartyResourceType","setOutboundCallEntityIdMapping","id","fetchAndUpdateTask","takeUntilAppDestroy","subscribe","_fetchAndUpdateTask","_callee2","_fromHistory","_args2","_context2","undefined","process","env","NODE_ENV","_x","_onInitOnce","_callee3","_context3","_cleanCache","onInitOnce","update","newValue","originalState","callsMappingState","_updateCallLogState","_callee4","_context4","latestUpdateTime","Date","now","isEdited","updateCallLogState","_x2","_saveSuccess","_callee5","withAlert","_args5","_context5","success","message","allowDuplicates","isSucceed","latestSaveTime","isSaving","saveSuccess","_x3","_saving","_callee6","_context6","saving","_x4","_markAsUnSaving","_callee7","_context7","markAsUnSaving","_x5","_saveError","_callee8","_this3","withoutToast","_args8","_context8","unique","open","saveErrorToast","saveError","_x6","_openTask","_callee9","_context9","openTask","_x7","entityId","deleteTask","ids","_this4","_this5","expiredTaskIds","taskIds","taskId","getCallBySessionId","get","_this6","acc","getIsEditFromIdentify","_this$callsMappingSta","getIsLoggedFromIdentify","_this$callsMappingSta2","RcModule","userStorage","state","action","portal","_this7","view","_useToastItemView","useToastItemView","createElement","Fragment","Link","onClick","close","props","level","ttl","computed"],"sources":["src/app/services/CallLogTasks/CallLogTasks.tsx"],"sourcesContent":["import type { Call as ICall } from '@ringcentral-integration/commons/interfaces/Call.interface';\nimport { isOutbound } from '@ringcentral-integration/commons/lib/callLogHelpers';\nimport {\n  Toast,\n  ToastManager,\n} from '@ringcentral-integration/micro-core/src/app/services';\nimport { useToastItemView } from '@ringcentral-integration/micro-core/src/app/views';\nimport {\n  action,\n  computed,\n  delegate,\n  injectable,\n  portal,\n  PortManager,\n  RcModule,\n  RouterPlugin,\n  state,\n  StoragePlugin,\n  takeUntilAppDestroy,\n  userStorage,\n} from '@ringcentral-integration/next-core';\nimport { Link } from '@ringcentral/spring-ui';\nimport React from 'react';\nimport { tap } from 'rxjs';\n\nimport type { DialerView } from '../../views/DialerView';\nimport { Call } from '../Call';\nimport { CallHistory, type HistoryCall } from '../CallHistory';\nimport { CallMonitor } from '../CallMonitor';\n\nimport type {\n  CallLogStatus,\n  CallSelectionMap,\n  CallsMapping,\n} from './CallLogTasks.interface';\nimport { t } from './i18n';\n\nconst DEFAULT_ISSUE_TACKING_SETTINGS_URL = '/settings/issuesTracking';\n\n@injectable({\n  name: 'CallLogTasks',\n})\nexport class CallLogTasks extends RcModule {\n  protected uniqueManager = this._toastManager.createUniqueManager();\n\n  constructor(\n    protected _router: RouterPlugin,\n    protected _toast: Toast,\n    protected _toastManager: ToastManager,\n    protected _storage: StoragePlugin,\n    protected _callMonitor: CallMonitor,\n    protected _callHistory: CallHistory,\n    protected _dialerView: DialerView,\n    protected _call: Call,\n    protected _portManager: PortManager,\n  ) {\n    super();\n    this._storage.enable(this);\n    if (this._portManager.shared) {\n      this._portManager.onServer(() => {\n        this.bindC2DListeners();\n      });\n    } else {\n      this.bindC2DListeners();\n    }\n  }\n\n  async bindC2DListeners() {\n    const newCallProcess$ = this._callMonitor.addListener('NewCall').pipe(\n      tap((call) => {\n        const { sessionId: identify, to } = call;\n        const outboundCall = isOutbound(call);\n        const toNumber = to?.phoneNumber;\n        if (!identify) {\n          this.logger.error('sessionId is undefined');\n          return;\n        }\n        if (outboundCall) {\n          const isCallFromCurrentDevice =\n            this._dialerView.isCallFromCurrentDevice(toNumber!);\n\n          if (isCallFromCurrentDevice) {\n            const entity = this._call.lastRecipient;\n            this.logger.log('call from current device', entity);\n            if (entity && entity.resourceType === this.thirdPartyResourceType) {\n              this.setOutboundCallEntityIdMapping(identify, entity.id!);\n            }\n          }\n        }\n        this.fetchAndUpdateTask(call);\n      }),\n      takeUntilAppDestroy,\n    );\n    newCallProcess$.subscribe();\n  }\n\n  async fetchAndUpdateTask(call: ICall, _fromHistory = false) {\n    if (process.env.NODE_ENV !== 'production') {\n      this.logger.error(\n        'if you use CallLogTasks inside CRM project should override fetchAndUpdateTask method',\n        call,\n      );\n    }\n  }\n\n  override async onInitOnce() {\n    this._cleanCache();\n  }\n\n  @userStorage\n  @state\n  callsMappingState: CallsMapping = {};\n\n  @action\n  update(identify: string, newValue: Partial<CallLogStatus>) {\n    const originalState = this.callsMappingState[identify];\n    this.callsMappingState[identify] = {\n      ...originalState,\n      ...newValue,\n    };\n  }\n\n  @delegate('server')\n  async updateCallLogState(identify: string) {\n    this.update(identify, {\n      latestUpdateTime: Date.now(),\n      isEdited: true,\n    });\n  }\n\n  @delegate('server')\n  async saveSuccess(identify: string, withAlert = true) {\n    if (withAlert) {\n      this._toast.success({\n        message: t('saveLogSucceed'),\n        allowDuplicates: false,\n      });\n    }\n    const originalState = this.callsMappingState[identify];\n    this.update(identify, {\n      isSucceed: true,\n      isEdited: !!(\n        originalState &&\n        originalState.latestUpdateTime &&\n        originalState.latestSaveTime &&\n        originalState.latestSaveTime < originalState.latestUpdateTime\n      ),\n      isSaving: false,\n    });\n  }\n\n  @delegate('server')\n  async saving(identify: string) {\n    this.update(identify, {\n      latestSaveTime: Date.now(),\n      isSaving: true,\n    });\n  }\n\n  @delegate('server')\n  async markAsUnSaving(identify: string) {\n    this.update(identify, {\n      isSaving: false,\n    });\n  }\n\n  @portal\n  private saveErrorToast = this._toast.create({\n    view: () => {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      const { action } = useToastItemView();\n      return (\n        <>\n          {t('saveError')}\n          <Link\n            onClick={() => {\n              this._router.push(DEFAULT_ISSUE_TACKING_SETTINGS_URL);\n              action?.close();\n            }}\n          >\n            {' '}\n            {t('reportIssue')}\n          </Link>\n        </>\n      );\n    },\n    props: () => ({\n      level: 'danger',\n      ttl: 0,\n    }),\n  });\n\n  @delegate('server')\n  async saveError(identify: string, withoutToast = false) {\n    this.update(identify, {\n      isEdited: true,\n      isSucceed: false,\n      isSaving: false,\n    });\n    if (!withoutToast) {\n      this.uniqueManager.unique(\n        () => this._toast.open(this.saveErrorToast),\n        'keep',\n      );\n    }\n  }\n\n  async openTask(_call: HistoryCall) {}\n\n  protected _outboundCallEntityIdMapping: Record<string, string> = {};\n\n  setOutboundCallEntityIdMapping(sessionId: string, entityId: string) {\n    this._outboundCallEntityIdMapping[sessionId] = entityId;\n  }\n\n  @action\n  protected deleteTask(ids: string[]) {\n    ids.forEach((id) => {\n      delete this.callsMappingState[id];\n    });\n  }\n\n  /**\n   * when app refresh, clean the expired data in the taskIds\n   *\n   * the expired means the data is not in the call history or call monitor\n   */\n  protected _cleanCache() {\n    const expiredTaskIds: string[] = [];\n\n    // only keep the data that will be show in our app\n    this.taskIds.forEach((taskId) => {\n      if (!this._callHistory.getCallBySessionId(taskId)) {\n        expiredTaskIds.push(taskId);\n      }\n    });\n\n    this.deleteTask(expiredTaskIds);\n  }\n\n  get taskIds(): string[] {\n    return [];\n  }\n\n  get thirdPartyResourceType() {\n    return '';\n  }\n\n  @computed\n  get loggedMap() {\n    return Object.keys(this.callsMappingState).reduce((acc, key) => {\n      acc[key] = this.callsMappingState[key].isSucceed;\n      return acc;\n    }, {} as Record<string, boolean>);\n  }\n\n  get callSelectionMap(): CallSelectionMap {\n    return {};\n  }\n\n  public getIsEditFromIdentify(identify: string) {\n    return this.callsMappingState[identify]?.isEdited;\n  }\n\n  public getIsLoggedFromIdentify(identify: string) {\n    return this.callsMappingState[identify]?.isSucceed;\n  }\n}\n"],"mappings":"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","ignoreList":[]}