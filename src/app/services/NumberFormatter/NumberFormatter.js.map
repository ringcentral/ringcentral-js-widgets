{"version":3,"file":"NumberFormatter.js","names":["_formatNumber2","require","_normalizeNumber2","_nextCore","_AccountInfo","_ExtensionInfo","_RegionSettings","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_class","_class2","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_classCallCheck","a","n","TypeError","_defineProperties","key","_createClass","prototype","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","_setPrototypeOf","_applyDecoratedDescriptor","l","initializer","slice","reverse","reduce","DEFAULT_MAX_EXT_LENGTH","NumberFormatter","exports","injectable","name","target","optional","undefined","metadata","Function","AccountInfo","ExtensionInfo","RegionSettings","NumberFormatterOptions","computed","that","_that$_extensionInfo$","_regionSettings","areaCode","countryCode","isMultipleSiteEnabled","maxExtNumberLength","_extensionInfo","site","code","_RcModule","_accountInfo","_options","_this","get","_this$_accountInfo$in","_this$_accountInfo$in2","_this$_options","info","limits","maxExtensionNumberLength","_this$_options$isMult","_this$_options2","_this$_extensionInfo$","maxExtensionLength","siteCode","formatNumber","phoneNumber","international","formattingParams","normalizeNumber","removeExtension","RcModule"],"sources":["src/app/services/NumberFormatter/NumberFormatter.ts"],"sourcesContent":["import { formatNumber } from '@ringcentral-integration/commons/lib/formatNumber';\nimport { normalizeNumber } from '@ringcentral-integration/commons/lib/normalizeNumber';\nimport {\n  computed,\n  injectable,\n  optional,\n  RcModule,\n} from '@ringcentral-integration/next-core';\n\nimport { AccountInfo } from '../AccountInfo';\nimport { ExtensionInfo } from '../ExtensionInfo';\nimport { RegionSettings } from '../RegionSettings';\n\nimport type {\n  NumberFormatterOptions,\n  NumberFormattingParams,\n} from './NumberFormatter.interface';\n\nconst DEFAULT_MAX_EXT_LENGTH = 7;\n\n@injectable({\n  name: 'NumberFormatter',\n})\nexport class NumberFormatter extends RcModule {\n  constructor(\n    protected _accountInfo: AccountInfo,\n    protected _extensionInfo: ExtensionInfo,\n    protected _regionSettings: RegionSettings,\n    @optional('NumberFormatterOptions')\n    protected _options?: NumberFormatterOptions,\n  ) {\n    super();\n  }\n\n  get maxExtNumberLength() {\n    return (\n      this._accountInfo.info?.limits?.maxExtensionNumberLength ||\n      this._options?.maxExtensionNumberLength ||\n      DEFAULT_MAX_EXT_LENGTH\n    );\n  }\n\n  get isMultipleSiteEnabled() {\n    return (\n      this._options?.isMultipleSiteEnabled ??\n      this._extensionInfo.isMultipleSiteEnabled\n    );\n  }\n\n  @computed((that: NumberFormatter) => [\n    that._regionSettings.areaCode,\n    that._regionSettings.countryCode,\n    that.isMultipleSiteEnabled,\n    that.maxExtNumberLength,\n    that._extensionInfo.site?.code,\n  ])\n  get formattingParams(): NumberFormattingParams {\n    return {\n      areaCode: this._regionSettings.areaCode,\n      maxExtensionLength: this.maxExtNumberLength,\n      countryCode: this._regionSettings.countryCode,\n      isMultipleSiteEnabled: this.isMultipleSiteEnabled,\n      siteCode: this.isMultipleSiteEnabled\n        ? this._extensionInfo.site?.code\n        : '',\n    };\n  }\n\n  /**\n   * Format phone numbers into local number format, if you need international format, set international to `true`\n   * @param phoneNumber\n   * @returns\n   */\n  formatNumber(phoneNumber = '', international = false) {\n    return (\n      formatNumber({\n        phoneNumber,\n        international,\n        ...this.formattingParams,\n      }) || phoneNumber\n    );\n  }\n\n  /**\n   * Normalize phone numbers into E164 format, if you need to remove extension, set removeExtension to `true`\n   */\n  normalizeNumber(phoneNumber: string, removeExtension = false) {\n    return normalizeNumber({\n      phoneNumber,\n      ...this.formattingParams,\n      removeExtension,\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]}