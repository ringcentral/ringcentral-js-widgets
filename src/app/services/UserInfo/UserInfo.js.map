{"version":3,"file":"UserInfo.js","names":["_nextCore","require","_AccountInfo","_Auth","_ExtensionInfo","_NumberFormatter","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_class","_class2","_classCallCheck","a","n","TypeError","_defineProperties","e","r","t","length","o","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","prototype","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","create","value","_setPrototypeOf","_applyDecoratedDescriptor","l","keys","forEach","initializer","slice","reverse","reduce","UserInfo","exports","injectable","name","metadata","Function","Auth","NumberFormatter","AccountInfo","ExtensionInfo","_RcModule","_auth","_numberFormatter","_accountInfo","_extensionInfo","_this","get","loggedIn","loginStatus","mainCompanyNumber","ready","_extensionNumber","extensionNumber","concat","undefined","loginNumber","formatNumber","RcModule","computed","getOwnPropertyDescriptor"],"sources":["src/app/services/UserInfo/UserInfo.ts"],"sourcesContent":["import {\n  computed,\n  injectable,\n  RcModule,\n} from '@ringcentral-integration/next-core';\n\nimport { AccountInfo } from '../AccountInfo';\nimport { Auth, loginStatus } from '../Auth';\nimport { ExtensionInfo } from '../ExtensionInfo';\nimport { NumberFormatter } from '../NumberFormatter';\n\n/**\n * service for group several services to get user info\n */\n@injectable({\n  name: 'UserInfo',\n})\nexport class UserInfo extends RcModule {\n  /**\n   * the login number of current user\n   *\n   * that is the main company number if no extension number\n   * or the main company number with extension number\n   *\n   * like 1234567890 or 1234567890*101\n   *\n   * without formatting\n   */\n  @computed\n  get loginNumber() {\n    const loggedIn = this._auth.loginStatus === loginStatus.loggedIn;\n    const mainCompanyNumber = this._accountInfo.mainCompanyNumber;\n\n    if (\n      loggedIn &&\n      this._accountInfo.ready &&\n      this._extensionInfo.ready &&\n      mainCompanyNumber\n    ) {\n      const _extensionNumber = this._extensionInfo.extensionNumber;\n      // If no extensionNumber, extensionNumber field needs to be omitted\n      const extensionNumber =\n        _extensionNumber && _extensionNumber !== '0' ? _extensionNumber : null;\n\n      if (!extensionNumber) return mainCompanyNumber;\n\n      return `${mainCompanyNumber}*${extensionNumber}`;\n    }\n\n    return undefined;\n  }\n\n  @computed\n  get formattedLoginNumber() {\n    return this.loginNumber\n      ? this._numberFormatter.formatNumber(this.loginNumber)\n      : undefined;\n  }\n\n  constructor(\n    protected _auth: Auth,\n    protected _numberFormatter: NumberFormatter,\n    protected _accountInfo: AccountInfo,\n    protected _extensionInfo: ExtensionInfo,\n  ) {\n    super();\n  }\n}\n"],"mappings":"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","ignoreList":[]}