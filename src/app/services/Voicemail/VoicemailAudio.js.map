{"version":3,"file":"VoicemailAudio.js","names":["_services","require","_nextCore","_utils","_rxjs","_Conversations","_MessageStore","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_class","_class2","_descriptor","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","slice","reverse","reduce","_initializerWarningHelper","Error","VoicemailAudio","exports","injectable","name","metadata","Function","MessageStore","Auth","Conversations","Record","VoicemailAudioStatus","delegate","_RcModule","_messageStore","_auth","_conversations","_this","removeAudio","voicemailIds","_this2","ids","Array","isArray","id","status","audioMap","blobUrl","URL","revokeObjectURL","onInitOnce","_this3","fromWatchValue","allConversationsMap","pipe","tap","conversationsMap","idsToRemove","acc","voicemailId","get","takeUntilAppDestroy","subscribe","afterLogout$","_setAudioStatus","_updateAudioStatus","_setAudioStatus2","_callee","_context","setAudioStatus","_x","_x2","getAudioStatus","_loadAudio","_callee2","uri","_t","_context2","readMessages","getBlobURL","logger","error","loading","isNetworkError","undefined","loadAudio","_x3","_x4","_getBlobUrl","_callee3","_this$getAudioStatus","_t2","_context3","getBlobUrl","_x5","_x6","_download","_callee4","_context4","downloadFile","getFilenameWithNoUrlParams","download","_x7","_x8","RcModule","state","action"],"sources":["src/app/services/Voicemail/VoicemailAudio.ts"],"sourcesContent":["import { Auth } from '@ringcentral-integration/micro-auth/src/app/services';\nimport {\n  action,\n  delegate,\n  fromWatchValue,\n  injectable,\n  RcModule,\n  state,\n  takeUntilAppDestroy,\n} from '@ringcentral-integration/next-core';\nimport {\n  downloadFile,\n  getBlobURL,\n  getFilenameWithNoUrlParams,\n} from '@ringcentral-integration/utils';\nimport { tap, filter } from 'rxjs';\n\nimport type { VoicemailAudioStatus } from '../../components';\nimport { Conversations } from '../Conversations';\nimport { MessageStore } from '../MessageStore';\n\n@injectable({\n  name: 'VoicemailAudio',\n})\nexport class VoicemailAudio extends RcModule {\n  @state\n  audioMap: Record<string, VoicemailAudioStatus> = {};\n\n  @action\n  removeAudio(voicemailIds: string | string[]) {\n    const ids = Array.isArray(voicemailIds) ? voicemailIds : [voicemailIds];\n\n    ids.forEach((id) => {\n      const status = this.audioMap[id];\n      if (status?.blobUrl) URL.revokeObjectURL(status.blobUrl);\n      delete this.audioMap[id];\n    });\n  }\n\n  constructor(\n    private _messageStore: MessageStore,\n    private _auth: Auth,\n    private _conversations: Conversations,\n  ) {\n    super();\n  }\n\n  override onInitOnce() {\n    fromWatchValue(this, () => this._conversations.allConversationsMap)\n      .pipe(\n        filter(() => Object.keys(this.audioMap).length > 0),\n        tap((conversationsMap) => {\n          // Collect IDs to remove using reduce\n          const idsToRemove = Object.keys(this.audioMap).reduce<string[]>(\n            (acc, voicemailId) => {\n              if (!conversationsMap.get(voicemailId)) {\n                acc.push(voicemailId);\n              }\n              return acc;\n            },\n            [],\n          );\n\n          // Remove collected IDs at once\n          if (idsToRemove.length > 0) {\n            this.removeAudio(idsToRemove);\n          }\n        }),\n        takeUntilAppDestroy,\n      )\n      .subscribe();\n\n    this._auth.afterLogout$\n      .pipe(\n        tap(() => {\n          this.removeAudio(Object.keys(this.audioMap));\n        }),\n        takeUntilAppDestroy,\n      )\n      .subscribe();\n  }\n\n  @action\n  _setAudioStatus(voicemailId: string, status: VoicemailAudioStatus) {\n    this.audioMap[voicemailId] = status;\n  }\n\n  @action\n  _updateAudioStatus(voicemailId: string, status: VoicemailAudioStatus) {\n    this.audioMap[voicemailId] = {\n      ...this.audioMap[voicemailId],\n      ...status,\n    };\n  }\n\n  @delegate('server')\n  async setAudioStatus(voicemailId: string, status: VoicemailAudioStatus) {\n    this._setAudioStatus(voicemailId, status);\n  }\n\n  getAudioStatus(voicemailId: string): VoicemailAudioStatus | undefined {\n    return this.audioMap[voicemailId];\n  }\n\n  @delegate('server')\n  async loadAudio(voicemailId: string, uri: string) {\n    try {\n      this._messageStore.readMessages(voicemailId);\n\n      const blobUrl = await getBlobURL(uri);\n      this._updateAudioStatus(voicemailId, {\n        blobUrl,\n      });\n\n      return blobUrl;\n    } catch (error) {\n      this.logger.error('loadAudio error', error);\n      this._updateAudioStatus(voicemailId, {\n        loading: false,\n        isNetworkError: true,\n      });\n\n      return undefined;\n    }\n  }\n\n  @delegate('server')\n  async getBlobUrl(voicemailId: string, uri: string) {\n    const blobUrl = this.getAudioStatus(voicemailId)?.blobUrl;\n    if (blobUrl) return blobUrl;\n\n    return uri ? await this.loadAudio(voicemailId, uri) : undefined;\n  }\n\n  async download(voicemailId?: string, uri?: string) {\n    this._messageStore.readMessages(voicemailId);\n\n    if (voicemailId && uri) {\n      const blobUrl = await this.getBlobUrl(voicemailId, uri);\n\n      if (blobUrl) {\n        downloadFile(blobUrl, getFilenameWithNoUrlParams(uri));\n        return;\n      }\n    }\n\n    this.logger.error('Voicemail uri is empty:', voicemailId);\n  }\n}\n"],"mappings":"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","ignoreList":[]}