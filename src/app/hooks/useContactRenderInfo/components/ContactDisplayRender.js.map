{"version":3,"file":"ContactDisplayRender.js","names":["_FormattedPhoneNumber","require","_nextCore","_springIcon","_springUi","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_i18n","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","ContactDisplayRender","exports","props","info","callQueueName","isMissed","renderQueueWithName","renderInfo","Renderer","_ref","prefix","createElement","Element","_ref2","_metadata$contact","displayControl","_ref3","_ref3$maybe","maybe","displayMaybe","_ref3$matchCounts","matchCounts","displayMatchCounts","_ref3$viewable","viewable","_viewable","_ref3$align","align","integrationConfig","useContainer","formattedPhoneNumberFn","useFormattedPhoneNumberFn","type","formattedPhoneNumber","displayName","title","className","_ref4","onViewEntity","viewableEntityTypes","metadata","resultDisplayName","showMaybe","contactName","contact","includes","Component","main","clsx","queueName","concat","href","onClick","preventDefault","stopPropagation","showServerCallerId","serverName","numberOfMatches","twMerge","Fragment","Tooltip","Icon","symbol","InfoMd","size","Tag","color","variant","_ref5","_renderInfo$matchedCo","queueNameDisplay","matchedContact","isCallQueueNumber","renderQueueWithNameText","_ref6","_renderInfo$matchedCo2","useFormatExtOrPhoneNumber","callerInfo","undefined","hideBlocked","useMemo","extensionNumber","phoneNumber","useGetContactDisplayTextFn","useCallback","_ref7"],"sources":["src/app/hooks/useContactRenderInfo/components/ContactDisplayRender.tsx"],"sourcesContent":["import type { CallerInfo } from '@ringcentral-integration/commons/interfaces/Call.interface';\nimport { Entity } from '@ringcentral-integration/commons/interfaces/Entity.interface';\nimport { useFormattedPhoneNumberFn } from '@ringcentral-integration/micro-auth/src/app/components/FormattedPhoneNumber';\nimport { IntegrationConfig } from '@ringcentral-integration/micro-setting/src/app/services';\nimport { useContainer } from '@ringcentral-integration/next-core';\nimport { InfoMd } from '@ringcentral/spring-icon';\nimport { Icon, Tag, Tooltip, twMerge } from '@ringcentral/spring-ui';\nimport clsx from 'clsx';\nimport React, { FC, useCallback, useMemo } from 'react';\n\nimport { t } from '../i18n';\nimport { ContactDisplayInfo } from '../utils';\n\nexport type ContactDisplayRenderProps = {\n  info: ContactDisplayInfo;\n  callQueueName?: string;\n  isMissed?: boolean;\n  /**\n   * the render control to control the display of the display name\n   */\n  displayControl?: {\n    /**\n     * does the display name need to be displayed as viewable\n     */\n    viewable?: boolean;\n    /**\n     * does the display name need to be displayed as maybe in multiple matches\n     *\n     * @default false\n     */\n    maybe?: boolean;\n    /**\n     * does the display name need to be displayed as matches in multiple matches\n     *\n     * @default false\n     */\n    matchCounts?: boolean;\n    /**\n     * the alignment of the tag container\n     *\n     * @default 'left'\n     */\n    align?: 'left' | 'center';\n  };\n  /**\n   * the prefix to display before the display name\n   */\n  prefix?: React.ReactNode;\n};\n\nexport const ContactDisplayRender: FC<ContactDisplayRenderProps> = (props) => {\n  const { info, callQueueName, isMissed } = props;\n\n  if (callQueueName) {\n    return renderQueueWithName({\n      callQueueName,\n      renderInfo: info,\n      Renderer: ({ prefix }) => <Element {...props} prefix={prefix} />,\n    });\n  }\n\n  return <Element {...props} isMissed={isMissed} />;\n};\n\nconst Element: FC<ContactDisplayRenderProps> = ({\n  info,\n  displayControl,\n  prefix,\n  isMissed,\n}) => {\n  const {\n    maybe: displayMaybe = false,\n    matchCounts: displayMatchCounts = false,\n    viewable: _viewable = false,\n    align = 'left',\n  } = displayControl || {};\n\n  const integrationConfig = useContainer<IntegrationConfig, true>(\n    'IntegrationConfig',\n  );\n  const formattedPhoneNumberFn = useFormattedPhoneNumberFn();\n\n  if (info.type === 'phoneNumber') {\n    const formattedPhoneNumber = formattedPhoneNumberFn(info.displayName);\n\n    return (\n      <div title={formattedPhoneNumber} className=\"truncate\">\n        {formattedPhoneNumber}\n      </div>\n    );\n  }\n\n  const { onViewEntity, viewableEntityTypes } = integrationConfig || {};\n\n  const { displayName, metadata, type } = info;\n\n  const resultDisplayName =\n    displayMaybe && metadata?.showMaybe\n      ? t('maybe', {\n          contactName: displayName,\n        })\n      : displayName;\n\n  const viewable =\n    _viewable &&\n    onViewEntity &&\n    metadata?.contact &&\n    viewableEntityTypes?.includes(metadata?.contact?.type!);\n\n  const Component = viewable ? 'a' : 'span';\n\n  const main = (\n    <Component\n      className={clsx(\n        'truncate self-stretch',\n        viewable && 'cursor-pointer hover:underline',\n        isMissed && 'typography-subtitleBold',\n      )}\n      title={resultDisplayName}\n      data-sign={metadata?.queueName ? `queueName-${type}` : type}\n      {...(viewable\n        ? {\n            // add a empty href to make the component able to clickable and focusable\n            href: '',\n            onClick: (e) => {\n              e.preventDefault();\n              e.stopPropagation();\n\n              onViewEntity(metadata.contact);\n            },\n          }\n        : {})}\n    >\n      {resultDisplayName}\n    </Component>\n  );\n\n  // when be server name, display the hint icon for user to know that is server name not contact\n  const showServerCallerId =\n    metadata?.serverName && !metadata?.queueName && type === 'callerIdName';\n\n  const numberOfMatches = metadata?.numberOfMatches;\n\n  return (\n    <div\n      className={twMerge(\n        'inline-flex flex-col min-w-0 max-w-full',\n        align === 'center' ? 'items-center' : 'items-start',\n      )}\n    >\n      <div className=\"inline-flex items-center gap-1 max-w-full truncate\">\n        {prefix}\n        {showServerCallerId ? (\n          <>\n            {main}\n            <Tooltip title={t('callerId')}>\n              <Icon\n                data-sign=\"callerIdHint\"\n                symbol={InfoMd}\n                size=\"small\"\n                className=\"text-neutral-b2\"\n              />\n            </Tooltip>\n          </>\n        ) : (\n          main\n        )}\n      </div>\n      {displayMatchCounts && numberOfMatches && numberOfMatches > 1 ? (\n        <Tag\n          color=\"neutral\"\n          variant=\"inverted\"\n          className=\"shrink-0 w-fit max-w-20 my-1\"\n        >\n          {t('matches', { numberOfMatches })}\n        </Tag>\n      ) : null}\n    </div>\n  );\n};\n\ntype RenderQueueWithNameOptions = {\n  callQueueName: string;\n  renderInfo: ContactDisplayInfo;\n  /**\n   * when is not plain text, the target render component\n   */\n  Renderer: FC<{ prefix?: React.ReactNode }>;\n};\n\nfunction renderQueueWithName({\n  callQueueName,\n  renderInfo,\n  Renderer,\n}: RenderQueueWithNameOptions) {\n  const queueName = (\n    <span className=\"truncate\" data-sign=\"queueName\" title={callQueueName}>\n      {callQueueName}\n    </span>\n  );\n\n  const queueNameDisplay = (\n    <>\n      {queueName}\n      {' - '}\n    </>\n  );\n\n  switch (renderInfo.type) {\n    case 'callerIdName':\n      return <Renderer prefix={queueNameDisplay} />;\n    case 'contact':\n      // when be queue number contact, only show the queue name\n      if ((renderInfo.matchedContact as Entity)?.isCallQueueNumber) {\n        return <Renderer />;\n      }\n\n      return <Renderer prefix={queueNameDisplay} />;\n    case 'unknown':\n    case 'phoneNumber':\n    case 'extensionNumber':\n    default:\n      return queueName;\n  }\n}\n\nexport function renderQueueWithNameText({\n  callQueueName,\n  renderInfo,\n}: Omit<RenderQueueWithNameOptions, 'Renderer'>) {\n  switch (renderInfo.type) {\n    case 'callerIdName':\n      return `${callQueueName} - ${renderInfo.displayName}`;\n    case 'contact':\n      // when be queue number contact, only show the queue name\n      if ((renderInfo.matchedContact as Entity)?.isCallQueueNumber) {\n        return renderInfo.displayName;\n      }\n\n      return `${callQueueName} - ${renderInfo.displayName}`;\n\n    case 'unknown':\n    case 'phoneNumber':\n    case 'extensionNumber':\n    default:\n      return callQueueName;\n  }\n}\n\nexport const useFormatExtOrPhoneNumber = (\n  callerInfo: CallerInfo = {},\n  hideBlocked = false,\n) => {\n  const formattedPhoneNumberFn = useFormattedPhoneNumberFn();\n\n  return useMemo(() => {\n    if (!callerInfo.extensionNumber && !callerInfo.phoneNumber) {\n      if (hideBlocked) return '';\n      return t('Blocked');\n    }\n\n    return callerInfo.extensionNumber\n      ? `${t('ext')} ${formattedPhoneNumberFn(callerInfo.extensionNumber)}`\n      : formattedPhoneNumberFn(callerInfo.phoneNumber);\n  }, [\n    hideBlocked,\n    callerInfo.extensionNumber,\n    callerInfo.phoneNumber,\n    formattedPhoneNumberFn,\n  ]);\n};\n\nexport const useGetContactDisplayTextFn = () => {\n  const formattedPhoneNumberFn = useFormattedPhoneNumberFn();\n\n  return useCallback(\n    ({\n      renderInfo,\n      callQueueName,\n    }: {\n      renderInfo: ContactDisplayInfo;\n\n      /**\n       * by default, use the call queue name from the call\n       *\n       * if you want to override the call queue name, you can pass it here\n       */\n      callQueueName?: string;\n    }) => {\n      if (callQueueName) {\n        return renderQueueWithNameText({\n          callQueueName: callQueueName,\n          renderInfo,\n        });\n      }\n\n      if (renderInfo.type === 'phoneNumber') {\n        const formattedPhoneNumber = formattedPhoneNumberFn(\n          renderInfo.displayName,\n        );\n        return formattedPhoneNumber;\n      }\n\n      return renderInfo.displayName;\n    },\n    [formattedPhoneNumberFn],\n  );\n};\n"],"mappings":"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","ignoreList":[]}