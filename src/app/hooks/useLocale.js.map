{"version":3,"file":"useLocale.js","names":["_nextCore","require","_utils","_react","useLocale","exports","currentLocale","useConnector","getModules","locale","t","useCallback","getTranslateFn","apply","arguments"],"sources":["src/app/hooks/useLocale.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type I18n from '@ringcentral-integration/i18n';\nimport { useConnector } from '@ringcentral-integration/next-core';\nimport {\n  Format,\n  getTranslateFn,\n  type MergeI18nArray,\n} from '@ringcentral-integration/utils';\nimport { useCallback } from 'react';\n\nimport type { Locale } from '../../app/services';\n\n/**\n * get `currentLocale` and that i18n method `t` for easy use i18n in component\n *\n * @example\n *\n * - `en-US.ts`\n *  ```tsx\n *  export default {\n *    showMessage: '{hello} {name} Show message',\n *  };\n *  ```\n *\n * - `main.ts`\n *\n * ```tsx\n * import i18n from './i18n';\n *\n * const { t, currentLocale } = useLocale(i18n);\n *\n * const showMessage = t('showMessage', {\n *   hello: 'Hello world',\n *   name: 'John',\n * });\n * ```\n */\nexport const useLocale = <\n  T extends Array<I18n<any>>,\n  P extends Record<string, string> = MergeI18nArray<T>,\n>(\n  /**\n   * current i18n instance\n   */\n  ...i18nInstance: T\n) => {\n  const currentLocale = useConnector((getModules) => {\n    const locale = getModules<Locale>('Locale');\n\n    return locale.currentLocale;\n  });\n\n  const t: Format<P> = useCallback(\n    getTranslateFn(...i18nInstance),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [currentLocale],\n  );\n\n  return {\n    /**\n     * current locale\n     */\n    currentLocale,\n    /**\n     * i18n method `t`\n     *\n     * ```ts\n     * showMessage => 'Show message'\n     * showMessageWithSlot => '{hello} Show message'\n     * showMessageWithArraySlot => '{0} Show message {1}'\n     *\n     * const message1 = t('showMessage'); // => 'Show message'\n     * const message2 = t('showMessageWithSlot', { hello: 'Hello world' }); // => 'Hello world Show message'\n     * const message3 = t('showMessageWithArraySlot', [1, 2]); // => '1 Show message 2'\n     * const message4 = t('showMessageWithArraySlot', 1, 2); // => '1 Show message 2'\n     * ```\n     */\n    t,\n  };\n};\n"],"mappings":";;;;;;;AAEA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAKA,IAAAE,MAAA,GAAAF,OAAA;AARA;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAMG,SAAS,GAAAC,OAAA,CAAAD,SAAA,GAAG,SAAZA,SAASA,CAAA,EAQjB;EACH,IAAME,aAAa,GAAG,IAAAC,sBAAY,EAAC,UAACC,UAAU,EAAK;IACjD,IAAMC,MAAM,GAAGD,UAAU,CAAS,QAAQ,CAAC;IAE3C,OAAOC,MAAM,CAACH,aAAa;EAC7B,CAAC,CAAC;EAEF,IAAMI,CAAY,GAAG,IAAAC,kBAAW,EAC9BC,qBAAc,CAAAC,KAAA,SAAAC,SAAgB,CAAC;EAC/B;EACA,CAACR,aAAa,CAChB,CAAC;EAED,OAAO;IACL;AACJ;AACA;IACIA,aAAa,EAAbA,aAAa;IACb;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACII,CAAC,EAADA;EACF,CAAC;AACH,CAAC","ignoreList":[]}