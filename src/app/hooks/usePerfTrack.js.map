{"version":3,"file":"usePerfTrack.js","names":["_nextCore","require","_react","useWillMountTracker","exports","key","perfTracker","useContainer","willMount","useRef","current","markOnce","useDidMountTracker","startKey","useEffect","measureOnce","name","startMark","useReadyTracker","prop","activate","endMark"],"sources":["src/app/hooks/usePerfTrack.ts"],"sourcesContent":["import { useContainer } from '@ringcentral-integration/next-core';\nimport { useEffect, useRef } from 'react';\n\nimport { PerfTracker } from '../services';\n\nexport const useWillMountTracker = (key: string) => {\n  const perfTracker = useContainer<PerfTracker>('PerfTracker');\n  const willMount = useRef(true);\n  if (willMount.current && perfTracker) {\n    perfTracker.markOnce(key);\n    willMount.current = false;\n  }\n};\n\nexport const useDidMountTracker = (startKey: string, key: string) => {\n  const perfTracker = useContainer<PerfTracker>('PerfTracker');\n  useEffect(() => {\n    perfTracker?.measureOnce({ name: key, startMark: startKey });\n  }, []);\n};\n\ntype UseReadyTracker = {\n  (startKey: string, key: string, prop: boolean): void;\n  (startKey: string, key: string, prop: any, activate?: boolean): void;\n};\nexport const useReadyTracker: UseReadyTracker = (\n  startKey: string,\n  key: string,\n  prop: any,\n  activate?: boolean,\n) => {\n  const perfTracker = useContainer<PerfTracker>('PerfTracker');\n  useEffect(() => {\n    if ((activate || !!prop) && perfTracker) {\n      // leave a mark then measure\n      perfTracker.markOnce(key);\n      perfTracker.measureOnce({ name: key, startMark: startKey, endMark: key });\n    }\n  }, [prop]);\n};\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAIO,IAAME,mBAAmB,GAAAC,OAAA,CAAAD,mBAAA,GAAG,SAAtBA,mBAAmBA,CAAIE,GAAW,EAAK;EAClD,IAAMC,WAAW,GAAG,IAAAC,sBAAY,EAAc,aAAa,CAAC;EAC5D,IAAMC,SAAS,GAAG,IAAAC,aAAM,EAAC,IAAI,CAAC;EAC9B,IAAID,SAAS,CAACE,OAAO,IAAIJ,WAAW,EAAE;IACpCA,WAAW,CAACK,QAAQ,CAACN,GAAG,CAAC;IACzBG,SAAS,CAACE,OAAO,GAAG,KAAK;EAC3B;AACF,CAAC;AAEM,IAAME,kBAAkB,GAAAR,OAAA,CAAAQ,kBAAA,GAAG,SAArBA,kBAAkBA,CAAIC,QAAgB,EAAER,GAAW,EAAK;EACnE,IAAMC,WAAW,GAAG,IAAAC,sBAAY,EAAc,aAAa,CAAC;EAC5D,IAAAO,gBAAS,EAAC,YAAM;IACdR,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAES,WAAW,CAAC;MAAEC,IAAI,EAAEX,GAAG;MAAEY,SAAS,EAAEJ;IAAS,CAAC,CAAC;EAC9D,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAMM,IAAMK,eAAgC,GAAAd,OAAA,CAAAc,eAAA,GAAG,SAAnCA,eAAgCA,CAC3CL,QAAgB,EAChBR,GAAW,EACXc,IAAS,EACTC,QAAkB,EACf;EACH,IAAMd,WAAW,GAAG,IAAAC,sBAAY,EAAc,aAAa,CAAC;EAC5D,IAAAO,gBAAS,EAAC,YAAM;IACd,IAAI,CAACM,QAAQ,IAAI,CAAC,CAACD,IAAI,KAAKb,WAAW,EAAE;MACvC;MACAA,WAAW,CAACK,QAAQ,CAACN,GAAG,CAAC;MACzBC,WAAW,CAACS,WAAW,CAAC;QAAEC,IAAI,EAAEX,GAAG;QAAEY,SAAS,EAAEJ,QAAQ;QAAEQ,OAAO,EAAEhB;MAAI,CAAC,CAAC;IAC3E;EACF,CAAC,EAAE,CAACc,IAAI,CAAC,CAAC;AACZ,CAAC","ignoreList":[]}