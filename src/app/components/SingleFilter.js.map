{"version":3,"file":"SingleFilter.js","names":["_springUi","require","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","Symbol","iterator","Array","from","isArray","_arrayLikeToArray","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","a","toString","slice","constructor","name","test","l","u","next","done","push","value","filterButtonStyle","SingleFilter","exports","_ref","data","onSelect","_ref$visibleCount","visibleCount","className","MenuProps","MoreButtonProps","_useState","useState","_useState2","menuOpen","setMenuOpen","menuButtonRef","useRef","_useState3","_useState4","fixedVisibleCount","setFixedVisibleCount","visibleItems","useMemo","find","item","concat","hiddenItems","filter","includes","handleMenuOpen","handleMenuClose","_MenuProps$onClose","onClose","handleItemClick","itemValue","createElement","clsx","map","key","title","label","type","onClick","Fragment","IconButton","ref","shape","variant","size","color","background","ExpandCollapseCaret","orientation","expanded","Menu","anchorEl","current","open","MenuList","MenuItem","selected"],"sources":["src/app/components/SingleFilter.tsx"],"sourcesContent":["import {\n  ExpandCollapseCaret,\n  type HTMLDataAttribute,\n  IconButton,\n  type IconButtonProps,\n  Menu,\n  MenuItem,\n  MenuList,\n  type MenuProps,\n} from '@ringcentral/spring-ui';\nimport clsx from 'clsx';\nimport React, { useMemo, useRef, useState } from 'react';\n\nconst filterButtonStyle =\n  'sui-filter-button sui-filter-button-root max-w-[120px]';\n\ntype SingleFilterData = {\n  label: string;\n  value: string;\n};\n\ntype SingleFilterProps = {\n  /**\n   * Data array for filter options\n   */\n  data: SingleFilterData[];\n  /**\n   * Current selected value\n   */\n  value?: string;\n  /**\n   * Callback when selection changes\n   */\n  onSelect: (value: string) => void;\n  /**\n   * Number of visible items when menu is closed\n   */\n  visibleCount?: number;\n  /**\n   * Additional CSS classes\n   */\n  className?: string;\n  /**\n   * Props to pass to the Menu component\n   */\n  MenuProps?: Partial<MenuProps>;\n  /**\n   * Props to pass to the More button\n   */\n  MoreButtonProps?: IconButtonProps & HTMLDataAttribute;\n};\n\n/**\n * Single filter component with more menu button\n *\n * for replace the spring-ui SingleFilter component, which is not working as expected, buggy.\n */\nexport const SingleFilter: React.FC<SingleFilterProps> = ({\n  data,\n  value,\n  onSelect,\n  visibleCount = 2,\n  className,\n  MenuProps,\n  MoreButtonProps,\n}) => {\n  const [menuOpen, setMenuOpen] = useState(false);\n  const menuButtonRef = useRef<HTMLButtonElement>(null);\n\n  // Fix visibleCount when menu opens, until it closes\n  const [fixedVisibleCount, setFixedVisibleCount] = useState<number | null>(\n    null,\n  );\n\n  // Calculate visible items (follow original data order)\n  const visibleItems = useMemo(() => {\n    const visibleItems = data.slice(0, visibleCount);\n\n    if (visibleItems.find((item) => item.value === value)) {\n      return visibleItems;\n    }\n\n    // when not in the visible list, replace end of item to target selected item\n    return [\n      ...visibleItems.slice(0, -1),\n      data.find((item) => item.value === value)!,\n    ];\n  }, [data, value, visibleCount]);\n\n  // Calculate hidden items\n  const hiddenItems = useMemo(() => {\n    // exclude visible items\n    return data.filter((item) => !visibleItems.includes(item));\n  }, [data, visibleItems]);\n\n  const handleMenuOpen = () => {\n    setMenuOpen(true);\n    // Fix the visible count when menu opens\n    if (fixedVisibleCount === null) {\n      setFixedVisibleCount(visibleCount);\n    }\n  };\n\n  const handleMenuClose = () => {\n    setMenuOpen(false);\n    // Reset fixed visible count when menu closes\n    setFixedVisibleCount(null);\n    // Call the onClose from MenuProps if provided\n    MenuProps?.onClose?.({} as React.MouseEvent<HTMLElement>, 'backdropClick');\n  };\n\n  const handleItemClick = (itemValue: string) => {\n    onSelect(itemValue);\n    handleMenuClose();\n  };\n\n  return (\n    <div\n      className={clsx('sui-single-filter sui-single-filter-root', className)}\n    >\n      {/* Visible filter buttons */}\n      {visibleItems.map((item) => (\n        <button\n          key={item.value}\n          className={clsx(\n            filterButtonStyle,\n            value === item.value && 'sui-selected',\n          )}\n          title={item.label}\n          aria-current={value === item.value}\n          type=\"button\"\n          onClick={() => handleItemClick(item.value)}\n          data-sign={`filter-${item.value}`}\n        >\n          {item.label}\n        </button>\n      ))}\n\n      {/* More button if there are hidden items */}\n      {hiddenItems.length > 0 && (\n        <>\n          <IconButton\n            ref={menuButtonRef}\n            shape=\"squircle\"\n            variant=\"contained\"\n            size=\"small\"\n            color=\"secondary\"\n            background={false}\n            className=\"sui-single-filter-more\"\n            onClick={handleMenuOpen}\n            aria-expanded={menuOpen}\n            data-prevent-blur=\"true\"\n            {...MoreButtonProps}\n          >\n            <ExpandCollapseCaret orientation=\"vertical\" expanded={menuOpen} />\n          </IconButton>\n\n          <Menu\n            anchorEl={menuButtonRef.current}\n            open={menuOpen}\n            {...MenuProps}\n            onClose={handleMenuClose}\n          >\n            {/* Show all hidden items */}\n            <MenuList>\n              {hiddenItems.map((item) => (\n                <MenuItem\n                  key={item.value}\n                  selected={value === item.value}\n                  onClick={() => handleItemClick(item.value)}\n                  title={item.label}\n                >\n                  {item.label}\n                </MenuItem>\n              ))}\n            </MenuList>\n          </Menu>\n        </>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}