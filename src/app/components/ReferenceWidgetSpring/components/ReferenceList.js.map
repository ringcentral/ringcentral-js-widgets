{"version":3,"file":"ReferenceList.js","names":["_nextCore","require","_components","_springIcon","_springUi","_react","_interopRequireDefault","_i18n","e","__esModule","labelStyle","ReferenceMenuList","exports","_ref","list","label","groupIcon","toolTipText","customCallBack","_ref$showGroupLabel","showGroupLabel","onItemClick","_ref$highLightText","highLightText","selectedMap","getIcon","integrationConfig","useContainer","noItem","length","viewableCrmEntity","Boolean","viewExternalEntity","createElement","MenuList","className","MenuItem","disabled","Icon","symbol","size","ListItemText","secondary","Tooltip","title","InfoMd","t","map","item","index","_item$name","concat","key","selected","id","onClick","classes","selectIndicator","container","primary","TextWithHighlight","text","name","labelType","type","IconButton","ArrowRightUpMd","TooltipProps","variant","color","stopPropagation","preventDefault","EditPenMd","ReferenceListView","_ref2","_ref2$showGroupLabel","_ref2$highLightText","clickable","onViewEntity","List","_item$name2","ListItem","divider","Checkbox","checked","shape","_integrationConfig$on","call","ReferenceList","props","useMenuList"],"sources":["src/app/components/ReferenceWidgetSpring/components/ReferenceList.tsx"],"sourcesContent":["import { IntegrationConfig } from '@ringcentral-integration/micro-setting/src/app/services';\nimport { useContainer } from '@ringcentral-integration/next-core';\nimport { TextWithHighlight } from '@ringcentral-integration/next-widgets/components';\nimport { ArrowRightUpMd, EditPenMd, InfoMd } from '@ringcentral/spring-icon';\nimport {\n  Checkbox,\n  Icon,\n  IconButton,\n  List,\n  ListItem,\n  ListItemText,\n  MenuItem,\n  MenuList,\n  Tooltip,\n} from '@ringcentral/spring-ui';\nimport React, { FunctionComponent } from 'react';\n\nimport {\n  ReferenceItemClickHandler,\n  SelectedIdMap,\n  SimpleCrmObject,\n} from '../ReferenceWidget.interface';\n\nimport { t } from './i18n';\n\ninterface ReferenceListProps {\n  showGroupLabel?: boolean;\n  label?: string;\n  groupIcon?: any;\n  toolTipText?: string;\n  customCallBack?: (item: SimpleCrmObject) => void;\n  highLightText?: string;\n  list: SimpleCrmObject[];\n  selectedMap: SelectedIdMap;\n  onItemClick: ReferenceItemClickHandler;\n  useMenuList?: boolean;\n  getIcon?: (item: SimpleCrmObject) => React.ReactNode;\n}\n\nconst labelStyle = 'typography-descriptor text-neutral-b2 truncate py-3.5 px-3';\n\nexport const ReferenceMenuList: FunctionComponent<\n  Omit<ReferenceListProps, 'useMenuList'>\n> = ({\n  list,\n  label,\n  groupIcon,\n  toolTipText,\n  customCallBack,\n  showGroupLabel = false,\n  onItemClick,\n  highLightText = '',\n  selectedMap,\n  getIcon,\n}) => {\n  const integrationConfig = useContainer<IntegrationConfig, true>(\n    'IntegrationConfig',\n  );\n  const noItem = list.length === 0;\n  const viewableCrmEntity = Boolean(integrationConfig?.viewExternalEntity);\n\n  return (\n    <MenuList className=\"overflow-auto pb-2\" data-sign={label}>\n      {showGroupLabel && (\n        <MenuItem data-sign=\"referenceGroupLabel\" disabled>\n          <div className=\"flex items-center\">\n            {groupIcon && (\n              <Icon\n                symbol={groupIcon as any}\n                size=\"xsmall\"\n                className=\"text-neutral-b2\"\n              />\n            )}\n            <ListItemText\n              className=\"typography-subtitleMini text-neutral-b2 mr-1 ml-1 p-0\"\n              secondary={label}\n            />\n            {toolTipText && (\n              <Tooltip title={toolTipText}>\n                <Icon\n                  data-sign=\"infoIcon\"\n                  symbol={InfoMd}\n                  size=\"xsmall\"\n                  className=\"text-neutral-b2 pointer-events-auto\"\n                />\n              </Tooltip>\n            )}\n          </div>\n        </MenuItem>\n      )}\n      {noItem && (\n        <MenuItem>\n          <ListItemText secondary={t('noRecordMatch')} />\n        </MenuItem>\n      )}\n      {!noItem &&\n        list.map((item, index) => (\n          <MenuItem\n            data-sign={`match${index}`}\n            key={index}\n            selected={!!selectedMap[item.id!]}\n            onClick={() => {\n              if (!item.id) {\n                customCallBack?.(item);\n                return;\n              }\n              onItemClick(item, !selectedMap[item.id!]);\n            }}\n            classes={{\n              selectIndicator: 'self-center',\n              container: 'py-1',\n            }}\n            className=\"group\"\n          >\n            {getIcon && (\n              <span\n                className=\"w-9 h-9 flex items-center justify-start ml-3 flex-shrink-0\"\n                data-sign=\"referenceListIcon\"\n              >\n                {getIcon(item)}\n              </span>\n            )}\n            <ListItemText\n              className=\"m-0 min-w-0 flex-1\"\n              primary={\n                <div className=\"flex items-center justify-between w-full relative\">\n                  <TextWithHighlight\n                    data-sign=\"referenceListResultItem\"\n                    text={item.name ?? ''}\n                    highLightText={highLightText}\n                    className=\"truncate block flex-auto\"\n                  />\n\n                  <span\n                    className={`typography-descriptor text-neutral-b2 truncate ml-2 max-w-[50%] flex-none ${\n                      viewableCrmEntity && item.id\n                        ? 'group-hover:opacity-0 group-[.sui-focus-visible-within]:opacity-0'\n                        : ''\n                    }`}\n                    title={(item as any).labelType || item.type}\n                  >\n                    {(item as any).labelType || item.type}\n                  </span>\n\n                  {viewableCrmEntity && item.id && (\n                    <div\n                      data-sign=\"hover-actions\"\n                      className=\"flex gap-1 absolute right-0 top-0 h-full items-center bg-inherit pl-4 pr-2 group-hover:translate-x-0 group-[.sui-focus-visible-within]:translate-x-0 translate-x-full\"\n                    >\n                      <IconButton\n                        symbol={ArrowRightUpMd}\n                        TooltipProps={{\n                          title: t('viewRecord'),\n                        }}\n                        data-sign=\"viewRecordButton\"\n                        variant=\"icon\"\n                        color=\"neutral\"\n                        size=\"small\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          e.preventDefault();\n                          integrationConfig!.viewExternalEntity!(item);\n                        }}\n                      />\n                    </div>\n                  )}\n\n                  {!item.id && (\n                    <Icon\n                      symbol={EditPenMd}\n                      size=\"small\"\n                      className=\"ml-1\"\n                      data-sign=\"editPenIcon\"\n                    />\n                  )}\n                </div>\n              }\n            />\n          </MenuItem>\n        ))}\n    </MenuList>\n  );\n};\n\nconst ReferenceListView: FunctionComponent<\n  Omit<ReferenceListProps, 'useMenuList'>\n> = ({\n  list,\n  label,\n  showGroupLabel = false,\n  onItemClick,\n  highLightText = '',\n  selectedMap,\n}) => {\n  const integrationConfig = useContainer<IntegrationConfig, true>(\n    'IntegrationConfig',\n  );\n\n  const clickable = Boolean(integrationConfig?.onViewEntity);\n\n  return (\n    <div className=\"overflow-auto\" data-sign={label}>\n      {showGroupLabel && (\n        <div data-sign=\"referenceGroupLabel\" className={labelStyle}>\n          {label}\n        </div>\n      )}\n      {list.length === 0 ? (\n        <div className={labelStyle}>{t('noRecordMatch')}</div>\n      ) : (\n        <List>\n          {list.map((item, index) => (\n            <ListItem\n              data-sign={`match${index}`}\n              key={index}\n              divider={false}\n              onClick={() => {\n                onItemClick(item, !selectedMap[item.id!]);\n              }}\n            >\n              <Checkbox checked={!!selectedMap[item.id!]} />\n              <ListItemText\n                primary={\n                  <TextWithHighlight\n                    data-sign=\"referenceListResultItem\"\n                    text={item.name ?? ''}\n                    highLightText={highLightText}\n                    className=\"truncate\"\n                  />\n                }\n              />\n              {clickable && (\n                <IconButton\n                  symbol={ArrowRightUpMd}\n                  TooltipProps={{\n                    title: t('viewRecord'),\n                  }}\n                  data-sign=\"viewRecordButton\"\n                  shape=\"squircle\"\n                  variant=\"icon\"\n                  color=\"secondary\"\n                  size=\"small\"\n                  className=\"ml-2\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n\n                    integrationConfig?.onViewEntity?.(item);\n                  }}\n                />\n              )}\n            </ListItem>\n          ))}\n        </List>\n      )}\n    </div>\n  );\n};\n\nexport const ReferenceList: FunctionComponent<ReferenceListProps> = (props) => {\n  if (props.useMenuList) {\n    return <ReferenceMenuList {...props} />;\n  }\n  return <ReferenceListView {...props} />;\n};\n"],"mappings":"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","ignoreList":[]}