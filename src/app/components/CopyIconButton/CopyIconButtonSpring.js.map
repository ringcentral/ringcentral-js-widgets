{"version":3,"file":"CopyIconButtonSpring.js","names":["_nextCore","require","_springIcon","_springUi","_react","_interopRequireWildcard","_reactUse","_hooks","_i18n","_interopRequireDefault","_excluded","e","__esModule","t","WeakMap","r","n","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","l","Symbol","iterator","u","next","done","push","value","isArray","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","preventFocus","preventDefault","CopyIconButtonSpring","exports","_ref","text","getText","onCopied","_ref$disappearTime","disappearTime","rest","_useCopyToClipboard","useCopyToClipboard","_useCopyToClipboard2","copy","_useLocale","useLocale","i18n","_useRefState","useRefState","_useRefState2","copiedRef","setCopied","_useSleep","useSleep","sleep","copied","current","useEffect","then","createElement","IconButton","variant","className","onMouseDown","size","TooltipProps","placement","title","symbol","CheckMd","color","CopyMd","onClick","copyText","process","env","NODE_ENV","logger","warn","copiedText"],"sources":["src/app/components/CopyIconButton/CopyIconButtonSpring.tsx"],"sourcesContent":["import { logger } from '@ringcentral-integration/next-core';\nimport { CheckMd, CopyMd } from '@ringcentral/spring-icon';\nimport {\n  IconButton,\n  IconButtonProps,\n  useRefState,\n  useSleep,\n} from '@ringcentral/spring-ui';\nimport React, { type FunctionComponent, useEffect } from 'react';\nimport { useCopyToClipboard } from 'react-use';\n\nimport { useLocale } from '../../hooks';\n\nimport i18n from './i18n';\n\ntype CopyIconButtonProps = {\n  /**\n   * text that you want to copy\n   */\n  text?: string;\n  /**\n   * copied success disappear time\n   *\n   * @default 3000\n   */\n  disappearTime?: number;\n  /**\n   * copy text that you want to copy when click\n   */\n  getText?: () => string;\n  /**\n   * trigger when copied success\n   */\n  onCopied?: (copiedText: string) => void;\n} & IconButtonProps;\n\nconst preventFocus = (\n  e: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n): void => e.preventDefault();\n\nexport const CopyIconButtonSpring: FunctionComponent<CopyIconButtonProps> = ({\n  text,\n  getText,\n  onCopied,\n  disappearTime = 3000,\n  ...rest\n}) => {\n  const [, copy] = useCopyToClipboard();\n  const { t } = useLocale(i18n);\n\n  const [copiedRef, setCopied] = useRefState(false);\n\n  const { sleep } = useSleep();\n\n  const copied = copiedRef.current;\n\n  useEffect(() => {\n    if (!copied) return;\n\n    sleep(disappearTime).then(() => {\n      setCopied(false, true);\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [copied]);\n\n  return copied ? (\n    <IconButton\n      variant=\"icon\"\n      className=\"text-success\"\n      onMouseDown={preventFocus}\n      size=\"xsmall\"\n      TooltipProps={{\n        placement: 'top',\n        title: t('copied'),\n      }}\n      symbol={CheckMd}\n      {...rest}\n    />\n  ) : (\n    <IconButton\n      variant=\"icon\"\n      TooltipProps={{\n        placement: 'top',\n        title: t('copy'),\n      }}\n      size=\"xsmall\"\n      color=\"secondary\"\n      onMouseDown={preventFocus}\n      symbol={CopyMd}\n      data-sign=\"copy\"\n      onClick={() => {\n        setCopied(true, false);\n        const copyText = text || getText?.();\n\n        if (process.env.NODE_ENV !== 'production' && !copyText) {\n          logger.warn(\n            '[CopyIconButton] cannot get correct text, make sure you have set `text` or `getText` prop',\n          );\n          return;\n        }\n\n        const copiedText = copyText || '';\n        copy(copiedText);\n        onCopied?.(copiedText);\n      }}\n      {...rest}\n    />\n  );\n};\n"],"mappings":"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","ignoreList":[]}