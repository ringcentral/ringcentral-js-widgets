{"version":3,"file":"CopyIconButton.js","names":["_react","_interopRequireWildcard","require","_reactUse","_hooks","_i18n","_interopRequireDefault","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","l","Symbol","iterator","u","next","done","push","value","isArray","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","preventFocus","preventDefault","CopyIconButton","exports","_ref","text","getText","onCopied","_ref$disappearTime","disappearTime","rest","_useCopyToClipboard","useCopyToClipboard","_useCopyToClipboard2","copy","_useLocale","useLocale","i18n","_useRefState","useRefState","_useRefState2","copiedRef","setCopied","_useSleep","useSleep","sleep","copied","current","useEffect","then","createElement","_IconButton","RcIconButton","variant","disableRipple","title","color","onMouseDown","size","TooltipProps","placement","symbol","Check","Copy","onClick","copyText","process","env","NODE_ENV","console","warn","copiedText"],"sources":["src/app/components/CopyIconButton/CopyIconButton.tsx"],"sourcesContent":["import { RcIconButton, useRefState, useSleep } from '@ringcentral/juno';\nimport { Check, Copy } from '@ringcentral/juno-icon';\nimport React, {\n  type ComponentProps,\n  type FunctionComponent,\n  useEffect,\n} from 'react';\nimport { useCopyToClipboard } from 'react-use';\n\nimport { useLocale } from '../../hooks';\n\nimport i18n from './i18n';\n\ntype CopyIconButtonProps = {\n  /**\n   * text that you want to copy\n   */\n  text?: string;\n  /**\n   * copied success disappear time\n   *\n   * @default 3000\n   */\n  disappearTime?: number;\n  /**\n   * copy text that you want to copy when click\n   */\n  getText?: () => string;\n  /**\n   * trigger when copied success\n   */\n  onCopied?: (copiedText: string) => void;\n} & ComponentProps<typeof RcIconButton>;\n\nconst preventFocus = (\n  e: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n): void => e.preventDefault();\n\nexport const CopyIconButton: FunctionComponent<CopyIconButtonProps> = ({\n  text,\n  getText,\n  onCopied,\n  disappearTime = 3000,\n  ...rest\n}) => {\n  const [, copy] = useCopyToClipboard();\n  const { t } = useLocale(i18n);\n\n  const [copiedRef, setCopied] = useRefState(false);\n\n  const { sleep } = useSleep();\n\n  const copied = copiedRef.current;\n\n  useEffect(() => {\n    if (!copied) return;\n\n    sleep(disappearTime).then(() => {\n      setCopied(false, true);\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [copied]);\n\n  return copied ? (\n    <RcIconButton\n      variant=\"plain\"\n      disableRipple\n      title={t('copied')}\n      color=\"success.f02\"\n      onMouseDown={preventFocus}\n      size=\"small\"\n      TooltipProps={{\n        placement: 'top',\n      }}\n      symbol={Check}\n      {...rest}\n    />\n  ) : (\n    <RcIconButton\n      variant=\"plain\"\n      title={t('copy')}\n      size=\"small\"\n      onMouseDown={preventFocus}\n      symbol={Copy}\n      onClick={() => {\n        setCopied(true, false);\n        const copyText = text || getText?.();\n\n        if (process.env.NODE_ENV !== 'production' && !copyText) {\n          console.warn(\n            '[CopyIconButton] cannot get correct text, make sure you have set `text` or `getText` prop',\n          );\n          return;\n        }\n\n        const copiedText = copyText || '';\n        copy(copiedText);\n        onCopied?.(copiedText);\n      }}\n      {...rest}\n    />\n  );\n};\n"],"mappings":"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","ignoreList":[]}