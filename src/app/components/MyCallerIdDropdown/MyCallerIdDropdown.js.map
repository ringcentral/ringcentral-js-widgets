{"version":3,"file":"MyCallerIdDropdown.js","names":["_components","require","_hooks","_springUi","_react","_interopRequireWildcard","_i18n","_interopRequireDefault","_i18n2","_excluded","e","__esModule","t","WeakMap","r","n","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","Symbol","iterator","isArray","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","MyCallerIdDropdown","exports","_ref","showAnonymous","fromNumber","value","fromNumbers","options","rest","_useLocale","useLocale","i18n","useContactRenderInfoI18n","anonymousCallerLabel","renderValue","option","isAnonymousCaller","phoneNumber","primaryText","label","usageType","createElement","className","title","FormattedPhoneNumber","useMemo","concat","Dropdown","rootProps","buttonProps","MenuProps","PopperProps","padding","placeholder","getSelectedIndex","index","findIndex","v","process","env","NODE_ENV","console","error","data","_","Option","classes","container","key","MenuItemText"],"sources":["src/app/components/MyCallerIdDropdown/MyCallerIdDropdown.tsx"],"sourcesContent":["import { FormattedPhoneNumber } from '@ringcentral-integration/micro-auth/src/app/components';\nimport { useLocale } from '@ringcentral-integration/micro-core/src/app/hooks';\nimport {\n  Dropdown,\n  DropdownProps,\n  MenuItemText,\n  Option,\n} from '@ringcentral/spring-ui';\nimport React, { FunctionComponent, useMemo } from 'react';\n\nimport useContactRenderInfoI18n from '../../hooks/useContactRenderInfo/i18n';\nimport { UserPhoneNumberInfo } from '../../services/CallerId/CallerId.interface';\n\nimport i18n from './i18n';\n\nexport type MyCallerIdDropdownProps = {\n  showAnonymous: boolean;\n  options: UserPhoneNumberInfo[];\n} & Omit<DropdownProps, 'data' | 'children'>;\n\nexport const MyCallerIdDropdown: FunctionComponent<MyCallerIdDropdownProps> = ({\n  showAnonymous,\n  value: fromNumber,\n  options: fromNumbers,\n  ...rest\n}) => {\n  const { t } = useLocale(i18n, useContactRenderInfoI18n);\n  const anonymousCallerLabel = t('Blocked');\n\n  const renderValue = (option: UserPhoneNumberInfo) => {\n    const isAnonymousCaller = option.phoneNumber === 'anonymous';\n    const primaryText = isAnonymousCaller\n      ? anonymousCallerLabel\n      : option.label || (option.usageType && t(option.usageType));\n\n    return (\n      <div className=\"flex flex-col\">\n        <span className=\"typography-subtitle truncate\" title={primaryText}>\n          {primaryText}\n        </span>\n        {!isAnonymousCaller && (\n          <span\n            data-sign=\"phoneNumber\"\n            className=\"typography-subtitleMini text-neutral-b2 truncate\"\n          >\n            <FormattedPhoneNumber phoneNumber={option.phoneNumber!} />\n          </span>\n        )}\n      </div>\n    );\n  };\n\n  const options = useMemo(() => {\n    if (showAnonymous) {\n      return [\n        ...fromNumbers,\n        {\n          phoneNumber: 'anonymous',\n        },\n      ];\n    }\n\n    return fromNumbers;\n  }, [fromNumbers, showAnonymous]);\n\n  return (\n    <Dropdown\n      rootProps={{\n        title: t('myCallerId'),\n      }}\n      label={t('myCallerId')}\n      {...rest}\n      buttonProps={{\n        'data-sign': 'callFrom',\n      }}\n      MenuProps={{\n        PopperProps: {\n          padding: 16,\n        },\n      }}\n      placeholder=\"Select a caller ID\"\n      getSelectedIndex={(value) => {\n        const index = options.findIndex((v) => v.phoneNumber === value);\n\n        if (process.env.NODE_ENV !== 'production') {\n          if (index === -1) {\n            console.error(\n              `[MyCallerIdDropdown] The fromNumber \"${value}\" is not in the fromNumbers list should figure out why that happened`,\n              {\n                value,\n                fromNumber,\n                fromNumbers,\n              },\n            );\n          }\n        }\n\n        return index !== -1 ? index : 0;\n      }}\n      value={fromNumber}\n      renderValue={(phoneNumber) => {\n        return phoneNumber === 'anonymous' ? (\n          anonymousCallerLabel\n        ) : (\n          <FormattedPhoneNumber phoneNumber={phoneNumber} />\n        );\n      }}\n      data={options}\n    >\n      {(_, option: UserPhoneNumberInfo) => {\n        return (\n          <Option\n            classes={{\n              container: '[&&]:h-12',\n            }}\n            key={option.phoneNumber}\n            value={option.phoneNumber}\n          >\n            <MenuItemText>{renderValue(option)}</MenuItemText>\n          </Option>\n        );\n      }}\n    </Dropdown>\n  );\n};\n"],"mappings":"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","ignoreList":[]}