{"version":3,"file":"useContactAvatar.js","names":["_nextCore","require","_react","useContactAvatar","exports","source","size","arguments","length","undefined","authService","useContainer","contactsService","contact","id","allContactsMap","get","targetContact","result","useMemo","getProfileImageSync","accessToken"],"sources":["src/app/components/ContactAvatar/useContactAvatar.ts"],"sourcesContent":["import type {\n  ContactAvatarSize,\n  IContact,\n} from '@ringcentral-integration/commons/interfaces/Contact.model';\nimport type { Auth } from '@ringcentral-integration/micro-auth/src/app/services';\nimport { useContainer } from '@ringcentral-integration/next-core';\nimport { useMemo } from 'react';\n\nimport type { Contacts } from '../../services';\n\n/**\n * get source contact avatar by contact id or contact profileImage\n *\n * if the contact is fine in allContactsMap, it use the contact in allContactsMap\n * otherwise, it use the source contact in the parameter, like extensionInfo also include profileImage in the data can be used\n *\n * @default size 'xsmall'\n */\nexport const useContactAvatar = (\n  source: IContact | undefined,\n  size: ContactAvatarSize = 'xsmall',\n) => {\n  const authService = useContainer<Auth>('Auth');\n  const contactsService = useContainer<Contacts>('Contacts');\n  const contact = source?.id\n    ? contactsService.allContactsMap.get(source.id)\n    : undefined;\n\n  const targetContact = contact || source;\n\n  const result = useMemo(() => {\n    return targetContact\n      ? contactsService.getProfileImageSync(targetContact, size)\n      : undefined;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    contactsService,\n    size,\n    targetContact,\n    // add accessToken to make sure it will re-render when the token changed\n    authService.accessToken,\n  ]);\n\n  return result;\n};\n"],"mappings":";;;;;;;AAKA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAME,gBAAgB,GAAAC,OAAA,CAAAD,gBAAA,GAAG,SAAnBA,gBAAgBA,CAC3BE,MAA4B,EAEzB;EAAA,IADHC,IAAuB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,QAAQ;EAElC,IAAMG,WAAW,GAAG,IAAAC,sBAAY,EAAO,MAAM,CAAC;EAC9C,IAAMC,eAAe,GAAG,IAAAD,sBAAY,EAAW,UAAU,CAAC;EAC1D,IAAME,OAAO,GAAG,CAAAR,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAES,EAAE,IACtBF,eAAe,CAACG,cAAc,CAACC,GAAG,CAACX,MAAM,CAACS,EAAE,CAAC,GAC7CL,SAAS;EAEb,IAAMQ,aAAa,GAAGJ,OAAO,IAAIR,MAAM;EAEvC,IAAMa,MAAM,GAAG,IAAAC,cAAO,EAAC,YAAM;IAC3B,OAAOF,aAAa,GAChBL,eAAe,CAACQ,mBAAmB,CAACH,aAAa,EAAEX,IAAI,CAAC,GACxDG,SAAS;IACb;EACF,CAAC,EAAE,CACDG,eAAe,EACfN,IAAI,EACJW,aAAa;EACb;EACAP,WAAW,CAACW,WAAW,CACxB,CAAC;EAEF,OAAOH,MAAM;AACf,CAAC","ignoreList":[]}