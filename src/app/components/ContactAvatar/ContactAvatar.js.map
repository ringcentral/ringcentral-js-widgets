{"version":3,"file":"ContactAvatar.js","names":["_nextCore","require","_springIcon","_springUi","_clsx","_interopRequireDefault","_react","_interopRequireWildcard","_libs","_useAvatarColorToken","_useContactAvatar","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","ownKeys","keys","getOwnPropertySymbols","filter","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","_objectWithoutProperties","_objectWithoutPropertiesLoose","indexOf","propertyIsEnumerable","ContactAvatar","exports","forwardRef","props","ref","contact","contactName","textAvatarColor","phoneNumber","_props$variant","variant","dataRef","_props$size","size","url","showPresenceProp","showPresence","isDepartment","rest","type","showPresenceRef","useRef","process","env","NODE_ENV","current","console","warn","contactId","id","contractUrl","useContactAvatar","presenceProps","contacts","useContainer","presence","usePresence","presenceStatus","undefined","colorId","useMemo","jRcContactAvatarColorId","avatarColor","useAvatarColorToken","shortName","getAvatarLetter","avatarProps","_avatarProps$rootProp","_avatarProps$classes","src","IndicatorProps","showStatusIndicator","rootProps","classes","imgProps","loading","err","bgColor","content","clsx","shape","concat","replace","children","symbol","CallQueueMd","ProfileMd","useImperativeHandle","createElement","Avatar","displayName"],"sources":["src/app/components/ContactAvatar/ContactAvatar.tsx"],"sourcesContent":["import type { IContact } from '@ringcentral-integration/commons/interfaces/Contact.model';\nimport { useContainer } from '@ringcentral-integration/next-core';\nimport { CallQueueMd, ProfileMd } from '@ringcentral/spring-icon';\nimport { Avatar, AvatarProps, HTMLDataAttribute } from '@ringcentral/spring-ui';\nimport clsx from 'clsx';\nimport React, {\n  forwardRef,\n  Ref,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n} from 'react';\n\nimport { Contacts } from '../../services';\n\nimport type { TrackProfileFn } from './ContactAvatar.interface';\nimport { getAvatarLetter, jRcContactAvatarColorId } from './libs';\nimport { useAvatarColorToken } from './useAvatarColorToken';\nimport { useContactAvatar } from './useContactAvatar';\n\nexport type ContactAvatarRef = AvatarProps & HTMLDataAttribute;\n\nexport type ContactAvatarProps = {\n  contact?: IContact;\n  /**\n   * is that can click to open mini profile\n   *\n   * // TODO: mini profile still not in our project, so still default to false\n   * @default false\n   */\n  clickable?: boolean;\n  contactName?: string;\n  /**\n   * if isDepartment is `true` and `url`, `contactName` not set, use callQueue default department avatar\n   */\n  isDepartment?: boolean;\n  textAvatarColor?: string;\n  phoneNumber?: string;\n  url?: string;\n  /**\n   * avatar will render presence if showPresence is true\n   * please make sure that contact.account.id set in contact prop, otherwise get presence will return null in AccountContacts module\n   *\n   * # ensure the value only use once in the component lifetime when initial, not able to change after initial, must be static\n   */\n  showPresence?: boolean;\n  /**\n   * provide you can get inner props with ref, useful when you need get props to show in image preview or other place, like mini profile.\n   */\n  dataRef?: Ref<ContactAvatarRef>;\n  /**\n   * track related function\n   */\n  trackMiniProfileFn?: TrackProfileFn;\n  trackFullProfileFn?: TrackProfileFn;\n  trackProfileLocation?: string;\n} & Omit<AvatarProps, 'clickable' | 'src'>;\n// TODO: mini profile still not in this stage, so still not enable\n// & Pick<MiniProfilePopperProps, 'preventMouseHoverEvents'> &\n//    &\n//   Pick<MiniProfilePopperProps, 'onOpen'>;\n\nexport const ContactAvatar = forwardRef<HTMLDivElement, ContactAvatarProps>(\n  (props, ref) => {\n    const {\n      contact,\n      contactName,\n      textAvatarColor,\n      phoneNumber,\n      variant = 'circle',\n      // TODO: mini profile still not in our project\n      // clickable = false,\n      dataRef,\n      size = 'large',\n      // preventMouseHoverEvents,\n      // trackFullProfileFn,\n      // trackMiniProfileFn,\n      // trackProfileLocation,\n      url,\n      showPresence: showPresenceProp,\n      isDepartment,\n      ...rest\n    } = props;\n    const showPresence =\n      showPresenceProp &&\n      // only company type contact can show presence\n      contact?.type === 'company';\n\n    const showPresenceRef = useRef(showPresence);\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (showPresence !== showPresenceRef.current) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          'showPresence is static value, not able to change after initial, please ensure that value only use once in the component lifetime when initial',\n        );\n      }\n    }\n\n    const contactId = contact?.id;\n\n    const contractUrl =\n      useContactAvatar(\n        contact,\n        // in spring-ui largest avatar size is 64x64, use small is enough 90x90\n        'xsmall',\n      ) || url;\n\n    const presenceProps = (() => {\n      // because the showPresenceRef.current is static value, so we can use it in condition\n      if (showPresenceRef.current) {\n        // eslint-disable-next-line react-hooks/rules-of-hooks\n        const contacts = useContainer<Contacts>('Contacts');\n        const presence = contacts.usePresence(contact);\n        const presenceStatus = presence || 'unavailable';\n\n        const presenceProps: ContactAvatarRef['IndicatorProps'] = presence\n          ? {\n              variant: presenceStatus,\n              ['data-presence-server-status']: presence,\n              ['data-presence-status']: presenceStatus,\n              ['data-sign']: 'presenceIndicator',\n            }\n          : undefined;\n        return presenceProps;\n      }\n      return undefined;\n    })();\n\n    const colorId = useMemo(\n      () => jRcContactAvatarColorId(contactId, phoneNumber),\n      [contactId, phoneNumber],\n    );\n\n    const avatarColor = useAvatarColorToken(colorId);\n\n    const shortName = useMemo(\n      () => contactName && getAvatarLetter(contactName),\n      [contactName],\n    );\n\n    const avatarProps = useMemo(() => {\n      const avatarProps: ContactAvatarRef = {\n        src: contractUrl,\n        size,\n        IndicatorProps: presenceProps,\n        showStatusIndicator: presenceProps && showPresence,\n        ...rest,\n      };\n\n      avatarProps.rootProps ??= {};\n      (avatarProps.rootProps as any)['data-sign'] = 'contactAvatar';\n\n      avatarProps.classes ??= {};\n      if (contractUrl) {\n        avatarProps.imgProps = {\n          loading: 'lazy',\n        };\n        avatarProps['data-sign'] = 'contactAvatarImg';\n        avatarProps['onErrorCapture'] = (err) => {\n          // eslint-disable-next-line no-console\n          console.warn('avatar onErrorCapture error?', err);\n        };\n\n        return avatarProps;\n      }\n\n      if (contactName) {\n        avatarProps['data-sign'] = 'contactAvatarText';\n        avatarProps['data-color-id'] = colorId;\n\n        const bgColor = textAvatarColor || avatarColor;\n\n        if (variant === 'circle') {\n          avatarProps.classes.content = clsx(\n            avatarProps.classes.content,\n            bgColor,\n            bgColor ? 'text-neutral-static-w0' : undefined,\n          );\n        } else {\n          avatarProps.classes.shape = clsx(\n            avatarProps.classes.shape,\n            bgColor\n              ? // that color able to use is because the tailwind static scan be scan in  apps/micro-contacts/src/app/components/ContactAvatar/useAvatarColorToken.ts\n                `sui-squircle-bg-color-${bgColor.replace('bg-', '')}`\n              : undefined,\n            bgColor ? 'text-neutral-static-w0' : undefined,\n          );\n        }\n        avatarProps.children = shortName;\n\n        return avatarProps;\n      }\n\n      // if isDepartment is true and custom avatar or contactName not set, use callQueue default department avatar\n      if (isDepartment) {\n        return {\n          symbol: CallQueueMd,\n          ...avatarProps,\n          'data-sign': 'contactAvatarDepartmentDefault',\n        };\n      }\n\n      return {\n        symbol: ProfileMd,\n        ...avatarProps,\n        'data-sign': 'contactAvatarDefault',\n      };\n    }, [\n      contractUrl,\n      size,\n      presenceProps,\n      showPresence,\n      rest,\n      contactName,\n      isDepartment,\n      colorId,\n      textAvatarColor,\n      avatarColor,\n      variant,\n      shortName,\n    ]);\n\n    useImperativeHandle(dataRef, () => avatarProps);\n\n    return (\n      <Avatar\n        variant={variant}\n        ref={ref}\n        aria-label=\"contact avatar\"\n        {...avatarProps}\n      />\n    );\n\n    // TODO: clickable still not enable in any project\n    // return clickable ? (\n    //   <MiniProfileAvatar\n    //     ref={ref as any}\n    //     {...avatarProps}\n    //     contactId={contactId}\n    //     phoneNumber={phoneNumber}\n    //     contactName={contactName}\n    //     aria-label=\"Contact avatar clickable\"\n    //     preventMouseHoverEvents={preventMouseHoverEvents}\n    //     trackFullProfileFn={trackFullProfileFn}\n    //     trackMiniProfileFn={trackMiniProfileFn}\n    //     trackProfileLocation={trackProfileLocation}\n    //     contactSource={contactSource}\n    //   />\n    // ) : (\n    //   <Avatar ref={ref as any} aria-label=\"contact avatar\" {...avatarProps} />\n    // );\n  },\n);\n\nContactAvatar.displayName = 'ContactAvatar';\n"],"mappings":"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","ignoreList":[]}