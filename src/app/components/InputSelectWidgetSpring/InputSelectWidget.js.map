{"version":3,"file":"InputSelectWidget.js","names":["_springUi","require","_react","_interopRequireWildcard","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","InputSelectWidget","exports","filedProps","props","uiSchema","formData","title","schema","onChange","_ref","options","maxLength","_useState","useState","_useState2","inputValue","setInputValue","_useState3","_useState4","isOpen","setIsOpen","isFromDropdownRef","useRef","autoOptions","map","opt","id","label","useEffect","handleInputChange","useCallback","rawInputValue","newInputValue","trimStrToLen","current","handleChange","selectedItems","_selectedItems$","selectedValue","handleToggleClick","handleClose","createElement","className","Autocomplete","RootProps","freeSolo","toggleButton","onInputChange","onClose","ToggleButtonProps","disabled","onClick","inputVariant","openOnFocus","toggleWithInput","open","inputProps","size","str","substring"],"sources":["src/app/components/InputSelectWidgetSpring/InputSelectWidget.tsx"],"sourcesContent":["import { Autocomplete } from '@ringcentral/spring-ui';\nimport React, { useState, useCallback, useEffect, useRef } from 'react';\n\nimport { InputSelectWidgetProps } from './InputSelectWidget.interface';\n\nexport const InputSelectWidget = (filedProps: any) => {\n  const {\n    uiSchema: { 'ui:options': props },\n    formData,\n    schema: { title },\n    onChange,\n  } = filedProps;\n  const { options, maxLength } = props as InputSelectWidgetProps;\n\n  const [inputValue, setInputValue] = useState(formData ?? '');\n  const [isOpen, setIsOpen] = useState(false);\n  const isFromDropdownRef = useRef(false);\n\n  const autoOptions = options.map((opt) => ({ id: opt, label: opt }));\n\n  useEffect(() => {\n    setInputValue(formData ?? '');\n  }, [formData]);\n\n  const handleInputChange = useCallback(\n    (rawInputValue: string) => {\n      const newInputValue = trimStrToLen(rawInputValue, maxLength);\n      if (!isFromDropdownRef.current) {\n        setInputValue(newInputValue);\n        onChange(newInputValue);\n      }\n      isFromDropdownRef.current = false;\n    },\n    [onChange, maxLength],\n  );\n\n  const handleChange = useCallback(\n    (selectedItems: any[]) => {\n      const selectedValue = selectedItems[0]?.label || '';\n      isFromDropdownRef.current = true;\n      if (selectedValue) {\n        setInputValue(selectedValue);\n        onChange(selectedValue);\n      }\n      setIsOpen(false);\n    },\n    [onChange],\n  );\n\n  const handleToggleClick = useCallback(() => {\n    setIsOpen(!isOpen);\n  }, [isOpen]);\n\n  const handleClose = useCallback(() => {\n    setIsOpen(false);\n  }, []);\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      <Autocomplete\n        RootProps={{\n          'data-sign': 'subject',\n        }}\n        freeSolo\n        toggleButton\n        label={title}\n        value={[]} // Keep value as empty array since we're using inputValue for the actual value\n        inputValue={inputValue}\n        onInputChange={handleInputChange}\n        onChange={handleChange}\n        onClose={handleClose}\n        options={autoOptions}\n        ToggleButtonProps={{\n          disabled: false,\n          onClick: handleToggleClick,\n        }}\n        inputVariant=\"outlined\"\n        openOnFocus={false}\n        toggleWithInput={false}\n        open={isOpen}\n        inputProps={{ maxLength }}\n        size=\"medium\"\n      />\n    </div>\n  );\n};\n\nfunction trimStrToLen(str: string, length: number | undefined) {\n  if (!str) return '';\n  return str.substring(0, length);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAC,uBAAA,CAAAF,OAAA;AAAwE,SAAAE,wBAAAC,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAH,uBAAA,YAAAA,wBAAAC,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,mBAAAT,CAAA,iBAAAA,CAAA,gBAAAU,OAAA,CAAAV,CAAA,0BAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,cAAAM,EAAA,IAAAd,CAAA,gBAAAc,EAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,EAAA,OAAAP,CAAA,IAAAD,CAAA,GAAAW,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAnB,CAAA,EAAAc,EAAA,OAAAP,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAM,EAAA,EAAAP,CAAA,IAAAC,CAAA,CAAAM,EAAA,IAAAd,CAAA,CAAAc,EAAA,WAAAN,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAAA,SAAAmB,eAAAjB,CAAA,EAAAH,CAAA,WAAAqB,eAAA,CAAAlB,CAAA,KAAAmB,qBAAA,CAAAnB,CAAA,EAAAH,CAAA,KAAAuB,2BAAA,CAAApB,CAAA,EAAAH,CAAA,KAAAwB,gBAAA;AAAA,SAAAA,iBAAA,cAAAC,SAAA;AAAA,SAAAF,4BAAApB,CAAA,EAAAuB,CAAA,QAAAvB,CAAA,2BAAAA,CAAA,SAAAwB,iBAAA,CAAAxB,CAAA,EAAAuB,CAAA,OAAAzB,CAAA,MAAA2B,QAAA,CAAAZ,IAAA,CAAAb,CAAA,EAAA0B,KAAA,6BAAA5B,CAAA,IAAAE,CAAA,CAAA2B,WAAA,KAAA7B,CAAA,GAAAE,CAAA,CAAA2B,WAAA,CAAAC,IAAA,aAAA9B,CAAA,cAAAA,CAAA,GAAA+B,KAAA,CAAAC,IAAA,CAAA9B,CAAA,oBAAAF,CAAA,+CAAAiC,IAAA,CAAAjC,CAAA,IAAA0B,iBAAA,CAAAxB,CAAA,EAAAuB,CAAA;AAAA,SAAAC,kBAAAxB,CAAA,EAAAuB,CAAA,aAAAA,CAAA,IAAAA,CAAA,GAAAvB,CAAA,CAAAgC,MAAA,MAAAT,CAAA,GAAAvB,CAAA,CAAAgC,MAAA,YAAAnC,CAAA,MAAAI,CAAA,GAAA4B,KAAA,CAAAN,CAAA,GAAA1B,CAAA,GAAA0B,CAAA,EAAA1B,CAAA,IAAAI,CAAA,CAAAJ,CAAA,IAAAG,CAAA,CAAAH,CAAA,UAAAI,CAAA;AAAA,SAAAkB,sBAAAnB,CAAA,EAAAiC,CAAA,QAAAnC,CAAA,WAAAE,CAAA,gCAAAkC,MAAA,IAAAlC,CAAA,CAAAkC,MAAA,CAAAC,QAAA,KAAAnC,CAAA,4BAAAF,CAAA,QAAAD,CAAA,EAAAI,CAAA,EAAAG,CAAA,EAAAgC,CAAA,EAAAb,CAAA,OAAAlB,CAAA,OAAAF,CAAA,iBAAAC,CAAA,IAAAN,CAAA,GAAAA,CAAA,CAAAe,IAAA,CAAAb,CAAA,GAAAqC,IAAA,QAAAJ,CAAA,QAAAnB,MAAA,CAAAhB,CAAA,MAAAA,CAAA,UAAAO,CAAA,uBAAAA,CAAA,IAAAR,CAAA,GAAAO,CAAA,CAAAS,IAAA,CAAAf,CAAA,GAAAwC,IAAA,MAAAf,CAAA,CAAAgB,IAAA,CAAA1C,CAAA,CAAA2C,KAAA,GAAAjB,CAAA,CAAAS,MAAA,KAAAC,CAAA,GAAA5B,CAAA,iBAAAL,CAAA,IAAAG,CAAA,OAAAF,CAAA,GAAAD,CAAA,yBAAAK,CAAA,YAAAP,CAAA,eAAAsC,CAAA,GAAAtC,CAAA,cAAAgB,MAAA,CAAAsB,CAAA,MAAAA,CAAA,2BAAAjC,CAAA,QAAAF,CAAA,aAAAsB,CAAA;AAAA,SAAAL,gBAAAlB,CAAA,QAAA6B,KAAA,CAAAY,OAAA,CAAAzC,CAAA,UAAAA,CAAA;AAIjE,IAAM0C,iBAAiB,GAAAC,OAAA,CAAAD,iBAAA,GAAG,SAApBA,iBAAiBA,CAAIE,UAAe,EAAK;EACpD,IAC4BC,KAAK,GAI7BD,UAAU,CAJZE,QAAQ,CAAI,YAAY;IACxBC,QAAQ,GAGNH,UAAU,CAHZG,QAAQ;IACEC,KAAK,GAEbJ,UAAU,CAFZK,MAAM,CAAID,KAAK;IACfE,QAAQ,GACNN,UAAU,CADZM,QAAQ;EAEV,IAAAC,IAAA,GAA+BN,KAAK;IAA5BO,OAAO,GAAAD,IAAA,CAAPC,OAAO;IAAEC,SAAS,GAAAF,IAAA,CAATE,SAAS;EAE1B,IAAAC,SAAA,GAAoC,IAAAC,eAAQ,EAACR,QAAQ,aAARA,QAAQ,cAARA,QAAQ,GAAI,EAAE,CAAC;IAAAS,UAAA,GAAAvC,cAAA,CAAAqC,SAAA;IAArDG,UAAU,GAAAD,UAAA;IAAEE,aAAa,GAAAF,UAAA;EAChC,IAAAG,UAAA,GAA4B,IAAAJ,eAAQ,EAAC,KAAK,CAAC;IAAAK,UAAA,GAAA3C,cAAA,CAAA0C,UAAA;IAApCE,MAAM,GAAAD,UAAA;IAAEE,SAAS,GAAAF,UAAA;EACxB,IAAMG,iBAAiB,GAAG,IAAAC,aAAM,EAAC,KAAK,CAAC;EAEvC,IAAMC,WAAW,GAAGb,OAAO,CAACc,GAAG,CAAC,UAACC,GAAG;IAAA,OAAM;MAAEC,EAAE,EAAED,GAAG;MAAEE,KAAK,EAAEF;IAAI,CAAC;EAAA,CAAC,CAAC;EAEnE,IAAAG,gBAAS,EAAC,YAAM;IACdZ,aAAa,CAACX,QAAQ,aAARA,QAAQ,cAARA,QAAQ,GAAI,EAAE,CAAC;EAC/B,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EAEd,IAAMwB,iBAAiB,GAAG,IAAAC,kBAAW,EACnC,UAACC,aAAqB,EAAK;IACzB,IAAMC,aAAa,GAAGC,YAAY,CAACF,aAAa,EAAEpB,SAAS,CAAC;IAC5D,IAAI,CAACU,iBAAiB,CAACa,OAAO,EAAE;MAC9BlB,aAAa,CAACgB,aAAa,CAAC;MAC5BxB,QAAQ,CAACwB,aAAa,CAAC;IACzB;IACAX,iBAAiB,CAACa,OAAO,GAAG,KAAK;EACnC,CAAC,EACD,CAAC1B,QAAQ,EAAEG,SAAS,CACtB,CAAC;EAED,IAAMwB,YAAY,GAAG,IAAAL,kBAAW,EAC9B,UAACM,aAAoB,EAAK;IAAA,IAAAC,eAAA;IACxB,IAAMC,aAAa,GAAG,EAAAD,eAAA,GAAAD,aAAa,CAAC,CAAC,CAAC,cAAAC,eAAA,uBAAhBA,eAAA,CAAkBV,KAAK,KAAI,EAAE;IACnDN,iBAAiB,CAACa,OAAO,GAAG,IAAI;IAChC,IAAII,aAAa,EAAE;MACjBtB,aAAa,CAACsB,aAAa,CAAC;MAC5B9B,QAAQ,CAAC8B,aAAa,CAAC;IACzB;IACAlB,SAAS,CAAC,KAAK,CAAC;EAClB,CAAC,EACD,CAACZ,QAAQ,CACX,CAAC;EAED,IAAM+B,iBAAiB,GAAG,IAAAT,kBAAW,EAAC,YAAM;IAC1CV,SAAS,CAAC,CAACD,MAAM,CAAC;EACpB,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EAEZ,IAAMqB,WAAW,GAAG,IAAAV,kBAAW,EAAC,YAAM;IACpCV,SAAS,CAAC,KAAK,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEnE,MAAA,YAAAwF,aAAA;IAAKC,SAAS,EAAC;EAAqB,gBAClCzF,MAAA,YAAAwF,aAAA,CAAC1F,SAAA,CAAA4F,YAAY;IACXC,SAAS,EAAE;MACT,WAAW,EAAE;IACf,CAAE;IACFC,QAAQ;IACRC,YAAY;IACZnB,KAAK,EAAErB,KAAM;IACbR,KAAK,EAAE,EAAG,CAAC;IAAA;IACXiB,UAAU,EAAEA,UAAW;IACvBgC,aAAa,EAAElB,iBAAkB;IACjCrB,QAAQ,EAAE2B,YAAa;IACvBa,OAAO,EAAER,WAAY;IACrB9B,OAAO,EAAEa,WAAY;IACrB0B,iBAAiB,EAAE;MACjBC,QAAQ,EAAE,KAAK;MACfC,OAAO,EAAEZ;IACX,CAAE;IACFa,YAAY,EAAC,UAAU;IACvBC,WAAW,EAAE,KAAM;IACnBC,eAAe,EAAE,KAAM;IACvBC,IAAI,EAAEpC,MAAO;IACbqC,UAAU,EAAE;MAAE7C,SAAS,EAATA;IAAU,CAAE;IAC1B8C,IAAI,EAAC;EAAQ,CACd,CACE,CAAC;AAEV,CAAC;AAED,SAASxB,YAAYA,CAACyB,GAAW,EAAEpE,MAA0B,EAAE;EAC7D,IAAI,CAACoE,GAAG,EAAE,OAAO,EAAE;EACnB,OAAOA,GAAG,CAACC,SAAS,CAAC,CAAC,EAAErE,MAAM,CAAC;AACjC","ignoreList":[]}