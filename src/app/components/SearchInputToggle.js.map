{"version":3,"file":"SearchInputToggle.js","names":["_springIcon","require","_springUi","_react","_interopRequireWildcard","_excluded","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_objectWithoutProperties","_objectWithoutPropertiesLoose","getOwnPropertySymbols","length","indexOf","propertyIsEnumerable","SearchInputToggle","exports","_ref","controlledExpanded","expanded","_ref$alwaysExpanded","alwaysExpanded","onExpandedChange","searchInput","onSearchInputChange","placeholder","className","rest","searchInputRef","useRef","handleSearchButtonClick","newExpanded","setTimeout","_searchInputRef$curre","current","focus","handleSearchBlur","_e$relatedTarget","relatedTarget","getAttribute","useEffect","createElement","TextField","inputRef","startAdornment","Icon","symbol","SearchMd","size","variant","RootProps","classes","focusEffect","content","fullWidth","value","inputProps","onChange","onBlur","IconButton","color","onClick","concat","TooltipProps","title"],"sources":["src/app/components/SearchInputToggle.tsx"],"sourcesContent":["import { SearchMd } from '@ringcentral/spring-icon';\nimport {\n  type HTMLDataAttribute,\n  Icon,\n  IconButton,\n  TextField,\n} from '@ringcentral/spring-ui';\nimport React, { useEffect, useRef } from 'react';\n\ntype SearchInputToggleProps = {\n  /**\n   * Controlled expanded state\n   */\n  expanded?: boolean;\n  /**\n   * Always expanded (never show toggle button)\n   */\n  alwaysExpanded?: boolean;\n  /**\n   * Callback when expanded state changes\n   */\n  onExpandedChange?: (expanded: boolean) => void;\n  /**\n   * Current search input value\n   */\n  searchInput: string;\n  /**\n   * Callback when search input changes\n   */\n  onSearchInputChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  /**\n   * Placeholder text for search input\n   */\n  placeholder?: string;\n  /**\n   * Additional CSS classes\n   */\n  className?: string;\n} & HTMLDataAttribute;\n\nexport const SearchInputToggle: React.FC<SearchInputToggleProps> = ({\n  expanded: controlledExpanded,\n  alwaysExpanded = false,\n  onExpandedChange,\n  searchInput,\n  onSearchInputChange,\n  placeholder,\n  className,\n  ...rest\n}) => {\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  // If always expanded, ignore expansion logic\n  const expanded = alwaysExpanded ? true : controlledExpanded ?? false;\n\n  const handleSearchButtonClick = () => {\n    if (!alwaysExpanded) {\n      const newExpanded = true;\n      onExpandedChange?.(newExpanded);\n    }\n\n    // Focus input after state update\n    setTimeout(() => {\n      searchInputRef.current?.focus();\n    }, 0);\n  };\n\n  const handleSearchBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    if (e.relatedTarget?.getAttribute('data-prevent-blur') === 'true') {\n      return;\n    }\n\n    if (!alwaysExpanded && searchInput.length === 0) {\n      const newExpanded = false;\n      onExpandedChange?.(newExpanded);\n    }\n  };\n\n  // Update expanded state when searchInput changes externally\n  useEffect(() => {\n    if (!alwaysExpanded && searchInput.length > 0 && !expanded) {\n      const newExpanded = true;\n      onExpandedChange?.(newExpanded);\n    }\n  }, [searchInput, expanded, alwaysExpanded, onExpandedChange]);\n\n  return (\n    <div className={className}>\n      {expanded ? (\n        <div className=\"overflow-hidden flex-1 min-w-0\">\n          <TextField\n            inputRef={searchInputRef}\n            placeholder={placeholder}\n            startAdornment={<Icon symbol={SearchMd} size=\"small\" />}\n            variant=\"standard\"\n            size=\"medium\"\n            RootProps={{\n              classes: {\n                focusEffect: 'hidden',\n                content: 'border-none',\n              },\n            }}\n            fullWidth\n            value={searchInput}\n            inputProps={{\n              'data-sign': rest['data-sign'],\n            }}\n            onChange={onSearchInputChange}\n            onBlur={handleSearchBlur}\n          />\n        </div>\n      ) : (\n        <div className=\"h-8 -ml-1 flex items-center\">\n          <IconButton\n            variant=\"icon\"\n            size=\"small\"\n            color=\"secondary\"\n            onClick={handleSearchButtonClick}\n            data-sign={`${rest['data-sign']}-button`}\n            TooltipProps={{\n              title: placeholder,\n            }}\n          >\n            <Icon symbol={SearchMd} size=\"small\" />\n          </IconButton>\n        </div>\n      )}\n    </div>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AAMA,IAAAE,MAAA,GAAAC,uBAAA,CAAAH,OAAA;AAAiD,IAAAI,SAAA;AAAA,SAAAD,wBAAAE,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAJ,uBAAA,YAAAA,wBAAAE,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,mBAAAT,CAAA,iBAAAA,CAAA,gBAAAU,OAAA,CAAAV,CAAA,0BAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,cAAAM,EAAA,IAAAd,CAAA,gBAAAc,EAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,EAAA,OAAAP,CAAA,IAAAD,CAAA,GAAAW,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAnB,CAAA,EAAAc,EAAA,OAAAP,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAM,EAAA,EAAAP,CAAA,IAAAC,CAAA,CAAAM,EAAA,IAAAd,CAAA,CAAAc,EAAA,WAAAN,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAAA,SAAAmB,yBAAApB,CAAA,EAAAC,CAAA,gBAAAD,CAAA,iBAAAM,CAAA,EAAAH,CAAA,EAAAI,CAAA,GAAAc,6BAAA,CAAArB,CAAA,EAAAC,CAAA,OAAAgB,MAAA,CAAAK,qBAAA,QAAAlB,CAAA,GAAAa,MAAA,CAAAK,qBAAA,CAAAtB,CAAA,QAAAG,CAAA,MAAAA,CAAA,GAAAC,CAAA,CAAAmB,MAAA,EAAApB,CAAA,IAAAG,CAAA,GAAAF,CAAA,CAAAD,CAAA,UAAAF,CAAA,CAAAuB,OAAA,CAAAlB,CAAA,QAAAmB,oBAAA,CAAAT,IAAA,CAAAhB,CAAA,EAAAM,CAAA,MAAAC,CAAA,CAAAD,CAAA,IAAAN,CAAA,CAAAM,CAAA,aAAAC,CAAA;AAAA,SAAAc,8BAAAlB,CAAA,EAAAH,CAAA,gBAAAG,CAAA,iBAAAF,CAAA,gBAAAG,CAAA,IAAAD,CAAA,SAAAY,cAAA,CAAAC,IAAA,CAAAb,CAAA,EAAAC,CAAA,gBAAAJ,CAAA,CAAAwB,OAAA,CAAApB,CAAA,aAAAH,CAAA,CAAAG,CAAA,IAAAD,CAAA,CAAAC,CAAA,YAAAH,CAAA;AAiC1C,IAAMyB,iBAAmD,GAAAC,OAAA,CAAAD,iBAAA,GAAG,SAAtDA,iBAAmDA,CAAAE,IAAA,EAS1D;EAAA,IARMC,kBAAkB,GAAAD,IAAA,CAA5BE,QAAQ;IAAAC,mBAAA,GAAAH,IAAA,CACRI,cAAc;IAAdA,cAAc,GAAAD,mBAAA,cAAG,KAAK,GAAAA,mBAAA;IACtBE,gBAAgB,GAAAL,IAAA,CAAhBK,gBAAgB;IAChBC,WAAW,GAAAN,IAAA,CAAXM,WAAW;IACXC,mBAAmB,GAAAP,IAAA,CAAnBO,mBAAmB;IACnBC,WAAW,GAAAR,IAAA,CAAXQ,WAAW;IACXC,SAAS,GAAAT,IAAA,CAATS,SAAS;IACNC,IAAI,GAAAlB,wBAAA,CAAAQ,IAAA,EAAA7B,SAAA;EAEP,IAAMwC,cAAc,GAAG,IAAAC,aAAM,EAAmB,IAAI,CAAC;;EAErD;EACA,IAAMV,QAAQ,GAAGE,cAAc,GAAG,IAAI,GAAGH,kBAAkB,aAAlBA,kBAAkB,cAAlBA,kBAAkB,GAAI,KAAK;EAEpE,IAAMY,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAA,EAAS;IACpC,IAAI,CAACT,cAAc,EAAE;MACnB,IAAMU,WAAW,GAAG,IAAI;MACxBT,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAGS,WAAW,CAAC;IACjC;;IAEA;IACAC,UAAU,CAAC,YAAM;MAAA,IAAAC,qBAAA;MACf,CAAAA,qBAAA,GAAAL,cAAc,CAACM,OAAO,cAAAD,qBAAA,uBAAtBA,qBAAA,CAAwBE,KAAK,CAAC,CAAC;IACjC,CAAC,EAAE,CAAC,CAAC;EACP,CAAC;EAED,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAI/C,CAAqC,EAAK;IAAA,IAAAgD,gBAAA;IAClE,IAAI,EAAAA,gBAAA,GAAAhD,CAAC,CAACiD,aAAa,cAAAD,gBAAA,uBAAfA,gBAAA,CAAiBE,YAAY,CAAC,mBAAmB,CAAC,MAAK,MAAM,EAAE;MACjE;IACF;IAEA,IAAI,CAAClB,cAAc,IAAIE,WAAW,CAACX,MAAM,KAAK,CAAC,EAAE;MAC/C,IAAMmB,WAAW,GAAG,KAAK;MACzBT,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAGS,WAAW,CAAC;IACjC;EACF,CAAC;;EAED;EACA,IAAAS,gBAAS,EAAC,YAAM;IACd,IAAI,CAACnB,cAAc,IAAIE,WAAW,CAACX,MAAM,GAAG,CAAC,IAAI,CAACO,QAAQ,EAAE;MAC1D,IAAMY,WAAW,GAAG,IAAI;MACxBT,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAGS,WAAW,CAAC;IACjC;EACF,CAAC,EAAE,CAACR,WAAW,EAAEJ,QAAQ,EAAEE,cAAc,EAAEC,gBAAgB,CAAC,CAAC;EAE7D,oBACEpC,MAAA,YAAAuD,aAAA;IAAKf,SAAS,EAAEA;EAAU,GACvBP,QAAQ,gBACPjC,MAAA,YAAAuD,aAAA;IAAKf,SAAS,EAAC;EAAgC,gBAC7CxC,MAAA,YAAAuD,aAAA,CAACxD,SAAA,CAAAyD,SAAS;IACRC,QAAQ,EAAEf,cAAe;IACzBH,WAAW,EAAEA,WAAY;IACzBmB,cAAc,eAAE1D,MAAA,YAAAuD,aAAA,CAACxD,SAAA,CAAA4D,IAAI;MAACC,MAAM,EAAEC,oBAAS;MAACC,IAAI,EAAC;IAAO,CAAE,CAAE;IACxDC,OAAO,EAAC,UAAU;IAClBD,IAAI,EAAC,QAAQ;IACbE,SAAS,EAAE;MACTC,OAAO,EAAE;QACPC,WAAW,EAAE,QAAQ;QACrBC,OAAO,EAAE;MACX;IACF,CAAE;IACFC,SAAS;IACTC,KAAK,EAAEhC,WAAY;IACnBiC,UAAU,EAAE;MACV,WAAW,EAAE7B,IAAI,CAAC,WAAW;IAC/B,CAAE;IACF8B,QAAQ,EAAEjC,mBAAoB;IAC9BkC,MAAM,EAAEtB;EAAiB,CAC1B,CACE,CAAC,gBAENlD,MAAA,YAAAuD,aAAA;IAAKf,SAAS,EAAC;EAA6B,gBAC1CxC,MAAA,YAAAuD,aAAA,CAACxD,SAAA,CAAA0E,UAAU;IACTV,OAAO,EAAC,MAAM;IACdD,IAAI,EAAC,OAAO;IACZY,KAAK,EAAC,WAAW;IACjBC,OAAO,EAAE/B,uBAAwB;IACjC,gBAAAgC,MAAA,CAAcnC,IAAI,CAAC,WAAW,CAAC,YAAU;IACzCoC,YAAY,EAAE;MACZC,KAAK,EAAEvC;IACT;EAAE,gBAEFvC,MAAA,YAAAuD,aAAA,CAACxD,SAAA,CAAA4D,IAAI;IAACC,MAAM,EAAEC,oBAAS;IAACC,IAAI,EAAC;EAAO,CAAE,CAC5B,CACT,CAEJ,CAAC;AAEV,CAAC","ignoreList":[]}