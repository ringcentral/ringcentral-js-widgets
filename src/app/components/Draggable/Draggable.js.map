{"version":3,"file":"Draggable.js","names":["_reactHooks","require","_px","_react","_interopRequireWildcard","_utils","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","Draggable","exports","_ref","children","ref","useRef","elementPos","x","y","isDragging","useHammer","hammer","pan","Hammer","Pan","direction","DIRECTION_ALL","threshold","add","on","ev","elem","target","current","offsetLeft","offsetTop","_ref2","posX","deltaX","posY","deltaY","isCoordInViewport","style","left","px","top","isFinal","createElement","className"],"sources":["src/app/components/Draggable/Draggable.tsx"],"sourcesContent":["import { useHammer } from '@ringcentral-integration/react-hooks';\nimport { px } from '@ringcentral/juno';\nimport React, { FC, useRef } from 'react';\n\nimport { isCoordInViewport } from './utils';\n\nexport const Draggable: FC = ({ children }) => {\n  const ref = useRef<HTMLDivElement | null>(null);\n  const elementPos = useRef<Record<'x' | 'y', number>>({ x: 0, y: 0 });\n  const isDragging = useRef(false);\n\n  useHammer(ref, (hammer) => {\n    const pan = new Hammer.Pan({\n      direction: Hammer.DIRECTION_ALL,\n      threshold: 0,\n    });\n\n    hammer.add(pan);\n    hammer.on('pan', (ev: HammerInput) => {\n      const elem = ev.target;\n\n      if (!isDragging.current) {\n        isDragging.current = true;\n        elementPos.current.x = elem.offsetLeft;\n        elementPos.current.y = elem.offsetTop;\n      }\n\n      const { x, y } = elementPos.current || {};\n\n      const posX = ev.deltaX + x;\n      const posY = ev.deltaY + y;\n\n      if (isCoordInViewport(posX, posY)) {\n        elem.style.left = px(posX);\n        elem.style.top = px(posY);\n      }\n\n      if (ev.isFinal) {\n        isDragging.current = false;\n      }\n    });\n  });\n\n  return (\n    <div className=\"draggable-root\" ref={ref} data-sign=\"draggable-root\">\n      {children}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]}