{"version":3,"file":"ExpandedLayoutPopper.js","names":["_springUi","require","_react","_interopRequireWildcard","_AppAnnouncement","_AppContext","_AppExpandedContent","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","ExpandedLayoutPopper","exports","_ref","children","expanded","_useState","useState","_useState2","expandedElm","setExpandedElm","_useContext","useContext","AppContext","announcementBottomAnchorRef","announcementHeight","useAnnouncementHeight","actionsRef","useRef","useOnReRender","_actionsRef$current","current","update","topFullScreenFullElmAnchor","createElement","Fragment","Popper","anchorEl","placement","offset","matchAnchorWidth","process","env","NODE_ENV","className","style","height","concat","width","undefined","actions","onClick","stopPropagation","AppExpandedContent","ref","elm"],"sources":["src/app/components/AppContext/ExpandedLayoutPopper.tsx"],"sourcesContent":["import { Popper, PopperActions, useOnReRender } from '@ringcentral/spring-ui';\nimport React, { FunctionComponent, useContext, useRef, useState } from 'react';\n\nimport { useAnnouncementHeight } from './AppAnnouncement';\nimport { AppContext } from './AppContext';\nimport { AppExpandedContent } from './AppExpandedContent';\n\n/**\n * similar to the `AppExpandedContent`, but this component will render a Popper component to show the children.\n *\n * in some case, want your element want to render in the expanded layout, but not in the main content, you can use this component.\n */\nexport const ExpandedLayoutPopper: FunctionComponent<{\n  expanded: boolean;\n}> = ({ children, expanded }) => {\n  const [expandedElm, setExpandedElm] = useState<HTMLDivElement | null>(null);\n  const { announcementBottomAnchorRef } = useContext(AppContext);\n  const announcementHeight = useAnnouncementHeight();\n  const actionsRef = useRef<PopperActions>(null);\n\n  useOnReRender(() => {\n    actionsRef.current?.update();\n  }, [announcementHeight]);\n\n  const topFullScreenFullElmAnchor = announcementBottomAnchorRef.current;\n  return (\n    <>\n      <Popper\n        anchorEl={() => (expanded ? expandedElm : topFullScreenFullElmAnchor)}\n        placement=\"bottom\"\n        offset={0}\n        // in test env not use matchAnchor width for us better debug\n        matchAnchorWidth={process.env.NODE_ENV !== 'test'}\n        className=\"z-drawer bg-neutral-base overflow-hidden\"\n        style={{\n          height: `calc(100vh - ${announcementHeight}px)`,\n          // in test env use 100% for us better debug\n          width: process.env.NODE_ENV === 'test' ? '100%' : undefined,\n        }}\n        actions={actionsRef}\n        onClick={(e) => {\n          // TODO: spring-ui issue, click event will trigger the host item click event\n          e.stopPropagation();\n        }}\n      >\n        {children}\n      </Popper>\n\n      <AppExpandedContent>\n        <div\n          ref={(elm) => {\n            setExpandedElm(elm);\n          }}\n          className=\"w-full h-0\"\n        ></div>\n      </AppExpandedContent>\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]}