{"version":3,"file":"FakeBrowserURL.js","names":["_nextCore","require","_reactHooks","_springUi","_observableHooks","_react","_interopRequireWildcard","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","HIDE_FAKE_BROWSER_URL_KEY","FakeBrowserURL","exports","_ref","valueProp","onCommitted","_useAsyncState","useAsyncState","_useAsyncState2","setValue","inputRef","useRef","showRef","useResultRef","localStorage","getItem","forceUpdate","useForceUpdate","setFakeBrowserUrlDisplay","display","removeItem","setItem","current","message","useEventListener","target","alert","show","prevShow","usePrevious","console","warn","useEffect","window","isMainTab","useConnector","app","modules","PortManager","createElement","className","type","ref","onChange","event","onKeyDown","key","title"],"sources":["src/app/FakeBrowserURL.tsx"],"sourcesContent":["import { useConnector } from '@ringcentral-integration/next-core';\nimport { useAsyncState } from '@ringcentral-integration/react-hooks';\nimport {\n  useEventListener,\n  usePrevious,\n  useResultRef,\n} from '@ringcentral/spring-ui';\nimport { useForceUpdate } from 'observable-hooks';\nimport React, { FunctionComponent, useEffect, useRef } from 'react';\n\nconst HIDE_FAKE_BROWSER_URL_KEY = 'hideFakeBrowserURL';\n\n/**\n * for view current route path in fake browser url\n */\nexport const FakeBrowserURL: FunctionComponent<{\n  value: string;\n  onCommitted: (value: string) => void;\n}> = ({ value: valueProp, onCommitted }) => {\n  const [value, setValue] = useAsyncState(valueProp);\n\n  const inputRef = useRef<HTMLInputElement>(null);\n  const showRef = useResultRef(\n    () => !localStorage.getItem(HIDE_FAKE_BROWSER_URL_KEY),\n  );\n  const forceUpdate = useForceUpdate();\n\n  const setFakeBrowserUrlDisplay = (display: boolean) => {\n    if (display) {\n      localStorage.removeItem(HIDE_FAKE_BROWSER_URL_KEY);\n    } else {\n      localStorage.setItem(HIDE_FAKE_BROWSER_URL_KEY, 'true');\n    }\n    showRef.current = display;\n    forceUpdate();\n  };\n\n  const message = `The fake browser URL be hidden, if you show that, exec that in console:\n\nsetFakeBrowserUrlDisplay(true)\n`;\n\n  useEventListener(inputRef, 'search', (e: any) => {\n    if (e.target.value === '') {\n      setFakeBrowserUrlDisplay(false);\n      // eslint-disable-next-line no-alert\n      alert(message);\n    }\n  });\n\n  const show = showRef.current;\n  const prevShow = usePrevious(() => show);\n\n  if (prevShow !== show && !show) {\n    // eslint-disable-next-line no-console\n    console.warn(message);\n  }\n\n  useEffect(() => {\n    (window as any).setFakeBrowserUrlDisplay = setFakeBrowserUrlDisplay;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const isMainTab = useConnector(() => app.modules.PortManager.isMainTab);\n\n  return show ? (\n    <div className=\"w-full flex\">\n      <input\n        data-sign=\"fakeBrowserURL\"\n        type=\"search\"\n        ref={inputRef}\n        className=\"border-neutral-b2 border-2 px-4 py-2 bg-neutral-b4 w-full\"\n        value={value}\n        onChange={(event) => {\n          setValue(event.target.value);\n        }}\n        onKeyDown={(event) => {\n          if (event.key === 'Enter') {\n            onCommitted(value);\n          }\n        }}\n      />\n      {isMainTab && (\n        <div\n          className=\"border-neutral-b2 border-2 bg-neutral-b4 p-2\"\n          title=\"main tab\"\n        >\n          ðŸ‘‘\n        </div>\n      )}\n    </div>\n  ) : null;\n};\n"],"mappings":"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","ignoreList":[]}