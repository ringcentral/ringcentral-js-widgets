{"version":3,"file":"getCommonAppConfig.js","names":["_services","require","_services2","_views","_plugins","_services3","_views2","_services4","_services5","_views3","_services6","_nextCore","_App","_typeof","o","Symbol","iterator","constructor","prototype","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","a","_arrayLikeToArray","t","toString","call","slice","name","Array","from","test","isArray","length","e","n","ownKeys","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","i","_toPrimitive","toPrimitive","String","Number","getCommonAppConfig","exports","_ref","_sdkConfig$enableDisc","appVersion","prefix","brandConfig","sdkConfig","_ref$modules","modules","share","defaultLocale","process","env","NODE_ENV","Error","sdkParameter","clientId","clientSecret","appName","cachePrefix","concat","clearCacheOnRefreshError","discoveryServer","enableDiscovery","SpringThemePlugin","StoragePlugin","RouterPlugin","ThemePlugin","BlockPlugin","Analytics","CallerId","AvailabilityMonitor","Webphone","CallingSettings","Presence","QuickAccess","UserGuide","Contacts","CompanyContacts","AccountContacts","AddressBook","AccountInfo","ExtensionInfo","ExtensionNumberAreaCode","ConnectivityMonitor","Brand","Locale","Softphone","CallMonitor","Call","SleepDetector","AudioSettings","RingtoneConfiguration","VolumeInspector","ContactSearch","RateLimiter","ActiveCallControl","ComposeText","FaxSender","Environment","ContactInitiator","ContactDetailsView","DialerView","ModalView","provide","useValue","useFactory","brandConfig_2","sdkConfig_1","appKey","deps","useClass","WebSocketSubscription","RouterOptions","createHistory","createMemoryHistory","enabled","worker","locale","enableNewHostDetection","getCurrentLocale","currentLocale","isCompact","main","AppView","render"],"sources":["src/app/getCommonAppConfig.tsx"],"sourcesContent":["import type { BrandConfig as BaseBrandConfig } from '@ringcentral-integration/commons/modules/Brand';\nimport type { SDKConfig } from '@ringcentral-integration/commons/lib/createSdkConfig';\nimport {\n  AccountInfo,\n  Analytics,\n  AvailabilityMonitor,\n  type AvailabilityMonitorOptions,\n  ConnectivityMonitor,\n  Environment,\n  ExtensionInfo,\n  ExtensionNumberAreaCode,\n  Presence,\n  RateLimiter,\n  WebSocketSubscription,\n} from '@ringcentral-integration/micro-auth/src/app/services';\nimport {\n  AccountContacts,\n  AddressBook,\n  CompanyContacts,\n  ContactInitiator,\n  Contacts,\n  ContactSearch,\n} from '@ringcentral-integration/micro-contacts/src/app/services';\nimport { ContactDetailsView } from '@ringcentral-integration/micro-contacts/src/app/views';\nimport {\n  BlockPlugin,\n  SpringThemePlugin,\n  ThemePlugin,\n} from '@ringcentral-integration/micro-core/src/app/plugins';\nimport type {\n  BrandConfig,\n  BrowserLoggerOptions,\n  LocaleOptions,\n} from '@ringcentral-integration/micro-core/src/app/services';\nimport {\n  Brand,\n  Locale,\n  SleepDetector,\n} from '@ringcentral-integration/micro-core/src/app/services';\nimport {\n  ModalView,\n  ModalViewOptions,\n} from '@ringcentral-integration/micro-core/src/app/views';\nimport type { createAppWithCoworker } from '@ringcentral-integration/micro-coworker/src/bootstrap';\nimport {\n  ComposeText,\n  FaxSender,\n} from '@ringcentral-integration/micro-message/src/app/services';\nimport type { WebphoneOptions } from '@ringcentral-integration/micro-phone/src/app/services';\nimport {\n  ActiveCallControl,\n  AudioSettings,\n  Call,\n  CallerId,\n  CallingSettings,\n  CallMonitor,\n  RingtoneConfiguration,\n  Softphone,\n  VolumeInspector,\n  Webphone,\n} from '@ringcentral-integration/micro-phone/src/app/services';\nimport { DialerView } from '@ringcentral-integration/micro-phone/src/app/views';\nimport {\n  QuickAccess,\n  UserGuide,\n} from '@ringcentral-integration/micro-setting/src/app/services';\nimport type {\n  InitiatorOptions,\n  IRouterOptions,\n  ISharedAppOptions,\n} from '@ringcentral-integration/next-core';\nimport {\n  createMemoryHistory,\n  createSharedApp,\n  render,\n  RouterOptions,\n  RouterPlugin,\n  StoragePlugin,\n} from '@ringcentral-integration/next-core';\n\nimport { AppView } from './App.view';\n\ninterface CreateAppEntryOptions<\n  T extends typeof createAppWithCoworker | typeof createSharedApp,\n> {\n  appVersion: string;\n  prefix?: string;\n  brandConfig: BaseBrandConfig;\n  sdkConfig: SDKConfig;\n  modules: Parameters<T>[0]['modules'];\n  share: ISharedAppOptions;\n}\n\n/**\n * create app entry config\n */\nexport const getCommonAppConfig = <\n  T extends typeof createAppWithCoworker | typeof createSharedApp,\n>({\n  appVersion,\n  prefix,\n  brandConfig,\n  sdkConfig,\n  modules = [],\n  share,\n}: CreateAppEntryOptions<T>) => {\n  const { defaultLocale } = brandConfig;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (!prefix) {\n      throw new Error('prefix is required');\n    }\n  }\n\n  const sdkParameter: SDKConfig = {\n    ...sdkConfig,\n    clientId: sdkConfig.clientId,\n    clientSecret: sdkConfig.clientSecret,\n    appVersion,\n    appName: brandConfig.appName as string,\n    cachePrefix: `sdk-${prefix}`,\n    clearCacheOnRefreshError: false,\n    discoveryServer: sdkConfig.discoveryServer,\n    enableDiscovery: sdkConfig.enableDiscovery ?? true,\n  };\n\n  return {\n    modules: [\n      // plugin\n      SpringThemePlugin,\n      StoragePlugin,\n      RouterPlugin,\n      ThemePlugin,\n      BlockPlugin,\n      // services\n      Analytics,\n      CallerId,\n      AvailabilityMonitor,\n      Webphone,\n      CallingSettings,\n      Presence,\n      QuickAccess,\n      UserGuide,\n      Contacts,\n      CompanyContacts,\n      AccountContacts,\n      AddressBook,\n      AccountInfo,\n      ExtensionInfo,\n      ExtensionNumberAreaCode,\n      ConnectivityMonitor,\n      Brand,\n      Locale,\n      Softphone,\n      CallMonitor,\n      Call,\n      SleepDetector,\n      AudioSettings,\n      RingtoneConfiguration,\n      VolumeInspector,\n      ContactSearch,\n      RateLimiter,\n      ActiveCallControl,\n      ComposeText,\n      FaxSender,\n      Environment,\n      ContactInitiator,\n      // views\n      ContactDetailsView,\n      DialerView,\n      ModalView,\n      // options\n      {\n        provide: 'Version',\n        useValue: appVersion,\n      },\n      {\n        provide: 'WebphoneOptions',\n        useFactory: (brandConfig_2: BrandConfig, sdkConfig_1: SDKConfig) =>\n          ({\n            // enableContactMatchWhenNewCall: true,\n            appKey: sdkConfig_1.clientId!,\n            appName: brandConfig_2.appName as string,\n            appVersion,\n          } satisfies WebphoneOptions),\n        deps: ['BrandConfig', 'SdkConfig'],\n      },\n      { provide: 'Subscription', useClass: WebSocketSubscription },\n      {\n        provide: RouterOptions,\n        useValue: {\n          createHistory: () => createMemoryHistory(),\n        } satisfies IRouterOptions,\n      },\n      {\n        provide: 'LocaleOptions',\n        useValue: {\n          defaultLocale,\n        } satisfies LocaleOptions,\n      },\n      {\n        provide: 'Prefix',\n        useValue: prefix,\n      },\n      {\n        provide: 'SdkConfig',\n        useValue: {\n          ...sdkParameter,\n        } satisfies SDKConfig,\n      },\n      {\n        provide: 'AvailabilityMonitorOptions',\n        useValue: {\n          enabled: true,\n        } satisfies AvailabilityMonitorOptions,\n      },\n      {\n        provide: 'BrandConfig',\n        useValue: { ...brandConfig },\n      },\n      {\n        provide: 'BrowserLoggerOptions',\n        useValue: {\n          worker: share.worker,\n        } satisfies BrowserLoggerOptions,\n      },\n      {\n        provide: 'InitiatorOptions',\n        useFactory: (locale: Locale) =>\n          ({\n            enableNewHostDetection: true,\n            getCurrentLocale: () => locale.currentLocale,\n          } satisfies InitiatorOptions),\n        deps: [Locale],\n      },\n      {\n        provide: 'ModalViewOptions',\n        useValue: {\n          isCompact: true,\n        } satisfies ModalViewOptions,\n      },\n      ...modules,\n    ],\n    main: AppView,\n    render,\n    share,\n  };\n};\n"],"mappings":"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","ignoreList":[]}