{"version":3,"file":"Router.plugin.js","names":["_react","require","_reactantShare","_reactantWeb","_lib","_storage","_modules","_Storage","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_class","_class2","_descriptor","_defineProperty","e","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","_regenerator","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","_regeneratorDefine","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","keys","forEach","slice","reverse","reduce","_initializerWarningHelper","Error","RouterPlugin","exports","injectable","name","target","inject","SharedAppOptions","undefined","RouterOptions","metadata","Function","StoragePlugin","PortManager","PortDetector","ISharedAppOptions","IRouterOptions","Record","_BaseRouter","storage","portManager","portDetector","sharedAppOptions","options","_this","callbackSet","Set","enableCache","enable","watch","currentPath","callback","onMainTab","_callee","fn","_this$portDetector$tr","_context","syncFullStatePromise","isWorkerMode","toBeRouted","transports","client","emit","lastRoutedTimestamp","router","routeState","compareRouter","getRef","store","dispatch","onLocationChanged","setCurrentPathWithoutLocationChange","pathname","_routers","location","useParams","_this2","match","useRouteMatch","useMemo","params","useEffect","listener","result","matchPath","path","exact","isExact","strict","add","BaseRouter","state","action","getOwnPropertyDescriptor"],"sources":["src/plugins/Router.plugin.tsx"],"sourcesContent":["import { useEffect, useMemo } from 'react';\nimport { RouterState } from 'reactant-router';\nimport {\n  inject,\n  injectable,\n  PortDetector,\n  Router as BaseRouter,\n  RouterOptions,\n  SharedAppOptions,\n  watch,\n  IRouterOptions as BaseIRouterOptions,\n  type ISharedAppOptions,\n  getRef,\n  state,\n} from 'reactant-share';\nimport { matchPath, useRouteMatch } from 'reactant-web';\n\nimport { action, delegate } from '../lib';\nimport { storage } from '../lib/decorators/storage';\nimport { PortManager } from '../modules';\n\nimport { StoragePlugin } from './Storage.plugin';\n\nexport { RouterOptions } from 'reactant-share';\n\nexport interface IRouterOptions extends BaseIRouterOptions {\n  /**\n   * Enable cache for routing\n   *\n   * @default false\n   */\n  enableCache?: boolean;\n}\n\n@injectable({\n  name: 'Router',\n})\nexport class RouterPlugin extends BaseRouter {\n  callbackSet = new Set<(currentPath: string) => void>();\n\n  constructor(\n    protected storage: StoragePlugin,\n    protected portManager: PortManager,\n    protected override portDetector: PortDetector,\n    @inject(SharedAppOptions)\n    protected override sharedAppOptions: ISharedAppOptions,\n    @inject(RouterOptions) protected override options: IRouterOptions,\n  ) {\n    super(portDetector, sharedAppOptions, options);\n\n    if (this.options.enableCache) {\n      this.storage.enable(this);\n    }\n\n    watch(\n      this,\n      () => this.currentPath,\n      (currentPath) => {\n        this.callbackSet.forEach((callback) => callback(currentPath));\n      },\n    );\n\n    this.portManager.onMainTab(async () => {\n      // TODO: refactor portDetector about syncFullStatePromise\n      await this.portDetector.syncFullStatePromise;\n      if (this.portManager.isWorkerMode) {\n        await this.portDetector.syncFullStatePromise;\n        if (this.toBeRouted) {\n          const fn = this.toBeRouted;\n          this.toBeRouted = null;\n          fn();\n        } else {\n          // if server port is ready, but client port is not ready.\n          this.portDetector.transports.client\n            ?.emit(\n              '@@reactant:syncRouter',\n              this.portDetector.name,\n              this.lastRoutedTimestamp,\n              this.router,\n            )\n            .then((routeState) => {\n              if (routeState && this.compareRouter(routeState, this.router!)) {\n                getRef(this).store!.dispatch(\n                  this.onLocationChanged(routeState, 'REPLACE'),\n                );\n              }\n            });\n        }\n      }\n    });\n  }\n\n  @storage\n  @state\n  protected override _routers: Record<string, RouterState | undefined> = {\n    [this.portDetector.name]: this.router,\n  };\n\n  /**\n   * change router inner state without router change\n   *\n   * ## should only use that before reload page, that will make inner router state be different real browser location state\n   */\n  @action\n  setCurrentPathWithoutLocationChange(pathname: string) {\n    this._routers[this.portDetector.name]!.location.pathname = pathname;\n  }\n\n  /**\n   * when you want to using params as `@computed` listener, using that to get correct result.\n   *\n   * > `useConnector` is a connector to Redux store, that will be calculate before component `re-render`, if your computed listener values have not redux state, must using that to get correct computed result.\n   */\n  useParams<T extends { [K in keyof T]?: string | undefined } = {}>(\n    callback: (params: T) => void,\n  ) {\n    const match = useRouteMatch<T>();\n\n    // * only callback when first render\n    useMemo(() => {\n      callback(match.params);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(\n      () => {\n        /**\n         * when re-render using watch callback to get params\n         */\n        const listener = (currentPath: string) => {\n          const result = matchPath<T>(currentPath, {\n            path: match.path,\n            exact: match.isExact,\n            strict: true,\n          });\n\n          if (result) {\n            callback(result.params);\n          }\n        };\n\n        this.callbackSet.add(listener);\n\n        return () => {\n          this.callbackSet.delete(listener);\n        };\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [],\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}