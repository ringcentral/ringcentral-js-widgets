{"version":3,"file":"getScriptsLoadFailTemplate.js","names":["_fsExtra","_interopRequireDefault","require","_template","_path","e","__esModule","getWorkerScript","workerUrl","clientSource","fs","readFileSync","path","join","__dirname","toString","template","getScriptsLoadFailTemplate","root","arguments","length","undefined","ignoreRule","mainSource","inlineScript","workerSource","concat"],"sources":["src/scriptsLoadFail/getScriptsLoadFailTemplate.ts"],"sourcesContent":["import fs from 'fs-extra';\nimport template from 'lodash/template';\nimport path from 'path';\n\nexport function getWorkerScript(workerUrl: string | boolean) {\n  const clientSource = fs\n    .readFileSync(path.join(__dirname, './inline/workerScriptsFail/client.js'))\n    .toString();\n\n  return template(clientSource)({\n    workerUrl: typeof workerUrl === 'boolean' ? '' : workerUrl,\n  });\n}\n\n/**\n * Generates a template for scripts that fail to load.\n *\n * @param root - The root element id. Default is `#app`.\n * @param workerUrl - The worker URL. Default is false. If you want a custom worker URL, you can set this option.\n * @returns The generated template as a string.\n */\nexport function getScriptsLoadFailTemplate(\n  /**\n   * the root element id, default is `#app`\n   */\n  root = '#app',\n  /**\n   * the worker url, default is false\n   *\n   * if you want custom worker url, you can set this option\n   */\n  workerUrl: string | boolean = false,\n  /**\n   * the ignore rule, default is `/mfe-registry/`\n   */\n  ignoreRule: string = '/mfe-registry/',\n) {\n  const mainSource = fs\n    .readFileSync(path.join(__dirname, './inline/scriptsFail.js'))\n    .toString();\n\n  const inlineScript = template(mainSource)({\n    root,\n    ignoreRule,\n  });\n\n  const workerSource = workerUrl ? getWorkerScript(workerUrl) : '';\n\n  return `<script>${inlineScript}${workerSource}</script>`;\n}\n"],"mappings":";;;;;;;;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,SAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,KAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAwB,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAEjB,SAASE,eAAeA,CAACC,SAA2B,EAAE;EAC3D,IAAMC,YAAY,GAAGC,mBAAE,CACpBC,YAAY,CAACC,gBAAI,CAACC,IAAI,CAACC,SAAS,EAAE,sCAAsC,CAAC,CAAC,CAC1EC,QAAQ,CAAC,CAAC;EAEb,OAAO,IAAAC,oBAAQ,EAACP,YAAY,CAAC,CAAC;IAC5BD,SAAS,EAAE,OAAOA,SAAS,KAAK,SAAS,GAAG,EAAE,GAAGA;EACnD,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASS,0BAA0BA,CAAA,EAexC;EAAA,IAXAC,IAAI,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,MAAM;EAAA,IAMbX,SAA2B,GAAAW,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EAAA,IAInCG,UAAkB,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,gBAAgB;EAErC,IAAMI,UAAU,GAAGb,mBAAE,CAClBC,YAAY,CAACC,gBAAI,CAACC,IAAI,CAACC,SAAS,EAAE,yBAAyB,CAAC,CAAC,CAC7DC,QAAQ,CAAC,CAAC;EAEb,IAAMS,YAAY,GAAG,IAAAR,oBAAQ,EAACO,UAAU,CAAC,CAAC;IACxCL,IAAI,EAAJA,IAAI;IACJI,UAAU,EAAVA;EACF,CAAC,CAAC;EAEF,IAAMG,YAAY,GAAGjB,SAAS,GAAGD,eAAe,CAACC,SAAS,CAAC,GAAG,EAAE;EAEhE,kBAAAkB,MAAA,CAAkBF,YAAY,EAAAE,MAAA,CAAGD,YAAY;AAC/C","ignoreList":[]}