{"version":3,"file":"time.js","names":["time","title","target","name","descriptor","process","env","NODE_ENV","value","initializer","Error","fn","trackedFn","call","console","args","apply","result","timeEnd","enumerable","configurable"],"sources":["src/decorators/time.ts"],"sourcesContent":["/**\n * let you can calculate the time when run that method,\n *\n * ### that time not calculate in `process.env.NODE_ENV !== 'production'`\n * @param title\n */\nexport const time = (title: string) => {\n  // eslint-disable-next-line func-names\n  return function (target: any, name: string, descriptor?: any) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (\n        typeof descriptor.value !== 'function' &&\n        typeof descriptor.initializer !== 'function'\n      ) {\n        throw new Error(`@time decorated '${name}' is not a method`);\n      }\n      let fn: (...args: any) => any = descriptor.value;\n      const initializer = descriptor.initializer;\n      // eslint-disable-next-line func-names\n      const trackedFn = async function (this: any, ...args: any) {\n        if (typeof initializer === 'function') {\n          fn = initializer.call(this);\n        }\n        if (typeof fn !== 'function') {\n          throw new Error(`@time decorated '${name}' is not a function`);\n        }\n        console.time(`[Time Decorator] ${title}: `);\n        const result = await fn.apply(this, args);\n        console.timeEnd(`[Time Decorator] ${title}: `);\n        return result;\n      };\n\n      // the any type is just to be compatible with babel and tsc.\n      return {\n        enumerable: true,\n        configurable: true,\n        value: trackedFn,\n      } as any;\n    }\n\n    return descriptor;\n  };\n};\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACO,IAAMA,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD,EAAmB;EACrC;EACA,OAAO,UAAUC,MAAV,EAAuBC,IAAvB,EAAqCC,UAArC,EAAuD;IAC5D,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;MACzC,IACE,OAAOH,UAAU,CAACI,KAAlB,KAA4B,UAA5B,IACA,OAAOJ,UAAU,CAACK,WAAlB,KAAkC,UAFpC,EAGE;QACA,MAAM,IAAIC,KAAJ,4BAA8BP,IAA9B,uBAAN;MACD;;MACD,IAAIQ,EAAyB,GAAGP,UAAU,CAACI,KAA3C;MACA,IAAMC,WAAW,GAAGL,UAAU,CAACK,WAA/B,CARyC,CASzC;;MACA,IAAMG,SAAS;QAAA,mEAAG;UAAA;UAAA;UAAA;UAAA;UAAA;;UAAA;YAAA;cAAA;gBAAA;kBAChB,IAAI,OAAOH,WAAP,KAAuB,UAA3B,EAAuC;oBACrCE,EAAE,GAAGF,WAAW,CAACI,IAAZ,CAAiB,IAAjB,CAAL;kBACD;;kBAHe,MAIZ,OAAOF,EAAP,KAAc,UAJF;oBAAA;oBAAA;kBAAA;;kBAAA,MAKR,IAAID,KAAJ,4BAA8BP,IAA9B,yBALQ;;gBAAA;kBAOhBW,OAAO,CAACd,IAAR,4BAAiCC,KAAjC;;kBAPgB,0BAA8Bc,IAA9B;oBAA8BA,IAA9B;kBAAA;;kBAAA;kBAAA,OAQKJ,EAAE,CAACK,KAAH,CAAS,IAAT,EAAeD,IAAf,CARL;;gBAAA;kBAQVE,MARU;kBAShBH,OAAO,CAACI,OAAR,4BAAoCjB,KAApC;kBATgB,iCAUTgB,MAVS;;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CAAH;;QAAA,gBAATL,SAAS;UAAA;QAAA;MAAA,GAAf,CAVyC,CAuBzC;;;MACA,OAAO;QACLO,UAAU,EAAE,IADP;QAELC,YAAY,EAAE,IAFT;QAGLZ,KAAK,EAAEI;MAHF,CAAP;IAKD;;IAED,OAAOR,UAAP;EACD,CAjCD;AAkCD,CApCM"}