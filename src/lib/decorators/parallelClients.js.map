{"version":3,"file":"parallelClients.js","names":["_reactantShare","require","_validateArgsToWorker","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","next","push","Array","isArray","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","_arrayLikeToArray","toString","slice","constructor","name","from","test","parallelSymbolClients","handleParallelClientsOnServer","exports","target","restArgs","undefined","options","_getRef","getRef","modules","fork","module","method","concat","args","respond","parallelClients","key","descriptor","isDecorator","fn","_callee","_len","_key","_getRef2","container","identifier","portDetector","_args$slice","_args$slice2","lastArg","_handleParallelClientsOnServer","_args","_t","_context","process","env","NODE_ENV","WORKER_TEST_ENABLED","isSerializable","console","error","Error","isBound","PortDetector","get","shared","isClient","syncFullState","delegate","_extra","serverHook"],"sources":["src/lib/decorators/parallelClients.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable func-names */\nimport {\n  getRef,\n  fork,\n  PortDetector,\n  delegate,\n  ProxyExecParams,\n} from 'reactant-share';\n\nimport { isSerializable } from './validateArgsToWorker';\n\nconst parallelSymbolClients = '__reactant_parallel_clients__';\n\nexport const handleParallelClientsOnServer =\n  (target: any, restArgs: string[] = []) =>\n  (options: ProxyExecParams) => {\n    const { modules } = getRef(target);\n    fork(\n      modules![options.module],\n      options.method,\n      [...options.args, ...restArgs],\n      {\n        respond: false,\n      },\n    );\n  };\n\n/**\n * parallel execution\n *\n * run that method in all clients\n */\nexport const parallelClients = (\n  target: any,\n  key: string,\n  descriptor: TypedPropertyDescriptor<(...args: any[]) => Promise<any>>,\n  isDecorator?: boolean,\n) => {\n  const fn = descriptor.value as (...args: any) => Promise<any>;\n  descriptor.value = async function (this: any, ...args: any) {\n    if (\n      process.env.NODE_ENV === 'test' &&\n      process.env.WORKER_TEST_ENABLED === 'true'\n    ) {\n      try {\n        isSerializable(args);\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error('[parallelClients]', { error, target, key, args });\n        throw new Error('[parallelClients] the args must be serializable');\n      }\n    }\n\n    const { container, identifier } = getRef(this);\n    // when the function is called without DI container\n    if (!container) return fn.apply(this, args);\n    if (!container.isBound(PortDetector)) {\n      throw new Error(\n        'PortDetector is not bound, please check `PortDetector` injection',\n      );\n    }\n\n    const portDetector = container.get(PortDetector);\n    if (!portDetector.shared) {\n      await fn.apply(this, args);\n      return;\n    }\n    if (portDetector.isClient) {\n      const [lastArg] = args.slice(-1);\n\n      if (lastArg === parallelSymbolClients) {\n        await fn.apply(this, args.slice(0, -1));\n        portDetector.syncFullState();\n        return;\n      }\n      return delegate(this, key, args, {\n        respond: false,\n        _extra: isDecorator\n          ? {}\n          : {\n              serverHook: 'clients',\n            },\n      });\n    }\n    const _handleParallelClientsOnServer = handleParallelClientsOnServer(this, [\n      parallelSymbolClients,\n    ]);\n    _handleParallelClientsOnServer({\n      module: identifier!,\n      method: key,\n      args,\n    });\n  };\n  return descriptor;\n};\n"],"mappings":"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","ignoreList":[]}