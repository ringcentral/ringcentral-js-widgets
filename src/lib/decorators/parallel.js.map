{"version":3,"file":"parallel.js","names":["_reactantShare","require","_validateArgsToWorker","_slicedToArray","r","e","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","l","t","Symbol","iterator","n","i","u","a","f","o","call","next","Object","done","push","value","length","Array","isArray","_regenerator","toStringTag","c","prototype","Generator","create","_regeneratorDefine2","p","y","G","v","d","bind","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","_arrayLikeToArray","toString","slice","constructor","name","from","test","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","parallelSymbol","handleAllPortsOnServer","exports","portDetector","originalFn","restArgs","undefined","_ref","_callee","options","module","fn","result","_context","getRef","modules","method","args","fork","concat","respond","syncToClients","_x","parallel","target","key","descriptor","isDecorator","_callee2","_len","_key","_getRef","container","identifier","_args$slice","_args$slice2","lastArg","_handleAllPortsOnServer","_args2","_t","_context2","process","env","NODE_ENV","WORKER_TEST_ENABLED","isSerializable","console","error","Error","isBound","PortDetector","get","shared","isClient","syncFullState","delegate","_extra","serverHook"],"sources":["src/lib/decorators/parallel.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/* eslint-disable func-names */\nimport {\n  getRef,\n  fork,\n  PortDetector,\n  delegate,\n  ProxyExecParams,\n} from 'reactant-share';\n\nimport { isSerializable } from './validateArgsToWorker';\n\nconst parallelSymbol = '__reactant_parallel__';\n\nexport const handleAllPortsOnServer =\n  (\n    portDetector: PortDetector,\n    originalFn?: (...args: any) => Promise<any>,\n    restArgs: string[] = [],\n  ) =>\n  async (options: ProxyExecParams) => {\n    const module = getRef(portDetector).modules![options.module];\n    const fn =\n      originalFn ?? (module[options.method] as (...args: any) => Promise<any>);\n    const result = fn.apply(module, options.args);\n    fork(module, options.method, [...options.args, ...restArgs], {\n      respond: false,\n    });\n    await result;\n    portDetector.syncToClients();\n  };\n\n/**\n * parallel execution\n *\n * run that method in `all` `client` and `server`\n */\nexport const parallel = (\n  target: any,\n  key: string,\n  descriptor: TypedPropertyDescriptor<(...args: any[]) => Promise<any>>,\n  isDecorator?: boolean,\n) => {\n  const fn = descriptor.value as (...args: any) => Promise<any>;\n  descriptor.value = async function (this: any, ...args: any) {\n    if (\n      process.env.NODE_ENV === 'test' &&\n      process.env.WORKER_TEST_ENABLED === 'true'\n    ) {\n      try {\n        isSerializable(args);\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error('[parallel]', { error, target, key, args });\n        throw new Error('[parallel] the args must be serializable');\n      }\n    }\n\n    const { container, identifier } = getRef(this);\n    // when the function is called without DI container\n    if (!container) return fn.apply(this, args);\n    if (!container.isBound(PortDetector)) {\n      throw new Error(\n        'PortDetector is not bound, please check `PortDetector` injection',\n      );\n    }\n\n    const portDetector = container.get(PortDetector);\n    if (!portDetector.shared) {\n      await fn.apply(this, args);\n      return;\n    }\n    if (portDetector.isClient) {\n      const [lastArg] = args.slice(-1);\n\n      if (lastArg === parallelSymbol) {\n        await fn.apply(this, args.slice(0, -1));\n        portDetector.syncFullState();\n        return;\n      }\n      return delegate(this, key, args, {\n        respond: false,\n        _extra: isDecorator\n          ? {}\n          : {\n              serverHook: 'all',\n            },\n      });\n    }\n    const _handleAllPortsOnServer = handleAllPortsOnServer(portDetector, fn, [\n      parallelSymbol,\n    ]);\n    await _handleAllPortsOnServer({\n      module: identifier!,\n      method: key,\n      args,\n    });\n  };\n  return descriptor;\n};\n"],"mappings":"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","ignoreList":[]}