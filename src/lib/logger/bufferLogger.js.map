{"version":3,"file":"bufferLogger.js","names":["_logger","require","_toConsumableArray","r","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","Symbol","iterator","Array","from","isArray","_arrayLikeToArray","_slicedToArray","e","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","a","t","toString","call","slice","constructor","name","test","length","n","l","i","u","f","o","next","Object","done","push","value","toBeLogged","getBufferLogItems","exports","useBufferLogger","loggerInstance","fn","key","_ref","_len","arguments","args","_key","console","apply","overrideBufferLogger","externalLogger","showDefaultConsole","clearBuffer","undefined","forEach","_ref2","_ref3","isShowDefaultConsole","_externalLogger$key","_len2","_key2","_key3","_ref4","concat"],"sources":["src/lib/logger/bufferLogger.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { loggerInstance } from './logger';\n\ntype ToBeLogged = [string | symbol, unknown[]][];\n\nconst toBeLogged: ToBeLogged = [];\n\nexport const getBufferLogItems = () => toBeLogged;\n\n/**\n * when you want to use buffer logger, call this function at entry file to accumulate logs from all modules\n */\nexport const useBufferLogger = () => {\n  loggerInstance.fn = (key: string | symbol) => {\n    return (...args: unknown[]) => {\n      toBeLogged.push([key, args]);\n      (console as any)[key](...args);\n    };\n  };\n};\n\n/**\n * when you want to use external logger, call this function to override default logger\n * @param external external logger\n * @param showDefaultConsole is show default console log when override by external logger\n *\n * ### !!!IMPORTANT!!! should work with `useBufferLogger` at entry file, if you want to catch all logs from all modules and send to external logger\n */\n\nexport const overrideBufferLogger = (\n  externalLogger: any,\n  /**\n   * is show default console log when override by external logger\n   */\n  showDefaultConsole?: () => boolean,\n  clearBuffer = true,\n) => {\n  // exec all log methods after get external logger\n  toBeLogged.forEach(([key, args]) => externalLogger[key](...args));\n  if (clearBuffer) {\n    toBeLogged.length = 0;\n  }\n\n  const isShowDefaultConsole = showDefaultConsole?.();\n\n  loggerInstance.fn = (key: string | symbol) => {\n    return (...args: unknown[]) => {\n      if (isShowDefaultConsole) {\n        (console as any)[key]?.(...args);\n      }\n      externalLogger[key]?.(...args);\n    };\n  };\n};\n"],"mappings":"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","ignoreList":[]}