{"version":3,"file":"PortalHost.js","names":["_utils","require","_ramda","_reactantShare","_uuid","_lib","_Storage","_Initiator","_PortManager","_utils2","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_dec16","_dec17","_dec18","_dec19","_dec20","_dec21","_dec22","_dec23","_dec24","_dec25","_dec26","_dec27","_dec28","_dec29","_dec30","_dec31","_dec32","_class","_class2","_descriptor","_descriptor2","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","_assertThisInitialized","ReferenceError","Boolean","valueOf","_inherits","_setPrototypeOf","_applyDecoratedDescriptor","keys","forEach","slice","reverse","reduce","_initializerWarningHelper","Error","resolveFn","PortalHost","exports","injectable","name","target","optional","undefined","metadata","Function","PortManager","Initiator","StoragePlugin","PortalHostOptions","Record","Array","delegate","PortalHostResolveData","_RcModule","_portManager","_initiator","_storage","_portalHostOptions","_this","_timerCancelMap","Map","_typeMap","_resolveFnMap","enable","beforeInit","_init","setIdTypeCacheMap","id","type","_idTypeCacheMap","setIdTypeMap","_idTypeMap","_removeIdTypeMaps","ids","_this2","_removeIdTypeCacheMaps","_this3","_removeIdTypeCacheMaps2","_callee","_context","removeIdTypeCacheMaps","_x","_clearIdTypeMaps2","_callee2","_context2","_clearIdTypeMaps","clearIdTypeMaps","_this4","modalKeys","portalKey","_getRef","getRef","identifier","portalInstance","concat","set","open","toastInstance","payload","addItem","process","env","NODE_ENV","JSON","stringify","error","console","v4","closed","addResolver","_close","_callee4","items","remove","_this5","removeId","closeModals","_context4","_ref","_callee3","_context3","_x5","DehydratedPortal","filter","item","model","getMap","modal","close","_x2","_x3","_x4","_resolveFn2","_callee5","resolveState","_context5","shared","fork","respond","_x6","_x7","get","_startTimer","_callee6","ms","sleepPromise","_t","_context6","sleep","cancel","startTimer","_x8","_x9","_clearTimer","_callee7","_context7","clearTimer","_x0","_callOnEvent","_callee8","eventName","_modal$handlerRegiste","_len","args","_key","_console","_args8","_context8","warn","handlerRegister","callOnEvent","_x1","_x10","cacheType","_this6","originalResolve","RcModule","state","globalStorage","action","getOwnPropertyDescriptor"],"sources":["src/modules/PortalHost/PortalHost.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { sleep } from '@ringcentral-integration/utils';\nimport { filter } from 'ramda';\nimport {\n  action,\n  fork,\n  injectable,\n  optional,\n  state,\n  getRef,\n} from 'reactant-share';\nimport { v4 } from 'uuid';\n\nimport { delegate, RcModule, globalStorage } from '../../lib';\nimport { StoragePlugin } from '../../plugins/Storage.plugin';\nimport { Initiator } from '../Initiator';\nimport { PortManager } from '../PortManager';\n\nimport type {\n  PortalHostOptions,\n  PortalHostResolveData,\n} from './PortalHost.interface';\nimport { DehydratedPortal, portalKey } from './utils';\n\ntype AnyDehydratedPortal = DehydratedPortal<any, any, any>;\n\nconst resolveFn = '$$__resolveFn__$$';\n\n@injectable({\n  name: 'PortalHost',\n})\nexport class PortalHost extends RcModule {\n  private _timerCancelMap = new Map<string, () => void>();\n  private _typeMap = new Map<string, AnyDehydratedPortal>();\n  private _resolveFnMap = new Map<\n    string,\n    (result: PortalHostResolveData) => void\n  >();\n\n  @state\n  private _idTypeMap: Record<string, string> = {};\n\n  @globalStorage\n  @state\n  private _idTypeCacheMap: Record<string, string> = {};\n\n  /**\n   * when you need keep that in storage,\n   * and do something when reopen, using `setIdTypeCacheMap` to keep it\n   */\n  @action\n  setIdTypeCacheMap(id: string, type: string) {\n    this._idTypeCacheMap[id] = type;\n  }\n\n  /**\n   * if you not need any cache, set that in normal state.\n   * and do something when reopen, using `setIdTypeCacheMap` instead\n   */\n  @action\n  setIdTypeMap(id: string, type: string) {\n    this._idTypeMap[id] = type;\n  }\n\n  @action\n  private _removeIdTypeMaps(ids: string[]) {\n    ids.forEach((id) => {\n      delete this._idTypeMap[id];\n      delete this._idTypeCacheMap[id];\n    });\n  }\n\n  @action\n  private _removeIdTypeCacheMaps(ids: string[]) {\n    ids.forEach((id) => {\n      delete this._idTypeCacheMap[id];\n    });\n  }\n\n  @delegate('server')\n  async removeIdTypeCacheMaps(ids: string[]) {\n    this._removeIdTypeCacheMaps(ids);\n  }\n\n  @delegate('server')\n  async clearIdTypeMaps() {\n    this._clearIdTypeMaps();\n  }\n\n  @action\n  private _clearIdTypeMaps() {\n    this._idTypeMap = {};\n    this._idTypeCacheMap = {};\n  }\n\n  constructor(\n    private _portManager: PortManager,\n    private _initiator: Initiator,\n    private _storage: StoragePlugin,\n    @optional('PortalHostOptions')\n    protected _portalHostOptions?: PortalHostOptions,\n  ) {\n    super();\n    this._storage.enable(this);\n    this._initiator.beforeInit((target) => {\n      this._init(target);\n    });\n  }\n\n  protected _init(target: any) {\n    const modalKeys = target[portalKey] as string[];\n    if (!modalKeys) return;\n    const { identifier } = getRef(target);\n    modalKeys.forEach((key) => {\n      const portalInstance = target[key] as AnyDehydratedPortal;\n      const type = `${identifier}.${key}`;\n\n      portalInstance.type = type;\n\n      this._typeMap.set(type, portalInstance);\n    });\n  }\n\n  open<T extends AnyDehydratedPortal = AnyDehydratedPortal>(\n    toastInstance: T,\n    payload: T['payload'],\n    addItem: (id: string, type: string, payload: Record<string, any>) => void,\n  ) {\n    // in shared mode, payload must be serializable\n    if (process.env.NODE_ENV !== 'production') {\n      try {\n        JSON.stringify(payload);\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error('[PortalHost]', { error, payload });\n        throw new Error('[PortalHost] payload must be serializable');\n      }\n    }\n\n    const id = v4();\n    const type = toastInstance.type;\n    addItem(id, type, payload as any);\n\n    const closed = this.addResolver(id);\n    return {\n      id,\n      closed,\n    };\n  }\n\n  async close(\n    items: Record<string, any>[],\n    value: string | AnyDehydratedPortal,\n    remove: (id: string, reason?: any) => Promise<void | boolean>,\n  ) {\n    const removeId = async (id: string) => {\n      await this.resolveFn(id, null);\n      await remove(id, 'programmatic');\n    };\n\n    if (value instanceof DehydratedPortal) {\n      const type = value.type;\n\n      const closeModals = filter((item) => {\n        const model = this.getMap(item.id);\n        return model?.type === type;\n      }, items);\n\n      closeModals.forEach((modal) => {\n        removeId(modal.id);\n      });\n\n      return;\n    }\n\n    await removeId(value);\n  }\n\n  @delegate('server')\n  async resolveFn(id: string, resolveState: PortalHostResolveData) {\n    this[resolveFn](id, resolveState);\n    if (this._portManager.shared) {\n      // respond should be `false`.\n      // After receiving the message, all tabs may be closed.\n      await fork(this as any, resolveFn, [id, resolveState], {\n        respond: false,\n      });\n    }\n  }\n  protected [resolveFn](id: string, resolveState: PortalHostResolveData) {\n    const resolve = this._resolveFnMap.get(id);\n    resolve?.(resolveState);\n  }\n\n  @delegate('server')\n  async startTimer(id: string, ms: number) {\n    const sleepPromise = sleep(ms);\n    this._timerCancelMap.set(id, () => sleepPromise.cancel());\n\n    try {\n      await sleepPromise;\n    } catch (error) {\n      throw new Error('ttl be cancel');\n    }\n  }\n\n  @delegate('server')\n  async clearTimer(id: string) {\n    const cancel = this._timerCancelMap.get(id);\n\n    if (cancel) {\n      cancel();\n      this._timerCancelMap.delete(id);\n    }\n    this._removeIdTypeMaps([id]);\n  }\n\n  @delegate('server')\n  async callOnEvent(id: string, eventName: string, ...args: any[]) {\n    const modal = this.getMap(id);\n\n    // show warning, user should confirm that warning why trigger\n    if (process.env.NODE_ENV !== 'production' && !modal) {\n      console.warn(\n        '[PortalHost] Event emit failed, that maybe error logic in your call event, or jest async event between client and server communication,\\nargs: ' +\n          eventName,\n        ...args,\n      );\n    }\n\n    modal?.handlerRegister.get(eventName)?.(...args);\n  }\n\n  getMap(id: string) {\n    const type = this._idTypeMap[id]!;\n    const cacheType = this._idTypeCacheMap[id]!;\n\n    return this._typeMap.get(type || cacheType);\n  }\n\n  /**\n   * add resolve into map and group with existed resolve\n   */\n  addResolver(id: string) {\n    const originalResolve = this._resolveFnMap.get(id);\n\n    const closed = new Promise<PortalHostResolveData>((resolve) => {\n      this._resolveFnMap.set(id, (value) => {\n        originalResolve?.(value);\n        resolve(value);\n      });\n    });\n\n    return closed;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AACA,IAAAE,cAAA,GAAAF,OAAA;AAQA,IAAAG,KAAA,GAAAH,OAAA;AAEA,IAAAI,IAAA,GAAAJ,OAAA;AACA,IAAAK,QAAA,GAAAL,OAAA;AACA,IAAAM,UAAA,GAAAN,OAAA;AACA,IAAAO,YAAA,GAAAP,OAAA;AAMA,IAAAQ,OAAA,GAAAR,OAAA;AAAsD,IAAAS,IAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,OAAA,EAAAC,WAAA,EAAAC,YAAA;AAtBtD;AAAA,SAAAC,aAAA,IACA,uKAAAC,CAAA,EAAAC,CAAA,EAAAC,CAAA,wBAAAC,MAAA,GAAAA,MAAA,OAAAC,CAAA,GAAAF,CAAA,CAAAG,QAAA,kBAAAC,CAAA,GAAAJ,CAAA,CAAAK,WAAA,8BAAAC,EAAAN,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAE,CAAA,QAAAC,CAAA,GAAAL,CAAA,IAAAA,CAAA,CAAAM,SAAA,YAAAC,SAAA,GAAAP,CAAA,GAAAO,SAAA,EAAAC,CAAA,GAAAC,MAAA,CAAAC,MAAA,CAAAL,CAAA,CAAAC,SAAA,UAAAK,mBAAA,CAAAH,CAAA,uBAAAV,CAAA,EAAAE,CAAA,EAAAE,CAAA,QAAAE,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAI,CAAA,MAAAC,CAAA,GAAAX,CAAA,QAAAY,CAAA,OAAAC,CAAA,KAAAF,CAAA,KAAAb,CAAA,KAAAgB,CAAA,EAAApB,CAAA,EAAAqB,CAAA,EAAAC,CAAA,EAAAN,CAAA,EAAAM,CAAA,CAAAC,IAAA,CAAAvB,CAAA,MAAAsB,CAAA,WAAAA,EAAArB,CAAA,EAAAC,CAAA,WAAAM,CAAA,GAAAP,CAAA,EAAAQ,CAAA,MAAAG,CAAA,GAAAZ,CAAA,EAAAmB,CAAA,CAAAf,CAAA,GAAAF,CAAA,EAAAmB,CAAA,gBAAAC,EAAApB,CAAA,EAAAE,CAAA,SAAAK,CAAA,GAAAP,CAAA,EAAAU,CAAA,GAAAR,CAAA,EAAAH,CAAA,OAAAiB,CAAA,IAAAF,CAAA,KAAAV,CAAA,IAAAL,CAAA,GAAAgB,CAAA,CAAAO,MAAA,EAAAvB,CAAA,UAAAK,CAAA,EAAAE,CAAA,GAAAS,CAAA,CAAAhB,CAAA,GAAAqB,CAAA,GAAAH,CAAA,CAAAF,CAAA,EAAAQ,CAAA,GAAAjB,CAAA,KAAAN,CAAA,QAAAI,CAAA,GAAAmB,CAAA,KAAArB,CAAA,MAAAQ,CAAA,GAAAJ,CAAA,EAAAC,CAAA,GAAAD,CAAA,YAAAC,CAAA,WAAAD,CAAA,MAAAA,CAAA,MAAAR,CAAA,IAAAQ,CAAA,OAAAc,CAAA,MAAAhB,CAAA,GAAAJ,CAAA,QAAAoB,CAAA,GAAAd,CAAA,QAAAC,CAAA,MAAAU,CAAA,CAAAC,CAAA,GAAAhB,CAAA,EAAAe,CAAA,CAAAf,CAAA,GAAAI,CAAA,OAAAc,CAAA,GAAAG,CAAA,KAAAnB,CAAA,GAAAJ,CAAA,QAAAM,CAAA,MAAAJ,CAAA,IAAAA,CAAA,GAAAqB,CAAA,MAAAjB,CAAA,MAAAN,CAAA,EAAAM,CAAA,MAAAJ,CAAA,EAAAe,CAAA,CAAAf,CAAA,GAAAqB,CAAA,EAAAhB,CAAA,cAAAH,CAAA,IAAAJ,CAAA,aAAAmB,CAAA,QAAAH,CAAA,OAAAd,CAAA,qBAAAE,CAAA,EAAAW,CAAA,EAAAQ,CAAA,QAAAT,CAAA,YAAAU,SAAA,uCAAAR,CAAA,UAAAD,CAAA,IAAAK,CAAA,CAAAL,CAAA,EAAAQ,CAAA,GAAAhB,CAAA,GAAAQ,CAAA,EAAAL,CAAA,GAAAa,CAAA,GAAAxB,CAAA,GAAAQ,CAAA,OAAAT,CAAA,GAAAY,CAAA,MAAAM,CAAA,KAAAV,CAAA,KAAAC,CAAA,GAAAA,CAAA,QAAAA,CAAA,SAAAU,CAAA,CAAAf,CAAA,QAAAkB,CAAA,CAAAb,CAAA,EAAAG,CAAA,KAAAO,CAAA,CAAAf,CAAA,GAAAQ,CAAA,GAAAO,CAAA,CAAAC,CAAA,GAAAR,CAAA,aAAAI,CAAA,MAAAR,CAAA,QAAAC,CAAA,KAAAH,CAAA,YAAAL,CAAA,GAAAO,CAAA,CAAAF,CAAA,WAAAL,CAAA,GAAAA,CAAA,CAAA0B,IAAA,CAAAnB,CAAA,EAAAI,CAAA,UAAAc,SAAA,2CAAAzB,CAAA,CAAA2B,IAAA,SAAA3B,CAAA,EAAAW,CAAA,GAAAX,CAAA,CAAA4B,KAAA,EAAApB,CAAA,SAAAA,CAAA,oBAAAA,CAAA,KAAAR,CAAA,GAAAO,CAAA,eAAAP,CAAA,CAAA0B,IAAA,CAAAnB,CAAA,GAAAC,CAAA,SAAAG,CAAA,GAAAc,SAAA,uCAAApB,CAAA,gBAAAG,CAAA,OAAAD,CAAA,GAAAR,CAAA,cAAAC,CAAA,IAAAiB,CAAA,GAAAC,CAAA,CAAAf,CAAA,QAAAQ,CAAA,GAAAV,CAAA,CAAAyB,IAAA,CAAAvB,CAAA,EAAAe,CAAA,OAAAE,CAAA,kBAAApB,CAAA,IAAAO,CAAA,GAAAR,CAAA,EAAAS,CAAA,MAAAG,CAAA,GAAAX,CAAA,cAAAe,CAAA,mBAAAa,KAAA,EAAA5B,CAAA,EAAA2B,IAAA,EAAAV,CAAA,SAAAhB,CAAA,EAAAI,CAAA,EAAAE,CAAA,QAAAI,CAAA,QAAAS,CAAA,gBAAAV,UAAA,cAAAmB,kBAAA,cAAAC,2BAAA,KAAA9B,CAAA,GAAAY,MAAA,CAAAmB,cAAA,MAAAvB,CAAA,MAAAL,CAAA,IAAAH,CAAA,CAAAA,CAAA,IAAAG,CAAA,SAAAW,mBAAA,CAAAd,CAAA,OAAAG,CAAA,iCAAAH,CAAA,GAAAW,CAAA,GAAAmB,0BAAA,CAAArB,SAAA,GAAAC,SAAA,CAAAD,SAAA,GAAAG,MAAA,CAAAC,MAAA,CAAAL,CAAA,YAAAO,EAAAhB,CAAA,WAAAa,MAAA,CAAAoB,cAAA,GAAApB,MAAA,CAAAoB,cAAA,CAAAjC,CAAA,EAAA+B,0BAAA,KAAA/B,CAAA,CAAAkC,SAAA,GAAAH,0BAAA,EAAAhB,mBAAA,CAAAf,CAAA,EAAAM,CAAA,yBAAAN,CAAA,CAAAU,SAAA,GAAAG,MAAA,CAAAC,MAAA,CAAAF,CAAA,GAAAZ,CAAA,WAAA8B,iBAAA,CAAApB,SAAA,GAAAqB,0BAAA,EAAAhB,mBAAA,CAAAH,CAAA,iBAAAmB,0BAAA,GAAAhB,mBAAA,CAAAgB,0BAAA,iBAAAD,iBAAA,GAAAA,iBAAA,CAAAK,WAAA,wBAAApB,mBAAA,CAAAgB,0BAAA,EAAAzB,CAAA,wBAAAS,mBAAA,CAAAH,CAAA,GAAAG,mBAAA,CAAAH,CAAA,EAAAN,CAAA,gBAAAS,mBAAA,CAAAH,CAAA,EAAAR,CAAA,iCAAAW,mBAAA,CAAAH,CAAA,8DAAAb,YAAA,YAAAA,aAAA,aAAAqC,CAAA,EAAA5B,CAAA,EAAA6B,CAAA,EAAArB,CAAA;AAAA,SAAAD,oBAAAf,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAH,CAAA,QAAAO,CAAA,GAAAK,MAAA,CAAAyB,cAAA,QAAA9B,CAAA,uBAAAR,CAAA,IAAAQ,CAAA,QAAAO,mBAAA,YAAAwB,mBAAAvC,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAH,CAAA,aAAAK,EAAAJ,CAAA,EAAAE,CAAA,IAAAW,mBAAA,CAAAf,CAAA,EAAAE,CAAA,YAAAF,CAAA,gBAAAwC,OAAA,CAAAtC,CAAA,EAAAE,CAAA,EAAAJ,CAAA,SAAAE,CAAA,GAAAM,CAAA,GAAAA,CAAA,CAAAR,CAAA,EAAAE,CAAA,IAAA2B,KAAA,EAAAzB,CAAA,EAAAqC,UAAA,GAAAxC,CAAA,EAAAyC,YAAA,GAAAzC,CAAA,EAAA0C,QAAA,GAAA1C,CAAA,MAAAD,CAAA,CAAAE,CAAA,IAAAE,CAAA,IAAAE,CAAA,aAAAA,CAAA,cAAAA,CAAA,mBAAAS,mBAAA,CAAAf,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAH,CAAA;AAAA,SAAA2C,mBAAAxC,CAAA,EAAAH,CAAA,EAAAD,CAAA,EAAAE,CAAA,EAAAI,CAAA,EAAAe,CAAA,EAAAZ,CAAA,cAAAD,CAAA,GAAAJ,CAAA,CAAAiB,CAAA,EAAAZ,CAAA,GAAAG,CAAA,GAAAJ,CAAA,CAAAqB,KAAA,WAAAzB,CAAA,gBAAAJ,CAAA,CAAAI,CAAA,KAAAI,CAAA,CAAAoB,IAAA,GAAA3B,CAAA,CAAAW,CAAA,IAAAiC,OAAA,CAAAC,OAAA,CAAAlC,CAAA,EAAAmC,IAAA,CAAA7C,CAAA,EAAAI,CAAA;AAAA,SAAA0C,kBAAA5C,CAAA,6BAAAH,CAAA,SAAAD,CAAA,GAAAiD,SAAA,aAAAJ,OAAA,WAAA3C,CAAA,EAAAI,CAAA,QAAAe,CAAA,GAAAjB,CAAA,CAAA8C,KAAA,CAAAjD,CAAA,EAAAD,CAAA,YAAAmD,MAAA/C,CAAA,IAAAwC,kBAAA,CAAAvB,CAAA,EAAAnB,CAAA,EAAAI,CAAA,EAAA6C,KAAA,EAAAC,MAAA,UAAAhD,CAAA,cAAAgD,OAAAhD,CAAA,IAAAwC,kBAAA,CAAAvB,CAAA,EAAAnB,CAAA,EAAAI,CAAA,EAAA6C,KAAA,EAAAC,MAAA,WAAAhD,CAAA,KAAA+C,KAAA;AAAA,SAAAE,2BAAArD,CAAA,EAAAQ,CAAA,EAAAN,CAAA,EAAAuB,CAAA,IAAAvB,CAAA,IAAAW,MAAA,CAAAyB,cAAA,CAAAtC,CAAA,EAAAQ,CAAA,IAAAiC,UAAA,EAAAvC,CAAA,CAAAuC,UAAA,EAAAC,YAAA,EAAAxC,CAAA,CAAAwC,YAAA,EAAAC,QAAA,EAAAzC,CAAA,CAAAyC,QAAA,EAAAd,KAAA,EAAA3B,CAAA,CAAAoD,WAAA,GAAApD,CAAA,CAAAoD,WAAA,CAAA3B,IAAA,CAAAF,CAAA;AAAA,SAAA8B,gBAAAlC,CAAA,EAAAjB,CAAA,UAAAiB,CAAA,YAAAjB,CAAA,aAAAsB,SAAA;AAAA,SAAA8B,kBAAAxD,CAAA,EAAAE,CAAA,aAAAD,CAAA,MAAAA,CAAA,GAAAC,CAAA,CAAAsB,MAAA,EAAAvB,CAAA,UAAAK,CAAA,GAAAJ,CAAA,CAAAD,CAAA,GAAAK,CAAA,CAAAmC,UAAA,GAAAnC,CAAA,CAAAmC,UAAA,QAAAnC,CAAA,CAAAoC,YAAA,kBAAApC,CAAA,KAAAA,CAAA,CAAAqC,QAAA,QAAA9B,MAAA,CAAAyB,cAAA,CAAAtC,CAAA,EAAAyD,cAAA,CAAAnD,CAAA,CAAAoD,GAAA,GAAApD,CAAA;AAAA,SAAAqD,aAAA3D,CAAA,EAAAE,CAAA,EAAAD,CAAA,WAAAC,CAAA,IAAAsD,iBAAA,CAAAxD,CAAA,CAAAU,SAAA,EAAAR,CAAA,GAAAD,CAAA,IAAAuD,iBAAA,CAAAxD,CAAA,EAAAC,CAAA,GAAAY,MAAA,CAAAyB,cAAA,CAAAtC,CAAA,iBAAA2C,QAAA,SAAA3C,CAAA;AAAA,SAAAyD,eAAAxD,CAAA,QAAAO,CAAA,GAAAoD,YAAA,CAAA3D,CAAA,gCAAA4D,OAAA,CAAArD,CAAA,IAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAoD,aAAA3D,CAAA,EAAAC,CAAA,oBAAA2D,OAAA,CAAA5D,CAAA,MAAAA,CAAA,SAAAA,CAAA,MAAAD,CAAA,GAAAC,CAAA,CAAAE,MAAA,CAAA2D,WAAA,kBAAA9D,CAAA,QAAAQ,CAAA,GAAAR,CAAA,CAAA2B,IAAA,CAAA1B,CAAA,EAAAC,CAAA,gCAAA2D,OAAA,CAAArD,CAAA,UAAAA,CAAA,YAAAkB,SAAA,yEAAAxB,CAAA,GAAA6D,MAAA,GAAAC,MAAA,EAAA/D,CAAA;AAAA,SAAAgE,WAAAhE,CAAA,EAAAK,CAAA,EAAAN,CAAA,WAAAM,CAAA,GAAA4D,eAAA,CAAA5D,CAAA,GAAA6D,0BAAA,CAAAlE,CAAA,EAAAmE,yBAAA,KAAAC,OAAA,CAAAC,SAAA,CAAAhE,CAAA,EAAAN,CAAA,QAAAkE,eAAA,CAAAjE,CAAA,EAAAsE,WAAA,IAAAjE,CAAA,CAAA4C,KAAA,CAAAjD,CAAA,EAAAD,CAAA;AAAA,SAAAmE,2BAAAlE,CAAA,EAAAD,CAAA,QAAAA,CAAA,iBAAA6D,OAAA,CAAA7D,CAAA,0BAAAA,CAAA,UAAAA,CAAA,iBAAAA,CAAA,YAAA0B,SAAA,qEAAA8C,sBAAA,CAAAvE,CAAA;AAAA,SAAAuE,uBAAAxE,CAAA,mBAAAA,CAAA,YAAAyE,cAAA,sEAAAzE,CAAA;AAAA,SAAAoE,0BAAA,cAAAnE,CAAA,IAAAyE,OAAA,CAAAhE,SAAA,CAAAiE,OAAA,CAAAhD,IAAA,CAAA0C,OAAA,CAAAC,SAAA,CAAAI,OAAA,iCAAAzE,CAAA,aAAAmE,yBAAA,YAAAA,0BAAA,aAAAnE,CAAA;AAAA,SAAAiE,gBAAAjE,CAAA,WAAAiE,eAAA,GAAArD,MAAA,CAAAoB,cAAA,GAAApB,MAAA,CAAAmB,cAAA,CAAAT,IAAA,eAAAtB,CAAA,WAAAA,CAAA,CAAAiC,SAAA,IAAArB,MAAA,CAAAmB,cAAA,CAAA/B,CAAA,MAAAiE,eAAA,CAAAjE,CAAA;AAAA,SAAA2E,UAAA3E,CAAA,EAAAD,CAAA,6BAAAA,CAAA,aAAAA,CAAA,YAAA0B,SAAA,wDAAAzB,CAAA,CAAAS,SAAA,GAAAG,MAAA,CAAAC,MAAA,CAAAd,CAAA,IAAAA,CAAA,CAAAU,SAAA,IAAA6D,WAAA,IAAA1C,KAAA,EAAA5B,CAAA,EAAA0C,QAAA,MAAAD,YAAA,WAAA7B,MAAA,CAAAyB,cAAA,CAAArC,CAAA,iBAAA0C,QAAA,SAAA3C,CAAA,IAAA6E,eAAA,CAAA5E,CAAA,EAAAD,CAAA;AAAA,SAAA6E,gBAAA5E,CAAA,EAAAD,CAAA,WAAA6E,eAAA,GAAAhE,MAAA,CAAAoB,cAAA,GAAApB,MAAA,CAAAoB,cAAA,CAAAV,IAAA,eAAAtB,CAAA,EAAAD,CAAA,WAAAC,CAAA,CAAAiC,SAAA,GAAAlC,CAAA,EAAAC,CAAA,KAAA4E,eAAA,CAAA5E,CAAA,EAAAD,CAAA;AAAA,SAAA8E,0BAAAtE,CAAA,EAAAR,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAqB,CAAA,QAAAJ,CAAA,cAAAR,MAAA,CAAAkE,IAAA,CAAA3E,CAAA,EAAA4E,OAAA,WAAAxE,CAAA,IAAAa,CAAA,CAAAb,CAAA,IAAAJ,CAAA,CAAAI,CAAA,OAAAa,CAAA,CAAAoB,UAAA,KAAApB,CAAA,CAAAoB,UAAA,EAAApB,CAAA,CAAAqB,YAAA,KAAArB,CAAA,CAAAqB,YAAA,cAAArB,CAAA,IAAAA,CAAA,CAAAiC,WAAA,MAAAjC,CAAA,CAAAsB,QAAA,QAAAtB,CAAA,GAAAnB,CAAA,CAAA+E,KAAA,GAAAC,OAAA,GAAAC,MAAA,WAAAjF,CAAA,EAAAE,CAAA,WAAAA,CAAA,CAAAI,CAAA,EAAAR,CAAA,EAAAE,CAAA,KAAAA,CAAA,KAAAmB,CAAA,GAAAI,CAAA,eAAAJ,CAAA,CAAAiC,WAAA,KAAAjC,CAAA,CAAAQ,KAAA,GAAAR,CAAA,CAAAiC,WAAA,GAAAjC,CAAA,CAAAiC,WAAA,CAAA3B,IAAA,CAAAF,CAAA,YAAAJ,CAAA,CAAAiC,WAAA,uBAAAjC,CAAA,CAAAiC,WAAA,IAAAzC,MAAA,CAAAyB,cAAA,CAAA9B,CAAA,EAAAR,CAAA,EAAAqB,CAAA,WAAAA,CAAA;AAAA,SAAA+D,0BAAAlF,CAAA,EAAAF,CAAA,UAAAqF,KAAA;AAyBA,IAAMC,UAAS,GAAG,mBAAmB;AAAC,IAKzBC,UAAU,GAAAC,OAAA,CAAAD,UAAA,IAAA9H,IAAA,GAHtB,IAAAgI,yBAAU,EAAC;EACVC,IAAI,EAAE;AACR,CAAC,CAAC,EAAAhI,KAAA,YAAAA,MAAAiI,MAAA,EAAAjC,GAAA;EAAA,OAqEG,IAAAkC,uBAAQ,EAAC,mBAAmB,CAAC,CAAAD,MAAA,EAAAE,SAAA;AAAA,GAAAlI,KAAA,GAAA0G,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAAnI,KAAA,GAAAyG,OAAA,CAAAyB,QAAA,8BAAAvI,YAAA,CAAAyI,WAAA,mBAAAnF,MAAA,GAAAtD,YAAA,CAAAyI,WAAA,SAAA1I,UAAA,CAAA2I,SAAA,mBAAApF,MAAA,GAAAvD,UAAA,CAAA2I,SAAA,SAAA5I,QAAA,CAAA6I,aAAA,mBAAArF,MAAA,GAAAxD,QAAA,CAAA6I,aAAA,SAAAC,iBAAA,mBAAAtF,MAAA,GAAAsF,iBAAA,IAAAtI,KAAA,GAAAwG,OAAA,CAAAyB,QAAA,uBAAAM,MAAA,mBAAAvF,MAAA,GAAAuF,MAAA,GAAAtI,KAAA,GAAAuG,OAAA,CAAAyB,QAAA,uBAAAM,MAAA,mBAAAvF,MAAA,GAAAuF,MAAA,GAAArI,KAAA,GAAAsG,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAA/H,KAAA,GAAAqG,OAAA,CAAAyB,QAAA,uBAAA/B,MAAA,EAAAA,MAAA,IAAA9F,KAAA,GAAAoG,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAA7H,KAAA,GAAAmG,OAAA,CAAAyB,QAAA,uBAAA/B,MAAA,EAAAA,MAAA,IAAA5F,KAAA,GAAAkG,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAA3H,MAAA,GAAAiG,OAAA,CAAAyB,QAAA,uBAAAO,KAAA,IAAAhI,MAAA,GAAAgG,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAAzH,MAAA,GAAA+F,OAAA,CAAAyB,QAAA,uBAAAO,KAAA,IAAA9H,MAAA,GApB/B,IAAA+H,aAAQ,EAAC,QAAQ,CAAC,EAAA9H,MAAA,GAAA6F,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAAtH,MAAA,GAAA4F,OAAA,CAAAyB,QAAA,uBAAAO,KAAA,IAAA3H,MAAA,GAKlB,IAAA4H,aAAQ,EAAC,QAAQ,CAAC,EAAA3H,MAAA,GAAA0F,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAAnH,MAAA,GAAAyF,OAAA,CAAAyB,QAAA,2BAAAjH,MAAA,GAAAwF,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAAjH,MAAA,GAAAuF,OAAA,CAAAyB,QAAA,2BAAA/G,MAAA,GA8FlB,IAAAuH,aAAQ,EAAC,QAAQ,CAAC,EAAAtH,MAAA,GAAAqF,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAA9G,MAAA,GAAAoF,OAAA,CAAAyB,QAAA,uBAAA/B,MAAA,SAAAwC,qBAAA,mBAAA1F,MAAA,GAAA0F,qBAAA,IAAArH,MAAA,GAgBlB,IAAAoH,aAAQ,EAAC,QAAQ,CAAC,EAAAnH,MAAA,GAAAkF,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAA3G,MAAA,GAAAiF,OAAA,CAAAyB,QAAA,uBAAA/B,MAAA,EAAAC,MAAA,IAAA3E,MAAA,GAYlB,IAAAiH,aAAQ,EAAC,QAAQ,CAAC,EAAAhH,MAAA,GAAA+E,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAAxG,MAAA,GAAA8E,OAAA,CAAAyB,QAAA,uBAAA/B,MAAA,IAAAvE,MAAA,GAWlB,IAAA8G,aAAQ,EAAC,QAAQ,CAAC,EAAA7G,MAAA,GAAA4E,OAAA,CAAAyB,QAAA,gBAAAC,QAAA,GAAArG,MAAA,GAAA2E,OAAA,CAAAyB,QAAA,uBAAA/B,MAAA,EAAAA,MAAA,YAAAtG,IAAA,CAAAkC,MAAA,GAAAjC,KAAA,CAAAiC,MAAA,GAAAhC,KAAA,CAAAgC,MAAA,GAAA/B,KAAA,CAAA+B,MAAA,IAAAC,OAAA,0BAAA4G,SAAA;EA1HnB,SAAAjB,WACUkB,YAAyB,EACzBC,UAAqB,EACrBC,QAAuB,EAErBC,kBAAsC,EAChD;IAAA,IAAAC,KAAA;IAAAtD,eAAA,OAAAgC,UAAA;IACAsB,KAAA,GAAA5C,UAAA,OAAAsB,UAAA;IAAQsB,KAAA,CANAJ,YAAyB,GAAzBA,YAAyB;IAAAI,KAAA,CACzBH,UAAqB,GAArBA,UAAqB;IAAAG,KAAA,CACrBF,QAAuB,GAAvBA,QAAuB;IAAAE,KAAA,CAErBD,kBAAsC,GAAtCA,kBAAsC;IAAAC,KAAA,CApE1CC,eAAe,GAAG,IAAIC,GAAG,CAAqB,CAAC;IAAAF,KAAA,CAC/CG,QAAQ,GAAG,IAAID,GAAG,CAA8B,CAAC;IAAAF,KAAA,CACjDI,aAAa,GAAG,IAAIF,GAAG,CAG7B,CAAC;IAAA1D,0BAAA,CAAAwD,KAAA,gBAAAhH,WAAA,EAAAgH,KAAA;IAAAxD,0BAAA,CAAAwD,KAAA,qBAAA/G,YAAA,EAAA+G,KAAA;IAkEDA,KAAA,CAAKF,QAAQ,CAACO,MAAM,CAAAL,KAAK,CAAC;IAC1BA,KAAA,CAAKH,UAAU,CAACS,UAAU,CAAC,UAACxB,MAAM,EAAK;MACrCkB,KAAA,CAAKO,KAAK,CAACzB,MAAM,CAAC;IACpB,CAAC,CAAC;IAAC,OAAAkB,KAAA;EACL;EAACjC,SAAA,CAAAW,UAAA,EAAAiB,SAAA;EAAA,OAAA7C,YAAA,CAAA4B,UAAA;IAAA7B,GAAA;IAAA7B,KAAA;IA7DD;AACF;AACA;AACA;IACE,SACAwF,iBAAiBA,CAACC,EAAU,EAAEC,IAAY,EAAE;MAC1C,IAAI,CAACC,eAAe,CAACF,EAAE,CAAC,GAAGC,IAAI;IACjC;;IAEA;AACF;AACA;AACA;EAHE;IAAA7D,GAAA;IAAA7B,KAAA,EAIA,SACA4F,YAAYA,CAACH,EAAU,EAAEC,IAAY,EAAE;MACrC,IAAI,CAACG,UAAU,CAACJ,EAAE,CAAC,GAAGC,IAAI;IAC5B;EAAC;IAAA7D,GAAA;IAAA7B,KAAA,EAED,SACQ8F,iBAAiBA,CAACC,GAAa,EAAE;MAAA,IAAAC,MAAA;MACvCD,GAAG,CAAC5C,OAAO,CAAC,UAACsC,EAAE,EAAK;QAClB,OAAOO,MAAI,CAACH,UAAU,CAACJ,EAAE,CAAC;QAC1B,OAAOO,MAAI,CAACL,eAAe,CAACF,EAAE,CAAC;MACjC,CAAC,CAAC;IACJ;EAAC;IAAA5D,GAAA;IAAA7B,KAAA,EAED,SACQiG,sBAAsBA,CAACF,GAAa,EAAE;MAAA,IAAAG,MAAA;MAC5CH,GAAG,CAAC5C,OAAO,CAAC,UAACsC,EAAE,EAAK;QAClB,OAAOS,MAAI,CAACP,eAAe,CAACF,EAAE,CAAC;MACjC,CAAC,CAAC;IACJ;EAAC;IAAA5D,GAAA;IAAA7B,KAAA;MAAA,IAAAmG,uBAAA,GAAAhF,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CAED,SAAA4F,QAC4BL,GAAa;QAAA,OAAA7H,YAAA,GAAAqC,CAAA,WAAA8F,QAAA;UAAA,kBAAAA,QAAA,CAAA9H,CAAA;YAAA;cACvC,IAAI,CAAC0H,sBAAsB,CAACF,GAAG,CAAC;YAAC;cAAA,OAAAM,QAAA,CAAA7G,CAAA;UAAA;QAAA,GAAA4G,OAAA;MAAA,CAClC;MAAA,SAFKE,qBAAqBA,CAAAC,EAAA;QAAA,OAAAJ,uBAAA,CAAA9E,KAAA,OAAAD,SAAA;MAAA;MAAA,OAArBkF,qBAAqB;IAAA;EAAA;IAAAzE,GAAA;IAAA7B,KAAA;MAAA,IAAAwG,iBAAA,GAAArF,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CAI3B,SAAAiG,SAAA;QAAA,OAAAvI,YAAA,GAAAqC,CAAA,WAAAmG,SAAA;UAAA,kBAAAA,SAAA,CAAAnI,CAAA;YAAA;cAEE,IAAI,CAACoI,gBAAgB,CAAC,CAAC;YAAC;cAAA,OAAAD,SAAA,CAAAlH,CAAA;UAAA;QAAA,GAAAiH,QAAA;MAAA,CACzB;MAAA,SAFKG,eAAeA,CAAA;QAAA,OAAAJ,iBAAA,CAAAnF,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAfwF,eAAe;IAAA;EAAA;IAAA/E,GAAA;IAAA7B,KAAA,EAIrB,SACQ2G,gBAAgBA,CAAA,EAAG;MACzB,IAAI,CAACd,UAAU,GAAG,CAAC,CAAC;MACpB,IAAI,CAACF,eAAe,GAAG,CAAC,CAAC;IAC3B;EAAC;IAAA9D,GAAA;IAAA7B,KAAA,EAgBD,SAAUuF,KAAKA,CAACzB,MAAW,EAAE;MAAA,IAAA+C,MAAA;MAC3B,IAAMC,SAAS,GAAGhD,MAAM,CAACiD,iBAAS,CAAa;MAC/C,IAAI,CAACD,SAAS,EAAE;MAChB,IAAAE,OAAA,GAAuB,IAAAC,qBAAM,EAACnD,MAAM,CAAC;QAA7BoD,UAAU,GAAAF,OAAA,CAAVE,UAAU;MAClBJ,SAAS,CAAC3D,OAAO,CAAC,UAACtB,GAAG,EAAK;QACzB,IAAMsF,cAAc,GAAGrD,MAAM,CAACjC,GAAG,CAAwB;QACzD,IAAM6D,IAAI,MAAA0B,MAAA,CAAMF,UAAU,OAAAE,MAAA,CAAIvF,GAAG,CAAE;QAEnCsF,cAAc,CAACzB,IAAI,GAAGA,IAAI;QAE1BmB,MAAI,CAAC1B,QAAQ,CAACkC,GAAG,CAAC3B,IAAI,EAAEyB,cAAc,CAAC;MACzC,CAAC,CAAC;IACJ;EAAC;IAAAtF,GAAA;IAAA7B,KAAA,EAED,SAAAsH,IAAIA,CACFC,aAAgB,EAChBC,OAAqB,EACrBC,OAAyE,EACzE;MACA;MACA,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;QACzC,IAAI;UACFC,IAAI,CAACC,SAAS,CAACN,OAAO,CAAC;QACzB,CAAC,CAAC,OAAOO,KAAK,EAAE;UACd;UACAC,OAAO,CAACD,KAAK,CAAC,cAAc,EAAE;YAAEA,KAAK,EAALA,KAAK;YAAEP,OAAO,EAAPA;UAAQ,CAAC,CAAC;UACjD,MAAM,IAAIhE,KAAK,CAAC,2CAA2C,CAAC;QAC9D;MACF;MAEA,IAAMiC,EAAE,GAAG,IAAAwC,QAAE,EAAC,CAAC;MACf,IAAMvC,IAAI,GAAG6B,aAAa,CAAC7B,IAAI;MAC/B+B,OAAO,CAAChC,EAAE,EAAEC,IAAI,EAAE8B,OAAc,CAAC;MAEjC,IAAMU,MAAM,GAAG,IAAI,CAACC,WAAW,CAAC1C,EAAE,CAAC;MACnC,OAAO;QACLA,EAAE,EAAFA,EAAE;QACFyC,MAAM,EAANA;MACF,CAAC;IACH;EAAC;IAAArG,GAAA;IAAA7B,KAAA;MAAA,IAAAoI,MAAA,GAAAjH,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CAED,SAAA6H,SACEC,KAA4B,EAC5BtI,KAAmC,EACnCuI,MAA6D;QAAA,IAAAC,MAAA;QAAA,IAAAC,QAAA,EAAA/C,IAAA,EAAAgD,WAAA;QAAA,OAAAxK,YAAA,GAAAqC,CAAA,WAAAoI,SAAA;UAAA,kBAAAA,SAAA,CAAApK,CAAA;YAAA;cAEvDkK,QAAQ;gBAAA,IAAAG,IAAA,GAAAzH,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CAAG,SAAAqI,SAAOpD,EAAU;kBAAA,OAAAvH,YAAA,GAAAqC,CAAA,WAAAuI,SAAA;oBAAA,kBAAAA,SAAA,CAAAvK,CAAA;sBAAA;wBAAAuK,SAAA,CAAAvK,CAAA;wBAAA,OAC1BiK,MAAI,CAAC/E,SAAS,CAACgC,EAAE,EAAE,IAAI,CAAC;sBAAA;wBAAAqD,SAAA,CAAAvK,CAAA;wBAAA,OACxBgK,MAAM,CAAC9C,EAAE,EAAE,cAAc,CAAC;sBAAA;wBAAA,OAAAqD,SAAA,CAAAtJ,CAAA;oBAAA;kBAAA,GAAAqJ,QAAA;gBAAA,CACjC;gBAAA,gBAHKJ,QAAQA,CAAAM,GAAA;kBAAA,OAAAH,IAAA,CAAAvH,KAAA,OAAAD,SAAA;gBAAA;cAAA;cAAA,MAKVpB,KAAK,YAAYgJ,wBAAgB;gBAAAL,SAAA,CAAApK,CAAA;gBAAA;cAAA;cAC7BmH,IAAI,GAAG1F,KAAK,CAAC0F,IAAI;cAEjBgD,WAAW,GAAG,IAAAO,aAAM,EAAC,UAACC,IAAI,EAAK;gBACnC,IAAMC,KAAK,GAAGX,MAAI,CAACY,MAAM,CAACF,IAAI,CAACzD,EAAE,CAAC;gBAClC,OAAO,CAAA0D,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEzD,IAAI,MAAKA,IAAI;cAC7B,CAAC,EAAE4C,KAAK,CAAC;cAETI,WAAW,CAACvF,OAAO,CAAC,UAACkG,KAAK,EAAK;gBAC7BZ,QAAQ,CAACY,KAAK,CAAC5D,EAAE,CAAC;cACpB,CAAC,CAAC;cAAC,OAAAkD,SAAA,CAAAnJ,CAAA;YAAA;cAAAmJ,SAAA,CAAApK,CAAA;cAAA,OAKCkK,QAAQ,CAACzI,KAAK,CAAC;YAAA;cAAA,OAAA2I,SAAA,CAAAnJ,CAAA;UAAA;QAAA,GAAA6I,QAAA;MAAA,CACtB;MAAA,SA1BKiB,KAAKA,CAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA;QAAA,OAAArB,MAAA,CAAA/G,KAAA,OAAAD,SAAA;MAAA;MAAA,OAALkI,KAAK;IAAA;EAAA;IAAAzH,GAAA;IAAA7B,KAAA;MAAA,IAAA0J,WAAA,GAAAvI,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CA4BX,SAAAmJ,SACgBlE,EAAU,EAAEmE,YAAmC;QAAA,OAAA1L,YAAA,GAAAqC,CAAA,WAAAsJ,SAAA;UAAA,kBAAAA,SAAA,CAAAtL,CAAA;YAAA;cAC7D,IAAI,CAACkF,UAAS,CAAC,CAACgC,EAAE,EAAEmE,YAAY,CAAC;cAAC,KAC9B,IAAI,CAAChF,YAAY,CAACkF,MAAM;gBAAAD,SAAA,CAAAtL,CAAA;gBAAA;cAAA;cAAAsL,SAAA,CAAAtL,CAAA;cAAA,OAGpB,IAAAwL,mBAAI,EAAC,IAAI,EAAStG,UAAS,EAAE,CAACgC,EAAE,EAAEmE,YAAY,CAAC,EAAE;gBACrDI,OAAO,EAAE;cACX,CAAC,CAAC;YAAA;cAAA,OAAAH,SAAA,CAAArK,CAAA;UAAA;QAAA,GAAAmK,QAAA;MAAA,CAEL;MAAA,SATKlG,SAASA,CAAAwG,GAAA,EAAAC,GAAA;QAAA,OAAAR,WAAA,CAAArI,KAAA,OAAAD,SAAA;MAAA;MAAA,OAATqC,SAAS;IAAA;EAAA;IAAA5B,GAAA,EAUJ4B,UAAS;IAAAzD,KAAA,EAApB,SAAAA,MAAsByF,EAAU,EAAEmE,YAAmC,EAAE;MACrE,IAAM3I,OAAO,GAAG,IAAI,CAACmE,aAAa,CAAC+E,GAAG,CAAC1E,EAAE,CAAC;MAC1CxE,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAG2I,YAAY,CAAC;IACzB;EAAC;IAAA/H,GAAA;IAAA7B,KAAA;MAAA,IAAAoK,WAAA,GAAAjJ,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CAED,SAAA6J,SACiB5E,EAAU,EAAE6E,EAAU;QAAA,IAAAC,YAAA,EAAAC,EAAA;QAAA,OAAAtM,YAAA,GAAAqC,CAAA,WAAAkK,SAAA;UAAA,kBAAAA,SAAA,CAAArL,CAAA,GAAAqL,SAAA,CAAAlM,CAAA;YAAA;cAC/BgM,YAAY,GAAG,IAAAG,YAAK,EAACJ,EAAE,CAAC;cAC9B,IAAI,CAACrF,eAAe,CAACoC,GAAG,CAAC5B,EAAE,EAAE;gBAAA,OAAM8E,YAAY,CAACI,MAAM,CAAC,CAAC;cAAA,EAAC;cAACF,SAAA,CAAArL,CAAA;cAAAqL,SAAA,CAAAlM,CAAA;cAAA,OAGlDgM,YAAY;YAAA;cAAAE,SAAA,CAAAlM,CAAA;cAAA;YAAA;cAAAkM,SAAA,CAAArL,CAAA;cAAAoL,EAAA,GAAAC,SAAA,CAAAlL,CAAA;cAAA,MAEZ,IAAIiE,KAAK,CAAC,eAAe,CAAC;YAAA;cAAA,OAAAiH,SAAA,CAAAjL,CAAA;UAAA;QAAA,GAAA6K,QAAA;MAAA,CAEnC;MAAA,SATKO,UAAUA,CAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAV,WAAA,CAAA/I,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAVwJ,UAAU;IAAA;EAAA;IAAA/I,GAAA;IAAA7B,KAAA;MAAA,IAAA+K,WAAA,GAAA5J,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CAWhB,SAAAwK,SACiBvF,EAAU;QAAA,IAAAkF,MAAA;QAAA,OAAAzM,YAAA,GAAAqC,CAAA,WAAA0K,SAAA;UAAA,kBAAAA,SAAA,CAAA1M,CAAA;YAAA;cACnBoM,MAAM,GAAG,IAAI,CAAC1F,eAAe,CAACkF,GAAG,CAAC1E,EAAE,CAAC;cAE3C,IAAIkF,MAAM,EAAE;gBACVA,MAAM,CAAC,CAAC;gBACR,IAAI,CAAC1F,eAAe,UAAO,CAACQ,EAAE,CAAC;cACjC;cACA,IAAI,CAACK,iBAAiB,CAAC,CAACL,EAAE,CAAC,CAAC;YAAC;cAAA,OAAAwF,SAAA,CAAAzL,CAAA;UAAA;QAAA,GAAAwL,QAAA;MAAA,CAC9B;MAAA,SARKE,UAAUA,CAAAC,GAAA;QAAA,OAAAJ,WAAA,CAAA1J,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAV8J,UAAU;IAAA;EAAA;IAAArJ,GAAA;IAAA7B,KAAA;MAAA,IAAAoL,YAAA,GAAAjK,iBAAA,cAAAjD,YAAA,GAAAsC,CAAA,CAUhB,SAAA6K,SACkB5F,EAAU,EAAE6F,SAAiB;QAAA,IAAAC,qBAAA;QAAA,IAAAlC,KAAA;UAAAmC,IAAA;UAAAC,IAAA;UAAAC,IAAA;UAAAC,QAAA;UAAAC,MAAA,GAAAxK,SAAA;QAAA,OAAAlD,YAAA,GAAAqC,CAAA,WAAAsL,SAAA;UAAA,kBAAAA,SAAA,CAAAtN,CAAA;YAAA;cACvC8K,KAAK,GAAG,IAAI,CAACD,MAAM,CAAC3D,EAAE,CAAC,EAE7B;cAAA,KAAA+F,IAAA,GAAAI,MAAA,CAAAjM,MAAA,EAHkD8L,IAAI,OAAAjH,KAAA,CAAAgH,IAAA,OAAAA,IAAA,WAAAE,IAAA,MAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA;gBAAJD,IAAI,CAAAC,IAAA,QAAAE,MAAA,CAAAF,IAAA;cAAA;cAItD,IAAIhE,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,IAAI,CAACyB,KAAK,EAAE;gBACnD,CAAAsC,QAAA,GAAA3D,OAAO,EAAC8D,IAAI,CAAAzK,KAAA,CAAAsK,QAAA,GACV,iJAAiJ,GAC/IL,SAAS,EAAAlE,MAAA,CACRqE,IAAI,CACT,CAAC;cACH;cAEApC,KAAK,aAALA,KAAK,wBAAAkC,qBAAA,GAALlC,KAAK,CAAE0C,eAAe,CAAC5B,GAAG,CAACmB,SAAS,CAAC,cAAAC,qBAAA,uBAArCA,qBAAA,CAAAlK,KAAA,SAA2CoK,IAAI,CAAC;YAAC;cAAA,OAAAI,SAAA,CAAArM,CAAA;UAAA;QAAA,GAAA6L,QAAA;MAAA,CAClD;MAAA,SAbKW,WAAWA,CAAAC,GAAA,EAAAC,IAAA;QAAA,OAAAd,YAAA,CAAA/J,KAAA,OAAAD,SAAA;MAAA;MAAA,OAAX4K,WAAW;IAAA;EAAA;IAAAnK,GAAA;IAAA7B,KAAA,EAejB,SAAAoJ,MAAMA,CAAC3D,EAAU,EAAE;MACjB,IAAMC,IAAI,GAAG,IAAI,CAACG,UAAU,CAACJ,EAAE,CAAE;MACjC,IAAM0G,SAAS,GAAG,IAAI,CAACxG,eAAe,CAACF,EAAE,CAAE;MAE3C,OAAO,IAAI,CAACN,QAAQ,CAACgF,GAAG,CAACzE,IAAI,IAAIyG,SAAS,CAAC;IAC7C;;IAEA;AACF;AACA;EAFE;IAAAtK,GAAA;IAAA7B,KAAA,EAGA,SAAAmI,WAAWA,CAAC1C,EAAU,EAAE;MAAA,IAAA2G,MAAA;MACtB,IAAMC,eAAe,GAAG,IAAI,CAACjH,aAAa,CAAC+E,GAAG,CAAC1E,EAAE,CAAC;MAElD,IAAMyC,MAAM,GAAG,IAAIlH,OAAO,CAAwB,UAACC,OAAO,EAAK;QAC7DmL,MAAI,CAAChH,aAAa,CAACiC,GAAG,CAAC5B,EAAE,EAAE,UAACzF,KAAK,EAAK;UACpCqM,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAGrM,KAAK,CAAC;UACxBiB,OAAO,CAACjB,KAAK,CAAC;QAChB,CAAC,CAAC;MACJ,CAAC,CAAC;MAEF,OAAOkI,MAAM;IACf;EAAC;AAAA,EA/N6BoE,aAAQ,GAAAtO,WAAA,GAAAiF,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,iBAQrC0N,oBAAK,EAAAvQ,KAAA;EAAA6E,YAAA;EAAAD,UAAA;EAAAE,QAAA;EAAAW,WAAA,WAAAA,YAAA;IAAA,OACuC,CAAC,CAAC;EAAA;AAAA,IAAAxD,YAAA,GAAAgF,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,sBAE9C2N,kBAAa,EACbD,oBAAK,EAAAtQ,KAAA;EAAA4E,YAAA;EAAAD,UAAA;EAAAE,QAAA;EAAAW,WAAA,WAAAA,YAAA;IAAA,OAC4C,CAAC,CAAC;EAAA;AAAA,IAAAwB,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,wBAMnD4N,qBAAM,EAAAvQ,KAAA,EAAAC,KAAA,GAAA6C,MAAA,CAAA0N,wBAAA,CAAA3O,OAAA,CAAAc,SAAA,wBAAAd,OAAA,CAAAc,SAAA,GAAAoE,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,mBASN4N,qBAAM,EAAArQ,KAAA,EAAAC,KAAA,GAAA2C,MAAA,CAAA0N,wBAAA,CAAA3O,OAAA,CAAAc,SAAA,mBAAAd,OAAA,CAAAc,SAAA,GAAAoE,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,wBAKN4N,qBAAM,EAAAnQ,KAAA,EAAAC,MAAA,GAAAyC,MAAA,CAAA0N,wBAAA,CAAA3O,OAAA,CAAAc,SAAA,wBAAAd,OAAA,CAAAc,SAAA,GAAAoE,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,6BAQN4N,qBAAM,EAAAjQ,MAAA,EAAAC,MAAA,GAAAuC,MAAA,CAAA0N,wBAAA,CAAA3O,OAAA,CAAAc,SAAA,6BAAAd,OAAA,CAAAc,SAAA,GAAAoE,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,4BAAAnC,MAAA,EAAAC,MAAA,EAAAC,MAAA,GAAAoC,MAAA,CAAA0N,wBAAA,CAAA3O,OAAA,CAAAc,SAAA,4BAAAd,OAAA,CAAAc,SAAA,GAAAoE,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,sBAAAhC,MAAA,EAAAC,MAAA,EAAAC,MAAA,GAAAiC,MAAA,CAAA0N,wBAAA,CAAA3O,OAAA,CAAAc,SAAA,sBAAAd,OAAA,CAAAc,SAAA,GAAAoE,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,uBAiBN4N,qBAAM,EAAAzP,MAAA,EAAAC,MAAA,GAAA+B,MAAA,CAAA0N,wBAAA,CAAA3O,OAAA,CAAAc,SAAA,uBAAAd,OAAA,CAAAc,SAAA,GAAAoE,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,gBAAA3B,MAAA,EAAAC,MAAA,EAAAC,MAAA,GAAA4B,MAAA,CAAA0N,wBAAA,CAAA3O,OAAA,CAAAc,SAAA,gBAAAd,OAAA,CAAAc,SAAA,GAAAoE,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,iBAAAxB,MAAA,EAAAC,MAAA,EAAAC,MAAA,GAAAyB,MAAA,CAAA0N,wBAAA,CAAA3O,OAAA,CAAAc,SAAA,iBAAAd,OAAA,CAAAc,SAAA,GAAAoE,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,iBAAArB,MAAA,EAAAC,MAAA,EAAAC,MAAA,GAAAsB,MAAA,CAAA0N,wBAAA,CAAA3O,OAAA,CAAAc,SAAA,iBAAAd,OAAA,CAAAc,SAAA,GAAAoE,yBAAA,CAAAlF,OAAA,CAAAc,SAAA,kBAAAlB,MAAA,EAAAC,MAAA,EAAAC,MAAA,GAAAmB,MAAA,CAAA0N,wBAAA,CAAA3O,OAAA,CAAAc,SAAA,kBAAAd,OAAA,CAAAc,SAAA,GAAAd,OAAA,MAAAD,MAAA,KAAAA,MAAA,KAAAA,MAAA,KAAAA,MAAA","ignoreList":[]}