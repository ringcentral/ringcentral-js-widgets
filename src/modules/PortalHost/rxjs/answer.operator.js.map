{"version":3,"file":"answer.operator.js","names":["_rxjs","require","answer","exports","_ref","confirm","cancel","switchMap","data","index","result","isObservable","pipe","map","of"],"sources":["src/modules/PortalHost/rxjs/answer.operator.ts"],"sourcesContent":["import {\n  isObservable,\n  map,\n  Observable,\n  ObservableInput,\n  of,\n  switchMap,\n} from 'rxjs';\n\nimport { PortalHostResolveData } from '../PortalHost.interface';\n\ntype ExecFn<T> = (value: T, index: number) => ObservableInput<unknown> | void;\n\n/**\n * answer flow for portal, switch to confirm or cancel,\n * alway switch to original result value when complete confirm or cancel exec\n *\n * @example\n * ```\n * fromPortal(() => this._modalView.open(this.confirmModal))\n * .pipe(\n *   answer({\n *     confirm: () =>\n *       of('confirm').pipe(\n *         tap(() => {\n *           // when confirm will auto switch to another flow\n *         }),\n *       ),\n *     cancel: () => {\n *       // also can do some thing without observable\n *     },\n *   }),\n *   tap((x) => {\n *     console.log(x); // x will be that original window confirm\n *   })\n * )\n * .subscribe();\n * ```\n */\nexport const answer = <T extends PortalHostResolveData>({\n  confirm,\n  cancel,\n}:\n  | {\n      confirm?: ExecFn<T>;\n      cancel: ExecFn<T>;\n    }\n  | {\n      confirm: ExecFn<T>;\n      cancel?: ExecFn<T>;\n    }) =>\n  switchMap<T, ObservableInput<T>>((data, index) => {\n    const result = data ? confirm?.(data, index) : cancel?.(data, index);\n\n    return isObservable(result)\n      ? (result as Observable<unknown>).pipe(map(() => data))\n      : of(data);\n  });\n"],"mappings":";;;;;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAMC,MAAM,GAAAC,OAAA,CAAAD,MAAA,GAAG,SAATA,MAAMA,CAAAE,IAAA;EAAA,IACjBC,OAAO,GAAAD,IAAA,CAAPC,OAAO;IACPC,MAAM,GAAAF,IAAA,CAANE,MAAM;EAAA,OAUN,IAAAC,eAAS,EAAwB,UAACC,IAAI,EAAEC,KAAK,EAAK;IAChD,IAAMC,MAAM,GAAGF,IAAI,GAAGH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAGG,IAAI,EAAEC,KAAK,CAAC,GAAGH,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAGE,IAAI,EAAEC,KAAK,CAAC;IAEpE,OAAO,IAAAE,kBAAY,EAACD,MAAM,CAAC,GACtBA,MAAM,CAAyBE,IAAI,CAAC,IAAAC,SAAG,EAAC;MAAA,OAAML,IAAI;IAAA,EAAC,CAAC,GACrD,IAAAM,QAAE,EAACN,IAAI,CAAC;EACd,CAAC,CAAC;AAAA","ignoreList":[]}