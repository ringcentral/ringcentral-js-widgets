{"version":3,"file":"Initiator.js","names":["_utils","require","_reactantShare","_rxjs","_constant","_delegate","_getMfeMetaLocal","_logger","_PortManager","_destroy","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec0","_dec1","_dec10","_dec11","_dec12","_dec13","_dec14","_class","_class2","_descriptor","_createForOfIteratorHelper","r","e","t","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","_n","F","s","n","done","value","f","TypeError","o","a","u","call","next","_arrayLikeToArray","toString","slice","constructor","name","from","test","_regenerator","toStringTag","i","c","prototype","Generator","Object","create","_regeneratorDefine2","p","y","G","v","d","bind","l","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_initializerDefineProperty","initializer","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","_applyDecoratedDescriptor","keys","forEach","reverse","reduce","_initializerWarningHelper","Error","installedUpdate$","exports","Subject","Initiator","injectable","target","optional","SharedAppOptions","undefined","Reflect","metadata","Function","PortManager","ISharedAppOptions","InitiatorOptions","delegate","_portManager","_sharedAppOptions","_prefix","_version","_buildEnv","_initiatorOptions","_this","reloadPromise","transport","lastActions","beforeInitCallbacks","Set","onInitializeCallbacks","localMfeInfo","getLocalMfeMeta","onlyVersion","shared","_globalThis$localStor","onServer","initialize","onClient","isWorkerMode","_this$_initiatorOptio","_globalThis$location","_globalThis$__rc_shar","hostUrl","basePath","concat","globalThis","location","origin","getHostPath","currWorkerUrl","__rc_shared_worker__","url","logger","log","fullPrefix","prefix","portName","createBroadcastTransport","listen","_ref","_callee","receiveWorkerUrl","version","_this$_initiatorOptio2","_this$_initiatorOptio3","_this$_initiatorOptio4","data","locale","_globalThis$location2","_context","enableNewHostDetection","includes","getCurrentLocale","href","receiveUrl","currentWorkerUrl","currentVersion","receiveVersion","reload","_x","_x2","emit","respond","checkMfeInfo","localStorage","getItem","disableRcSharedWorkerLoggerKey","watch","portDetector","lastAction","action","unshift","_checkMfeInfo","_callee3","_this$localMfeInfo","_this2","_context3","pipe","take","tap","_ref2","_callee2","isInstalled","_context2","syncFullStatePromise","getServerLocalMfeInfo","reloadAllClients","_x3","takeUntilAppDestroy","subscribe","get","_this$_initiatorOptio5","beforeInit","callback","_this3","add","beforeInitialize","targe","_iterator","_step","console","error","err","onInitialize","_this4","initialized","process","env","NODE_ENV","warn","_initialize","_callee4","_iterator2","_step2","_getRef","store","_t","_t2","_context4","getRef","initModules","isServer","_getServerLocalMfeInfo","_callee5","_context5","_reloadAllClients","_callee6","_globalThis$location3","_context6","disableSharedWorker","_globalThis$localStor2","setItem","disableRcSharedWorkerKey","enableSharedWorker","_globalThis$localStor3","removeItem","enableSharedWorkerLogger","_globalThis$localStor4","disableSharedWorkerLogger","_globalThis$localStor5","state","getOwnPropertyDescriptor"],"sources":["src/modules/Initiator.ts"],"sourcesContent":["/* eslint-disable no-console */\nimport { getHostPath } from '@ringcentral-integration/utils';\nimport {\n  action,\n  createBroadcastTransport,\n  injectable,\n  type ISharedAppOptions,\n  optional,\n  SharedAppOptions,\n  state,\n  type Transport,\n  getRef,\n  watch,\n  ILastActionData,\n} from 'reactant-share';\nimport { Subject, take, tap } from 'rxjs';\n\nimport {\n  disableRcSharedWorkerKey,\n  disableRcSharedWorkerLoggerKey,\n} from '../constant';\nimport { delegate } from '../lib/decorators/delegate';\nimport { getLocalMfeMeta } from '../lib/getMfeMetaLocal';\nimport { logger } from '../lib/logger';\n\nimport { PortManager } from './PortManager';\nimport { takeUntilAppDestroy } from './destroy';\n\ntype InitializeCallbacks = () => void | Promise<void>;\n\ntype BeforeInitCallbacks = (target: any) => void | Promise<void>;\n\ntype BroadcastEvents = {\n  emit: { reload: (url: string, version?: string) => void };\n  listen: { reload: (url: string, version?: string) => void };\n};\n\nexport const installedUpdate$ = new Subject<boolean>();\n\nexport interface InitiatorOptions {\n  /**\n   * enable redirect to upgrade page when a new host is found with different shared worker url\n   */\n  enableNewHostDetection?: boolean;\n  /**\n   * get current locale\n   */\n  getCurrentLocale?: () => string;\n  /**\n   * base path for the application (e.g. '/integration/scheduling-tool/prod/rc/')\n   * When provided, takes priority over getHostPath\n   */\n  basePath?: string;\n}\n\n@injectable({\n  name: 'Initiator',\n})\nexport class Initiator {\n  /**\n   * reload promise for reload all tabs\n   */\n  reloadPromise: Promise<void> | null = null;\n\n  /**\n   * making this a class variable purely for testing purposes, so that we can emit the reload event\n   * in the browser\n   * https://test_it_domain/test-cases/RCI-6755\n   *\n   * app.modules.Initiator.transport.emit('reload', receiveWorkerUrl, version);\n   */\n  private transport?: Transport<BroadcastEvents>;\n\n  constructor(\n    private _portManager: PortManager,\n    @optional(SharedAppOptions) private _sharedAppOptions?: ISharedAppOptions,\n    @optional('Prefix') private _prefix?: string,\n    @optional('Version') private _version?: string,\n    @optional('BuildEnv') private _buildEnv?: string,\n    @optional('InitiatorOptions') private _initiatorOptions?: InitiatorOptions,\n  ) {\n    if (this._portManager.shared) {\n      this._portManager.onServer(() => {\n        this.initialize();\n      });\n      this._portManager.onClient(() => {\n        if (this._portManager.isWorkerMode) {\n          // Priority: basePath > default getHostPath()\n          const hostUrl = this._initiatorOptions?.basePath\n            ? `${globalThis.location?.origin || ''}${this.basePath}`\n            : getHostPath();\n          const currWorkerUrl = hostUrl + globalThis.__rc_shared_worker__?.url;\n\n          logger.log(\n            '[Initiator] worker mode, check should reload to get latest shared worker',\n            {\n              fullPrefix: this.prefix,\n              prefix: this._prefix,\n              portName: this._sharedAppOptions!.portName,\n              name: this._sharedAppOptions!.name,\n              currWorkerUrl,\n            },\n          );\n\n          const transport: Transport<BroadcastEvents> =\n            createBroadcastTransport(this.prefix);\n          this.transport = transport;\n          // When an old tab has an old shared worker running,\n          // the new shared worker will broadcast and cause all tabs of the old shared worker to auto-refresh,\n          // in order to share the new shared worker.\n          transport.listen('reload', async (receiveWorkerUrl, version) => {\n            // when the receiveUrl is not same current host, that not in same app version, should need some action\n            if (\n              this._initiatorOptions?.enableNewHostDetection &&\n              !receiveWorkerUrl.includes(hostUrl)\n            ) {\n              const data = {\n                hostUrl,\n                receiveWorkerUrl,\n                currWorkerUrl,\n              };\n              logger.log(\n                '[Initiator] app not run in same host, ignore reload event',\n                data,\n              );\n\n              const locale = this._initiatorOptions?.getCurrentLocale?.();\n              // redirect to upgrade page, to prevent use old version app of worker\n              location.href = `${hostUrl}upgrade.html?locale=${locale}`;\n              return;\n            }\n\n            if (\n              receiveWorkerUrl !== currWorkerUrl ||\n              (version && version !== this._version)\n            ) {\n              await this.reloadPromise;\n              logger.log(\n                '[Initiator] app need reload to apply latest shared worker',\n                {\n                  receiveUrl: receiveWorkerUrl,\n                  currentWorkerUrl: currWorkerUrl,\n                  currentVersion: this._version,\n                  receiveVersion: version,\n                },\n              );\n\n              globalThis.location?.reload();\n            }\n          });\n          transport.emit(\n            { name: 'reload', respond: false },\n            currWorkerUrl,\n            this._version,\n          );\n          this.checkMfeInfo();\n        }\n      });\n\n      if (globalThis.localStorage?.getItem(disableRcSharedWorkerLoggerKey)) {\n        watch(\n          this,\n          () => this._portManager.portDetector.lastAction.action,\n          (action) => {\n            this.lastActions.unshift(action);\n            this.lastActions.length = 100;\n          },\n        );\n      }\n    } else {\n      // wait for module is created\n      Promise.resolve().then(() => {\n        this.initialize();\n      });\n    }\n  }\n\n  private lastActions: ILastActionData[] = [];\n\n  async checkMfeInfo() {\n    if (Object.keys(this.localMfeInfo ?? {}).length === 0) return;\n    installedUpdate$\n      .pipe(\n        take(1),\n        tap(async (isInstalled) => {\n          if (isInstalled) {\n            await this._portManager.portDetector.syncFullStatePromise;\n            this.getServerLocalMfeInfo().then((localMfeInfo = {}) => {\n              Object.keys(localMfeInfo).forEach((name) => {\n                if (this.localMfeInfo[name] !== localMfeInfo[name]) {\n                  // ensure all clients reload to get latest version\n                  this.reloadAllClients();\n                }\n              });\n            });\n          }\n        }),\n        takeUntilAppDestroy,\n      )\n      .subscribe();\n  }\n\n  get prefix() {\n    return `${this._sharedAppOptions!.name}${\n      this._buildEnv ? `-${this._buildEnv}` : ''\n    }${this._prefix ? `-${this._prefix}` : ''}`;\n  }\n\n  get basePath() {\n    return this._initiatorOptions?.basePath || '/';\n  }\n\n  private beforeInitCallbacks = new Set<BeforeInitCallbacks>();\n\n  /**\n   * beforeInit for all RC modules\n   */\n  beforeInit(callback: BeforeInitCallbacks) {\n    this.beforeInitCallbacks.add(callback);\n    return () => {\n      this.beforeInitCallbacks.delete(callback);\n    };\n  }\n\n  beforeInitialize(targe: any) {\n    for (const callback of this.beforeInitCallbacks) {\n      try {\n        callback(targe);\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  }\n\n  private onInitializeCallbacks = new Set<InitializeCallbacks>();\n\n  /**\n   * callback for initialize\n   */\n  onInitialize(callback: InitializeCallbacks) {\n    if (this.initialized) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(\n          'Initiator is already initialized, ignore onInitialize callback',\n        );\n      }\n      return () => {};\n    }\n    this.onInitializeCallbacks.add(callback);\n    return () => {\n      this.onInitializeCallbacks.delete(callback);\n    };\n  }\n\n  protected async initialize() {\n    for (const callback of this.onInitializeCallbacks) {\n      try {\n        await callback();\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    // wait for the store is initialized\n    await Promise.resolve();\n    const { store } = getRef(this);\n    // Make sure the store is initialized before the module is initialized\n    if (!this.initialized && store) {\n      // Workaround about support asynchronous externals.localStorage API on RC SDK\n      // Follow this ticket: https://github.com/ringcentral/ringcentral-js/issues/187\n      // Init dispatch for trigger all stores subscriptions\n      this.initModules();\n    }\n  }\n\n  @state\n  initialized = false;\n\n  @action\n  initModules() {\n    this.initialized = true;\n  }\n\n  get shouldActivate() {\n    return (\n      (this._portManager.isServer || !this._portManager.shared) &&\n      this.initialized\n    );\n  }\n\n  localMfeInfo = getLocalMfeMeta({\n    onlyVersion: true,\n  });\n\n  @delegate('server')\n  async getServerLocalMfeInfo() {\n    return this.localMfeInfo;\n  }\n\n  @delegate('clients')\n  async reloadAllClients() {\n    globalThis.location?.reload();\n  }\n\n  /**\n   * disable shared worker\n   * !!! this method should be called in webpage dev console for debugging\n   */\n  private disableSharedWorker() {\n    globalThis.localStorage?.setItem(disableRcSharedWorkerKey, 'true');\n  }\n\n  /**\n   * enable shared worker\n   * !!! this method should be called in webpage dev console for debugging\n   */\n  private enableSharedWorker() {\n    globalThis.localStorage?.removeItem(disableRcSharedWorkerKey);\n  }\n\n  /**\n   * enable shared worker logger\n   * !!! this method should be called in webpage dev console for debugging\n   */\n  private enableSharedWorkerLogger() {\n    globalThis.localStorage?.setItem(disableRcSharedWorkerLoggerKey, 'true');\n  }\n\n  /**\n   * disable shared worker logger\n   * !!! this method should be called in webpage dev console for debugging\n   */\n  private disableSharedWorkerLogger() {\n    globalThis.localStorage?.removeItem(disableRcSharedWorkerLoggerKey);\n  }\n}\n"],"mappings":"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","ignoreList":[]}