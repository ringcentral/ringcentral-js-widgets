{"version":3,"file":"getMfeMeta.js","names":["_mfeReact","require","_excluded","_defineProperty","e","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","TypeError","String","Number","_objectWithoutProperties","o","_objectWithoutPropertiesLoose","getOwnPropertySymbols","n","length","indexOf","propertyIsEnumerable","hasOwnProperty","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","l","iterator","u","f","next","done","push","isArray","getMfeDeps","exports","_meta$data$modules","_modules$name$depende","_modules$name","meta","getMeta","data","main","modules","dependencies","getMfeMeta","_getMeta","_name$dependencies","_name","_getMeta$data$modules","_getMeta2","_ref","arguments","undefined","onlyVersion","_ref$prefix","prefix","entries","reduce","acc","_ref3","_config$version","_ref4","_ref2","exposes","config","assign","concat","version"],"sources":["src/getMfeMeta.ts"],"sourcesContent":["import { getMeta } from '@ringcentral/mfe-react';\nimport type { Dependency } from '@ringcentral/mfe-shared';\n\nexport const getMfeDeps = (): Record<\n  string,\n  {\n    version: string;\n    entry: string;\n  }\n> => {\n  const meta = getMeta();\n  if (!meta?.data.main) return {};\n  const name = meta.data.main;\n  const modules = meta.data.modules ?? {};\n  return modules[name]?.dependencies ?? {};\n};\n\ntype MfeModules = Record<\n  string,\n  {\n    version: string;\n    entry: string;\n    exposes: Record<string, string>;\n    dependencies: Record<string, Dependency>;\n  }\n>;\n\n/**\n * Get MFE meta data from the current app shell.\n *\n * @param options\n * @returns\n */\nexport const getMfeMeta = ({\n  onlyVersion,\n  prefix = '',\n}: { onlyVersion?: boolean; prefix?: string } = {}) => {\n  const name = getMeta()?.data.main;\n  if (!name) return {};\n  const modules = ((getMeta()?.data.modules ?? {})[name]?.dependencies ??\n    {}) as MfeModules;\n  return Object.entries(modules).reduce(\n    (acc, [name, { dependencies, exposes, ...config }]) =>\n      Object.assign(acc, {\n        [`${prefix}${name}`]: onlyVersion ? config.version ?? '*' : config,\n      }),\n    {},\n  );\n};\n"],"mappings":"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","ignoreList":[]}