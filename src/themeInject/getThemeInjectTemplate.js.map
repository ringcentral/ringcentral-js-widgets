{"version":3,"file":"getThemeInjectTemplate.js","names":["_fsExtra","_interopRequireDefault","require","_template","_path","_themeMap","e","__esModule","getSuiPrimary","obj","theme","Object","entries","foreground","concat","background","loadingRing","getThemeInjectTemplate","code","options","arguments","length","undefined","renderAs","mainSource","fs","readFileSync","path","join","__dirname","toString","themeMap","Error","primaryColor","darkColors","contrastColors","scriptContent","template","bgColor","darkPrimaryColor","darkBgColor","darkLoadingRing","contrastPrimaryColor","contrastBgColor","contrastLoadingRing"],"sources":["src/themeInject/getThemeInjectTemplate.ts"],"sourcesContent":["import fs from 'fs-extra';\nimport template from 'lodash/template';\nimport path from 'path';\n\nimport { themeMap } from './themeMap';\n\nconst getSuiPrimary = (obj: any) => {\n  const theme: any = Object.entries(obj)[0][1];\n\n  return {\n    foreground: `rgb(${theme['--s-primary-b']})`,\n    background: `rgb(${theme['--s-neutral-base']})`,\n    loadingRing: `rgb(${theme['--s-neutral-b4']})`,\n  };\n};\n// node_modules/@ringcentral/spring-theme/tailwind/themes\nexport function getThemeInjectTemplate(\n  code: keyof typeof themeMap | undefined,\n  options: {\n    /**\n     * rawScript: return script content without script tag\n     * inlineScript: return script content with script tag\n     */\n    renderAs?: 'inlineScript' | 'rawScript';\n  } = {\n    renderAs: 'inlineScript',\n  },\n) {\n  const { renderAs } = options;\n  // brandConfig.code\n  const mainSource = fs\n    .readFileSync(path.join(__dirname, './inline/themeInject.js'))\n    .toString();\n\n  const theme = code && themeMap[code];\n\n  if (!theme)\n    throw new Error('theme not found, please add the brand code into themeMap');\n\n  const primaryColor = getSuiPrimary(theme);\n  const darkColors = getSuiPrimary(themeMap['rc_dark']);\n  const contrastColors = getSuiPrimary(themeMap['rc_contrast']);\n\n  const scriptContent = template(mainSource)({\n    primaryColor: primaryColor.foreground,\n    bgColor: primaryColor.background,\n    loadingRing: primaryColor.loadingRing,\n\n    darkPrimaryColor: darkColors.foreground,\n    darkBgColor: darkColors.background,\n    darkLoadingRing: darkColors.loadingRing,\n\n    contrastPrimaryColor: contrastColors.foreground,\n    contrastBgColor: contrastColors.background,\n    contrastLoadingRing: contrastColors.loadingRing,\n  });\n\n  if (renderAs === 'inlineScript') {\n    return /*html*/ `<script>${scriptContent}</script>`;\n  }\n  return scriptContent;\n}\n"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,SAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,KAAA,GAAAH,sBAAA,CAAAC,OAAA;AAEA,IAAAG,SAAA,GAAAH,OAAA;AAAsC,SAAAD,uBAAAK,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAEtC,IAAME,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,GAAQ,EAAK;EAClC,IAAMC,KAAU,GAAGC,MAAM,CAACC,OAAO,CAACH,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAE5C,OAAO;IACLI,UAAU,SAAAC,MAAA,CAASJ,KAAK,CAAC,eAAe,CAAC,MAAG;IAC5CK,UAAU,SAAAD,MAAA,CAASJ,KAAK,CAAC,kBAAkB,CAAC,MAAG;IAC/CM,WAAW,SAAAF,MAAA,CAASJ,KAAK,CAAC,gBAAgB,CAAC;EAC7C,CAAC;AACH,CAAC;AACD;AACO,SAASO,sBAAsBA,CACpCC,IAAuC,EAUvC;EAAA,IATAC,OAMC,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG;IACFG,QAAQ,EAAE;EACZ,CAAC;EAED,IAAQA,QAAQ,GAAKJ,OAAO,CAApBI,QAAQ;EAChB;EACA,IAAMC,UAAU,GAAGC,mBAAE,CAClBC,YAAY,CAACC,gBAAI,CAACC,IAAI,CAACC,SAAS,EAAE,yBAAyB,CAAC,CAAC,CAC7DC,QAAQ,CAAC,CAAC;EAEb,IAAMpB,KAAK,GAAGQ,IAAI,IAAIa,kBAAQ,CAACb,IAAI,CAAC;EAEpC,IAAI,CAACR,KAAK,EACR,MAAM,IAAIsB,KAAK,CAAC,0DAA0D,CAAC;EAE7E,IAAMC,YAAY,GAAGzB,aAAa,CAACE,KAAK,CAAC;EACzC,IAAMwB,UAAU,GAAG1B,aAAa,CAACuB,kBAAQ,CAAC,SAAS,CAAC,CAAC;EACrD,IAAMI,cAAc,GAAG3B,aAAa,CAACuB,kBAAQ,CAAC,aAAa,CAAC,CAAC;EAE7D,IAAMK,aAAa,GAAG,IAAAC,oBAAQ,EAACb,UAAU,CAAC,CAAC;IACzCS,YAAY,EAAEA,YAAY,CAACpB,UAAU;IACrCyB,OAAO,EAAEL,YAAY,CAAClB,UAAU;IAChCC,WAAW,EAAEiB,YAAY,CAACjB,WAAW;IAErCuB,gBAAgB,EAAEL,UAAU,CAACrB,UAAU;IACvC2B,WAAW,EAAEN,UAAU,CAACnB,UAAU;IAClC0B,eAAe,EAAEP,UAAU,CAAClB,WAAW;IAEvC0B,oBAAoB,EAAEP,cAAc,CAACtB,UAAU;IAC/C8B,eAAe,EAAER,cAAc,CAACpB,UAAU;IAC1C6B,mBAAmB,EAAET,cAAc,CAACnB;EACtC,CAAC,CAAC;EAEF,IAAIO,QAAQ,KAAK,cAAc,EAAE;IAC/B,OAAO,mBAAAT,MAAA,CAAoBsB,aAAa;EAC1C;EACA,OAAOA,aAAa;AACtB","ignoreList":[]}